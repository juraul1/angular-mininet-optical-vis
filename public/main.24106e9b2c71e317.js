var Hk=Object.defineProperty,zk=Object.defineProperties,Gk=Object.getOwnPropertyDescriptors,px=Object.getOwnPropertySymbols,qk=Object.prototype.hasOwnProperty,Wk=Object.prototype.propertyIsEnumerable,gx=(jt,et,M)=>et in jt?Hk(jt,et,{enumerable:!0,configurable:!0,writable:!0,value:M}):jt[et]=M,mx=(jt,et)=>{for(var M in et||(et={}))qk.call(et,M)&&gx(jt,M,et[M]);if(px)for(var M of px(et))Wk.call(et,M)&&gx(jt,M,et[M]);return jt},yx=(jt,et)=>zk(jt,Gk(et));(self.webpackChunkmininet_optical_visualizer=self.webpackChunkmininet_optical_visualizer||[]).push([[179],{2011:(jt,et,M)=>{"use strict";M.d(et,{Dh:()=>Oe,GT:()=>Ue,cc:()=>ot,hO:()=>kt,on:()=>oe,pX:()=>xe,xv:()=>Le});var D=M(5e3),be=M(127),Q=M(5813);jt=M.hmd(jt);const Fe=["ngOnDestroy"],xe=(Me,lt,bt,qe={})=>new Proxy(Me,{get:(We,Xe)=>bt.runOutsideAngular(()=>{var ut;if(Me[Xe])return(null===(ut=null==qe?void 0:qe.spy)||void 0===ut?void 0:ut.get)&&qe.spy.get(Xe,Me[Xe]),Me[Xe];if(Fe.indexOf(Xe)>-1)return()=>{};const vt=lt.toPromise().then(ce=>{const Ke=ce&&ce[Xe];return"function"==typeof Ke?Ke.bind(ce):Ke&&Ke.then?Ke.then(fe=>bt.run(()=>fe)):bt.run(()=>Ke)});return new Proxy(()=>{},{get:(ce,Ke)=>vt[Ke],apply:(ce,Ke,fe)=>vt.then(Re=>{var De;const Ze=Re&&Re(...fe);return(null===(De=null==qe?void 0:qe.spy)||void 0===De?void 0:De.apply)&&qe.spy.apply(Xe,fe,Ze),Ze})})})}),Ue=(Me,lt)=>{lt.forEach(bt=>{Object.getOwnPropertyNames(bt.prototype||bt).forEach(qe=>{Object.defineProperty(Me.prototype,qe,Object.getOwnPropertyDescriptor(bt.prototype||bt,qe))})})};class Be{constructor(lt){return lt}}const Oe=new D.OlP("angularfire2.app.options"),Le=new D.OlP("angularfire2.app.name");function oe(Me,lt,bt){const We="object"==typeof bt&&bt||{};We.name=We.name||"string"==typeof bt&&bt||"[DEFAULT]";const ut=be.Z.apps.filter(vt=>vt&&vt.name===We.name)[0]||lt.runOutsideAngular(()=>be.Z.initializeApp(Me,We));try{JSON.stringify(Me)!==JSON.stringify(ut.options)&&ue("error",`${ut.name} Firebase App already initialized with different options${jt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(vt){}return new Be(ut)}const ue=(Me,...lt)=>{(0,D.X6Q)()&&"undefined"!=typeof console&&console[Me](...lt)},ye={provide:Be,useFactory:oe,deps:[Oe,D.R0b,[new D.FiY,Le]]};let kt=(()=>{class Me{constructor(bt){be.Z.registerVersion("angularfire",Q.q4.full,"core"),be.Z.registerVersion("angularfire",Q.q4.full,"app-compat"),be.Z.registerVersion("angular",D.q4F.full,bt.toString())}static initializeApp(bt,qe){return{ngModule:Me,providers:[{provide:Oe,useValue:bt},{provide:Le,useValue:qe}]}}}return Me.\u0275fac=function(bt){return new(bt||Me)(D.LFG(D.Lbi))},Me.\u0275mod=D.oAB({type:Me}),Me.\u0275inj=D.cJS({providers:[ye]}),Me})();function ot(Me,lt,bt,qe,We){const[,Xe,ut]=globalThis.\u0275AngularfireInstanceCache.find(vt=>vt[0]===Me)||[];if(Xe)return function Ye(Me,lt){try{return Me.toString()===lt.toString()}catch(bt){return Me===lt}}(We,ut)||(ge("error",`${lt} was already initialized on the ${bt} Firebase App with different settings.${It?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:We,was:ut})),Xe;{const vt=qe();return globalThis.\u0275AngularfireInstanceCache.push([Me,vt,We]),vt}}const It=!!jt.hot,ge=(Me,...lt)=>{(0,D.X6Q)()&&"undefined"!=typeof console&&console[Me](...lt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(jt,et,M)=>{"use strict";M.d(et,{q4:()=>nc,iC:()=>um,HU:()=>cp,vb:()=>ov,JM:()=>Zc});var D=M(5e3),be=M(5867),Q=M(5861),Fe=M(9681),xe=M(2090),Ue=M(4859),Be=M(1877),Oe=M(8766);const Le="@firebase/installations",oe="0.5.11",ye=`w:${oe}`,kt="FIS_v2",lt=new xe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function bt(F){return F instanceof xe.ZR&&F.code.includes("request-failed")}function qe({projectId:F}){return`https://firebaseinstallations.googleapis.com/v1/projects/${F}/installations`}function We(F){return{token:F.token,requestStatus:2,expiresIn:Re(F.expiresIn),creationTime:Date.now()}}function Xe(F,B){return ut.apply(this,arguments)}function ut(){return(ut=(0,Q.Z)(function*(F,B){const re=(yield B.json()).error;return lt.create("request-failed",{requestName:F,serverCode:re.code,serverMessage:re.message,serverStatus:re.status})})).apply(this,arguments)}function vt({apiKey:F}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F})}function ce(F,{refreshToken:B}){const W=vt(F);return W.append("Authorization",function De(F){return`${kt} ${F}`}(B)),W}function Ke(F){return fe.apply(this,arguments)}function fe(){return(fe=(0,Q.Z)(function*(F){const B=yield F();return B.status>=500&&B.status<600?F():B})).apply(this,arguments)}function Re(F){return Number(F.replace("s","000"))}function Ze(F,B){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,Q.Z)(function*({appConfig:F,heartbeatServiceProvider:B},{fid:W}){const re=qe(F),we=vt(F),Pe=B.getImmediate({optional:!0});if(Pe){const vn=yield Pe.getHeartbeatsHeader();vn&&we.append("x-firebase-client",vn)}const Nt={method:"POST",headers:we,body:JSON.stringify({fid:W,authVersion:kt,appId:F.appId,sdkVersion:ye})},Wt=yield Ke(()=>fetch(re,Nt));if(Wt.ok){const vn=yield Wt.json();return{fid:vn.fid||W,registrationStatus:2,refreshToken:vn.refreshToken,authToken:We(vn.authToken)}}throw yield Xe("Create Installation",Wt)})).apply(this,arguments)}function ht(F){return new Promise(B=>{setTimeout(B,F)})}const at=/^[cdef][\w-]{21}$/;function _t(){try{const F=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(F),F[0]=112+F[0]%16;const W=function Fn(F){return function qt(F){return btoa(String.fromCharCode(...F)).replace(/\+/g,"-").replace(/\//g,"_")}(F).substr(0,22)}(F);return at.test(W)?W:""}catch(F){return""}}function lr(F){return`${F.appName}!${F.appId}`}const jn=new Map;function Kn(F,B){const W=lr(F);On(W,B),function Os(F,B){const W=function oi(){return!gs&&"BroadcastChannel"in self&&(gs=new BroadcastChannel("[Firebase] FID Change"),gs.onmessage=F=>{On(F.data.key,F.data.fid)}),gs}();W&&W.postMessage({key:F,fid:B}),function di(){0===jn.size&&gs&&(gs.close(),gs=null)}()}(W,B)}function On(F,B){const W=jn.get(F);if(W)for(const re of W)re(B)}let gs=null;const ms="firebase-installations-store";let to=null;function pn(){return to||(to=(0,Oe.X3)("firebase-installations-database",1,{upgrade:(F,B)=>{0===B&&F.createObjectStore(ms)}})),to}function Us(F,B){return xr.apply(this,arguments)}function xr(){return(xr=(0,Q.Z)(function*(F,B){const W=lr(F),we=(yield pn()).transaction(ms,"readwrite"),Pe=we.objectStore(ms),$e=yield Pe.get(W);return yield Pe.put(B,W),yield we.done,(!$e||$e.fid!==B.fid)&&Kn(F,B.fid),B})).apply(this,arguments)}function Er(F){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,Q.Z)(function*(F){const B=lr(F),re=(yield pn()).transaction(ms,"readwrite");yield re.objectStore(ms).delete(B),yield re.done})).apply(this,arguments)}function Bs(F,B){return fi.apply(this,arguments)}function fi(){return(fi=(0,Q.Z)(function*(F,B){const W=lr(F),we=(yield pn()).transaction(ms,"readwrite"),Pe=we.objectStore(ms),$e=yield Pe.get(W),Nt=B($e);return void 0===Nt?yield Pe.delete(W):yield Pe.put(Nt,W),yield we.done,Nt&&(!$e||$e.fid!==Nt.fid)&&Kn(F,Nt.fid),Nt})).apply(this,arguments)}function Mr(F){return no.apply(this,arguments)}function no(){return(no=(0,Q.Z)(function*(F){let B;const W=yield Bs(F.appConfig,re=>{const we=ys(re),Pe=qn(F,we);return B=Pe.registrationPromise,Pe.installationEntry});return""===W.fid?{installationEntry:yield B}:{installationEntry:W,registrationPromise:B}})).apply(this,arguments)}function ys(F){return Vs(F||{fid:_t(),registrationStatus:0})}function qn(F,B){if(0===B.registrationStatus){if(!navigator.onLine)return{installationEntry:B,registrationPromise:Promise.reject(lt.create("app-offline"))};const W={fid:B.fid,registrationStatus:1,registrationTime:Date.now()},re=function rn(F,B){return mn.apply(this,arguments)}(F,W);return{installationEntry:W,registrationPromise:re}}return 1===B.registrationStatus?{installationEntry:B,registrationPromise:Ci(F)}:{installationEntry:B}}function mn(){return(mn=(0,Q.Z)(function*(F,B){try{const W=yield Ze(F,B);return Us(F.appConfig,W)}catch(W){throw bt(W)&&409===W.customData.serverCode?yield Er(F.appConfig):yield Us(F.appConfig,{fid:B.fid,registrationStatus:0}),W}})).apply(this,arguments)}function Ci(F){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,Q.Z)(function*(F){let B=yield Un(F.appConfig);for(;1===B.registrationStatus;)yield ht(100),B=yield Un(F.appConfig);if(0===B.registrationStatus){const{installationEntry:W,registrationPromise:re}=yield Mr(F);return re||W}return B})).apply(this,arguments)}function Un(F){return Bs(F,B=>{if(!B)throw lt.create("installation-not-found");return Vs(B)})}function Vs(F){return function Pi(F){return 1===F.registrationStatus&&F.registrationTime+1e4<Date.now()}(F)?{fid:F.fid,registrationStatus:0}:F}function pi(F,B){return sn.apply(this,arguments)}function sn(){return(sn=(0,Q.Z)(function*({appConfig:F,heartbeatServiceProvider:B},W){const re=ve(F,W),we=ce(F,W),Pe=B.getImmediate({optional:!0});if(Pe){const vn=yield Pe.getHeartbeatsHeader();vn&&we.append("x-firebase-client",vn)}const Nt={method:"POST",headers:we,body:JSON.stringify({installation:{sdkVersion:ye,appId:F.appId}})},Wt=yield Ke(()=>fetch(re,Nt));if(Wt.ok)return We(yield Wt.json());throw yield Xe("Generate Auth Token",Wt)})).apply(this,arguments)}function ve(F,{fid:B}){return`${qe(F)}/${B}/authTokens:generate`}function se(F){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,Q.Z)(function*(F,B=!1){let W;const re=yield Bs(F.appConfig,Pe=>{if(!Dn(Pe))throw lt.create("not-registered");const $e=Pe.authToken;if(!B&&nr($e))return Pe;if(1===$e.requestStatus)return W=Ie(F,B),Pe;{if(!navigator.onLine)throw lt.create("app-offline");const Nt=Bn(Pe);return W=Ct(F,Nt),Nt}});return W?yield W:re.authToken})).apply(this,arguments)}function Ie(F,B){return ne.apply(this,arguments)}function ne(){return(ne=(0,Q.Z)(function*(F,B){let W=yield nt(F.appConfig);for(;1===W.authToken.requestStatus;)yield ht(100),W=yield nt(F.appConfig);const re=W.authToken;return 0===re.requestStatus?se(F,B):re})).apply(this,arguments)}function nt(F){return Bs(F,B=>{if(!Dn(B))throw lt.create("not-registered");return function Zr(F){return 1===F.requestStatus&&F.requestTime+1e4<Date.now()}(B.authToken)?Object.assign(Object.assign({},B),{authToken:{requestStatus:0}}):B})}function Ct(F,B){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,Q.Z)(function*(F,B){try{const W=yield pi(F,B),re=Object.assign(Object.assign({},B),{authToken:W});return yield Us(F.appConfig,re),W}catch(W){if(!bt(W)||401!==W.customData.serverCode&&404!==W.customData.serverCode){const re=Object.assign(Object.assign({},B),{authToken:{requestStatus:0}});yield Us(F.appConfig,re)}else yield Er(F.appConfig);throw W}})).apply(this,arguments)}function Dn(F){return void 0!==F&&2===F.registrationStatus}function nr(F){return 2===F.requestStatus&&!function ar(F){const B=Date.now();return B<F.creationTime||F.creationTime+F.expiresIn<B+36e5}(F)}function Bn(F){const B={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},F),{authToken:B})}function Ma(){return(Ma=(0,Q.Z)(function*(F){const B=F,{installationEntry:W,registrationPromise:re}=yield Mr(B);return re?re.catch(console.error):se(B).catch(console.error),W.fid})).apply(this,arguments)}function Ra(){return(Ra=(0,Q.Z)(function*(F,B=!1){const W=F;return yield $r(W),(yield se(W,B)).token})).apply(this,arguments)}function $r(F){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,Q.Z)(function*(F){const{registrationPromise:B}=yield Mr(F);B&&(yield B)})).apply(this,arguments)}function au(F){return lt.create("missing-app-config-values",{valueName:F})}const ai="installations",on=F=>{const B=F.getProvider("app").getImmediate(),W=function gi(F){if(!F||!F.options)throw au("App Configuration");if(!F.name)throw au("App Name");const B=["projectId","apiKey","appId"];for(const W of B)if(!F.options[W])throw au(W);return{appName:F.name,projectId:F.options.projectId,apiKey:F.options.apiKey,appId:F.options.appId}}(B);return{app:B,appConfig:W,heartbeatServiceProvider:(0,Fe._getProvider)(B,"heartbeat"),_delete:()=>Promise.resolve()}},hr=F=>{const B=F.getProvider("app").getImmediate(),W=(0,Fe._getProvider)(B,ai).getImmediate();return{getId:()=>function xa(F){return Ma.apply(this,arguments)}(W),getToken:we=>function ia(F){return Ra.apply(this,arguments)}(W,we)}};(function _s(){(0,Fe._registerComponent)(new Ue.wA(ai,on,"PUBLIC")),(0,Fe._registerComponent)(new Ue.wA("installations-internal",hr,"PRIVATE"))})(),(0,Fe.registerVersion)(Le,oe),(0,Fe.registerVersion)(Le,oe,"esm2017");const _o="@firebase/remote-config",tt=new xe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class qf{constructor(B,W,re,we){this.client=B,this.storage=W,this.storageCache=re,this.logger=we}isCachedDataFresh(B,W){if(!W)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const re=Date.now()-W,we=re<=B;return this.logger.debug(`Config fetch cache check. Cache age millis: ${re}. Cache max age millis (minimumFetchIntervalMillis setting): ${B}. Is cache hit: ${we}.`),we}fetch(B){var W=this;return(0,Q.Z)(function*(){const[re,we]=yield Promise.all([W.storage.getLastSuccessfulFetchTimestampMillis(),W.storage.getLastSuccessfulFetchResponse()]);if(we&&W.isCachedDataFresh(B.cacheMaxAgeMillis,re))return we;B.eTag=we&&we.eTag;const Pe=yield W.client.fetch(B),$e=[W.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Pe.status&&$e.push(W.storage.setLastSuccessfulFetchResponse(Pe)),yield Promise.all($e),Pe})()}}function Wf(F=navigator){return F.languages&&F.languages[0]||F.language}class Es{constructor(B,W,re,we,Pe,$e){this.firebaseInstallations=B,this.sdkVersion=W,this.namespace=re,this.projectId=we,this.apiKey=Pe,this.appId=$e}fetch(B){var W=this;return(0,Q.Z)(function*(){var re,we,Pe;const[$e,Nt]=yield Promise.all([W.firebaseInstallations.getId(),W.firebaseInstallations.getToken()]),vn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${W.projectId}/namespaces/${W.namespace}:fetch?key=${W.apiKey}`,Vn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":B.eTag||"*"},hn={sdk_version:W.sdkVersion,app_instance_id:$e,app_instance_id_token:Nt,app_id:W.appId,language_code:Wf()},Fr={method:"POST",headers:Vn,body:JSON.stringify(hn)},ho=fetch(vn,Fr),$a=new Promise((Yo,za)=>{B.signal.addEventListener(()=>{const Xc=new Error("The operation was aborted.");Xc.name="AbortError",za(Xc)})});let xo;try{yield Promise.race([ho,$a]),xo=yield ho}catch(Yo){let za="fetch-client-network";throw"AbortError"===(null===(re=Yo)||void 0===re?void 0:re.name)&&(za="fetch-timeout"),tt.create(za,{originalErrorMessage:null===(we=Yo)||void 0===we?void 0:we.message})}let Mo=xo.status;const Ha=xo.headers.get("ETag")||void 0;let Qc,Zo;if(200===xo.status){let Yo;try{Yo=yield xo.json()}catch(za){throw tt.create("fetch-client-parse",{originalErrorMessage:null===(Pe=za)||void 0===Pe?void 0:Pe.message})}Qc=Yo.entries,Zo=Yo.state}if("INSTANCE_STATE_UNSPECIFIED"===Zo?Mo=500:"NO_CHANGE"===Zo?Mo=304:("NO_TEMPLATE"===Zo||"EMPTY_CONFIG"===Zo)&&(Qc={}),304!==Mo&&200!==Mo)throw tt.create("fetch-status",{httpStatus:Mo});return{status:Mo,eTag:Ha,config:Qc}})()}}class Kf{constructor(B,W){this.client=B,this.storage=W}fetch(B){var W=this;return(0,Q.Z)(function*(){const re=(yield W.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return W.attemptFetch(B,re)})()}attemptFetch(B,{throttleEndTimeMillis:W,backoffCount:re}){var we=this;return(0,Q.Z)(function*(){yield function cu(F,B){return new Promise((W,re)=>{const we=Math.max(B-Date.now(),0),Pe=setTimeout(W,we);F.addEventListener(()=>{clearTimeout(Pe),re(tt.create("fetch-throttle",{throttleEndTimeMillis:B}))})})}(B.signal,W);try{const Pe=yield we.client.fetch(B);return yield we.storage.deleteThrottleMetadata(),Pe}catch(Pe){if(!function wd(F){if(!(F instanceof xe.ZR&&F.customData))return!1;const B=Number(F.customData.httpStatus);return 429===B||500===B||503===B||504===B}(Pe))throw Pe;const $e={throttleEndTimeMillis:Date.now()+(0,xe.$s)(re),backoffCount:re+1};return yield we.storage.setThrottleMetadata($e),we.attemptFetch(B,$e)}})()}}class bd{constructor(B,W,re,we,Pe){this.app=B,this._client=W,this._storageCache=re,this._storage=we,this._logger=Pe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ed(F,B){var W;const re=F.target.error||void 0;return tt.create(B,{originalErrorMessage:re&&(null===(W=re)||void 0===W?void 0:W.message)})}const lu="app_namespace_store";class sv{constructor(B,W,re,we=function iv(){return new Promise((F,B)=>{var W;try{const re=indexedDB.open("firebase_remote_config",1);re.onerror=we=>{B(Ed(we,"storage-open"))},re.onsuccess=we=>{F(we.target.result)},re.onupgradeneeded=we=>{0===we.oldVersion&&we.target.result.createObjectStore(lu,{keyPath:"compositeKey"})}}catch(re){B(tt.create("storage-open",{originalErrorMessage:null===(W=re)||void 0===W?void 0:W.message}))}})}()){this.appId=B,this.appName=W,this.namespace=re,this.openDbPromise=we}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(B){return this.set("last_fetch_status",B)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(B){return this.set("last_successful_fetch_timestamp_millis",B)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(B){return this.set("last_successful_fetch_response",B)}getActiveConfig(){return this.get("active_config")}setActiveConfig(B){return this.set("active_config",B)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(B){return this.set("active_config_etag",B)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(B){return this.set("throttle_metadata",B)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(B){var W=this;return(0,Q.Z)(function*(){const re=yield W.openDbPromise;return new Promise((we,Pe)=>{var $e;const Wt=re.transaction([lu],"readonly").objectStore(lu),vn=W.createCompositeKey(B);try{const Vn=Wt.get(vn);Vn.onerror=hn=>{Pe(Ed(hn,"storage-get"))},Vn.onsuccess=hn=>{const Fr=hn.target.result;we(Fr?Fr.value:void 0)}}catch(Vn){Pe(tt.create("storage-get",{originalErrorMessage:null===($e=Vn)||void 0===$e?void 0:$e.message}))}})})()}set(B,W){var re=this;return(0,Q.Z)(function*(){const we=yield re.openDbPromise;return new Promise((Pe,$e)=>{var Nt;const vn=we.transaction([lu],"readwrite").objectStore(lu),Vn=re.createCompositeKey(B);try{const hn=vn.put({compositeKey:Vn,value:W});hn.onerror=Fr=>{$e(Ed(Fr,"storage-set"))},hn.onsuccess=()=>{Pe()}}catch(hn){$e(tt.create("storage-set",{originalErrorMessage:null===(Nt=hn)||void 0===Nt?void 0:Nt.message}))}})})()}delete(B){var W=this;return(0,Q.Z)(function*(){const re=yield W.openDbPromise;return new Promise((we,Pe)=>{var $e;const Wt=re.transaction([lu],"readwrite").objectStore(lu),vn=W.createCompositeKey(B);try{const Vn=Wt.delete(vn);Vn.onerror=hn=>{Pe(Ed(hn,"storage-delete"))},Vn.onsuccess=()=>{we()}}catch(Vn){Pe(tt.create("storage-delete",{originalErrorMessage:null===($e=Vn)||void 0===$e?void 0:$e.message}))}})})()}createCompositeKey(B){return[this.appId,this.appName,this.namespace,B].join()}}class Yf{constructor(B){this.storage=B}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var B=this;return(0,Q.Z)(function*(){const W=B.storage.getLastFetchStatus(),re=B.storage.getLastSuccessfulFetchTimestampMillis(),we=B.storage.getActiveConfig(),Pe=yield W;Pe&&(B.lastFetchStatus=Pe);const $e=yield re;$e&&(B.lastSuccessfulFetchTimestampMillis=$e);const Nt=yield we;Nt&&(B.activeConfig=Nt)})()}setLastFetchStatus(B){return this.lastFetchStatus=B,this.storage.setLastFetchStatus(B)}setLastSuccessfulFetchTimestampMillis(B){return this.lastSuccessfulFetchTimestampMillis=B,this.storage.setLastSuccessfulFetchTimestampMillis(B)}setActiveConfig(B){return this.activeConfig=B,this.storage.setActiveConfig(B)}}function nh(){return Qf.apply(this,arguments)}function Qf(){return(Qf=(0,Q.Z)(function*(){if(!(0,xe.hl)())return!1;try{return yield(0,xe.eu)()}catch(F){return!1}})).apply(this,arguments)}!function Dc(){(0,Fe._registerComponent)(new Ue.wA("remote-config",function F(B,{instanceIdentifier:W}){const re=B.getProvider("app").getImmediate(),we=B.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw tt.create("registration-window");if(!(0,xe.hl)())throw tt.create("indexed-db-unavailable");const{projectId:Pe,apiKey:$e,appId:Nt}=re.options;if(!Pe)throw tt.create("registration-project-id");if(!$e)throw tt.create("registration-api-key");if(!Nt)throw tt.create("registration-app-id");const Wt=new sv(Nt,re.name,W=W||"firebase"),vn=new Yf(Wt),Vn=new Be.Yd(_o);Vn.logLevel=Be.in.ERROR;const hn=new Es(we,Fe.SDK_VERSION,W,Pe,$e,Nt),Fr=new Kf(hn,Wt),ho=new qf(Fr,Wt,vn,Vn),$a=new bd(re,ho,vn,Wt,Vn);return function $n(F){const B=(0,xe.m9)(F);B._initializePromise||(B._initializePromise=B._storageCache.loadFromStorage().then(()=>{B._isInitializationComplete=!0}))}($a),$a},"PUBLIC").setMultipleInstances(!0)),(0,Fe.registerVersion)(_o,"0.3.10"),(0,Fe.registerVersion)(_o,"0.3.10","esm2017")}();const Xf="/firebase-messaging-sw.js",Is="/firebase-cloud-messaging-push-scope",Ku="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Sc="google.c.a.c_id",Jf="google.c.a.c_l",nm="google.c.a.ts",ep="google.c.a.e";var Ac=(()=>{return(F=Ac||(Ac={})).PUSH_RECEIVED="push-received",F.NOTIFICATION_CLICKED="notification-clicked",Ac;var F})();function Cs(F){const B=new Uint8Array(F);return btoa(String.fromCharCode(...B)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function tp(F){const W=(F+"=".repeat((4-F.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),re=atob(W),we=new Uint8Array(re.length);for(let Pe=0;Pe<re.length;++Pe)we[Pe]=re.charCodeAt(Pe);return we}const js="fcm_token_details_db",$s="fcm_token_object_Store";function Oi(F){return hu.apply(this,arguments)}function hu(){return hu=(0,Q.Z)(function*(F){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Pe=>Pe.name).includes(js))return null;let B=null;return(yield(0,Oe.X3)(js,5,{upgrade:(re=(0,Q.Z)(function*(we,Pe,$e,Nt){var Wt;if(Pe<2||!we.objectStoreNames.contains($s))return;const vn=Nt.objectStore($s),Vn=yield vn.index("fcmSenderId").get(F);if(yield vn.clear(),Vn)if(2===Pe){const hn=Vn;if(!hn.auth||!hn.p256dh||!hn.endpoint)return;B={token:hn.fcmToken,createTime:null!==(Wt=hn.createTime)&&void 0!==Wt?Wt:Date.now(),subscriptionOptions:{auth:hn.auth,p256dh:hn.p256dh,endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:"string"==typeof hn.vapidKey?hn.vapidKey:Cs(hn.vapidKey)}}}else if(3===Pe){const hn=Vn;B={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:Cs(hn.auth),p256dh:Cs(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:Cs(hn.vapidKey)}}}else if(4===Pe){const hn=Vn;B={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:Cs(hn.auth),p256dh:Cs(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:Cs(hn.vapidKey)}}}}),function(Pe,$e,Nt,Wt){return re.apply(this,arguments)})})).close(),yield(0,Oe.Lj)(js),yield(0,Oe.Lj)("fcm_vapid_details_db"),yield(0,Oe.Lj)("undefined"),Ts(B)?B:null;var re}),hu.apply(this,arguments)}function Ts(F){if(!F||!F.subscriptionOptions)return!1;const{subscriptionOptions:B}=F;return"number"==typeof F.createTime&&F.createTime>0&&"string"==typeof F.token&&F.token.length>0&&"string"==typeof B.auth&&B.auth.length>0&&"string"==typeof B.p256dh&&B.p256dh.length>0&&"string"==typeof B.endpoint&&B.endpoint.length>0&&"string"==typeof B.swScope&&B.swScope.length>0&&"string"==typeof B.vapidKey&&B.vapidKey.length>0}const ca="firebase-messaging-store";let Id=null;function Jn(){return Id||(Id=(0,Oe.X3)("firebase-messaging-database",1,{upgrade:(F,B)=>{0===B&&F.createObjectStore(ca)}})),Id}function du(F){return la.apply(this,arguments)}function la(){return(la=(0,Q.Z)(function*(F){const B=Yi(F),re=yield(yield Jn()).transaction(ca).objectStore(ca).get(B);if(re)return re;{const we=yield Oi(F.appConfig.senderId);if(we)return yield rr(F,we),we}})).apply(this,arguments)}function rr(F,B){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,Q.Z)(function*(F,B){const W=Yi(F),we=(yield Jn()).transaction(ca,"readwrite");return yield we.objectStore(ca).put(B,W),yield we.done,B})).apply(this,arguments)}function rh(F){return fu.apply(this,arguments)}function fu(){return(fu=(0,Q.Z)(function*(F){const B=Yi(F),re=(yield Jn()).transaction(ca,"readwrite");yield re.objectStore(ca).delete(B),yield re.done})).apply(this,arguments)}function Yi({appConfig:F}){return F.appId}const gr=new xe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Hs(F,B){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,Q.Z)(function*(F,B){var W;const re=yield kc(F),we=pu(B),Pe={method:"POST",headers:re,body:JSON.stringify(we)};let $e;try{$e=yield(yield fetch(mi(F.appConfig),Pe)).json()}catch(Nt){throw gr.create("token-subscribe-failed",{errorInfo:null===(W=Nt)||void 0===W?void 0:W.toString()})}if($e.error)throw gr.create("token-subscribe-failed",{errorInfo:$e.error.message});if(!$e.token)throw gr.create("token-subscribe-no-token");return $e.token})).apply(this,arguments)}function io(F,B){return zs.apply(this,arguments)}function zs(){return(zs=(0,Q.Z)(function*(F,B){var W;const re=yield kc(F),we=pu(B.subscriptionOptions),Pe={method:"PATCH",headers:re,body:JSON.stringify(we)};let $e;try{$e=yield(yield fetch(`${mi(F.appConfig)}/${B.token}`,Pe)).json()}catch(Nt){throw gr.create("token-update-failed",{errorInfo:null===(W=Nt)||void 0===W?void 0:W.toString()})}if($e.error)throw gr.create("token-update-failed",{errorInfo:$e.error.message});if(!$e.token)throw gr.create("token-update-no-token");return $e.token})).apply(this,arguments)}function ha(F,B){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,Q.Z)(function*(F,B){var W;const we={method:"DELETE",headers:yield kc(F)};try{const $e=yield(yield fetch(`${mi(F.appConfig)}/${B}`,we)).json();if($e.error)throw gr.create("token-unsubscribe-failed",{errorInfo:$e.error.message})}catch(Pe){throw gr.create("token-unsubscribe-failed",{errorInfo:null===(W=Pe)||void 0===W?void 0:W.toString()})}})).apply(this,arguments)}function mi({projectId:F}){return`https://fcmregistrations.googleapis.com/v1/projects/${F}/registrations`}function kc(F){return wn.apply(this,arguments)}function wn(){return(wn=(0,Q.Z)(function*({appConfig:F,installations:B}){const W=yield B.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F.apiKey,"x-goog-firebase-installations-auth":`FIS ${W}`})})).apply(this,arguments)}function pu({p256dh:F,auth:B,endpoint:W,vapidKey:re}){const we={web:{endpoint:W,auth:B,p256dh:F}};return re!==Ku&&(we.web.applicationPubKey=re),we}const Td=6048e5;function Cl(F){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,Q.Z)(function*(F){const B=yield Qu(F.swRegistration,F.vapidKey),W={vapidKey:F.vapidKey,swScope:F.swRegistration.scope,endpoint:B.endpoint,auth:Cs(B.getKey("auth")),p256dh:Cs(B.getKey("p256dh"))},re=yield du(F.firebaseDependencies);if(re){if(ui(re.subscriptionOptions,W))return Date.now()>=re.createTime+Td?oh(F,{token:re.token,createTime:Date.now(),subscriptionOptions:W}):re.token;try{yield ha(F.firebaseDependencies,re.token)}catch(we){console.warn(we)}return ct(F.firebaseDependencies,W)}return ct(F.firebaseDependencies,W)})).apply(this,arguments)}function ih(F){return sh.apply(this,arguments)}function sh(){return(sh=(0,Q.Z)(function*(F){const B=yield du(F.firebaseDependencies);B&&(yield ha(F.firebaseDependencies,B.token),yield rh(F.firebaseDependencies));const W=yield F.swRegistration.pushManager.getSubscription();return!W||W.unsubscribe()})).apply(this,arguments)}function oh(F,B){return so.apply(this,arguments)}function so(){return(so=(0,Q.Z)(function*(F,B){try{const W=yield io(F.firebaseDependencies,B),re=Object.assign(Object.assign({},B),{token:W,createTime:Date.now()});return yield rr(F.firebaseDependencies,re),W}catch(W){throw yield ih(F),W}})).apply(this,arguments)}function ct(F,B){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,Q.Z)(function*(F,B){const re={token:yield Hs(F,B),createTime:Date.now(),subscriptionOptions:B};return yield rr(F,re),re.token})).apply(this,arguments)}function Qu(F,B){return mr.apply(this,arguments)}function mr(){return(mr=(0,Q.Z)(function*(F,B){return(yield F.pushManager.getSubscription())||F.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:tp(B)})})).apply(this,arguments)}function ui(F,B){return B.vapidKey===F.vapidKey&&B.endpoint===F.endpoint&&B.auth===F.auth&&B.p256dh===F.p256dh}function gu(F){const B={from:F.from,collapseKey:F.collapse_key,messageId:F.fcmMessageId};return function Eo(F,B){if(!B.notification)return;F.notification={};const W=B.notification.title;W&&(F.notification.title=W);const re=B.notification.body;re&&(F.notification.body=re);const we=B.notification.image;we&&(F.notification.image=we)}(B,F),function Nc(F,B){!B.data||(F.data=B.data)}(B,F),function Io(F,B){var W,re,we,Pe,$e;if(!B.fcmOptions&&!(null===(W=B.notification)||void 0===W?void 0:W.click_action))return;F.fcmOptions={};const Nt=null!==(we=null===(re=B.fcmOptions)||void 0===re?void 0:re.link)&&void 0!==we?we:null===(Pe=B.notification)||void 0===Pe?void 0:Pe.click_action;Nt&&(F.fcmOptions.link=Nt);const Wt=null===($e=B.fcmOptions)||void 0===$e?void 0:$e.analytics_label;Wt&&(F.fcmOptions.analyticsLabel=Wt)}(B,F),B}function Tl(F){return"object"==typeof F&&!!F&&Sc in F}function Sd(F,B){const W=[];for(let re=0;re<F.length;re++)W.push(F.charAt(re)),re<B.length&&W.push(B.charAt(re));return W.join("")}function Co(F){return gr.create("missing-app-config-values",{valueName:F})}Sd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Sd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Qi{constructor(B,W,re){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const we=function rm(F){if(!F||!F.options)throw Co("App Configuration Object");if(!F.name)throw Co("App Name");const B=["projectId","apiKey","appId","messagingSenderId"],{options:W}=F;for(const re of B)if(!W[re])throw Co(re);return{appName:F.name,projectId:W.projectId,apiKey:W.apiKey,appId:W.appId,senderId:W.messagingSenderId}}(B);this.firebaseDependencies={app:B,appConfig:we,installations:W,analyticsProvider:re}}_delete(){return Promise.resolve()}}function oo(F){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,Q.Z)(function*(F){var B;try{F.swRegistration=yield navigator.serviceWorker.register(Xf,{scope:Is}),F.swRegistration.update().catch(()=>{})}catch(W){throw gr.create("failed-service-worker-registration",{browserErrorMessage:null===(B=W)||void 0===B?void 0:B.message})}})).apply(this,arguments)}function ka(F,B){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,Q.Z)(function*(F,B){if(!B&&!F.swRegistration&&(yield oo(F)),B||!F.swRegistration){if(!(B instanceof ServiceWorkerRegistration))throw gr.create("invalid-sw-registration");F.swRegistration=B}})).apply(this,arguments)}function ah(F,B){return uh.apply(this,arguments)}function uh(){return(uh=(0,Q.Z)(function*(F,B){B?F.vapidKey=B:F.vapidKey||(F.vapidKey=Ku)})).apply(this,arguments)}function Oc(){return(Oc=(0,Q.Z)(function*(F,B){if(!navigator)throw gr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw gr.create("permission-blocked");return yield ah(F,null==B?void 0:B.vapidKey),yield ka(F,null==B?void 0:B.serviceWorkerRegistration),Cl(F)})).apply(this,arguments)}function ao(F,B,W){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,Q.Z)(function*(F,B,W){const re=Fc(B);(yield F.firebaseDependencies.analyticsProvider.get()).logEvent(re,{message_id:W[Sc],message_name:W[Jf],message_time:W[nm],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Fc(F){switch(F){case Ac.NOTIFICATION_CLICKED:return"notification_open";case Ac.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function lh(){return(lh=(0,Q.Z)(function*(F,B){const W=B.data;if(!W.isFirebaseMessaging)return;F.onMessageHandler&&W.messageType===Ac.PUSH_RECEIVED&&("function"==typeof F.onMessageHandler?F.onMessageHandler(gu(W)):F.onMessageHandler.next(gu(W)));const re=W.data;Tl(re)&&"1"===re[ep]&&(yield ao(F,W.messageType,re))})).apply(this,arguments)}const hh="@firebase/messaging",Na=F=>{const B=new Qi(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),F.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",W=>function ch(F,B){return lh.apply(this,arguments)}(B,W)),B},Xu=F=>{const B=F.getProvider("messaging").getImmediate();return{getToken:re=>function Pc(F,B){return Oc.apply(this,arguments)}(B,re)}};function Uc(){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,Q.Z)(function*(){try{yield(0,xe.eu)()}catch(F){return!1}return"undefined"!=typeof window&&(0,xe.hl)()&&(0,xe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function dh(){(0,Fe._registerComponent)(new Ue.wA("messaging",Na,"PUBLIC")),(0,Fe._registerComponent)(new Ue.wA("messaging-internal",Xu,"PRIVATE")),(0,Fe.registerVersion)(hh,"0.9.15"),(0,Fe.registerVersion)(hh,"0.9.15","esm2017")}();const Ad="analytics",sm="firebase_id",Pa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Oa="https://www.googletagmanager.com/gtag/js",Di=new Be.Yd("@firebase/analytics");function vi(F){return Promise.all(F.map(B=>B.catch(W=>W)))}function gh(F,B){const W=document.createElement("script");W.src=`${Oa}?l=${F}&id=${B}`,W.async=!0,document.head.appendChild(W)}function Vc(F,B,W,re,we,Pe){return mh.apply(this,arguments)}function mh(){return(mh=(0,Q.Z)(function*(F,B,W,re,we,Pe){const $e=re[we];try{if($e)yield B[$e];else{const Wt=(yield vi(W)).find(vn=>vn.measurementId===we);Wt&&(yield B[Wt.appId])}}catch(Nt){Di.error(Nt)}F("config",we,Pe)})).apply(this,arguments)}function om(F,B,W,re,we){return fa.apply(this,arguments)}function fa(){return(fa=(0,Q.Z)(function*(F,B,W,re,we){try{let Pe=[];if(we&&we.send_to){let $e=we.send_to;Array.isArray($e)||($e=[$e]);const Nt=yield vi(W);for(const Wt of $e){const vn=Nt.find(hn=>hn.measurementId===Wt),Vn=vn&&B[vn.appId];if(!Vn){Pe=[];break}Pe.push(Vn)}}0===Pe.length&&(Pe=Object.values(B)),yield Promise.all(Pe),F("event",re,we||{})}catch(Pe){Di.error(Pe)}})).apply(this,arguments)}function Or(){const F=window.document.getElementsByTagName("script");for(const B of Object.values(F))if(B.src&&B.src.includes(Oa))return B;return null}const an=new xe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),$c=new class Hr{constructor(B={},W=1e3){this.throttleMetadata=B,this.intervalMillis=W}getThrottleMetadata(B){return this.throttleMetadata[B]}setThrottleMetadata(B,W){this.throttleMetadata[B]=W}deleteThrottleMetadata(B){delete this.throttleMetadata[B]}};function xd(F){return new Headers({Accept:"application/json","x-goog-api-key":F})}function vu(F){return La.apply(this,arguments)}function La(){return(La=(0,Q.Z)(function*(F){var B;const{appId:W,apiKey:re}=F,we={method:"GET",headers:xd(re)},Pe=Pa.replace("{app-id}",W),$e=yield fetch(Pe,we);if(200!==$e.status&&304!==$e.status){let Nt="";try{const Wt=yield $e.json();(null===(B=Wt.error)||void 0===B?void 0:B.message)&&(Nt=Wt.error.message)}catch(Wt){}throw an.create("config-fetch-failed",{httpStatus:$e.status,responseMessage:Nt})}return $e.json()})).apply(this,arguments)}function Lr(F){return pa.apply(this,arguments)}function pa(){return(pa=(0,Q.Z)(function*(F,B=$c,W){const{appId:re,apiKey:we,measurementId:Pe}=F.options;if(!re)throw an.create("no-app-id");if(!we){if(Pe)return{measurementId:Pe,appId:re};throw an.create("no-api-key")}const $e=B.getThrottleMetadata(re)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Nt=new Md;return setTimeout((0,Q.Z)(function*(){Nt.abort()}),void 0!==W?W:6e4),Ho({appId:re,apiKey:we,measurementId:Pe},$e,Nt,B)})).apply(this,arguments)}function Ho(F,B,W){return En.apply(this,arguments)}function En(){return(En=(0,Q.Z)(function*(F,{throttleEndTimeMillis:B,backoffCount:W},re,we=$c){var Pe,$e;const{appId:Nt,measurementId:Wt}=F;try{yield rp(re,B)}catch(vn){if(Wt)return Di.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Wt} provided in the "measurementId" field in the local Firebase config. [${null===(Pe=vn)||void 0===Pe?void 0:Pe.message}]`),{appId:Nt,measurementId:Wt};throw vn}try{const vn=yield vu(F);return we.deleteThrottleMetadata(Nt),vn}catch(vn){const Vn=vn;if(!ip(Vn)){if(we.deleteThrottleMetadata(Nt),Wt)return Di.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Wt} provided in the "measurementId" field in the local Firebase config. [${null==Vn?void 0:Vn.message}]`),{appId:Nt,measurementId:Wt};throw vn}const hn=503===Number(null===($e=null==Vn?void 0:Vn.customData)||void 0===$e?void 0:$e.httpStatus)?(0,xe.$s)(W,we.intervalMillis,30):(0,xe.$s)(W,we.intervalMillis),Fr={throttleEndTimeMillis:Date.now()+hn,backoffCount:W+1};return we.setThrottleMetadata(Nt,Fr),Di.debug(`Calling attemptFetch again in ${hn} millis`),Ho(F,Fr,re,we)}})).apply(this,arguments)}function rp(F,B){return new Promise((W,re)=>{const we=Math.max(B-Date.now(),0),Pe=setTimeout(W,we);F.addEventListener(()=>{clearTimeout(Pe),re(an.create("fetch-throttle",{throttleEndTimeMillis:B}))})})}function ip(F){if(!(F instanceof xe.ZR&&F.customData))return!1;const B=Number(F.customData.httpStatus);return 429===B||500===B||503===B||504===B}class Md{constructor(){this.listeners=[]}addEventListener(B){this.listeners.push(B)}abort(){this.listeners.forEach(B=>B())}}function Rd(){return ts.apply(this,arguments)}function ts(){return(ts=(0,Q.Z)(function*(){var F;if(!(0,xe.hl)())return Di.warn(an.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,xe.eu)()}catch(B){return Di.warn(an.create("indexeddb-unavailable",{errorInfo:null===(F=B)||void 0===F?void 0:F.toString()}).message),!1}return!0})).apply(this,arguments)}function _u(){return(_u=(0,Q.Z)(function*(F,B,W,re,we,Pe,$e){var Nt;const Wt=Lr(F);Wt.then(ho=>{W[ho.measurementId]=ho.appId,F.options.measurementId&&ho.measurementId!==F.options.measurementId&&Di.warn(`The measurement ID in the local Firebase config (${F.options.measurementId}) does not match the measurement ID fetched from the server (${ho.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ho=>Di.error(ho)),B.push(Wt);const vn=Rd().then(ho=>{if(ho)return re.getId()}),[Vn,hn]=yield Promise.all([Wt,vn]);Or()||gh(Pe,Vn.measurementId),we("js",new Date);const Fr=null!==(Nt=null==$e?void 0:$e.config)&&void 0!==Nt?Nt:{};return Fr.origin="firebase",Fr.update=!0,null!=hn&&(Fr[sm]=hn),we("config",Vn.measurementId,Fr),Vn.measurementId})).apply(this,arguments)}class wu{constructor(B){this.app=B}_delete(){return delete ns[this.app.options.appId],Promise.resolve()}}let ns={},bu=[];const Ju={};let ec,Eu,Hc="dataLayer",zc=!1;function Ua(F,B,W){!function Gc(){const F=[];if((0,xe.ru)()&&F.push("This is a browser extension environment."),(0,xe.zI)()||F.push("Cookies are not available."),F.length>0){const B=F.map((re,we)=>`(${we+1}) ${re}`).join(" "),W=an.create("invalid-analytics-context",{errorInfo:B});Di.warn(W.message)}}();const re=F.options.appId;if(!re)throw an.create("no-app-id");if(!F.options.apiKey){if(!F.options.measurementId)throw an.create("no-api-key");Di.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${F.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ns[re])throw an.create("already-exists",{id:re});if(!zc){!function yu(F){let B=[];Array.isArray(window[F])?B=window[F]:window[F]=B}(Hc);const{wrappedGtag:Pe,gtagCore:$e}=function am(F,B,W,re,we){let Pe=function(...$e){window[re].push(arguments)};return window[we]&&"function"==typeof window[we]&&(Pe=window[we]),window[we]=function es(F,B,W,re){function Pe(){return(Pe=(0,Q.Z)(function*($e,Nt,Wt){try{"event"===$e?yield om(F,B,W,Nt,Wt):"config"===$e?yield Vc(F,B,W,re,Nt,Wt):F("set",Nt)}catch(vn){Di.error(vn)}})).apply(this,arguments)}return function we($e,Nt,Wt){return Pe.apply(this,arguments)}}(Pe,F,B,W),{gtagCore:Pe,wrappedGtag:window[we]}}(ns,bu,Ju,Hc,"gtag");Eu=Pe,ec=$e,zc=!0}return ns[re]=function Do(F,B,W,re,we,Pe,$e){return _u.apply(this,arguments)}(F,bu,Ju,B,ec,Hc,W),new wu(F)}function Li(){return(Li=(0,Q.Z)(function*(F,B,W,re,we){if(we&&we.global)F("event",W,re);else{const Pe=yield B;F("event",W,Object.assign(Object.assign({},re),{send_to:Pe}))}})).apply(this,arguments)}function Si(){return qc.apply(this,arguments)}function qc(){return(qc=(0,Q.Z)(function*(){if((0,xe.ru)()||!(0,xe.zI)()||!(0,xe.hl)())return!1;try{return yield(0,xe.eu)()}catch(F){return!1}})).apply(this,arguments)}const rs="@firebase/analytics";!function Ba(){(0,Fe._registerComponent)(new Ue.wA(Ad,(B,{options:W})=>Ua(B.getProvider("app").getImmediate(),B.getProvider("installations-internal").getImmediate(),W),"PUBLIC")),(0,Fe._registerComponent)(new Ue.wA("analytics-internal",function F(B){try{const W=B.getProvider(Ad).getImmediate();return{logEvent:(re,we,Pe)=>function ga(F,B,W,re){F=(0,xe.m9)(F),function tc(F,B,W,re,we){return Li.apply(this,arguments)}(Eu,ns[F.app.options.appId],B,W,re).catch(we=>Di.error(we))}(W,re,we,Pe)}}catch(W){throw an.create("interop-component-reg-failed",{reason:W})}},"PRIVATE")),(0,Fe.registerVersion)(rs,"0.7.11"),(0,Fe.registerVersion)(rs,"0.7.11","esm2017")}();var op=M(4408),xl=M(7565);const Ml=new class Xr extends xl.v{}(class Va extends op.o{constructor(B,W){super(B,W),this.scheduler=B,this.work=W}schedule(B,W=0){return W>0?super.schedule(B,W):(this.delay=W,this.state=B,this.scheduler.flush(this),this)}execute(B,W){return W>0||this.closed?super.execute(B,W):this._execute(B,W)}requestAsyncId(B,W,re=0){return null!=re&&re>0||null==re&&this.delay>0?super.requestAsyncId(B,W,re):B.flush(this)}});var ap=M(4986),up=M(8505),is=M(9468),Ui=M(5363);const nc=new D.GfV("7.4.1"),rc="__angularfire_symbol__analyticsIsSupportedValue",Wo="__angularfire_symbol__analyticsIsSupported",Ko="__angularfire_symbol__remoteConfigIsSupportedValue",Ao="__angularfire_symbol__remoteConfigIsSupported",Iu="__angularfire_symbol__messagingIsSupportedValue",xn="__angularfire_symbol__messagingIsSupported";function Zc(F,B,W){if(B){if(1===B.length)return B[0];const Pe=B.filter($e=>$e.app===W);if(1===Pe.length)return Pe[0]}return W.container.getProvider(F).getImmediate({optional:!0})}globalThis[Wo]||(globalThis[Wo]=Si().then(F=>globalThis[rc]=F).catch(()=>globalThis[rc]=!1)),globalThis[xn]||(globalThis[xn]=Uc().then(F=>globalThis[Iu]=F).catch(()=>globalThis[Iu]=!1)),globalThis[Ao]||(globalThis[Ao]=nh().then(F=>globalThis[Ko]=F).catch(()=>globalThis[Ko]=!1));const ov=(F,B)=>{const W=B?[B]:(0,be.C6)(),re=[];return W.forEach(we=>{we.container.getProvider(F).instances.forEach($e=>{re.includes($e)||re.push($e)})}),re};function ja(){}class lo{constructor(B,W=Ml){this.zone=B,this.delegate=W}now(){return this.delegate.now()}schedule(B,W,re){const we=this.zone;return this.delegate.schedule(function($e){we.runGuarded(()=>{B.apply(this,[$e])})},W,re)}}class kl{constructor(B){this.zone=B,this.task=null}call(B,W){const re=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ja,{},ja,ja)),W.pipe((0,up.b)({next:re,complete:re,error:re})).subscribe(B).add(re)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let cp=(()=>{class F{constructor(W){this.ngZone=W,this.outsideAngular=W.runOutsideAngular(()=>new lo(Zone.current)),this.insideAngular=W.run(()=>new lo(Zone.current,ap.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return F.\u0275fac=function(W){return new(W||F)(D.LFG(D.R0b))},F.\u0275prov=D.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();function ya(){const F=globalThis.\u0275AngularFireScheduler;if(!F)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return F}function um(F){return ya(),function Cu(F){return function(W){return(W=W.lift(new kl(F.ngZone))).pipe((0,is.R)(F.outsideAngular),(0,Ui.Q)(F.insideAngular))}}(ya())(F)}},2090:(jt,et,M)=>{"use strict";M.d(et,{$s:()=>Vs,BH:()=>kt,G6:()=>vt,L:()=>Oe,LL:()=>Ne,Mn:()=>Xe,Sg:()=>ot,UG:()=>ge,US:()=>Ue,ZB:()=>ue,ZR:()=>Ze,b$:()=>bt,d:()=>qe,eu:()=>Ke,hl:()=>ce,jU:()=>Me,m9:()=>sn,ne:()=>to,pd:()=>Fs,r3:()=>Ar,ru:()=>lt,tV:()=>Le,uI:()=>It,vZ:()=>gs,w1:()=>We,xO:()=>di,xb:()=>On,z$:()=>Ye,zI:()=>fe,zd:()=>Ls});const Fe=function(ve){const se=[];let Ee=0;for(let Ie=0;Ie<ve.length;Ie++){let ne=ve.charCodeAt(Ie);ne<128?se[Ee++]=ne:ne<2048?(se[Ee++]=ne>>6|192,se[Ee++]=63&ne|128):55296==(64512&ne)&&Ie+1<ve.length&&56320==(64512&ve.charCodeAt(Ie+1))?(ne=65536+((1023&ne)<<10)+(1023&ve.charCodeAt(++Ie)),se[Ee++]=ne>>18|240,se[Ee++]=ne>>12&63|128,se[Ee++]=ne>>6&63|128,se[Ee++]=63&ne|128):(se[Ee++]=ne>>12|224,se[Ee++]=ne>>6&63|128,se[Ee++]=63&ne|128)}return se},Ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ve,se){if(!Array.isArray(ve))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ee=se?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let ne=0;ne<ve.length;ne+=3){const nt=ve[ne],Ct=ne+1<ve.length,Ht=Ct?ve[ne+1]:0,Dn=ne+2<ve.length,nr=Dn?ve[ne+2]:0;let Zr=(15&Ht)<<2|nr>>6,xa=63&nr;Dn||(xa=64,Ct||(Zr=64)),Ie.push(Ee[nt>>2],Ee[(3&nt)<<4|Ht>>4],Ee[Zr],Ee[xa])}return Ie.join("")},encodeString(ve,se){return this.HAS_NATIVE_SUPPORT&&!se?btoa(ve):this.encodeByteArray(Fe(ve),se)},decodeString(ve,se){return this.HAS_NATIVE_SUPPORT&&!se?atob(ve):function(ve){const se=[];let Ee=0,Ie=0;for(;Ee<ve.length;){const ne=ve[Ee++];if(ne<128)se[Ie++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const nt=ve[Ee++];se[Ie++]=String.fromCharCode((31&ne)<<6|63&nt)}else if(ne>239&&ne<365){const Dn=((7&ne)<<18|(63&ve[Ee++])<<12|(63&ve[Ee++])<<6|63&ve[Ee++])-65536;se[Ie++]=String.fromCharCode(55296+(Dn>>10)),se[Ie++]=String.fromCharCode(56320+(1023&Dn))}else{const nt=ve[Ee++],Ct=ve[Ee++];se[Ie++]=String.fromCharCode((15&ne)<<12|(63&nt)<<6|63&Ct)}}return se.join("")}(this.decodeStringToByteArray(ve,se))},decodeStringToByteArray(ve,se){this.init_();const Ee=se?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let ne=0;ne<ve.length;){const nt=Ee[ve.charAt(ne++)],Ht=ne<ve.length?Ee[ve.charAt(ne)]:0;++ne;const nr=ne<ve.length?Ee[ve.charAt(ne)]:64;++ne;const Bn=ne<ve.length?Ee[ve.charAt(ne)]:64;if(++ne,null==nt||null==Ht||null==nr||null==Bn)throw Error();Ie.push(nt<<2|Ht>>4),64!==nr&&(Ie.push(Ht<<4&240|nr>>2),64!==Bn&&Ie.push(nr<<6&192|Bn))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ve=0;ve<this.ENCODED_VALS.length;ve++)this.byteToCharMap_[ve]=this.ENCODED_VALS.charAt(ve),this.charToByteMap_[this.byteToCharMap_[ve]]=ve,this.byteToCharMapWebSafe_[ve]=this.ENCODED_VALS_WEBSAFE.charAt(ve),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ve]]=ve,ve>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ve)]=ve,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ve)]=ve)}}},Oe=function(ve){return function(ve){const se=Fe(ve);return Ue.encodeByteArray(se,!0)}(ve).replace(/\./g,"")},Le=function(ve){try{return Ue.decodeString(ve,!0)}catch(se){console.error("base64Decode failed: ",se)}return null};function ue(ve,se){if(!(se instanceof Object))return se;switch(se.constructor){case Date:return new Date(se.getTime());case Object:void 0===ve&&(ve={});break;case Array:ve=[];break;default:return se}for(const Ee in se)!se.hasOwnProperty(Ee)||!ye(Ee)||(ve[Ee]=ue(ve[Ee],se[Ee]));return ve}function ye(ve){return"__proto__"!==ve}class kt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((se,Ee)=>{this.resolve=se,this.reject=Ee})}wrapCallback(se){return(Ee,Ie)=>{Ee?this.reject(Ee):this.resolve(Ie),"function"==typeof se&&(this.promise.catch(()=>{}),1===se.length?se(Ee):se(Ee,Ie))}}}function ot(ve,se){if(ve.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=se||"demo-project",ne=ve.iat||0,nt=ve.sub||ve.user_id;if(!nt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ct=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:ne,exp:ne+3600,auth_time:ne,sub:nt,user_id:nt,firebase:{sign_in_provider:"custom",identities:{}}},ve);return[Oe(JSON.stringify({alg:"none",type:"JWT"})),Oe(JSON.stringify(Ct)),""].join(".")}function Ye(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function It(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function ge(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ve){return!1}}function Me(){return"object"==typeof self&&self.self===self}function lt(){const ve="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ve&&void 0!==ve.id}function bt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function qe(){return Ye().indexOf("Electron/")>=0}function We(){const ve=Ye();return ve.indexOf("MSIE ")>=0||ve.indexOf("Trident/")>=0}function Xe(){return Ye().indexOf("MSAppHost/")>=0}function vt(){return!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ce(){return"object"==typeof indexedDB}function Ke(){return new Promise((ve,se)=>{try{let Ee=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(Ie);ne.onsuccess=()=>{ne.result.close(),Ee||self.indexedDB.deleteDatabase(Ie),ve(!0)},ne.onupgradeneeded=()=>{Ee=!1},ne.onerror=()=>{var nt;se((null===(nt=ne.error)||void 0===nt?void 0:nt.message)||"")}}catch(Ee){se(Ee)}})}function fe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ze extends Error{constructor(se,Ee,Ie){super(Ee),this.code=se,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,Ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ne.prototype.create)}}class Ne{constructor(se,Ee,Ie){this.service=se,this.serviceName=Ee,this.errors=Ie}create(se,...Ee){const Ie=Ee[0]||{},ne=`${this.service}/${se}`,nt=this.errors[se],Ct=nt?function ht(ve,se){return ve.replace(qt,(Ee,Ie)=>{const ne=se[Ie];return null!=ne?String(ne):`<${Ie}?>`})}(nt,Ie):"Error";return new Ze(ne,`${this.serviceName}: ${Ct} (${ne}).`,Ie)}}const qt=/\{\$([^}]+)}/g;function Ar(ve,se){return Object.prototype.hasOwnProperty.call(ve,se)}function On(ve){for(const se in ve)if(Object.prototype.hasOwnProperty.call(ve,se))return!1;return!0}function gs(ve,se){if(ve===se)return!0;const Ee=Object.keys(ve),Ie=Object.keys(se);for(const ne of Ee){if(!Ie.includes(ne))return!1;const nt=ve[ne],Ct=se[ne];if(oi(nt)&&oi(Ct)){if(!gs(nt,Ct))return!1}else if(nt!==Ct)return!1}for(const ne of Ie)if(!Ee.includes(ne))return!1;return!0}function oi(ve){return null!==ve&&"object"==typeof ve}function di(ve){const se=[];for(const[Ee,Ie]of Object.entries(ve))Array.isArray(Ie)?Ie.forEach(ne=>{se.push(encodeURIComponent(Ee)+"="+encodeURIComponent(ne))}):se.push(encodeURIComponent(Ee)+"="+encodeURIComponent(Ie));return se.length?"&"+se.join("&"):""}function Ls(ve){const se={};return ve.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[ne,nt]=Ie.split("=");se[decodeURIComponent(ne)]=decodeURIComponent(nt)}}),se}function Fs(ve){const se=ve.indexOf("?");if(!se)return"";const Ee=ve.indexOf("#",se);return ve.substring(se,Ee>0?Ee:void 0)}function to(ve,se){const Ee=new pn(ve,se);return Ee.subscribe.bind(Ee)}class pn{constructor(se,Ee){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ee,this.task.then(()=>{se(this)}).catch(Ie=>{this.error(Ie)})}next(se){this.forEachObserver(Ee=>{Ee.next(se)})}error(se){this.forEachObserver(Ee=>{Ee.error(se)}),this.close(se)}complete(){this.forEachObserver(se=>{se.complete()}),this.close()}subscribe(se,Ee,Ie){let ne;if(void 0===se&&void 0===Ee&&void 0===Ie)throw new Error("Missing Observer.");ne=function xr(ve,se){if("object"!=typeof ve||null===ve)return!1;for(const Ee of se)if(Ee in ve&&"function"==typeof ve[Ee])return!0;return!1}(se,["next","error","complete"])?se:{next:se,error:Ee,complete:Ie},void 0===ne.next&&(ne.next=Er),void 0===ne.error&&(ne.error=Er),void 0===ne.complete&&(ne.complete=Er);const nt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch(Ct){}}),this.observers.push(ne),nt}unsubscribeOne(se){void 0===this.observers||void 0===this.observers[se]||(delete this.observers[se],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(se){if(!this.finalized)for(let Ee=0;Ee<this.observers.length;Ee++)this.sendOne(Ee,se)}sendOne(se,Ee){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[se])try{Ee(this.observers[se])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(se){this.finalized||(this.finalized=!0,void 0!==se&&(this.finalError=se),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Er(){}function Vs(ve,se=1e3,Ee=2){const Ie=se*Math.pow(Ee,ve),ne=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+ne)}function sn(ve){return ve&&ve._delegate?ve._delegate:ve}},8813:(jt,et,M)=>{"use strict";var D=M(5e3);let be=null;function Q(){return be}const Be=new D.OlP("DocumentToken");let Oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=D.Yz7({token:n,factory:function(){return function Le(){return(0,D.LFG)(ue)}()},providedIn:"platform"}),n})();const oe=new D.OlP("Location Initialized");let ue=(()=>{class n extends Oe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Q().getBaseHref(this._doc)}onPopState(t){const r=Q().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Q().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,a){ye()?this._history.pushState(t,r,a):this.location.hash=a}replaceState(t,r,a){ye()?this._history.replaceState(t,r,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Be))},n.\u0275prov=D.Yz7({token:n,factory:function(){return function kt(){return new ue((0,D.LFG)(Be))}()},providedIn:"platform"}),n})();function ye(){return!!window.history.pushState}function ot(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ye(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function It(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=D.Yz7({token:n,factory:function(){return function Me(n){const e=(0,D.LFG)(Be).location;return new bt((0,D.LFG)(Oe),e&&e.origin||"")}()},providedIn:"root"}),n})();const lt=new D.OlP("appBaseHref");let bt=(()=>{class n extends ge{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ot(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+It(this._platformLocation.search),a=this._platformLocation.hash;return a&&t?`${r}${a}`:r}pushState(t,r,a,l){const p=this.prepareExternalUrl(a+It(l));this._platformLocation.pushState(t,r,p)}replaceState(t,r,a,l){const p=this.prepareExternalUrl(a+It(l));this._platformLocation.replaceState(t,r,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Oe),D.LFG(lt,8))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})(),qe=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ot(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,a,l){let p=this.prepareExternalUrl(a+It(l));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.pushState(t,r,p)}replaceState(t,r,a,l){let p=this.prepareExternalUrl(a+It(l));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Oe),D.LFG(lt,8))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})(),We=(()=>{class n{constructor(t,r){this._subject=new D.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const a=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ye(vt(a)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+It(r))}normalize(t){return n.stripTrailingSlash(function ut(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,vt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",a=null){this._platformStrategy.pushState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+It(r)),a)}replaceState(t,r="",a=null){this._platformStrategy.replaceState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+It(r)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformStrategy).historyGo)||void 0===a||a.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(a=>a(t,r))}subscribe(t,r,a){return this._subject.subscribe({next:t,error:r,complete:a})}}return n.normalizeQueryParams=It,n.joinWithSlash=ot,n.stripTrailingSlash=Ye,n.\u0275fac=function(t){return new(t||n)(D.LFG(ge),D.LFG(Oe))},n.\u0275prov=D.Yz7({token:n,factory:function(){return function Xe(){return new We((0,D.LFG)(ge),(0,D.LFG)(Oe))}()},providedIn:"root"}),n})();function vt(n){return n.replace(/\/index.html$/,"")}function Dt(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[a,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(a.trim()===e)return decodeURIComponent(l)}return null}let ep=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=D.oAB({type:n}),n.\u0275inj=D.cJS({}),n})();function xc(n){return"server"===n}let Ts=(()=>{class n{}return n.\u0275prov=(0,D.Yz7)({token:n,providedIn:"root",factory:()=>new Mc((0,D.LFG)(Be),window)}),n})();class Mc{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ca(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let a=r.currentNode;for(;a;){const l=a.shadowRoot;if(l){const p=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(p)return p}a=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,a=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],a-l[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Rc(this.window.history)||Rc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Rc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Jn{}class la extends class du extends class Ue{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function xe(n){be||(be=n)}(new la)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Yu(){return rr=rr||document.querySelector("base"),rr?rr.getAttribute("href"):null}();return null==t?null:function fu(n){rh=rh||document.createElement("a"),rh.setAttribute("href",n);const e=rh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){rr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Dt(document.cookie,e)}}let rh,rr=null;const Yi=new D.OlP("TRANSITION_ID"),gr=[{provide:D.ip1,useFactory:function Cd(n,e,t){return()=>{t.get(D.CZH).donePromise.then(()=>{const r=Q(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<a.length;l++)r.remove(a[l])})}},deps:[Yi,Be,D.zs3],multi:!0}];class Hs{static init(){(0,D.VLi)(new Hs)}addToWindow(e){D.dqk.getAngularTestability=(r,a=!0)=>{const l=e.findTestabilityInTree(r,a);if(null==l)throw new Error("Could not find testability for element.");return l},D.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),D.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),D.dqk.frameworkStabilizers||(D.dqk.frameworkStabilizers=[]),D.dqk.frameworkStabilizers.push(r=>{const a=D.dqk.getAllAngularTestabilities();let l=a.length,p=!1;const b=function(A){p=p||A,l--,0==l&&r(p)};a.forEach(function(A){A.whenStable(b)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const a=e.getTestability(t);return null!=a?a:r?Q().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Pr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();const io=new D.OlP("EventManagerPlugins");let zs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,a){return this._findPluginFor(r).addEventListener(t,r,a)}addGlobalEventListener(t,r,a){return this._findPluginFor(r).addGlobalEventListener(t,r,a)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const a=this._plugins;for(let l=0;l<a.length;l++){const p=a[l];if(p.supports(t))return this._eventNameToPlugin.set(t,p),p}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(io),D.LFG(D.R0b))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();class ha{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const a=Q().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,r)}}let Ds=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),r.add(a))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})(),mi=(()=>{class n extends Ds{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,a){t.forEach(l=>{const p=this._doc.createElement("style");p.textContent=l,a.push(r.appendChild(p))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(kc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,a)=>{this._addStylesToHost(t,a,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(kc))}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Be))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();function kc(n){Q().remove(n)}const wn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pu=/%COMP%/g;function so(n,e,t){for(let r=0;r<e.length;r++){let a=e[r];Array.isArray(a)?so(n,a,t):(a=a.replace(pu,n),t.push(a))}return t}function ct(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Qu=(()=>{class n{constructor(t,r,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new mr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case D.ifc.Emulated:{let a=this.rendererByCompId.get(r.id);return a||(a=new Eo(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,a)),a.applyToHost(t),a}case 1:case D.ifc.ShadowDom:return new Nc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const a=so(r.id,r.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(zs),D.LFG(mi),D.LFG(D.AFp))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();class mr{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(wn[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,a){if(a){t=a+":"+t;const l=wn[a];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const a=wn[r];a?e.removeAttributeNS(a,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,a){a&(D.JOm.DashCase|D.JOm.Important)?e.style.setProperty(t,r,a&D.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&D.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ct(r)):this.eventManager.addEventListener(e,t,ct(r))}}class Eo extends mr{constructor(e,t,r,a){super(e),this.component=r;const l=so(a+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr=function sh(n){return"_ngcontent-%COMP%".replace(pu,n)}(a+"-"+r.id),this.hostAttr=function oh(n){return"_nghost-%COMP%".replace(pu,n)}(a+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Nc extends mr{constructor(e,t,r,a){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=so(a.id,a.styles,[]);for(let p=0;p<l.length;p++){const b=document.createElement("style");b.textContent=l[p],this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Io=(()=>{class n extends ha{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,a){return t.addEventListener(r,a,!1),()=>this.removeEventListener(t,r,a)}removeEventListener(t,r,a){return t.removeEventListener(r,a)}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Be))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();const Tl=["alt","control","meta","shift"],rm={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Co={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Qi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let oo=(()=>{class n extends ha{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,a){const l=n.parseEventName(r),p=n.eventCallback(l.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Q().onAndCancel(t,l.domEventName,p))}static parseEventName(t){const r=t.toLowerCase().split("."),a=r.shift();if(0===r.length||"keydown"!==a&&"keyup"!==a)return null;const l=n._normalizeKey(r.pop());let p="";if(Tl.forEach(A=>{const L=r.indexOf(A);L>-1&&(r.splice(L,1),p+=A+".")}),p+=l,0!=r.length||0===l.length)return null;const b={};return b.domEventName=a,b.fullKey=p,b}static getEventFullKey(t){let r="",a=function Dl(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Co.hasOwnProperty(e)&&(e=Co[e]))}return rm[e]||e}(t);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),Tl.forEach(l=>{l!=a&&Qi[l](t)&&(r+=l+".")}),r+=a,r}static eventCallback(t,r,a){return l=>{n.getEventFullKey(l)===t&&a.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Be))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();const Pc=(0,D.eFA)(D._c5,"browser",[{provide:D.Lbi,useValue:"browser"},{provide:D.g9A,useValue:function ka(){la.makeCurrent(),Hs.init()},multi:!0},{provide:Be,useFactory:function ah(){return(0,D.RDi)(document),document},deps:[]}]),Oc=[{provide:D.zSh,useValue:"root"},{provide:D.qLn,useFactory:function Xi(){return new D.qLn},deps:[]},{provide:io,useClass:Io,multi:!0,deps:[Be,D.R0b,D.Lbi]},{provide:io,useClass:oo,multi:!0,deps:[Be]},{provide:Qu,useClass:Qu,deps:[zs,mi,D.AFp]},{provide:D.FYo,useExisting:Qu},{provide:Ds,useExisting:mi},{provide:mi,useClass:mi,deps:[Be]},{provide:D.dDg,useClass:D.dDg,deps:[D.R0b]},{provide:zs,useClass:zs,deps:[io,D.R0b]},{provide:Jn,useClass:Pr,deps:[]}];let ao=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:D.AFp,useValue:t.appId},{provide:Yi,useExisting:D.AFp},gr]}}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(n,12))},n.\u0275mod=D.oAB({type:n}),n.\u0275inj=D.cJS({providers:Oc,imports:[ep,D.hGG]}),n})();"undefined"!=typeof window&&window;var Or=M(8996),jc=M(7669);function an(...n){const e=(0,jc.yG)(n);return(0,Or.D)(n,e)}var Gs=M(7579);class uo extends Gs.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Hr=M(8306);const{isArray:$c}=Array,{getPrototypeOf:xd,prototype:vu,keys:La}=Object;var Ho=M(4671),En=M(4004);const{isArray:rp}=Array;var ts=M(5403),Do=M(9672);function _u(...n){const e=(0,jc.yG)(n),t=(0,jc.jO)(n),{args:r,keys:a}=function Lr(n){if(1===n.length){const e=n[0];if($c(e))return{args:e,keys:null};if(function pa(n){return n&&"object"==typeof n&&xd(n)===vu}(e)){const t=La(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Or.D)([],e);const l=new Hr.y(function wu(n,e,t=Ho.y){return r=>{ns(e,()=>{const{length:a}=n,l=new Array(a);let p=a,b=a;for(let A=0;A<a;A++)ns(e,()=>{const L=(0,Or.D)(n[A],e);let z=!1;L.subscribe((0,ts.x)(r,K=>{l[A]=K,z||(z=!0,b--),b||r.next(t(l.slice()))},()=>{--p||r.complete()}))},r)},r)}}(r,e,a?p=>function Rd(n,e){return n.reduce((t,r,a)=>(t[r]=e[a],t),{})}(a,p):Ho.y));return t?l.pipe(function Md(n){return(0,En.U)(e=>function ip(n,e){return rp(e)?n(...e):n(e)}(n,e))}(t)):l}function ns(n,e,t){n?(0,Do.f)(t,n,e):e()}var bu=M(576);function Ju(n,e){const t=(0,bu.m)(n)?n:()=>n,r=a=>a.error(t());return new Hr.y(e?a=>e.schedule(r,0,a):r)}const Fa=(0,M(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ec=M(8189);function zc(...n){return function Eu(){return(0,ec.J)(1)}()((0,Or.D)(n,(0,jc.yG)(n)))}var sp=M(8421);function Gc(n){return new Hr.y(e=>{(0,sp.Xf)(n()).subscribe(e)})}var Ua=M(515),tc=M(727),Li=M(4482);function kd(){return(0,Li.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ts.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const a=n._connection,l=t;t=null,a&&(!l||a===l)&&a.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class zo extends Hr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Li.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new tc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ts.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=tc.w0.EMPTY)}return e}refCount(){return kd()(this)}}function Fi(n,e){return(0,Li.e)((t,r)=>{let a=null,l=0,p=!1;const b=()=>p&&!a&&r.complete();t.subscribe((0,ts.x)(r,A=>{null==a||a.unsubscribe();let L=0;const z=l++;(0,sp.Xf)(n(A,z)).subscribe(a=(0,ts.x)(r,K=>r.next(e?e(A,K,z,L++):K),()=>{a=null,b()}))},()=>{p=!0,b()}))})}var So=M(5698);function Go(...n){const e=(0,jc.yG)(n);return(0,Li.e)((t,r)=>{(e?zc(n,t,e):zc(n,t)).subscribe(r)})}function co(n,e,t,r,a){return(l,p)=>{let b=t,A=e,L=0;l.subscribe((0,ts.x)(p,z=>{const K=L++;A=b?n(A,z,K):(b=!0,z),r&&p.next(A)},a&&(()=>{b&&p.next(A),p.complete()})))}}function qo(n,e){return(0,Li.e)(co(n,e,arguments.length>=2,!0))}function ci(n,e){return(0,Li.e)((t,r)=>{let a=0;t.subscribe((0,ts.x)(r,l=>n.call(e,l,a++)&&r.next(l)))})}function Ss(n){return(0,Li.e)((e,t)=>{let l,r=null,a=!1;r=e.subscribe((0,ts.x)(t,void 0,void 0,p=>{l=(0,sp.Xf)(n(p,Ss(n)(e))),r?(r.unsubscribe(),r=null,l.subscribe(t)):a=!0})),a&&(r.unsubscribe(),r=null,l.subscribe(t))})}var Qr=M(5577);function Si(n,e){return(0,bu.m)(e)?(0,Qr.z)(n,e,1):(0,Qr.z)(n,1)}function qc(n){return n<=0?()=>Ua.E:(0,Li.e)((e,t)=>{let r=[];e.subscribe((0,ts.x)(t,a=>{r.push(a),n<r.length&&r.shift()},()=>{for(const a of r)t.next(a);t.complete()},void 0,()=>{r=null}))})}function Al(n=zr){return(0,Li.e)((e,t)=>{let r=!1;e.subscribe((0,ts.x)(t,a=>{r=!0,t.next(a)},()=>r?t.complete():t.error(n())))})}function zr(){return new Fa}function Wc(n){return(0,Li.e)((e,t)=>{let r=!1;e.subscribe((0,ts.x)(t,a=>{r=!0,t.next(a)},()=>{r||t.next(n),t.complete()}))})}function ga(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ci((a,l)=>n(a,l,r)):Ho.y,(0,So.q)(1),t?Wc(e):Al(()=>new Fa))}var rs=M(8505);class Ba{constructor(e,t){this.id=e,this.url=t}}class op extends Ba{constructor(e,t,r="imperative",a=null){super(e,t),this.navigationTrigger=r,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Va extends Ba{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xl extends Ba{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Xr extends Ba{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ml extends Ba{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yh extends Ba{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ap extends Ba{constructor(e,t,r,a,l){super(e,t),this.urlAfterRedirects=r,this.state=a,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class up extends Ba{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class is extends Ba{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ui{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class nc{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rc{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wo{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ko{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ao{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Iu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const xn="primary";class ma{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Kc(n){return new ma(n)}const Jr="ngNavigationCancelingError";function Rl(n){const e=Error("NavigationCancelingError: "+n);return e[Jr]=!0,e}function ov(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const a={};for(let l=0;l<r.length;l++){const p=r[l],b=n[l];if(p.startsWith(":"))a[p.substring(1)]=b;else if(p!==b.path)return null}return{consumed:n.slice(0,r.length),posParams:a}}function lo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let a;for(let l=0;l<t.length;l++)if(a=t[l],!kl(n[a],e[a]))return!1;return!0}function kl(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((a,l)=>r[l]===a)}return n===e}function cp(n){return Array.prototype.concat.apply([],n)}function ya(n){return n.length>0?n[n.length-1]:null}function Tr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function As(n){return(0,D.CqO)(n)?n:(0,D.QGY)(n)?(0,Or.D)(Promise.resolve(n)):an(n)}const um={exact:function F(n,e,t){if(!vn(n.segments,e.segments)||!we(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!F(n.children[r],e.children[r],t))return!1;return!0},subset:W},Cu={exact:function Nl(n,e){return lo(n,e)},subset:function B(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>kl(n[t],e[t]))},ignored:()=>!0};function Yc(n,e,t){return um[t.paths](n.root,e.root,t.matrixParams)&&Cu[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function W(n,e,t){return re(n,e,e.segments,t)}function re(n,e,t,r){if(n.segments.length>t.length){const a=n.segments.slice(0,t.length);return!(!vn(a,t)||e.hasChildren()||!we(a,t,r))}if(n.segments.length===t.length){if(!vn(n.segments,t)||!we(n.segments,t,r))return!1;for(const a in e.children)if(!n.children[a]||!W(n.children[a],e.children[a],r))return!1;return!0}{const a=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(vn(n.segments,a)&&we(n.segments,a,r)&&n.children[xn])&&re(n.children[xn],e,l,r)}}function we(n,e,t){return e.every((r,a)=>Cu[t](n[a].parameters,r.parameters))}class Pe{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kc(this.queryParams)),this._queryParamMap}toString(){return ho.serialize(this)}}class $e{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Tr(t,(r,a)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $a(this)}}class Nt{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Kc(this.parameters)),this._parameterMap}toString(){return Xc(this)}}function vn(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class hn{}class Fr{parse(e){const t=new Ga(e);return new Pe(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${xo(e.root,!0)}`,r=function cm(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(a=>`${Ha(t)}=${Ha(a)}`).join("&"):`${Ha(t)}=${Ha(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Qc(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ho=new Fr;function $a(n){return n.segments.map(e=>Xc(e)).join("/")}function xo(n,e){if(!n.hasChildren())return $a(n);if(e){const t=n.children[xn]?xo(n.children[xn],!1):"",r=[];return Tr(n.children,(a,l)=>{l!==xn&&r.push(`${l}:${xo(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Vn(n,e){let t=[];return Tr(n.children,(r,a)=>{a===xn&&(t=t.concat(e(r,a)))}),Tr(n.children,(r,a)=>{a!==xn&&(t=t.concat(e(r,a)))}),t}(n,(r,a)=>a===xn?[xo(n.children[xn],!1)]:[`${a}:${xo(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xn]?`${$a(n)}/${t[0]}`:`${$a(n)}/(${t.join("//")})`}}function Mo(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ha(n){return Mo(n).replace(/%3B/gi,";")}function Zo(n){return Mo(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yo(n){return decodeURIComponent(n)}function za(n){return Yo(n.replace(/\+/g,"%20"))}function Xc(n){return`${Zo(n.path)}${function hp(n){return Object.keys(n).map(e=>`;${Zo(e)}=${Zo(n[e])}`).join("")}(n.parameters)}`}const lm=/^[^\/()?;=#]+/;function dp(n){const e=n.match(lm);return e?e[0]:""}const vh=/^[^=?&#]+/,hm=/^[^&#]+/;class Ga{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $e([],{}):new $e([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xn]=new $e(e,t)),r}parseSegment(){const e=dp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Nt(Yo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=dp(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=dp(this.remaining);a&&(r=a,this.capture(r))}e[Yo(t)]=Yo(r)}parseQueryParam(e){const t=function Od(n){const e=n.match(vh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const p=function jb(n){const e=n.match(hm);return e?e[0]:""}(this.remaining);p&&(r=p,this.capture(r))}const a=za(t),l=za(r);if(e.hasOwnProperty(a)){let p=e[a];Array.isArray(p)||(p=[p],e[a]=p),p.push(l)}else e[a]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=dp(this.remaining),a=this.remaining[r.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=xn);const p=this.parseChildren();t[l]=1===Object.keys(p).length?p[xn]:new $e([],p),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class fp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=dm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=dm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=qa(e,this._root);return t.length<2?[]:t[t.length-2].children.map(a=>a.value).filter(a=>a!==e)}pathFromRoot(e){return qa(e,this._root).map(t=>t.value)}}function dm(n,e){if(n===e.value)return e;for(const t of e.children){const r=dm(n,t);if(r)return r}return null}function qa(n,e){if(n===e.value)return[e];for(const t of e.children){const r=qa(n,t);if(r.length)return r.unshift(e),r}return[]}class ic{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function _h(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ld extends fp{constructor(e,t){super(e),this.snapshot=t,Ud(this,e)}toString(){return this.snapshot.toString()}}function Fd(n,e){const t=function wh(n,e){const p=new sc([],{},{},"",{},xn,e,null,n.root,-1,{});return new gp("",new ic(p,[]))}(n,e),r=new uo([new Nt("",{})]),a=new uo({}),l=new uo({}),p=new uo({}),b=new uo(""),A=new bh(r,a,p,b,l,xn,e,t.root);return A.snapshot=t.root,new Ld(new ic(A,[]),t)}class bh{constructor(e,t,r,a,l,p,b,A){this.url=e,this.params=t,this.queryParams=r,this.fragment=a,this.data=l,this.outlet=p,this.component=b,this._futureSnapshot=A}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,En.U)(e=>Kc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,En.U)(e=>Kc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const a=t[r],l=t[r-1];if(a.routeConfig&&""===a.routeConfig.path)r--;else{if(l.component)break;r--}}return function av(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class sc{constructor(e,t,r,a,l,p,b,A,L,z,K){this.url=e,this.params=t,this.queryParams=r,this.fragment=a,this.data=l,this.outlet=p,this.component=b,this.routeConfig=A,this._urlSegment=L,this._lastPathIndex=z,this._resolve=K}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Kc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gp extends fp{constructor(e,t){super(t),this.url=e,Ud(this,t)}toString(){return mp(this._root)}}function Ud(n,e){e.value._routerState=n,e.children.forEach(t=>Ud(n,t))}function mp(n){const e=n.children.length>0?` { ${n.children.map(mp).join(", ")} } `:"";return`${n.value}${e}`}function Bd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,lo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),lo(e.params,t.params)||n.params.next(t.params),function ja(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!lo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),lo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function yp(n,e){const t=lo(n.params,e.params)&&function Wt(n,e){return vn(n,e)&&n.every((t,r)=>lo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||yp(n.parent,e.parent))}function Eh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const a=function d0(n,e,t){return e.children.map(r=>{for(const a of t.children)if(n.shouldReuseRoute(r.value,a.value.snapshot))return Eh(n,r,a);return Eh(n,r)})}(n,e,t);return new ic(r,a)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const p=l.route;return p.value._futureSnapshot=e.value,p.children=e.children.map(b=>Eh(n,b)),p}}const r=function f0(n){return new bh(new uo(n.url),new uo(n.params),new uo(n.queryParams),new uo(n.fragment),new uo(n.data),n.outlet,n.component,n)}(e.value),a=e.children.map(l=>Eh(n,l));return new ic(r,a)}}function Qo(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function oc(n){return"object"==typeof n&&null!=n&&n.outlets}function Ih(n,e,t,r,a){let l={};if(r&&Tr(r,(b,A)=>{l[A]=Array.isArray(b)?b.map(L=>`${L}`):`${b}`}),n===e)return new Pe(t,l,a);const p=fm(n,e,t);return new Pe(p,l,a)}function fm(n,e,t){const r={};return Tr(n.children,(a,l)=>{r[l]=a===e?t:fm(a,e,t)}),new $e(n.segments,r)}class lv{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Qo(r[0]))throw new Error("Root segment cannot have matrix parameters");const a=r.find(oc);if(a&&a!==ya(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class vp{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function dv(n,e,t){if(n||(n=new $e([],{})),0===n.segments.length&&n.hasChildren())return _p(n,e,t);const r=function wp(n,e,t){let r=0,a=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(r>=t.length)return l;const p=n.segments[a],b=t[r];if(oc(b))break;const A=`${b}`,L=r<t.length-1?t[r+1]:null;if(a>0&&void 0===A)break;if(A&&L&&"object"==typeof L&&void 0===L.outlets){if(!jd(A,L,p))return l;r+=2}else{if(!jd(A,{},p))return l;r++}a++}return{match:!0,pathIndex:a,commandIndex:r}}(n,e,t),a=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new $e(n.segments.slice(0,r.pathIndex),{});return l.children[xn]=new $e(n.segments.slice(r.pathIndex),n.children),_p(l,0,a)}return r.match&&0===a.length?new $e(n.segments,{}):r.match&&!n.hasChildren()?p0(n,e,t):r.match?_p(n,0,a):p0(n,e,t)}function _p(n,e,t){if(0===t.length)return new $e(n.segments,{});{const r=function hv(n){return oc(n[0])?n[0].outlets:{[xn]:n}}(t),a={};return Tr(r,(l,p)=>{"string"==typeof l&&(l=[l]),null!==l&&(a[p]=dv(n.children[p],e,l))}),Tr(n.children,(l,p)=>{void 0===r[p]&&(a[p]=l)}),new $e(n.segments,a)}}function p0(n,e,t){const r=n.segments.slice(0,e);let a=0;for(;a<t.length;){const l=t[a];if(oc(l)){const A=Wa(l.outlets);return new $e(r,A)}if(0===a&&Qo(t[0])){r.push(new Nt(n.segments[e].path,Vd(t[0]))),a++;continue}const p=oc(l)?l.outlets[xn]:`${l}`,b=a<t.length-1?t[a+1]:null;p&&b&&Qo(b)?(r.push(new Nt(p,Vd(b))),a+=2):(r.push(new Nt(p,{})),a++)}return new $e(r,{})}function Wa(n){const e={};return Tr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=p0(new $e([],{}),0,t))}),e}function Vd(n){const e={};return Tr(n,(t,r)=>e[r]=`${t}`),e}function jd(n,e,t){return n==t.path&&lo(e,t.parameters)}class $d{constructor(e,t,r,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Bd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const a=_h(t);e.children.forEach(l=>{const p=l.value.outlet;this.deactivateRoutes(l,a[p],r),delete a[p]}),Tr(a,(l,p)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(e,t,r){const a=e.value,l=t?t.value:null;if(a===l)if(a.component){const p=r.getContext(a.outlet);p&&this.deactivateChildRoutes(e,t,p.children)}else this.deactivateChildRoutes(e,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),a=r&&e.value.component?r.children:t,l=_h(e);for(const p of Object.keys(l))this.deactivateRouteAndItsChildren(l[p],a);if(r&&r.outlet){const p=r.outlet.detach(),b=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:p,route:e,contexts:b})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),a=r&&e.value.component?r.children:t,l=_h(e);for(const p of Object.keys(l))this.deactivateRouteAndItsChildren(l[p],a);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const a=_h(t);e.children.forEach(l=>{this.activateRoutes(l,a[l.value.outlet],r),this.forwardEvent(new Ao(l.value.snapshot))}),e.children.length&&this.forwardEvent(new Wo(e.value.snapshot))}activateRoutes(e,t,r){const a=e.value,l=t?t.value:null;if(Bd(a),a===l)if(a.component){const p=r.getOrCreateContext(a.outlet);this.activateChildRoutes(e,t,p.children)}else this.activateChildRoutes(e,t,r);else if(a.component){const p=r.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const b=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),p.children.onOutletReAttached(b.contexts),p.attachRef=b.componentRef,p.route=b.route.value,p.outlet&&p.outlet.attach(b.componentRef,b.route.value),Bd(b.route.value),this.activateChildRoutes(e,null,p.children)}else{const b=function Hd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(a.snapshot),A=b?b.module.componentFactoryResolver:null;p.attachRef=null,p.route=a,p.resolver=A,p.outlet&&p.outlet.activateWith(a,A),this.activateChildRoutes(e,null,p.children)}}else this.activateChildRoutes(e,null,r)}}class ac{constructor(e,t){this.routes=e,this.module=t}}function Ka(n){return"function"==typeof n}function Ch(n){return n instanceof Pe}const Ep=Symbol("INITIAL_VALUE");function Ip(){return Fi(n=>_u(n.map(e=>e.pipe((0,So.q)(1),Go(Ep)))).pipe(qo((e,t)=>{let r=!1;return t.reduce((a,l,p)=>a!==Ep?a:(l===Ep&&(r=!0),r||!1!==l&&p!==t.length-1&&!Ch(l)?a:l),e)},Ep),ci(e=>e!==Ep),(0,En.U)(e=>Ch(e)?e:!0===e),(0,So.q)(1)))}class fv{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Pl,this.attachRef=null}}class Pl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new fv,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let qd=(()=>{class n{constructor(t,r,a,l,p){this.parentContexts=t,this.location=r,this.resolver=a,this.changeDetector=p,this.activated=null,this._activatedRoute=null,this.activateEvents=new D.vpe,this.deactivateEvents=new D.vpe,this.attachEvents=new D.vpe,this.detachEvents=new D.vpe,this.name=l||xn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const p=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),b=this.parentContexts.getOrCreateContext(this.name).children,A=new pv(t,b,this.location.injector);this.activated=this.location.createComponent(p,this.location.length,A),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(D.Y36(Pl),D.Y36(D.s_b),D.Y36(D._Vd),D.$8M("name"),D.Y36(D.sBO))},n.\u0275dir=D.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class pv{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===bh?this.route:e===Pl?this.childContexts:this.parent.get(e,t)}}let Wd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=D.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&D._UZ(0,"router-outlet")},directives:[qd],encapsulation:2}),n})();function Th(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Jc(r,Dh(e,r))}}function Jc(n,e){n.children&&Th(n.children,e)}function Dh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Tu(n){const e=n.children&&n.children.map(Tu),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xn&&(t.component=Wd),t}function ss(n){return n.outlet||xn}function Gr(n,e){const t=n.filter(r=>ss(r)===e);return t.push(...n.filter(r=>ss(r)!==e)),t}const gv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _a(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},gv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const l=(e.matcher||ov)(t,n,e);if(!l)return Object.assign({},gv);const p={};Tr(l.posParams,(A,L)=>{p[L]=A.path});const b=l.consumed.length>0?Object.assign(Object.assign({},p),l.consumed[l.consumed.length-1].parameters):p;return{matched:!0,consumedSegments:l.consumed,remainingSegments:t.slice(l.consumed.length),parameters:b,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function el(n,e,t,r,a="corrected"){if(t.length>0&&function y0(n,e,t){return t.some(r=>tl(n,e,r)&&ss(r)!==xn)}(n,t,r)){const p=new $e(e,function m0(n,e,t,r){const a={};a[xn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&ss(l)!==xn){const p=new $e([],{});p._sourceSegment=n,p._segmentIndexShift=e.length,a[ss(l)]=p}return a}(n,e,r,new $e(t,n.children)));return p._sourceSegment=n,p._segmentIndexShift=e.length,{segmentGroup:p,slicedSegments:[]}}if(0===t.length&&function Kd(n,e,t){return t.some(r=>tl(n,e,r))}(n,t,r)){const p=new $e(n.segments,function mm(n,e,t,r,a,l){const p={};for(const b of r)if(tl(n,t,b)&&!a[ss(b)]){const A=new $e([],{});A._sourceSegment=n,A._segmentIndexShift="legacy"===l?n.segments.length:e.length,p[ss(b)]=A}return Object.assign(Object.assign({},a),p)}(n,e,t,r,n.children,a));return p._sourceSegment=n,p._segmentIndexShift=e.length,{segmentGroup:p,slicedSegments:t}}const l=new $e(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function tl(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function mv(n,e,t,r){return!!(ss(n)===r||r!==xn&&tl(e,t,n))&&("**"===n.path||_a(e,n,t).matched)}function Cp(n,e,t){return 0===e.length&&!n.children[t]}class Zd{constructor(e){this.segmentGroup=e||null}}class Sh{constructor(e){this.urlTree=e}}function Bi(n){return Ju(new Zd(n))}function Tp(n){return Ju(new Sh(n))}class Ol{constructor(e,t,r,a,l){this.configLoader=t,this.urlSerializer=r,this.urlTree=a,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(D.h0i)}apply(){const e=el(this.urlTree.root,[],[],this.config).segmentGroup,t=new $e(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,xn).pipe((0,En.U)(l=>this.createUrlTree(nl(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ss(l=>{if(l instanceof Sh)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof Zd?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,xn).pipe((0,En.U)(a=>this.createUrlTree(nl(a),e.queryParams,e.fragment))).pipe(Ss(a=>{throw a instanceof Zd?this.noMatchError(a):a}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const a=e.segments.length>0?new $e([],{[xn]:e}):e;return new Pe(a,t,r)}expandSegmentGroup(e,t,r,a){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,En.U)(l=>new $e([],l))):this.expandSegment(e,r,t,r.segments,a,!0)}expandChildren(e,t,r){const a=[];for(const l of Object.keys(r.children))"primary"===l?a.unshift(l):a.push(l);return(0,Or.D)(a).pipe(Si(l=>{const p=r.children[l],b=Gr(t,l);return this.expandSegmentGroup(e,b,p,l).pipe((0,En.U)(A=>({segment:A,outlet:l})))}),qo((l,p)=>(l[p.outlet]=p.segment,l),{}),function h0(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ci((a,l)=>n(a,l,r)):Ho.y,qc(1),t?Wc(e):Al(()=>new Fa))}())}expandSegment(e,t,r,a,l,p){return(0,Or.D)(r).pipe(Si(b=>this.expandSegmentAgainstRoute(e,t,r,b,a,l,p).pipe(Ss(L=>{if(L instanceof Zd)return an(null);throw L}))),ga(b=>!!b),Ss((b,A)=>{if(b instanceof Fa||"EmptyError"===b.name)return Cp(t,a,l)?an(new $e([],{})):Bi(t);throw b}))}expandSegmentAgainstRoute(e,t,r,a,l,p,b){return mv(a,t,l,p)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(e,t,a,l,p):b&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,a,l,p):Bi(t):Bi(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,a,l,p){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,a,p):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,a,l,p)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,a){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Tp(l):this.lineralizeSegments(r,l).pipe((0,Qr.z)(p=>{const b=new $e(p,{});return this.expandSegment(e,b,t,p,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,a,l,p){const{matched:b,consumedSegments:A,remainingSegments:L,positionalParamSegments:z}=_a(t,a,l);if(!b)return Bi(t);const K=this.applyRedirectCommands(A,a.redirectTo,z);return a.redirectTo.startsWith("/")?Tp(K):this.lineralizeSegments(a,K).pipe((0,Qr.z)(ae=>this.expandSegment(e,t,r,ae.concat(L),p,!1)))}matchSegmentAgainstRoute(e,t,r,a,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?an(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,En.U)(K=>(r._loadedConfig=K,new $e(a,{})))):an(new $e(a,{}));const{matched:p,consumedSegments:b,remainingSegments:A}=_a(t,r,a);return p?this.getChildConfig(e,r,a).pipe((0,Qr.z)(z=>{const K=z.module,ae=z.routes,{segmentGroup:ie,slicedSegments:Te}=el(t,b,A,ae),dt=new $e(ie.segments,ie.children);if(0===Te.length&&dt.hasChildren())return this.expandChildren(K,ae,dt).pipe((0,En.U)(Zt=>new $e(b,Zt)));if(0===ae.length&&0===Te.length)return an(new $e(b,{}));const yt=ss(r)===l;return this.expandSegment(K,dt,ae,Te,yt?xn:l,!0).pipe((0,En.U)(At=>new $e(b.concat(At.segments),At.children)))})):Bi(t)}getChildConfig(e,t,r){return t.children?an(new ac(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?an(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Qr.z)(a=>a?this.configLoader.load(e.injector,t).pipe((0,En.U)(l=>(t._loadedConfig=l,l))):function Ah(n){return Ju(Rl(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):an(new ac([],e))}runCanLoadGuards(e,t,r){const a=t.canLoad;return a&&0!==a.length?an(a.map(p=>{const b=e.get(p);let A;if(function g0(n){return n&&Ka(n.canLoad)}(b))A=b.canLoad(t,r);else{if(!Ka(b))throw new Error("Invalid CanLoad guard");A=b(t,r)}return As(A)})).pipe(Ip(),(0,rs.b)(p=>{if(!Ch(p))return;const b=Rl(`Redirecting to "${this.urlSerializer.serialize(p)}"`);throw b.url=p,b}),(0,En.U)(p=>!0===p)):an(!0)}lineralizeSegments(e,t){let r=[],a=t.root;for(;;){if(r=r.concat(a.segments),0===a.numberOfChildren)return an(r);if(a.numberOfChildren>1||!a.children[xn])return Ju(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));a=a.children[xn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,a){const l=this.createSegmentGroup(e,t.root,r,a);return new Pe(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Tr(e,(a,l)=>{if("string"==typeof a&&a.startsWith(":")){const b=a.substring(1);r[l]=t[b]}else r[l]=a}),r}createSegmentGroup(e,t,r,a){const l=this.createSegments(e,t.segments,r,a);let p={};return Tr(t.children,(b,A)=>{p[A]=this.createSegmentGroup(e,b,r,a)}),new $e(l,p)}createSegments(e,t,r,a){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,a):this.findOrReturn(l,r))}findPosParam(e,t,r){const a=r[t.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return a}findOrReturn(e,t){let r=0;for(const a of t){if(a.path===e.path)return t.splice(r),a;r++}return e}}function nl(n){const e={};for(const r of Object.keys(n.children)){const l=nl(n.children[r]);(l.segments.length>0||l.hasChildren())&&(e[r]=l)}return function Dp(n){if(1===n.numberOfChildren&&n.children[xn]){const e=n.children[xn];return new $e(n.segments.concat(e.segments),e.children)}return n}(new $e(n.segments,e))}class qs{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class rl{constructor(e,t){this.component=e,this.route=t}}function vm(n,e,t){const r=n._root;return Ll(r,e?e._root:null,t,[r.value])}function uc(n,e,t){const r=function Yd(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Ll(n,e,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=_h(e);return n.children.forEach(p=>{(function Du(n,e,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,p=e?e.value:null,b=t?t.getContext(n.value.outlet):null;if(p&&l.routeConfig===p.routeConfig){const A=function _0(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!vn(n.url,e.url);case"pathParamsOrQueryParamsChange":return!vn(n.url,e.url)||!lo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yp(n,e)||!lo(n.queryParams,e.queryParams);default:return!yp(n,e)}}(p,l,l.routeConfig.runGuardsAndResolvers);A?a.canActivateChecks.push(new qs(r)):(l.data=p.data,l._resolvedData=p._resolvedData),Ll(n,e,l.component?b?b.children:null:t,r,a),A&&b&&b.outlet&&b.outlet.isActivated&&a.canDeactivateChecks.push(new rl(b.outlet.component,p))}else p&&Ro(e,b,a),a.canActivateChecks.push(new qs(r)),Ll(n,null,l.component?b?b.children:null:t,r,a)})(p,l[p.value.outlet],t,r.concat([p.value]),a),delete l[p.value.outlet]}),Tr(l,(p,b)=>Ro(p,t.getContext(b),a)),a}function Ro(n,e,t){const r=_h(n),a=n.value;Tr(r,(l,p)=>{Ro(l,a.component?e?e.children.getContext(p):null:e,t)}),t.canDeactivateChecks.push(new rl(a.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,a))}class Ap{}function Ai(n){return new Hr.y(e=>e.error(n))}class _v{constructor(e,t,r,a,l,p){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=p}recognize(){const e=el(this.urlTree.root,[],[],this.config.filter(p=>void 0===p.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,xn);if(null===t)return null;const r=new sc([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},xn,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new ic(r,t),l=new gp(this.url,a);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,r=pp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const l of Object.keys(t.children)){const p=t.children[l],b=Gr(e,l),A=this.processSegmentGroup(b,p,l);if(null===A)return null;r.push(...A)}const a=Xd(r);return function wv(n){n.sort((e,t)=>e.value.outlet===xn?-1:t.value.outlet===xn?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}processSegment(e,t,r,a){for(const l of e){const p=this.processSegmentAgainstRoute(l,t,r,a);if(null!==p)return p}return Cp(t,r,a)?[]:null}processSegmentAgainstRoute(e,t,r,a){if(e.redirectTo||!mv(e,t,r,a))return null;let l,p=[],b=[];if("**"===e.path){const ie=r.length>0?ya(r).parameters:{};l=new sc(r,ie,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,C(e),ss(e),e.component,e,wm(t),Fl(t)+r.length,y(e))}else{const ie=_a(t,e,r);if(!ie.matched)return null;p=ie.consumedSegments,b=ie.remainingSegments,l=new sc(p,ie.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,C(e),ss(e),e.component,e,wm(t),Fl(t)+p.length,y(e))}const A=function bv(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:L,slicedSegments:z}=el(t,p,b,A.filter(ie=>void 0===ie.redirectTo),this.relativeLinkResolution);if(0===z.length&&L.hasChildren()){const ie=this.processChildren(A,L);return null===ie?null:[new ic(l,ie)]}if(0===A.length&&0===z.length)return[new ic(l,[])];const K=ss(e)===a,ae=this.processSegment(A,L,z,K?xn:a);return null===ae?null:[new ic(l,ae)]}}function xp(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Xd(n){const e=[],t=new Set;for(const r of n){if(!xp(r)){e.push(r);continue}const a=e.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==a?(a.children.push(...r.children),t.add(a)):e.push(r)}for(const r of t){const a=Xd(r.children);e.push(new ic(r.value,a))}return e.filter(r=>!t.has(r))}function wm(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Fl(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function C(n){return n.data||{}}function y(n){return n.resolve||{}}function pe(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function St(n){return Fi(e=>{const t=n(e);return t?(0,Or.D)(t).pipe((0,En.U)(()=>e)):an(e)})}class cn extends class fn{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ei=new D.OlP("ROUTES");class Po{constructor(e,t,r,a){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=a}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const a=this.loadModuleFactory(t.loadChildren).pipe((0,En.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const p=l.create(e);return new ac(cp(p.injector.get(ei,void 0,D.XFs.Self|D.XFs.Optional)).map(Tu),p)}),Ss(l=>{throw t._loader$=void 0,l}));return t._loader$=new zo(a,()=>new Gs.x).pipe(kd()),t._loader$}loadModuleFactory(e){return As(e()).pipe((0,Qr.z)(t=>t instanceof D.YKP?an(t):(0,Or.D)(this.compiler.compileModuleAsync(t))))}}class bm{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Ev(n){throw n}function _i(n,e,t){return e.parse("/")}function wa(n,e){return an(null)}const Mp={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Em={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ws=(()=>{class n{constructor(t,r,a,l,p,b,A){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=a,this.location=l,this.config=A,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Gs.x,this.errorHandler=Ev,this.malformedUriErrorHandler=_i,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:wa,afterPreactivation:wa},this.urlHandlingStrategy=new bm,this.routeReuseStrategy=new cn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=p.get(D.h0i),this.console=p.get(D.c2e);const K=p.get(D.R0b);this.isNgZoneEnabled=K instanceof D.R0b&&D.R0b.isInAngularZone(),this.resetConfig(A),this.currentUrlTree=function Pd(){return new Pe(new $e([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Po(p,b,ae=>this.triggerEvent(new Ui(ae)),ae=>this.triggerEvent(new nc(ae))),this.routerState=Fd(this.currentUrlTree,this.rootComponentType),this.transitions=new uo({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ci(a=>0!==a.id),(0,En.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),Fi(a=>{let l=!1,p=!1;return an(a).pipe((0,rs.b)(b=>{this.currentNavigation={id:b.id,initialUrl:b.currentRawUrl,extractedUrl:b.extractedUrl,trigger:b.source,extras:b.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Fi(b=>{const A=this.browserUrlTree.toString(),L=!this.navigated||b.extractedUrl.toString()!==A||A!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||L)&&this.urlHandlingStrategy.shouldProcessUrl(b.rawUrl))return Cm(b.source)&&(this.browserUrlTree=b.extractedUrl),an(b).pipe(Fi(K=>{const ae=this.transitions.getValue();return r.next(new op(K.id,this.serializeUrl(K.extractedUrl),K.source,K.restoredState)),ae!==this.transitions.getValue()?Ua.E:Promise.resolve(K)}),function yv(n,e,t,r){return Fi(a=>function Vi(n,e,t,r,a){return new Ol(n,e,t,r,a).apply()}(n,e,t,a.extractedUrl,r).pipe((0,En.U)(l=>Object.assign(Object.assign({},a),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,rs.b)(K=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:K.urlAfterRedirects})}),function _(n,e,t,r,a){return(0,Qr.z)(l=>function Qd(n,e,t,r,a="emptyOnly",l="legacy"){try{const p=new _v(n,e,t,r,a,l).recognize();return null===p?Ai(new Ap):an(p)}catch(p){return Ai(p)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),r,a).pipe((0,En.U)(p=>Object.assign(Object.assign({},l),{targetSnapshot:p}))))}(this.rootComponentType,this.config,K=>this.serializeUrl(K),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,rs.b)(K=>{if("eager"===this.urlUpdateStrategy){if(!K.extras.skipLocationChange){const ie=this.urlHandlingStrategy.merge(K.urlAfterRedirects,K.rawUrl);this.setBrowserUrl(ie,K)}this.browserUrlTree=K.urlAfterRedirects}const ae=new Ml(K.id,this.serializeUrl(K.extractedUrl),this.serializeUrl(K.urlAfterRedirects),K.targetSnapshot);r.next(ae)}));if(L&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ae,extractedUrl:ie,source:Te,restoredState:dt,extras:yt}=b,Qt=new op(ae,this.serializeUrl(ie),Te,dt);r.next(Qt);const At=Fd(ie,this.rootComponentType).snapshot;return an(Object.assign(Object.assign({},b),{targetSnapshot:At,urlAfterRedirects:ie,extras:Object.assign(Object.assign({},yt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=b.rawUrl,b.resolve(null),Ua.E}),St(b=>{const{targetSnapshot:A,id:L,extractedUrl:z,rawUrl:K,extras:{skipLocationChange:ae,replaceUrl:ie}}=b;return this.hooks.beforePreactivation(A,{navigationId:L,appliedUrlTree:z,rawUrlTree:K,skipLocationChange:!!ae,replaceUrl:!!ie})}),(0,rs.b)(b=>{const A=new yh(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(A)}),(0,En.U)(b=>Object.assign(Object.assign({},b),{guards:vm(b.targetSnapshot,b.currentSnapshot,this.rootContexts)})),function Za(n,e){return(0,Qr.z)(t=>{const{targetSnapshot:r,currentSnapshot:a,guards:{canActivateChecks:l,canDeactivateChecks:p}}=t;return 0===p.length&&0===l.length?an(Object.assign(Object.assign({},t),{guardsResult:!0})):function w0(n,e,t,r){return(0,Or.D)(n).pipe((0,Qr.z)(a=>function No(n,e,t,r,a){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return l&&0!==l.length?an(l.map(b=>{const A=uc(b,e,a);let L;if(function gm(n){return n&&Ka(n.canDeactivate)}(A))L=As(A.canDeactivate(n,e,t,r));else{if(!Ka(A))throw new Error("Invalid CanDeactivate guard");L=As(A(n,e,t,r))}return L.pipe(ga())})).pipe(Ip()):an(!0)}(a.component,a.route,t,e,r)),ga(a=>!0!==a,!0))}(p,r,a,n).pipe((0,Qr.z)(b=>b&&function bp(n){return"boolean"==typeof n}(b)?function b0(n,e,t,r){return(0,Or.D)(e).pipe(Si(a=>zc(function vv(n,e){return null!==n&&e&&e(new rc(n)),an(!0)}(a.route.parent,r),function Sp(n,e){return null!==n&&e&&e(new Ko(n)),an(!0)}(a.route,r),function _m(n,e,t){const r=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(p=>function v0(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(p)).filter(p=>null!==p).map(p=>Gc(()=>an(p.guards.map(A=>{const L=uc(A,p.node,t);let z;if(function Gd(n){return n&&Ka(n.canActivateChild)}(L))z=As(L.canActivateChild(r,n));else{if(!Ka(L))throw new Error("Invalid CanActivateChild guard");z=As(L(r,n))}return z.pipe(ga())})).pipe(Ip())));return an(l).pipe(Ip())}(n,a.path,t),function ko(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return an(!0);const a=r.map(l=>Gc(()=>{const p=uc(l,e,t);let b;if(function zd(n){return n&&Ka(n.canActivate)}(p))b=As(p.canActivate(e,n));else{if(!Ka(p))throw new Error("Invalid CanActivate guard");b=As(p(e,n))}return b.pipe(ga())}));return an(a).pipe(Ip())}(n,a.route,t))),ga(a=>!0!==a,!0))}(r,l,n,e):an(b)),(0,En.U)(b=>Object.assign(Object.assign({},t),{guardsResult:b})))})}(this.ngModule.injector,b=>this.triggerEvent(b)),(0,rs.b)(b=>{if(Ch(b.guardsResult)){const L=Rl(`Redirecting to "${this.serializeUrl(b.guardsResult)}"`);throw L.url=b.guardsResult,L}const A=new ap(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot,!!b.guardsResult);this.triggerEvent(A)}),ci(b=>!!b.guardsResult||(this.restoreHistory(b),this.cancelNavigationTransition(b,""),!1)),St(b=>{if(b.guards.canActivateChecks.length)return an(b).pipe((0,rs.b)(A=>{const L=new up(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);this.triggerEvent(L)}),Fi(A=>{let L=!1;return an(A).pipe(function x(n,e){return(0,Qr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:a}}=t;if(!a.length)return an(t);let l=0;return(0,Or.D)(a).pipe(Si(p=>function j(n,e,t,r){return function Z(n,e,t,r){const a=pe(n);if(0===a.length)return an({});const l={};return(0,Or.D)(a).pipe((0,Qr.z)(p=>function He(n,e,t,r){const a=uc(n,e,r);return As(a.resolve?a.resolve(e,t):a(e,t))}(n[p],e,t,r).pipe((0,rs.b)(b=>{l[p]=b}))),qc(1),(0,Qr.z)(()=>pe(l).length===a.length?an(l):Ua.E))}(n._resolve,n,e,r).pipe((0,En.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),pp(n,t).resolve),null)))}(p.route,r,n,e)),(0,rs.b)(()=>l++),qc(1),(0,Qr.z)(p=>l===a.length?an(t):Ua.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,rs.b)({next:()=>L=!0,complete:()=>{L||(this.restoreHistory(A),this.cancelNavigationTransition(A,"At least one route resolver didn't emit any value."))}}))}),(0,rs.b)(A=>{const L=new is(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);this.triggerEvent(L)}))}),St(b=>{const{targetSnapshot:A,id:L,extractedUrl:z,rawUrl:K,extras:{skipLocationChange:ae,replaceUrl:ie}}=b;return this.hooks.afterPreactivation(A,{navigationId:L,appliedUrlTree:z,rawUrlTree:K,skipLocationChange:!!ae,replaceUrl:!!ie})}),(0,En.U)(b=>{const A=function uv(n,e,t){const r=Eh(n,e._root,t?t._root:void 0);return new Ld(r,e)}(this.routeReuseStrategy,b.targetSnapshot,b.currentRouterState);return Object.assign(Object.assign({},b),{targetRouterState:A})}),(0,rs.b)(b=>{this.currentUrlTree=b.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl),this.routerState=b.targetRouterState,"deferred"===this.urlUpdateStrategy&&(b.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,b),this.browserUrlTree=b.urlAfterRedirects)}),((n,e,t)=>(0,En.U)(r=>(new $d(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,b=>this.triggerEvent(b)),(0,rs.b)({next(){l=!0},complete(){l=!0}}),function Nd(n){return(0,Li.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var b;l||p||this.cancelNavigationTransition(a,`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`),(null===(b=this.currentNavigation)||void 0===b?void 0:b.id)===a.id&&(this.currentNavigation=null)}),Ss(b=>{if(p=!0,function Zc(n){return n&&n[Jr]}(b)){const A=Ch(b.url);A||(this.navigated=!0,this.restoreHistory(a,!0));const L=new xl(a.id,this.serializeUrl(a.extractedUrl),b.message);r.next(L),A?setTimeout(()=>{const z=this.urlHandlingStrategy.merge(b.url,this.rawUrlTree),K={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Cm(a.source)};this.scheduleNavigation(z,"imperative",null,K,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const A=new Xr(a.id,this.serializeUrl(a.extractedUrl),b);r.next(A);try{a.resolve(this.errorHandler(b))}catch(L){a.reject(L)}}return Ua.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var a;const l={replaceUrl:!0},p=(null===(a=t.state)||void 0===a?void 0:a.navigationId)?t.state:null;if(p){const A=Object.assign({},p);delete A.navigationId,delete A.\u0275routerPageId,0!==Object.keys(A).length&&(l.state=A)}const b=this.parseUrl(t.url);this.scheduleNavigation(b,r,p,l)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Th(t),this.config=t.map(Tu),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:a,queryParams:l,fragment:p,queryParamsHandling:b,preserveFragment:A}=r,L=a||this.routerState.root,z=A?this.currentUrlTree.fragment:p;let K=null;switch(b){case"merge":K=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":K=this.currentUrlTree.queryParams;break;default:K=l||null}return null!==K&&(K=this.removeEmptyProps(K)),function cv(n,e,t,r,a){if(0===t.length)return Ih(e.root,e.root,e.root,r,a);const l=function $b(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new lv(!0,0,n);let e=0,t=!1;const r=n.reduce((a,l,p)=>{if("object"==typeof l&&null!=l){if(l.outlets){const b={};return Tr(l.outlets,(A,L)=>{b[L]="string"==typeof A?A.split("/"):A}),[...a,{outlets:b}]}if(l.segmentPath)return[...a,l.segmentPath]}return"string"!=typeof l?[...a,l]:0===p?(l.split("/").forEach((b,A)=>{0==A&&"."===b||(0==A&&""===b?t=!0:".."===b?e++:""!=b&&a.push(b))}),a):[...a,l]},[]);return new lv(t,e,r)}(t);if(l.toRoot())return Ih(e.root,e.root,new $e([],{}),r,a);const p=function Hb(n,e,t){if(n.isAbsolute)return new vp(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new vp(l,l===e.root,0)}const r=Qo(n.commands[0])?0:1;return function pm(n,e,t){let r=n,a=e,l=t;for(;l>a;){if(l-=a,r=r.parent,!r)throw new Error("Invalid number of '../'");a=r.segments.length}return new vp(r,!1,a-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,e,n),b=p.processChildren?_p(p.segmentGroup,p.index,l.commands):dv(p.segmentGroup,p.index,l.commands);return Ih(e.root,p.segmentGroup,b,r,a)}(L,this.currentUrlTree,t,K,null!=z?z:null)}navigateByUrl(t,r={skipLocationChange:!1}){const a=Ch(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Im(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(a){r=this.malformedUriErrorHandler(a,this.urlSerializer,t)}return r}isActive(t,r){let a;if(a=!0===r?Object.assign({},Mp):!1===r?Object.assign({},Em):r,Ch(t))return Yc(this.currentUrlTree,t,a);const l=this.parseUrl(t);return Yc(this.currentUrlTree,l,a)}removeEmptyProps(t){return Object.keys(t).reduce((r,a)=>{const l=t[a];return null!=l&&(r[a]=l),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Va(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,a,l,p){var b,A;if(this.disposed)return Promise.resolve(!1);let L,z,K;p?(L=p.resolve,z=p.reject,K=p.promise):K=new Promise((Te,dt)=>{L=Te,z=dt});const ae=++this.navigationId;let ie;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),ie=a&&a.\u0275routerPageId?a.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(b=this.browserPageId)&&void 0!==b?b:0:(null!==(A=this.browserPageId)&&void 0!==A?A:0)+1):ie=0,this.setTransition({id:ae,targetPageId:ie,source:r,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:L,reject:z,promise:K,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),K.catch(Te=>Promise.reject(Te))}setBrowserUrl(t,r){const a=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(a)||r.extras.replaceUrl?this.location.replaceState(a,"",l):this.location.go(a,"",l)}restoreHistory(t,r=!1){var a,l;if("computed"===this.canceledNavigationResolution){const p=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===p?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===p&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(p)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const a=new xl(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){D.$Z()},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();function Cm(n){return"imperative"!==n}class Iv{}class Cv{preload(e,t){return an(null)}}let qb=(()=>{class n{constructor(t,r,a,l){this.router=t,this.injector=a,this.preloadingStrategy=l,this.loader=new Po(a,r,A=>t.triggerEvent(new Ui(A)),A=>t.triggerEvent(new nc(A)))}setUpPreloading(){this.subscription=this.router.events.pipe(ci(t=>t instanceof Va),Si(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(D.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const a=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const p=l._loadedConfig;a.push(this.processRoutes(p.module,p.routes))}else l.loadChildren&&!l.canLoad?a.push(this.preloadConfig(t,l)):l.children&&a.push(this.processRoutes(t,l.children));return(0,Or.D)(a).pipe((0,ec.J)(),(0,En.U)(l=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?an(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Qr.z)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Ws),D.LFG(D.Sil),D.LFG(D.zs3),D.LFG(Iv))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})(),E0=(()=>{class n{constructor(t,r,a={}){this.router=t,this.viewportScroller=r,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof op?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Va&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Iu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Iu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){D.$Z()},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();const kh=new D.OlP("ROUTER_CONFIGURATION"),Nh=new D.OlP("ROUTER_FORROOT_GUARD"),Dm=[We,{provide:hn,useClass:Fr},{provide:Ws,useFactory:function Kb(n,e,t,r,a,l,p={},b,A){const L=new Ws(null,n,e,t,r,a,cp(l));return b&&(L.urlHandlingStrategy=b),A&&(L.routeReuseStrategy=A),function Dv(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(p,L),p.enableTracing&&L.events.subscribe(z=>{var K,ae;null===(K=console.group)||void 0===K||K.call(console,`Router Event: ${z.constructor.name}`),console.log(z.toString()),console.log(z),null===(ae=console.groupEnd)||void 0===ae||ae.call(console)}),L},deps:[hn,Pl,We,D.zs3,D.Sil,ei,kh,[class Mh{},new D.FiY],[class zt{},new D.FiY]]},Pl,{provide:bh,useFactory:function Zb(n){return n.routerState.root},deps:[Ws]},qb,Cv,class Gb{preload(e,t){return t().pipe(Ss(()=>an(null)))}},{provide:kh,useValue:{enableTracing:!1}}];function Tv(){return new D.PXZ("Router",Ws)}let I0=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Dm,C0(t),{provide:Nh,useFactory:Wb,deps:[[Ws,new D.FiY,new D.tp0]]},{provide:kh,useValue:r||{}},{provide:ge,useFactory:Q1,deps:[Oe,[new D.tBr(lt),new D.FiY],kh]},{provide:E0,useFactory:Ks,deps:[Ws,Ts,kh]},{provide:Iv,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Cv},{provide:D.PXZ,multi:!0,useFactory:Tv},[Rp,{provide:D.ip1,multi:!0,useFactory:Sv,deps:[Rp]},{provide:Av,useFactory:Yb,deps:[Rp]},{provide:D.tb,multi:!0,useExisting:Av}]]}}static forChild(t){return{ngModule:n,providers:[C0(t)]}}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Nh,8),D.LFG(Ws,8))},n.\u0275mod=D.oAB({type:n}),n.\u0275inj=D.cJS({}),n})();function Ks(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new E0(n,e,t)}function Q1(n,e,t={}){return t.useHash?new qe(n,e):new bt(n,e)}function Wb(n){return"guarded"}function C0(n){return[{provide:D.deG,multi:!0,useValue:n},{provide:ei,multi:!0,useValue:n}]}let Rp=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Gs.x}appInitializer(){return this.injector.get(oe,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const a=new Promise(b=>r=b),l=this.injector.get(Ws),p=this.injector.get(kh);return"disabled"===p.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===p.initialNavigation||"enabledBlocking"===p.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?an(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),a})}bootstrapListener(t){const r=this.injector.get(kh),a=this.injector.get(qb),l=this.injector.get(E0),p=this.injector.get(Ws),b=this.injector.get(D.z2F);t===b.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&p.initialNavigation(),a.setUpPreloading(),l.init(),p.resetRootComponentType(b.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(D.zs3))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();function Sv(n){return n.appInitializer.bind(n)}function Yb(n){return n.bootstrapListener.bind(n)}const Av=new D.OlP("Router Initializer"),Sm=[];let X1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=D.oAB({type:n}),n.\u0275inj=D.cJS({imports:[[I0.forRoot(Sm)],I0]}),n})();class kp{constructor(e){this.topo=e}}class Np{constructor(e,t){this.nodes=e,this.links=t}}var Am=M(5867),rt=M(5861),Su=M(9681),Nn=M(2090),Pp=M(4859);const T0="firebasestorage.googleapis.com",Op="storageBucket";class wi extends Nn.ZR{constructor(e,t){super(xm(e),`Firebase Storage: ${t} (${xm(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wi.prototype)}_codeEquals(e){return xm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function xm(n){return"storage/"+n}function Lp(){return new wi("unknown","An unknown error occurred, please check the error payload for server response.")}function fo(n){return new wi("invalid-argument",n)}function qr(){return new wi("app-deleted","The Firebase app was deleted.")}function Hn(n,e){return new wi("invalid-format","String does not match format '"+n+"': "+e)}function xu(n){throw new wi("internal-error","Internal error: "+n)}class _r{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=_r.makeFromUrl(e,t)}catch(a){return new _r(e,"")}if(""===r.path)return r;throw function bn(n){return new wi("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const a="([A-Za-z0-9.\\-_]+)",b=new RegExp("^gs://"+a+"(/(.*))?$","i");function L($t){$t.path_=decodeURIComponent($t.path)}const K=t.replace(/[.]/g,"\\."),Zt=[{regex:b,indices:{bucket:1,path:3},postModify:function l($t){"/"===$t.path.charAt($t.path.length-1)&&($t.path_=$t.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${K}/v[A-Za-z0-9_]+/b/${a}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:L},{regex:new RegExp(`^https?://${t===T0?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${a}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:L}];for(let $t=0;$t<Zt.length;$t++){const ln=Zt[$t],gn=ln.regex.exec(e);if(gn){let Wi=gn[ln.indices.path];Wi||(Wi=""),r=new _r(gn[ln.indices.bucket],Wi),ln.postModify(r);break}}if(null==r)throw function Pn(n){return new wi("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class dn{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function il(n){return"string"==typeof n||n instanceof String}function xi(n){return Jd()&&n instanceof Blob}function Jd(){return"undefined"!=typeof Blob}function k0(n,e,t,r){if(r<e)throw fo(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw fo(`Invalid value for '${n}'. Expected ${t} or less.`)}function $i(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function N0(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var wr=(()=>{return(n=wr||(wr={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",wr;var n})();class Mv{constructor(e,t,r,a,l,p,b,A,L,z,K){this.url_=e,this.method_=t,this.headers_=r,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=p,this.callback_=b,this.errorCallback_=A,this.timeout_=L,this.progressCallback_=z,this.connectionFactory_=K,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ae,ie)=>{this.resolve_=ae,this.reject_=ie,this.start_()})}start_(){const t=(r,a)=>{const l=this.resolve_,p=this.reject_,b=a.connection;if(a.wasSuccessCode)try{const A=this.callback_(b,b.getResponse());!function R0(n){return void 0!==n}(A)?l():l(A)}catch(A){p(A)}else if(null!==b){const A=Lp();A.serverResponse=b.getErrorText(),p(this.errorCallback_?this.errorCallback_(b,A):A)}else p(a.canceled?this.appDelete_?qr():function Mm(){return new wi("canceled","User canceled the upload/download.")}():function xv(){return new wi("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new Up(!1,null,!0)):this.backoffId_=function x0(n,e,t){let r=1,a=null,l=null,p=!1,b=0;function A(){return 2===b}let L=!1;function z(...yt){L||(L=!0,e.apply(null,yt))}function K(yt){a=setTimeout(()=>{a=null,n(ie,A())},yt)}function ae(){l&&clearTimeout(l)}function ie(yt,...Qt){if(L)return void ae();if(yt)return ae(),void z.call(null,yt,...Qt);if(A()||p)return ae(),void z.call(null,yt,...Qt);let Zt;r<64&&(r*=2),1===b?(b=2,Zt=0):Zt=1e3*(r+Math.random()),K(Zt)}let Te=!1;function dt(yt){Te||(Te=!0,ae(),!L&&(null!==a?(yt||(b=2),clearTimeout(a),K(0)):yt||(b=1)))}return K(0),l=setTimeout(()=>{p=!0,dt(!0)},t),dt}((r,a)=>{if(a)return void r(!1,new Up(!1,null,!0));const l=this.connectionFactory_();this.pendingConnection_=l;const p=b=>{null!==this.progressCallback_&&this.progressCallback_(b.loaded,b.lengthComputable?b.total:-1)};null!==this.progressCallback_&&l.addUploadProgressListener(p),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&l.removeUploadProgressListener(p),this.pendingConnection_=null;const b=l.getErrorCode()===wr.NO_ERROR,A=l.getStatus();if(!b||this.isRetryStatusCode_(A)){const z=l.getErrorCode()===wr.ABORT;return void r(!1,new Up(!1,null,z))}const L=-1!==this.successCodes_.indexOf(A);r(!0,new Up(L,l))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function M0(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,a=-1!==[408,429].indexOf(e),l=-1!==this.additionalRetryCodes_.indexOf(e);return t||a||l}}class Up{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function kv(...n){const e=function Rv(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Jd())return new Blob(n);throw new wi("unsupported-environment","This browser doesn't seem to support creating Blobs")}class Nv{constructor(e,t){this.data=e,this.contentType=t||null}}function sl(n,e){switch(n){case"raw":return new Nv(rI(e));case"base64":case"base64url":return new Nv(iI(n,e));case"data_url":return new Nv(function gC(n){const e=new rE(n);return e.base64?iI("base64",e.rest):function pC(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Hn("data_url","Malformed data URL.")}return rI(e)}(e.rest)}(e),function cc(n){return new rE(n).contentType}(e))}throw Lp()}function rI(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function iI(n,e){switch(n){case"base64":{const a=-1!==e.indexOf("-"),l=-1!==e.indexOf("_");if(a||l)throw Hn(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case"base64url":{const a=-1!==e.indexOf("+"),l=-1!==e.indexOf("/");if(a||l)throw Hn(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function nE(n){return atob(n)}(e)}catch(a){throw Hn(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}class rE{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Hn("data_url","Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Ul(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ku{constructor(e,t){let r=0,a="";xi(e)?(this.data_=e,r=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(xi(this.data_)){const a=function nI(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===a?null:new ku(a)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ku(r,!0)}}static getBlob(...e){if(Jd()){const t=e.map(r=>r instanceof ku?r.data_:r);return new ku(kv.apply(null,t))}{const t=e.map(p=>il(p)?sl("raw",p).data:p.data_);let r=0;t.forEach(p=>{r+=p.byteLength});const a=new Uint8Array(r);let l=0;return t.forEach(p=>{for(let b=0;b<p.length;b++)a[l++]=p[b]}),new ku(a,!0)}}uploadData(){return this.data_}}function Bl(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function en(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function ef(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Mi(n,e){return e}class ur{constructor(e,t,r,a){this.server=e,this.local=t||e,this.writable=!!r,this.xform=a||Mi}}let ti=null;function Ya(){if(ti)return ti;const n=[];n.push(new ur("bucket")),n.push(new ur("generation")),n.push(new ur("metageneration")),n.push(new ur("name","fullPath",!0));const t=new ur("name");t.xform=function e(l,p){return function Nu(n){return!il(n)||n.length<2?n:ef(n)}(p)},n.push(t);const a=new ur("size");return a.xform=function r(l,p){return void 0!==p?Number(p):p},n.push(a),n.push(new ur("timeCreated")),n.push(new ur("updated")),n.push(new ur("md5Hash",null,!0)),n.push(new ur("cacheControl",null,!0)),n.push(new ur("contentDisposition",null,!0)),n.push(new ur("contentEncoding",null,!0)),n.push(new ur("contentLanguage",null,!0)),n.push(new ur("contentType",null,!0)),n.push(new ur("metadata","customMetadata",!0)),ti=n,ti}function tf(n,e,t){const r=Bl(e);return null===r?null:function O0(n,e,t){const r={type:"file"},a=t.length;for(let l=0;l<a;l++){const p=t[l];r[p.local]=p.xform(r,e[p.server])}return function iE(n,e){Object.defineProperty(n,"ref",{get:function t(){const l=new _r(n.bucket,n.fullPath);return e._makeStorageReference(l)}})}(r,n),r}(n,r,t)}class Oo{constructor(e,t,r,a){this.url=e,this.method=t,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function lc(n){if(!n)throw Lp()}function os(n){return function e(t,r){let a;return a=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function S0(){return new wi("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function tE(){return new wi("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function eE(n){return new wi("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Ph(n){return new wi("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,a.serverResponse=r.serverResponse,a}}function Fm(n,e,t,r,a){const l=e.bucketOnlyServerUrl(),p={"X-Goog-Upload-Protocol":"multipart"},A=function b(){let Zt="";for(let $t=0;$t<2;$t++)Zt+=Math.random().toString().slice(2);return Zt}();p["Content-Type"]="multipart/related; boundary="+A;const L=function Hp(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Pv(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}(e,r,a),z=function Ea(n,e){const t={},r=e.length;for(let a=0;a<r;a++){const l=e[a];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}(L,t),ie=ku.getBlob("--"+A+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+z+"\r\n--"+A+"\r\nContent-Type: "+L.contentType+"\r\n\r\n",r,"\r\n--"+A+"--");if(null===ie)throw function er(){return new wi("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}();const Te={name:L.fullPath},dt=$i(l,n.host,n._protocol),Qt=n.maxUploadRetryTime,At=new Oo(dt,"POST",function Vp(n,e){return function t(r,a){const l=tf(n,a,e);return lc(null!==l),l}}(n,t),Qt);return At.urlParams=Te,At.headers=p,At.body=ie.uploadData(),At.errorHandler=os(e),At}class aI extends class aE{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=wr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=wr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,a){if(this.sent_)throw xu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==a)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xu("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw xu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ou(){return new aI}class Lh{constructor(e,t){this._service=e,this._location=t instanceof _r?t:_r.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Lh(e,t)}get root(){const e=new _r(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ef(this._location.path)}get storage(){return this._service}get parent(){const e=function km(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new _r(this._location.bucket,e);return new Lh(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function In(n){return new wi("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function dE(n){n._throwIfRoot("getDownloadURL");const e=function F0(n,e,t){const a=$i(e.fullServerUrl(),n.host,n._protocol),p=n.maxOperationRetryTime,b=new Oo(a,"GET",function L0(n,e){return function t(r,a){const l=tf(n,a,e);return lc(null!==l),function Pm(n,e,t,r){const a=Bl(e);if(null===a||!il(a.downloadTokens))return null;const l=a.downloadTokens;if(0===l.length)return null;const p=encodeURIComponent;return l.split(",").map(L=>{const K=n.fullPath;return $i("/b/"+p(n.bucket)+"/o/"+p(K),t,r)+N0({alt:"media",token:L})})[0]}(l,a,n.host,n._protocol)}}(n,t),p);return b.errorHandler=function jp(n){const e=os(n);return function t(r,a){let l=e(r,a);return 404===r.getStatus()&&(l=function Jb(n){return new wi("object-not-found","Object '"+n+"' does not exist.")}(n.path)),l.serverResponse=a.serverResponse,l}}(e),b}(n.storage,n._location,Ya());return n.storage.makeRequestWithTokens(e,Ou).then(t=>{if(null===t)throw function ba(){return new wi("no-download-url","The given file does not have any download URLs.")}();return t})}function Um(n,e){if(n instanceof gE){const t=n;if(null==t._bucket)throw function A0(){return new wi("no-default-bucket","No default bucket found. Did you set the '"+Op+"' property when initializing the app?")}();const r=new Lh(t,t._bucket);return null!=e?Um(r,e):r}return void 0!==e?function Fh(n,e){const t=function Nm(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new _r(n._location.bucket,t);return new Lh(n.storage,r)}(n,e):n}function Kp(n,e){const t=null==e?void 0:e[Op];return null==t?null:_r.makeFromBucketSpec(t,n)}class gE{constructor(e,t,r,a,l){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=a,this._firebaseVersion=l,this._bucket=null,this._host=T0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=a?_r.makeFromBucketSpec(a,this._host):Kp(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?_r.makeFromBucketSpec(this._url,e):Kp(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){k0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){k0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,rt.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,rt.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Lh(this,e)}_makeRequest(e,t,r,a){if(this._deleted)return new dn(qr());{const l=function Rm(n,e,t,r,a,l){const p=N0(n.urlParams),b=n.url+p,A=Object.assign({},n.headers);return function tI(n,e){e&&(n["X-Firebase-GMPID"]=e)}(A,e),function eI(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(A,t),function P0(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(A,l),function Mu(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(A,r),new Mv(b,n.method,A,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a)}(e,this._appId,r,a,t,this._firebaseVersion);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,rt.Z)(function*(){const[a,l]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,a,l).getPromise()})()}}const Zp="@firebase/storage",Fv="storage";function Bm(n,e,t,r){return function lE(n,e,t="raw",r){n._throwIfRoot("uploadString");const a=sl(t,e),l=Object.assign({},r);return null==l.contentType&&null!=a.contentType&&(l.contentType=a.contentType),function qp(n,e,t){n._throwIfRoot("uploadBytes");const r=Fm(n.storage,n._location,Ya(),new ku(e,!0),t);return n.storage.makeRequestWithTokens(r,Ou).then(a=>({metadata:a,ref:n}))}(n,a.data,l)}(n=(0,Nn.m9)(n),e,t,r)}function q0(n){return dE(n=(0,Nn.m9)(n))}function Vm(n,e){return function sf(n,e){if(e&&function Wp(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof gE)return function fE(n,e){return new Lh(n,e)}(n,e);throw fo("To use ref(service, url), the first argument must be a Storage instance.")}return Um(n,e)}(n=(0,Nn.m9)(n),e)}function Qp(n=(0,Su.getApp)(),e){return n=(0,Nn.m9)(n),(0,Su._getProvider)(n,Fv).getImmediate({identifier:e})}function Z0(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new gE(t,r,a,e,Su.SDK_VERSION)}!function Y0(){(0,Su._registerComponent)(new Pp.wA(Fv,Z0,"PUBLIC").setMultipleInstances(!0)),(0,Su.registerVersion)(Zp,"0.9.8",""),(0,Su.registerVersion)(Zp,"0.9.8","esm2017")}();class Q0{}class X0{}class dc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const a=t.slice(0,r),l=a.toLowerCase(),p=t.slice(r+1).trim();this.maybeSetNormalizedName(a,l),this.headers.has(l)?this.headers.get(l).push(p):this.headers.set(l,[p])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const a=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(a,r),this.maybeSetNormalizedName(t,a))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof dc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new dc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof dc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const a=("a"===e.op?this.headers.get(t):void 0)||[];a.push(...r),this.headers.set(t,a);break;case"d":const l=e.value;if(l){let p=this.headers.get(t);if(!p)return;p=p.filter(b=>-1===l.indexOf(b)),0===p.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,p)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class yE{encodeKey(e){return ew(e)}encodeValue(e){return ew(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const J0=/%(\d[a-f0-9])/gi,Xp={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function ew(n){return encodeURIComponent(n).replace(J0,(e,t)=>{var r;return null!==(r=Xp[t])&&void 0!==r?r:e})}function Bh(n){return`${n}`}class ol{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new yE,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function vE(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(a=>{const l=a.indexOf("="),[p,b]=-1==l?[e.decodeKey(a),""]:[e.decodeKey(a.slice(0,l)),e.decodeValue(a.slice(l+1))],A=t.get(p)||[];A.push(b),t.set(p,A)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const a=e[r];Array.isArray(a)?a.forEach(l=>{t.push({param:r,value:l,op:"a"})}):t.push({param:r,value:a,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ol({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Bh(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const a=r.indexOf(Bh(e.value));-1!==a&&r.splice(a,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class _E{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Bv(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Vv(n){return"undefined"!=typeof Blob&&n instanceof Blob}function xs(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Jp{constructor(e,t,r,a){let l;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function wE(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||a?(this.body=void 0!==r?r:null,l=a):l=r,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new dc),this.context||(this.context=new _E),this.params){const p=this.params.toString();if(0===p.length)this.urlWithParams=t;else{const b=t.indexOf("?");this.urlWithParams=t+(-1===b?"?":b<t.length-1?"&":"")+p}}else this.params=new ol,this.urlWithParams=t}serializeBody(){return null===this.body?null:Bv(this.body)||Vv(this.body)||xs(this.body)||function tw(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ol?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||xs(this.body)?null:Vv(this.body)?this.body.type||null:Bv(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ol?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,a=e.url||this.url,l=e.responseType||this.responseType,p=void 0!==e.body?e.body:this.body,b=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,A=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let L=e.headers||this.headers,z=e.params||this.params;const K=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(L=Object.keys(e.setHeaders).reduce((ae,ie)=>ae.set(ie,e.setHeaders[ie]),L)),e.setParams&&(z=Object.keys(e.setParams).reduce((ae,ie)=>ae.set(ie,e.setParams[ie]),z)),new Jp(r,a,p,{params:z,headers:L,context:K,reportProgress:A,responseType:l,withCredentials:b})}}var Ri=(()=>((Ri=Ri||{})[Ri.Sent=0]="Sent",Ri[Ri.UploadProgress=1]="UploadProgress",Ri[Ri.ResponseHeader=2]="ResponseHeader",Ri[Ri.DownloadProgress=3]="DownloadProgress",Ri[Ri.Response=4]="Response",Ri[Ri.User=5]="User",Ri))();class jv{constructor(e,t=200,r="OK"){this.headers=e.headers||new dc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class jl extends jv{constructor(e={}){super(e),this.type=Ri.ResponseHeader}clone(e={}){return new jl({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class af extends jv{constructor(e={}){super(e),this.type=Ri.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new af({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class eg extends jv{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function tg(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Hm=(()=>{class n{constructor(t){this.handler=t}request(t,r,a={}){let l;if(t instanceof Jp)l=t;else{let A,L;A=a.headers instanceof dc?a.headers:new dc(a.headers),a.params&&(L=a.params instanceof ol?a.params:new ol({fromObject:a.params})),l=new Jp(t,r,void 0!==a.body?a.body:null,{headers:A,context:a.context,params:L,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials})}const p=an(l).pipe(Si(A=>this.handler.handle(A)));if(t instanceof Jp||"events"===a.observe)return p;const b=p.pipe(ci(A=>A instanceof af));switch(a.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return b.pipe((0,En.U)(A=>{if(null!==A.body&&!(A.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return A.body}));case"blob":return b.pipe((0,En.U)(A=>{if(null!==A.body&&!(A.body instanceof Blob))throw new Error("Response is not a Blob.");return A.body}));case"text":return b.pipe((0,En.U)(A=>{if(null!==A.body&&"string"!=typeof A.body)throw new Error("Response is not a string.");return A.body}));default:return b.pipe((0,En.U)(A=>A.body))}case"response":return b;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ol).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,a={}){return this.request("PATCH",t,tg(a,r))}post(t,r,a={}){return this.request("POST",t,tg(a,r))}put(t,r,a={}){return this.request("PUT",t,tg(a,r))}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Q0))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();class nw{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const rw=new D.OlP("HTTP_INTERCEPTORS");let $v=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();const pI=/^\)\]\}',?\n/;let al=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Hr.y(r=>{const a=this.xhrFactory.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((ie,Te)=>a.setRequestHeader(ie,Te.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const ie=t.detectContentTypeHeader();null!==ie&&a.setRequestHeader("Content-Type",ie)}if(t.responseType){const ie=t.responseType.toLowerCase();a.responseType="json"!==ie?ie:"text"}const l=t.serializeBody();let p=null;const b=()=>{if(null!==p)return p;const ie=a.statusText||"OK",Te=new dc(a.getAllResponseHeaders()),dt=function as(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(a)||t.url;return p=new jl({headers:Te,status:a.status,statusText:ie,url:dt}),p},A=()=>{let{headers:ie,status:Te,statusText:dt,url:yt}=b(),Qt=null;204!==Te&&(Qt=void 0===a.response?a.responseText:a.response),0===Te&&(Te=Qt?200:0);let At=Te>=200&&Te<300;if("json"===t.responseType&&"string"==typeof Qt){const Zt=Qt;Qt=Qt.replace(pI,"");try{Qt=""!==Qt?JSON.parse(Qt):null}catch($t){Qt=Zt,At&&(At=!1,Qt={error:$t,text:Qt})}}At?(r.next(new af({body:Qt,headers:ie,status:Te,statusText:dt,url:yt||void 0})),r.complete()):r.error(new eg({error:Qt,headers:ie,status:Te,statusText:dt,url:yt||void 0}))},L=ie=>{const{url:Te}=b(),dt=new eg({error:ie,status:a.status||0,statusText:a.statusText||"Unknown Error",url:Te||void 0});r.error(dt)};let z=!1;const K=ie=>{z||(r.next(b()),z=!0);let Te={type:Ri.DownloadProgress,loaded:ie.loaded};ie.lengthComputable&&(Te.total=ie.total),"text"===t.responseType&&!!a.responseText&&(Te.partialText=a.responseText),r.next(Te)},ae=ie=>{let Te={type:Ri.UploadProgress,loaded:ie.loaded};ie.lengthComputable&&(Te.total=ie.total),r.next(Te)};return a.addEventListener("load",A),a.addEventListener("error",L),a.addEventListener("timeout",L),a.addEventListener("abort",L),t.reportProgress&&(a.addEventListener("progress",K),null!==l&&a.upload&&a.upload.addEventListener("progress",ae)),a.send(l),r.next({type:Ri.Sent}),()=>{a.removeEventListener("error",L),a.removeEventListener("abort",L),a.removeEventListener("load",A),a.removeEventListener("timeout",L),t.reportProgress&&(a.removeEventListener("progress",K),null!==l&&a.upload&&a.upload.removeEventListener("progress",ae)),a.readyState!==a.DONE&&a.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Jn))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();const Xa=new D.OlP("XSRF_COOKIE_NAME"),ul=new D.OlP("XSRF_HEADER_NAME");class qv{}let CE=(()=>{class n{constructor(t,r,a){this.doc=t,this.platform=r,this.cookieName=a,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Dt(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Be),D.LFG(D.Lbi),D.LFG(Xa))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})(),sw=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const a=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||a.startsWith("http://")||a.startsWith("https://"))return r.handle(t);const l=this.tokenService.getToken();return null!==l&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,l)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(qv),D.LFG(ul))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})(),gI=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(rw,[]);this.chain=r.reduceRight((a,l)=>new nw(a,l),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(X0),D.LFG(D.zs3))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})(),vI=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:sw,useClass:$v}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Xa,useValue:t.cookieName}:[],t.headerName?{provide:ul,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=D.oAB({type:n}),n.\u0275inj=D.cJS({providers:[sw,{provide:rw,useExisting:sw,multi:!0},{provide:qv,useClass:CE},{provide:Xa,useValue:"XSRF-TOKEN"},{provide:ul,useValue:"X-XSRF-TOKEN"}]}),n})(),Gm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=D.oAB({type:n}),n.\u0275inj=D.cJS({providers:[Hm,{provide:Q0,useClass:gI},al,{provide:X0,useExisting:al}],imports:[[vI.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const ow=["topo_container"];var Dr=M(5188),Wv=M(505);(0,Am.ZF)({apiKey:"AIzaSyCeRkrVepStRHHP-5WuMgJ80f3hIfTLn_0",authDomain:"mininet-optical-file-system.firebaseapp.com",projectId:"mininet-optical-file-system",storageBucket:"mininet-optical-file-system.appspot.com",messagingSenderId:"752741188254",appId:"1:752741188254:web:b113a9ec279d157325b18f"});let Vh=(()=>{class n{constructor(t,r){this.http=t,this.cdr=r,this.isRendered=!1,this.linksArray=[],this.nodeArray=[],this.preLinkProcess=!1,this.preNodeProcess=!1,this.nodeFileUrl="",this.linkFileUrl="",this.storageUrl="gs://mininet-optical-file-system.appspot.com",this.animated=!1,this.nodeFileString="",this.linkFileString="",this.ticks_per_render=5,this.regexExp=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/gi,this.networkData=new Np([],[]),this.firebaseGetLinkFile()}ngOnInit(){}ngAfterContentInit(){}ngAfterViewInit(){this.isRendered=!0}initialize_topo(){this.svg=Dr.select(this.svgContainerRef.nativeElement);let t=this.svg.select("g.links");t.size()||(t=this.svg.append("g").attr("class","links"));let r=this.svg.select("g.nodes");r.size()||(r=this.svg.append("g").attr("class","nodes"));let a=this.svg.select("g.desc");if(a.size()||(a=this.svg.append("g").attr("class","desc")),!this.topo){this.simulation=Dr.forceSimulation().stop();let l=Dr.forceLink().id(ie=>ie.id).distance(function(ie){return"id"in ie.source&&"id"in ie.target?120:60}),p=Dr.forceManyBody().strength(ie=>"id"in ie?-160:-200).distanceMax(300),b=Dr.forceCenter(),A=Dr.drag().on("start",ie=>{Dr.event.active||this.simulation.alphaTarget(.3).restart(),ie.fx=ie.x,ie.fy=ie.y}).on("drag",ie=>{ie.fx=Dr.event.x,ie.fy=Dr.event.y}).on("end",ie=>{this.simulation=this.topo.simulation,Dr.event.active||this.simulation.alphaTarget(0),ie.fx=null,ie.fy=null}),L=Dr.zoom().scaleExtent([.1,5]).on("zoom",()=>{t.attr("transform",Dr.event.transform),r.attr("transform",Dr.event.transform),a.attr("transform",Dr.event.transform)});this.svg.call(L);let z=Wv().attr("class","tooltip").offset([-10,0]).html(ie=>"<p><strong class='title'>Name:</strong>"+(ie=this.selData).device_name+"</p><p><strong class='title'>IP:</strong>"+ie.ip+"</p><p><strong class='title'>Pid:</strong>"+ie.pid+"</p>");this.svg.call(z);let K=Wv().attr("class","tooltip"),ae=Wv().attr("class","tooltip");this.svg.call(K),this.svg.call(ae),this.animated&&this.simulation.force("link",l).force("center",b).force("charge",p),this.topo={simulation:this.simulation,link_force:l,charge_force:p,center_force:b,drag:A,zoom:L,node_tip:z,link_source_tip:K,link_dest_tip:ae}}}load(){let t=this.topo.simulation,r=this.topo.link_force,a=this.topo.drag,l=this.topo.node_tip,p=this.topo.link_source_tip,b=this.topo.link_dest_tip,A=Dr.select(this.svgContainerRef.nativeElement);Dr.json("../../assets/data.json",L=>{let z=Dr.map((L=L.topo).nodes,At=>At.id),K=[];L.links.forEach((At,Zt)=>{let $t=At.source=z.get(At.source),ln=At.target=z.get(At.target),gn={};L.nodes.push(gn),L.links.push({source:$t,target:gn},{source:gn,target:ln}),K.push({id:At.id,source:$t,intermediate:gn,target:ln,source_port_disp:At.source_port_disp,target_port_disp:At.target_port_disp})});let ae=A.select("g.links").selectAll("g.link_container").data(K);ae.exit().remove();let ie=ae.enter().append("g").classed("link_container",!0);ie.append("path").classed("link_item",!0),ie.append("path").classed("link_selector",!0).on("mouseover",(At,Zt,$t)=>{Dr.select($t[Zt].parentNode).classed("focus",!0),A.select("g.nodes").selectAll("g.node_container").each((hx,dx,fx)=>{hx.id==At.source.id?this.src_node=Dr.select(fx[dx]).classed("focus focusing",!0):hx.id==At.target.id&&(this.dst_node=Dr.select(fx[dx]).classed("focus focusing",!0))});let ln,gn,fr=[0,0],Wi=[0,0],eT=this.src_node.datum().x-this.dst_node.datum().x,tT=this.src_node.datum().y-this.dst_node.datum().y;Math.abs(eT)>Math.abs(tT)?(eT>0?(ln="e",fr[1]=5,gn="w",Wi[1]=-5):(ln="w",fr[1]=-5,gn="e",Wi[1]=5),Math.abs(tT)>20&&(tT>0?(ln="s"+ln,fr=[-5,-5*Math.sign(fr[1])],gn="n"+gn,Wi=[5,-5*Math.sign(Wi[1])]):(ln="n"+ln,fr=[5,-5*Math.sign(fr[1])],gn="s"+gn,Wi=[-5,-5*Math.sign(Wi[1])]))):(tT>0?(ln="s",fr[0]=5,gn="n",Wi[0]=-5):(ln="n",fr[0]=-5,gn="s",Wi[0]=5),Math.abs(eT)>20&&(eT>0?(ln+="e",fr=[-5*Math.sign(fr[0]),-5],gn+="w",Wi=[-5*Math.sign(Wi[0]),5]):(ln+="w",fr=[-5*Math.sign(fr[0]),5],gn+="e",Wi=[-5*Math.sign(Wi[0]),-5]))),p.direction(ln).offset(fr).html("<strong>"+At.source_port_disp+"</strong>").show(this.src_node.node()),b.direction(gn).offset(Wi).html("<strong> "+At.target_port_disp+"</strong>").show(this.dst_node.node())}).on("mouseout",(At,Zt,$t)=>{Dr.select($t[Zt].parentNode).classed("focus",!1),A.select("g.nodes").selectAll("g.node_container").each((ln,gn,fr)=>{ln.id==At.source.id?(this.src_node=Dr.select(fr[gn]).classed("focus focusing",!1),p.hide()):ln.id==At.target.id&&(this.dst_node=Dr.select(fr[gn]).classed("focus focusing",!1),b.hide())})}),ae=ie.merge(ae);let Te=A.select("g.nodes").selectAll("g.node_container").data(L.nodes.filter(At=>"id"in At));Te.exit().remove();let dt=Te.enter().append("g").on("click",()=>{}).on("mouseover",(At,Zt,$t)=>(this.selData=At,Dr.select($t[Zt]).classed("focus",!0),l.show.apply(this,[$t[Zt]]))).on("mouseout",(At,Zt,$t)=>(Dr.select($t[Zt]).classed("focus",!1),l.hide.apply(this,$t[Zt]))).call(a);dt.append("circle").attr("r",20),dt.append("text").attr("x",0).attr("y",12).classed("ftstcall",!0).text("\ueaf2"),Te=dt.merge(Te),Te.attr("class",At=>{let Zt;return Zt=At.knmp_on&&At.ip_on&&At.snmp_on?"stat_normal":At.knmp_on&&At.ip_on&&!At.snmp_on?"stat_abnormal":!At.knmp_on||At.ip_on||At.snmp_on?At.knmp_on||At.ip_on||At.snmp_on?"stat_unknown":"stat_down":"stat_error","node_container "+Zt});let yt=A.select("g.desc").selectAll("g.desc_container").data(L.nodes.filter(At=>"id"in At));yt.exit().remove();let Qt=yt.enter().append("g").classed("desc_container",!0);Qt.append("text").attr("x",0).attr("y",35),yt=Qt.merge(yt),yt.select("text").text(At=>At.mac),t.nodes(L.nodes),r.links(L.links),t.on("tick",()=>{this.do_tick(ae,Te,yt)}),this.simulation=t,this.do_layout()})}do_layout(){let t=Dr.select(this.svgContainerRef.nativeElement),r=this.topo.center_force,a=+t.style("width").replace("px",""),l=+t.style("height").replace("px","");r.x(a/2).y(l/2),this.animated?this.do_animated_layout():this.do_static_layout()}do_static_layout(){let t=this.topo.simulation,a=this.topo.charge_force,l=this.topo.link_force;this.animated||t.force("center",this.topo.center_force).force("charge",a).force("link",l),t.alpha(1);for(let p=0,b=Math.ceil(Math.log(t.alphaMin())/Math.log(1-t.alphaDecay()));p<b;++p)t.tick();this.animated||t.force("center",null).force("charge",null).force("link",null),this.do_one_tick()}do_animated_layout(){let t=this.topo.simulation,a=this.topo.charge_force,l=this.topo.link_force;this.animated||t.force("center",this.topo.center_force).force("charge",a).force("link",l),t.alpha(1),window.requestAnimationFrame(()=>this.render(t))}do_tick(t,r,a){t.select("path.link_item").attr("d",function(l){return"M"+l.source.x+","+l.source.y+"S"+l.intermediate.x+","+l.intermediate.y+" "+l.target.x+","+l.target.y}),t.select("path.link_selector").attr("d",function(l){return"M"+l.source.x+","+l.source.y+"S"+l.intermediate.x+","+l.intermediate.y+" "+l.target.x+","+l.target.y}),r.attr("transform",function(l){return"translate("+l.x+","+l.y+")"}),a.attr("transform",function(l){return"translate("+l.x+","+l.y+")"})}do_one_tick(){let t=Dr.select(this.svgContainerRef.nativeElement),r=t.select("g.links").selectAll("g.link_container"),a=t.select("g.nodes").selectAll("g.node_container"),l=t.select("g.desc").selectAll("g.desc_container");this.do_tick(r,a,l)}render(t){for(let r=0;r<5;r++);this.do_one_tick(),t.alpha()>t.alphaMin()?window.requestAnimationFrame(this.render):this.animated||t.force("center",null).force("charge",null).force("link",null)}nodefileParse(){if(""!=this.nodeFileString){for(let t of this.nodeFileString.split(/[\r\n]+/)){let r=t.match(/\<(.*?)\>/);null!=r&&(r[1].includes("Host")?this.hostParse(r[1]):r[1].includes("ROADM")?this.roadmParse(r[1]):r[1].includes("OVSBridge")?this.ovsbridgeParse(r[1]):r[1].includes("Terminal")?this.terminalParse(r[1]):this.additionalParse(""))}this.networkData.nodes=this.nodeArray,this.preNodeProcess=!0,this.network=new kp(this.networkData),this.firebaseUploadDataFile(JSON.stringify(this.network)),this.initialize_topo(),this.load(),this.cdr.detectChanges()}else fetch(this.nodeFileUrl).then(t=>t.text()).then(t=>{for(let r of t.split(/[\r\n]+/)){let a=r.match(/\<(.*?)\>/);null!=a&&(a[1].includes("Host")?this.hostParse(a[1]):a[1].includes("ROADM")?this.roadmParse(a[1]):a[1].includes("OVSBridge")?this.ovsbridgeParse(a[1]):a[1].includes("Terminal")?this.terminalParse(a[1]):this.additionalParse(""))}this.networkData.nodes=this.nodeArray,this.preNodeProcess=!0,this.network=new kp(this.networkData),this.firebaseUploadDataFile(JSON.stringify(this.network)),this.initialize_topo(),this.load()})}hostParse(t){let r=t.split(":");if(r.length>0){let a=r[0].replace("Host","").replace(/\s/g,""),l="",p="";r[2].split(" ").forEach(b=>{this.regexExp.test(b)?l=b:b.includes("pid")&&(p=b.split("=")[1])}),this.addNode(a,l,p)}}roadmParse(t){let r=t.split(",");if(r.length>0){let a="",l="",p="";a=r[0].split(":")[0].replace("ROADM","").replace(/\s/g,""),r.forEach(b=>{this.regexExp.test(b.split("lo:")[1])?l=b.split("lo:")[1]:b.includes("pid")&&(p=b.split("=")[1])}),this.addNode(a,l,p)}}ovsbridgeParse(t){let r=t.split(",");if(r.length>0){let a="",l="",p="";a=r[0].split(":")[0].replace("OVSBridge ","").replace(/\s/g,""),r.forEach(b=>{this.regexExp.test(b.split("lo:")[1])?l=b.split("lo:")[1]:b.includes("pid")&&(p=b.split("=")[1])}),this.addNode(a,l,p)}}terminalParse(t){let r=t.split(",");if(r.length>0){let a="",l="",p="";a=r[0].split(":")[0].replace("Terminal ","").replace(/\s/g,""),r.forEach(b=>{this.regexExp.test(b.split("lo:")[1])?l=b.split("lo:")[1]:b.includes("pid")&&(p=b.split("=")[1])}),this.addNode(a,l,p)}}additionalParse(t){}addNode(t,r,a){this.nodeArray.push({id:t,device_name:t,netmask:"255.255.255.0",ip:r,pid:a})}linkfileParse(){if(""!=this.linkFileString){for(let t of this.linkFileString.split(/[\r\n]+/)){let r=t.match(/\((.*?)\)/);null!=r&&r.length>0&&t.split("<->").forEach((a,l)=>{a=a.replace(r[0],""),this.sourceName=a.split("-")[0],this.sourcePort=a.split("-")[1],0==l?(this.target=t.split("<->")[l+1].split("-")[0].replace(r[0],"").replace(/\s/g,""),this.targetPort=t.split("<->")[l+1].split("-")[1].replace(r[0],"").replace(/\s/g,"")):(this.target=t.split("<->")[l-1].split("-")[0].replace(r[0],"").replace(/\s/g,""),this.targetPort=t.split("<->")[l-1].split("-")[1].replace(r[0],"").replace(/\s/g,"")),this.addLink(this.sourceName,this.sourcePort,this.target,this.targetPort)})}this.networkData.links=this.linksArray,this.preLinkProcess=!0,this.nodefileParse()}else fetch(this.linkFileUrl).then(t=>t.text()).then(t=>{for(let r of t.split(/[\r\n]+/)){let a=r.match(/\((.*?)\)/);null!=a&&a.length>0&&r.split("<->").forEach((l,p)=>{l=l.replace(a[0],""),this.sourceName=l.split("-")[0],this.sourcePort=l.split("-")[1],0==p?(this.target=r.split("<->")[p+1].split("-")[0].replace(a[0],"").replace(/\s/g,""),this.targetPort=r.split("<->")[p+1].split("-")[1].replace(a[0],"").replace(/\s/g,"")):(this.target=r.split("<->")[p-1].split("-")[0].replace(a[0],"").replace(/\s/g,""),this.targetPort=r.split("<->")[p-1].split("-")[1].replace(a[0],"").replace(/\s/g,"")),this.addLink(this.sourceName,this.sourcePort,this.target,this.targetPort)})}this.networkData.links=this.linksArray,this.preLinkProcess=!0,this.nodefileParse()})}addLink(t,r,a,l){this.linksArray.push({source:t,target:a,target_port_disp:l,source_port_disp:r})}firebaseGetNodeFile(){q0(Vm(Qp(),this.storageUrl+"/nodes.txt")).then(r=>{console.log(r),this.nodeFileUrl=r,this.linkfileParse()}).catch(r=>{})}firebaseGetLinkFile(){q0(Vm(Qp(),this.storageUrl+"/links.txt")).then(r=>{console.log(r),this.linkFileUrl=r,this.firebaseGetNodeFile()}).catch(r=>{})}firebaseUploadDataFile(t){Bm(Vm(Qp(),this.storageUrl+"/data.json"),t).then(l=>{console.log("Parsed data uploaded to Firebase storage")})}loadNodeFile(t){const r=new FileReader;r.onload=a=>{console.log("content",a.target.result);const l=atob(a.target.result.split(",")[1]);console.log(l),this.nodeFileString=l},r.readAsDataURL(t.target.files[0])}loadLinkFile(t){const r=new FileReader;r.onload=a=>{console.log("content",a.target.result);const l=atob(a.target.result.split(",")[1]);console.log(l),this.linkFileString=l},r.readAsDataURL(t.target.files[0])}confirmLoad(){""!=this.nodeFileString&&""!=this.linkFileString?this.linkfileParse():alert("Please load node and link file")}}return n.\u0275fac=function(t){return new(t||n)(D.Y36(Hm),D.Y36(D.sBO))},n.\u0275cmp=D.Xpm({type:n,selectors:[["app-d3-vis"]],viewQuery:function(t,r){if(1&t&&D.Gf(ow,7,D.SBq),2&t){let a;D.iGM(a=D.CRH())&&(r.svgContainerRef=a.first)}},decls:18,vars:0,consts:[[1,"row"],[1,"col"],["id","preview","type","file",3,"change"],[3,"click"],[1,"topo_container"],["topo_container",""],["id","view_container","x","0","y","0",1,"topo_container"]],template:function(t,r){1&t&&(D.TgZ(0,"div",0)(1,"div",1)(2,"label"),D._uU(3,"Nodes: \xa0"),D.qZA(),D.TgZ(4,"input",2),D.NdJ("change",function(l){return r.loadNodeFile(l)}),D.qZA()(),D._UZ(5,"br"),D.TgZ(6,"div",1)(7,"label"),D._uU(8,"Links: \xa0\xa0\xa0"),D.qZA(),D.TgZ(9,"input",2),D.NdJ("change",function(l){return r.loadLinkFile(l)}),D.qZA()(),D._UZ(10,"br"),D.TgZ(11,"button",3),D.NdJ("click",function(){return r.confirmLoad()}),D._uU(12,"LOAD FILE VIEW"),D.qZA()(),D._UZ(13,"div",0)(14,"hr"),D.O4$(),D.TgZ(15,"svg",4,5),D._UZ(17,"rect",6),D.qZA())},styles:[".topo_container[_ngcontent-%COMP%]{height:2000px;width:100%;background:white}"]}),n})(),cl=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=D.Xpm({type:n,selectors:[["app-network-topology"]],decls:2,vars:0,template:function(t,r){1&t&&(D.TgZ(0,"body"),D._UZ(1,"app-d3-vis"),D.qZA())},directives:[Vh],styles:[".ftstcall[_ngcontent-%COMP%]{font-family:fontastic-all!important}.links[_ngcontent-%COMP%]   .link_container[_ngcontent-%COMP%]   .link_item[_ngcontent-%COMP%]{stroke:#999;fill:none;stroke-width:3px}.links[_ngcontent-%COMP%]   .link_container[_ngcontent-%COMP%]   .link_selector[_ngcontent-%COMP%]{stroke:#aaa06400;fill:none;stroke-width:9px}.links[_ngcontent-%COMP%]   .link_container.focus[_ngcontent-%COMP%]   .link_item[_ngcontent-%COMP%]{stroke:#000}.nodes[_ngcontent-%COMP%]{cursor:pointer}.nodes[_ngcontent-%COMP%]   .node_container[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{text-anchor:middle;font-size:25px;fill:#444}.nodes[_ngcontent-%COMP%]   .node_container[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke-width:5}.nodes[_ngcontent-%COMP%]   .node_container.stat_normal[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#1ca2db;fill:#35baf6ab}.nodes[_ngcontent-%COMP%]   .node_container.stat_abnormal[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#e5f1b6;fill:#e5f1b6ab}.nodes[_ngcontent-%COMP%]   .node_container.stat_error[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#ff4200;fill:#d6643eab}.nodes[_ngcontent-%COMP%]   .node_container.stat_down[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#adabab;fill:#c1c1c1ab}.nodes[_ngcontent-%COMP%]   .node_container.stat_unknown[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#604c45;fill:#634d45ab}.nodes[_ngcontent-%COMP%]   .node_container.focus[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#000!important}.desc[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{text-anchor:middle}.tooltip[_ngcontent-%COMP%]{line-height:1;font-weight:700;padding:12px;background:rgba(0,0,0,.8);color:#fff;border-radius:10px;z-index:100}.tooltip[_ngcontent-%COMP%]   strong.title[_ngcontent-%COMP%]{display:inline-block;width:75px}.intermediate_nodes[_ngcontent-%COMP%]{stroke:#000;stroke-width:1.5px}#sigmaContainer[_ngcontent-%COMP%]{height:600px;background:white}"]}),n})(),wI=(()=>{class n{constructor(){this.title="Mininet Optical Visualizer"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=D.Xpm({type:n,selectors:[["app-root"]],decls:12,vars:0,consts:[["role","banner",1,"toolbar"],["width","40","alt","Angular Logo","src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABamSURBVHic7Z1ZjCTJWcd/EZFZZ09P91y9M+PZYzzetXcXt816PD4x9trAg8EP4BckjOABcUgW4gUsCyEkCyFejEA88IwRyDJPCHHYgjVohYcxsgYf2DtovN7Za3bOnp7qqjwigofIrMqqriOzurqydrr+UlZERl6R8f3jiyO/+EpYa1ni4EKWnYElysWSAAccSwIccCwJcMCxJMABx5IABxxLAhxwLAlwwLEkwAHHkgAHHEsCHHCUTgAhxO8KIa4IIf5NCPF42fmZB4QQjwoh/lUI8YIQ4nOl5qXMj0FCiE8DX1ZKobUG+A6waa01pWVqnyGEEMB/VSqV94RhmCb/orX2b8rIT9ka4JfPnDnDsWPH0v2ngQ+VmJ954CngPZubm9m0Xy8pL6UTYOXQoUN4npdNO1JWZuaEFYB6vZ5NO1xOVsonAEK4bYlyUDoBlvYo5aJ0AixRLhaCAAdTCyzGS5dOgKVNYrkonQBLlIslAUrCoii+JQEOOBaAAAtSFeaOxXjvBSDAEmWidAIsSlt4UFE6ARZFFc4bi0L8BSDAEmWidAIsSk04qCidAEuUiwUhwEFUA4vxzgtCgCXKwgIQYDFqwkFF6QQ4qJ3ARXnv0gkAi1MYBxELQICl9MvEAhBgiTJROgEOrvpfjBcvnQBLlIuyCXBsSNqJuedivjg9JK20dy6NAEKIDeCpIUahHy8hO/PEs7Cr6TsphHiyjMyUqQGeHZUuhChbM+0nRhH8p+aaiwSlE+Dw4V3L4o4Az8w9N3OAEOIM8DYpJbVabfDwJ0rIUvkE2NgY2vyVUhhzwMcBjh8/hlK7iv4jQojKvDNUCgGEEOeARwA2NjaGnfKgEuBZgJMnTw071gTeP9fcUJ4G+DjA6urq4DLpFB8QQjTnm6W5ICHAyVHH5078sggwqSAqwEfmlps5QAjxFPAQwKlTI9977h3BuRMgcZHyMRhbEKTnPED4GEClUuHo0aOjznlGCLE6vyyVowFWSbyAHDp0aNx5wyaJ3sw4BbCysoIY7RFDMmcPKWUQYMjbL8a8+D5jIf2geJNPeXNg8/wFgdMap3DTradwvndqQHVMWAU6wP2BrTWwvwW8Drx2+dLFrXm9135jIQiQ54vg5vkLqzgPW2/DCTe7nQZOAv6+ZbI/Lx3gNRJCDAmvAFcvX7oYzyM/e8FCECALIQTVep3V1cNnN89f+GOc67inSeYNZvIM96AkBKxzVFGgIaoBjyXbKMSb5y9cBV4AfnDqzMNP37t7F6UWq8jn7ihSCLEG3AH45M9+kpVDq1z65n8Ta02tXqdSrY3rJPVBCoFSEt/3qPg+lYrfjfueh5QCgQRpkUIiEM4jmQCBcIIXgLVobTBWo2ODsQajDdq4LY3HcUwUa7TWSWiKEgcATykEcOPGG7R3dthp3afdamGMAXjMWvtiwVtOjbkSYPP8hZUwCH56687trzQPrdJoTp7rkVJSr1VpNGo063Ua9Tq+r/A9H89TSKWcmxkL1lXlbtztZ2q3TV3SDJ5j3WVJUdjujrtuVBkZYzHGEOuYONZdgsRxTCeICKOIWOtcTZy1lk67jV+pfMnzvK8C3wCuXL50cV8FtK8E2Dx/oQF8EPgo8JPAeUY0O1IKatUqK80GzWadZqNOvVajWq0gpUzkkQiLnrDTZLpC7qUba7DGYq3FWAvWYAxYa7BJ3BiDlE7jCCGwOM0iEKR1ey9lpLUmCmOCKCSMYoJOQBBFBFGMMRPvexu4iCPDN4CvX750MZg6M0OwLwTYPH/hJPBl4AIjOmaeUqytrXJkbZXDq6s0m3Wn+jO1dJRwtTXEscbEMbFxNU4nqlkbjY5djTTWZGr3oEYYEbf9QhdCdDelVGbzUEohpeiL54W1liiK2Gl3aHcCdtodgjB2RB2NL16+dPF3cj8kB/aLAF8Bfj6b5inF+vphjhxeZW1tlWaz0W3rUwHRV/iWONZEcUQURi6MIqIwxJgB1Y3tawa68SmEPiqeB1JKpJT4vu+aKN/D81y/RCk18XqtNUEQ0m4H7HQcMaJYZ/sYMfCuy5cufjdXhnJg5l3SzfMXPkUi/EPNBqdPbbC2dphDicBt0hh321YLWEMYhl1Bh2FIHEVOhacawGauSVVz5pc0bjNxxsRtf7odFS9QQYwxrk8Qx7Rp9x2TUuJ5PUJ4nk+1Wunzk6yUotGo02jUOUpPS7TaAa9ev4m11gP+jNHGNIUxUw2QjNW/B5z2PI8Pve8ZqtVKV+hZdRxGAUEQEgYBQRi4Wp2q/oxG6BFld1xbgbESbRXaSixJHImxEmMVBoVButBKtFDYNF0oLAqsQRIjbIy0LhTJvjBR5pjupmfP38tMplKKarVKtVKlUq1QqVSGjoJefeMWt+90558+ffnSxa9M/dAMZk2AvwB+E+DJt7+Nh99ysqtKgyAgDBOhh2HSEaNP6DfCI7R1HZ0I0liJQaK7wpRo0vTJKnVeEJgeeegnURrPEkbakHr82vB7CYHv+wkhqtTrdaQUaG144YfX0v9VeAl4x+VLF3f2mveZNQGb5y+8n8Tv/draYd5y+iTWQhSG3Lx1a3ftBrLquG1qvNh5FLvPU+ZCCISUrqcvZdIsueGcNaav7c8Li8SKCqaAQc/R9jeHksBaSxi6SsL9bVZWVjhy5AhKSU6eOMbLr10HeBj4HPD7hTI6BDPRAJvnL/jAt4CnpJR88MKP02w2sMZy89YNoijqtf1JM0DSEUsJ8cLOOe7GPftAKSVSKZSSSNkL046WSMJuPBEoaZxkP/FHn/bkjbXJ0LAnbJP2MZJjuksE0zt3MLQ2Icy4Y6PJ5JkWG63nEEz+c5SNjQ2q1SoWePHaq7R2OuC+Xzx1+dLFq3uR3aw0wO/h5uk5+8gZVlYaWAutVoso7k2HZ8siWyz34kNd4a+tr/H0O9+JxWaENURQybHBNJM5NuwaweQWOyULSPbc0nTz5QjSaW3TabWIZZP7lUc5FE6W3+3bt3nooYcQQvDQieNc/dHLWGtrwBeBT+0le3v+HLx5/sITwOcBmo0GZx972HXQtGb7/nau/tFLwRkXEYKz5966oB9Op0SimZTy8Hyf5uqa00zAduVxYtlg0gtHUcT29n0A6lWfo+tdTflzm+cv/MyesreXJiD5BPsc8BNCCN77zCZH1lexFu7cvk0n6KCNJDAegfbo6Aqh8QiMT2AqhMYnNBVi66rZxsmHePztT/TXZjOihk+pAVx7n8bNyHvuJ9r3t2lt3c2kWJQNUKaDsh1kJq5sB2U6+CLk9ENHcX+wZbny4jVip11fAH7s8qWL4fCnjceemgArq79hhf8TRtVZP3aS6+FDXH1ZcL8D94Mmgfa7wp0EpRSPnh33ca0gxun6aY/NCPXmCp3WfXS3eRRoUUOrXWsF+vDKPUNTdWh6bWrHVtm6+SOUvvc41vw28CfT5GVqDfDkh3/hXLDy1A+MrE/VjPi+T7VWdWPgapX1I+scPX58bG0eVqNNQQ3Rr1mGaIDknvuNOIqIggBjNEZnNqOxpsi/5hlUvKW9zqvv/v7X/+rbRfMxtQaIqqf/eZTwfd+nVq9Rq9Wo1WvUa3VqtZoTeCJ0KeVE1TuHyji3pwzC8308f7j9irW2jxBpXOsYHUZonbUzkWhvXVE1/4AbHhbCVBrgiY/+6ufDxuNfAGiuNHnrubd2hV2r1UbOew+tiblr63QaYOg1u+5p5q4B9gJrDHEUEochnZ0ddBwB4AWvf+HK1/600NxAYQK8/SO/tBHVz75sVN0TQvC+D7yPtfW1fBnfJwKYjDrXZISf3jPzgai3D1iTfDZOvi8Yus8jMRTp/2Tg9oXtvU/Z0HHE3TeuuyGujTVWn736j3/wUt7rCzcBxjv8JaPqHsCjjz2aW/jDYK0l1sapNmNc3GiMNhhjiY2z0jGZyRnTFarp//aTB4k1UA8y88uueMG3SUiVfKIytjfvkZAVLO5PcbNfIkGkRJsCyvNprB6mtXUXKzwldfuvgQ/nvb4wAaxQXXv9s+fO7j6OM69yVjIujGJNrDVRHBNpF9c6JtYP0l8Ep+ZmiXFJYSY5cnRnD01Pa7lOocUFu6lSXznEzvY9d54QhdZT7GkYeG+nTefO3USoPeHOuk/ltHFas5I5ewQkU7Gp5Yiz+umFbjo2Odadrk2nb0Fbk9Q+gRDW2QmmlqLCCdQKSWrnIaRIzpFOzlIgk3MRwk1Lp1PWyk1l57VvBIGQia3iBNju++HeRdvEgqk4piZAtdHg1Zs3i10kQAlXaK6yiC6jhbFYYbHa4ky3nGC7H2mMBQza4I5bC8YkgnUF0SUAdOfie4ToFZxJ2nubGJcZa3tq2KaqOz1K37HCECJDCEcK9w1DITzZjUtPIZWH8hTS88YSR6TfNySABN/Jo31/u3D2piaAzPT0lZJ4yUt6QqKSWqOkRJB82EnayNRowrXlJhGwxYi0E+fK+YGZDbYWo2OMLnaZkNKRQXlI38NTjhhKSaTnd4miEoMSNWJIOQkz+Ri0sbZOo1JJeuiGwenb3vYgtfn7C2sMcWiAiAHjoi4q9RrHHyk89O9Dqb549r2Wj1uFOPLhD4zuyYWSCDDDQk5utd+GJA8qZtIEXPuPvyS89/qIXqjtC/qjuwfydjA28vjw66FHr2NrTTw1G2JcC07RMuvDsjSQwWn64iOuGf8gJKtMMfvbh5kQIA5bxGFrFreaGQSgRA0lZmM7KK3GFu3J7TdmMBO5WCsVFxhCKIT0J7Ree9A2uecLMpeovTsVmwkBpNc/BBFCcPzYMSqV0Rk0xnDr1i2CcCo7hlyY5VS9rKzgyfXZ3XAGUNXx9gN5sC8awDlCrE44R1Gv1/eVAGV85n2zYV9GAfmnP/NB1Q1+oydMIcBvGlStN68gPZcmvcx5S/lPxML3Afym4ZFPbAOCV59vsHPDY/VswIl3Rhijufr3h7EGTn+wRX1dELQMP/rqCgB2xkR8ELEvGsDkNGnK8z1dKBB4+L4Pyp0vPajVfef8If1Q41sah6pIlb3nUgVMwr5oAGMMt+/cdUIbAWsM2/fvT7yX3hF07lqQhmjbDek6NxVbb3TQHUW6ruL+yz7QpnU988yl/CeiEAGEEOLcs5/Nde79HMLNAx0Lrj230pfWvuXx0tf6025/v8rt7/d3PA+q/IUQwuY0V3qQ/fIftGn9qZBbAyQuXocWaePEE3iqSrBzi2jn7mwH4HvAgz4KkHJo/U1MLQR5tMBM+gDRiWeQJ55hRUqkBBnsoMMtbPsuprOFCbbR4Q4mamHCHXTQQkdt9ltJvxnl7+wAPLcw1vOQnguVckYjSvXSppk9HERRAghhgv8B3hUFnT6LegvExrhOmapBvQb13n8BKDLrLEXS9oRtbNzCRDuIsIMJW5h4BxO6zUZuM3EbG3XAFp2LL4cCUqo+0zAhZRImlkGDpmNpOMESaBzisOMiVr9BgcUORQggABHee+0PRe3MZ+IQbrx0jebqKpVqFa/iIxIbOGe8NcZk1yadd78Ofh2R/GWAZHynxOrQkcAa0AaMcwolrMFa7SxubYw1GmsNodkm0iEWi7DGmYEnlkhoAzKxqbMCISRWyF4ulHLr/hOTrWrtJFWvnrELFD3TLCHckvRE2PsHi9GpXaRzimXimNbWPYKW8xVhtPlzevbPE0mQa11Apv2XgH/uY7/1XFw7/d6xvazEq1a1VqPWqFOt1fAqPp7nI5QE6fwFGQsmEd70xtFvTnSXq3fXRYDVsVsFlHpBiyLiMCIOA4zWY+dOhIk617/1tyd2rn+vA4l13QQBFyWAwrl9qz787k9+1F9/9I+st3LGylrDyvFz/xPu7zxrVSr4FZ9KtYJMHEEqz3NOH6Tq1jhEokEsfYs+ErvhXrNkyXj72wMsIOg+p/8A3We7xRnp4hIDxjhvosZ0l3jpWDsbwVgn9pC6zzvJNBA2MqLzxle3X3/hszf+919eAUL2gQASR4AKzsN2PQmrJ97zK1+TUp5cObpBY+UwJmqj49At8LAicchUwYrZ+XJO/fYNuntJ97NeQRxxpHMdm/Ea0vUXbDMLT3S6ACURSFcwvYUfNuPwKru/V0EOh0Ga0PkYEgYlBHHUIWpvo42+Gd74wa/dvvad78WdrRbOa0iHHgHMJAIU7gTSawpSQqhurVM1KmvD/hjTwcYBOriHDtqYqIMxcVJoYBDYxJuXFRU3BzwG1tp0ffybEqLrSEoj0EjhvKU6K+Aqyq+jaitIv7Hr2ruvXKGztYU1pvXGlef/L0lWOJmMHK4PwzTDwEES5O71CK+K5x3HG+Mi+NXvPo+OQ3T7xj+ZrR8+X2msbXjVlePSbxyRfnVNqNqqUJUmqtJAKM9tSbcaKa3riQmEEr1O3QxhDQKTrPFyCxCFNckihSjCRB102LEmalkdbNs4uKfjzh3UyuPWqz+NrHLyHe+bZunQKGSFXkj4MP08wNCHRO17bN+8NuUtHVKzK61tcOelb1/B+d5Pn5d97qgX7V/95/mqWj+84tWadVVpND2/2pB+rS5VpS69Sk1Ir2qtia2JQ6ujwMRRYHTUNjqMdBS2ddTuxGG7HQc7QRy0Uj+949SqHRYeefJTn/FX6k9LYWnfu52vMEYgCvvsxAsLPYtpCGB3bYmrq872HTrbd6bNSx+EW0Sw58bUxFHc3r55l+2bqU+WPIU16bljBri74n2hiUNuvljYj8NwCOtG3P3yKISieih9gMlsWre3/g7nx3YmsCa+Gdx58T9JOjJDwjSe3R9MH3Zs3HV5j417Zna/LwzvvXJpipms8eUU7Pz7wLMLk6DoMNAjGQbS+8+dSpLm4ToiHv2dxGx/QbC7ozLYfg1LZ0g4GGdC+jRqcljhTFv7raqvN/z6arOXLmxmTadNvl4kGlUko12R7huEMMKF2sTRTufW1etAhOv1B8nWSdJi9nEeIB0KZoWfbqng5ZAt24EcR4A8RBiMF00bTM8j2LxpfYIfsT8q3QzEh2kbgxOwxgk7S4Iw2c81D1C0D5BmSicZEEPSxwl/WI81z8aQOEPio9LykiKPsIsKPxsftUHXtKVLgGw4rjmK6dX4bFOQC7kIYK21yUeKbIZSAqRpqeAHCTCuCRhX2/MQgUzaXvb7XncG+0UEPyx9UPiDRMj2MVISxAPnT6z9MP0oQNMrxPShw2q+GBMWFf4oAsxS+Nl3nHZ/lgQYR4JBTZBuhTqB0zQBWXXPwH5Rwe+l9k9LgqIEKCr8NNwrCQY1QZ5mofBIYC8ESPfHCX2w05dH8MPSJhGg6H7eJmBaTVC045dXG+QhQyECFHITlxkNDBNskQ4eI+JF9vuytsf9LGbRB0jDUcIl57FJ22BT0T2W1yh02j5ACkNPMNl4XoFSMC0vAfKek6aPKqxJwh53zjhh502bRpMU6gMUdhQpejZLexXmLMK+rOVMG5cO+ckwKW0W4VRpeWs/TEEA6CMBDG9bxwlsUieuyD12ZW1E+qRjozCucPIQZZKQJ51f+B5FhA9TEqB78W4Lxrwdr2nOy9uJ2+vxSQVS5HjR+LTnFRZ8ipn9a9gQMnQPTdjPk1ZEvefJQxEUKaBJzUTRZmRs2rRCz2Lf/jt4DCFgOlWdR4h7EXRR5Cm4Iv2JicdmIfBBzPXfwyeQYtfpMzpnXtgLIXafOCfBzJUAk1CQIENvMZOM5MOeCm5eAp6EhSLAJMyAIHPDogh4Et5UBFhi9niwl4cvMRFLAhxwLAlwwLEkwAHHkgAHHEsCHHAsCXDA8f/K5sk+ywgQrQAAAABJRU5ErkJggg=="],[1,"spacer"],["aria-label","YouTube","target","_blank","rel","noopener","href","https://youtube.com","title","YouTube"],["id","youtube-logo","height","24","width","24","data-name","Logo","viewBox","0 0 24 24","fill","#fff"],["d","M0 0h24v24H0V0z","fill","none"],["d","M21.58 7.19c-.23-.86-.91-1.54-1.77-1.77C18.25 5 12 5 12 5s-6.25 0-7.81.42c-.86.23-1.54.91-1.77 1.77C2 8.75 2 12 2 12s0 3.25.42 4.81c.23.86.91 1.54 1.77 1.77C5.75 19 12 19 12 19s6.25 0 7.81-.42c.86-.23 1.54-.91 1.77-1.77C22 15.25 22 12 22 12s0-3.25-.42-4.81zM10 15V9l5.2 3-5.2 3z"],["role","main",1,"content"]],template:function(t,r){1&t&&(D.TgZ(0,"div",0),D._UZ(1,"img",1),D.TgZ(2,"span"),D._uU(3,"Mininet Optical Visualizer"),D.qZA(),D._UZ(4,"div",2),D.TgZ(5,"a",3),D.O4$(),D.TgZ(6,"svg",4),D._UZ(7,"path",5)(8,"path",6),D.qZA()()(),D.kcU(),D.TgZ(9,"div",7),D._UZ(10,"app-network-topology")(11,"router-outlet"),D.qZA())},directives:[cl,qd],styles:['[_nghost-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;font-size:14px;color:#333;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:8px 0}p[_ngcontent-%COMP%]{margin:0}.spacer[_ngcontent-%COMP%]{flex:1}.toolbar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:60px;display:flex;align-items:center;background-color:#1976d2;color:#fff;font-weight:600}.toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]{height:40px;margin:0 8px}.toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]{height:40px;margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]:hover, .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]:hover{opacity:.8}.content[_ngcontent-%COMP%]{display:flex;margin:82px auto 32px;padding:0 16px;flex-direction:column}svg.material-icons[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}.card[_ngcontent-%COMP%]   svg.material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#888}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:16px}.card[_ngcontent-%COMP%]{all:unset;border-radius:4px;border:1px solid #eee;background-color:#fafafa;height:40px;width:200px;margin:0 8px 16px;padding:16px;display:flex;flex-direction:row;justify-content:center;align-items:center;transition:all .2s ease-in-out;line-height:24px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(:last-child){margin-right:0}.card.card-small[_ngcontent-%COMP%]{height:16px;width:168px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card){cursor:pointer}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover{transform:translateY(-3px);box-shadow:0 4px 17px #00000059}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover   .material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#696767}.card.highlight-card[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff;font-weight:600;border:none;width:auto;min-width:30%;position:relative}.card.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:60px}svg#rocket[_ngcontent-%COMP%]{width:80px;position:absolute;left:-10px;top:-24px}svg#rocket-smoke[_ngcontent-%COMP%]{height:calc(100vh - 95px);position:absolute;top:10px;right:180px;z-index:-10}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:hover{color:#1976d2;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#125699}.terminal[_ngcontent-%COMP%]{position:relative;width:80%;max-width:600px;border-radius:6px;padding-top:45px;margin-top:8px;overflow:hidden;background-color:#0f0f10}.terminal[_ngcontent-%COMP%]:before{content:"\\2022\\2022\\2022";position:absolute;top:0;left:0;height:4px;background:rgb(58,58,58);color:#c2c3c4;width:100%;font-size:2rem;line-height:0;padding:14px 0;text-indent:4px}.terminal[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;color:#fff;padding:0 1rem 1rem;margin:0}.circle-link[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:40px;margin:8px;background-color:#fff;border:1px solid #eeeeee;display:flex;justify-content:center;align-items:center;cursor:pointer;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;transition:1s ease-out}.circle-link[_ngcontent-%COMP%]:hover{transform:translateY(-.25rem);box-shadow:0 3px 15px #0003}footer[_ngcontent-%COMP%]{margin-top:8px;display:flex;align-items:center;line-height:20px}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center}.github-star-badge[_ngcontent-%COMP%]{color:#24292e;display:flex;align-items:center;font-size:12px;padding:3px 10px;border:1px solid rgba(27,31,35,.2);border-radius:3px;background-image:linear-gradient(-180deg,#fafbfc,#eff3f6 90%);margin-left:4px;font-weight:600}.github-star-badge[_ngcontent-%COMP%]:hover{background-image:linear-gradient(-180deg,#f0f3f6,#e6ebf1 90%);border-color:#1b1f2359;background-position:-.5em}.github-star-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{height:16px;width:16px;margin-right:4px}svg#clouds[_ngcontent-%COMP%]{position:fixed;bottom:-160px;left:-230px;z-index:-10;width:1920px}@media screen and (max-width: 767px){.card-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.circle-link), .terminal[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%]:not(.highlight-card){height:16px;margin:8px 0}.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:72px}svg#rocket-smoke[_ngcontent-%COMP%]{right:120px;transform:rotate(-5deg)}}@media screen and (max-width: 575px){svg#rocket-smoke[_ngcontent-%COMP%]{display:none;visibility:hidden}}']}),n})();const uf_firebase={apiKey:"AIzaSyCeRkrVepStRHHP-5WuMgJ80f3hIfTLn_0",authDomain:"mininet-optical-file-system.firebaseapp.com",projectId:"mininet-optical-file-system",storageBucket:"mininet-optical-file-system.appspot.com",messagingSenderId:"752741188254",appId:"1:752741188254:web:b113a9ec279d157325b18f"};var Lu=M(2011),DE=M(4986),Ms=M(5813);function Ja(){return(0,Li.e)((n,e)=>{let t,r=!1;n.subscribe((0,ts.x)(e,a=>{const l=t;t=a,r&&e.next([l,a]),r=!0}))})}function Lo(n,e){return n===e}M(3677);var Gt,Kv=M(3942),Rs=M(1877),aw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ia={},fc=fc||{},Tn=aw||self;function Fu(){}function ll(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function pc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var $l="closure_uid_"+(1e9*Math.random()>>>0),SE=0;function AE(n,e,t){return n.call.apply(n.bind,arguments)}function xE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,r),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function ni(n,e,t){return(ni=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?AE:xE).apply(null,arguments)}function lf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function us(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,a,l){for(var p=Array(arguments.length-2),b=2;b<arguments.length;b++)p[b-2]=arguments[b];return e.prototype[a].apply(r,p)}}function Hl(){this.s=this.s,this.o=this.o}var Km={};Hl.prototype.s=!1,Hl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function ng(n){return Object.prototype.hasOwnProperty.call(n,$l)&&n[$l]||(n[$l]=++SE)}(this);delete Km[n]}},Hl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const cw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},ME=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,a="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in a&&e.call(t,a[l],l,n)};function lw(n){return Array.prototype.concat.apply([],arguments)}function jh(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function rg(n){return/^[\s\xa0]*$/.test(n)}var cs,RE=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Zs(n,e){return-1!=n.indexOf(e)}function hw(n,e){return n<e?-1:n>e?1:0}e:{var kE=Tn.navigator;if(kE){var dw=kE.userAgent;if(dw){cs=dw;break e}}cs=""}function Zm(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function fw(n){const e={};for(const t in n)e[t]=n[t];return e}var Zv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $h(n,e){let t,r;for(let a=1;a<arguments.length;a++){for(t in r=arguments[a],r)n[t]=r[t];for(let l=0;l<Zv.length;l++)t=Zv[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function pw(n){return pw[" "](n),n}pw[" "]=Fu;var ig,n,yC=Zs(cs,"Opera"),hf=Zs(cs,"Trident")||Zs(cs,"MSIE"),NE=Zs(cs,"Edge"),df=NE||hf,II=Zs(cs,"Gecko")&&!(Zs(cs.toLowerCase(),"webkit")&&!Zs(cs,"Edge"))&&!(Zs(cs,"Trident")||Zs(cs,"MSIE"))&&!Zs(cs,"Edge"),gw=Zs(cs.toLowerCase(),"webkit")&&!Zs(cs,"Edge");function ff(){var n=Tn.document;return n?n.documentMode:void 0}e:{var Yv="",Ym=(n=cs,II?/rv:([^\);]+)(\)|;)/.exec(n):NE?/Edge\/([\d\.]+)/.exec(n):hf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):gw?/WebKit\/(\S+)/.exec(n):yC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ym&&(Yv=Ym?Ym[1]:""),hf){var Qv=ff();if(null!=Qv&&Qv>parseFloat(Yv)){ig=String(Qv);break e}}ig=Yv}var Xv={};var TI=Tn.document&&hf&&(ff()||parseInt(ig,10))||void 0,DI=function(){if(!Tn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Tn.addEventListener("test",Fu,e),Tn.removeEventListener("test",Fu,e)}catch(t){}return n}();function Fo(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Qm(n,e){if(Fo.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(II){e:{try{pw(e.nodeName);var a=!0;break e}catch(l){}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:OE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Qm.Z.h.call(this)}}Fo.prototype.h=function(){this.defaultPrevented=!0},us(Qm,Fo);var OE={2:"touch",3:"pen",4:"mouse"};Qm.prototype.h=function(){Qm.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Xm="closure_listenable_"+(1e6*Math.random()|0),LE=0;function FE(n,e,t,r,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=a,this.key=++LE,this.ca=this.fa=!1}function sg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function mw(n){this.src=n,this.g={},this.h=0}function Jm(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],a=cw(r,e);(l=0<=a)&&Array.prototype.splice.call(r,a,1),l&&(sg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function yw(n,e,t,r){for(var a=0;a<n.length;++a){var l=n[a];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return a}return-1}mw.prototype.add=function(n,e,t,r,a){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var p=yw(n,e,r,a);return-1<p?(e=n[p],t||(e.fa=!1)):((e=new FE(e,this.src,l,!!r,a)).fa=t,n.push(e)),e};var UE="closure_lm_"+(1e6*Math.random()|0),pf={};function vw(n,e,t,r,a){if(r&&r.once)return e_(n,e,t,r,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)vw(n,e[l],t,r,a);return null}return t=ny(t),n&&n[Xm]?n.N(e,t,pc(r)?!!r.capture:!!r,a):_w(n,e,t,!1,r,a)}function _w(n,e,t,r,a,l){if(!e)throw Error("Invalid event type");var p=pc(a)?!!a.capture:!!a,b=Hh(n);if(b||(n[UE]=b=new mw(n)),(t=b.add(e,t,r,p,l)).proxy)return t;if(r=function ww(){var e=SI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)DI||(a=p),void 0===a&&(a=!1),n.addEventListener(e.toString(),r,a);else if(n.attachEvent)n.attachEvent(t_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function e_(n,e,t,r,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)e_(n,e[l],t,r,a);return null}return t=ny(t),n&&n[Xm]?n.O(e,t,pc(r)?!!r.capture:!!r,a):_w(n,e,t,!0,r,a)}function ey(n,e,t,r,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)ey(n,e[l],t,r,a);else r=pc(r)?!!r.capture:!!r,t=ny(t),n&&n[Xm]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=yw(l=n.g[e],t,r,a))&&(sg(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=Hh(n))&&(e=n.g[e.toString()],n=-1,e&&(n=yw(e,t,r,a)),(t=-1<n?e[n]:null)&&og(t))}function og(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Xm])Jm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(t_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Hh(e))?(Jm(t,n),0==t.h&&(t.src=null,e[UE]=null)):sg(n)}}}function t_(n){return n in pf?pf[n]:pf[n]="on"+n}function SI(n,e){if(n.ca)n=!0;else{e=new Qm(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&og(n),n=t.call(r,e)}return n}function Hh(n){return(n=n[UE])instanceof mw?n:null}var ty="__closure_events_fn_"+(1e9*Math.random()>>>0);function ny(n){return"function"==typeof n?n:(n[ty]||(n[ty]=function(e){return n.handleEvent(e)}),n[ty])}function ls(){Hl.call(this),this.i=new mw(this),this.P=this,this.I=null}function mo(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Fo(e,n);else if(e instanceof Fo)e.target=e.target||n;else{var a=e;$h(e=new Fo(r,n),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var p=e.g=t[l];a=gf(p,r,!0,e)&&a}if(a=gf(p=e.g=n,r,!0,e)&&a,a=gf(p,r,!1,e)&&a,t)for(l=0;l<t.length;l++)a=gf(p=e.g=t[l],r,!1,e)&&a}function gf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var p=e[l];if(p&&!p.ca&&p.capture==t){var b=p.listener,A=p.ia||p.src;p.fa&&Jm(n.i,p),a=!1!==b.call(A,r)&&a}}return a&&!r.defaultPrevented}us(ls,Hl),ls.prototype[Xm]=!0,ls.prototype.removeEventListener=function(n,e,t,r){ey(this,n,e,t,r)},ls.prototype.M=function(){if(ls.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)sg(t[r]);delete n.g[e],n.h--}}this.I=null},ls.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ls.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var n_=Tn.JSON.stringify;function BE(){var n=ry;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ag,r_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new VE,n=>n.reset());class VE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ew(n){Tn.setTimeout(()=>{throw n},0)}function mf(n,e){ag||function AI(){var n=Tn.Promise.resolve(void 0);ag=function(){n.then(yf)}}(),Iw||(ag(),Iw=!0),ry.add(n,e)}var Iw=!1,ry=new class bw{constructor(){this.h=this.g=null}add(e,t){const r=r_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function yf(){for(var n;n=BE();){try{n.h.call(n.g)}catch(t){Ew(t)}var e=r_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Iw=!1}function hl(n,e){ls.call(this),this.h=n||1,this.g=e||Tn,this.j=ni(this.kb,this),this.l=Date.now()}function iy(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function i_(n,e,t){if("function"==typeof n)t&&(n=ni(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ni(n.handleEvent,n)}return 2147483647<Number(e)?-1:Tn.setTimeout(n,e||0)}function s_(n){n.g=i_(()=>{n.g=null,n.i&&(n.i=!1,s_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}us(hl,ls),(Gt=hl.prototype).da=!1,Gt.S=null,Gt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),mo(this,"tick"),this.da&&(iy(this),this.start()))}},Gt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Gt.M=function(){hl.Z.M.call(this),iy(this),delete this.g};class o_ extends Hl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:s_(this)}M(){super.M(),this.g&&(Tn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vf(n){Hl.call(this),this.h=n,this.g={}}us(vf,Hl);var a_=[];function _f(n,e,t,r){Array.isArray(t)||(t&&(a_[0]=t.toString()),t=a_);for(var a=0;a<t.length;a++){var l=vw(e,t[a],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function Cw(n){Zm(n.g,function(e,t){this.g.hasOwnProperty(t)&&og(e)},n),n.g={}}function ug(){this.g=!0}function cg(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function xI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var p=1;p<a.length;p++)a[p]=""}}}return n_(t)}catch(b){return e}}(n,t)+(r?" "+r:"")})}vf.prototype.M=function(){vf.Z.M.call(this),Cw(this)},vf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ug.prototype.Aa=function(){this.g=!1},ug.prototype.info=function(){};var ri={},sy=null;function lg(){return sy=sy||new ls}function HE(n){Fo.call(this,ri.Ma,n)}function hg(n){const e=lg();mo(e,new HE(e,n))}function zE(n,e){Fo.call(this,ri.STAT_EVENT,n),this.stat=e}function ks(n){const e=lg();mo(e,new zE(e,n))}function Tw(n,e){Fo.call(this,ri.Na,n),this.size=e}function dl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Tn.setTimeout(function(){n()},e)}ri.Ma="serverreachability",us(HE,Fo),ri.STAT_EVENT="statevent",us(zE,Fo),ri.Na="timingevent",us(Tw,Fo);var wf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Dw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function oy(){}function Aw(){}oy.prototype.h=null;var Uu,u_={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function c_(){Fo.call(this,"d")}function l_(){Fo.call(this,"c")}function h_(){}function ay(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new vf(this),this.P=Bu,this.W=new hl(n=df?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new gc}function gc(){this.i=null,this.g="",this.h=!1}us(c_,Fo),us(l_,Fo),us(h_,oy),h_.prototype.g=function(){return new XMLHttpRequest},h_.prototype.i=function(){return{}},Uu=new h_;var Bu=45e3,eu={},uy={};function d_(n,e,t){n.K=1,n.v=gg(fl(e)),n.s=t,n.U=!0,GE(n,null)}function GE(n,e){n.F=Date.now(),bf(n),n.A=fl(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),p_(t.h,"t",r),n.C=0,t=n.l.H,n.h=new gc,n.g=Wl(n.l,t?e:null,!n.s),0<n.O&&(n.L=new o_(ni(n.Ia,n,n.g),n.O)),_f(n.V,n.g,"readystatechange",n.gb),e=n.H?fw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),hg(1),function vC(n,e,t,r,a,l){n.info(function(){if(n.g)if(l)for(var p="",b=l.split("&"),A=0;A<b.length;A++){var L=b[A].split("=");if(1<L.length){var z=L[0];L=L[1];var K=z.split("_");p=2<=K.length&&"type"==K[1]?p+(z+"=")+L+"&":p+(z+"=redacted&")}}else p=null;else p=l;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(n.j,n.u,n.A,n.m,n.X,n.s)}function qE(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function f_(n,e,t){let a,r=!0;for(;!n.I&&n.C<t.length;){if(a=WE(n,t),a==uy){4==e&&(n.o=4,ks(14),r=!1),cg(n.j,n.m,null,"[Incomplete Response]");break}if(a==eu){n.o=4,ks(15),cg(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}cg(n.j,n.m,a,null),Gl(n,a)}qE(n)&&a!=uy&&a!=eu&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ks(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),E_(e),e.L=!0,ks(11))):(cg(n.j,n.m,t,"[Invalid Chunked Response]"),zh(n),zl(n))}function WE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?uy:(t=Number(e.substring(t,r)),isNaN(t)?eu:(r+=1)+t>e.length?uy:(e=e.substr(r,t),n.C=r+t,e))}function bf(n){n.Y=Date.now()+n.P,dg(n,n.P)}function dg(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=dl(ni(n.eb,n),e)}function fg(n){n.B&&(Tn.clearTimeout(n.B),n.B=null)}function zl(n){0==n.l.G||n.I||Ig(n.l,n)}function zh(n){fg(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,iy(n.W),Cw(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Gl(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Kh(t.i,n)))if(t.I=n.N,!n.J&&Kh(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(L){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0])e:if(t.u)t.ta=a[1],0<t.ta-t.U&&37500>a[2]&&t.N&&0==t.A&&!t.v&&(t.v=dl(ni(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Xh(t),w_(t)}wy(t),ks(18)}if(1>=Uw(t.i)&&t.ka){try{t.ka()}catch(L){}t.ka=void 0}}else Af(t,11)}else if((n.J||t.g==n)&&Xh(t),!rg(e))for(a=t.Ca.g.parse(e),e=0;e<a.length;e++){let L=a[e];if(t.U=L[0],L=L[1],2==t.G)if("c"==L[0]){t.J=L[1],t.la=L[2];const z=L[3];null!=z&&(t.ma=z,t.h.info("VER="+t.ma));const K=L[4];null!=K&&(t.za=K,t.h.info("SVER="+t.za));const ae=L[5];null!=ae&&"number"==typeof ae&&0<ae&&(t.K=r=1.5*ae,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const ie=n.g;if(ie){const Te=ie.g?ie.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Te){var l=r.i;!l.g&&(Zs(Te,"spdy")||Zs(Te,"quic")||Zs(Te,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(my(l,l.h),l.h=null))}if(r.D){const dt=ie.g?ie.g.getResponseHeader("X-HTTP-Session-Id"):null;dt&&(r.sa=dt,ii(r.F,r.D,dt))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var p=n;if((r=t).oa=Gw(r,r.H?r.la:null,r.W),p.J){g_(r.i,p);var b=p,A=r.K;A&&b.setTimeout(A),b.B&&(fg(b),bf(b)),r.g=p}else b_(r);0<t.l.length&&ml(t)}else"stop"!=L[0]&&"close"!=L[0]||Af(t,7);else 3==t.G&&("stop"==L[0]||"close"==L[0]?"stop"==L[0]?Af(t,7):Df(t):"noop"!=L[0]&&t.j&&t.j.wa(L),t.A=0)}hg(4)}catch(L){}}function Ef(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ll(n)||"string"==typeof n)ME(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(ll(n)||"string"==typeof n){t=[];for(var r=n.length,a=0;a<r;a++)t.push(a)}else for(a in t=[],r=0,n)t[r++]=a;r=function KE(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(ll(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),a=r.length;for(var l=0;l<a;l++)e.call(void 0,r[l],t&&t[l],n)}}function pg(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof pg)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function cy(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Gh(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var a={};for(t=e=0;e<n.g.length;)Gh(a,r=n.g[e])||(n.g[t++]=r,a[r]=1),e++;n.g.length=t}}function Gh(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Gt=ay.prototype).setTimeout=function(n){this.P=n},Gt.gb=function(n){n=n.target;const e=this.L;e&&3==Ca(n)?e.l():this.Ia(n)},Gt.Ia=function(n){try{if(n==this.g)e:{const z=Ca(this.g);var e=this.g.Da();const K=this.g.ba();if(!(3>z)&&(3!=z||df||this.g&&(this.h.h||this.g.ga()||jw(this.g)))){this.I||4!=z||7==e||hg(8==e||0>=K?3:2),fg(this);var t=this.g.ba();this.N=t;t:if(qE(this)){var r=jw(this.g);n="";var a=r.length,l=4==Ca(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){zh(this),zl(this);var p="";break t}this.h.i=new Tn.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==a-1});r.splice(0,a),this.h.g+=n,this.C=0,p=this.h.g}else p=this.g.ga();if(this.i=200==t,function jE(n,e,t,r,a,l,p){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+p})}(this.j,this.u,this.A,this.m,this.X,z,t),this.i){if(this.$&&!this.J){t:{if(this.g){var b,A=this.g;if((b=A.g?A.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rg(b)){var L=b;break t}}L=null}if(!(t=L)){this.i=!1,this.o=3,ks(12),zh(this),zl(this);break e}cg(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Gl(this,t)}this.U?(f_(this,z,p),df&&this.i&&3==z&&(_f(this.V,this.W,"tick",this.fb),this.W.start())):(cg(this.j,this.m,p,null),Gl(this,p)),4==z&&zh(this),this.i&&!this.I&&(4==z?Ig(this.l,this):(this.i=!1,bf(this)))}else 400==t&&0<p.indexOf("Unknown SID")?(this.o=3,ks(12)):(this.o=0,ks(13)),zh(this),zl(this)}}}catch(z){}},Gt.fb=function(){if(this.g){var n=Ca(this.g),e=this.g.ga();this.C<e.length&&(fg(this),f_(this,n,e),this.i&&4!=n&&bf(this))}},Gt.cancel=function(){this.I=!0,zh(this)},Gt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function $E(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(hg(3),ks(17)),zh(this),this.o=2,zl(this)):dg(this,this.Y-n)},(Gt=pg.prototype).R=function(){cy(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Gt.T=function(){return cy(this),this.g.concat()},Gt.get=function(n,e){return Gh(this.h,n)?this.h[n]:e},Gt.set=function(n,e){Gh(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Gt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var a=t[r],l=this.get(a);n.call(e,l,a,this)}};var xw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function qh(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof qh){this.g=void 0!==e?e:n.g,Wh(this,n.j),this.s=n.s,hy(this,n.i),dy(this,n.m),this.l=n.l,e=n.h;var t=new py;t.i=e.i,e.g&&(t.g=new pg(e.g),t.h=e.h),Mw(this,t),this.o=n.o}else n&&(t=String(n).match(xw))?(this.g=!!e,Wh(this,t[1]||"",!0),this.s=fy(t[2]||""),hy(this,t[3]||"",!0),dy(this,t[4]),this.l=fy(t[5]||"",!0),Mw(this,t[6]||"",!0),this.o=fy(t[7]||"")):(this.g=!!e,this.h=new py(null,this.g))}function fl(n){return new qh(n)}function Wh(n,e,t){n.j=t?fy(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function hy(n,e,t){n.i=t?fy(e,!0):e}function dy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Mw(n,e,t){e instanceof py?(n.h=e,function kI(n,e){e&&!n.j&&(pl(n),n.i=null,n.g.forEach(function(t,r){var a=r.toLowerCase();r!=a&&(Ow(this,r),p_(this,a,t))},n)),n.j=e}(n.h,n.g)):(t||(e=mg(e,Pw)),n.h=new py(e,n.g))}function ii(n,e,t){n.h.set(e,t)}function gg(n){return ii(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function fy(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function mg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Rw),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Rw(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}qh.prototype.toString=function(){var n=[],e=this.j;e&&n.push(mg(e,ql,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(mg(e,ql,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(mg(t,"/"==t.charAt(0)?Nw:kw,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",mg(t,ZE)),n.join("")};var ql=/[#\/\?@]/g,kw=/[#\?:]/g,Nw=/[#\?]/g,Pw=/[#\?@]/g,ZE=/#/g;function py(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function pl(n){n.g||(n.g=new pg,n.h=0,n.i&&function ly(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),a=null;if(0<=r){var l=n[t].substring(0,r);a=n[t].substring(r+1)}else l=n[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ow(n,e){pl(n),e=yg(n,e),Gh(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Gh((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&cy(n)))}function Lw(n,e){return pl(n),e=yg(n,e),Gh(n.g.h,e)}function p_(n,e,t){Ow(n,e),0<t.length&&(n.i=null,n.g.set(yg(n,e),jh(t)),n.h+=t.length)}function yg(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Fw(n){this.l=n||gy,n=Tn.PerformanceNavigationTiming?0<(n=Tn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Tn.g&&Tn.g.Ea&&Tn.g.Ea()&&Tn.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Gt=py.prototype).add=function(n,e){pl(this),this.i=null,n=yg(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Gt.forEach=function(n,e){pl(this),this.g.forEach(function(t,r){ME(t,function(a){n.call(e,a,r,this)},this)},this)},Gt.T=function(){pl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var a=n[r],l=0;l<a.length;l++)t.push(e[r]);return t},Gt.R=function(n){pl(this);var e=[];if("string"==typeof n)Lw(this,n)&&(e=lw(e,this.g.get(yg(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=lw(e,n[t])}return e},Gt.set=function(n,e){return pl(this),this.i=null,Lw(this,n=yg(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Gt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Gt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],a=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var p=a;""!==r[l]&&(p+="="+encodeURIComponent(String(r[l]))),n.push(p)}}return this.i=n.join("&")};var gy=10;function vg(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Uw(n){return n.h?1:n.g?n.g.size:0}function Kh(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function my(n,e){n.g?n.g.add(e):n.h=e}function g_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function m_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return jh(n.i)}function y_(){}function YE(){this.g=new y_}function QE(n,e,t){const r=t||"";try{Ef(n,function(a,l){let p=a;pc(a)&&(p=n_(a)),e.push(r+l+"="+encodeURIComponent(p))})}catch(a){throw e.push(r+"type="+encodeURIComponent("_badmap")),a}}function yy(n,e,t,r,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(r)}catch(l){}}function _g(n){this.l=n.$b||null,this.j=n.ib||!1}function gl(n,e){ls.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=If,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Fw.prototype.cancel=function(){if(this.i=m_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},y_.prototype.stringify=function(n){return Tn.JSON.stringify(n,void 0)},y_.prototype.parse=function(n){return Tn.JSON.parse(n,void 0)},us(_g,oy),_g.prototype.g=function(){return new gl(this.l,this.j)},_g.prototype.i=function(n){return function(){return n}}({}),us(gl,ls);var If=0;function wg(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function v_(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Cf(n)}function Cf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Gt=gl.prototype).open=function(n,e){if(this.readyState!=If)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Cf(this)},Gt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Tn).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Gt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,v_(this)),this.readyState=If},Gt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Cf(this)),this.g&&(this.readyState=3,Cf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Tn.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wg(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Gt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?v_(this):Cf(this),3==this.readyState&&wg(this)}},Gt.Ua=function(n){this.g&&(this.response=this.responseText=n,v_(this))},Gt.Ta=function(n){this.g&&(this.response=n,v_(this))},Gt.ha=function(){this.g&&v_(this)},Gt.setRequestHeader=function(n,e){this.v.append(n,e)},Gt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Gt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(gl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Bw=Tn.JSON.parse;function hs(n){ls.call(this),this.headers=new pg,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=_n,this.K=this.L=!1}us(hs,ls);var _n="",Vw=/^https?$/i,Ns=["POST","PUT"];function vy(n){return"content-type"==n.toLowerCase()}function _y(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,tu(n),Wr(n)}function tu(n){n.D||(n.D=!0,mo(n,"complete"),mo(n,"error"))}function Vu(n){if(n.h&&void 0!==fc&&(!n.C[1]||4!=Ca(n)||2!=n.ba()))if(n.v&&4==Ca(n))i_(n.Fa,0,n);else if(mo(n,"readystatechange"),4==Ca(n)){n.h=!1;try{const b=n.ba();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===b){var a=String(n.H).match(xw)[1]||null;if(!a&&Tn.self&&Tn.self.location){var l=Tn.self.location.protocol;a=l.substr(0,l.length-1)}r=!Vw.test(a?a.toLowerCase():"")}t=r}if(t)mo(n,"complete"),mo(n,"success");else{n.m=6;try{var p=2<Ca(n)?n.g.statusText:""}catch(A){p=""}n.j=p+" ["+n.ba()+"]",tu(n)}}finally{Wr(n)}}}function Wr(n,e){if(n.g){XE(n);const t=n.g,r=n.C[0]?Fu:null;n.g=null,n.C=null,e||mo(n,"ready");try{t.onreadystatechange=r}catch(a){}}}function XE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Tn.clearTimeout(n.A),n.A=null)}function Ca(n){return n.g?n.g.readyState:0}function jw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case _n:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function __(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function $w(n){let e="";return Zm(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ii(n,e,t))}function Yh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Hw(n){this.za=0,this.l=[],this.h=new ug,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Yh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Yh("baseRetryDelayMs",5e3,n),this.$a=Yh("retryDelaySeedMs",1e4,n),this.Ya=Yh("forwardChannelMaxRetries",2,n),this.ra=Yh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Fw(n&&n.concurrentRequestLimit),this.Ca=new YE,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Df(n){if(Qh(n),3==n.G){var e=n.V++,t=fl(n.F);ii(t,"SID",n.J),ii(t,"RID",e),ii(t,"TYPE","terminate"),bg(n,t),(e=new ay(n,n.h,e,void 0)).K=2,e.v=gg(fl(t)),t=!1,Tn.navigator&&Tn.navigator.sendBeacon&&(t=Tn.navigator.sendBeacon(e.v.toString(),"")),!t&&Tn.Image&&((new Image).src=e.v,t=!0),t||(e.g=Wl(e.l,null),e.g.ea(e.v)),e.F=Date.now(),bf(e)}I_(n)}function w_(n){n.g&&(E_(n),n.g.cancel(),n.g=null)}function Qh(n){w_(n),n.u&&(Tn.clearTimeout(n.u),n.u=null),Xh(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Tn.clearTimeout(n.m),n.m=null)}function Sf(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&ml(n)}function ml(n){vg(n.i)||n.m||(n.m=!0,mf(n.Ha,n),n.C=0)}function zw(n,e){var t;t=e?e.m:n.V++;const r=fl(n.F);ii(r,"SID",n.J),ii(r,"RID",t),ii(r,"AID",n.U),bg(n,r),n.o&&n.s&&__(r,n.o,n.s),t=new ay(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Eg(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),my(n.i,t),d_(t,r,e)}function bg(n,e){n.j&&Ef({},function(t,r){ii(e,r,t)})}function Eg(n,e,t){t=Math.min(n.l.length,t);var r=n.j?ni(n.j.Oa,n.j,n):null;e:{var a=n.l;let l=-1;for(;;){const p=["count="+t];-1==l?0<t?(l=a[0].h,p.push("ofs="+l)):l=0:p.push("ofs="+l);let b=!0;for(let A=0;A<t;A++){let L=a[A].h;const z=a[A].g;if(L-=l,0>L)l=Math.max(0,a[A].h-100),b=!1;else try{QE(z,p,"req"+L+"_")}catch(K){r&&r(z)}}if(b){r=p.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function b_(n){n.g||n.u||(n.Y=1,mf(n.Ga,n),n.A=0)}function wy(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=dl(ni(n.Ga,n),t1(n,n.A)),n.A++,0))}function E_(n){null!=n.B&&(Tn.clearTimeout(n.B),n.B=null)}function e1(n){n.g=new ay(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=fl(n.oa);ii(e,"RID","rpc"),ii(e,"SID",n.J),ii(e,"CI",n.N?"0":"1"),ii(e,"AID",n.U),bg(n,e),ii(e,"TYPE","xmlhttp"),n.o&&n.s&&__(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=gg(fl(e)),t.s=null,t.U=!0,GE(t,n)}function Xh(n){null!=n.v&&(Tn.clearTimeout(n.v),n.v=null)}function Ig(n,e){var t=null;if(n.g==e){Xh(n),E_(n),n.g=null;var r=2}else{if(!Kh(n.i,e))return;t=e.D,g_(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;mo(r=lg(),new Tw(r,t,e,a)),ml(n)}else b_(n);else if(3==(a=e.o)||0==a&&0<n.I||!(1==r&&function JE(n,e){return!(Uw(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=dl(ni(n.Ha,n,e),t1(n,n.C)),n.C++,0)))}(n,e)||2==r&&wy(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),a){case 1:Af(n,5);break;case 4:Af(n,10);break;case 3:Af(n,6);break;default:Af(n,2)}}function t1(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Af(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=ni(n.jb,n);t||(t=new qh("//www.google.com/images/cleardot.gif"),Tn.location&&"http"==Tn.location.protocol||Wh(t,"https"),gg(t)),function Zh(n,e){const t=new ug;if(Tn.Image){const r=new Image;r.onload=lf(yy,t,r,"TestLoadImage: loaded",!0,e),r.onerror=lf(yy,t,r,"TestLoadImage: error",!1,e),r.onabort=lf(yy,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=lf(yy,t,r,"TestLoadImage: timeout",!1,e),Tn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ks(2);n.G=0,n.j&&n.j.va(e),I_(n),Qh(n)}function I_(n){n.G=0,n.I=-1,n.j&&((0!=m_(n.i).length||0!=n.l.length)&&(n.i.i.length=0,jh(n.l),n.l.length=0),n.j.ua())}function Gw(n,e,t){let r=function MI(n){return n instanceof qh?fl(n):new qh(n,void 0)}(t);if(""!=r.i)e&&hy(r,e+"."+r.i),dy(r,r.m);else{const a=Tn.location;r=function RI(n,e,t,r){var a=new qh(null,void 0);return n&&Wh(a,n),e&&hy(a,e),t&&dy(a,t),r&&(a.l=r),a}(a.protocol,e?e+"."+a.hostname:a.hostname,+a.port,t)}return n.aa&&Zm(n.aa,function(a,l){ii(r,l,a)}),t=n.sa,(e=n.D)&&t&&ii(r,e,t),ii(r,"VER",n.ma),bg(n,r),r}function Wl(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new hs(t&&n.Ba&&!n.qa?new _g({ib:!0}):n.qa)).L=n.H,e}function qw(){}function Cg(){if(hf&&!(10<=Number(TI)))throw Error("Environmental error: no available transport.")}function Ta(n,e){ls.call(this),this.g=new Hw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!rg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Jh(this)}function C_(n){c_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function n1(){l_.call(this),this.status=1}function Jh(n){this.g=n}(Gt=hs.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Uu.g(),this.C=function Sw(n){return n.h||(n.h=n.i())}(this.u?this.u:Uu),this.g.onreadystatechange=ni(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void _y(this,l)}n=t||"";const a=new pg(this.headers);r&&Ef(r,function(l,p){a.set(p,l)}),r=function bI(n){e:{var e=vy;const t=n.length,r="string"==typeof n?n.split(""):n;for(let a=0;a<t;a++)if(a in r&&e.call(void 0,r[a],a,n)){e=a;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(a.T()),t=Tn.FormData&&n instanceof Tn.FormData,!(0<=cw(Ns,e))||r||t||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(l,p){this.g.setRequestHeader(p,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{XE(this),0<this.B&&((this.K=function Tf(n){return hf&&function CI(){return function EI(n){var e=Xv;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=RE(String(ig)).split("."),t=RE("9").split("."),r=Math.max(e.length,t.length);for(let p=0;0==n&&p<r;p++){var a=e[p]||"",l=t[p]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;n=hw(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||hw(0==a[2].length,0==l[2].length)||hw(a[2],l[2]),a=a[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ni(this.pa,this)):this.A=i_(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){_y(this,l)}},Gt.pa=function(){void 0!==fc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mo(this,"timeout"),this.abort(8))},Gt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,mo(this,"complete"),mo(this,"abort"),Wr(this))},Gt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Wr(this,!0)),hs.Z.M.call(this)},Gt.Fa=function(){this.s||(this.F||this.v||this.l?Vu(this):this.cb())},Gt.cb=function(){Vu(this)},Gt.ba=function(){try{return 2<Ca(this)?this.g.status:-1}catch(n){return-1}},Gt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Gt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Bw(e)}},Gt.Da=function(){return this.m},Gt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Gt=Hw.prototype).ma=8,Gt.G=1,Gt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Gt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const a=new ay(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=fw(l),$h(l,this.P)):l=this.P),null===this.o&&(a.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Eg(this,a,e),ii(t=fl(this.F),"RID",n),ii(t,"CVER",22),this.D&&ii(t,"X-HTTP-Session-Id",this.D),bg(this,t),this.o&&l&&__(t,this.o,l),my(this.i,a),this.Ra&&ii(t,"TYPE","init"),this.ja?(ii(t,"$req",e),ii(t,"SID","null"),a.$=!0,d_(a,t,null)):d_(a,t,e),this.G=2}}else 3==this.G&&(n?zw(this,n):0==this.l.length||vg(this.i)||zw(this))},Gt.Ga=function(){if(this.u=null,e1(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=dl(ni(this.bb,this),n)}},Gt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ks(10),w_(this),e1(this))},Gt.ab=function(){null!=this.v&&(this.v=null,w_(this),wy(this),ks(19))},Gt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ks(2)):(this.h.info("Failed to ping google.com"),ks(1))},(Gt=qw.prototype).xa=function(){},Gt.wa=function(){},Gt.va=function(){},Gt.ua=function(){},Gt.Oa=function(){},Cg.prototype.g=function(n,e){return new Ta(n,e)},us(Ta,ls),Ta.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),mf(ni(n.hb,n,e))),ks(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Gw(n,null,n.W),ml(n)},Ta.prototype.close=function(){Df(this.g)},Ta.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Sf(this.g,e)}else this.v?((e={}).__data__=n_(n),Sf(this.g,e)):Sf(this.g,n)},Ta.prototype.M=function(){this.g.j=null,delete this.j,Df(this.g),delete this.g,Ta.Z.M.call(this)},us(C_,c_),us(n1,l_),us(Jh,qw),Jh.prototype.xa=function(){mo(this.g,"a")},Jh.prototype.wa=function(n){mo(this.g,new C_(n))},Jh.prototype.va=function(n){mo(this.g,new n1(n))},Jh.prototype.ua=function(){mo(this.g,"b")},Cg.prototype.createWebChannel=Cg.prototype.g,Ta.prototype.send=Ta.prototype.u,Ta.prototype.open=Ta.prototype.m,Ta.prototype.close=Ta.prototype.close,wf.NO_ERROR=0,wf.TIMEOUT=8,wf.HTTP_ERROR=6,Dw.COMPLETE="complete",Aw.EventType=u_,u_.OPEN="a",u_.CLOSE="b",u_.ERROR="c",u_.MESSAGE="d",ls.prototype.listen=ls.prototype.N,hs.prototype.listenOnce=hs.prototype.O,hs.prototype.getLastError=hs.prototype.La,hs.prototype.getLastErrorCode=hs.prototype.Da,hs.prototype.getStatus=hs.prototype.ba,hs.prototype.getResponseJson=hs.prototype.Qa,hs.prototype.getResponseText=hs.prototype.ga,hs.prototype.send=hs.prototype.ea;var _C=Ia.createWebChannelTransport=function(){return new Cg},Tg=Ia.getStatEventTarget=function(){return lg()},Dg=Ia.ErrorCode=wf,T_=Ia.EventType=Dw,by=Ia.Event=ri,Ww=Ia.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},r1=Ia.FetchXmlHttpFactory=_g,Sg=Ia.WebChannel=Aw,Ag=Ia.XhrIo=hs;const Kw="@firebase/firestore";class Ys{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ys.UNAUTHENTICATED=new Ys(null),Ys.GOOGLE_CREDENTIALS=new Ys("google-credentials-uid"),Ys.FIRST_PARTY=new Ys("first-party-uid"),Ys.MOCK_USER=new Ys("mock-user");let xg="9.8.4";const ed=new Rs.Yd("@firebase/firestore");function Zw(){return ed.logLevel}function wt(n,...e){if(ed.logLevel<=Rs.in.DEBUG){const t=e.map(Kl);ed.debug(`Firestore (${xg}): ${n}`,...t)}}function ki(n,...e){if(ed.logLevel<=Rs.in.ERROR){const t=e.map(Kl);ed.error(`Firestore (${xg}): ${n}`,...t)}}function yl(n,...e){if(ed.logLevel<=Rs.in.WARN){const t=e.map(Kl);ed.warn(`Firestore (${xg}): ${n}`,...t)}}function Kl(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Jt(n="Unexpected state"){const e=`FIRESTORE (${xg}) INTERNAL ASSERTION FAILED: `+n;throw ki(e),new Error(e)}function Rn(n,e){n||Jt()}function Ut(n,e){return n}const Ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class gt extends Nn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class yr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class s1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class o1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ys.UNAUTHENTICATED))}shutdown(){}}class Br{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class PI{constructor(e){this.t=e,this.currentUser=Ys.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let a=this.i;const l=L=>this.i!==a?(a=this.i,t(L)):Promise.resolve();let p=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new yr,e.enqueueRetryable(()=>l(this.currentUser))};const b=()=>{const L=p;e.enqueueRetryable((0,rt.Z)(function*(){yield L.promise,yield l(r.currentUser)}))},A=L=>{wt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=L,this.auth.addAuthTokenListener(this.o),b()};this.t.onInit(L=>A(L)),setTimeout(()=>{if(!this.auth){const L=this.t.getImmediate({optional:!0});L?A(L):(wt("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new yr)}},0),b()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(wt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rn("string"==typeof r.accessToken),new s1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rn(null===e||"string"==typeof e),new Ys(e)}}class Ey{constructor(e,t,r){this.type="FirstParty",this.user=Ys.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const a=e.auth.getAuthHeaderValueForFirstParty([]);a&&this.headers.set("Authorization",a),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Iy{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Ey(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ys.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class S_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OI{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=l=>{null!=l.error&&wt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const p=l.token!==this.p;return this.p=l.token,wt("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const a=l=>{wt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?a(l):wt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rn("string"==typeof t.token),this.p=t.token,new S_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function FI(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class a1{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const a=FI(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%e.length))}return r}}function zn(n,e){return n<e?-1:n>e?1:0}function Mg(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}function Yw(n){return n+"\0"}class li{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new gt(Ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new gt(Ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new gt(Ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new gt(Ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return li.fromMillis(Date.now())}static fromDate(e){return li.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new li(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?zn(this.nanoseconds,e.nanoseconds):zn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class An{constructor(e){this.timestamp=e}static fromTimestamp(e){return new An(e)}static min(){return new An(new li(0,0))}static max(){return new An(new li(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Cy{constructor(e,t,r){void 0===t?t=0:t>e.length&&Jt(),void 0===r?r=e.length-t:r>e.length-t&&Jt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Cy.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cy?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=e.get(a),p=t.get(a);if(l<p)return-1;if(l>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ir extends Cy{construct(e,t,r){return new ir(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new gt(Ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new ir(t)}static emptyPath(){return new ir([])}}const u1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hi extends Cy{construct(e,t,r){return new Hi(e,t,r)}static isValidIdentifier(e){return u1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hi(["__name__"])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(0===r.length)throw new gt(Ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let p=!1;for(;a<e.length;){const b=e[a];if("\\"===b){if(a+1===e.length)throw new gt(Ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const A=e[a+1];if("\\"!==A&&"."!==A&&"`"!==A)throw new gt(Ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=A,a+=2}else"`"===b?(p=!p,a++):"."!==b||p?(r+=b,a++):(l(),a++)}if(l(),p)throw new gt(Ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hi(t)}static emptyPath(){return new Hi([])}}class Ot{constructor(e){this.path=e}static fromPath(e){return new Ot(ir.fromString(e))}static fromName(e){return new Ot(ir.fromString(e).popFirst(5))}static empty(){return new Ot(ir.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ir.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ir.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ot(new ir(e.slice()))}}class Ty{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function Qw(n){return n.fields.find(e=>2===e.kind)}function xf(n){return n.fields.filter(e=>2!==e.kind)}Ty.UNKNOWN_ID=-1;class A_{constructor(e,t){this.fieldPath=e,this.kind=t}}class Mf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Mf(0,ea.min())}}function x_(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=An.fromTimestamp(1e9===r?new li(t+1,0):new li(t,r));return new ea(a,Ot.empty(),e)}function Xw(n){return new ea(n.readTime,n.key,-1)}class ea{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ea(An.min(),Ot.empty(),-1)}static max(){return new ea(An.max(),Ot.empty(),-1)}}function Jw(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ot.comparator(n.documentKey,e.documentKey),0!==t?t:zn(n.largestBatchId,e.largestBatchId))}const c1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function td(n){return eb.apply(this,arguments)}function eb(){return eb=(0,rt.Z)(function*(n){if(n.code!==Ge.FAILED_PRECONDITION||n.message!==c1)throw n;wt("LocalStore","Unexpectedly lost primary lease")}),eb.apply(this,arguments)}class Ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Jt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ve((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ve?t:Ve.resolve(t)}catch(t){return Ve.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ve.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ve.reject(t)}static resolve(e){return new Ve((t,r)=>{t(e)})}static reject(e){return new Ve((t,r)=>{r(e)})}static waitFor(e){return new Ve((t,r)=>{let a=0,l=0,p=!1;e.forEach(b=>{++a,b.next(()=>{++l,p&&l===a&&t()},A=>r(A))}),p=!0,l===a&&t()})}static or(e){let t=Ve.resolve(!1);for(const r of e)t=t.next(a=>a?Ve.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,l)=>{r.push(t.call(this,a,l))}),this.waitFor(r)}static mapArray(e,t){return new Ve((r,a)=>{const l=e.length,p=new Array(l);let b=0;for(let A=0;A<l;A++){const L=A;t(e[L]).next(z=>{p[L]=z,++b,b===l&&r(p)},z=>a(z))}})}static doWhile(e,t){return new Ve((r,a)=>{const l=()=>{!0===e()?t().next(()=>{l()},a):r()};l()})}}class Dy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new yr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new R_(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const a=Nf(r.target.error);this.T.reject(new R_(e,a))}}static open(e,t,r,a){try{return new Dy(t,e.transaction(a,r))}catch(l){throw new R_(t,l)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(wt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new k_(t)}}class mc{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===mc.v((0,Nn.z$)())&&ki("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return wt("SimpleDb","Removing database:",e),Rf(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,Nn.hl)())return!1;if(mc.S())return!0;const e=(0,Nn.z$)(),t=mc.v(e),r=0<t&&t<10,a=mc.D(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,rt.Z)(function*(){return t.db||(wt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=p=>{r(p.target.result)},l.onblocked=()=>{a(new R_(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=p=>{const b=p.target.error;a("VersionError"===b.name?new gt(Ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===b.name?new gt(Ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+b):new R_(e,b))},l.onupgradeneeded=p=>{wt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.P.O(p.target.result,l.transaction,p.oldVersion,t.version).next(()=>{wt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,a){var l=this;return(0,rt.Z)(function*(){const p="readonly"===t;let b=0;for(;;){++b;try{l.db=yield l.k(e);const A=Dy.open(l.db,e,p?"readonly":"readwrite",r),L=a(A).next(z=>(A.R(),z)).catch(z=>(A.abort(z),Ve.reject(z))).toPromise();return L.catch(()=>{}),yield A.A,L}catch(A){const L=A,z="FirebaseError"!==L.name&&b<3;if(wt("SimpleDb","Transaction failed with error:",L.message,"Retrying:",z),l.close(),!z)return Promise.reject(L)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class l1{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Rf(this.$.delete())}}class R_ extends gt{constructor(e,t){super(Ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function nd(n){return"IndexedDbTransactionError"===n.name}class k_{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(wt("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(wt("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Rf(r)}add(e){return wt("SimpleDb","ADD",this.store.name,e,e),Rf(this.store.add(e))}get(e){return Rf(this.store.get(e)).next(t=>(void 0===t&&(t=null),wt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return wt("SimpleDb","DELETE",this.store.name,e),Rf(this.store.delete(e))}count(){return wt("SimpleDb","COUNT",this.store.name),Rf(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const a=this.cursor(r),l=[];return this.G(a,(p,b)=>{l.push(b)}).next(()=>l)}{const a=this.store.getAll(r.range);return new Ve((l,p)=>{a.onerror=b=>{p(b.target.error)},a.onsuccess=b=>{l(b.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Ve((a,l)=>{r.onerror=p=>{l(p.target.error)},r.onsuccess=p=>{a(p.target.result)}})}W(e,t){wt("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const a=this.cursor(r);return this.G(a,(l,p,b)=>b.delete())}J(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.G(a,t)}Y(e){const t=this.cursor({});return new Ve((r,a)=>{t.onerror=l=>{const p=Nf(l.target.error);a(p)},t.onsuccess=l=>{const p=l.target.result;p?e(p.primaryKey,p.value).next(b=>{b?p.continue():r()}):r()}})}G(e,t){const r=[];return new Ve((a,l)=>{e.onerror=p=>{l(p.target.error)},e.onsuccess=p=>{const b=p.target.result;if(!b)return void a();const A=new l1(b),L=t(b.primaryKey,b.value,A);if(L instanceof Ve){const z=L.catch(K=>(A.done(),Ve.reject(K)));r.push(z)}A.isDone?a():null===A.U?b.continue():b.continue(A.U)}}).next(()=>Ve.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Rf(n){return new Ve((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const a=Nf(r.target.error);t(a)}})}let kf=!1;function Nf(n){const e=mc.v((0,Nn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new gt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kf||(kf=!0,setTimeout(()=>{throw r},0)),r}}return n}class UI{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;wt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,rt.Z)(function*(){t.task=null;try{wt("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){nd(r)?wt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield td(r)}yield t.Z(1)}))}}class wC{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,rt.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let a=t,l=!0;return Ve.doWhile(()=>!0===l&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(null!==p&&!r.has(p))return wt("IndexBackiller",`Processing collection: ${p}`),this.nt(e,p,a).next(b=>{a-=b,r.add(p)});l=!1})).next(()=>t-a)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(l=>{const p=l.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.st(a,l)).next(b=>(wt("IndexBackiller",`Updating offset: ${b}`),this.localStore.indexManager.updateCollectionGroup(e,t,b))).next(()=>p.size)}))}st(e,t){let r=e;return t.changes.forEach((a,l)=>{const p=Xw(l);Jw(p,r)>0&&(r=p)}),new ea(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ta{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function h1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function rd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Pf(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}ta.ot=-1;class Ei{constructor(e,t){this.comparator=e,this.root=t||Qs.EMPTY}insert(e,t){return new Ei(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qs.BLACK,null,null))}remove(e){return new Ei(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(0===a)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rg(this.root,e,this.comparator,!0)}}class Rg{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qs{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=null!=r?r:Qs.RED,this.left=null!=a?a:Qs.EMPTY,this.right=null!=l?l:Qs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Qs(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Qs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Qs.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Jt();const e=this.left.check();if(e!==this.right.check())throw Jt();return e+(this.isRed()?0:1)}}Qs.EMPTY=null,Qs.RED=!0,Qs.BLACK=!1,Qs.EMPTY=new class{constructor(){this.size=0}get key(){throw Jt()}get value(){throw Jt()}get color(){throw Jt()}get left(){throw Jt()}get right(){throw Jt()}copy(n,e,t,r,a){return this}insert(n,e,t){return new Qs(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class br{constructor(e){this.comparator=e,this.data=new Ei(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sy(this.data.getIterator())}getIteratorFrom(e){return new Sy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof br)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new br(this.comparator);return t.data=e,t}}class Sy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vl(n){return n.hasNext()?n.getNext():void 0}class yo{constructor(e){this.fields=e,e.sort(Hi.comparator)}static empty(){return new yo([])}unionWith(e){let t=new br(Hi.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new yo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mg(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class hi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new hi(t)}static fromUint8Array(e){const t=function(r){let a="";for(let l=0;l<r.length;++l)a+=String.fromCharCode(r[l]);return a}(e);return new hi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hi.EMPTY_BYTE_STRING=new hi("");const Ay=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function id(n){if(Rn(!!n),"string"==typeof n){let e=0;const t=Ay.exec(n);if(Rn(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:si(n.seconds),nanos:si(n.nanos)}}function si(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Zl(n){return"string"==typeof n?hi.fromBase64String(n):hi.fromUint8Array(n)}function d1(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function f1(n){const e=n.mapValue.fields.__previous_value__;return d1(e)?f1(e):e}function Of(n){const e=id(n.mapValue.fields.__local_write_time__.timestampValue);return new li(e.seconds,e.nanos)}class Ng{constructor(e,t,r,a,l,p,b,A){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=p,this.autoDetectLongPolling=b,this.useFetchStreams=A}}class _l{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _l("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _l&&e.projectId===this.projectId&&e.database===this.database}}function vo(n){return null==n}function N_(n){return 0===n&&1/n==-1/0}function tb(n){return"number"==typeof n&&Number.isInteger(n)&&!N_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const sd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},nb={nullValue:"NULL_VALUE"};function od(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?d1(n)?4:ju(n)?9007199254740991:10:Jt()}function Yl(n,e){if(n===e)return!0;const t=od(n);if(t!==od(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Of(n).isEqual(Of(e));case 3:return function(r,a){if("string"==typeof r.timestampValue&&"string"==typeof a.timestampValue&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const l=id(r.timestampValue),p=id(a.timestampValue);return l.seconds===p.seconds&&l.nanos===p.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,Zl(n.bytesValue).isEqual(Zl(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,a){return si(r.geoPointValue.latitude)===si(a.geoPointValue.latitude)&&si(r.geoPointValue.longitude)===si(a.geoPointValue.longitude)}(n,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return si(r.integerValue)===si(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const l=si(r.doubleValue),p=si(a.doubleValue);return l===p?N_(l)===N_(p):isNaN(l)&&isNaN(p)}return!1}(n,e);case 9:return Mg(n.arrayValue.values||[],e.arrayValue.values||[],Yl);case 10:return function(r,a){const l=r.mapValue.fields||{},p=a.mapValue.fields||{};if(h1(l)!==h1(p))return!1;for(const b in l)if(l.hasOwnProperty(b)&&(void 0===p[b]||!Yl(l[b],p[b])))return!1;return!0}(n,e);default:return Jt()}var a}function Pg(n,e){return void 0!==(n.values||[]).find(t=>Yl(t,e))}function nu(n,e){if(n===e)return 0;const t=od(n),r=od(e);if(t!==r)return zn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return zn(n.booleanValue,e.booleanValue);case 2:return function(a,l){const p=si(a.integerValue||a.doubleValue),b=si(l.integerValue||l.doubleValue);return p<b?-1:p>b?1:p===b?0:isNaN(p)?isNaN(b)?0:-1:1}(n,e);case 3:return p1(n.timestampValue,e.timestampValue);case 4:return p1(Of(n),Of(e));case 5:return zn(n.stringValue,e.stringValue);case 6:return function(a,l){const p=Zl(a),b=Zl(l);return p.compareTo(b)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const p=a.split("/"),b=l.split("/");for(let A=0;A<p.length&&A<b.length;A++){const L=zn(p[A],b[A]);if(0!==L)return L}return zn(p.length,b.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const p=zn(si(a.latitude),si(l.latitude));return 0!==p?p:zn(si(a.longitude),si(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,l){const p=a.values||[],b=l.values||[];for(let A=0;A<p.length&&A<b.length;++A){const L=nu(p[A],b[A]);if(L)return L}return zn(p.length,b.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,l){if(a===sd.mapValue&&l===sd.mapValue)return 0;if(a===sd.mapValue)return 1;if(l===sd.mapValue)return-1;const p=a.fields||{},b=Object.keys(p),A=l.fields||{},L=Object.keys(A);b.sort(),L.sort();for(let z=0;z<b.length&&z<L.length;++z){const K=zn(b[z],L[z]);if(0!==K)return K;const ae=nu(p[b[z]],A[L[z]]);if(0!==ae)return ae}return zn(b.length,L.length)}(n.mapValue,e.mapValue);default:throw Jt()}}function p1(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return zn(n,e);const t=id(n),r=id(e),a=zn(t.seconds,r.seconds);return 0!==a?a:zn(t.nanos,r.nanos)}function Ql(n){return rb(n)}function rb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const a=id(r);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Zl(n.bytesValue).toBase64():"referenceValue"in n?Ot.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let a="[",l=!0;for(const p of r.values||[])l?l=!1:a+=",",a+=rb(p);return a+"]"}(n.arrayValue):"mapValue"in n?function(r){const a=Object.keys(r.fields||{}).sort();let l="{",p=!0;for(const b of a)p?p=!1:l+=",",l+=`${b}:${rb(r.fields[b])}`;return l+"}"}(n.mapValue):Jt();var e}function Lf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ib(n){return!!n&&"integerValue"in n}function xy(n){return!!n&&"arrayValue"in n}function sb(n){return!!n&&"nullValue"in n}function Yn(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function My(n){return!!n&&"mapValue"in n}function ds(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return rd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ds(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ds(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ju(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function g1(n){return"nullValue"in n?nb:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Lf(_l.empty(),Ot.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Jt()}function P_(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Lf(_l.empty(),Ot.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?sd:Jt()}function $u(n,e){const t=nu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ad(n,e){const t=nu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class dr{constructor(e){this.value=e}static empty(){return new dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!My(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ds(t)}setAll(e){let t=Hi.emptyPath(),r={},a=[];e.forEach((p,b)=>{if(!t.isImmediateParentOf(b)){const A=this.getFieldsMap(t);this.applyChanges(A,r,a),r={},a=[],t=b.popLast()}p?r[b.lastSegment()]=ds(p):a.push(b.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());My(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];My(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){rd(t,(a,l)=>e[a]=l);for(const a of r)delete e[a]}clone(){return new dr(ds(this.value))}}function Xl(n){const e=[];return rd(n.fields,(t,r)=>{const a=new Hi([t]);if(My(r)){const l=Xl(r.mapValue).fields;if(0===l.length)e.push(a);else for(const p of l)e.push(a.child(p))}else e.push(a)}),new yo(e)}class Ir{constructor(e,t,r,a,l,p){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.data=l,this.documentState=p}static newInvalidDocument(e){return new Ir(e,0,An.min(),An.min(),dr.empty(),0)}static newFoundDocument(e,t,r){return new Ir(e,1,t,An.min(),r,0)}static newNoDocument(e,t){return new Ir(e,2,t,An.min(),dr.empty(),0)}static newUnknownDocument(e,t){return new Ir(e,3,t,An.min(),dr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=An.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ir(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ud{constructor(e,t=null,r=[],a=[],l=null,p=null,b=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=p,this.endAt=b,this.ut=null}}function m1(n,e=null,t=[],r=[],a=null,l=null,p=null){return new ud(n,e,t,r,a,l,p)}function cd(n){const e=Ut(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(a=r).field.canonicalString()+a.op.toString()+Ql(a.value);var a}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(a=r).field.canonicalString()+a.dir;var a}).join(","),vo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ql(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ql(r)).join(",")),e.ut=t}return e.ut}function Ry(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!ub(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(r=e.filters[a]).op||!t.field.isEqual(r.field)||!Yl(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Py(n.startAt,e.startAt)&&Py(n.endAt,e.endAt)}function ld(n){return Ot.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function O_(n,e){return n.filters.filter(t=>t instanceof fs&&t.field.isEqual(e))}function L_(n,e,t){let r=nb,a=!0;for(const l of O_(n,e)){let p=nb,b=!0;switch(l.op){case"<":case"<=":p=g1(l.value);break;case"==":case"in":case">=":p=l.value;break;case">":p=l.value,b=!1;break;case"!=":case"not-in":p=nb}$u({value:r,inclusive:a},{value:p,inclusive:b})<0&&(r=p,a=b)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const p=t.position[l];$u({value:r,inclusive:a},{value:p,inclusive:t.inclusive})<0&&(r=p,a=t.inclusive);break}return{value:r,inclusive:a}}function yc(n,e,t){let r=sd,a=!0;for(const l of O_(n,e)){let p=sd,b=!0;switch(l.op){case">=":case">":p=P_(l.value),b=!1;break;case"==":case"in":case"<=":p=l.value;break;case"<":p=l.value,b=!1;break;case"!=":case"not-in":p=sd}ad({value:r,inclusive:a},{value:p,inclusive:b})>0&&(r=p,a=b)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const p=t.position[l];ad({value:r,inclusive:a},{value:p,inclusive:t.inclusive})>0&&(r=p,a=t.inclusive);break}return{value:r,inclusive:a}}class fs extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new ob(e,t,r):"array-contains"===t?new ab(e,r):"in"===t?new Lg(e,r):"not-in"===t?new ky(e,r):"array-contains-any"===t?new VI(e,r):new fs(e,t,r)}static ct(e,t,r){return"in"===t?new Og(e,r):new F_(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(nu(t,this.value)):null!==t&&od(this.value)===od(t)&&this.at(nu(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Jt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ob extends fs{constructor(e,t,r){super(e,t,r),this.key=Ot.fromName(r.referenceValue)}matches(e){const t=Ot.comparator(e.key,this.key);return this.at(t)}}class Og extends fs{constructor(e,t){super(e,"in",t),this.keys=U_(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class F_ extends fs{constructor(e,t){super(e,"not-in",t),this.keys=U_(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function U_(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ot.fromName(r.referenceValue))}class ab extends fs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xy(t)&&Pg(t.arrayValue,this.value)}}class Lg extends fs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Pg(this.value.arrayValue,t)}}class ky extends fs{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Pg(this.value.arrayValue,t)}}class VI extends fs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Pg(this.value.arrayValue,r))}}class hd{constructor(e,t){this.position=e,this.inclusive=t}}class Ff{constructor(e,t="asc"){this.field=e,this.dir=t}}function ub(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Ny(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],p=n.position[a];if(r=l.field.isKeyField()?Ot.comparator(Ot.fromName(p.referenceValue),t.key):nu(p,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function Py(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yl(n.position[t],e.position[t]))return!1;return!0}class ru{constructor(e,t=null,r=[],a=[],l=null,p="F",b=null,A=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=p,this.startAt=b,this.endAt=A,this.lt=null,this.ft=null}}function y1(n,e,t,r,a,l,p,b){return new ru(n,e,t,r,a,l,p,b)}function Oy(n){return new ru(n)}function dd(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function B_(n){for(const e of n.filters)if(e.ht())return e.field;return null}function Fy(n){return null!==n.collectionGroup}function wl(n){const e=Ut(n);if(null===e.lt){e.lt=[];const t=B_(e),r=dd(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new Ff(t)),e.lt.push(new Ff(Hi.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e.lt.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Ff(Hi.keyField(),l))}}}return e.lt}function Hu(n){const e=Ut(n);if(!e.ft)if("F"===e.limitType)e.ft=m1(e.path,e.collectionGroup,wl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of wl(e))t.push(new Ff(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new hd(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new hd(e.startAt.position,e.startAt.inclusive):null;e.ft=m1(e.path,e.collectionGroup,t,e.filters,e.limit,r,a)}return e.ft}function v1(n,e,t){return new ru(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Uy(n,e){return Ry(Hu(n),Hu(e))&&n.limitType===e.limitType}function _1(n){return`${cd(Hu(n))}|lt:${n.limitType}`}function V_(n){return`Query(target=${function BI(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Ql(r.value)}`;var r}).join(", ")}]`),vo(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ql(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ql(t)).join(",")),`Target(${e})`}(Hu(n))}; limitType=${n.limitType})`}function By(n,e){return e.isFoundDocument()&&function(t,r){const a=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Ot.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,r){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===r.data.field(a.field))return!1;return!0}(n,e)&&function(t,r){for(const a of t.filters)if(!a.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(a,l,p){const b=Ny(a,l,p);return a.inclusive?b<=0:b<0}(t.startAt,wl(t),r)||t.endAt&&!function(a,l,p){const b=Ny(a,l,p);return a.inclusive?b>=0:b>0}(t.endAt,wl(t),r)));var t,r}function Vy(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function j_(n){return(e,t)=>{let r=!1;for(const a of wl(n)){const l=cb(a,e,t);if(0!==l)return l;r=r||a.field.isKeyField()}return 0}}function cb(n,e,t){const r=n.field.isKeyField()?Ot.comparator(e.key,t.key):function(a,l,p){const b=l.data.field(a),A=p.data.field(a);return null!==b&&null!==A?nu(b,A):Jt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Jt()}}function lb(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:N_(e)?"-0":e}}function hb(n){return{integerValue:""+n}}function db(n,e){return tb(e)?hb(e):lb(n,e)}class Fg{constructor(){this._=void 0}}function jI(n,e,t){return n instanceof zi?function(r,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):n instanceof Da?pb(n,e):n instanceof Xs?zu(n,e):function(r,a){const l=fb(r,a),p=b1(l)+b1(r._t);return ib(l)&&ib(r._t)?hb(p):lb(r.wt,p)}(n,e)}function w1(n,e,t){return n instanceof Da?pb(n,e):n instanceof Xs?zu(n,e):t}function fb(n,e){return n instanceof Gu?ib(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class zi extends Fg{}class Da extends Fg{constructor(e){super(),this.elements=e}}function pb(n,e){const t=jy(e);for(const r of n.elements)t.some(a=>Yl(a,r))||t.push(r);return{arrayValue:{values:t}}}class Xs extends Fg{constructor(e){super(),this.elements=e}}function zu(n,e){let t=jy(e);for(const r of n.elements)t=t.filter(a=>!Yl(a,r));return{arrayValue:{values:t}}}class Gu extends Fg{constructor(e,t){super(),this.wt=e,this._t=t}}function b1(n){return si(n.integerValue||n.doubleValue)}function jy(n){return xy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class $y{constructor(e,t){this.field=e,this.transform=t}}class fd{constructor(e,t){this.version=e,this.transformResults=t}}class Kr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kr}static exists(e){return new Kr(void 0,e)}static updateTime(e){return new Kr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jl(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Hy{}function $_(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new gd(n.key,Kr.none()):new Ug(n.key,n.data,Kr.none());{const t=n.data,r=dr.empty();let a=new br(Hi.comparator);for(let l of e.fields)if(!a.has(l)){let p=t.field(l);null===p&&l.length>1&&(l=l.popLast(),p=t.field(l)),null===p?r.delete(l):r.set(l,p),a=a.add(l)}return new iu(n.key,r,new yo(a.toArray()),Kr.none())}}function H_(n,e,t){n instanceof Ug?function(r,a,l){const p=r.value.clone(),b=gb(r.fieldTransforms,a,l.transformResults);p.setAll(b),a.convertToFoundDocument(l.version,p).setHasCommittedMutations()}(n,e,t):n instanceof iu?function(r,a,l){if(!Jl(r.precondition,a))return void a.convertToUnknownDocument(l.version);const p=gb(r.fieldTransforms,a,l.transformResults),b=a.data;b.setAll(Uf(r)),b.setAll(p),a.convertToFoundDocument(l.version,b).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function pd(n,e,t,r){return n instanceof Ug?function(a,l,p,b){if(!Jl(a.precondition,l))return p;const A=a.value.clone(),L=G_(a.fieldTransforms,b,l);return A.setAll(L),l.convertToFoundDocument(l.version,A).setHasLocalMutations(),null}(n,e,t,r):n instanceof iu?function(a,l,p,b){if(!Jl(a.precondition,l))return p;const A=G_(a.fieldTransforms,b,l),L=l.data;return L.setAll(Uf(a)),L.setAll(A),l.convertToFoundDocument(l.version,L).setHasLocalMutations(),null===p?null:p.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(z=>z.field))}(n,e,t,r):(p=t,Jl(n.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):p);var l,p}function bC(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=fb(r.transform,a||null);null!=l&&(null===t&&(t=dr.empty()),t.set(r.field,l))}return t||null}function z_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Mg(t,r,(a,l)=>function E1(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Da&&r instanceof Da||t instanceof Xs&&r instanceof Xs?Mg(t.elements,r.elements,Yl):t instanceof Gu&&r instanceof Gu?Yl(t._t,r._t):t instanceof zi&&r instanceof zi);var t,r}(a,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ug extends Hy{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class iu extends Hy{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Uf(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function gb(n,e,t){const r=new Map;Rn(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],p=l.transform,b=e.data.field(l.field);r.set(l.field,w1(p,b,t[a]))}return r}function G_(n,e,t){const r=new Map;for(const a of n){const l=a.transform,p=t.data.field(a.field);r.set(a.field,jI(l,p,e))}return r}class gd extends Hy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bf extends Hy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class EC{constructor(e){this.count=e}}var Ni,sr;function mb(n){switch(n){default:return Jt();case Ge.CANCELLED:case Ge.UNKNOWN:case Ge.DEADLINE_EXCEEDED:case Ge.RESOURCE_EXHAUSTED:case Ge.INTERNAL:case Ge.UNAVAILABLE:case Ge.UNAUTHENTICATED:return!1;case Ge.INVALID_ARGUMENT:case Ge.NOT_FOUND:case Ge.ALREADY_EXISTS:case Ge.PERMISSION_DENIED:case Ge.FAILED_PRECONDITION:case Ge.ABORTED:case Ge.OUT_OF_RANGE:case Ge.UNIMPLEMENTED:case Ge.DATA_LOSS:return!0}}function q_(n){if(void 0===n)return ki("GRPC error has no .code"),Ge.UNKNOWN;switch(n){case Ni.OK:return Ge.OK;case Ni.CANCELLED:return Ge.CANCELLED;case Ni.UNKNOWN:return Ge.UNKNOWN;case Ni.DEADLINE_EXCEEDED:return Ge.DEADLINE_EXCEEDED;case Ni.RESOURCE_EXHAUSTED:return Ge.RESOURCE_EXHAUSTED;case Ni.INTERNAL:return Ge.INTERNAL;case Ni.UNAVAILABLE:return Ge.UNAVAILABLE;case Ni.UNAUTHENTICATED:return Ge.UNAUTHENTICATED;case Ni.INVALID_ARGUMENT:return Ge.INVALID_ARGUMENT;case Ni.NOT_FOUND:return Ge.NOT_FOUND;case Ni.ALREADY_EXISTS:return Ge.ALREADY_EXISTS;case Ni.PERMISSION_DENIED:return Ge.PERMISSION_DENIED;case Ni.FAILED_PRECONDITION:return Ge.FAILED_PRECONDITION;case Ni.ABORTED:return Ge.ABORTED;case Ni.OUT_OF_RANGE:return Ge.OUT_OF_RANGE;case Ni.UNIMPLEMENTED:return Ge.UNIMPLEMENTED;case Ni.DATA_LOSS:return Ge.DATA_LOSS;default:return Jt()}}(sr=Ni||(Ni={}))[sr.OK=0]="OK",sr[sr.CANCELLED=1]="CANCELLED",sr[sr.UNKNOWN=2]="UNKNOWN",sr[sr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sr[sr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sr[sr.NOT_FOUND=5]="NOT_FOUND",sr[sr.ALREADY_EXISTS=6]="ALREADY_EXISTS",sr[sr.PERMISSION_DENIED=7]="PERMISSION_DENIED",sr[sr.UNAUTHENTICATED=16]="UNAUTHENTICATED",sr[sr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sr[sr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sr[sr.ABORTED=10]="ABORTED",sr[sr.OUT_OF_RANGE=11]="OUT_OF_RANGE",sr[sr.UNIMPLEMENTED=12]="UNIMPLEMENTED",sr[sr.INTERNAL=13]="INTERNAL",sr[sr.UNAVAILABLE=14]="UNAVAILABLE",sr[sr.DATA_LOSS=15]="DATA_LOSS";class md{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[a,l]of r)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0===a)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return 1===r.length?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){rd(this.inner,(t,r)=>{for(const[a,l]of r)e(a,l)})}isEmpty(){return Pf(this.inner)}size(){return this.innerSize}}const yb=new Ei(Ot.comparator);function na(){return yb}const vb=new Ei(Ot.comparator);function zy(...n){let e=vb;for(const t of n)e=e.insert(t.key,t);return e}function W_(n){let e=vb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function vc(){return yd()}function K_(){return yd()}function yd(){return new md(n=>n.toString(),(n,e)=>n.isEqual(e))}const Gy=new Ei(Ot.comparator),_b=new br(Ot.comparator);function Gn(...n){let e=_b;for(const t of n)e=e.add(t);return e}const $I=new br(zn);function wb(){return $I}class Vf{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,qy.createSynthesizedTargetChangeForCurrentChange(e,t)),new Vf(An.min(),r,wb(),na(),Gn())}}class qy{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new qy(hi.EMPTY_BYTE_STRING,t,Gn(),Gn(),Gn())}}class bb{constructor(e,t,r,a){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=a}}class Z_{constructor(e,t){this.targetId=e,this.It=t}}class HI{constructor(e,t,r=hi.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class zI{constructor(){this.Tt=0,this.Et=Vg(),this.At=hi.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Gn(),t=Gn(),r=Gn();return this.Et.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Jt()}}),new qy(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=Vg()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class IC{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=na(),this.Bt=Bg(),this.Lt=new br(zn)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:Jt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,a)=>{this.jt(a)&&t(a)})}zt(e){const t=e.targetId,r=e.It.count,a=this.Ht(t);if(a){const l=a.target;if(ld(l))if(0===r){const p=new Ot(l.path);this.Kt(t,p,Ir.newNoDocument(p,An.min()))}else Rn(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((l,p)=>{const b=this.Ht(p);if(b){if(l.current&&ld(b.target)){const A=new Ot(b.target.path);null!==this.$t.get(A)||this.Xt(p,A)||this.Kt(p,A,Ir.newNoDocument(A,e))}l.vt&&(t.set(p,l.St()),l.Dt())}});let r=Gn();this.Bt.forEach((l,p)=>{let b=!0;p.forEachWhile(A=>{const L=this.Ht(A);return!L||2===L.purpose||(b=!1,!1)}),b&&(r=r.add(l))}),this.$t.forEach((l,p)=>p.setReadTime(e));const a=new Vf(e,t,this.Lt,this.$t,r);return this.$t=na(),this.Bt=Bg(),this.Lt=new br(zn),a}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const a=this.Qt(e);this.Xt(e,t)?a.Ct(t,1):a.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new zI,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new br(zn),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||wt("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new zI),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function Bg(){return new Ei(Ot.comparator)}function Vg(){return new Ei(Ot.comparator)}const Y_={asc:"ASCENDING",desc:"DESCENDING"},CC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class I1{constructor(e,t){this.databaseId=e,this.dt=t}}function jf(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Eb(n,e){return n.dt?e.toBase64():e.toUint8Array()}function C1(n,e){return jf(n,e.toTimestamp())}function Js(n){return Rn(!!n),An.fromTimestamp(function(e){const t=id(e);return new li(t.seconds,t.nanos)}(n))}function jg(n,e){return(t=n,new ir(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Ib(n){const e=ir.fromString(n);return Rn(zf(e)),e}function Wy(n,e){return jg(n.databaseId,e.path)}function _c(n,e){const t=Ib(e);if(t.get(1)!==n.databaseId.projectId)throw new gt(Ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new gt(Ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ot($f(t))}function Cb(n,e){return jg(n.databaseId,e)}function T1(n){const e=Ib(n);return 4===e.length?ir.emptyPath():$f(e)}function Ky(n){return new ir(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $f(n){return Rn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Zy(n,e,t){return{name:Wy(n,e),fields:t.value.mapValue.fields}}function Yy(n,e,t){const r=_c(n,e.name),a=Js(e.updateTime),l=new dr({mapValue:{fields:e.fields}}),p=Ir.newFoundDocument(r,a,l);return t&&p.setHasCommittedMutations(),t?p.setHasCommittedMutations():p}function eh(n,e){let t;if(e instanceof Ug)t={update:Zy(n,e.key,e.value)};else if(e instanceof gd)t={delete:Wy(n,e.key)};else if(e instanceof iu)t={update:Zy(n,e.key,e.data),updateMask:A1(e.fieldMask)};else{if(!(e instanceof Bf))return Jt();t={verify:Wy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,l){const p=l.transform;if(p instanceof zi)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Da)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Xs)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Gu)return{fieldPath:l.field.canonicalString(),increment:p._t};throw Jt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:C1(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Jt()),t;var a}function Hf(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Kr.updateTime(Js(a.updateTime)):void 0!==a.exists?Kr.exists(a.exists):Kr.none():Kr.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(l,p){let b=null;"setToServerValue"in p?(Rn("REQUEST_TIME"===p.setToServerValue),b=new zi):"appendMissingElements"in p?b=new Da(p.appendMissingElements.values||[]):"removeAllFromArray"in p?b=new Xs(p.removeAllFromArray.values||[]):"increment"in p?b=new Gu(l,p.increment):Jt();const A=Hi.fromServerFormat(p.fieldPath);return new $y(A,b)}(n,a)):[];var a;if(e.update){const a=_c(n,e.update.name),l=new dr({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new yo((e.updateMask.fieldPaths||[]).map(L=>Hi.fromServerFormat(L)));return new iu(a,l,p,t,r)}return new Ug(a,l,t,r)}if(e.delete){const a=_c(n,e.delete);return new gd(a,t)}if(e.verify){const a=_c(n,e.verify);return new Bf(a,t)}return Jt()}function qI(n,e){return{documents:[Cb(n,e.path)]}}function D1(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Cb(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Cb(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const a=function(A){if(0===A.length)return;const L=A.map(z=>function(K){if("=="===K.op){if(Yn(K.value))return{unaryFilter:{field:$g(K.field),op:"IS_NAN"}};if(sb(K.value))return{unaryFilter:{field:$g(K.field),op:"IS_NULL"}}}else if("!="===K.op){if(Yn(K.value))return{unaryFilter:{field:$g(K.field),op:"IS_NOT_NAN"}};if(sb(K.value))return{unaryFilter:{field:$g(K.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$g(K.field),op:Tb(K.op),value:K.value}}}(z));return 1===L.length?L[0]:{compositeFilter:{op:"AND",filters:L}}}(e.filters);a&&(t.structuredQuery.where=a);const l=function(A){if(0!==A.length)return A.map(L=>{return{field:$g((z=L).field),direction:S1(z.dir)};var z})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const p=(L=e.limit,n.dt||vo(L)?L:{value:L});var L,b,A;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt={before:(b=e.startAt).inclusive,values:b.position}),e.endAt&&(t.structuredQuery.endAt={before:!(A=e.endAt).inclusive,values:A.position}),t}function J_(n){let e=T1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Rn(1===r);const z=t.from[0];z.allDescendants?a=z.collectionId:e=e.child(z.collectionId)}let l=[];t.where&&(l=qu(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(z=>{return new Ff(Hg((K=z).field),function(ae){switch(ae){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(K.direction));var K}));let b=null;t.limit&&(b=function(z){let K;return K="object"==typeof z?z.value:z,vo(K)?null:K}(t.limit));let A=null;var z;t.startAt&&(A=new hd((z=t.startAt).values||[],!!z.before));let L=null;return t.endAt&&(L=function(z){return new hd(z.values||[],!z.before)}(t.endAt)),y1(e,a,p,l,b,"F",A,L)}function qu(n){return n?void 0!==n.unaryFilter?[t0(n)]:void 0!==n.fieldFilter?[e0(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>qu(e)).reduce((e,t)=>e.concat(t)):Jt():[]}function S1(n){return Y_[n]}function Tb(n){return CC[n]}function $g(n){return{fieldPath:n.canonicalString()}}function Hg(n){return Hi.fromServerFormat(n.fieldPath)}function e0(n){return fs.create(Hg(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Jt()}}(n.fieldFilter.op),n.fieldFilter.value)}function t0(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Hg(n.unaryFilter.field);return fs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Hg(n.unaryFilter.field);return fs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Hg(n.unaryFilter.field);return fs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Hg(n.unaryFilter.field);return fs.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Jt()}}function A1(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function zf(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Gi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=M1(e)),e=x1(n.get(t),e);return M1(e)}function x1(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function M1(n){return n+"\x01\x01"}function wc(n){const e=n.length;if(Rn(e>=2),2===e)return Rn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),ir.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const p=n.indexOf("\x01",l);switch((p<0||p>t)&&Jt(),n.charAt(p+1)){case"\x01":const b=n.substring(l,p);let A;0===a.length?A=b:(a+=b,A=a,a=""),r.push(A);break;case"\x10":a+=n.substring(l,p),a+="\0";break;case"\x11":a+=n.substring(l,p+1);break;default:Jt()}l=p+2}return new ir(r)}const zg=["userId","batchId"];function bl(n,e){return[n,Gi(e)]}function Db(n,e,t){return[n,Gi(e),t]}const Sb={},KI=["prefixPath","collectionGroup","readTime","documentId"],Vr=["prefixPath","collectionGroup","documentId"],ZI=["collectionGroup","readTime","prefixPath","documentId"],Gg=["canonicalId","targetId"],su=["targetId","path"],qg=["path","targetId"],Uo=["collectionId","parent"],YI=["indexId","uid"],TC=["uid","sequenceNumber"],Qy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],R1=["indexId","uid","orderedDocumentKey"],k1=["userId","collectionPath","documentId"],QI=["userId","collectionPath","largestBatchId"],El=["userId","collectionGroup","largestBatchId"],Wg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],n0=[...Wg,"documentOverlays"],Xy=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Kg=Xy,N1=[...Kg,"indexConfiguration","indexState","indexEntries"];class r0 extends M_{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Ps(n,e){const t=Ut(n);return mc.N(t.ee,e)}class Ab{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&H_(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=K_();return this.mutations.forEach(a=>{const l=e.get(a.key),p=l.overlayedDocument;let b=this.applyToLocalView(p,l.mutatedFields);b=t.has(a.key)?null:b;const A=$_(p,b);null!==A&&r.set(a.key,A),p.isValidDocument()||p.convertToNoDocument(An.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gn())}isEqual(e){return this.batchId===e.batchId&&Mg(this.mutations,e.mutations,(t,r)=>z_(t,r))&&Mg(this.baseMutations,e.baseMutations,(t,r)=>z_(t,r))}}class i{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Rn(e.mutations.length===r.length);let a=Gy;const l=e.mutations;for(let p=0;p<l.length;p++)a=a.insert(l[p].key,r[p].version);return new i(e,t,r,a)}}class u{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class h{constructor(e,t,r,a,l=An.min(),p=An.min(),b=hi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=b}withSequenceNumber(e){return new h(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new h(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new h(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class f{constructor(e){this.ne=e}}function v(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:E(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Wy(a=n.ne,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:jf(a,l.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:I(e.version)};else{if(!e.isUnknownDocument())return Jt();r.unknownDocument={path:t.path.toArray(),version:I(e.version)}}var a,l;return r}function E(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function I(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function S(n){const e=new li(n.seconds,n.nanoseconds);return An.fromTimestamp(e)}function k(n,e){const t=(e.baseMutations||[]).map(l=>Hf(n.ne,l));for(let l=0;l<e.mutations.length-1;++l){const p=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(p.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>Hf(n.ne,l)),a=li.fromMillis(e.localWriteTimeMs);return new Ab(e.batchId,a,t,r)}function O(n){const e=S(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?S(n.lastLimboFreeSnapshotVersion):An.min();let r;var a;return void 0!==n.query.documents?(Rn(1===(a=n.query).documents.length),r=Hu(Oy(T1(a.documents[0])))):r=Hu(J_(n.query)),new h(r,n.targetId,0,n.lastListenSequenceNumber,e,t,hi.fromBase64String(n.resumeToken))}function U(n,e){const t=I(e.snapshotVersion),r=I(e.lastLimboFreeSnapshotVersion);let a;a=ld(e.target)?qI(n.ne,e.target):D1(n.ne,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:cd(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function N(n){const e=J_({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?v1(e,e.limit,"L"):e}function V(n,e){return new u(e.largestBatchId,Hf(n.ne,e.overlayMutation))}function H(n,e){const t=e.path.lastSegment();return[n,Gi(e.path.popLast()),t]}function G(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:I(r.readTime),documentKey:Gi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Y{getBundleMetadata(e,t){return J(e).get(t).next(r=>{if(r)return{id:(a=r).bundleId,createTime:S(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return J(e).put({bundleId:(r=t).id,createTime:I(Js(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return he(e).get(t).next(r=>{if(r)return{name:(a=r).name,query:N(a.bundledQuery),readTime:S(a.readTime)};var a})}saveNamedQuery(e,t){return he(e).put({name:(r=t).name,readTime:I(Js(r.readTime)),bundledQuery:r.bundledQuery});var r}}function J(n){return Ps(n,"bundles")}function he(n){return Ps(n,"namedQueries")}class ee{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new ee(e,t.uid||"")}getOverlay(e,t){return Ce(e).get(H(this.userId,t)).next(r=>r?V(this.wt,r):null)}getOverlays(e,t){const r=vc();return Ve.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((l,p)=>{const b=new u(t,p);a.push(this.ie(e,b))}),Ve.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(p=>a.add(Gi(p.getCollectionPath())));const l=[];return a.forEach(p=>{const b=IDBKeyRange.bound([this.userId,p,r],[this.userId,p,r+1],!1,!0);l.push(Ce(e).W("collectionPathOverlayIndex",b))}),Ve.waitFor(l)}getOverlaysForCollection(e,t,r){const a=vc(),l=Gi(t),p=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Ce(e).K("collectionPathOverlayIndex",p).next(b=>{for(const A of b){const L=V(this.wt,A);a.set(L.getKey(),L)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const l=vc();let p;const b=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ce(e).J({index:"collectionGroupOverlayIndex",range:b},(A,L,z)=>{const K=V(this.wt,L);l.size()<a||K.largestBatchId===p?(l.set(K.getKey(),K),p=K.largestBatchId):z.done()}).next(()=>l)}ie(e,t){return Ce(e).put(function(r,a,l){const[p,b,A]=H(a,l.mutation.key);return{userId:a,collectionPath:b,documentId:A,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:eh(r.ne,l.mutation)}}(this.wt,this.userId,t))}}function Ce(n){return Ps(n,"documentOverlays")}class ke{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(si(e.integerValue));else if("doubleValue"in e){const r=si(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),N_(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Zl(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?ju(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Jt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const a of Object.keys(r))this.le(a,t),this.oe(r[a],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const a of r)this.oe(a,t)}_e(e,t){this.ce(t,37),Ot.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function Se(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function _e(n){const e=64-function(t){let r=0;for(let a=0;a<8;++a){const l=Se(255&t[a]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}ke.ye=new ke;class ze{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const a=t.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const a=t.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}this.Re()}ve(e){const t=this.Ve(e),r=_e(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}De(e){const t=this.Ve(e),r=_e(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class je{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class xt{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class mt{constructor(){this.Me=new ze,this.Fe=new je(this.Me),this.$e=new xt(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class Qe{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Qe(this.indexId,this.documentKey,this.arrayValue,r)}}function Pt(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=ft(n.arrayValue,e.arrayValue),0!==t?t:(t=ft(n.directionalValue,e.directionalValue),0!==t?t:Ot.comparator(n.documentKey,e.documentKey)))}function ft(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class le{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=Qw(e);if(void 0!==t&&!this.Qe(t))return!1;const r=xf(e);let a=0,l=0;for(;a<r.length&&this.Qe(r[a]);++a);if(a===r.length)return!0;if(void 0!==this.Ke){const p=r[a];if(!this.je(this.Ke,p)||!this.We(this.Ue[l++],p))return!1;++a}for(;a<r.length;++a){const p=r[a];if(l>=this.Ue.length||!this.We(this.Ue[l++],p))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class it{constructor(){this.ze=new Mt}addToCollectionParentIndex(e,t){return this.ze.add(t),Ve.resolve()}getCollectionParents(e,t){return Ve.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return Ve.resolve()}deleteFieldIndex(e,t){return Ve.resolve()}getDocumentsMatchingTarget(e,t){return Ve.resolve(null)}getIndexType(e,t){return Ve.resolve(0)}getFieldIndexes(e,t){return Ve.resolve([])}getNextCollectionGroupToUpdate(e){return Ve.resolve(null)}getMinOffset(e,t){return Ve.resolve(ea.min())}getMinOffsetFromCollectionGroup(e,t){return Ve.resolve(ea.min())}updateCollectionGroup(e,t,r){return Ve.resolve()}updateIndexEntries(e,t){return Ve.resolve()}}class Mt{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new br(ir.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new br(ir.comparator)).toArray()}}const Kt=new Uint8Array(0);class Yt{constructor(e,t){this.user=e,this.databaseId=t,this.He=new Mt,this.Je=new md(r=>cd(r),(r,a)=>Ry(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const l={collectionId:r,parent:Gi(a)};return Qn(e).put(l)}return Ve.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[Yw(t),""],!1,!0);return Qn(e).K(a).next(l=>{for(const p of l){if(p.collectionId!==t)break;r.push(wc(p.parent))}return r})}addFieldIndex(e,t){const r=tr(e),a={indexId:(p=t).indexId,collectionGroup:p.collectionGroup,fields:p.fields.map(b=>[b.fieldPath.canonicalString(),b.kind])};var p;delete a.indexId;const l=r.add(a);if(t.indexState){const p=Xn(e);return l.next(b=>{p.put(G(b,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=tr(e),a=Xn(e),l=Mn(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Mn(e);let a=!0;const l=new Map;return Ve.forEach(this.Ye(t),p=>this.Xe(e,p).next(b=>{a&&(a=!!b),l.set(p,b)})).next(()=>{if(a){let p=Gn();const b=[];return Ve.forEach(l,(A,L)=>{var z;wt("IndexedDbIndexManager",`Using index ${z=A,`id=${z.indexId}|cg=${z.collectionGroup}|f=${z.fields.map(Zt=>`${Zt.fieldPath}:${Zt.kind}`).join(",")}`} to execute ${cd(t)}`);const K=function(Zt,$t){const ln=Qw($t);if(void 0===ln)return null;for(const gn of O_(Zt,ln.fieldPath))switch(gn.op){case"array-contains-any":return gn.value.arrayValue.values||[];case"array-contains":return[gn.value]}return null}(L,A),ae=function(Zt,$t){const ln=new Map;for(const gn of xf($t))for(const fr of O_(Zt,gn.fieldPath))switch(fr.op){case"==":case"in":ln.set(gn.fieldPath.canonicalString(),fr.value);break;case"not-in":case"!=":return ln.set(gn.fieldPath.canonicalString(),fr.value),Array.from(ln.values())}return null}(L,A),ie=function(Zt,$t){const ln=[];let gn=!0;for(const fr of xf($t)){const Wi=0===fr.kind?L_(Zt,fr.fieldPath,Zt.startAt):yc(Zt,fr.fieldPath,Zt.startAt);ln.push(Wi.value),gn&&(gn=Wi.inclusive)}return new hd(ln,gn)}(L,A),Te=function(Zt,$t){const ln=[];let gn=!0;for(const fr of xf($t)){const Wi=0===fr.kind?yc(Zt,fr.fieldPath,Zt.endAt):L_(Zt,fr.fieldPath,Zt.endAt);ln.push(Wi.value),gn&&(gn=Wi.inclusive)}return new hd(ln,gn)}(L,A),dt=this.Ze(A,L,ie),yt=this.Ze(A,L,Te),Qt=this.tn(A,L,ae),At=this.en(A.indexId,K,dt,ie.inclusive,yt,Te.inclusive,Qt);return Ve.forEach(At,Zt=>r.j(Zt,t.limit).next($t=>{$t.forEach(ln=>{const gn=Ot.fromSegments(ln.documentKey);p.has(gn)||(p=p.add(gn),b.push(gn))})}))}).next(()=>b)}return Ve.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,a,l,p,b){const A=(null!=t?t.length:1)*Math.max(r.length,l.length),L=A/(null!=t?t.length:1),z=[];for(let K=0;K<A;++K){const ae=t?this.nn(t[K/L]):Kt,ie=this.sn(e,ae,r[K%L],a),Te=this.rn(e,ae,l[K%L],p),dt=b.map(yt=>this.sn(e,ae,yt,!0));z.push(...this.createRange(ie,Te,dt))}return z}sn(e,t,r,a){const l=new Qe(e,Ot.empty(),t,r);return a?l:l.Le()}rn(e,t,r,a){const l=new Qe(e,Ot.empty(),t,r);return a?l.Le():l}Xe(e,t){const r=new le(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let p=null;for(const b of l)r.Ge(b)&&(!p||b.fields.length>p.fields.length)&&(p=b);return p})}getIndexType(e,t){let r=2;return Ve.forEach(this.Ye(t),a=>this.Xe(e,a).next(l=>{l?0!==r&&l.fields.length<function(p){let b=new br(Hi.comparator),A=!1;for(const L of p.filters){const z=L;z.field.isKeyField()||("array-contains"===z.op||"array-contains-any"===z.op?A=!0:b=b.add(z.field))}for(const L of p.orderBy)L.field.isKeyField()||(b=b.add(L.field));return b.size+(A?1:0)}(a)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new mt;for(const a of xf(e)){const l=t.data.field(a.fieldPath);if(null==l)return null;const p=r.Be(a.kind);ke.ye.re(l,p)}return r.Oe()}nn(e){const t=new mt;return ke.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new mt;return ke.ye.re(Lf(this.databaseId,t),r.Be(function(a){const l=xf(a);return 0===l.length?0:l[l.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let a=[];a.push(new mt);let l=0;for(const p of xf(e)){const b=r[l++];for(const A of a)if(this.cn(t,p.fieldPath)&&xy(b))a=this.an(a,p,b);else{const L=A.Be(p.kind);ke.ye.re(b,L)}}return this.hn(a)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const a=[...e],l=[];for(const p of r.arrayValue.values||[])for(const b of a){const A=new mt;A.seed(b.Oe()),ke.ye.re(p,A.Be(t.kind)),l.push(A)}return l}cn(e,t){return!!e.filters.find(r=>r instanceof fs&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=tr(e),a=Xn(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(l=>{const p=[];return Ve.forEach(l,b=>a.get([b.indexId,this.uid]).next(A=>{p.push(function(L,z){const K=z?new Mf(z.sequenceNumber,new ea(S(z.readTime),new Ot(wc(z.documentKey)),z.largestBatchId)):Mf.empty(),ae=L.fields.map(([ie,Te])=>new A_(Hi.fromServerFormat(ie),Te));return new Ty(L.indexId,L.collectionGroup,ae,K)}(b,A))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==l?l:zn(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=tr(e),l=Xn(e);return this.ln(e).next(p=>a.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(b=>Ve.forEach(b,A=>l.put(G(A.indexId,this.user,p,r)))))}updateIndexEntries(e,t){const r=new Map;return Ve.forEach(t,(a,l)=>{const p=r.get(a.collectionGroup);return(p?Ve.resolve(p):this.getFieldIndexes(e,a.collectionGroup)).next(b=>(r.set(a.collectionGroup,b),Ve.forEach(b,A=>this.fn(e,a,A).next(L=>{const z=this.dn(l,A);return L.isEqual(z)?Ve.resolve():this._n(e,l,A,L,z)}))))})}wn(e,t,r,a){return Mn(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,a){return Mn(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const a=Mn(e);let l=new br(Pt);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(p,b)=>{l=l.add(new Qe(r.indexId,t,b.arrayValue,b.directionalValue))}).next(()=>l)}dn(e,t){let r=new br(Pt);const a=this.on(t,e);if(null==a)return r;const l=Qw(t);if(null!=l){const p=e.data.field(l.fieldPath);if(xy(p))for(const b of p.arrayValue.values||[])r=r.add(new Qe(t.indexId,e.key,this.nn(b),a))}else r=r.add(new Qe(t.indexId,e.key,Kt,a));return r}_n(e,t,r,a,l){wt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const p=[];return function(b,A,L,z,K){const ae=b.getIterator(),ie=A.getIterator();let Te=vl(ae),dt=vl(ie);for(;Te||dt;){let yt=!1,Qt=!1;if(Te&&dt){const At=L(Te,dt);At<0?Qt=!0:At>0&&(yt=!0)}else null!=Te?Qt=!0:yt=!0;yt?(z(dt),dt=vl(ie)):Qt?(K(Te),Te=vl(ae)):(Te=vl(ae),dt=vl(ie))}}(a,l,Pt,b=>{p.push(this.wn(e,t,r,b))},b=>{p.push(this.mn(e,t,r,b))}),Ve.waitFor(p)}ln(e){let t=1;return Xn(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((p,b)=>Pt(p,b)).filter((p,b,A)=>!b||0!==Pt(p,A[b-1]));const a=[];a.push(e);for(const p of r){const b=Pt(p,e),A=Pt(p,t);if(0===b)a[0]=e.Le();else if(b>0&&A<0)a.push(p),a.push(p.Le());else if(A>0)break}a.push(t);const l=[];for(let p=0;p<a.length;p+=2)l.push(IDBKeyRange.bound([a[p].indexId,this.uid,a[p].arrayValue,a[p].directionalValue,Kt,[]],[a[p+1].indexId,this.uid,a[p+1].arrayValue,a[p+1].directionalValue,Kt,[]]));return l}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jr)}getMinOffset(e,t){return Ve.mapArray(this.Ye(t),r=>this.Xe(e,r).next(a=>a||Jt())).next(jr)}}function Qn(n){return Ps(n,"collectionParents")}function Mn(n){return Ps(n,"indexEntries")}function tr(n){return Ps(n,"indexConfiguration")}function Xn(n){return Ps(n,"indexState")}function jr(n){Rn(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;Jw(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new ea(e.readTime,e.documentKey,t)}const Sr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class cr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new cr(e,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Bt(n,e,t){const r=n.store("mutations"),a=n.store("documentMutations"),l=[],p=IDBKeyRange.only(t.batchId);let b=0;const A=r.J({range:p},(z,K,ae)=>(b++,ae.delete()));l.push(A.next(()=>{Rn(1===b)}));const L=[];for(const z of t.mutations){const K=Db(e,z.key.path,t.batchId);l.push(a.delete(K)),L.push(z.key)}return Ve.waitFor(l).next(()=>L)}function Sn(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Jt();e=n.noDocument}return JSON.stringify(e).length}cr.DEFAULT_COLLECTION_PERCENTILE=10,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cr.DEFAULT=new cr(41943040,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cr.DISABLED=new cr(-1,0,0);class kn{constructor(e,t,r,a){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=a,this.gn={}}static se(e,t,r,a){Rn(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new kn(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ii(e).J({index:"userMutationsIndex",range:r},(a,l,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const l=ra(e),p=Ii(e);return p.add({}).next(b=>{Rn("number"==typeof b);const A=new Ab(b,t,r,a),L=function(ae,ie,Te){const dt=Te.baseMutations.map(Qt=>eh(ae.ne,Qt)),yt=Te.mutations.map(Qt=>eh(ae.ne,Qt));return{userId:ie,batchId:Te.batchId,localWriteTimeMs:Te.localWriteTime.toMillis(),baseMutations:dt,mutations:yt}}(this.wt,this.userId,A),z=[];let K=new br((ae,ie)=>zn(ae.canonicalString(),ie.canonicalString()));for(const ae of a){const ie=Db(this.userId,ae.key.path,b);K=K.add(ae.key.path.popLast()),z.push(p.put(L)),z.push(l.put(ie,Sb))}return K.forEach(ae=>{z.push(this.indexManager.addToCollectionParentIndex(e,ae))}),e.addOnCommittedListener(()=>{this.gn[b]=A.keys()}),Ve.waitFor(z).next(()=>A)})}lookupMutationBatch(e,t){return Ii(e).get(t).next(r=>r?(Rn(r.userId===this.userId),k(this.wt,r)):null)}yn(e,t){return this.gn[t]?Ve.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.gn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Ii(e).J({index:"userMutationsIndex",range:a},(p,b,A)=>{b.userId===this.userId&&(Rn(b.batchId>=r),l=k(this.wt,b)),A.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ii(e).J({index:"userMutationsIndex",range:t,reverse:!0},(a,l,p)=>{r=l.batchId,p.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ii(e).K("userMutationsIndex",t).next(r=>r.map(a=>k(this.wt,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=bl(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return ra(e).J({range:a},(p,b,A)=>{const[L,z,K]=p,ae=wc(z);if(L===this.userId&&t.path.isEqual(ae))return Ii(e).get(K).next(ie=>{if(!ie)throw Jt();Rn(ie.userId===this.userId),l.push(k(this.wt,ie))});A.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new br(zn);const a=[];return t.forEach(l=>{const p=bl(this.userId,l.path),b=IDBKeyRange.lowerBound(p),A=ra(e).J({range:b},(L,z,K)=>{const[ae,ie,Te]=L,dt=wc(ie);ae===this.userId&&l.path.isEqual(dt)?r=r.add(Te):K.done()});a.push(A)}),Ve.waitFor(a).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=bl(this.userId,r),p=IDBKeyRange.lowerBound(l);let b=new br(zn);return ra(e).J({range:p},(A,L,z)=>{const[K,ae,ie]=A,Te=wc(ae);K===this.userId&&r.isPrefixOf(Te)?Te.length===a&&(b=b.add(ie)):z.done()}).next(()=>this.pn(e,b))}pn(e,t){const r=[],a=[];return t.forEach(l=>{a.push(Ii(e).get(l).next(p=>{if(null===p)throw Jt();Rn(p.userId===this.userId),r.push(k(this.wt,p))}))}),Ve.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return Bt(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),Ve.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ve.resolve();const r=IDBKeyRange.lowerBound([this.userId]),a=[];return ra(e).J({range:r},(l,p,b)=>{if(l[0]===this.userId){const A=wc(l[1]);a.push(A)}else b.done()}).next(()=>{Rn(0===a.length)})})}containsKey(e,t){return tn(e,this.userId,t)}Tn(e){return Bo(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tn(n,e,t){const r=bl(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let p=!1;return ra(n).J({range:l,H:!0},(b,A,L)=>{const[z,K,ae]=b;z===e&&K===a&&(p=!0),L.done()}).next(()=>p)}function Ii(n){return Ps(n,"mutations")}function ra(n){return Ps(n,"documentMutations")}function Bo(n){return Ps(n,"mutationQueues")}class eo{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new eo(0)}static Rn(){return new eo(-1)}}class Zg{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new eo(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>An.fromTimestamp(new li(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Pn(e,a)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Yg(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(Rn(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let a=0;const l=[];return Yg(e).J((p,b)=>{const A=O(b);A.sequenceNumber<=t&&null===r.get(A.targetId)&&(a++,l.push(this.removeTargetData(e,A)))}).next(()=>Ve.waitFor(l)).next(()=>a)}forEachTarget(e,t){return Yg(e).J((r,a)=>{const l=O(a);t(l)})}bn(e){return nT(e).get("targetGlobalKey").next(t=>(Rn(null!==t),t))}Pn(e,t){return nT(e).put("targetGlobalKey",t)}vn(e,t){return Yg(e).put(U(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=cd(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Yg(e).J({range:a,index:"queryTargetsIndex"},(p,b,A)=>{const L=O(b);Ry(t,L.target)&&(l=L,A.done())}).next(()=>l)}addMatchingKeys(e,t,r){const a=[],l=Qg(e);return t.forEach(p=>{const b=Gi(p.path);a.push(l.put({targetId:r,path:b})),a.push(this.referenceDelegate.addReference(e,r,p))}),Ve.waitFor(a)}removeMatchingKeys(e,t,r){const a=Qg(e);return Ve.forEach(t,l=>{const p=Gi(l.path);return Ve.waitFor([a.delete([r,p]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=Qg(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Qg(e);let l=Gn();return a.J({range:r,H:!0},(p,b,A)=>{const L=wc(p[1]),z=new Ot(L);l=l.add(z)}).next(()=>l)}containsKey(e,t){const r=Gi(t.path),a=IDBKeyRange.bound([r],[Yw(r)],!1,!0);let l=0;return Qg(e).J({index:"documentTargetsIndex",H:!0,range:a},([p,b],A,L)=>{0!==p&&(l++,L.done())}).next(()=>l>0)}te(e,t){return Yg(e).get(t).next(r=>r?O(r):null)}}function Yg(n){return Ps(n,"targets")}function nT(n){return Ps(n,"targetGlobal")}function Qg(n){return Ps(n,"targetDocuments")}function rT([n,e],[t,r]){const a=zn(n,t);return 0===a?zn(e,r):a}class QD{constructor(e){this.Sn=e,this.buffer=new br(rT),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();rT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class XD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;wt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,rt.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){nd(r)?wt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield td(r)}yield t.kn(3e5)}))}}class JD{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Ve.resolve(ta.ot);const r=new QD(t);return this.On.forEachTarget(e,a=>r.xn(a.sequenceNumber)).next(()=>this.On.Fn(e,a=>r.xn(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(wt("LruGarbageCollector","Garbage collection skipped; disabled"),Ve.resolve(Sr)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(wt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sr):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,a,l,p,b,A,L;const z=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(K=>(K>this.params.maximumSequenceNumbersToCollect?(wt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${K}`),a=this.params.maximumSequenceNumbersToCollect):a=K,p=Date.now(),this.nthSequenceNumber(e,a))).next(K=>(r=K,b=Date.now(),this.removeTargets(e,r,t))).next(K=>(l=K,A=Date.now(),this.removeOrphanedDocuments(e,r))).next(K=>(L=Date.now(),Zw()<=Rs.in.DEBUG&&wt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-z}ms\n\tDetermined least recently used ${a} in `+(b-p)+`ms\n\tRemoved ${l} targets in `+(A-b)+`ms\n\tRemoved ${K} documents in `+(L-A)+`ms\nTotal Duration: ${L-z}ms`),Ve.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:K})))}}class s{constructor(e,t){this.db=e,this.garbageCollector=new JD(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,a)=>t(a))}addReference(e,t,r){return o(e,r)}removeReference(e,t,r){return o(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return o(e,t)}Un(e,t){return function(r,a){let l=!1;return Bo(r).Y(p=>tn(r,p,a).next(b=>(b&&(l=!0),Ve.resolve(!b)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Ln(e,(p,b)=>{if(b<=t){const A=this.Un(e,p).next(L=>{if(!L)return l++,r.getEntry(e,p).next(()=>(r.removeEntry(p,An.min()),Qg(e).delete([0,Gi(p.path)])))});a.push(A)}}).next(()=>Ve.waitFor(a)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return o(e,t)}Ln(e,t){const r=Qg(e);let a,l=ta.ot;return r.J({index:"documentTargetsIndex"},([p,b],{path:A,sequenceNumber:L})=>{0===p?(l!==ta.ot&&t(new Ot(wc(a)),l),l=L,a=A):l=ta.ot}).next(()=>{l!==ta.ot&&t(new Ot(wc(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function o(n,e){return Qg(n).put((r=n.currentSequenceNumber,{targetId:0,path:Gi(e.path),sequenceNumber:r}));var r}class c{constructor(){this.changes=new md(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ir.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Ve.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class d{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return R(e).put(r)}removeEntry(e,t,r){return R(e).delete(function(a,l){const p=a.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],E(l),p[p.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=Ir.newInvalidDocument(t);return R(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(P(t))},(a,l)=>{r=this.Kn(t,l)}).next(()=>r)}Gn(e,t){let r={size:0,document:Ir.newInvalidDocument(t)};return R(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(P(t))},(a,l)=>{r={document:this.Kn(t,l),size:Sn(l)}}).next(()=>r)}getEntries(e,t){let r=na();return this.Qn(e,t,(a,l)=>{const p=this.Kn(a,l);r=r.insert(a,p)}).next(()=>r)}jn(e,t){let r=na(),a=new Ei(Ot.comparator);return this.Qn(e,t,(l,p)=>{const b=this.Kn(l,p);r=r.insert(l,b),a=a.insert(l,Sn(p))}).next(()=>({documents:r,Wn:a}))}Qn(e,t,r){if(t.isEmpty())return Ve.resolve();let a=new br(q);t.forEach(A=>a=a.add(A));const l=IDBKeyRange.bound(P(a.first()),P(a.last())),p=a.getIterator();let b=p.getNext();return R(e).J({index:"documentKeyIndex",range:l},(A,L,z)=>{const K=Ot.fromSegments([...L.prefixPath,L.collectionGroup,L.documentId]);for(;b&&q(b,K)<0;)r(b,null),b=p.getNext();b&&b.isEqual(K)&&(r(b,L),b=p.hasNext()?p.getNext():null),b?z.q(P(b)):z.done()}).next(()=>{for(;b;)r(b,null),b=p.hasNext()?p.getNext():null})}getAllFromCollection(e,t,r){const a=[t.popLast().toArray(),t.lastSegment(),E(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return R(e).K(IDBKeyRange.bound(a,l,!0)).next(p=>{let b=na();for(const A of p){const L=this.Kn(Ot.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);b=b.insert(L.key,L)}return b})}getAllFromCollectionGroup(e,t,r,a){let l=na();const p=$(t,r),b=$(t,ea.max());return R(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,b,!0)},(A,L,z)=>{const K=this.Kn(Ot.fromSegments(L.prefixPath.concat(L.collectionGroup,L.documentId)),L);l=l.insert(K.key,K),l.size===a&&z.done()}).next(()=>l)}newChangeBuffer(e){return new w(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return T(e).get("remoteDocumentGlobalKey").next(t=>(Rn(!!t),t))}qn(e,t){return T(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function g(n,e){let t;if(e.document)t=Yy(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ot.fromSegments(e.noDocument.path),a=S(e.noDocument.readTime);t=Ir.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Jt();{const r=Ot.fromSegments(e.unknownDocument.path),a=S(e.unknownDocument.version);t=Ir.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(r){const a=new li(r[0],r[1]);return An.fromTimestamp(a)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(An.min()))return r}return Ir.newInvalidDocument(e)}}function m(n){return new d(n)}class w extends c{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new md(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new br((l,p)=>zn(l.canonicalString(),p.canonicalString()));return this.changes.forEach((l,p)=>{const b=this.Hn.get(l);if(t.push(this.zn.removeEntry(e,l,b.readTime)),p.isValidDocument()){const A=v(this.zn.wt,p);a=a.add(l.path.popLast()),r+=Sn(A)-b.size,t.push(this.zn.addEntry(e,l,A))}else if(r-=b.size,this.trackRemovals){const A=v(this.zn.wt,p.convertToNoDocument(An.min()));t.push(this.zn.addEntry(e,l,A))}}),a.forEach(l=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.zn.updateMetadata(e,r)),Ve.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:a})=>(a.forEach((l,p)=>{this.Hn.set(l,{size:p,readTime:r.get(l).readTime})}),r))}}function T(n){return Ps(n,"remoteDocumentGlobal")}function R(n){return Ps(n,"remoteDocumentsV14")}function P(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $(n,e){const t=e.documentKey.path.toArray();return[n,E(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function q(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=zn(t[l],r[l]),a)return a;return a=zn(t.length,r.length),a||(a=zn(t[t.length-2],r[r.length-2]),a||zn(t[t.length-1],r[r.length-1]))}class te{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class de{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.getBaseDocument(e,t,r))).next(a=>(null!==r&&pd(r.mutation,a,yo.empty(),li.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Gn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Gn()){const a=vc();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(l=>{let p=zy();return l.forEach((b,A)=>{p=p.insert(b,A.overlayedDocument)}),p}))}getOverlayedDocuments(e,t){const r=vc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Gn()))}populateOverlays(e,t,r){const a=[];return r.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((p,b)=>{t.set(p,b)})})}computeViews(e,t,r,a){let l=na();const p=yd(),b=yd();return t.forEach((A,L)=>{const z=r.get(L.key);a.has(L.key)&&(void 0===z||z.mutation instanceof iu)?l=l.insert(L.key,L):void 0!==z&&(p.set(L.key,z.mutation.getFieldMask()),pd(z.mutation,L,z.mutation.getFieldMask(),li.now()))}),this.recalculateAndSaveOverlays(e,l).next(A=>(A.forEach((L,z)=>p.set(L,z)),t.forEach((L,z)=>{var K;return b.set(L,new te(z,null!==(K=p.get(L))&&void 0!==K?K:null))}),b))}recalculateAndSaveOverlays(e,t){const r=yd();let a=new Ei((p,b)=>p-b),l=Gn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(p=>{for(const b of p)b.keys().forEach(A=>{const L=t.get(A);if(null===L)return;let z=r.get(A)||yo.empty();z=b.applyToLocalView(L,z),r.set(A,z);const K=(a.get(b.batchId)||Gn()).add(A);a=a.insert(b.batchId,K)})}).next(()=>{const p=[],b=a.getReverseIterator();for(;b.hasNext();){const A=b.getNext(),L=A.key,z=A.value,K=K_();z.forEach(ae=>{if(!l.has(ae)){const ie=$_(t.get(ae),r.get(ae));null!==ie&&K.set(ae,ie),l=l.add(ae)}}),p.push(this.documentOverlayCache.saveOverlays(e,L,K))}return Ve.waitFor(p)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ot.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Fy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var a}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(l=>{const p=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):Ve.resolve(vc());let b=-1,A=l;return p.next(L=>Ve.forEach(L,(z,K)=>(b<K.largestBatchId&&(b=K.largestBatchId),l.get(z)?Ve.resolve():this.getBaseDocument(e,z,K).next(ae=>{A=A.insert(z,ae)}))).next(()=>this.populateOverlays(e,L,l)).next(()=>this.computeViews(e,A,L,Gn())).next(z=>({batchId:b,changes:W_(z)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ot(t)).next(r=>{let a=zy();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const a=t.collectionGroup;let l=zy();return this.indexManager.getCollectionParents(e,a).next(p=>Ve.forEach(p,b=>{const A=(L=t,z=b.child(a),new ru(z,null,L.explicitOrderBy.slice(),L.filters.slice(),L.limit,L.limitType,L.startAt,L.endAt));var L,z;return this.getDocumentsMatchingCollectionQuery(e,A,r).next(L=>{L.forEach((z,K)=>{l=l.insert(z,K)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r){let a;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(l=>(a=l,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(l=>{l.forEach((b,A)=>{const L=A.getKey();null===a.get(L)&&(a=a.insert(L,Ir.newInvalidDocument(L)))});let p=zy();return a.forEach((b,A)=>{const L=l.get(b);void 0!==L&&pd(L.mutation,A,yo.empty(),li.now()),By(t,A)&&(p=p.insert(b,A))}),p})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):Ve.resolve(Ir.newInvalidDocument(t))}}class Ae{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return Ve.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Js(r.createTime)}),Ve.resolve()}getNamedQuery(e,t){return Ve.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:N(r.bundledQuery),readTime:Js(r.readTime)}),Ve.resolve();var r}}class st{constructor(){this.overlays=new Ei(Ot.comparator),this.Xn=new Map}getOverlay(e,t){return Ve.resolve(this.overlays.get(t))}getOverlays(e,t){const r=vc();return Ve.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,l)=>{this.ie(e,t,l)}),Ve.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Xn.get(r);return void 0!==a&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Xn.delete(r)),Ve.resolve()}getOverlaysForCollection(e,t,r){const a=vc(),l=t.length+1,p=new Ot(t.child("")),b=this.overlays.getIteratorFrom(p);for(;b.hasNext();){const A=b.getNext().value,L=A.getKey();if(!t.isPrefixOf(L.path))break;L.path.length===l&&A.largestBatchId>r&&a.set(A.getKey(),A)}return Ve.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new Ei((L,z)=>L-z);const p=this.overlays.getIterator();for(;p.hasNext();){const L=p.getNext().value;if(L.getKey().getCollectionGroup()===t&&L.largestBatchId>r){let z=l.get(L.largestBatchId);null===z&&(z=vc(),l=l.insert(L.largestBatchId,z)),z.set(L.getKey(),L)}}const b=vc(),A=l.getIterator();for(;A.hasNext()&&(A.getNext().value.forEach((L,z)=>b.set(L,z)),!(b.size()>=a)););return Ve.resolve(b)}ie(e,t,r){const a=this.overlays.get(r.key);if(null!==a){const p=this.Xn.get(a.largestBatchId).delete(r.key);this.Xn.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(r.key,new u(t,r));let l=this.Xn.get(t);void 0===l&&(l=Gn(),this.Xn.set(t,l)),this.Xn.set(t,l.add(r.key))}}class Rt{constructor(){this.Zn=new br(Et.ts),this.es=new br(Et.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Et(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Et(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new Ot(new ir([])),r=new Et(t,e),a=new Et(t,e+1),l=[];return this.es.forEachInRange([r,a],p=>{this.rs(p),l.push(p.key)}),l}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Ot(new ir([])),r=new Et(t,e),a=new Et(t,e+1);let l=Gn();return this.es.forEachInRange([r,a],p=>{l=l.add(p.key)}),l}containsKey(e){const t=new Et(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Et{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Ot.comparator(e.key,t.key)||zn(e.ls,t.ls)}static ns(e,t){return zn(e.ls,t.ls)||Ot.comparator(e.key,t.key)}}class nn{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new br(Et.ts)}checkEmpty(e){return Ve.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,a){const l=this.fs;this.fs++;const p=new Ab(l,t,r,a);this.mutationQueue.push(p);for(const b of a)this.ds=this.ds.add(new Et(b.key,l)),this.indexManager.addToCollectionParentIndex(e,b.key.path.popLast());return Ve.resolve(p)}lookupMutationBatch(e,t){return Ve.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.ws(t+1),l=a<0?0:a;return Ve.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Ve.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return Ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Et(t,0),a=new Et(t,Number.POSITIVE_INFINITY),l=[];return this.ds.forEachInRange([r,a],p=>{const b=this._s(p.ls);l.push(b)}),Ve.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new br(zn);return t.forEach(a=>{const l=new Et(a,0),p=new Et(a,Number.POSITIVE_INFINITY);this.ds.forEachInRange([l,p],b=>{r=r.add(b.ls)})}),Ve.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;Ot.isDocumentKey(l)||(l=l.child(""));const p=new Et(new Ot(l),0);let b=new br(zn);return this.ds.forEachWhile(A=>{const L=A.key.path;return!!r.isPrefixOf(L)&&(L.length===a&&(b=b.add(A.ls)),!0)},p),Ve.resolve(this.gs(b))}gs(e){const t=[];return e.forEach(r=>{const a=this._s(r);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){Rn(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return Ve.forEach(t.mutations,a=>{const l=new Et(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Et(t,0),a=this.ds.firstAfterOrEqual(r);return Ve.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return Ve.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class pt{constructor(e){this.ps=e,this.docs=new Ei(Ot.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,p=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:p}),this.size+=p-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ve.resolve(r?r.document.mutableCopy():Ir.newInvalidDocument(t))}getEntries(e,t){let r=na();return t.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():Ir.newInvalidDocument(a))}),Ve.resolve(r)}getAllFromCollection(e,t,r){let a=na();const l=new Ot(t.child("")),p=this.docs.getIteratorFrom(l);for(;p.hasNext();){const{key:b,value:{document:A}}=p.getNext();if(!t.isPrefixOf(b.path))break;b.path.length>t.length+1||Jw(Xw(A),r)<=0||(a=a.insert(A.key,A.mutableCopy()))}return Ve.resolve(a)}getAllFromCollectionGroup(e,t,r,a){Jt()}Is(e,t){return Ve.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Cn(this)}getSize(e){return Ve.resolve(this.size)}}class Cn extends c{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.zn.addEntry(e,a)):this.zn.removeEntry(r)}),Ve.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class or{constructor(e){this.persistence=e,this.Ts=new md(t=>cd(t),Ry),this.lastRemoteSnapshotVersion=An.min(),this.highestTargetId=0,this.Es=0,this.As=new Rt,this.targetCount=0,this.Rs=eo.An()}forEachTarget(e,t){return this.Ts.forEach((r,a)=>t(a)),Ve.resolve()}getLastRemoteSnapshotVersion(e){return Ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ve.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Ve.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),Ve.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new eo(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,Ve.resolve()}updateTargetData(e,t){return this.vn(t),Ve.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Ve.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.Ts.forEach((p,b)=>{b.sequenceNumber<=t&&null===r.get(b.targetId)&&(this.Ts.delete(p),l.push(this.removeMatchingKeysForTargetId(e,b.targetId)),a++)}),Ve.waitFor(l).next(()=>a)}getTargetCount(e){return Ve.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return Ve.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),Ve.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(p=>{l.push(a.markPotentiallyOrphaned(e,p))}),Ve.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),Ve.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return Ve.resolve(r)}containsKey(e,t){return Ve.resolve(this.As.containsKey(t))}}class Cr{constructor(e,t){this.bs={},this.overlays={},this.Ps=new ta(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new or(this),this.indexManager=new it,this.remoteDocumentCache=new pt(r=>this.referenceDelegate.Ss(r)),this.wt=new f(t),this.Ds=new Ae(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new st,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new nn(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){wt("MemoryPersistence","Starting transaction:",e);const a=new bc(this.Ps.next());return this.referenceDelegate.Cs(),r(a).next(l=>this.referenceDelegate.xs(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ns(e,t){return Ve.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class bc extends M_{constructor(e){super(),this.currentSequenceNumber=e}}class vd{constructor(e){this.persistence=e,this.ks=new Rt,this.Os=null}static Ms(e){return new vd(e)}get Fs(){if(this.Os)return this.Os;throw Jt()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),Ve.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),Ve.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),Ve.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(a=>this.Fs.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.Fs.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ve.forEach(this.Fs,r=>{const a=Ot.fromPath(r);return this.$s(e,a).next(l=>{l||t.removeEntry(a,An.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return Ve.or([()=>Ve.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class XI{constructor(e){this.wt=e}O(e,t,r,a){const l=new Dy("createOrUpgrade",t);var b;r<1&&a>=1&&(e.createObjectStore("owner"),(b=e).createObjectStore("mutationQueues",{keyPath:"userId"}),b.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zg,{unique:!0}),b.createObjectStore("documentMutations"),P1(e),function(b){b.createObjectStore("remoteDocuments")}(e));let p=Ve.resolve();return r<3&&a>=3&&(0!==r&&(function(b){b.deleteObjectStore("targetDocuments"),b.deleteObjectStore("targets"),b.deleteObjectStore("targetGlobal")}(e),P1(e)),p=p.next(()=>function(b){const A=b.store("targetGlobal"),L={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:An.min().toTimestamp(),targetCount:0};return A.put("targetGlobalKey",L)}(l))),r<4&&a>=4&&(0!==r&&(p=p.next(()=>function(b,A){return A.store("mutations").K().next(L=>{b.deleteObjectStore("mutations"),b.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zg,{unique:!0});const z=A.store("mutations"),K=L.map(ae=>z.put(ae));return Ve.waitFor(K)})}(e,l))),p=p.next(()=>{!function(b){b.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&a>=5&&(p=p.next(()=>this.Bs(l))),r<6&&a>=6&&(p=p.next(()=>(function(b){b.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(l)))),r<7&&a>=7&&(p=p.next(()=>this.Us(l))),r<8&&a>=8&&(p=p.next(()=>this.qs(e,l))),r<9&&a>=9&&(p=p.next(()=>{!function(b){b.objectStoreNames.contains("remoteDocumentChanges")&&b.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&a>=10&&(p=p.next(()=>this.Ks(l))),r<11&&a>=11&&(p=p.next(()=>{(function(b){b.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(b){b.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&a>=12&&(p=p.next(()=>{!function(b){const A=b.createObjectStore("documentOverlays",{keyPath:k1});A.createIndex("collectionPathOverlayIndex",QI,{unique:!1}),A.createIndex("collectionGroupOverlayIndex",El,{unique:!1})}(e)})),r<13&&a>=13&&(p=p.next(()=>function(b){const A=b.createObjectStore("remoteDocumentsV14",{keyPath:KI});A.createIndex("documentKeyIndex",Vr),A.createIndex("collectionGroupIndex",ZI)}(e)).next(()=>this.Gs(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&a>=14&&(p=p.next(()=>this.Qs(e,l))),r<15&&a>=15&&(p=p.next(()=>function(b){b.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),b.createObjectStore("indexState",{keyPath:YI}).createIndex("sequenceNumberIndex",TC,{unique:!1}),b.createObjectStore("indexEntries",{keyPath:Qy}).createIndex("documentKeyIndex",R1,{unique:!1})}(e))),p}Ls(e){let t=0;return e.store("remoteDocuments").J((r,a)=>{t+=Sn(a)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(a=>Ve.forEach(a,l=>{const p=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",p).next(b=>Ve.forEach(b,A=>{Rn(A.userId===l.userId);const L=k(this.wt,A);return Bt(e,l.userId,L).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return r.J((p,b)=>{const A=new ir(p),L=[0,Gi(A)];l.push(t.get(L).next(z=>z?Ve.resolve():t.put({targetId:0,path:Gi(A),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>Ve.waitFor(l))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:Uo});const r=t.store("collectionParents"),a=new Mt,l=p=>{if(a.add(p)){const b=p.lastSegment(),A=p.popLast();return r.put({collectionId:b,parent:Gi(A)})}};return t.store("remoteDocuments").J({H:!0},(p,b)=>{const A=new ir(p);return l(A.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([p,b,A],L)=>{const z=wc(b);return l(z.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,a)=>{const l=O(a),p=U(this.wt,l);return t.put(p)})}Gs(e,t){const r=t.store("remoteDocuments"),a=[];return r.J((l,p)=>{const b=t.store("remoteDocumentsV14"),A=(L=p,L.document?new Ot(ir.fromString(L.document.name).popFirst(5)):L.noDocument?Ot.fromSegments(L.noDocument.path):L.unknownDocument?Ot.fromSegments(L.unknownDocument.path):Jt()).path.toArray();var L;const z={prefixPath:A.slice(0,A.length-2),collectionGroup:A[A.length-2],documentId:A[A.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};a.push(b.put(z))}).next(()=>Ve.waitFor(a))}Qs(e,t){const r=t.store("mutations"),a=m(this.wt),l=new Cr(vd.Ms,this.wt.ne);return r.K().next(p=>{const b=new Map;return p.forEach(A=>{var L;let z=null!==(L=b.get(A.userId))&&void 0!==L?L:Gn();k(this.wt,A).keys().forEach(K=>z=z.add(K)),b.set(A.userId,z)}),Ve.forEach(b,(A,L)=>{const z=new Ys(L),K=ee.se(this.wt,z),ae=l.getIndexManager(z),ie=kn.se(z,this.wt,ae,l.referenceDelegate);return new de(a,ie,K,ae).recalculateAndSaveOverlaysForDocumentKeys(new r0(t,ta.ot),A).next()})})}}function P1(n){n.createObjectStore("targetDocuments",{keyPath:su}).createIndex("documentTargetsIndex",qg,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Gg,{unique:!0}),n.createObjectStore("targetGlobal")}const xb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Mb{constructor(e,t,r,a,l,p,b,A,L,z,K=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=l,this.window=p,this.document=b,this.Ws=L,this.zs=z,this.Hs=K,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=ae=>Promise.resolve(),!Mb.V())throw new gt(Ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new s(this,a),this.ei=t+"main",this.wt=new f(A),this.ni=new mc(this.ei,this.Hs,new XI(this.wt)),this.Vs=new Zg(this.referenceDelegate,this.wt),this.remoteDocumentCache=m(this.wt),this.Ds=new Y,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===z&&ki("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new gt(Ge.FAILED_PRECONDITION,xb);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new ta(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,rt.Z)(function*(a){if(t.started)return e(a)});return function(a){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,rt.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,rt.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>s0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(nd(e))return wt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return wt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Jy(e).get("owner").next(t=>Ve.resolve(this.di(t)))}_i(e){return s0(e).delete(this.clientId)}wi(){var e=this;return(0,rt.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const a=Ps(r,"clientMetadata");return a.K().next(l=>{const p=e.gi(l,18e5),b=l.filter(A=>-1===p.indexOf(A));return Ve.forEach(b,A=>a.delete(A.clientId)).next(()=>b)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?Ve.resolve(!0):Jy(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new gt(Ge.FAILED_PRECONDITION,xb);return!1}}return!(!this.networkEnabled||!this.inForeground)||s0(e).K().next(r=>void 0===this.gi(r,5e3).find(a=>{if(this.clientId!==a.clientId){const p=!this.inForeground&&a.inForeground,b=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||p&&b)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&wt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,rt.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new r0(t,ta.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>s0(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return kn.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Yt(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return ee.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){wt("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",l=15===(p=this.Hs)?N1:14===p?Kg:13===p?Xy:12===p?n0:11===p?Wg:void Jt();var p;let b;return this.ni.runTransaction(e,a,l,A=>(b=new r0(A,this.Ps?this.Ps.next():ta.ot),"readwrite-primary"===t?this.ai(b).next(L=>!!L||this.hi(b)).next(L=>{if(!L)throw ki(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new gt(Ge.FAILED_PRECONDITION,c1);return r(b)}).next(L=>this.fi(b).next(()=>L)):this.bi(b).next(()=>r(b)))).then(A=>(b.raiseOnCommittedEvent(),A))}bi(e){return Jy(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new gt(Ge.FAILED_PRECONDITION,xb)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jy(e).put("owner",t)}static V(){return mc.V()}li(e){const t=Jy(e);return t.get("owner").next(r=>this.di(r)?(wt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ve.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(ki(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,Nn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return wt("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ki("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){ki("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jy(n){return Ps(n,"owner")}function s0(n){return Ps(n,"clientMetadata")}function Rb(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class kb{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=a}static Vi(e,t){let r=Gn(),a=Gn();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new kb(e,t.fromCache,r,a)}}class O1{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,a){return this.Ci(e,t).next(l=>l||this.xi(e,t,a,r)).next(l=>l||this.Ni(e,t))}Ci(e,t){return Ve.resolve(null)}xi(e,t,r,a){return function Ly(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||a.isEqual(An.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(l=>{const p=this.ki(t,l);return this.Oi(t,p,r,a)?this.Ni(e,t):(Zw()<=Rs.in.DEBUG&&wt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),V_(t)),this.Mi(e,p,t,x_(a,-1)))})}ki(e,t){let r=new br(j_(e));return t.forEach((a,l)=>{By(e,l)&&(r=r.add(l))}),r}Oi(e,t,r,a){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ni(e,t){return Zw()<=Rs.in.DEBUG&&wt("QueryEngine","Using full collection scan to execute query:",V_(t)),this.Di.getDocumentsMatchingQuery(e,t,ea.min())}Mi(e,t,r,a){return this.Di.getDocumentsMatchingQuery(e,r,a).next(l=>(t.forEach(p=>{l=l.insert(p.key,p)}),l))}}class vx{constructor(e,t,r,a){this.persistence=e,this.Fi=t,this.wt=a,this.$i=new Ei(zn),this.Bi=new md(l=>cd(l),Ry),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new de(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function eS(n,e,t,r){return new vx(n,e,t,r)}function tS(n,e){return iT.apply(this,arguments)}function iT(){return iT=(0,rt.Z)(function*(n,e){const t=Ut(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const p=[],b=[];let A=Gn();for(const L of a){p.push(L.batchId);for(const z of L.mutations)A=A.add(z.key)}for(const L of l){b.push(L.batchId);for(const z of L.mutations)A=A.add(z.key)}return t.localDocuments.getDocuments(r,A).next(L=>({Ki:L,removedBatchIds:p,addedBatchIds:b}))})})}),iT.apply(this,arguments)}function _x(n,e){const t=Ut(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),l=t.Ui.newChangeBuffer({trackRemovals:!0});return function(p,b,A,L){const z=A.batch,K=z.keys();let ae=Ve.resolve();return K.forEach(ie=>{ae=ae.next(()=>L.getEntry(b,ie)).next(Te=>{const dt=A.docVersions.get(ie);Rn(null!==dt),Te.version.compareTo(dt)<0&&(z.applyToRemoteDocument(Te,A),Te.isValidDocument()&&(Te.setReadTime(A.commitVersion),L.addEntry(Te)))})}),ae.next(()=>p.mutationQueue.removeMutationBatch(b,z))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(p){let b=Gn();for(let A=0;A<p.mutationResults.length;++A)p.mutationResults[A].transformResults.length>0&&(b=b.add(p.batch.mutations[A].key));return b}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function nS(n){const e=Ut(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function wx(n,e){const t=Ut(n),r=e.snapshotVersion;let a=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const p=t.Ui.newChangeBuffer({trackRemovals:!0});a=t.$i;const b=[];e.targetChanges.forEach((z,K)=>{const ae=a.get(K);if(!ae)return;b.push(t.Vs.removeMatchingKeys(l,z.removedDocuments,K).next(()=>t.Vs.addMatchingKeys(l,z.addedDocuments,K)));let ie=ae.withSequenceNumber(l.currentSequenceNumber);var Te,dt,yt;e.targetMismatches.has(K)?ie=ie.withResumeToken(hi.EMPTY_BYTE_STRING,An.min()).withLastLimboFreeSnapshotVersion(An.min()):z.resumeToken.approximateByteSize()>0&&(ie=ie.withResumeToken(z.resumeToken,r)),a=a.insert(K,ie),dt=ie,yt=z,(0===(Te=ae).resumeToken.approximateByteSize()||dt.snapshotVersion.toMicroseconds()-Te.snapshotVersion.toMicroseconds()>=3e8||yt.addedDocuments.size+yt.modifiedDocuments.size+yt.removedDocuments.size>0)&&b.push(t.Vs.updateTargetData(l,ie))});let A=na(),L=Gn();if(e.documentUpdates.forEach(z=>{e.resolvedLimboDocuments.has(z)&&b.push(t.persistence.referenceDelegate.updateLimboDocument(l,z))}),b.push(rS(l,p,e.documentUpdates).next(z=>{A=z.Gi,L=z.Qi})),!r.isEqual(An.min())){const z=t.Vs.getLastRemoteSnapshotVersion(l).next(K=>t.Vs.setTargetsMetadata(l,l.currentSequenceNumber,r));b.push(z)}return Ve.waitFor(b).next(()=>p.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,A,L)).next(()=>A)}).then(l=>(t.$i=a,l))}function rS(n,e,t){let r=Gn(),a=Gn();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let p=na();return t.forEach((b,A)=>{const L=l.get(b);A.isFoundDocument()!==L.isFoundDocument()&&(a=a.add(b)),A.isNoDocument()&&A.version.isEqual(An.min())?(e.removeEntry(b,A.readTime),p=p.insert(b,A)):!L.isValidDocument()||A.version.compareTo(L.version)>0||0===A.version.compareTo(L.version)&&L.hasPendingWrites?(e.addEntry(A),p=p.insert(b,A)):wt("LocalStore","Ignoring outdated watch update for ",b,". Current version:",L.version," Watch version:",A.version)}),{Gi:p,Qi:a}})}function bx(n,e){const t=Ut(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function L1(n,e){const t=Ut(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Vs.getTargetData(r,e).next(l=>l?(a=l,Ve.resolve(a)):t.Vs.allocateTargetId(r).next(p=>(a=new h(e,p,0,r.currentSequenceNumber),t.Vs.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.$i.get(r.targetId);return(null===a||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function F1(n,e,t){return sT.apply(this,arguments)}function sT(){return sT=(0,rt.Z)(function*(n,e,t){const r=Ut(n),a=r.$i.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,p=>r.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!nd(p))throw p;wt("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}r.$i=r.$i.remove(e),r.Bi.delete(a.target)}),sT.apply(this,arguments)}function DC(n,e,t){const r=Ut(n);let a=An.min(),l=Gn();return r.persistence.runTransaction("Execute query","readonly",p=>function(b,A,L){const z=Ut(b),K=z.Bi.get(L);return void 0!==K?Ve.resolve(z.$i.get(K)):z.Vs.getTargetData(A,L)}(r,p,Hu(e)).next(b=>{if(b)return a=b.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(p,b.targetId).next(A=>{l=A})}).next(()=>r.Fi.getDocumentsMatchingQuery(p,e,t?a:An.min(),t?l:Gn())).next(b=>(oS(r,Vy(e),b),{documents:b,ji:l})))}function iS(n,e){const t=Ut(n),r=Ut(t.Vs),a=t.$i.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>r.te(l,e).next(p=>p?p.target:null))}function sS(n,e){const t=Ut(n),r=t.Li.get(e)||An.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Ui.getAllFromCollectionGroup(a,e,x_(r,-1),Number.MAX_SAFE_INTEGER)).then(a=>(oS(t,e,a),a))}function oS(n,e,t){let r=An.min();t.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.Li.set(e,r)}function oT(){return oT=(0,rt.Z)(function*(n,e,t,r){const a=Ut(n);let l=Gn(),p=na();for(const L of t){const z=e.Wi(L.metadata.name);L.document&&(l=l.add(z));const K=e.zi(L);K.setReadTime(e.Hi(L.metadata.readTime)),p=p.insert(z,K)}const b=a.Ui.newChangeBuffer({trackRemovals:!0}),A=yield L1(a,(L=r,Hu(Oy(ir.fromString(`__bundle__/docs/${L}`)))));var L;return a.persistence.runTransaction("Apply bundle documents","readwrite",L=>rS(L,b,p).next(z=>(b.apply(L),z)).next(z=>a.Vs.removeMatchingKeysForTargetId(L,A.targetId).next(()=>a.Vs.addMatchingKeys(L,l,A.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(L,z.Gi,z.Qi)).next(()=>z.Gi)))}),oT.apply(this,arguments)}function Ix(n,e){return aT.apply(this,arguments)}function aT(){return aT=(0,rt.Z)(function*(n,e,t=Gn()){const r=yield L1(n,Hu(N(e.bundledQuery))),a=Ut(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const p=Js(e.readTime);if(r.snapshotVersion.compareTo(p)>=0)return a.Ds.saveNamedQuery(l,e);const b=r.withResumeToken(hi.EMPTY_BYTE_STRING,p);return a.$i=a.$i.insert(b.targetId,b),a.Vs.updateTargetData(l,b).next(()=>a.Vs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>a.Vs.addMatchingKeys(l,t,r.targetId)).next(()=>a.Ds.saveNamedQuery(l,e))})}),aT.apply(this,arguments)}function aS(n,e){return`firestore_clients_${n}_${e}`}function uS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function uT(n,e){return`firestore_targets_${n}_${e}`}class SC{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Ji(e,t,r){const a=JSON.parse(r);let l,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(l=new gt(a.error.code,a.error.message))),p?new SC(e,t,a.state,l):(ki("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class JI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let a,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(a=new gt(r.error.code,r.error.message))),l?new JI(e,r.state,a):(ki("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class AC{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let a="object"==typeof r&&r.activeTargetIds instanceof Array,l=wb();for(let p=0;a&&p<r.activeTargetIds.length;++p)a=tb(r.activeTargetIds[p]),l=l.add(r.activeTargetIds[p]);return a?new AC(e,l):(ki("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class cT{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new cT(t.clientId,t.onlineState):(ki("SharedClientState",`Failed to parse online state: ${e}`),null)}}class lT{constructor(){this.activeTargetIds=wb()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hT{constructor(e,t,r,a,l){this.window=e,this.js=t,this.persistenceKey=r,this.tr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Ei(zn),this.started=!1,this.ir=[];const p=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.rr=aS(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new lT),this.cr=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(b){return`firestore_bundle_loaded_v2_${b}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,rt.Z)(function*(){const t=yield e.syncEngine.Ri();for(const a of t){if(a===e.tr)continue;const l=e.getItem(aS(e.persistenceKey,a));if(l){const p=AC.Ji(a,l);p&&(e.sr=e.sr.insert(p.clientId,p))}}e._r();const r=e.storage.getItem(e.lr);if(r){const a=e.wr(r);a&&e.mr(a)}for(const a of e.ir)e.nr(a);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(uT(this.persistenceKey,e));if(r){const a=JI.Ji(e,r);a&&(t=a.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(uT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.pr(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return wt("SharedClientState","READ",e,t),t}setItem(e,t){wt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){wt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(wt("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void ki("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,rt.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const a=t.Rr(r.key);return t.br(a,null)}{const a=t.Pr(r.key,r.newValue);if(a)return t.br(a.clientId,a)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const a=t.vr(r.key,r.newValue);if(a)return t.Vr(a)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const a=t.Sr(r.key,r.newValue);if(a)return t.Dr(a)}}else if(r.key===t.lr){if(null!==r.newValue){const a=t.wr(r.newValue);if(a)return t.mr(a)}}else if(r.key===t.ur){const a=function(l){let p=ta.ot;if(null!=l)try{const b=JSON.parse(l);Rn("number"==typeof b),p=b}catch(b){ki("SharedClientState","Failed to read sequence number from WebStorage",b)}return p}(r.newValue);a!==ta.ot&&t.sequenceNumberHandler(a)}else if(r.key===t.dr){const a=t.Cr(r.newValue);yield Promise.all(a.map(l=>t.syncEngine.Nr(l)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const a=new SC(this.currentUser,e,t,r),l=uS(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Yi())}pr(e){const t=uS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const a=uT(this.persistenceKey,e),l=new JI(e,t,r);this.setItem(a,l.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return AC.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),a=Number(r[1]);return SC.Ji(new Ys(void 0!==r[2]?r[2]:null),a,t)}Sr(e,t){const r=this.hr.exec(e),a=Number(r[1]);return JI.Ji(a,t)}wr(e){return cT.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,rt.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);wt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),a=this.gr(this.sr),l=this.gr(r),p=[],b=[];return l.forEach(A=>{a.has(A)||p.push(A)}),a.forEach(A=>{l.has(A)||b.push(A)}),this.syncEngine.Mr(p,b).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=wb();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class cS{constructor(){this.Fr=new lT,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new lT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Cx{Br(e){}shutdown(){}}class lS{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){wt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){wt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Tx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Dx{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Sx extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,a,l){const p=this.oo(e,t);wt("RestConnection","Sending: ",p,r);const b={};return this.uo(b,a,l),this.co(e,p,b,r).then(A=>(wt("RestConnection","Received: ",A),A),A=>{throw yl("RestConnection",`${e} failed with error: `,A,"url: ",p,"request:",r),A})}ao(e,t,r,a,l,p){return this.ro(e,t,r,a,l)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+xg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),r&&r.headers.forEach((a,l)=>e[l]=a)}oo(e,t){return`${this.so}/v1/${t}:${Tx[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,a){return new Promise((l,p)=>{const b=new Ag;b.listenOnce(T_.COMPLETE,()=>{try{switch(b.getLastErrorCode()){case Dg.NO_ERROR:const L=b.getResponseJson();wt("Connection","XHR received:",JSON.stringify(L)),l(L);break;case Dg.TIMEOUT:wt("Connection",'RPC "'+e+'" timed out'),p(new gt(Ge.DEADLINE_EXCEEDED,"Request time out"));break;case Dg.HTTP_ERROR:const z=b.getStatus();if(wt("Connection",'RPC "'+e+'" failed with status:',z,"response text:",b.getResponseText()),z>0){const K=b.getResponseJson().error;if(K&&K.status&&K.message){const ae=function(ie){const Te=ie.toLowerCase().replace(/_/g,"-");return Object.values(Ge).indexOf(Te)>=0?Te:Ge.UNKNOWN}(K.status);p(new gt(ae,K.message))}else p(new gt(Ge.UNKNOWN,"Server responded with status "+b.getStatus()))}else p(new gt(Ge.UNAVAILABLE,"Connection failed."));break;default:Jt()}}finally{wt("Connection",'RPC "'+e+'" completed.')}});const A=JSON.stringify(a);b.send(t,"POST",A,r,15)})}ho(e,t,r){const a=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=_C(),p=Tg(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(b.xmlHttpFactory=new r1({})),this.uo(b.initMessageHeaders,t,r),(0,Nn.uI)()||(0,Nn.b$)()||(0,Nn.d)()||(0,Nn.w1)()||(0,Nn.Mn)()||(0,Nn.ru)()||(b.httpHeadersOverwriteParam="$httpHeaders");const A=a.join("");wt("Connection","Creating WebChannel: "+A,b);const L=l.createWebChannel(A,b);let z=!1,K=!1;const ae=new Dx({jr:Te=>{K?wt("Connection","Not sending because WebChannel is closed:",Te):(z||(wt("Connection","Opening WebChannel transport."),L.open(),z=!0),wt("Connection","WebChannel sending:",Te),L.send(Te))},Wr:()=>L.close()}),ie=(Te,dt,yt)=>{Te.listen(dt,Qt=>{try{yt(Qt)}catch(At){setTimeout(()=>{throw At},0)}})};return ie(L,Sg.EventType.OPEN,()=>{K||wt("Connection","WebChannel transport opened.")}),ie(L,Sg.EventType.CLOSE,()=>{K||(K=!0,wt("Connection","WebChannel transport closed"),ae.eo())}),ie(L,Sg.EventType.ERROR,Te=>{K||(K=!0,yl("Connection","WebChannel transport errored:",Te),ae.eo(new gt(Ge.UNAVAILABLE,"The operation could not be completed")))}),ie(L,Sg.EventType.MESSAGE,Te=>{var dt;if(!K){const yt=Te.data[0];Rn(!!yt);const Qt=yt,At=Qt.error||(null===(dt=Qt[0])||void 0===dt?void 0:dt.error);if(At){wt("Connection","WebChannel received error:",At);const Zt=At.status;let $t=function(gn){const fr=Ni[gn];if(void 0!==fr)return q_(fr)}(Zt),ln=At.message;void 0===$t&&($t=Ge.INTERNAL,ln="Unknown error status: "+Zt+" with message "+At.message),K=!0,ae.eo(new gt($t,ln)),L.close()}else wt("Connection","WebChannel received:",yt),ae.no(yt)}}),ie(p,by.STAT_EVENT,Te=>{Te.stat===Ww.PROXY?wt("Connection","Detected buffering proxy"):Te.stat===Ww.NOPROXY&&wt("Connection","Detected no buffering proxy")}),setTimeout(()=>{ae.Zr()},0),ae}}function hS(){return"undefined"!=typeof window?window:null}function xC(){return"undefined"!=typeof document?document:null}function eC(n){return new I1(n,!0)}class dT{constructor(e,t,r=1e3,a=1.5,l=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=a,this._o=l,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),a=Math.max(0,t-r);a>0&&wt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,a,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class dS{constructor(e,t,r,a,l,p,b,A){this.js=e,this.Ao=r,this.Ro=a,this.bo=l,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=b,this.listener=A,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new dT(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,rt.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,rt.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,rt.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===Ge.RESOURCE_EXHAUSTED?(ki(t.toString()),ki("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===Ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.Po===t&&this.Uo(r,a)},r=>{e(()=>{const a=new gt(Ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(a)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(a=>{r(()=>this.qo(a))}),this.stream.onMessage(a=>{r(()=>this.onMessage(a))})}xo(){var e=this;this.state=5,this.So.Io((0,rt.Z)(function*(){e.state=0,e.start()}))}qo(e){return wt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(wt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ax extends dS{constructor(e,t,r,a,l,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,p),this.wt=l}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function GI(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(A=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===A?1:"REMOVE"===A?2:"CURRENT"===A?3:"RESET"===A?4:Jt(),a=e.targetChange.targetIds||[],l=function(A,L){return A.dt?(Rn(void 0===L||"string"==typeof L),hi.fromBase64String(L||"")):(Rn(void 0===L||L instanceof Uint8Array),hi.fromUint8Array(L||new Uint8Array))}(n,e.targetChange.resumeToken),p=e.targetChange.cause,b=p&&function(A){const L=void 0===A.code?Ge.UNKNOWN:q_(A.code);return new gt(L,A.message||"")}(p);t=new HI(r,a,l,b||null)}else if("documentChange"in e){const r=e.documentChange,a=_c(n,r.document.name),l=Js(r.document.updateTime),p=new dr({mapValue:{fields:r.document.fields}}),b=Ir.newFoundDocument(a,l,p);t=new bb(r.targetIds||[],r.removedTargetIds||[],b.key,b)}else if("documentDelete"in e){const r=e.documentDelete,a=_c(n,r.document),l=r.readTime?Js(r.readTime):An.min(),p=Ir.newNoDocument(a,l);t=new bb([],r.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const r=e.documentRemove,a=_c(n,r.document);t=new bb([],r.removedTargetIds||[],a,null)}else{if(!("filter"in e))return Jt();{const r=e.filter,l=new EC(r.count||0);t=new Z_(r.targetId,l)}}var A;return t}(this.wt,e),r=function(a){if(!("targetChange"in a))return An.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?An.min():l.readTime?Js(l.readTime):An.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=Ky(this.wt),t.addTarget=function(a,l){let p;const b=l.target;return p=ld(b)?{documents:qI(a,b)}:{query:D1(a,b)},p.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?p.resumeToken=Eb(a,l.resumeToken):l.snapshotVersion.compareTo(An.min())>0&&(p.readTime=jf(a,l.snapshotVersion.toTimestamp())),p}(this.wt,e);const r=function WI(n,e){const t=function(r,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Jt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=Ky(this.wt),t.removeTarget=e,this.Mo(t)}}class xx extends dS{constructor(e,t,r,a,l,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,p),this.wt=l,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Rn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function X_(n,e){return n&&n.length>0?(Rn(void 0!==e),n.map(t=>function(r,a){let l=Js(r.updateTime?r.updateTime:a);return l.isEqual(An.min())&&(l=Js(a)),new fd(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Js(e.commitTime);return this.listener.Jo(r,t)}return Rn(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Ky(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>eh(this.wt,r))};this.Mo(t)}}class Mx extends class{}{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=a,this.Zo=!1}tu(){if(this.Zo)throw new gt(Ge.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.bo.ro(e,t,r,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===Ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new gt(Ge.UNKNOWN,a.toString())})}ao(e,t,r,a){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,p])=>this.bo.ao(e,t,r,l,p,a)).catch(l=>{throw"FirebaseError"===l.name?(l.code===Ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new gt(Ge.UNKNOWN,l.toString())})}terminate(){this.Zo=!0}}class Rx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(ki(t),this.su=!1):wt("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class kx{constructor(e,t,r,a,l){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=l,this.du.Br(b=>{r.enqueueAndForget((0,rt.Z)(function*(){var A;o0(p)&&(wt("RemoteStore","Restarting streams for network reachability change."),yield(A=(0,rt.Z)(function*(L){const z=Ut(L);z.lu.add(4),yield U1(z),z._u.set("Unknown"),z.lu.delete(4),yield tC(z)}),function(L){return A.apply(this,arguments)})(p))}))}),this._u=new Rx(r,a)}}function tC(n){return fT.apply(this,arguments)}function fT(){return fT=(0,rt.Z)(function*(n){if(o0(n))for(const e of n.fu)yield e(!0)}),fT.apply(this,arguments)}function U1(n){return pT.apply(this,arguments)}function pT(){return pT=(0,rt.Z)(function*(n){for(const e of n.fu)yield e(!1)}),pT.apply(this,arguments)}function MC(n,e){const t=Ut(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),yT(t)?mT(t):V1(t).Co()&&gT(t,e))}function nC(n,e){const t=Ut(n),r=V1(t);t.hu.delete(e),r.Co()&&fS(t,e),0===t.hu.size&&(r.Co()?r.ko():o0(t)&&t._u.set("Unknown"))}function gT(n,e){n.wu.Nt(e.targetId),V1(n).Qo(e)}function fS(n,e){n.wu.Nt(e),V1(n).jo(e)}function mT(n){n.wu=new IC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),V1(n).start(),n._u.iu()}function yT(n){return o0(n)&&!V1(n).Do()&&n.hu.size>0}function o0(n){return 0===Ut(n).lu.size}function pS(n){n.wu=void 0}function Nx(n){return vT.apply(this,arguments)}function vT(){return vT=(0,rt.Z)(function*(n){n.hu.forEach((e,t)=>{gT(n,e)})}),vT.apply(this,arguments)}function Px(n,e){return _T.apply(this,arguments)}function _T(){return _T=(0,rt.Z)(function*(n,e){pS(n),yT(n)?(n._u.uu(e),mT(n)):n._u.set("Unknown")}),_T.apply(this,arguments)}function Ox(n,e,t){return wT.apply(this,arguments)}function wT(){return wT=(0,rt.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof HI&&2===e.state&&e.cause)try{yield(r=(0,rt.Z)(function*(a,l){const p=l.cause;for(const b of l.targetIds)a.hu.has(b)&&(yield a.remoteSyncer.rejectListen(b,p),a.hu.delete(b),a.wu.removeTarget(b))}),function(a,l){return r.apply(this,arguments)})(n,e)}catch(r){wt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield RC(n,r)}else if(e instanceof bb?n.wu.Ut(e):e instanceof Z_?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(An.min()))try{const r=yield nS(n.localStore);t.compareTo(r)>=0&&(yield function(a,l){const p=a.wu.Yt(l);return p.targetChanges.forEach((b,A)=>{if(b.resumeToken.approximateByteSize()>0){const L=a.hu.get(A);L&&a.hu.set(A,L.withResumeToken(b.resumeToken,l))}}),p.targetMismatches.forEach(b=>{const A=a.hu.get(b);if(!A)return;a.hu.set(b,A.withResumeToken(hi.EMPTY_BYTE_STRING,A.snapshotVersion)),fS(a,b);const L=new h(A.target,b,1,A.sequenceNumber);gT(a,L)}),a.remoteSyncer.applyRemoteEvent(p)}(n,t))}catch(r){wt("RemoteStore","Failed to raise snapshot:",r),yield RC(n,r)}var r}),wT.apply(this,arguments)}function RC(n,e,t){return bT.apply(this,arguments)}function bT(){return bT=(0,rt.Z)(function*(n,e,t){if(!nd(e))throw e;n.lu.add(1),yield U1(n),n._u.set("Offline"),t||(t=()=>nS(n.localStore)),n.asyncQueue.enqueueRetryable((0,rt.Z)(function*(){wt("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield tC(n)}))}),bT.apply(this,arguments)}function gS(n,e){return e().catch(t=>RC(n,t,e))}function B1(n){return ET.apply(this,arguments)}function ET(){return ET=(0,rt.Z)(function*(n){const e=Ut(n),t=a0(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;Lx(e);)try{const a=yield bx(e.localStore,r);if(null===a){0===e.au.length&&t.ko();break}r=a.batchId,Fx(e,a)}catch(a){yield RC(e,a)}mS(e)&&yS(e)}),ET.apply(this,arguments)}function Lx(n){return o0(n)&&n.au.length<10}function Fx(n,e){n.au.push(e);const t=a0(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function mS(n){return o0(n)&&!a0(n).Do()&&n.au.length>0}function yS(n){a0(n).start()}function Ux(n){return IT.apply(this,arguments)}function IT(){return IT=(0,rt.Z)(function*(n){a0(n).Xo()}),IT.apply(this,arguments)}function Bx(n){return CT.apply(this,arguments)}function CT(){return CT=(0,rt.Z)(function*(n){const e=a0(n);for(const t of n.au)e.Ho(t.mutations)}),CT.apply(this,arguments)}function Vx(n,e,t){return TT.apply(this,arguments)}function TT(){return TT=(0,rt.Z)(function*(n,e,t){const r=n.au.shift(),a=i.from(r,e,t);yield gS(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield B1(n)}),TT.apply(this,arguments)}function jx(n,e){return DT.apply(this,arguments)}function DT(){return DT=(0,rt.Z)(function*(n,e){var t;e&&a0(n).zo&&(yield(t=(0,rt.Z)(function*(r,a){if(mb(l=a.code)&&l!==Ge.ABORTED){const p=r.au.shift();a0(r).No(),yield gS(r,()=>r.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield B1(r)}var l}),function(r,a){return t.apply(this,arguments)})(n,e)),mS(n)&&yS(n)}),DT.apply(this,arguments)}function vS(n,e){return ST.apply(this,arguments)}function ST(){return ST=(0,rt.Z)(function*(n,e){const t=Ut(n);t.asyncQueue.verifyOperationInProgress(),wt("RemoteStore","RemoteStore received new credentials");const r=o0(t);t.lu.add(3),yield U1(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield tC(t)}),ST.apply(this,arguments)}function AT(n,e){return xT.apply(this,arguments)}function xT(){return xT=(0,rt.Z)(function*(n,e){const t=Ut(n);e?(t.lu.delete(2),yield tC(t)):e||(t.lu.add(2),yield U1(t),t._u.set("Unknown"))}),xT.apply(this,arguments)}function V1(n){return n.mu||(n.mu=function(e,t,r){const a=Ut(e);return a.tu(),new Ax(t,a.bo,a.authCredentials,a.appCheckCredentials,a.wt,r)}(n.datastore,n.asyncQueue,{zr:Nx.bind(null,n),Jr:Px.bind(null,n),Go:Ox.bind(null,n)}),n.fu.push(function(){var e=(0,rt.Z)(function*(t){t?(n.mu.No(),yT(n)?mT(n):n._u.set("Unknown")):(yield n.mu.stop(),pS(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function a0(n){return n.gu||(n.gu=function(e,t,r){const a=Ut(e);return a.tu(),new xx(t,a.bo,a.authCredentials,a.appCheckCredentials,a.wt,r)}(n.datastore,n.asyncQueue,{zr:Ux.bind(null,n),Jr:jx.bind(null,n),Yo:Bx.bind(null,n),Jo:Vx.bind(null,n)}),n.fu.push(function(){var e=(0,rt.Z)(function*(t){t?(n.gu.No(),yield B1(n)):(yield n.gu.stop(),n.au.length>0&&(wt("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class MT{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,r,a,l){const p=Date.now()+r,b=new MT(e,t,p,a,l);return b.start(r),b}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gt(Ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function j1(n,e){if(ki("AsyncQueue",`${e}: ${n}`),nd(n))return new gt(Ge.UNAVAILABLE,`${e}: ${n}`);throw n}class $1{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ot.comparator(t.key,r.key):(t,r)=>Ot.comparator(t.key,r.key),this.keyedMap=zy(),this.sortedSet=new Ei(this.comparator)}static emptySet(e){return new $1(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $1)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new $1;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class _S{constructor(){this.yu=new Ei(Ot.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Jt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class H1{constructor(e,t,r,a,l,p,b,A){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=p,this.syncStateChanged=b,this.excludesMetadataChanges=A}static fromInitialDocuments(e,t,r,a){const l=[];return t.forEach(p=>{l.push({type:0,doc:p})}),new H1(e,t,$1.emptySet(t),l,r,a,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class $x{constructor(){this.Iu=void 0,this.listeners=[]}}class Hx{constructor(){this.queries=new md(e=>_1(e),Uy),this.onlineState="Unknown",this.Tu=new Set}}function RT(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,rt.Z)(function*(n,e){const t=Ut(n),r=e.query;let a=!1,l=t.queries.get(r);if(l||(a=!0,l=new $x),a)try{l.Iu=yield t.onListen(r)}catch(p){const b=j1(p,`Initialization of query '${V_(e.query)}' failed`);return void e.onError(b)}t.queries.set(r,l),l.listeners.push(e),e.Eu(t.onlineState),l.Iu&&e.Au(l.Iu)&&OT(t)}),kT.apply(this,arguments)}function NT(n,e){return PT.apply(this,arguments)}function PT(){return PT=(0,rt.Z)(function*(n,e){const t=Ut(n),r=e.query;let a=!1;const l=t.queries.get(r);if(l){const p=l.listeners.indexOf(e);p>=0&&(l.listeners.splice(p,1),a=0===l.listeners.length)}if(a)return t.queries.delete(r),t.onUnlisten(r)}),PT.apply(this,arguments)}function zx(n,e){const t=Ut(n);let r=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const b of p.listeners)b.Au(a)&&(r=!0);p.Iu=a}}r&&OT(t)}function Gx(n,e,t){const r=Ut(n),a=r.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);r.queries.delete(e)}function OT(n){n.Tu.forEach(e=>{e.next()})}class LT{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)3!==a.type&&r.push(a);e=new H1(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=H1.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class qx{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class wS{constructor(e){this.wt=e}Wi(e){return _c(this.wt,e)}zi(e){return e.metadata.exists?Yy(this.wt,e.document,!1):Ir.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Js(e)}}class Wx{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bS(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=ir.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new wS(this.wt);for(const a of e)if(a.metadata.queries){const l=r.Wi(a.metadata.name);for(const p of a.metadata.queries){const b=(t.get(p)||Gn()).add(l);t.set(p,b)}}return t}complete(){var e=this;return(0,rt.Z)(function*(){const t=yield function Ex(n,e,t,r){return oT.apply(this,arguments)}(e.localStore,new wS(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const a of e.queries)yield Ix(e.localStore,a,r.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function bS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class ES{constructor(e){this.key=e}}class IS{constructor(e){this.key=e}}class CS{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Gn(),this.mutatedKeys=Gn(),this.Lu=j_(e),this.Uu=new $1(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new _S,a=t?t.Uu:this.Uu;let l=t?t.mutatedKeys:this.mutatedKeys,p=a,b=!1;const A="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,L="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((z,K)=>{const ae=a.get(z),ie=By(this.query,K)?K:null,Te=!!ae&&this.mutatedKeys.has(ae.key),dt=!!ie&&(ie.hasLocalMutations||this.mutatedKeys.has(ie.key)&&ie.hasCommittedMutations);let yt=!1;ae&&ie?ae.data.isEqual(ie.data)?Te!==dt&&(r.track({type:3,doc:ie}),yt=!0):this.Qu(ae,ie)||(r.track({type:2,doc:ie}),yt=!0,(A&&this.Lu(ie,A)>0||L&&this.Lu(ie,L)<0)&&(b=!0)):!ae&&ie?(r.track({type:0,doc:ie}),yt=!0):ae&&!ie&&(r.track({type:1,doc:ae}),yt=!0,(A||L)&&(b=!0)),yt&&(ie?(p=p.add(ie),l=dt?l.add(z):l.delete(z)):(p=p.delete(z),l=l.delete(z)))}),null!==this.query.limit)for(;p.size>this.query.limit;){const z="F"===this.query.limitType?p.last():p.first();p=p.delete(z.key),l=l.delete(z.key),r.track({type:1,doc:z})}return{Uu:p,Gu:r,Oi:b,mutatedKeys:l}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const a=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const l=e.Gu.pu();l.sort((L,z)=>function(K,ae){const ie=Te=>{switch(Te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jt()}};return ie(K)-ie(ae)}(L.type,z.type)||this.Lu(L.doc,z.doc)),this.ju(r);const p=t?this.Wu():[],b=0===this.Bu.size&&this.current?1:0,A=b!==this.$u;return this.$u=b,0!==l.length||A?{snapshot:new H1(this.query,e.Uu,a,l,e.mutatedKeys,0===b,A,!1),zu:p}:{zu:p}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new _S,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Gn(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new IS(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new ES(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Gn();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return H1.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class Kx{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Zx{constructor(e){this.key=e,this.Xu=!1}}class Yx{constructor(e,t,r,a,l,p){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=p,this.Zu={},this.tc=new md(b=>_1(b),Uy),this.ec=new Map,this.nc=new Set,this.sc=new Ei(Ot.comparator),this.ic=new Map,this.rc=new Rt,this.oc={},this.uc=new Map,this.cc=eo.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function Qx(n,e){return FT.apply(this,arguments)}function FT(){return FT=(0,rt.Z)(function*(n,e){const t=oD(n);let r,a;const l=t.tc.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),a=l.view.Yu();else{const p=yield L1(t.localStore,Hu(e));t.isPrimaryClient&&MC(t.remoteStore,p);const b=t.sharedClientState.addLocalQueryTarget(p.targetId);r=p.targetId,a=yield UT(t,e,r,"current"===b)}return a}),FT.apply(this,arguments)}function UT(n,e,t,r){return BT.apply(this,arguments)}function BT(){return BT=(0,rt.Z)(function*(n,e,t,r){n.hc=(z,K,ae)=>{return(ie=(0,rt.Z)(function*(Te,dt,yt,Qt){let At=dt.view.Ku(yt);At.Oi&&(At=yield DC(Te.localStore,dt.query,!1).then(({documents:ln})=>dt.view.Ku(ln,At)));const Zt=Qt&&Qt.targetChanges.get(dt.targetId),$t=dt.view.applyChanges(At,Te.isPrimaryClient,Zt);return ZT(Te,dt.targetId,$t.zu),$t.snapshot}),function(Te,dt,yt,Qt){return ie.apply(this,arguments)})(n,z,K,ae);var ie};const a=yield DC(n.localStore,e,!0),l=new CS(e,a.ji),p=l.Ku(a.documents),b=qy.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),A=l.applyChanges(p,n.isPrimaryClient,b);ZT(n,t,A.zu);const L=new Kx(e,t,l);return n.tc.set(e,L),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),A.snapshot}),BT.apply(this,arguments)}function Xx(n,e){return VT.apply(this,arguments)}function VT(){return VT=(0,rt.Z)(function*(n,e){const t=Ut(n),r=t.tc.get(e),a=t.ec.get(r.targetId);if(a.length>1)return t.ec.set(r.targetId,a.filter(l=>!Uy(l,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield F1(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),nC(t.remoteStore,r.targetId),z1(t,r.targetId)}).catch(td))):(z1(t,r.targetId),yield F1(t.localStore,r.targetId,!0))}),VT.apply(this,arguments)}function jT(){return jT=(0,rt.Z)(function*(n,e,t){const r=aD(n);try{const a=yield function(l,p){const b=Ut(l),A=li.now(),L=p.reduce((ae,ie)=>ae.add(ie.key),Gn());let z,K;return b.persistence.runTransaction("Locally write mutations","readwrite",ae=>{let ie=na(),Te=Gn();return b.Ui.getEntries(ae,L).next(dt=>{ie=dt,ie.forEach((yt,Qt)=>{Qt.isValidDocument()||(Te=Te.add(yt))})}).next(()=>b.localDocuments.getOverlayedDocuments(ae,ie)).next(dt=>{z=dt;const yt=[];for(const Qt of p){const At=bC(Qt,z.get(Qt.key).overlayedDocument);null!=At&&yt.push(new iu(Qt.key,At,Xl(At.value.mapValue),Kr.exists(!0)))}return b.mutationQueue.addMutationBatch(ae,A,yt,p)}).next(dt=>{K=dt;const yt=dt.applyToLocalDocumentSet(z,Te);return b.documentOverlayCache.saveOverlays(ae,dt.batchId,yt)})}).then(()=>({batchId:K.batchId,changes:W_(z)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(l,p,b){let A=l.oc[l.currentUser.toKey()];A||(A=new Ei(zn)),A=A.insert(p,b),l.oc[l.currentUser.toKey()]=A}(r,a.batchId,t),yield ev(r,a.changes),yield B1(r.remoteStore)}catch(a){const l=j1(a,"Failed to persist write");t.reject(l)}}),jT.apply(this,arguments)}function TS(n,e){return $T.apply(this,arguments)}function $T(){return $T=(0,rt.Z)(function*(n,e){const t=Ut(n);try{const r=yield wx(t.localStore,e);e.targetChanges.forEach((a,l)=>{const p=t.ic.get(l);p&&(Rn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.Xu=!0:a.modifiedDocuments.size>0?Rn(p.Xu):a.removedDocuments.size>0&&(Rn(p.Xu),p.Xu=!1))}),yield ev(t,r,e)}catch(r){yield td(r)}}),$T.apply(this,arguments)}function DS(n,e,t){const r=Ut(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const a=[];r.tc.forEach((l,p)=>{const b=p.view.Eu(e);b.snapshot&&a.push(b.snapshot)}),function(l,p){const b=Ut(l);b.onlineState=p;let A=!1;b.queries.forEach((L,z)=>{for(const K of z.listeners)K.Eu(p)&&(A=!0)}),A&&OT(b)}(r.eventManager,e),a.length&&r.Zu.Go(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function eM(n,e,t){return HT.apply(this,arguments)}function HT(){return HT=(0,rt.Z)(function*(n,e,t){const r=Ut(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.ic.get(e),l=a&&a.key;if(l){let p=new Ei(Ot.comparator);p=p.insert(l,Ir.newNoDocument(l,An.min()));const b=Gn().add(l),A=new Vf(An.min(),new Map,new br(zn),p,b);yield TS(r,A),r.sc=r.sc.remove(l),r.ic.delete(e),YT(r)}else yield F1(r.localStore,e,!1).then(()=>z1(r,e,t)).catch(td)}),HT.apply(this,arguments)}function tM(n,e){return zT.apply(this,arguments)}function zT(){return zT=(0,rt.Z)(function*(n,e){const t=Ut(n),r=e.batch.batchId;try{const a=yield _x(t.localStore,e);KT(t,r,null),WT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ev(t,a)}catch(a){yield td(a)}}),zT.apply(this,arguments)}function nM(n,e,t){return GT.apply(this,arguments)}function GT(){return GT=(0,rt.Z)(function*(n,e,t){const r=Ut(n);try{const a=yield function(l,p){const b=Ut(l);return b.persistence.runTransaction("Reject batch","readwrite-primary",A=>{let L;return b.mutationQueue.lookupMutationBatch(A,p).next(z=>(Rn(null!==z),L=z.keys(),b.mutationQueue.removeMutationBatch(A,z))).next(()=>b.mutationQueue.performConsistencyCheck(A)).next(()=>b.documentOverlayCache.removeOverlaysForBatchId(A,L,p)).next(()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(A,L)).next(()=>b.localDocuments.getDocuments(A,L))})}(r.localStore,e);KT(r,e,t),WT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ev(r,a)}catch(a){yield td(a)}}),GT.apply(this,arguments)}function qT(){return qT=(0,rt.Z)(function*(n,e){const t=Ut(n);o0(t.remoteStore)||wt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const p=Ut(l);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",b=>p.mutationQueue.getHighestUnacknowledgedBatchId(b))}(t.localStore);if(-1===r)return void e.resolve();const a=t.uc.get(r)||[];a.push(e),t.uc.set(r,a)}catch(r){const a=j1(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),qT.apply(this,arguments)}function WT(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function KT(n,e,t){const r=Ut(n);let a=r.oc[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.oc[r.currentUser.toKey()]=a}}function z1(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||SS(n,r)})}function SS(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(nC(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),YT(n))}function ZT(n,e,t){for(const r of t)r instanceof ES?(n.rc.addReference(r.key,e),iM(n,r)):r instanceof IS?(wt("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||SS(n,r.key)):Jt()}function iM(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(wt("SyncEngine","New document in limbo: "+t),n.nc.add(r),YT(n))}function YT(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new Ot(ir.fromString(e)),r=n.cc.next();n.ic.set(r,new Zx(t)),n.sc=n.sc.insert(t,r),MC(n.remoteStore,new h(Hu(Oy(t.path)),r,2,ta.ot))}}function ev(n,e,t){return QT.apply(this,arguments)}function QT(){return QT=(0,rt.Z)(function*(n,e,t){const r=Ut(n),a=[],l=[],p=[];var b;r.tc.isEmpty()||(r.tc.forEach((b,A)=>{p.push(r.hc(A,e,t).then(L=>{if(L){r.isPrimaryClient&&r.sharedClientState.updateQueryState(A.targetId,L.fromCache?"not-current":"current"),a.push(L);const z=kb.Vi(A.targetId,L);l.push(z)}}))}),yield Promise.all(p),r.Zu.Go(a),yield(b=(0,rt.Z)(function*(A,L){const z=Ut(A);try{yield z.persistence.runTransaction("notifyLocalViewChanges","readwrite",K=>Ve.forEach(L,ae=>Ve.forEach(ae.Pi,ie=>z.persistence.referenceDelegate.addReference(K,ae.targetId,ie)).next(()=>Ve.forEach(ae.vi,ie=>z.persistence.referenceDelegate.removeReference(K,ae.targetId,ie)))))}catch(K){if(!nd(K))throw K;wt("LocalStore","Failed to update sequence numbers: "+K)}for(const K of L){const ae=K.targetId;if(!K.fromCache){const ie=z.$i.get(ae),dt=ie.withLastLimboFreeSnapshotVersion(ie.snapshotVersion);z.$i=z.$i.insert(ae,dt)}}}),function(A,L){return b.apply(this,arguments)})(r.localStore,l))}),QT.apply(this,arguments)}function sM(n,e){return XT.apply(this,arguments)}function XT(){return XT=(0,rt.Z)(function*(n,e){const t=Ut(n);if(!t.currentUser.isEqual(e)){wt("SyncEngine","User change. New user:",e.toKey());const r=yield tS(t.localStore,e);t.currentUser=e,(a=t).uc.forEach(p=>{p.forEach(b=>{b.reject(new gt(Ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ev(t,r.Ki)}var a}),XT.apply(this,arguments)}function oM(n,e){const t=Ut(n),r=t.ic.get(e);if(r&&r.Xu)return Gn().add(r.key);{let a=Gn();const l=t.ec.get(e);if(!l)return a;for(const p of l){const b=t.tc.get(p);a=a.unionWith(b.view.qu)}return a}}function aM(n,e){return JT.apply(this,arguments)}function JT(){return JT=(0,rt.Z)(function*(n,e){const t=Ut(n),r=yield DC(t.localStore,e.query,!0),a=e.view.Ju(r);return t.isPrimaryClient&&ZT(t,e.targetId,a.zu),a}),JT.apply(this,arguments)}function uM(n,e){return eD.apply(this,arguments)}function eD(){return eD=(0,rt.Z)(function*(n,e){const t=Ut(n);return sS(t.localStore,e).then(r=>ev(t,r))}),eD.apply(this,arguments)}function cM(n,e,t,r){return tD.apply(this,arguments)}function tD(){return tD=(0,rt.Z)(function*(n,e,t,r){const a=Ut(n),l=yield function(p,b){const A=Ut(p),L=Ut(A.mutationQueue);return A.persistence.runTransaction("Lookup mutation documents","readonly",z=>L.yn(z,b).next(K=>K?A.localDocuments.getDocuments(z,K):Ve.resolve(null)))}(a.localStore,e);var b;null!==l?("pending"===t?yield B1(a.remoteStore):"acknowledged"===t||"rejected"===t?(KT(a,e,r||null),WT(a,e),b=e,Ut(Ut(a.localStore).mutationQueue).In(b)):Jt(),yield ev(a,l)):wt("SyncEngine","Cannot apply mutation batch with id: "+e)}),tD.apply(this,arguments)}function nD(){return nD=(0,rt.Z)(function*(n,e){const t=Ut(n);if(oD(t),aD(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),a=yield AS(t,r.toArray());t.ac=!0,yield AT(t.remoteStore,!0);for(const l of a)MC(t.remoteStore,l)}else if(!1===e&&!1!==t.ac){const r=[];let a=Promise.resolve();t.ec.forEach((l,p)=>{t.sharedClientState.isLocalQueryTarget(p)?r.push(p):a=a.then(()=>(z1(t,p),F1(t.localStore,p,!0))),nC(t.remoteStore,p)}),yield a,yield AS(t,r),function(l){const p=Ut(l);p.ic.forEach((b,A)=>{nC(p.remoteStore,A)}),p.rc.cs(),p.ic=new Map,p.sc=new Ei(Ot.comparator)}(t),t.ac=!1,yield AT(t.remoteStore,!1)}}),nD.apply(this,arguments)}function AS(n,e,t){return rD.apply(this,arguments)}function rD(){return rD=(0,rt.Z)(function*(n,e,t){const r=Ut(n),a=[],l=[];for(const p of e){let b;const A=r.ec.get(p);if(A&&0!==A.length){b=yield L1(r.localStore,Hu(A[0]));for(const L of A){const z=r.tc.get(L),K=yield aM(r,z);K.snapshot&&l.push(K.snapshot)}}else{const L=yield iS(r.localStore,p);b=yield L1(r.localStore,L),yield UT(r,xS(L),p,!1)}a.push(b)}return r.Zu.Go(l),a}),rD.apply(this,arguments)}function xS(n){return y1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function hM(n){const e=Ut(n);return Ut(Ut(e.localStore).persistence).Ri()}function dM(n,e,t,r){return iD.apply(this,arguments)}function iD(){return iD=(0,rt.Z)(function*(n,e,t,r){const a=Ut(n);if(a.ac)return void wt("SyncEngine","Ignoring unexpected query state notification.");const l=a.ec.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const p=yield sS(a.localStore,Vy(l[0])),b=Vf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ev(a,p,b);break}case"rejected":yield F1(a.localStore,e,!0),z1(a,e,r);break;default:Jt()}}),iD.apply(this,arguments)}function fM(n,e,t){return sD.apply(this,arguments)}function sD(){return sD=(0,rt.Z)(function*(n,e,t){const r=oD(n);if(r.ac){for(const a of e){if(r.ec.has(a)){wt("SyncEngine","Adding an already active target "+a);continue}const l=yield iS(r.localStore,a),p=yield L1(r.localStore,l);yield UT(r,xS(l),p.targetId,!1),MC(r.remoteStore,p)}for(const a of t)r.ec.has(a)&&(yield F1(r.localStore,a,!1).then(()=>{nC(r.remoteStore,a),z1(r,a)}).catch(td))}}),sD.apply(this,arguments)}function oD(n){const e=Ut(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=TS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eM.bind(null,e),e.Zu.Go=zx.bind(null,e.eventManager),e.Zu.lc=Gx.bind(null,e.eventManager),e}function aD(n){const e=Ut(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nM.bind(null,e),e}class MS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,rt.Z)(function*(){t.wt=eC(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return eS(this.persistence,new O1,e.initialUser,this.wt)}_c(e){return new Cr(vd.Ms,this.wt)}dc(e){return new cS}terminate(){var e=this;return(0,rt.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class RS extends MS{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,rt.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield aD(r.yc.syncEngine),yield B1(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return eS(this.persistence,new O1,e.initialUser,this.wt)}mc(e,t){return new XD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new wC(t,this.persistence);return new UI(e.asyncQueue,r)}_c(e){const t=Rb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?cr.withCacheSize(this.cacheSizeBytes):cr.DEFAULT;return new Mb(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,hS(),xC(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new cS}}class gM extends RS{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,rt.Z)(function*(){yield t().call(r,e);const a=r.yc.syncEngine;r.sharedClientState instanceof hT&&(r.sharedClientState.syncEngine={kr:cM.bind(null,a),Or:dM.bind(null,a),Mr:fM.bind(null,a),Ri:hM.bind(null,a),Nr:uM.bind(null,a)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var l=(0,rt.Z)(function*(p){yield function lM(n,e){return nD.apply(this,arguments)}(r.yc.syncEngine,p),r.gcScheduler&&(p&&!r.gcScheduler.started?r.gcScheduler.start():p||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(p&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():p||r.indexBackfillerScheduler.stop())});return function(p){return l.apply(this,arguments)}}())})()}dc(e){const t=hS();if(!hT.V(t))throw new gt(Ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Rb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new hT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class uD{initialize(e,t){var r=this;return(0,rt.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=a=>DS(r.syncEngine,a,1),r.remoteStore.remoteSyncer.handleCredentialChange=sM.bind(null,r.syncEngine),yield AT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Hx}createDatastore(e){const t=eC(e.databaseInfo.databaseId),r=new Sx(e.databaseInfo);return new Mx(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,a=e.asyncQueue,l=b=>DS(this.syncEngine,b,0),p=lS.V()?new lS:new Cx,new kx(t,r,a,l,p);var t,r,a,l,p}createSyncEngine(e,t){return function(r,a,l,p,b,A,L){const z=new Yx(r,a,l,p,b,A);return L&&(z.ac=!0),z}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,rt.Z)(function*(t){const r=Ut(t);wt("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield U1(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function kS(n,e=10240){let t=0;return{read:()=>(0,rt.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,rt.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class kC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class mM{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new yr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,rt.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,rt.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,rt.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),a=Number(r);isNaN(a)&&e.Pc(`length string (${r}) is not valid number`);const l=yield e.vc(a);return new qx(JSON.parse(l),t.length+a)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,rt.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,rt.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,rt.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class yM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,rt.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new gt(Ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(a=(0,rt.Z)(function*(l,p){const b=Ut(l),A=Ky(b.wt)+"/documents",L={documents:p.map(ie=>Wy(b.wt,ie))},z=yield b.ao("BatchGetDocuments",A,L,p.length),K=new Map;z.forEach(ie=>{const Te=function Q_(n,e){return"found"in e?function(t,r){Rn(!!r.found);const a=_c(t,r.found.name),l=Js(r.found.updateTime),p=new dr({mapValue:{fields:r.found.fields}});return Ir.newFoundDocument(a,l,p)}(n,e):"missing"in e?function(t,r){Rn(!!r.missing),Rn(!!r.readTime);const a=_c(t,r.missing),l=Js(r.readTime);return Ir.newNoDocument(a,l)}(n,e):Jt()}(b.wt,ie);K.set(Te.key.toString(),Te)});const ae=[];return p.forEach(ie=>{const Te=K.get(ie.toString());Rn(!!Te),ae.push(Te)}),ae}),function(l,p){return a.apply(this,arguments)})(t.datastore,e);var a;return r.forEach(a=>t.recordVersion(a)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new gd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,rt.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,a)=>{const l=Ot.fromPath(a);e.mutations.push(new Bf(l,e.precondition(l)))}),yield(r=(0,rt.Z)(function*(a,l){const p=Ut(a),b=Ky(p.wt)+"/documents",A={writes:l.map(L=>eh(p.wt,L))};yield p.ro("Commit",b,A)}),function(a,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Jt();t=An.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new gt(Ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Kr.updateTime(t):Kr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(An.min()))throw new gt(Ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kr.updateTime(t)}return Kr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class vM{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.Dc=r.maxAttempts,this.So=new dT(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,rt.Z)(function*(){const t=new yM(e.datastore),r=e.xc(t);r&&r.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.Nc(l)}))}).catch(a=>{e.Nc(a)})}))}xc(e){try{const t=this.updateFunction(e);return!vo(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!mb(t)}return!1}}class _M{constructor(e,t,r,a){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=Ys.UNAUTHENTICATED,this.clientId=a1.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var p=(0,rt.Z)(function*(b){wt("FirestoreClient","Received user=",b.uid),yield l.authCredentialListener(b),l.user=b});return function(b){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(r,p=>(wt("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}getConfiguration(){var e=this;return(0,rt.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new gt(Ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,rt.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=j1(r,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function NS(n,e){return cD.apply(this,arguments)}function cD(){return cD=(0,rt.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),wt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,rt.Z)(function*(l){r.isEqual(l)||(yield tS(e.localStore,l),r=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),cD.apply(this,arguments)}function PS(n,e){return lD.apply(this,arguments)}function lD(){return lD=(0,rt.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield hD(n);wt("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(a=>vS(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,l)=>vS(e.remoteStore,l)),n.onlineComponents=e}),lD.apply(this,arguments)}function hD(n){return dD.apply(this,arguments)}function dD(){return dD=(0,rt.Z)(function*(n){return n.offlineComponents||(wt("FirestoreClient","Using default OfflineComponentProvider"),yield NS(n,new MS)),n.offlineComponents}),dD.apply(this,arguments)}function NC(n){return fD.apply(this,arguments)}function fD(){return fD=(0,rt.Z)(function*(n){return n.onlineComponents||(wt("FirestoreClient","Using default OnlineComponentProvider"),yield PS(n,new uD)),n.onlineComponents}),fD.apply(this,arguments)}function OS(n){return hD(n).then(e=>e.persistence)}function pD(n){return hD(n).then(e=>e.localStore)}function LS(n){return NC(n).then(e=>e.remoteStore)}function gD(n){return NC(n).then(e=>e.syncEngine)}function G1(n){return mD.apply(this,arguments)}function mD(){return mD=(0,rt.Z)(function*(n){const e=yield NC(n),t=e.eventManager;return t.onListen=Qx.bind(null,e.syncEngine),t.onUnlisten=Xx.bind(null,e.syncEngine),t}),mD.apply(this,arguments)}function FS(n,e,t={}){const r=new yr;return n.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return function(a,l,p,b,A){const L=new kC({next:K=>{l.enqueueAndForget(()=>NT(a,z));const ae=K.docs.has(p);!ae&&K.fromCache?A.reject(new gt(Ge.UNAVAILABLE,"Failed to get document because the client is offline.")):ae&&K.fromCache&&b&&"server"===b.source?A.reject(new gt(Ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):A.resolve(K)},error:K=>A.reject(K)}),z=new LT(Oy(p.path),L,{includeMetadataChanges:!0,Du:!0});return RT(a,z)}(yield G1(n),n.asyncQueue,e,t,r)})),r.promise}function US(n,e,t={}){const r=new yr;return n.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return function(a,l,p,b,A){const L=new kC({next:K=>{l.enqueueAndForget(()=>NT(a,z)),K.fromCache&&"server"===b.source?A.reject(new gt(Ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):A.resolve(K)},error:K=>A.reject(K)}),z=new LT(p,L,{includeMetadataChanges:!0,Du:!0});return RT(a,z)}(yield G1(n),n.asyncQueue,e,t,r)})),r.promise}const BS=new Map;function yD(n,e,t){if(!t)throw new gt(Ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function VS(n,e,t,r){if(!0===e&&!0===r)throw new gt(Ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function jS(n){if(!Ot.isDocumentKey(n))throw new gt(Ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $S(n){if(Ot.isDocumentKey(n))throw new gt(Ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function PC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Jt()}function vr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new gt(Ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=PC(n);throw new gt(Ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function HS(n,e){if(e<=0)throw new gt(Ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class zS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new gt(Ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new gt(Ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,VS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rC{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zS({}),this._settingsFrozen=!1,e instanceof _l?this._databaseId=e:(this._app=e,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new gt(Ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _l(a.options.projectId)}(e))}get app(){if(!this._app)throw new gt(Ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new gt(Ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new o1;switch(t.type){case"gapi":const r=t.client;return Rn(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Iy(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new gt(Ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=BS.get(e);t&&(wt("ComponentProvider","Removing Datastore"),BS.delete(e),t.terminate())}(this),Promise.resolve()}}class qi{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qi(this.firestore,e,this._key)}}class Wu{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wu(this.firestore,e,this._query)}}class Xg extends Wu{constructor(e,t,r){super(e,t,Oy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qi(this.firestore,null,new Ot(e))}withConverter(e){return new Xg(this.firestore,e,this._path)}}function GS(n,e,...t){if(n=(0,Nn.m9)(n),yD("collection","path",e),n instanceof rC){const r=ir.fromString(e,...t);return $S(r),new Xg(n,null,r)}{if(!(n instanceof qi||n instanceof Xg))throw new gt(Ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ir.fromString(e,...t));return $S(r),new Xg(n.firestore,null,r)}}function OC(n,e,...t){if(n=(0,Nn.m9)(n),1===arguments.length&&(e=a1.I()),yD("doc","path",e),n instanceof rC){const r=ir.fromString(e,...t);return jS(r),new qi(n,null,new Ot(r))}{if(!(n instanceof qi||n instanceof Xg))throw new gt(Ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ir.fromString(e,...t));return jS(r),new qi(n.firestore,n instanceof Xg?n.converter:null,new Ot(r))}}function qS(n,e){return n=(0,Nn.m9)(n),e=(0,Nn.m9)(e),(n instanceof qi||n instanceof Xg)&&(e instanceof qi||e instanceof Xg)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function WS(n,e){return n=(0,Nn.m9)(n),e=(0,Nn.m9)(e),n instanceof Wu&&e instanceof Wu&&n.firestore===e.firestore&&Uy(n._query,e._query)&&n.converter===e.converter}class MM{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new dT(this,"async_queue_retry"),this.Kc=()=>{const t=xC();t&&wt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=xC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=xC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new yr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,rt.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!nd(t))throw t;wt("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,ki("INTERNAL UNHANDLED ERROR: ",function(l){let p=l.message||"";return l.stack&&(p=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),p}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const a=MT.createAndSchedule(this,e,t,r,l=>this.Wc(l));return this.$c.push(a),a}Gc(){this.Bc&&Jt()}verifyOperationInProgress(){}zc(){var e=this;return(0,rt.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function vD(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const a of["next","error","complete"])if(a in r&&"function"==typeof r[a])return!0;return!1}(n)}class RM{constructor(){this._progressObserver={},this._taskCompletionResolver=new yr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ps extends rC{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new MM,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||KS(this),this._firestoreClient.terminate()}}function Vo(n){return n._firestoreClient||KS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function KS(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Ng(n._databaseId,l,n._persistenceKey,(b=t).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,b.useFetchStreams));var l,b;n._firestoreClient=new _M(n._authCredentials,n._appCheckCredentials,n._queue,r)}function ZS(n,e,t){const r=new yr;return n.asyncQueue.enqueue((0,rt.Z)(function*(){try{yield NS(n,t),yield PS(n,e),r.resolve()}catch(a){const l=a;if(!("FirebaseError"===(p=l).name?p.code===Ge.FAILED_PRECONDITION||p.code===Ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&p instanceof DOMException)||22===p.code||20===p.code||11===p.code))throw l;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+l),r.reject(l)}var p})).then(()=>r.promise)}function YS(n){if(n._initialized||n._terminated)throw new gt(Ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class tv{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new gt(Ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Jg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jg(hi.fromBase64String(e))}catch(t){throw new gt(Ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jg(hi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Nb{constructor(e){this._methodName=e}}class LC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new gt(Ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new gt(Ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return zn(this._lat,e._lat)||zn(this._long,e._long)}}const jM=/^__.*__$/;class $M{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new iu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ug(e,this.data,t,this.fieldTransforms)}}class QS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new iu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function XS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jt()}}class FC{constructor(e,t,r,a,l,p){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=a,void 0===l&&this.Xc(),this.fieldTransforms=l||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new FC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ta({path:r,na:!1});return a.sa(e),a}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ta({path:r,na:!1});return a.Xc(),a}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return VC(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(XS(this.Zc)&&jM.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class HM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||eC(e)}aa(e,t,r,a=!1){return new FC({Zc:e,methodName:t,ca:r,path:Hi.emptyPath(),na:!1,ua:a},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Pb(n){const e=n._freezeSettings(),t=eC(n._databaseId);return new HM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function UC(n,e,t,r,a,l={}){const p=n.aa(l.merge||l.mergeFields?2:0,e,t,a);ED("Data must be an object, but it was:",p,r);const b=tA(r,p);let A,L;if(l.merge)A=new yo(p.fieldMask),L=p.fieldTransforms;else if(l.mergeFields){const z=[];for(const K of l.mergeFields){const ae=ID(e,K,t);if(!p.contains(ae))throw new gt(Ge.INVALID_ARGUMENT,`Field '${ae}' is specified in your field mask but missing from your input data.`);rA(z,ae)||z.push(ae)}A=new yo(z),L=p.fieldTransforms.filter(K=>A.covers(K.field))}else A=null,L=p.fieldTransforms;return new $M(new dr(b),A,L)}class iC extends Nb{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof iC}}function JS(n,e,t){return new FC({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class _D extends Nb{_toFieldTransform(e){return new $y(e.path,new zi)}isEqual(e){return e instanceof _D}}class zM extends Nb{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=JS(this,e,!0),r=this.ha.map(l=>Ob(l,t)),a=new Da(r);return new $y(e.path,a)}isEqual(e){return this===e}}class GM extends Nb{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=JS(this,e,!0),r=this.ha.map(l=>Ob(l,t)),a=new Xs(r);return new $y(e.path,a)}isEqual(e){return this===e}}class qM extends Nb{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Gu(e.wt,db(e.wt,this.la));return new $y(e.path,t)}isEqual(e){return this===e}}function wD(n,e,t,r){const a=n.aa(1,e,t);ED("Data must be an object, but it was:",a,r);const l=[],p=dr.empty();rd(r,(A,L)=>{const z=BC(e,A,t);L=(0,Nn.m9)(L);const K=a.ia(z);if(L instanceof iC)l.push(z);else{const ae=Ob(L,K);null!=ae&&(l.push(z),p.set(z,ae))}});const b=new yo(l);return new QS(p,b,a.fieldTransforms)}function bD(n,e,t,r,a,l){const p=n.aa(1,e,t),b=[ID(e,r,t)],A=[a];if(l.length%2!=0)throw new gt(Ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ae=0;ae<l.length;ae+=2)b.push(ID(e,l[ae])),A.push(l[ae+1]);const L=[],z=dr.empty();for(let ae=b.length-1;ae>=0;--ae)if(!rA(L,b[ae])){const ie=b[ae];let Te=A[ae];Te=(0,Nn.m9)(Te);const dt=p.ia(ie);if(Te instanceof iC)L.push(ie);else{const yt=Ob(Te,dt);null!=yt&&(L.push(ie),z.set(ie,yt))}}const K=new yo(L);return new QS(z,K,p.fieldTransforms)}function eA(n,e,t,r=!1){return Ob(t,n.aa(r?4:3,e))}function Ob(n,e){if(nA(n=(0,Nn.m9)(n)))return ED("Unsupported field value:",e,n),tA(n,e);if(n instanceof Nb)return function(t,r){if(!XS(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const a=[];let l=0;for(const p of t){let b=Ob(p,r.ra(l));null==b&&(b={nullValue:"NULL_VALUE"}),a.push(b),l++}return{arrayValue:{values:a}}}(n,e)}return function(t,r){if(null===(t=(0,Nn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return db(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=li.fromDate(t);return{timestampValue:jf(r.wt,a)}}if(t instanceof li){const a=new li(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:jf(r.wt,a)}}if(t instanceof LC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Jg)return{bytesValue:Eb(r.wt,t._byteString)};if(t instanceof qi){const a=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw r.oa(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:jg(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${PC(t)}`)}(n,e)}function tA(n,e){const t={};return Pf(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rd(n,(r,a)=>{const l=Ob(a,e.ea(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function nA(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof li||n instanceof LC||n instanceof Jg||n instanceof qi||n instanceof Nb)}function ED(n,e,t){if(!nA(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=PC(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function ID(n,e,t){if((e=(0,Nn.m9)(e))instanceof tv)return e._internalPath;if("string"==typeof e)return BC(n,e);throw VC("Field path arguments must be of type string or ",n,!1,void 0,t)}const WM=new RegExp("[~\\*/\\[\\]]");function BC(n,e,t){if(e.search(WM)>=0)throw VC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new tv(...e.split("."))._internalPath}catch(r){throw VC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function VC(n,e,t,r,a){const l=r&&!r.isEmpty(),p=void 0!==a;let b=`Function ${e}() called with invalid data`;t&&(b+=" (via `toFirestore()`)"),b+=". ";let A="";return(l||p)&&(A+=" (found",l&&(A+=` in field ${r}`),p&&(A+=` in document ${a}`),A+=")"),new gt(Ge.INVALID_ARGUMENT,b+n+A)}function rA(n,e){return n.some(t=>t.isEqual(e))}class sC{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new qi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new KM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class KM extends sC{data(){return super.data()}}function jC(n,e){return"string"==typeof e?BC(n,e):e instanceof tv?e._internalPath:e._delegate._internalPath}class Lb{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nv extends sC{constructor(e,t,r,a,l,p){super(e,t,r,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new oC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(jC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class oC extends nv{data(e={}){return super.data(e)}}class u0{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Lb(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new oC(this._firestore,this._userDataWriter,r.key,r,new Lb(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new gt(Ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(p=>({type:"added",doc:new oC(r._firestore,r._userDataWriter,p.doc.key,p.doc,new Lb(r._snapshot.mutatedKeys.has(p.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const b=new oC(r._firestore,r._userDataWriter,p.doc.key,p.doc,new Lb(r._snapshot.mutatedKeys.has(p.doc.key),r._snapshot.fromCache),r.query.converter);let A=-1,L=-1;return 0!==p.type&&(A=l.indexOf(p.doc.key),l=l.delete(p.doc.key)),1!==p.type&&(l=l.add(p.doc),L=l.indexOf(p.doc.key)),{type:ZM(p.type),doc:b,oldIndex:A,newIndex:L}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ZM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jt()}}function iA(n,e){return n instanceof nv&&e instanceof nv?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof u0&&e instanceof u0&&n._firestore===e._firestore&&WS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function sA(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new gt(Ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aC{}function c0(n,...e){for(const t of e)n=t._apply(n);return n}class YM extends aC{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=Pb(e.firestore),r=function(a,l,p,b,A,L,z){let K;if(A.isKeyField()){if("array-contains"===L||"array-contains-any"===L)throw new gt(Ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${L}' queries on documentId().`);if("in"===L||"not-in"===L){hA(z,L);const ie=[];for(const Te of z)ie.push(lA(b,a,Te));K={arrayValue:{values:ie}}}else K=lA(b,a,z)}else"in"!==L&&"not-in"!==L&&"array-contains-any"!==L||hA(z,L),K=eA(p,"where",z,"in"===L||"not-in"===L);const ae=fs.create(A,L,K);return function(ie,Te){if(Te.ht()){const yt=B_(ie);if(null!==yt&&!yt.isEqual(Te.field))throw new gt(Ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${yt.toString()}' and '${Te.field.toString()}'`);const Qt=dd(ie);null!==Qt&&dA(0,Te.field,Qt)}const dt=function(yt,Qt){for(const At of yt.filters)if(Qt.indexOf(At.op)>=0)return At.op;return null}(ie,function(yt){switch(yt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Te.op));if(null!==dt)throw new gt(Ge.INVALID_ARGUMENT,dt===Te.op?`Invalid query. You cannot use more than one '${Te.op.toString()}' filter.`:`Invalid query. You cannot use '${Te.op.toString()}' filters with '${dt.toString()}' filters.`)}(a,ae),ae}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Wu(e.firestore,e.converter,function(a,l){const p=a.filters.concat([l]);return new ru(a.path,a.collectionGroup,a.explicitOrderBy.slice(),p,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}class XM extends aC{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,a,l){if(null!==r.startAt)throw new gt(Ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new gt(Ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new Ff(a,l);return function(b,A){if(null===dd(b)){const L=B_(b);null!==L&&dA(0,L,A.field)}}(r,p),p}(e._query,this.fa,this.wa);return new Wu(e.firestore,e.converter,function(r,a){const l=r.explicitOrderBy.concat([a]);return new ru(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class oA extends aC{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new Wu(e.firestore,e.converter,v1(e._query,this.ma,this.ga))}}class aA extends aC{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=cA(e,this.type,this.ya,this.pa);return new Wu(e.firestore,e.converter,(a=t,new ru((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,a,r.endAt)));var r,a}}class uA extends aC{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=cA(e,this.type,this.ya,this.pa);return new Wu(e.firestore,e.converter,(a=t,new ru((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,a)));var r,a}}function cA(n,e,t,r){if(t[0]=(0,Nn.m9)(t[0]),t[0]instanceof sC)return function(a,l,p,b,A){if(!b)throw new gt(Ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const L=[];for(const z of wl(a))if(z.field.isKeyField())L.push(Lf(l,b.key));else{const K=b.data.field(z.field);if(d1(K))throw new gt(Ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+z.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===K){const ae=z.field.canonicalString();throw new gt(Ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ae}' (used as the orderBy) does not exist.`)}L.push(K)}return new hd(L,A)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=Pb(n.firestore);return function(l,p,b,A,L,z){const K=l.explicitOrderBy;if(L.length>K.length)throw new gt(Ge.INVALID_ARGUMENT,`Too many arguments provided to ${A}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ae=[];for(let ie=0;ie<L.length;ie++){const Te=L[ie];if(K[ie].field.isKeyField()){if("string"!=typeof Te)throw new gt(Ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${A}(), but got a ${typeof Te}`);if(!Fy(l)&&-1!==Te.indexOf("/"))throw new gt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${A}() must be a plain document ID, but '${Te}' contains a slash.`);const dt=l.path.child(ir.fromString(Te));if(!Ot.isDocumentKey(dt))throw new gt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${A}() must result in a valid document path, but '${dt}' is not because it contains an odd number of segments.`);const yt=new Ot(dt);ae.push(Lf(p,yt))}else{const dt=eA(b,A,Te);ae.push(dt)}}return new hd(ae,z)}(n._query,n.firestore._databaseId,a,e,t,r)}}function lA(n,e,t){if("string"==typeof(t=(0,Nn.m9)(t))){if(""===t)throw new gt(Ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fy(e)&&-1!==t.indexOf("/"))throw new gt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ir.fromString(t));if(!Ot.isDocumentKey(r))throw new gt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lf(n,new Ot(r))}if(t instanceof qi)return Lf(n,t._key);throw new gt(Ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${PC(t)}.`)}function hA(n,e){if(!Array.isArray(n)||0===n.length)throw new gt(Ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new gt(Ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function dA(n,e,t){if(!t.isEqual(e))throw new gt(Ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const oR={maxAttempts:5};class CD{convertValue(e,t="none"){switch(od(e)){case 0:return null;case 1:return e.booleanValue;case 2:return si(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Jt()}}convertObject(e,t){const r={};return rd(e.fields,(a,l)=>{r[a]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new LC(si(e.latitude),si(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=f1(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Of(e));default:return null}}convertTimestamp(e){const t=id(e);return new li(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ir.fromString(e);Rn(zf(r));const a=new _l(r.get(1),r.get(3)),l=new Ot(r.popFirst(5));return a.isEqual(t)||ki(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function $C(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class aR extends CD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qi(this.firestore,null,t)}}class fA{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Pb(e)}set(e,t,r){this._verifyNotCommitted();const a=l0(e,this._firestore),l=$C(a.converter,t,r),p=UC(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,r);return this._mutations.push(p.toMutation(a._key,Kr.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=l0(e,this._firestore);let p;return p="string"==typeof(t=(0,Nn.m9)(t))||t instanceof tv?bD(this._dataReader,"WriteBatch.update",l._key,t,r,a):wD(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(p.toMutation(l._key,Kr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=l0(e,this._firestore);return this._mutations=this._mutations.concat(new gd(t._key,Kr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new gt(Ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function l0(n,e){if((n=(0,Nn.m9)(n)).firestore!==e)throw new gt(Ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Fb extends CD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qi(this.firestore,null,t)}}function pA(n,e,t){n=vr(n,qi);const r=vr(n.firestore,ps),a=$C(n.converter,e,t);return q1(r,[UC(Pb(r),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Kr.none())])}function gA(n,e,t,...r){n=vr(n,qi);const a=vr(n.firestore,ps),l=Pb(a);let p;return p="string"==typeof(e=(0,Nn.m9)(e))||e instanceof tv?bD(l,"updateDoc",n._key,e,t,r):wD(l,"updateDoc",n._key,e),q1(a,[p.toMutation(n._key,Kr.exists(!0))])}function mA(n,...e){var t,r,a;n=(0,Nn.m9)(n);let l={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||vD(e[p])||(l=e[p],p++);const b={includeMetadataChanges:l.includeMetadataChanges};if(vD(e[p])){const K=e[p];e[p]=null===(t=K.next)||void 0===t?void 0:t.bind(K),e[p+1]=null===(r=K.error)||void 0===r?void 0:r.bind(K),e[p+2]=null===(a=K.complete)||void 0===a?void 0:a.bind(K)}let A,L,z;if(n instanceof qi)L=vr(n.firestore,ps),z=Oy(n._key.path),A={next:K=>{e[p]&&e[p](TD(L,n,K))},error:e[p+1],complete:e[p+2]};else{const K=vr(n,Wu);L=vr(K.firestore,ps),z=K._query;const ae=new Fb(L);A={next:ie=>{e[p]&&e[p](new u0(L,ae,K,ie))},error:e[p+1],complete:e[p+2]},sA(n._query)}return function(K,ae,ie,Te){const dt=new kC(Te),yt=new LT(ae,dt,ie);return K.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return RT(yield G1(K),yt)})),()=>{dt.Tc(),K.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return NT(yield G1(K),yt)}))}}(Vo(L),z,b,A)}function q1(n,e){return function(t,r){const a=new yr;return t.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return function Jx(n,e,t){return jT.apply(this,arguments)}(yield gD(t),r,a)})),a.promise}(Vo(n),e)}function TD(n,e,t){const r=t.docs.get(e._key),a=new Fb(n);return new nv(n,a,e._key,r,new Lb(t.hasPendingWrites,t.fromCache),e.converter)}class yR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Pb(e)}get(e){const t=l0(e,this._firestore),r=new aR(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return Jt();const l=a[0];if(l.isFoundDocument())return new sC(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new sC(this._firestore,r,t._key,null,t.converter);throw Jt()})}set(e,t,r){const a=l0(e,this._firestore),l=$C(a.converter,t,r),p=UC(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,r);return this._transaction.set(a._key,p),this}update(e,t,r,...a){const l=l0(e,this._firestore);let p;return p="string"==typeof(t=(0,Nn.m9)(t))||t instanceof tv?bD(this._dataReader,"Transaction.update",l._key,t,r,a):wD(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,p),this}delete(e){const t=l0(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=l0(e,this._firestore),r=new Fb(this._firestore);return super.get(e).then(a=>new nv(this._firestore,r,t._key,a._document,new Lb(!1,!1),t.converter))}}function DD(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new gt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function vA(){if("undefined"==typeof Uint8Array)throw new gt("unimplemented","Uint8Arrays are not available in this environment.")}function _A(){if(!function kg(){return"undefined"!=typeof atob}())throw new gt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){xg=Su.SDK_VERSION,(0,Su._registerComponent)(new Pp.wA("firestore",(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),l=new ps(a,new PI(t.getProvider("auth-internal")),new OI(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,Su.registerVersion)(Kw,"3.4.11",n),(0,Su.registerVersion)(Kw,"3.4.11","esm2017")}();class uC{constructor(e){this._delegate=e}static fromBase64String(e){return _A(),new uC(Jg.fromBase64String(e))}static fromUint8Array(e){return vA(),new uC(Jg.fromUint8Array(e))}toBase64(){return _A(),this._delegate.toBase64()}toUint8Array(){return vA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function SD(n){return function DR(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class SR{enableIndexedDbPersistence(e,t){return function NM(n,e){YS(n=vr(n,ps));const t=Vo(n),r=n._freezeSettings(),a=new uD;return ZS(t,a,new RS(a,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function PM(n){YS(n=vr(n,ps));const e=Vo(n),t=n._freezeSettings(),r=new uD;return ZS(e,r,new gM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function OM(n){if(n._initialized&&!n._terminated)throw new gt(Ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new yr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,rt.Z)(function*(){try{yield(t=(0,rt.Z)(function*(r){if(!mc.V())return Promise.resolve();const a=r+"main";yield mc.delete(a)}),function(r){return t.apply(this,arguments)})(Rb(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class wA{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof _l||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&yl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function AM(n,e,t,r={}){var a;const l=(n=vr(n,rC))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&yl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let p,b;if("string"==typeof r.mockUserToken)p=r.mockUserToken,b=Ys.MOCK_USER;else{p=(0,Nn.Sg)(r.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new gt(Ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Ys(A)}n._authCredentials=new Br(new s1(p,b))}}(this._delegate,e,t,r)}enableNetwork(){return function FM(n){return function wM(n){return n.asyncQueue.enqueue((0,rt.Z)(function*(){const e=yield OS(n),t=yield LS(n);return e.setNetworkEnabled(!0),function(r){const a=Ut(r);return a.lu.delete(0),tC(a)}(t)}))}(Vo(n=vr(n,ps)))}(this._delegate)}disableNetwork(){return function UM(n){return function bM(n){return n.asyncQueue.enqueue((0,rt.Z)(function*(){const e=yield OS(n),t=yield LS(n);return e.setNetworkEnabled(!1),(r=(0,rt.Z)(function*(a){const l=Ut(a);l.lu.add(0),yield U1(l),l._u.set("Offline")}),function(a){return r.apply(this,arguments)})(t);var r}))}(Vo(n=vr(n,ps)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,VS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function LM(n){return function(e){const t=new yr;return e.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return function rM(n,e){return qT.apply(this,arguments)}(yield gD(e),t)})),t.promise}(Vo(n=vr(n,ps)))}(this._delegate)}onSnapshotsInSync(e){return function mR(n,e){return function CM(n,e){const t=new kC(e);return n.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return r=yield G1(n),a=t,Ut(r).Tu.add(a),void a.next();var r,a})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return r=yield G1(n),a=t,void Ut(r).Tu.delete(a);var r,a}))}}(Vo(n=vr(n,ps)),vD(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new gt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new W1(this,GS(this._delegate,e))}catch(t){throw Ec(t,"collection()","Firestore.collection()")}}doc(e){try{return new _d(this,OC(this._delegate,e))}catch(t){throw Ec(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ic(this,function xM(n,e){if(n=vr(n,rC),yD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new gt(Ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Wu(n,null,(t=e,new ru(ir.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ec(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function vR(n,e,t){n=vr(n,ps);const r=Object.assign(Object.assign({},oR),t);return function(a){if(a.maxAttempts<1)throw new gt(Ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function TM(n,e,t){const r=new yr;return n.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){const a=yield(l=n,NC(l).then(p=>p.datastore));var l;new vM(n.asyncQueue,a,t,e,r).run()})),r.promise}(Vo(n),a=>e(new yR(n,a)),r)}(this._delegate,t=>e(new bA(this,t)))}batch(){return Vo(this._delegate),new EA(new fA(this._delegate,e=>q1(this._delegate,e)))}loadBundle(e){return function BM(n,e){const t=Vo(n=vr(n,ps)),r=new RM;return function DM(n,e,t,r){const a=function(l,p){let b;return b="string"==typeof l?(new TextEncoder).encode(l):l,A=function(A,L){if(A instanceof Uint8Array)return kS(A,L);if(A instanceof ArrayBuffer)return kS(new Uint8Array(A),L);if(A instanceof ReadableStream)return A.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(b),new mM(A,p);var A}(t,eC(e));n.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){!function pM(n,e,t){const r=Ut(n);var a;(a=(0,rt.Z)(function*(l,p,b){try{const A=yield p.getMetadata();if(yield function(ae,ie){const Te=Ut(ae),dt=Js(ie.createTime);return Te.persistence.runTransaction("hasNewerBundle","readonly",yt=>Te.Ds.getBundleMetadata(yt,ie.id)).then(yt=>!!yt&&yt.createTime.compareTo(dt)>=0)}(l.localStore,A))return yield p.close(),b._completeWith({taskState:"Success",documentsLoaded:(ae=A).totalDocuments,bytesLoaded:ae.totalBytes,totalDocuments:ae.totalDocuments,totalBytes:ae.totalBytes}),Promise.resolve(new Set);b._updateProgress(bS(A));const L=new Wx(A,l.localStore,p.wt);let z=yield p.fc();for(;z;){const ae=yield L.Nu(z);ae&&b._updateProgress(ae),z=yield p.fc()}const K=yield L.complete();return yield ev(l,K.Mu,void 0),yield function(ae,ie){const Te=Ut(ae);return Te.persistence.runTransaction("Save bundle","readwrite",dt=>Te.Ds.saveBundleMetadata(dt,ie))}(l.localStore,A),b._completeWith(K.progress),Promise.resolve(K.Ou)}catch(A){return yl("SyncEngine",`Loading bundle failed with ${A}`),b._failWith(A),Promise.resolve(new Set)}var ae}),function(l,p,b){return a.apply(this,arguments)})(r,e,t).then(a=>{r.sharedClientState.notifyBundleLoaded(a)})}(yield gD(n),a,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function VM(n,e){return function SM(n,e){return n.asyncQueue.enqueue((0,rt.Z)(function*(){return function(t,r){const a=Ut(t);return a.persistence.runTransaction("Get named query","readonly",l=>a.Ds.getNamedQuery(l,r))}(yield pD(n),e)}))}(Vo(n=vr(n,ps)),e).then(t=>t?new Wu(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ic(this,t):null)}}class HC extends CD{constructor(e){super(),this.firestore=e}convertBytes(e){return new uC(new Jg(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return _d.forKey(t,this.firestore,null)}}class bA{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new HC(e)}get(e){const t=Bb(e);return this._delegate.get(t).then(r=>new cC(this._firestore,new nv(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=Bb(e);return r?(DD("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=Bb(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=Bb(e);return this._delegate.delete(t),this}}class EA{constructor(e){this._delegate=e}set(e,t,r){const a=Bb(e);return r?(DD("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=Bb(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=Bb(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ub{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new oC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new lC(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ub.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let l=a.get(t);return l||(l=new Ub(e,new HC(e),t),a.set(t,l)),l}}Ub.INSTANCES=new WeakMap;class _d{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new HC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new gt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new _d(t,new qi(t._delegate,r,new Ot(e)))}static forKey(e,t,r){return new _d(t,new qi(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new W1(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new W1(this.firestore,GS(this._delegate,e))}catch(t){throw Ec(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Nn.m9)(e))instanceof qi&&qS(this._delegate,e)}set(e,t){t=DD("DocumentReference.set",t);try{return t?pA(this._delegate,e,t):pA(this._delegate,e)}catch(r){throw Ec(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?gA(this._delegate,e):gA(this._delegate,e,t,...r)}catch(a){throw Ec(a,"updateDoc()","DocumentReference.update()")}}delete(){return function pR(n){return q1(vr(n.firestore,ps),[new gd(n._key,Kr.none())])}(this._delegate)}onSnapshot(...e){const t=IA(e),r=CA(e,a=>new cC(this.firestore,new nv(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return mA(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function cR(n){n=vr(n,qi);const e=vr(n.firestore,ps),t=Vo(e),r=new Fb(e);return function EM(n,e){const t=new yr;return n.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return(r=(0,rt.Z)(function*(a,l,p){try{const b=yield function(A,L){const z=Ut(A);return z.persistence.runTransaction("read document","readonly",K=>z.localDocuments.getDocument(K,L))}(a,l);b.isFoundDocument()?p.resolve(b):b.isNoDocument()?p.resolve(null):p.reject(new gt(Ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(b){const A=j1(b,`Failed to get document '${l} from cache`);p.reject(A)}}),function(a,l,p){return r.apply(this,arguments)})(yield pD(n),e,t);var r})),t.promise}(t,n._key).then(a=>new nv(e,r,n._key,a,new Lb(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function lR(n){n=vr(n,qi);const e=vr(n.firestore,ps);return FS(Vo(e),n._key,{source:"server"}).then(t=>TD(e,n,t))}(this._delegate):function uR(n){n=vr(n,qi);const e=vr(n.firestore,ps);return FS(Vo(e),n._key).then(t=>TD(e,n,t))}(this._delegate),t.then(r=>new cC(this.firestore,new nv(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new _d(this.firestore,this._delegate.withConverter(e?Ub.getInstance(this.firestore,e):null))}}function Ec(n,e,t){return n.message=n.message.replace(e,t),n}function IA(n){for(const e of n)if("object"==typeof e&&!SD(e))return e;return{}}function CA(n,e){var t,r;let a;return a=SD(n[0])?n[0]:SD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(r=a.complete)||void 0===r?void 0:r.bind(a)}}class cC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new _d(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return iA(this._delegate,e._delegate)}}class lC extends cC{data(e){const t=this._delegate.data(e);return function D_(n,e){n||Jt()}(void 0!==t),t}}class Ic{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new HC(e)}where(e,t,r){try{return new Ic(this.firestore,c0(this._delegate,function QM(n,e,t){const r=e,a=jC("where",n);return new YM(a,r,t)}(e,t,r)))}catch(a){throw Ec(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ic(this.firestore,c0(this._delegate,function JM(n,e="asc"){const t=e,r=jC("orderBy",n);return new XM(r,t)}(e,t)))}catch(r){throw Ec(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ic(this.firestore,c0(this._delegate,function eR(n){return HS("limit",n),new oA("limit",n,"F")}(e)))}catch(t){throw Ec(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ic(this.firestore,c0(this._delegate,function tR(n){return HS("limitToLast",n),new oA("limitToLast",n,"L")}(e)))}catch(t){throw Ec(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ic(this.firestore,c0(this._delegate,function nR(...n){return new aA("startAt",n,!0)}(...e)))}catch(t){throw Ec(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ic(this.firestore,c0(this._delegate,function rR(...n){return new aA("startAfter",n,!1)}(...e)))}catch(t){throw Ec(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ic(this.firestore,c0(this._delegate,function iR(...n){return new uA("endBefore",n,!1)}(...e)))}catch(t){throw Ec(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ic(this.firestore,c0(this._delegate,function sR(...n){return new uA("endAt",n,!0)}(...e)))}catch(t){throw Ec(t,"endAt()","Query.endAt()")}}isEqual(e){return WS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function dR(n){n=vr(n,Wu);const e=vr(n.firestore,ps),t=Vo(e),r=new Fb(e);return function IM(n,e){const t=new yr;return n.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return(r=(0,rt.Z)(function*(a,l,p){try{const b=yield DC(a,l,!0),A=new CS(l,b.ji),L=A.Ku(b.documents),z=A.applyChanges(L,!1);p.resolve(z.snapshot)}catch(b){const A=j1(b,`Failed to execute query '${l} against cache`);p.reject(A)}}),function(a,l,p){return r.apply(this,arguments)})(yield pD(n),e,t);var r})),t.promise}(t,n._query).then(a=>new u0(e,r,n,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function fR(n){n=vr(n,Wu);const e=vr(n.firestore,ps),t=Vo(e),r=new Fb(e);return US(t,n._query,{source:"server"}).then(a=>new u0(e,r,n,a))}(this._delegate):function hR(n){n=vr(n,Wu);const e=vr(n.firestore,ps),t=Vo(e),r=new Fb(e);return sA(n._query),US(t,n._query).then(a=>new u0(e,r,n,a))}(this._delegate),t.then(r=>new AD(this.firestore,new u0(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=IA(e),r=CA(e,a=>new AD(this.firestore,new u0(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return mA(this._delegate,t,r)}withConverter(e){return new Ic(this.firestore,this._delegate.withConverter(e?Ub.getInstance(this.firestore,e):null))}}class xR{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new lC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class AD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ic(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new lC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new xR(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new lC(this._firestore,r))})}isEqual(e){return iA(this._delegate,e._delegate)}}class W1 extends Ic{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new _d(this.firestore,e):null}doc(e){try{return new _d(this.firestore,void 0===e?OC(this._delegate):OC(this._delegate,e))}catch(t){throw Ec(t,"doc()","CollectionReference.doc()")}}add(e){return function gR(n,e){const t=vr(n.firestore,ps),r=OC(n),a=$C(n.converter,e);return q1(t,[UC(Pb(n.firestore),"addDoc",r._key,a,null!==n.converter,{}).toMutation(r._key,Kr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new _d(this.firestore,t))}isEqual(e){return qS(this._delegate,e._delegate)}withConverter(e){return new W1(this.firestore,this._delegate.withConverter(e?Ub.getInstance(this.firestore,e):null))}}function Bb(n){return vr(n,qi)}class xD{constructor(...e){this._delegate=new tv(...e)}static documentId(){return new xD(Hi.keyField().canonicalString())}isEqual(e){return(e=(0,Nn.m9)(e))instanceof tv&&this._delegate._internalPath.isEqual(e._internalPath)}}class Vb{constructor(e){this._delegate=e}static serverTimestamp(){const e=function wR(){return new _D("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Vb(e)}static delete(){const e=function _R(){return new iC("deleteField")}();return e._methodName="FieldValue.delete",new Vb(e)}static arrayUnion(...e){const t=function bR(...n){return new zM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Vb(t)}static arrayRemove(...e){const t=function ER(...n){return new GM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Vb(t)}static increment(e){const t=function IR(n){return new qM("increment",n)}(e);return t._methodName="FieldValue.increment",new Vb(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const MR={Firestore:wA,GeoPoint:LC,Timestamp:li,Blob:uC,Transaction:bA,WriteBatch:EA,DocumentReference:_d,DocumentSnapshot:cC,Query:Ic,QueryDocumentSnapshot:lC,QuerySnapshot:AD,CollectionReference:W1,FieldPath:xD,FieldValue:Vb,setLogLevel:function AR(n){!function i1(n){ed.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function kR(n){(function RR(n,e){n.INTERNAL.registerComponent(new Pp.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps(Object.assign({},MR)))})(n,(e,t)=>new wA(e,t,new SR)),n.registerVersion("@firebase/firestore-compat","0.1.20")}(Kv.Z);var NR=M(6451),zC=M(5363),PR=M(6063);class OR extends Gs.x{constructor(e=1/0,t=1/0,r=PR.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:a,_timestampProvider:l,_windowTime:p}=this;t||(r.push(e),!a&&r.push(l.now()+p)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:a}=this,l=a.slice();for(let p=0;p<l.length&&!e.closed;p+=r?1:2)e.next(l[p]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:a}=this,l=(a?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!a){const p=t.now();let b=0;for(let A=1;A<r.length&&r[A]<=p;A+=2)b=A;b&&r.splice(0,b+1)}}}var LR=M(3099);function TA(n,e,t){let r,a=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,LR.B)({connector:()=>new OR(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function DA(n,e){return(0,bu.m)(e)?Fi(()=>n,e):Fi(()=>n)}var MD=M(9468);const SA=new Map,jR={activated:!1,tokenObservers:[]},$R={initialized:!1,enabled:!1};function Sa(n){return SA.get(n)||jR}function Gf(n,e){SA.set(n,e)}function qC(){return $R}class WR{constructor(e,t,r,a,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=a,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=a,a>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,rt.Z)(function*(){t.stop();try{t.pending=new Nn.BH,yield function KR(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Nn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Cc=new Nn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function xA(n){if(!Sa(n).activated)throw Cc.create("use-before-activation",{appName:n.name})}function PD(n,e){return OD.apply(this,arguments)}function OD(){return OD=(0,rt.Z)(function*({url:n,body:e},t){var r,a;const l={"Content-Type":"application/json"},p=t.getImmediate({optional:!0});if(p){const ie=yield p.getHeartbeatsHeader();ie&&(l["X-Firebase-Client"]=ie)}const b={method:"POST",body:JSON.stringify(e),headers:l};let A,L;try{A=yield fetch(n,b)}catch(ie){throw Cc.create("fetch-network-error",{originalErrorMessage:null===(r=ie)||void 0===r?void 0:r.message})}if(200!==A.status)throw Cc.create("fetch-status-error",{httpStatus:A.status});try{L=yield A.json()}catch(ie){throw Cc.create("fetch-parse-error",{originalErrorMessage:null===(a=ie)||void 0===a?void 0:a.message})}const z=L.ttl.match(/^([\d.]+)(s)$/);if(!z||!z[2]||isNaN(Number(z[1])))throw Cc.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${L.ttl}`});const K=1e3*Number(z[1]),ae=Date.now();return{token:L.token,expireTimeMillis:ae+K,issuedAtTimeMillis:ae}}),OD.apply(this,arguments)}function XR(n,e){const{projectId:t,appId:r,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const hC="firebase-app-check-store";let ZC=null;function RA(){return ZC||(ZC=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=a=>{n(a.target.result)},r.onerror=a=>{var l;e(Cc.create("storage-open",{originalErrorMessage:null===(l=a.target.error)||void 0===l?void 0:l.message}))},r.onupgradeneeded=a=>{0===a.oldVersion&&a.target.result.createObjectStore(hC,{keyPath:"compositeKey"})}}catch(r){e(Cc.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),ZC)}function LD(){return LD=(0,rt.Z)(function*(n,e){const r=(yield RA()).transaction(hC,"readwrite"),l=r.objectStore(hC).put({compositeKey:n,value:e});return new Promise((p,b)=>{l.onsuccess=A=>{p()},r.onerror=A=>{var L;b(Cc.create("storage-set",{originalErrorMessage:null===(L=A.target.error)||void 0===L?void 0:L.message}))}})}),LD.apply(this,arguments)}const dC=new Rs.Yd("@firebase/app-check");function OA(n,e){return(0,Nn.hl)()?function nk(n,e){return function kA(n,e){return LD.apply(this,arguments)}(function PA(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{dC.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function LA(){return qC().enabled}function FA(){return VD.apply(this,arguments)}function VD(){return VD=(0,rt.Z)(function*(){const n=qC();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),VD.apply(this,arguments)}const uk={error:"UNKNOWN_ERROR"};function ck(n){return Nn.US.encodeString(JSON.stringify(n),!1)}function YC(n){return jD.apply(this,arguments)}function jD(){return jD=(0,rt.Z)(function*(n,e=!1){const t=n.app;xA(t);const r=Sa(t);let l,a=r.token;if(!a){const A=yield r.cachedTokenPromise;A&&QC(A)&&(a=A)}if(!e&&a&&QC(a))return{token:a.token};let b,p=!1;if(LA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=PD(XR(t,yield FA()),n.heartbeatServiceProvider).then(L=>(r.exchangeTokenPromise=void 0,L)),p=!0);const A=yield r.exchangeTokenPromise;return yield OA(t,A),Gf(t,Object.assign(Object.assign({},r),{token:A})),{token:A.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(A=>(r.exchangeTokenPromise=void 0,A)),p=!0),a=yield r.exchangeTokenPromise}catch(A){"appCheck/throttled"===A.code?dC.warn(A.message):dC.error(A),l=A}return a?(b={token:a.token},Gf(t,Object.assign(Object.assign({},r),{token:a})),yield OA(t,a)):b=hk(l),p&&BA(t,b),b}),jD.apply(this,arguments)}function HD(n,e){const t=Sa(n),r=t.tokenObservers.filter(a=>a.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Gf(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function UA(n){const{app:e}=n,t=Sa(e);let r=t.tokenRefresher;r||(r=function lk(n){const{app:e}=n;return new WR((0,rt.Z)(function*(){let r;if(r=Sa(e).token?yield YC(n,!0):yield YC(n),r.error)throw r.error}),()=>!0,()=>{const t=Sa(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Gf(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function BA(n,e){const t=Sa(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(a){}}function QC(n){return n.expireTimeMillis-Date.now()>0}function hk(n){return{token:ck(uk),error:n}}class dk{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Sa(this.app);for(const t of e)HD(this.app,t.next);return Promise.resolve()}}const WA="app-check-internal";!function Dk(){(0,Su._registerComponent)(new Pp.wA("app-check",n=>function fk(n,e){return new dk(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(WA).initialize()})),(0,Su._registerComponent)(new Pp.wA(WA,n=>function pk(n){return{getToken:e=>YC(n,e),addTokenListener:e=>function $D(n,e,t,r){const{app:a}=n,l=Sa(a),p={next:t,error:r,type:e};if(Gf(a,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,p]})),l.token&&QC(l.token)){const b=l.token;Promise.resolve().then(()=>{t({token:b.token}),UA(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>UA(n))}(n,"INTERNAL",e),removeTokenListener:e=>HD(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Su.registerVersion)("@firebase/app-check","0.5.10")}();class WD{constructor(){return(0,Ms.vb)("app-check")}}"undefined"!=typeof window&&window;var Rk=M(127);const ZA=new D.OlP("angularfire2.auth.use-emulator"),YA=new D.OlP("angularfire2.auth.settings"),QA=new D.OlP("angularfire2.auth.tenant-id"),XA=new D.OlP("angularfire2.auth.langugage-code"),JA=new D.OlP("angularfire2.auth.use-device-language"),ex=new D.OlP("angularfire.auth.persistence"),tx=(n,e,t,r,a,l,p,b)=>(0,Lu.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const A=e.runOutsideAngular(()=>n.auth());if(t&&A.useEmulator(...t),r&&(A.tenantId=r),A.languageCode=a,l&&A.useDeviceLanguage(),p)for(const[L,z]of Object.entries(p))A.settings[L]=z;return b&&A.setPersistence(b),A},[t,r,a,l,p,b]);let nx=(()=>{class n{constructor(t,r,a,l,p,b,A,L,z,K,ae,ie){const Te=new Gs.x,dt=an(void 0).pipe((0,zC.Q)(p.outsideAngular),Fi(()=>l.runOutsideAngular(()=>Promise.resolve().then(M.bind(M,3677)))),(0,En.U)(()=>(0,Lu.on)(t,l,r)),(0,En.U)(yt=>tx(yt,l,b,L,z,K,A,ae)),TA({bufferSize:1,refCount:!1}));if(xc(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=an(null);else{dt.pipe(ga()).subscribe();const Qt=dt.pipe(Fi($t=>$t.getRedirectResult().then(ln=>ln,()=>null)),Ms.iC,TA({bufferSize:1,refCount:!1})),At=dt.pipe(Fi($t=>new Hr.y(ln=>({unsubscribe:l.runOutsideAngular(()=>$t.onAuthStateChanged(gn=>ln.next(gn),gn=>ln.error(gn),()=>ln.complete()))})))),Zt=dt.pipe(Fi($t=>new Hr.y(ln=>({unsubscribe:l.runOutsideAngular(()=>$t.onIdTokenChanged(gn=>ln.next(gn),gn=>ln.error(gn),()=>ln.complete()))}))));this.authState=Qt.pipe(DA(At),(0,MD.R)(p.outsideAngular),(0,zC.Q)(p.insideAngular)),this.user=Qt.pipe(DA(Zt),(0,MD.R)(p.outsideAngular),(0,zC.Q)(p.insideAngular)),this.idToken=this.user.pipe(Fi($t=>$t?(0,Or.D)($t.getIdToken()):an(null))),this.idTokenResult=this.user.pipe(Fi($t=>$t?(0,Or.D)($t.getIdTokenResult()):an(null))),this.credential=(0,NR.T)(Qt,Te,this.authState.pipe(ci($t=>!$t))).pipe((0,En.U)($t=>(null==$t?void 0:$t.user)?$t:null),(0,MD.R)(p.outsideAngular),(0,zC.Q)(p.insideAngular))}return(0,Lu.pX)(this,dt,l,{spy:{apply:(yt,Qt,At)=>{(yt.startsWith("signIn")||yt.startsWith("createUser"))&&At.then(Zt=>Te.next(Zt))}}})}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Lu.Dh),D.LFG(Lu.xv,8),D.LFG(D.Lbi),D.LFG(D.R0b),D.LFG(Ms.HU),D.LFG(ZA,8),D.LFG(YA,8),D.LFG(QA,8),D.LFG(XA,8),D.LFG(JA,8),D.LFG(ex,8),D.LFG(WD,8))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function rx(n,e){return function Nk(n,e=DE.z){return new Hr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function ZD(n,e){return rx(n,e).pipe((0,En.U)(t=>({payload:t,type:"query"})))}function JC(n,e){return ZD(n,e).pipe(Go(void 0),Ja(),(0,En.U)(([t,r])=>{const a=r.payload.docChanges(),l=a.map(p=>({type:p.type,payload:p}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((p,b)=>{const A=a.find(z=>z.doc.ref.isEqual(p.ref)),L=null==t?void 0:t.payload.docs.find(z=>z.ref.isEqual(p.ref));A&&JSON.stringify(A.doc.metadata)===JSON.stringify(p.metadata)||!A&&L&&JSON.stringify(L.metadata)===JSON.stringify(p.metadata)||l.push({type:"modified",payload:{oldIndex:b,newIndex:b,type:"modified",doc:p}})}),l}))}function ix(n,e,t){return JC(n,t).pipe(qo((r,a)=>function Ok(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Lk(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return YD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return YD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return YD(n,e.oldIndex,1)}return n}(n,r))}),n}(r,a.map(l=>l.payload),e),[]),function Wm(n,e=Ho.y){return n=null!=n?n:Lo,(0,Li.e)((t,r)=>{let a,l=!0;t.subscribe((0,ts.x)(r,p=>{const b=e(p);(l||!n(a,b))&&(l=!1,a=b,r.next(p))}))})}(),(0,En.U)(r=>r.map(a=>({type:a.type,payload:a}))))}function YD(n,e,t,...r){const a=n.slice();return a.splice(e,t,...r),a}function sx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class ox{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=JC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,En.U)(r=>r.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(Go(void 0),Ja(),ci(([r,a])=>a.length>0||!r),(0,En.U)(([r,a])=>a),Ms.iC)}auditTrail(e){return this.stateChanges(e).pipe(qo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sx(e);return ix(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ms.iC)}valueChanges(e={}){return ZD(this.query,this.afs.schedulers.outsideAngular).pipe((0,En.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Ms.iC)}get(e){return(0,Or.D)(this.query.get(e)).pipe(Ms.iC)}add(e){return this.ref.add(e)}doc(e){return new ax(this.ref.doc(e),this.afs)}}class ax{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:a,query:l}=lx(r,t);return new ox(a,l,this.afs)}snapshotChanges(){return function Pk(n,e){return rx(n,e).pipe(Go(void 0),Ja(),(0,En.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ms.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,En.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Or.D)(this.ref.get(e)).pipe(Ms.iC)}}class Fk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?JC(this.query,this.afs.schedulers.outsideAngular).pipe((0,En.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ci(t=>t.length>0),Ms.iC):JC(this.query,this.afs.schedulers.outsideAngular).pipe(Ms.iC)}auditTrail(e){return this.stateChanges(e).pipe(qo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sx(e);return ix(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ms.iC)}valueChanges(e={}){return ZD(this.query,this.afs.schedulers.outsideAngular).pipe((0,En.U)(r=>r.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),Ms.iC)}get(e){return(0,Or.D)(this.query.get(e)).pipe(Ms.iC)}}const ux=new D.OlP("angularfire2.enableFirestorePersistence"),cx=new D.OlP("angularfire2.firestore.persistenceSettings"),Uk=new D.OlP("angularfire2.firestore.settings"),Bk=new D.OlP("angularfire2.firestore.use-emulator");function lx(n,e=(t=>t)){return{query:e(n),ref:n}}let Vk=(()=>{class n{constructor(t,r,a,l,p,b,A,L,z,K,ae,ie,Te,dt,yt,Qt,At){this.schedulers=A;const Zt=(0,Lu.on)(t,b,r),$t=z;K&&tx(Zt,b,ae,Te,dt,yt,ie,Qt),[this.firestore,this.persistenceEnabled$]=(0,Lu.cc)(`${Zt.name}.firestore`,"AngularFirestore",Zt.name,()=>{const ln=b.runOutsideAngular(()=>Zt.firestore());if(l&&ln.settings(l),$t&&ln.useEmulator(...$t),a&&!xc(p)){const gn=()=>{try{return(0,Or.D)(ln.enablePersistence(L||void 0).then(()=>!0,()=>!1))}catch(fr){return"undefined"!=typeof console&&console.warn(fr),an(!1)}};return[ln,b.runOutsideAngular(gn)]}return[ln,an(!1)]},[l,$t,a])}collection(t,r){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:p}=lx(a,r),b=this.schedulers.ngZone.run(()=>l);return new ox(b,p,this)}collectionGroup(t,r){const a=r||(p=>p),l=this.firestore.collectionGroup(t);return new Fk(a(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>r);return new ax(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Lu.Dh),D.LFG(Lu.xv,8),D.LFG(ux,8),D.LFG(Uk,8),D.LFG(D.Lbi),D.LFG(D.R0b),D.LFG(Ms.HU),D.LFG(cx,8),D.LFG(Bk,8),D.LFG(nx,8),D.LFG(ZA,8),D.LFG(YA,8),D.LFG(QA,8),D.LFG(XA,8),D.LFG(JA,8),D.LFG(ex,8),D.LFG(WD,8))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jk=(()=>{class n{constructor(){Rk.Z.registerVersion("angularfire",Ms.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:ux,useValue:!0},{provide:cx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=D.oAB({type:n}),n.\u0275inj=D.cJS({providers:[Vk]}),n})(),$k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=D.oAB({type:n,bootstrap:[wI]}),n.\u0275inj=D.cJS({providers:[Gm],imports:[[ao,X1,Gm,Lu.hO.initializeApp(uf_firebase),jk]]}),n})();(0,D.G48)(),Pc().bootstrapModule($k).catch(n=>console.error(n))},5021:(jt,et,M)=>{"use strict";M.r(et),M.d(et,{entries:()=>It,keys:()=>ot,map:()=>Fe,nest:()=>xe,set:()=>kt,values:()=>Ye});var D="$";function be(){}function Q(ge,Me){var lt=new be;if(ge instanceof be)ge.each(function(ut,vt){lt.set(vt,ut)});else if(Array.isArray(ge)){var We,bt=-1,qe=ge.length;if(null==Me)for(;++bt<qe;)lt.set(bt,ge[bt]);else for(;++bt<qe;)lt.set(Me(We=ge[bt],bt,ge),We)}else if(ge)for(var Xe in ge)lt.set(Xe,ge[Xe]);return lt}be.prototype=Q.prototype={constructor:be,has:function(ge){return D+ge in this},get:function(ge){return this[D+ge]},set:function(ge,Me){return this[D+ge]=Me,this},remove:function(ge){var Me=D+ge;return Me in this&&delete this[Me]},clear:function(){for(var ge in this)ge[0]===D&&delete this[ge]},keys:function(){var ge=[];for(var Me in this)Me[0]===D&&ge.push(Me.slice(1));return ge},values:function(){var ge=[];for(var Me in this)Me[0]===D&&ge.push(this[Me]);return ge},entries:function(){var ge=[];for(var Me in this)Me[0]===D&&ge.push({key:Me.slice(1),value:this[Me]});return ge},size:function(){var ge=0;for(var Me in this)Me[0]===D&&++ge;return ge},empty:function(){for(var ge in this)if(ge[0]===D)return!1;return!0},each:function(ge){for(var Me in this)Me[0]===D&&ge(this[Me],Me.slice(1),this)}};const Fe=Q;function xe(){var lt,bt,qe,ge=[],Me=[];function We(ut,vt,ce,Ke){if(vt>=ge.length)return null!=lt&&ut.sort(lt),null!=bt?bt(ut):ut;for(var Ze,Ne,qt,fe=-1,Re=ut.length,De=ge[vt++],ht=Fe(),at=ce();++fe<Re;)(qt=ht.get(Ze=De(Ne=ut[fe])+""))?qt.push(Ne):ht.set(Ze,[Ne]);return ht.each(function(Xt,_t){Ke(at,_t,We(Xt,vt,ce,Ke))}),at}function Xe(ut,vt){if(++vt>ge.length)return ut;var ce,Ke=Me[vt-1];return null!=bt&&vt>=ge.length?ce=ut.entries():(ce=[],ut.each(function(fe,Re){ce.push({key:Re,values:Xe(fe,vt)})})),null!=Ke?ce.sort(function(fe,Re){return Ke(fe.key,Re.key)}):ce}return qe={object:function(ut){return We(ut,0,Ue,Be)},map:function(ut){return We(ut,0,Oe,Le)},entries:function(ut){return Xe(We(ut,0,Oe,Le),0)},key:function(ut){return ge.push(ut),qe},sortKeys:function(ut){return Me[ge.length-1]=ut,qe},sortValues:function(ut){return lt=ut,qe},rollup:function(ut){return bt=ut,qe}}}function Ue(){return{}}function Be(ge,Me,lt){ge[Me]=lt}function Oe(){return Fe()}function Le(ge,Me,lt){ge.set(Me,lt)}function oe(){}var ue=Fe.prototype;function ye(ge,Me){var lt=new oe;if(ge instanceof oe)ge.each(function(We){lt.add(We)});else if(ge){var bt=-1,qe=ge.length;if(null==Me)for(;++bt<qe;)lt.add(ge[bt]);else for(;++bt<qe;)lt.add(Me(ge[bt],bt,ge))}return lt}oe.prototype=ye.prototype={constructor:oe,has:ue.has,add:function(ge){return this[D+(ge+="")]=ge,this},remove:ue.remove,clear:ue.clear,values:ue.keys,size:ue.size,empty:ue.empty,each:ue.each};const kt=ye;function ot(ge){var Me=[];for(var lt in ge)Me.push(lt);return Me}function Ye(ge){var Me=[];for(var lt in ge)Me.push(ge[lt]);return Me}function It(ge){var Me=[];for(var lt in ge)Me.push({key:lt,value:ge[lt]});return Me}},4013:(jt,et,M)=>{"use strict";M.r(et),M.d(et,{creator:()=>Ue,customEvent:()=>Xe,event:()=>Ye,local:()=>Oe,matcher:()=>kt,mouse:()=>ce,namespace:()=>Q,namespaces:()=>be,select:()=>_s,selectAll:()=>_o,selection:()=>hr,selector:()=>fe,selectorAll:()=>Ze,style:()=>mn,touch:()=>Yr,touches:()=>wo,window:()=>Mr});var D="http://www.w3.org/1999/xhtml";const be={svg:"http://www.w3.org/2000/svg",xhtml:D,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Q(X){var me=X+="",tt=me.indexOf(":");return tt>=0&&"xmlns"!==(me=X.slice(0,tt))&&(X=X.slice(tt+1)),be.hasOwnProperty(me)?{space:be[me],local:X}:X}function Fe(X){return function(){var me=this.ownerDocument,tt=this.namespaceURI;return tt===D&&me.documentElement.namespaceURI===D?me.createElement(X):me.createElementNS(tt,X)}}function xe(X){return function(){return this.ownerDocument.createElementNS(X.space,X.local)}}function Ue(X){var me=Q(X);return(me.local?xe:Fe)(me)}var Be=0;function Oe(){return new Le}function Le(){this._="@"+(++Be).toString(36)}Le.prototype=Oe.prototype={constructor:Le,get:function(X){for(var me=this._;!(me in X);)if(!(X=X.parentNode))return;return X[me]},set:function(X,me){return X[this._]=me},remove:function(X){return this._ in X&&delete X[this._]},toString:function(){return this._}};var oe=function(X){return function(){return this.matches(X)}};if("undefined"!=typeof document){var ue=document.documentElement;if(!ue.matches){var ye=ue.webkitMatchesSelector||ue.msMatchesSelector||ue.mozMatchesSelector||ue.oMatchesSelector;oe=function(X){return function(){return ye.call(this,X)}}}}const kt=oe;var ot={},Ye=null;function ge(X,me,tt){return X=Me(X,me,tt),function(Je){var Dt=Je.relatedTarget;(!Dt||Dt!==this&&!(8&Dt.compareDocumentPosition(this)))&&X.call(this,Je)}}function Me(X,me,tt){return function(Je){var Dt=Ye;Ye=Je;try{X.call(this,this.__data__,me,tt)}finally{Ye=Dt}}}function lt(X){return X.trim().split(/^|\s+/).map(function(me){var tt="",Je=me.indexOf(".");return Je>=0&&(tt=me.slice(Je+1),me=me.slice(0,Je)),{type:me,name:tt}})}function bt(X){return function(){var me=this.__on;if(me){for(var Ft,tt=0,Je=-1,Dt=me.length;tt<Dt;++tt)Ft=me[tt],X.type&&Ft.type!==X.type||Ft.name!==X.name?me[++Je]=Ft:this.removeEventListener(Ft.type,Ft.listener,Ft.capture);++Je?me.length=Je:delete this.__on}}}function qe(X,me,tt){var Je=ot.hasOwnProperty(X.type)?ge:Me;return function(Dt,Ft,un){var Vt,Lt=this.__on,yn=Je(me,Ft,un);if(Lt)for(var Ln=0,pr=Lt.length;Ln<pr;++Ln)if((Vt=Lt[Ln]).type===X.type&&Vt.name===X.name)return this.removeEventListener(Vt.type,Vt.listener,Vt.capture),this.addEventListener(Vt.type,Vt.listener=yn,Vt.capture=tt),void(Vt.value=me);this.addEventListener(X.type,yn,tt),Vt={type:X.type,name:X.name,value:me,listener:yn,capture:tt},Lt?Lt.push(Vt):this.__on=[Vt]}}function Xe(X,me,tt,Je){var Dt=Ye;X.sourceEvent=Ye,Ye=X;try{return me.apply(tt,Je)}finally{Ye=Dt}}function ut(){for(var me,X=Ye;me=X.sourceEvent;)X=me;return X}function vt(X,me){var tt=X.ownerSVGElement||X;if(tt.createSVGPoint){var Je=tt.createSVGPoint();return Je.x=me.clientX,Je.y=me.clientY,[(Je=Je.matrixTransform(X.getScreenCTM().inverse())).x,Je.y]}var Dt=X.getBoundingClientRect();return[me.clientX-Dt.left-X.clientLeft,me.clientY-Dt.top-X.clientTop]}function ce(X){var me=ut();return me.changedTouches&&(me=me.changedTouches[0]),vt(X,me)}function Ke(){}function fe(X){return null==X?Ke:function(){return this.querySelector(X)}}function De(){return[]}function Ze(X){return null==X?De:function(){return this.querySelectorAll(X)}}function qt(X){return new Array(X.length)}function Xt(X,me){this.ownerDocument=X.ownerDocument,this.namespaceURI=X.namespaceURI,this._next=null,this._parent=X,this.__data__=me}function lr(X,me,tt,Je,Dt,Ft){for(var Lt,un=0,Vt=me.length,yn=Ft.length;un<yn;++un)(Lt=me[un])?(Lt.__data__=Ft[un],Je[un]=Lt):tt[un]=new Xt(X,Ft[un]);for(;un<Vt;++un)(Lt=me[un])&&(Dt[un]=Lt)}function jn(X,me,tt,Je,Dt,Ft,un){var Lt,Vt,Nr,yn={},Ln=me.length,pr=Ft.length,$n=new Array(Ln);for(Lt=0;Lt<Ln;++Lt)(Vt=me[Lt])&&($n[Lt]=Nr="$"+un.call(Vt,Vt.__data__,Lt,me),Nr in yn?Dt[Lt]=Vt:yn[Nr]=Vt);for(Lt=0;Lt<pr;++Lt)(Vt=yn[Nr="$"+un.call(X,Ft[Lt],Lt,Ft)])?(Je[Lt]=Vt,Vt.__data__=Ft[Lt],yn[Nr]=null):tt[Lt]=new Xt(X,Ft[Lt]);for(Lt=0;Lt<Ln;++Lt)(Vt=me[Lt])&&yn[$n[Lt]]===Vt&&(Dt[Lt]=Vt)}function gs(X,me){return X<me?-1:X>me?1:X>=me?0:NaN}function pn(X){return function(){this.removeAttribute(X)}}function Us(X){return function(){this.removeAttributeNS(X.space,X.local)}}function xr(X,me){return function(){this.setAttribute(X,me)}}function Er(X,me){return function(){this.setAttributeNS(X.space,X.local,me)}}function Aa(X,me){return function(){var tt=me.apply(this,arguments);null==tt?this.removeAttribute(X):this.setAttribute(X,tt)}}function Bs(X,me){return function(){var tt=me.apply(this,arguments);null==tt?this.removeAttributeNS(X.space,X.local):this.setAttributeNS(X.space,X.local,tt)}}function Mr(X){return X.ownerDocument&&X.ownerDocument.defaultView||X.document&&X||X.defaultView}function no(X){return function(){this.style.removeProperty(X)}}function ys(X,me,tt){return function(){this.style.setProperty(X,me,tt)}}function qn(X,me,tt){return function(){var Je=me.apply(this,arguments);null==Je?this.style.removeProperty(X):this.style.setProperty(X,Je,tt)}}function mn(X,me){return X.style.getPropertyValue(me)||Mr(X).getComputedStyle(X,null).getPropertyValue(me)}function Ci(X){return function(){delete this[X]}}function Ki(X,me){return function(){this[X]=me}}function Un(X,me){return function(){var tt=me.apply(this,arguments);null==tt?delete this[X]:this[X]=tt}}function Pi(X){return X.trim().split(/^|\s+/)}function pi(X){return X.classList||new sn(X)}function sn(X){this._node=X,this._names=Pi(X.getAttribute("class")||"")}function ve(X,me){for(var tt=pi(X),Je=-1,Dt=me.length;++Je<Dt;)tt.add(me[Je])}function se(X,me){for(var tt=pi(X),Je=-1,Dt=me.length;++Je<Dt;)tt.remove(me[Je])}function Ee(X){return function(){ve(this,X)}}function Ie(X){return function(){se(this,X)}}function ne(X,me){return function(){(me.apply(this,arguments)?ve:se)(this,X)}}function Ct(){this.textContent=""}function Ht(X){return function(){this.textContent=X}}function Dn(X){return function(){var me=X.apply(this,arguments);this.textContent=null==me?"":me}}function ar(){this.innerHTML=""}function Bn(X){return function(){this.innerHTML=X}}function Zr(X){return function(){var me=X.apply(this,arguments);this.innerHTML=null==me?"":me}}function Ma(){this.nextSibling&&this.parentNode.appendChild(this)}function Ra(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jo(){return null}function vs(){var X=this.parentNode;X&&X.removeChild(this)}function ou(X,me,tt){var Je=Mr(X),Dt=Je.CustomEvent;"function"==typeof Dt?Dt=new Dt(me,tt):(Dt=Je.document.createEvent("Event"),tt?(Dt.initEvent(me,tt.bubbles,tt.cancelable),Dt.detail=tt.detail):Dt.initEvent(me,!1,!1)),X.dispatchEvent(Dt)}function sa(X,me){return function(){return ou(this,X,me)}}function gi(X,me){return function(){return ou(this,X,me.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(ot={mouseenter:"mouseover",mouseleave:"mouseout"})),Xt.prototype={constructor:Xt,appendChild:function(X){return this._parent.insertBefore(X,this._next)},insertBefore:function(X,me){return this._parent.insertBefore(X,me)},querySelector:function(X){return this._parent.querySelector(X)},querySelectorAll:function(X){return this._parent.querySelectorAll(X)}},sn.prototype={add:function(X){this._names.indexOf(X)<0&&(this._names.push(X),this._node.setAttribute("class",this._names.join(" ")))},remove:function(X){var me=this._names.indexOf(X);me>=0&&(this._names.splice(me,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(X){return this._names.indexOf(X)>=0}};var ai=[null];function Tt(X,me){this._groups=X,this._parents=me}function on(){return new Tt([[document.documentElement]],ai)}Tt.prototype=on.prototype={constructor:Tt,select:function Re(X){"function"!=typeof X&&(X=fe(X));for(var me=this._groups,tt=me.length,Je=new Array(tt),Dt=0;Dt<tt;++Dt)for(var Vt,yn,Ft=me[Dt],un=Ft.length,Lt=Je[Dt]=new Array(un),Ln=0;Ln<un;++Ln)(Vt=Ft[Ln])&&(yn=X.call(Vt,Vt.__data__,Ln,Ft))&&("__data__"in Vt&&(yn.__data__=Vt.__data__),Lt[Ln]=yn);return new Tt(Je,this._parents)},selectAll:function Ne(X){"function"!=typeof X&&(X=Ze(X));for(var me=this._groups,tt=me.length,Je=[],Dt=[],Ft=0;Ft<tt;++Ft)for(var Vt,un=me[Ft],Lt=un.length,yn=0;yn<Lt;++yn)(Vt=un[yn])&&(Je.push(X.call(Vt,Vt.__data__,yn,un)),Dt.push(Vt));return new Tt(Je,Dt)},filter:function ht(X){"function"!=typeof X&&(X=kt(X));for(var me=this._groups,tt=me.length,Je=new Array(tt),Dt=0;Dt<tt;++Dt)for(var Vt,Ft=me[Dt],un=Ft.length,Lt=Je[Dt]=[],yn=0;yn<un;++yn)(Vt=Ft[yn])&&X.call(Vt,Vt.__data__,yn,Ft)&&Lt.push(Vt);return new Tt(Je,this._parents)},data:function Kn(X,me){if(!X)return Nr=new Array(this.size()),yn=-1,this.each(function(qf){Nr[++yn]=qf}),Nr;var tt=me?jn:lr,Je=this._parents,Dt=this._groups;"function"!=typeof X&&(X=function _t(X){return function(){return X}}(X));for(var Ft=Dt.length,un=new Array(Ft),Lt=new Array(Ft),Vt=new Array(Ft),yn=0;yn<Ft;++yn){var Ln=Je[yn],pr=Dt[yn],$n=pr.length,Nr=X.call(Ln,Ln&&Ln.__data__,yn,Je),oa=Nr.length,Zi=Lt[yn]=new Array(oa),ws=un[yn]=new Array(oa);tt(Ln,pr,Zi,ws,Vt[yn]=new Array($n),Nr,me);for(var ro,bo,uu=0,bs=0;uu<oa;++uu)if(ro=Zi[uu]){for(uu>=bs&&(bs=uu+1);!(bo=ws[bs])&&++bs<oa;);ro._next=bo||null}}return(un=new Tt(un,Je))._enter=Lt,un._exit=Vt,un},enter:function at(){return new Tt(this._enter||this._groups.map(qt),this._parents)},exit:function Ar(){return new Tt(this._exit||this._groups.map(qt),this._parents)},merge:function Zn(X){for(var me=this._groups,tt=X._groups,Je=me.length,Ft=Math.min(Je,tt.length),un=new Array(Je),Lt=0;Lt<Ft;++Lt)for(var $n,Vt=me[Lt],yn=tt[Lt],Ln=Vt.length,pr=un[Lt]=new Array(Ln),Nr=0;Nr<Ln;++Nr)($n=Vt[Nr]||yn[Nr])&&(pr[Nr]=$n);for(;Lt<Je;++Lt)un[Lt]=me[Lt];return new Tt(un,this._parents)},order:function On(){for(var X=this._groups,me=-1,tt=X.length;++me<tt;)for(var un,Je=X[me],Dt=Je.length-1,Ft=Je[Dt];--Dt>=0;)(un=Je[Dt])&&(Ft&&Ft!==un.nextSibling&&Ft.parentNode.insertBefore(un,Ft),Ft=un);return this},sort:function Os(X){function me(pr,$n){return pr&&$n?X(pr.__data__,$n.__data__):!pr-!$n}X||(X=gs);for(var tt=this._groups,Je=tt.length,Dt=new Array(Je),Ft=0;Ft<Je;++Ft){for(var yn,un=tt[Ft],Lt=un.length,Vt=Dt[Ft]=new Array(Lt),Ln=0;Ln<Lt;++Ln)(yn=un[Ln])&&(Vt[Ln]=yn);Vt.sort(me)}return new Tt(Dt,this._parents).order()},call:function oi(){var X=arguments[0];return arguments[0]=this,X.apply(null,arguments),this},nodes:function di(){var X=new Array(this.size()),me=-1;return this.each(function(){X[++me]=this}),X},node:function Ls(){for(var X=this._groups,me=0,tt=X.length;me<tt;++me)for(var Je=X[me],Dt=0,Ft=Je.length;Dt<Ft;++Dt){var un=Je[Dt];if(un)return un}return null},size:function Fs(){var X=0;return this.each(function(){++X}),X},empty:function ms(){return!this.node()},each:function to(X){for(var me=this._groups,tt=0,Je=me.length;tt<Je;++tt)for(var Lt,Dt=me[tt],Ft=0,un=Dt.length;Ft<un;++Ft)(Lt=Dt[Ft])&&X.call(Lt,Lt.__data__,Ft,Dt);return this},attr:function fi(X,me){var tt=Q(X);if(arguments.length<2){var Je=this.node();return tt.local?Je.getAttributeNS(tt.space,tt.local):Je.getAttribute(tt)}return this.each((null==me?tt.local?Us:pn:"function"==typeof me?tt.local?Bs:Aa:tt.local?Er:xr)(tt,me))},style:function rn(X,me,tt){return arguments.length>1?this.each((null==me?no:"function"==typeof me?qn:ys)(X,me,null==tt?"":tt)):mn(this.node(),X)},property:function Vs(X,me){return arguments.length>1?this.each((null==me?Ci:"function"==typeof me?Un:Ki)(X,me)):this.node()[X]},classed:function nt(X,me){var tt=Pi(X+"");if(arguments.length<2){for(var Je=pi(this.node()),Dt=-1,Ft=tt.length;++Dt<Ft;)if(!Je.contains(tt[Dt]))return!1;return!0}return this.each(("function"==typeof me?ne:me?Ee:Ie)(tt,me))},text:function nr(X){return arguments.length?this.each(null==X?Ct:("function"==typeof X?Dn:Ht)(X)):this.node().textContent},html:function xa(X){return arguments.length?this.each(null==X?ar:("function"==typeof X?Zr:Bn)(X)):this.node().innerHTML},raise:function ia(){return this.each(Ma)},lower:function $r(){return this.each(Ra)},append:function Rr(X){var me="function"==typeof X?X:Ue(X);return this.select(function(){return this.appendChild(me.apply(this,arguments))})},insert:function kr(X,me){var tt="function"==typeof X?X:Ue(X),Je=null==me?jo:"function"==typeof me?me:fe(me);return this.select(function(){return this.insertBefore(tt.apply(this,arguments),Je.apply(this,arguments)||null)})},remove:function th(){return this.each(vs)},datum:function $o(X){return arguments.length?this.property("__data__",X):this.node().__data__},on:function We(X,me,tt){var Dt,un,Je=lt(X+""),Ft=Je.length;if(!(arguments.length<2)){for(Lt=me?qe:bt,null==tt&&(tt=!1),Dt=0;Dt<Ft;++Dt)this.each(Lt(Je[Dt],me,tt));return this}var Lt=this.node().__on;if(Lt)for(var Ln,Vt=0,yn=Lt.length;Vt<yn;++Vt)for(Dt=0,Ln=Lt[Vt];Dt<Ft;++Dt)if((un=Je[Dt]).type===Ln.type&&un.name===Ln.name)return Ln.value},dispatch:function au(X,me){return this.each(("function"==typeof me?gi:sa)(X,me))}};const hr=on;function _s(X){return"string"==typeof X?new Tt([[document.querySelector(X)]],[document.documentElement]):new Tt([[X]],ai)}function _o(X){return"string"==typeof X?new Tt([document.querySelectorAll(X)],[document.documentElement]):new Tt([null==X?[]:X],ai)}function Yr(X,me,tt){arguments.length<3&&(tt=me,me=ut().changedTouches);for(var Ft,Je=0,Dt=me?me.length:0;Je<Dt;++Je)if((Ft=me[Je]).identifier===tt)return vt(X,Ft);return null}function wo(X,me){null==me&&(me=ut().touches);for(var tt=0,Je=me?me.length:0,Dt=new Array(Je);tt<Je;++tt)Dt[tt]=vt(X,me[tt]);return Dt}},5188:function(jt,et){!function(M){"use strict";var be=function(i,u){return i<u?-1:i>u?1:i>=u?0:NaN},Q=function(i){return 1===i.length&&(i=function Fe(i){return function(u,h){return be(i(u),h)}}(i)),{left:function(u,h,f,g){for(null==f&&(f=0),null==g&&(g=u.length);f<g;){var v=f+g>>>1;i(u[v],h)<0?f=v+1:g=v}return f},right:function(u,h,f,g){for(null==f&&(f=0),null==g&&(g=u.length);f<g;){var v=f+g>>>1;i(u[v],h)>0?g=v:f=v+1}return f}}};var xe=Q(be),Ue=xe.right,Be=xe.left;function Le(i,u){return[i,u]}var ye=function(i){return null===i?NaN:+i},kt=function(i,u){var E,I,h=i.length,f=0,g=-1,v=0,S=0;if(null==u)for(;++g<h;)isNaN(E=ye(i[g]))||(S+=(I=E-v)*(E-(v+=I/++f)));else for(;++g<h;)isNaN(E=ye(u(i[g],g,i)))||(S+=(I=E-v)*(E-(v+=I/++f)));if(f>1)return S/(f-1)},ot=function(i,u){var h=kt(i,u);return h&&Math.sqrt(h)},Ye=function(i,u){var g,v,E,h=i.length,f=-1;if(null==u){for(;++f<h;)if(null!=(g=i[f])&&g>=g)for(v=E=g;++f<h;)null!=(g=i[f])&&(v>g&&(v=g),E<g&&(E=g))}else for(;++f<h;)if(null!=(g=u(i[f],f,i))&&g>=g)for(v=E=g;++f<h;)null!=(g=u(i[f],f,i))&&(v>g&&(v=g),E<g&&(E=g));return[v,E]},It=Array.prototype,ge=It.slice,Me=It.map,lt=function(i){return function(){return i}},bt=function(i){return i},qe=function(i,u,h){i=+i,u=+u,h=(g=arguments.length)<2?(u=i,i=0,1):g<3?1:+h;for(var f=-1,g=0|Math.max(0,Math.ceil((u-i)/h)),v=new Array(g);++f<g;)v[f]=i+f*h;return v},We=Math.sqrt(50),Xe=Math.sqrt(10),ut=Math.sqrt(2),vt=function(i,u,h){var v,E,I,f=u<i,g=-1;if(f&&(v=i,i=u,u=v),0===(I=ce(i,u,h))||!isFinite(I))return[];if(I>0)for(i=Math.ceil(i/I),u=Math.floor(u/I),E=new Array(v=Math.ceil(u-i+1));++g<v;)E[g]=(i+g)*I;else for(i=Math.floor(i*I),u=Math.ceil(u*I),E=new Array(v=Math.ceil(i-u+1));++g<v;)E[g]=(i-g)/I;return f&&E.reverse(),E};function ce(i,u,h){var f=(u-i)/Math.max(0,h),g=Math.floor(Math.log(f)/Math.LN10),v=f/Math.pow(10,g);return g>=0?(v>=We?10:v>=Xe?5:v>=ut?2:1)*Math.pow(10,g):-Math.pow(10,-g)/(v>=We?10:v>=Xe?5:v>=ut?2:1)}function Ke(i,u,h){var f=Math.abs(u-i)/Math.max(0,h),g=Math.pow(10,Math.floor(Math.log(f)/Math.LN10)),v=f/g;return v>=We?g*=10:v>=Xe?g*=5:v>=ut&&(g*=2),u<i?-g:g}var fe=function(i){return Math.ceil(Math.log(i.length)/Math.LN2)+1},De=function(i,u,h){if(null==h&&(h=ye),f=i.length){if((u=+u)<=0||f<2)return+h(i[0],0,i);if(u>=1)return+h(i[f-1],f-1,i);var f,g=(f-1)*u,v=Math.floor(g),E=+h(i[v],v,i);return E+(+h(i[v+1],v+1,i)-E)*(g-v)}},Xt=function(i){for(var h,v,E,u=i.length,f=-1,g=0;++f<u;)g+=i[f].length;for(v=new Array(g);--u>=0;)for(h=(E=i[u]).length;--h>=0;)v[--g]=E[h];return v},_t=function(i,u){var g,v,h=i.length,f=-1;if(null==u){for(;++f<h;)if(null!=(g=i[f])&&g>=g)for(v=g;++f<h;)null!=(g=i[f])&&v>g&&(v=g)}else for(;++f<h;)if(null!=(g=u(i[f],f,i))&&g>=g)for(v=g;++f<h;)null!=(g=u(i[f],f,i))&&v>g&&(v=g);return v},Ar=function(i){if(!(v=i.length))return[];for(var u=-1,h=_t(i,Zn),f=new Array(h);++u<h;)for(var v,g=-1,E=f[u]=new Array(v);++g<v;)E[g]=i[g][u];return f};function Zn(i){return i.length}var Os=Array.prototype.slice,gs=function(i){return i};function to(i){return"translate("+(i+.5)+",0)"}function pn(i){return"translate(0,"+(i+.5)+")"}function Us(i){var u=Math.max(0,i.bandwidth()-1)/2;return i.round()&&(u=Math.round(u)),function(h){return i(h)+u}}function xr(){return!this.__axis}function Er(i,u){var h=[],f=null,g=null,v=6,E=6,I=3,S=1===i||4===i?-1:1,k=4===i||2===i?"x":"y",O=1===i||3===i?to:pn;function U(N){var V=null==f?u.ticks?u.ticks.apply(u,h):u.domain():f,H=null==g?u.tickFormat?u.tickFormat.apply(u,h):gs:g,G=Math.max(v,0)+I,Y=u.range(),J=Y[0]+.5,he=Y[Y.length-1]+.5,ee=(u.bandwidth?Us:gs)(u.copy()),Ce=N.selection?N.selection():N,ke=Ce.selectAll(".domain").data([null]),Se=Ce.selectAll(".tick").data(V,u).order(),_e=Se.exit(),ze=Se.enter().append("g").attr("class","tick"),je=Se.select("line"),xt=Se.select("text");ke=ke.merge(ke.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),Se=Se.merge(ze),je=je.merge(ze.append("line").attr("stroke","#000").attr(k+"2",S*v)),xt=xt.merge(ze.append("text").attr("fill","#000").attr(k,S*G).attr("dy",1===i?"0em":3===i?"0.71em":"0.32em")),N!==Ce&&(ke=ke.transition(N),Se=Se.transition(N),je=je.transition(N),xt=xt.transition(N),_e=_e.transition(N).attr("opacity",1e-6).attr("transform",function(mt){return isFinite(mt=ee(mt))?O(mt):this.getAttribute("transform")}),ze.attr("opacity",1e-6).attr("transform",function(mt){var Qe=this.parentNode.__axis;return O(Qe&&isFinite(Qe=Qe(mt))?Qe:ee(mt))})),_e.remove(),ke.attr("d",4===i||2==i?"M"+S*E+","+J+"H0.5V"+he+"H"+S*E:"M"+J+","+S*E+"V0.5H"+he+"V"+S*E),Se.attr("opacity",1).attr("transform",function(mt){return O(ee(mt))}),je.attr(k+"2",S*v),xt.attr(k,S*G).text(H),Ce.filter(xr).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===i?"start":4===i?"end":"middle"),Ce.each(function(){this.__axis=ee})}return U.scale=function(N){return arguments.length?(u=N,U):u},U.ticks=function(){return h=Os.call(arguments),U},U.tickArguments=function(N){return arguments.length?(h=null==N?[]:Os.call(N),U):h.slice()},U.tickValues=function(N){return arguments.length?(f=null==N?null:Os.call(N),U):f&&f.slice()},U.tickFormat=function(N){return arguments.length?(g=N,U):g},U.tickSize=function(N){return arguments.length?(v=E=+N,U):v},U.tickSizeInner=function(N){return arguments.length?(v=+N,U):v},U.tickSizeOuter=function(N){return arguments.length?(E=+N,U):E},U.tickPadding=function(N){return arguments.length?(I=+N,U):I},U}var no={value:function(){}};function ys(){for(var f,i=0,u=arguments.length,h={};i<u;++i){if(!(f=arguments[i]+"")||f in h)throw new Error("illegal type: "+f);h[f]=[]}return new qn(h)}function qn(i){this._=i}function rn(i,u){return i.trim().split(/^|\s+/).map(function(h){var f="",g=h.indexOf(".");if(g>=0&&(f=h.slice(g+1),h=h.slice(0,g)),h&&!u.hasOwnProperty(h))throw new Error("unknown type: "+h);return{type:h,name:f}})}function mn(i,u){for(var g,h=0,f=i.length;h<f;++h)if((g=i[h]).name===u)return g.value}function Ci(i,u,h){for(var f=0,g=i.length;f<g;++f)if(i[f].name===u){i[f]=no,i=i.slice(0,f).concat(i.slice(f+1));break}return null!=h&&i.push({name:u,value:h}),i}qn.prototype=ys.prototype={constructor:qn,on:function(i,u){var g,h=this._,f=rn(i+"",h),v=-1,E=f.length;if(!(arguments.length<2)){if(null!=u&&"function"!=typeof u)throw new Error("invalid callback: "+u);for(;++v<E;)if(g=(i=f[v]).type)h[g]=Ci(h[g],i.name,u);else if(null==u)for(g in h)h[g]=Ci(h[g],i.name,null);return this}for(;++v<E;)if((g=(i=f[v]).type)&&(g=mn(h[g],i.name)))return g},copy:function(){var i={},u=this._;for(var h in u)i[h]=u[h].slice();return new qn(i)},call:function(i,u){if((g=arguments.length-2)>0)for(var g,v,h=new Array(g),f=0;f<g;++f)h[f]=arguments[f+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(f=0,g=(v=this._[i]).length;f<g;++f)v[f].value.apply(u,h)},apply:function(i,u,h){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var f=this._[i],g=0,v=f.length;g<v;++g)f[g].value.apply(u,h)}};var Ki="http://www.w3.org/1999/xhtml",Un={svg:"http://www.w3.org/2000/svg",xhtml:Ki,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Vs=function(i){var u=i+="",h=u.indexOf(":");return h>=0&&"xmlns"!==(u=i.slice(0,h))&&(i=i.slice(h+1)),Un.hasOwnProperty(u)?{space:Un[u],local:i}:i};function Pi(i){return function(){var u=this.ownerDocument,h=this.namespaceURI;return h===Ki&&u.documentElement.namespaceURI===Ki?u.createElement(i):u.createElementNS(h,i)}}function pi(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}var sn=function(i){var u=Vs(i);return(u.local?pi:Pi)(u)},ve=0;function se(){return new Ee}function Ee(){this._="@"+(++ve).toString(36)}Ee.prototype=se.prototype={constructor:Ee,get:function(i){for(var u=this._;!(u in i);)if(!(i=i.parentNode))return;return i[u]},set:function(i,u){return i[this._]=u},remove:function(i){return this._ in i&&delete i[this._]},toString:function(){return this._}};var Ie=function(i){return function(){return this.matches(i)}};if("undefined"!=typeof document){var ne=document.documentElement;if(!ne.matches){var nt=ne.webkitMatchesSelector||ne.msMatchesSelector||ne.mozMatchesSelector||ne.oMatchesSelector;Ie=function(i){return function(){return nt.call(this,i)}}}}var Ct=Ie,Ht={};function nr(i,u,h){return i=ar(i,u,h),function(f){var g=f.relatedTarget;(!g||g!==this&&!(8&g.compareDocumentPosition(this)))&&i.call(this,f)}}function ar(i,u,h){return function(f){var g=M.event;M.event=f;try{i.call(this,this.__data__,u,h)}finally{M.event=g}}}function Bn(i){return i.trim().split(/^|\s+/).map(function(u){var h="",f=u.indexOf(".");return f>=0&&(h=u.slice(f+1),u=u.slice(0,f)),{type:u,name:h}})}function Zr(i){return function(){var u=this.__on;if(u){for(var v,h=0,f=-1,g=u.length;h<g;++h)v=u[h],i.type&&v.type!==i.type||v.name!==i.name?u[++f]=v:this.removeEventListener(v.type,v.listener,v.capture);++f?u.length=f:delete this.__on}}}function xa(i,u,h){var f=Ht.hasOwnProperty(i.type)?nr:ar;return function(g,v,E){var S,I=this.__on,k=f(u,v,E);if(I)for(var O=0,U=I.length;O<U;++O)if((S=I[O]).type===i.type&&S.name===i.name)return this.removeEventListener(S.type,S.listener,S.capture),this.addEventListener(S.type,S.listener=k,S.capture=h),void(S.value=u);this.addEventListener(i.type,k,h),S={type:i.type,name:i.name,value:u,listener:k,capture:h},I?I.push(S):this.__on=[S]}}M.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Ht={mouseenter:"mouseover",mouseleave:"mouseout"}));function ia(i,u,h,f){var g=M.event;i.sourceEvent=M.event,M.event=i;try{return u.apply(h,f)}finally{M.event=g}}var Ra=function(){for(var u,i=M.event;u=i.sourceEvent;)i=u;return i},$r=function(i,u){var h=i.ownerSVGElement||i;if(h.createSVGPoint){var f=h.createSVGPoint();return f.x=u.clientX,f.y=u.clientY,[(f=f.matrixTransform(i.getScreenCTM().inverse())).x,f.y]}var g=i.getBoundingClientRect();return[u.clientX-g.left-i.clientLeft,u.clientY-g.top-i.clientTop]},Rr=function(i){var u=Ra();return u.changedTouches&&(u=u.changedTouches[0]),$r(i,u)};function jo(){}var kr=function(i){return null==i?jo:function(){return this.querySelector(i)}};function th(){return[]}var $o=function(i){return null==i?th:function(){return this.querySelectorAll(i)}},gi=function(i){return new Array(i.length)};function ai(i,u){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=u}ai.prototype={constructor:ai,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,u){return this._parent.insertBefore(i,u)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};function hr(i,u,h,f,g,v){for(var I,E=0,S=u.length,k=v.length;E<k;++E)(I=u[E])?(I.__data__=v[E],f[E]=I):h[E]=new ai(i,v[E]);for(;E<S;++E)(I=u[E])&&(g[E]=I)}function _s(i,u,h,f,g,v,E){var I,S,V,k={},O=u.length,U=v.length,N=new Array(O);for(I=0;I<O;++I)(S=u[I])&&(N[I]=V="$"+E.call(S,S.__data__,I,u),V in k?g[I]=S:k[V]=S);for(I=0;I<U;++I)(S=k[V="$"+E.call(i,v[I],I,v)])?(f[I]=S,S.__data__=v[I],k[V]=null):h[I]=new ai(i,v[I]);for(I=0;I<O;++I)(S=u[I])&&k[N[I]]===S&&(g[I]=S)}function tt(i,u){return i<u?-1:i>u?1:i>=u?0:NaN}function yn(i){return function(){this.removeAttribute(i)}}function Ln(i){return function(){this.removeAttributeNS(i.space,i.local)}}function pr(i,u){return function(){this.setAttribute(i,u)}}function $n(i,u){return function(){this.setAttributeNS(i.space,i.local,u)}}function Nr(i,u){return function(){var h=u.apply(this,arguments);null==h?this.removeAttribute(i):this.setAttribute(i,h)}}function oa(i,u){return function(){var h=u.apply(this,arguments);null==h?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,h)}}var ws=function(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView};function Tc(i){return function(){this.style.removeProperty(i)}}function uu(i,u,h){return function(){this.style.setProperty(i,u,h)}}function bs(i,u,h){return function(){var f=u.apply(this,arguments);null==f?this.style.removeProperty(i):this.style.setProperty(i,f,h)}}function bo(i,u){return i.style.getPropertyValue(u)||ws(i).getComputedStyle(i,null).getPropertyValue(u)}function qf(i){return function(){delete this[i]}}function Wf(i,u){return function(){this[i]=u}}function Es(i,u){return function(){var h=u.apply(this,arguments);null==h?delete this[i]:this[i]=h}}function wd(i){return i.trim().split(/^|\s+/)}function Kf(i){return i.classList||new aa(i)}function aa(i){this._node=i,this._names=wd(i.getAttribute("class")||"")}function em(i,u){for(var h=Kf(i),f=-1,g=u.length;++f<g;)h.add(u[f])}function bd(i,u){for(var h=Kf(i),f=-1,g=u.length;++f<g;)h.remove(u[f])}function Ed(i){return function(){em(this,i)}}function lu(i){return function(){bd(this,i)}}function rv(i,u){return function(){(u.apply(this,arguments)?em:bd)(this,i)}}aa.prototype={add:function(i){this._names.indexOf(i)<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var u=this._names.indexOf(i);u>=0&&(this._names.splice(u,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};function iv(){this.textContent=""}function sv(i){return function(){this.textContent=i}}function Yf(i){return function(){var u=i.apply(this,arguments);this.textContent=null==u?"":u}}function tm(){this.innerHTML=""}function Il(i){return function(){this.innerHTML=i}}function nh(i){return function(){var u=i.apply(this,arguments);this.innerHTML=null==u?"":u}}function Xf(){this.nextSibling&&this.parentNode.appendChild(this)}function Ku(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Jf(){return null}function ep(){var i=this.parentNode;i&&i.removeChild(this)}function Cs(i,u,h){var f=ws(i),g=f.CustomEvent;"function"==typeof g?g=new g(u,h):(g=f.document.createEvent("Event"),h?(g.initEvent(u,h.bubbles,h.cancelable),g.detail=h.detail):g.initEvent(u,!1,!1)),i.dispatchEvent(g)}function tp(i,u){return function(){return Cs(this,i,u)}}function js(i,u){return function(){return Cs(this,i,u.apply(this,arguments))}}var $s=[null];function Oi(i,u){this._groups=i,this._parents=u}function hu(){return new Oi([[document.documentElement]],$s)}Oi.prototype=hu.prototype={constructor:Oi,select:function(i){"function"!=typeof i&&(i=kr(i));for(var u=this._groups,h=u.length,f=new Array(h),g=0;g<h;++g)for(var S,k,v=u[g],E=v.length,I=f[g]=new Array(E),O=0;O<E;++O)(S=v[O])&&(k=i.call(S,S.__data__,O,v))&&("__data__"in S&&(k.__data__=S.__data__),I[O]=k);return new Oi(f,this._parents)},selectAll:function(i){"function"!=typeof i&&(i=$o(i));for(var u=this._groups,h=u.length,f=[],g=[],v=0;v<h;++v)for(var S,E=u[v],I=E.length,k=0;k<I;++k)(S=E[k])&&(f.push(i.call(S,S.__data__,k,E)),g.push(S));return new Oi(f,g)},filter:function(i){"function"!=typeof i&&(i=Ct(i));for(var u=this._groups,h=u.length,f=new Array(h),g=0;g<h;++g)for(var S,v=u[g],E=v.length,I=f[g]=[],k=0;k<E;++k)(S=v[k])&&i.call(S,S.__data__,k,v)&&I.push(S);return new Oi(f,this._parents)},data:function(i,u){if(!i)return V=new Array(this.size()),k=-1,this.each(function(Se){V[++k]=Se}),V;var h=u?_s:hr,f=this._parents,g=this._groups;"function"!=typeof i&&(i=function(i){return function(){return i}}(i));for(var v=g.length,E=new Array(v),I=new Array(v),S=new Array(v),k=0;k<v;++k){var O=f[k],U=g[k],N=U.length,V=i.call(O,O&&O.__data__,k,f),H=V.length,G=I[k]=new Array(H),Y=E[k]=new Array(H);h(O,U,G,Y,S[k]=new Array(N),V,u);for(var Ce,ke,he=0,ee=0;he<H;++he)if(Ce=G[he]){for(he>=ee&&(ee=he+1);!(ke=Y[ee])&&++ee<H;);Ce._next=ke||null}}return(E=new Oi(E,f))._enter=I,E._exit=S,E},enter:function(){return new Oi(this._enter||this._groups.map(gi),this._parents)},exit:function(){return new Oi(this._exit||this._groups.map(gi),this._parents)},merge:function(i){for(var u=this._groups,h=i._groups,f=u.length,v=Math.min(f,h.length),E=new Array(f),I=0;I<v;++I)for(var N,S=u[I],k=h[I],O=S.length,U=E[I]=new Array(O),V=0;V<O;++V)(N=S[V]||k[V])&&(U[V]=N);for(;I<f;++I)E[I]=u[I];return new Oi(E,this._parents)},order:function(){for(var i=this._groups,u=-1,h=i.length;++u<h;)for(var E,f=i[u],g=f.length-1,v=f[g];--g>=0;)(E=f[g])&&(v&&v!==E.nextSibling&&v.parentNode.insertBefore(E,v),v=E);return this},sort:function(i){function u(U,N){return U&&N?i(U.__data__,N.__data__):!U-!N}i||(i=tt);for(var h=this._groups,f=h.length,g=new Array(f),v=0;v<f;++v){for(var k,E=h[v],I=E.length,S=g[v]=new Array(I),O=0;O<I;++O)(k=E[O])&&(S[O]=k);S.sort(u)}return new Oi(g,this._parents).order()},call:function(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this},nodes:function(){var i=new Array(this.size()),u=-1;return this.each(function(){i[++u]=this}),i},node:function(){for(var i=this._groups,u=0,h=i.length;u<h;++u)for(var f=i[u],g=0,v=f.length;g<v;++g){var E=f[g];if(E)return E}return null},size:function(){var i=0;return this.each(function(){++i}),i},empty:function(){return!this.node()},each:function(i){for(var u=this._groups,h=0,f=u.length;h<f;++h)for(var I,g=u[h],v=0,E=g.length;v<E;++v)(I=g[v])&&i.call(I,I.__data__,v,g);return this},attr:function(i,u){var h=Vs(i);if(arguments.length<2){var f=this.node();return h.local?f.getAttributeNS(h.space,h.local):f.getAttribute(h)}return this.each((null==u?h.local?Ln:yn:"function"==typeof u?h.local?oa:Nr:h.local?$n:pr)(h,u))},style:function(i,u,h){return arguments.length>1?this.each((null==u?Tc:"function"==typeof u?bs:uu)(i,u,null==h?"":h)):bo(this.node(),i)},property:function(i,u){return arguments.length>1?this.each((null==u?qf:"function"==typeof u?Es:Wf)(i,u)):this.node()[i]},classed:function(i,u){var h=wd(i+"");if(arguments.length<2){for(var f=Kf(this.node()),g=-1,v=h.length;++g<v;)if(!f.contains(h[g]))return!1;return!0}return this.each(("function"==typeof u?rv:u?Ed:lu)(h,u))},text:function(i){return arguments.length?this.each(null==i?iv:("function"==typeof i?Yf:sv)(i)):this.node().textContent},html:function(i){return arguments.length?this.each(null==i?tm:("function"==typeof i?nh:Il)(i)):this.node().innerHTML},raise:function(){return this.each(Xf)},lower:function(){return this.each(Ku)},append:function(i){var u="function"==typeof i?i:sn(i);return this.select(function(){return this.appendChild(u.apply(this,arguments))})},insert:function(i,u){var h="function"==typeof i?i:sn(i),f=null==u?Jf:"function"==typeof u?u:kr(u);return this.select(function(){return this.insertBefore(h.apply(this,arguments),f.apply(this,arguments)||null)})},remove:function(){return this.each(ep)},datum:function(i){return arguments.length?this.property("__data__",i):this.node().__data__},on:function(i,u,h){var g,E,f=Bn(i+""),v=f.length;if(!(arguments.length<2)){for(I=u?xa:Zr,null==h&&(h=!1),g=0;g<v;++g)this.each(I(f[g],u,h));return this}var I=this.node().__on;if(I)for(var O,S=0,k=I.length;S<k;++S)for(g=0,O=I[S];g<v;++g)if((E=f[g]).type===O.type&&E.name===O.name)return O.value},dispatch:function(i,u){return this.each(("function"==typeof u?js:tp)(i,u))}};var Ts=function(i){return"string"==typeof i?new Oi([[document.querySelector(i)]],[document.documentElement]):new Oi([[i]],$s)},Rc=function(i,u,h){arguments.length<3&&(h=u,u=Ra().changedTouches);for(var v,f=0,g=u?u.length:0;f<g;++f)if((v=u[f]).identifier===h)return $r(i,v);return null};function Id(){M.event.stopImmediatePropagation()}var Jn=function(){M.event.preventDefault(),M.event.stopImmediatePropagation()},du=function(i){var u=i.document.documentElement,h=Ts(i).on("dragstart.drag",Jn,!0);"onselectstart"in u?h.on("selectstart.drag",Jn,!0):(u.__noselect=u.style.MozUserSelect,u.style.MozUserSelect="none")};function la(i,u){var h=i.document.documentElement,f=Ts(i).on("dragstart.drag",null);u&&(f.on("click.drag",Jn,!0),setTimeout(function(){f.on("click.drag",null)},0)),"onselectstart"in h?f.on("selectstart.drag",null):(h.style.MozUserSelect=h.__noselect,delete h.__noselect)}var rr=function(i){return function(){return i}};function Yu(i,u,h,f,g,v,E,I,S,k){this.target=i,this.type=u,this.subject=h,this.identifier=f,this.active=g,this.x=v,this.y=E,this.dx=I,this.dy=S,this._=k}function rh(){return!M.event.button}function fu(){return this.parentNode}function Yi(i){return null==i?{x:M.event.x,y:M.event.y}:i}Yu.prototype.on=function(){var i=this._.on.apply(this._,arguments);return i===this._?this:i};var gr=function(i,u,h){i.prototype=u.prototype=h,h.constructor=i};function Hs(i,u){var h=Object.create(i.prototype);for(var f in u)h[f]=u[f];return h}function Pr(){}var zs=1/.7,ha="\\s*([+-]?\\d+)\\s*",Ds="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",mi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kc=/^#([0-9a-f]{3})$/,wn=/^#([0-9a-f]{6})$/,pu=new RegExp("^rgb\\("+[ha,ha,ha]+"\\)$"),Td=new RegExp("^rgb\\("+[mi,mi,mi]+"\\)$"),Cl=new RegExp("^rgba\\("+[ha,ha,ha,Ds]+"\\)$"),Dd=new RegExp("^rgba\\("+[mi,mi,mi,Ds]+"\\)$"),ih=new RegExp("^hsl\\("+[Ds,mi,mi]+"\\)$"),sh=new RegExp("^hsla\\("+[Ds,mi,mi,Ds]+"\\)$"),oh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function so(i){var u;return i=(i+"").trim().toLowerCase(),(u=kc.exec(i))?new ui((u=parseInt(u[1],16))>>8&15|u>>4&240,u>>4&15|240&u,(15&u)<<4|15&u,1):(u=wn.exec(i))?ct(parseInt(u[1],16)):(u=pu.exec(i))?new ui(u[1],u[2],u[3],1):(u=Td.exec(i))?new ui(255*u[1]/100,255*u[2]/100,255*u[3]/100,1):(u=Cl.exec(i))?Wn(u[1],u[2],u[3],u[4]):(u=Dd.exec(i))?Wn(255*u[1]/100,255*u[2]/100,255*u[3]/100,u[4]):(u=ih.exec(i))?gu(u[1],u[2]/100,u[3]/100,1):(u=sh.exec(i))?gu(u[1],u[2]/100,u[3]/100,u[4]):oh.hasOwnProperty(i)?ct(oh[i]):"transparent"===i?new ui(NaN,NaN,NaN,0):null}function ct(i){return new ui(i>>16&255,i>>8&255,255&i,1)}function Wn(i,u,h,f){return f<=0&&(i=u=h=NaN),new ui(i,u,h,f)}function Qu(i){return i instanceof Pr||(i=so(i)),i?new ui((i=i.rgb()).r,i.g,i.b,i.opacity):new ui}function mr(i,u,h,f){return 1===arguments.length?Qu(i):new ui(i,u,h,null==f?1:f)}function ui(i,u,h,f){this.r=+i,this.g=+u,this.b=+h,this.opacity=+f}function gu(i,u,h,f){return f<=0?i=u=h=NaN:h<=0||h>=1?i=u=NaN:u<=0&&(i=NaN),new Io(i,u,h,f)}function Eo(i){if(i instanceof Io)return new Io(i.h,i.s,i.l,i.opacity);if(i instanceof Pr||(i=so(i)),!i)return new Io;if(i instanceof Io)return i;var u=(i=i.rgb()).r/255,h=i.g/255,f=i.b/255,g=Math.min(u,h,f),v=Math.max(u,h,f),E=NaN,I=v-g,S=(v+g)/2;return I?(E=u===v?(h-f)/I+6*(h<f):h===v?(f-u)/I+2:(u-h)/I+4,I/=S<.5?v+g:2-v-g,E*=60):I=S>0&&S<1?0:E,new Io(E,I,S,i.opacity)}function Nc(i,u,h,f){return 1===arguments.length?Eo(i):new Io(i,u,h,null==f?1:f)}function Io(i,u,h,f){this.h=+i,this.s=+u,this.l=+h,this.opacity=+f}function Tl(i,u,h){return 255*(i<60?u+(h-u)*i/60:i<180?h:i<240?u+(h-u)*(240-i)/60:u)}gr(Pr,so,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),gr(ui,mr,Hs(Pr,{brighter:function(i){return i=null==i?zs:Math.pow(zs,i),new ui(this.r*i,this.g*i,this.b*i,this.opacity)},darker:function(i){return i=null==i?.7:Math.pow(.7,i),new ui(this.r*i,this.g*i,this.b*i,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var i=this.opacity;return(1===(i=isNaN(i)?1:Math.max(0,Math.min(1,i)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===i?")":", "+i+")")}})),gr(Io,Nc,Hs(Pr,{brighter:function(i){return i=null==i?zs:Math.pow(zs,i),new Io(this.h,this.s,this.l*i,this.opacity)},darker:function(i){return i=null==i?.7:Math.pow(.7,i),new Io(this.h,this.s,this.l*i,this.opacity)},rgb:function(){var i=this.h%360+360*(this.h<0),u=isNaN(i)||isNaN(this.s)?0:this.s,h=this.l,f=h+(h<.5?h:1-h)*u,g=2*h-f;return new ui(Tl(i>=240?i-240:i+120,g,f),Tl(i,g,f),Tl(i<120?i+240:i-120,g,f),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Sd=Math.PI/180,rm=180/Math.PI,ka=4/29,Xi=6/29,ah=3*Xi*Xi;function Pc(i){if(i instanceof ao)return new ao(i.l,i.a,i.b,i.opacity);if(i instanceof Na){var u=i.h*Sd;return new ao(i.l,Math.cos(u)*i.c,Math.sin(u)*i.c,i.opacity)}i instanceof ui||(i=Qu(i));var h=lh(i.r),f=lh(i.g),g=lh(i.b),v=Lc((.4124564*h+.3575761*f+.1804375*g)/.95047),E=Lc((.2126729*h+.7151522*f+.072175*g)/1);return new ao(116*E-16,500*(v-E),200*(E-Lc((.0193339*h+.119192*f+.9503041*g)/1.08883)),i.opacity)}function Oc(i,u,h,f){return 1===arguments.length?Pc(i):new ao(i,u,h,null==f?1:f)}function ao(i,u,h,f){this.l=+i,this.a=+u,this.b=+h,this.opacity=+f}function Lc(i){return i>.008856451679035631?Math.pow(i,1/3):i/ah+ka}function Fc(i){return i>Xi?i*i*i:ah*(i-ka)}function ch(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function lh(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function hh(i){if(i instanceof Na)return new Na(i.h,i.c,i.l,i.opacity);i instanceof ao||(i=Pc(i));var u=Math.atan2(i.b,i.a)*rm;return new Na(u<0?u+360:u,Math.sqrt(i.a*i.a+i.b*i.b),i.l,i.opacity)}function da(i,u,h,f){return 1===arguments.length?hh(i):new Na(i,u,h,null==f?1:f)}function Na(i,u,h,f){this.h=+i,this.c=+u,this.l=+h,this.opacity=+f}gr(ao,Oc,Hs(Pr,{brighter:function(i){return new ao(this.l+18*(null==i?1:i),this.a,this.b,this.opacity)},darker:function(i){return new ao(this.l-18*(null==i?1:i),this.a,this.b,this.opacity)},rgb:function(){var i=(this.l+16)/116,u=isNaN(this.a)?i:i+this.a/500,h=isNaN(this.b)?i:i-this.b/200;return i=1*Fc(i),new ui(ch(3.2404542*(u=.95047*Fc(u))-1.5371385*i-.4985314*(h=1.08883*Fc(h))),ch(-.969266*u+1.8760108*i+.041556*h),ch(.0556434*u-.2040259*i+1.0572252*h),this.opacity)}})),gr(Na,da,Hs(Pr,{brighter:function(i){return new Na(this.h,this.c,this.l+18*(null==i?1:i),this.opacity)},darker:function(i){return new Na(this.h,this.c,this.l-18*(null==i?1:i),this.opacity)},rgb:function(){return Pc(this).rgb()}}));var dh=1.78277,Uc=-.29227,Ji=-.90649,Sl=1.97294,fh=Sl*Ji,Ti=Sl*dh,mu=dh*Uc- -.14861*Ji;function yi(i){if(i instanceof ph)return new ph(i.h,i.s,i.l,i.opacity);i instanceof ui||(i=Qu(i));var h=i.g/255,f=i.b/255,g=(mu*f+fh*(i.r/255)-Ti*h)/(mu+fh-Ti),v=f-g,E=(Sl*(h-g)-Uc*v)/Ji,I=Math.sqrt(E*E+v*v)/(Sl*g*(1-g)),S=I?Math.atan2(E,v)*rm-120:NaN;return new ph(S<0?S+360:S,I,g,i.opacity)}function To(i,u,h,f){return 1===arguments.length?yi(i):new ph(i,u,h,null==f?1:f)}function ph(i,u,h,f){this.h=+i,this.s=+u,this.l=+h,this.opacity=+f}function im(i,u,h,f,g){var v=i*i,E=v*i;return((1-3*i+3*v-E)*u+(4-6*v+3*E)*h+(1+3*i+3*v-3*E)*f+E*g)/6}gr(ph,To,Hs(Pr,{brighter:function(i){return i=null==i?zs:Math.pow(zs,i),new ph(this.h,this.s,this.l*i,this.opacity)},darker:function(i){return i=null==i?.7:Math.pow(.7,i),new ph(this.h,this.s,this.l*i,this.opacity)},rgb:function(){var i=isNaN(this.h)?0:(this.h+120)*Sd,u=+this.l,h=isNaN(this.s)?0:this.s*u*(1-u),f=Math.cos(i),g=Math.sin(i);return new ui(255*(u+h*(-.14861*f+dh*g)),255*(u+h*(Uc*f+Ji*g)),255*(u+h*(Sl*f)),this.opacity)}}));var Ad=function(i){var u=i.length-1;return function(h){var f=h<=0?h=0:h>=1?(h=1,u-1):Math.floor(h*u),g=i[f],v=i[f+1];return im((h-f/u)*u,f>0?i[f-1]:2*g-v,g,v,f<u-1?i[f+2]:2*v-g)}},sm=function(i){var u=i.length;return function(h){var f=Math.floor(((h%=1)<0?++h:h)*u);return im((h-f/u)*u,i[(f+u-1)%u],i[f%u],i[(f+1)%u],i[(f+2)%u])}},np=function(i){return function(){return i}};function Bc(i,u){return function(h){return i+h*u}}function Oa(i,u){var h=u-i;return h?Bc(i,h>180||h<-180?h-360*Math.round(h/360):h):np(isNaN(i)?u:i)}function Di(i){return 1==(i=+i)?vi:function(u,h){return h-u?function Pa(i,u,h){return i=Math.pow(i,h),u=Math.pow(u,h)-i,h=1/h,function(f){return Math.pow(i+f*u,h)}}(u,h,i):np(isNaN(u)?h:u)}}function vi(i,u){var h=u-i;return h?Bc(i,h):np(isNaN(i)?u:i)}var gh=function i(u){var h=Di(u);function f(g,v){var E=h((g=mr(g)).r,(v=mr(v)).r),I=h(g.g,v.g),S=h(g.b,v.b),k=vi(g.opacity,v.opacity);return function(O){return g.r=E(O),g.g=I(O),g.b=S(O),g.opacity=k(O),g+""}}return f.gamma=i,f}(1);function yu(i){return function(u){var E,I,h=u.length,f=new Array(h),g=new Array(h),v=new Array(h);for(E=0;E<h;++E)I=mr(u[E]),f[E]=I.r||0,g[E]=I.g||0,v[E]=I.b||0;return f=i(f),g=i(g),v=i(v),I.opacity=1,function(S){return I.r=f(S),I.g=g(S),I.b=v(S),I+""}}}var Vc=yu(Ad),mh=yu(sm),om=function(i,u){var E,h=u?u.length:0,f=i?Math.min(h,i.length):0,g=new Array(h),v=new Array(h);for(E=0;E<f;++E)g[E]=Hr(i[E],u[E]);for(;E<h;++E)v[E]=u[E];return function(I){for(E=0;E<f;++E)v[E]=g[E](I);return v}},fa=function(i,u){var h=new Date;return u-=i=+i,function(f){return h.setTime(i+u*f),h}},es=function(i,u){return u-=i=+i,function(h){return i+u*h}},am=function(i,u){var g,h={},f={};for(g in(null===i||"object"!=typeof i)&&(i={}),(null===u||"object"!=typeof u)&&(u={}),u)g in i?h[g]=Hr(i[g],u[g]):f[g]=u[g];return function(v){for(g in h)f[g]=h[g](v);return f}},Or=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jc=new RegExp(Or.source,"g");var Lr,pa,Ho,En,uo=function(i,u){var f,g,v,h=Or.lastIndex=jc.lastIndex=0,E=-1,I=[],S=[];for(i+="",u+="";(f=Or.exec(i))&&(g=jc.exec(u));)(v=g.index)>h&&(v=u.slice(h,v),I[E]?I[E]+=v:I[++E]=v),(f=f[0])===(g=g[0])?I[E]?I[E]+=g:I[++E]=g:(I[++E]=null,S.push({i:E,x:es(f,g)})),h=jc.lastIndex;return h<u.length&&(v=u.slice(h),I[E]?I[E]+=v:I[++E]=v),I.length<2?S[0]?function Gs(i){return function(u){return i(u)+""}}(S[0].x):function an(i){return function(){return i}}(u):(u=S.length,function(k){for(var U,O=0;O<u;++O)I[(U=S[O]).i]=U.x(k);return I.join("")})},Hr=function(i,u){var f,h=typeof u;return null==u||"boolean"===h?np(u):("number"===h?es:"string"===h?(f=so(u))?(u=f,gh):uo:u instanceof so?gh:u instanceof Date?fa:Array.isArray(u)?om:"function"!=typeof u.valueOf&&"function"!=typeof u.toString||isNaN(u)?am:es)(i,u)},$c=function(i,u){return u-=i=+i,function(h){return Math.round(i+u*h)}},xd=180/Math.PI,vu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},La=function(i,u,h,f,g,v){var E,I,S;return(E=Math.sqrt(i*i+u*u))&&(i/=E,u/=E),(S=i*h+u*f)&&(h-=i*S,f-=u*S),(I=Math.sqrt(h*h+f*f))&&(h/=I,f/=I,S/=I),i*f<u*h&&(i=-i,u=-u,S=-S,E=-E),{translateX:g,translateY:v,rotate:Math.atan2(u,i)*xd,skewX:Math.atan(S)*xd,scaleX:E,scaleY:I}};function Md(i,u,h,f){function g(k){return k.length?k.pop()+" ":""}return function(k,O){var U=[],N=[];return k=i(k),O=i(O),function v(k,O,U,N,V,H){if(k!==U||O!==N){var G=V.push("translate(",null,u,null,h);H.push({i:G-4,x:es(k,U)},{i:G-2,x:es(O,N)})}else(U||N)&&V.push("translate("+U+u+N+h)}(k.translateX,k.translateY,O.translateX,O.translateY,U,N),function E(k,O,U,N){k!==O?(k-O>180?O+=360:O-k>180&&(k+=360),N.push({i:U.push(g(U)+"rotate(",null,f)-2,x:es(k,O)})):O&&U.push(g(U)+"rotate("+O+f)}(k.rotate,O.rotate,U,N),function I(k,O,U,N){k!==O?N.push({i:U.push(g(U)+"skewX(",null,f)-2,x:es(k,O)}):O&&U.push(g(U)+"skewX("+O+f)}(k.skewX,O.skewX,U,N),function S(k,O,U,N,V,H){if(k!==U||O!==N){var G=V.push(g(V)+"scale(",null,",",null,")");H.push({i:G-4,x:es(k,U)},{i:G-2,x:es(O,N)})}else(1!==U||1!==N)&&V.push(g(V)+"scale("+U+","+N+")")}(k.scaleX,k.scaleY,O.scaleX,O.scaleY,U,N),k=O=null,function(V){for(var Y,H=-1,G=N.length;++H<G;)U[(Y=N[H]).i]=Y.x(V);return U.join("")}}}var Rd=Md(function rp(i){return"none"===i?vu:(Lr||(Lr=document.createElement("DIV"),pa=document.documentElement,Ho=document.defaultView),Lr.style.transform=i,i=Ho.getComputedStyle(pa.appendChild(Lr),null).getPropertyValue("transform"),pa.removeChild(Lr),i=i.slice(7,-1).split(","),La(+i[0],+i[1],+i[2],+i[3],+i[4],+i[5]))},"px, ","px)","deg)"),ts=Md(function ip(i){return null!=i&&(En||(En=document.createElementNS("http://www.w3.org/2000/svg","g")),En.setAttribute("transform",i),i=En.transform.baseVal.consolidate())?La((i=i.matrix).a,i.b,i.c,i.d,i.e,i.f):vu},", ",")",")"),Do=Math.SQRT2;function bu(i){return((i=Math.exp(i))+1/i)/2}var Fa=function(i,u){var U,N,h=i[0],f=i[1],g=i[2],I=u[2],S=u[0]-h,k=u[1]-f,O=S*S+k*k;if(O<1e-12)N=Math.log(I/g)/Do,U=function(he){return[h+he*S,f+he*k,g*Math.exp(Do*he*N)]};else{var V=Math.sqrt(O),H=(I*I-g*g+4*O)/(2*g*2*V),G=(I*I-g*g-4*O)/(2*I*2*V),Y=Math.log(Math.sqrt(H*H+1)-H),J=Math.log(Math.sqrt(G*G+1)-G);N=(J-Y)/Do,U=function(he){var ee=he*N,Ce=bu(Y),ke=g/(2*V)*(Ce*function Hc(i){return((i=Math.exp(2*i))-1)/(i+1)}(Do*ee+Y)-function Ju(i){return((i=Math.exp(i))-1/i)/2}(Y));return[h+ke*S,f+ke*k,g*Ce/bu(Do*ee+Y)]}}return U.duration=1e3*N,U};function ec(i){return function(u,h){var f=i((u=Nc(u)).h,(h=Nc(h)).h),g=vi(u.s,h.s),v=vi(u.l,h.l),E=vi(u.opacity,h.opacity);return function(I){return u.h=f(I),u.s=g(I),u.l=v(I),u.opacity=E(I),u+""}}}var Eu=ec(Oa),zc=ec(vi);function Gc(i){return function(u,h){var f=i((u=da(u)).h,(h=da(h)).h),g=vi(u.c,h.c),v=vi(u.l,h.l),E=vi(u.opacity,h.opacity);return function(I){return u.h=f(I),u.c=g(I),u.l=v(I),u.opacity=E(I),u+""}}}var Ua=Gc(Oa),tc=Gc(vi);function Li(i){return function u(h){function f(g,v){var E=i((g=To(g)).h,(v=To(v)).h),I=vi(g.s,v.s),S=vi(g.l,v.l),k=vi(g.opacity,v.opacity);return function(O){return g.h=E(O),g.s=I(O),g.l=S(Math.pow(O,h)),g.opacity=k(O),g+""}}return h=+h,f.gamma=u,f}(1)}var ci,Ss,kd=Li(Oa),zo=Li(vi),So=0,Go=0,co=0,Qr=0,Si=0,qc=0,Al="object"==typeof performance&&performance.now?performance:Date,zr="function"==typeof requestAnimationFrame?requestAnimationFrame:function(i){setTimeout(i,17)};function Wc(){return Si||(zr(h0),Si=Al.now()+qc)}function h0(){Si=0}function ga(){this._call=this._time=this._next=null}function rs(i,u,h){var f=new ga;return f.restart(i,u,h),f}function Nd(){Wc(),++So;for(var u,i=ci;i;)(u=Si-i._time)>=0&&i._call.call(null,u),i=i._next;--So}function Ba(){Si=(Qr=Al.now())+qc,So=Go=0;try{Nd()}finally{So=0,function Va(){for(var i,h,u=ci,f=1/0;u;)u._call?(f>u._time&&(f=u._time),i=u,u=u._next):(h=u._next,u._next=null,u=i?i._next=h:ci=h);Ss=i,xl(f)}(),Si=0}}function op(){var i=Al.now(),u=i-Qr;u>1e3&&(qc-=u,Qr=i)}function xl(i){if(!So){Go&&(Go=clearTimeout(Go));var u=i-Si;u>24?(i<1/0&&(Go=setTimeout(Ba,u)),co&&(co=clearInterval(co))):(co||(Qr=Si,co=setInterval(op,1e3)),So=1,zr(Ba))}}ga.prototype=rs.prototype={constructor:ga,restart:function(i,u,h){if("function"!=typeof i)throw new TypeError("callback is not a function");h=(null==h?Wc():+h)+(null==u?0:+u),!this._next&&Ss!==this&&(Ss?Ss._next=this:ci=this,Ss=this),this._call=i,this._time=h,xl()},stop:function(){this._call&&(this._call=null,this._time=1/0,xl())}};var Xr=function(i,u,h){var f=new ga;return f.restart(function(g){f.stop(),i(g+u)},u=null==u?0:+u,h),f},yh=ys("start","end","interrupt"),ap=[],Ao=function(i,u,h,f,g,v){var E=i.__transition;if(E){if(h in E)return}else i.__transition={};!function Kc(i,u,h){var g,f=i.__transition;function v(k){h.state=1,h.timer.restart(E,h.delay,h.time),h.delay<=k&&E(k-h.delay)}function E(k){var O,U,N,V;if(1!==h.state)return S();for(O in f)if((V=f[O]).name===h.name){if(3===V.state)return Xr(E);4===V.state?(V.state=6,V.timer.stop(),V.on.call("interrupt",i,i.__data__,V.index,V.group),delete f[O]):+O<u&&(V.state=6,V.timer.stop(),delete f[O])}if(Xr(function(){3===h.state&&(h.state=4,h.timer.restart(I,h.delay,h.time),I(k))}),h.state=2,h.on.call("start",i,i.__data__,h.index,h.group),2===h.state){for(h.state=3,g=new Array(N=h.tween.length),O=0,U=-1;O<N;++O)(V=h.tween[O].value.call(i,i.__data__,h.index,h.group))&&(g[++U]=V);g.length=U+1}}function I(k){for(var O=k<h.duration?h.ease.call(null,k/h.duration):(h.timer.restart(S),h.state=5,1),U=-1,N=g.length;++U<N;)g[U].call(null,O);5===h.state&&(h.on.call("end",i,i.__data__,h.index,h.group),S())}function S(){for(var k in h.state=6,h.timer.stop(),delete f[u],f)return;delete i.__transition}f[u]=h,h.timer=rs(v,0,h.time)}(i,h,{name:u,index:f,group:g,on:yh,tween:ap,time:v.time,delay:v.delay,duration:v.duration,ease:v.ease,timer:null,state:0})};function Iu(i,u){var h=i.__transition;if(!h||!(h=h[u])||h.state>0)throw new Error("too late");return h}function xn(i,u){var h=i.__transition;if(!h||!(h=h[u])||h.state>2)throw new Error("too late");return h}function ma(i,u){var h=i.__transition;if(!h||!(h=h[u]))throw new Error("too late");return h}var Jr=function(i,u){var f,g,E,h=i.__transition,v=!0;if(h){for(E in u=null==u?null:u+"",h)(f=h[E]).name===u?(g=f.state>2&&f.state<5,f.state=6,f.timer.stop(),g&&f.on.call("interrupt",i,i.__data__,f.index,f.group),delete h[E]):v=!1;v&&delete i.__transition}};function Zc(i,u){var h,f;return function(){var g=xn(this,i),v=g.tween;if(v!==h)for(var E=0,I=(f=h=v).length;E<I;++E)if(f[E].name===u){(f=f.slice()).splice(E,1);break}g.tween=f}}function ov(i,u,h){var f,g;if("function"!=typeof h)throw new Error;return function(){var v=xn(this,i),E=v.tween;if(E!==f){g=(f=E).slice();for(var I={name:u,value:h},S=0,k=g.length;S<k;++S)if(g[S].name===u){g[S]=I;break}S===k&&g.push(I)}v.tween=g}}function lo(i,u,h){var f=i._id;return i.each(function(){var g=xn(this,f);(g.value||(g.value={}))[u]=h.apply(this,arguments)}),function(g){return ma(g,f).value[u]}}var kl=function(i,u){var h;return("number"==typeof u?es:u instanceof so?gh:(h=so(u))?(u=h,gh):uo)(i,u)};function cp(i){return function(){this.removeAttribute(i)}}function ya(i){return function(){this.removeAttributeNS(i.space,i.local)}}function lp(i,u,h){var f,g;return function(){var v=this.getAttribute(i);return v===h?null:v===f?g:g=u(f=v,h)}}function Tr(i,u,h){var f,g;return function(){var v=this.getAttributeNS(i.space,i.local);return v===h?null:v===f?g:g=u(f=v,h)}}function As(i,u,h){var f,g,v;return function(){var E,I=h(this);return null==I?void this.removeAttribute(i):(E=this.getAttribute(i))===I?null:E===f&&I===g?v:v=u(f=E,g=I)}}function Pd(i,u,h){var f,g,v;return function(){var E,I=h(this);return null==I?void this.removeAttributeNS(i.space,i.local):(E=this.getAttributeNS(i.space,i.local))===I?null:E===f&&I===g?v:v=u(f=E,g=I)}}function Cu(i,u){function h(){var f=this,g=u.apply(f,arguments);return g&&function(v){f.setAttributeNS(i.space,i.local,g(v))}}return h._value=u,h}function Yc(i,u){function h(){var f=this,g=u.apply(f,arguments);return g&&function(v){f.setAttribute(i,g(v))}}return h._value=u,h}function F(i,u){return function(){Iu(this,i).delay=+u.apply(this,arguments)}}function B(i,u){return u=+u,function(){Iu(this,i).delay=u}}function re(i,u){return function(){xn(this,i).duration=+u.apply(this,arguments)}}function we(i,u){return u=+u,function(){xn(this,i).duration=u}}function $e(i,u){if("function"!=typeof u)throw new Error;return function(){xn(this,i).ease=u}}function hn(i,u,h){var f,g,v=function Vn(i){return(i+"").trim().split(/^|\s+/).every(function(u){var h=u.indexOf(".");return h>=0&&(u=u.slice(0,h)),!u||"start"===u})}(u)?Iu:xn;return function(){var E=v(this,i),I=E.on;I!==f&&(g=(f=I).copy()).on(u,h),E.on=g}}var Ha=hu.prototype.constructor;function cm(i,u,h){function f(){var g=this,v=u.apply(g,arguments);return v&&function(E){g.style.setProperty(i,v(E),h)}}return f._value=u,f}var jb=0;function Ga(i,u,h,f){this._groups=i,this._parents=u,this._name=h,this._id=f}function fp(i){return hu().transition(i)}function dm(){return++jb}var qa=hu.prototype;function Fd(i){return((i*=2)<=1?i*i:--i*(2-i)+1)/2}function pp(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}Ga.prototype=fp.prototype={constructor:Ga,select:function(i){var u=this._name,h=this._id;"function"!=typeof i&&(i=kr(i));for(var f=this._groups,g=f.length,v=new Array(g),E=0;E<g;++E)for(var O,U,I=f[E],S=I.length,k=v[E]=new Array(S),N=0;N<S;++N)(O=I[N])&&(U=i.call(O,O.__data__,N,I))&&("__data__"in O&&(U.__data__=O.__data__),k[N]=U,Ao(k[N],u,h,N,k,ma(O,h)));return new Ga(v,this._parents,u,h)},selectAll:function(i){var u=this._name,h=this._id;"function"!=typeof i&&(i=$o(i));for(var f=this._groups,g=f.length,v=[],E=[],I=0;I<g;++I)for(var O,S=f[I],k=S.length,U=0;U<k;++U)if(O=S[U]){for(var V,N=i.call(O,O.__data__,U,S),H=ma(O,h),G=0,Y=N.length;G<Y;++G)(V=N[G])&&Ao(V,u,h,G,N,H);v.push(N),E.push(O)}return new Ga(v,E,u,h)},filter:function(i){"function"!=typeof i&&(i=Ct(i));for(var u=this._groups,h=u.length,f=new Array(h),g=0;g<h;++g)for(var S,v=u[g],E=v.length,I=f[g]=[],k=0;k<E;++k)(S=v[k])&&i.call(S,S.__data__,k,v)&&I.push(S);return new Ga(f,this._parents,this._name,this._id)},merge:function(i){if(i._id!==this._id)throw new Error;for(var u=this._groups,h=i._groups,f=u.length,v=Math.min(f,h.length),E=new Array(f),I=0;I<v;++I)for(var N,S=u[I],k=h[I],O=S.length,U=E[I]=new Array(O),V=0;V<O;++V)(N=S[V]||k[V])&&(U[V]=N);for(;I<f;++I)E[I]=u[I];return new Ga(E,this._parents,this._name,this._id)},selection:function(){return new Ha(this._groups,this._parents)},transition:function(){for(var i=this._name,u=this._id,h=dm(),f=this._groups,g=f.length,v=0;v<g;++v)for(var S,E=f[v],I=E.length,k=0;k<I;++k)if(S=E[k]){var O=ma(S,u);Ao(S,i,h,k,E,{time:O.time+O.delay+O.duration,delay:0,duration:O.duration,ease:O.ease})}return new Ga(f,this._parents,i,h)},call:qa.call,nodes:qa.nodes,node:qa.node,size:qa.size,empty:qa.empty,each:qa.each,on:function(i,u){var h=this._id;return arguments.length<2?ma(this.node(),h).on.on(i):this.each(hn(h,i,u))},attr:function(i,u){var h=Vs(i),f="transform"===h?ts:kl;return this.attrTween(i,"function"==typeof u?(h.local?Pd:As)(h,f,lo(this,"attr."+i,u)):null==u?(h.local?ya:cp)(h):(h.local?Tr:lp)(h,f,u+""))},attrTween:function(i,u){var h="attr."+i;if(arguments.length<2)return(h=this.tween(h))&&h._value;if(null==u)return this.tween(h,null);if("function"!=typeof u)throw new Error;var f=Vs(i);return this.tween(h,(f.local?Cu:Yc)(f,u))},style:function(i,u,h){var f="transform"==(i+="")?Rd:kl;return null==u?this.styleTween(i,function Zo(i,u){var h,f,g;return function(){var v=bo(this,i),E=(this.style.removeProperty(i),bo(this,i));return v===E?null:v===h&&E===f?g:g=u(h=v,f=E)}}(i,f)).on("end.style."+i,function Yo(i){return function(){this.style.removeProperty(i)}}(i)):this.styleTween(i,"function"==typeof u?function Xc(i,u,h){var f,g,v;return function(){var E=bo(this,i),I=h(this);return null==I&&(this.style.removeProperty(i),I=bo(this,i)),E===I?null:E===f&&I===g?v:v=u(f=E,g=I)}}(i,f,lo(this,"style."+i,u)):function za(i,u,h){var f,g;return function(){var v=bo(this,i);return v===h?null:v===f?g:g=u(f=v,h)}}(i,f,u+""),h)},styleTween:function(i,u,h){var f="style."+(i+="");if(arguments.length<2)return(f=this.tween(f))&&f._value;if(null==u)return this.tween(f,null);if("function"!=typeof u)throw new Error;return this.tween(f,cm(i,u,null==h?"":h))},text:function(i){return this.tween("text","function"==typeof i?function vh(i){return function(){var u=i(this);this.textContent=null==u?"":u}}(lo(this,"text",i)):function dp(i){return function(){this.textContent=i}}(null==i?"":i+""))},remove:function(){return this.on("end.remove",function ho(i){return function(){var u=this.parentNode;for(var h in this.__transition)if(+h!==i)return;u&&u.removeChild(this)}}(this._id))},tween:function(i,u){var h=this._id;if(i+="",arguments.length<2){for(var E,f=ma(this.node(),h).tween,g=0,v=f.length;g<v;++g)if((E=f[g]).name===i)return E.value;return null}return this.each((null==u?Zc:ov)(h,i,u))},delay:function(i){var u=this._id;return arguments.length?this.each(("function"==typeof i?F:B)(u,i)):ma(this.node(),u).delay},duration:function(i){var u=this._id;return arguments.length?this.each(("function"==typeof i?re:we)(u,i)):ma(this.node(),u).duration},ease:function(i){var u=this._id;return arguments.length?this.each($e(u,i)):ma(this.node(),u).ease}};var sc=function i(u){function h(f){return Math.pow(f,u)}return u=+u,h.exponent=i,h}(3),gp=function i(u){function h(f){return 1-Math.pow(1-f,u)}return u=+u,h.exponent=i,h}(3),Ud=function i(u){function h(f){return((f*=2)<=1?Math.pow(f,u):2-Math.pow(2-f,u))/2}return u=+u,h.exponent=i,h}(3),mp=Math.PI,Bd=mp/2;function Eh(i){return(1-Math.cos(mp*i))/2}function cv(i){return((i*=2)<=1?Math.pow(2,10*i-10):2-Math.pow(2,10-10*i))/2}function Ih(i){return((i*=2)<=1?1-Math.sqrt(1-i*i):Math.sqrt(1-(i-=2)*i)+1)/2}var fm=4/11,wp=7.5625;function Wa(i){return(i=+i)<fm?wp*i*i:i<.7272727272727273?wp*(i-=.5454545454545454)*i+.75:i<.9090909090909091?wp*(i-=.8181818181818182)*i+.9375:wp*(i-=.9545454545454546)*i+.984375}var jd=1.70158,va=function i(u){function h(f){return f*f*((u+1)*f-u)}return u=+u,h.overshoot=i,h}(jd),$d=function i(u){function h(f){return--f*f*((u+1)*f+u)+1}return u=+u,h.overshoot=i,h}(jd),Hd=function i(u){function h(f){return((f*=2)<1?f*f*((u+1)*f-u):(f-=2)*f*((u+1)*f+u)+2)/2}return u=+u,h.overshoot=i,h}(jd),ac=2*Math.PI,Ch=function i(u,h){var f=Math.asin(1/(u=Math.max(1,u)))*(h/=ac);function g(v){return u*Math.pow(2,10*--v)*Math.sin((f-v)/h)}return g.amplitude=function(v){return i(v,h*ac)},g.period=function(v){return i(u,v)},g}(1,.3),g0=function i(u,h){var f=Math.asin(1/(u=Math.max(1,u)))*(h/=ac);function g(v){return 1-u*Math.pow(2,-10*(v=+v))*Math.sin((v+f)/h)}return g.amplitude=function(v){return i(v,h*ac)},g.period=function(v){return i(u,v)},g}(1,.3),zd=function i(u,h){var f=Math.asin(1/(u=Math.max(1,u)))*(h/=ac);function g(v){return((v=2*v-1)<0?u*Math.pow(2,10*v)*Math.sin((f-v)/h):2-u*Math.pow(2,-10*v)*Math.sin((f+v)/h))/2}return g.amplitude=function(v){return i(v,h*ac)},g.period=function(v){return i(u,v)},g}(1,.3),Gd={time:null,delay:0,duration:250,ease:pp};function gm(i,u){for(var h;!(h=i.__transition)||!(h=h[u]);)if(!(i=i.parentNode))return Gd.time=Wc(),Gd;return h}hu.prototype.interrupt=function(i){return this.each(function(){Jr(this,i)})},hu.prototype.transition=function(i){var u,h;i instanceof Ga?(u=i._id,i=i._name):(u=dm(),(h=Gd).time=Wc(),i=null==i?null:i+"");for(var f=this._groups,g=f.length,v=0;v<g;++v)for(var S,E=f[v],I=E.length,k=0;k<I;++k)(S=E[k])&&Ao(S,i,u,k,E,h||gm(S,u));return new Ga(f,this._parents,i,u)};var Ip=[null],Pl=function(i){return function(){return i}},qd=function(i,u,h){this.target=i,this.type=u,this.selection=h};function pv(){M.event.stopImmediatePropagation()}var Wd=function(){M.event.preventDefault(),M.event.stopImmediatePropagation()},Th={name:"drag"},Jc={name:"space"},Dh={name:"handle"},Tu={name:"center"},ss={name:"x",handles:["e","w"].map(Kd),input:function(i,u){return i&&[[i[0],u[0][1]],[i[1],u[1][1]]]},output:function(i){return i&&[i[0][0],i[1][0]]}},Gr={name:"y",handles:["n","s"].map(Kd),input:function(i,u){return i&&[[u[0][0],i[0]],[u[1][0],i[1]]]},output:function(i){return i&&[i[0][1],i[1][1]]}},gv={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Kd),input:function(i){return i},output:function(i){return i}},_a={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},el={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},mm={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},m0={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},y0={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Kd(i){return{type:i}}function tl(){return!M.event.button}function mv(){var i=this.ownerSVGElement||this;return[[0,0],[i.width.baseVal.value,i.height.baseVal.value]]}function Cp(i){for(;!i.__brush;)if(!(i=i.parentNode))return;return i.__brush}function Zd(i){return i[0][0]===i[1][0]||i[0][1]===i[1][1]}function Ah(i){var v,u=mv,h=tl,f=ys(E,"start","brush","end"),g=6;function E(N){var V=N.property("__brush",U).selectAll(".overlay").data([Kd("overlay")]);V.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",_a.overlay).merge(V).each(function(){var G=Cp(this).extent;Ts(this).attr("x",G[0][0]).attr("y",G[0][1]).attr("width",G[1][0]-G[0][0]).attr("height",G[1][1]-G[0][1])}),N.selectAll(".selection").data([Kd("selection")]).enter().append("rect").attr("class","selection").attr("cursor",_a.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var H=N.selectAll(".handle").data(i.handles,function(G){return G.type});H.exit().remove(),H.enter().append("rect").attr("class",function(G){return"handle handle--"+G.type}).attr("cursor",function(G){return _a[G.type]}),N.each(I).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",O)}function I(){var N=Ts(this),V=Cp(this).selection;V?(N.selectAll(".selection").style("display",null).attr("x",V[0][0]).attr("y",V[0][1]).attr("width",V[1][0]-V[0][0]).attr("height",V[1][1]-V[0][1]),N.selectAll(".handle").style("display",null).attr("x",function(H){return"e"===H.type[H.type.length-1]?V[1][0]-g/2:V[0][0]-g/2}).attr("y",function(H){return"s"===H.type[0]?V[1][1]-g/2:V[0][1]-g/2}).attr("width",function(H){return"n"===H.type||"s"===H.type?V[1][0]-V[0][0]+g:g}).attr("height",function(H){return"e"===H.type||"w"===H.type?V[1][1]-V[0][1]+g:g})):N.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function S(N,V){return N.__brush.emitter||new k(N,V)}function k(N,V){this.that=N,this.args=V,this.state=N.__brush,this.active=0}function O(){if(M.event.touches){if(M.event.changedTouches.length<M.event.touches.length)return Wd()}else if(v)return;if(h.apply(this,arguments)){var ke,Se,ze,je,mt,Qe,ft,le,it,Mt,Kt,Qn,Mn,N=this,V=M.event.target.__data__.type,H="selection"===(M.event.metaKey?V="overlay":V)?Th:M.event.altKey?Tu:Dh,G=i===Gr?null:m0[V],Y=i===ss?null:y0[V],J=Cp(N),he=J.extent,ee=J.selection,Ce=he[0][0],_e=he[0][1],xt=he[1][0],Pt=he[1][1],Yt=G&&Y&&M.event.shiftKey,tr=Rr(N),Xn=tr,jr=S(N,arguments).beforestart();"overlay"===V?J.selection=ee=[[ke=i===Gr?Ce:tr[0],ze=i===ss?_e:tr[1]],[mt=i===Gr?xt:ke,ft=i===ss?Pt:ze]]:(ke=ee[0][0],ze=ee[0][1],mt=ee[1][0],ft=ee[1][1]),Se=ke,je=ze,Qe=mt,le=ft;var Sr=Ts(N).attr("pointer-events","none"),cr=Sr.selectAll(".overlay").attr("cursor",_a[V]);if(M.event.touches)Sr.on("touchmove.brush",Sn,!0).on("touchend.brush touchcancel.brush",tn,!0);else{var Bt=Ts(M.event.view).on("keydown.brush",Ii,!0).on("keyup.brush",ra,!0).on("mousemove.brush",Sn,!0).on("mouseup.brush",tn,!0);du(M.event.view)}pv(),Jr(N),I.call(N),jr.start()}function Sn(){var Bo=Rr(N);Yt&&!Qn&&!Mn&&(Math.abs(Bo[0]-Xn[0])>Math.abs(Bo[1]-Xn[1])?Mn=!0:Qn=!0),Xn=Bo,Kt=!0,Wd(),kn()}function kn(){var Bo;switch(it=Xn[0]-tr[0],Mt=Xn[1]-tr[1],H){case Jc:case Th:G&&(it=Math.max(Ce-ke,Math.min(xt-mt,it)),Se=ke+it,Qe=mt+it),Y&&(Mt=Math.max(_e-ze,Math.min(Pt-ft,Mt)),je=ze+Mt,le=ft+Mt);break;case Dh:G<0?(it=Math.max(Ce-ke,Math.min(xt-ke,it)),Se=ke+it,Qe=mt):G>0&&(it=Math.max(Ce-mt,Math.min(xt-mt,it)),Se=ke,Qe=mt+it),Y<0?(Mt=Math.max(_e-ze,Math.min(Pt-ze,Mt)),je=ze+Mt,le=ft):Y>0&&(Mt=Math.max(_e-ft,Math.min(Pt-ft,Mt)),je=ze,le=ft+Mt);break;case Tu:G&&(Se=Math.max(Ce,Math.min(xt,ke-it*G)),Qe=Math.max(Ce,Math.min(xt,mt+it*G))),Y&&(je=Math.max(_e,Math.min(Pt,ze-Mt*Y)),le=Math.max(_e,Math.min(Pt,ft+Mt*Y)))}Qe<Se&&(G*=-1,Bo=ke,ke=mt,mt=Bo,Bo=Se,Se=Qe,Qe=Bo,V in el&&cr.attr("cursor",_a[V=el[V]])),le<je&&(Y*=-1,Bo=ze,ze=ft,ft=Bo,Bo=je,je=le,le=Bo,V in mm&&cr.attr("cursor",_a[V=mm[V]])),J.selection&&(ee=J.selection),Qn&&(Se=ee[0][0],Qe=ee[1][0]),Mn&&(je=ee[0][1],le=ee[1][1]),(ee[0][0]!==Se||ee[0][1]!==je||ee[1][0]!==Qe||ee[1][1]!==le)&&(J.selection=[[Se,je],[Qe,le]],I.call(N),jr.brush())}function tn(){if(pv(),M.event.touches){if(M.event.touches.length)return;v&&clearTimeout(v),v=setTimeout(function(){v=null},500),Sr.on("touchmove.brush touchend.brush touchcancel.brush",null)}else la(M.event.view,Kt),Bt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Sr.attr("pointer-events","all"),cr.attr("cursor",_a.overlay),J.selection&&(ee=J.selection),Zd(ee)&&(J.selection=null,I.call(N)),jr.end()}function Ii(){switch(M.event.keyCode){case 16:Yt=G&&Y;break;case 18:H===Dh&&(G&&(mt=Qe-it*G,ke=Se+it*G),Y&&(ft=le-Mt*Y,ze=je+Mt*Y),H=Tu,kn());break;case 32:(H===Dh||H===Tu)&&(G<0?mt=Qe-it:G>0&&(ke=Se-it),Y<0?ft=le-Mt:Y>0&&(ze=je-Mt),H=Jc,cr.attr("cursor",_a.selection),kn());break;default:return}Wd()}function ra(){switch(M.event.keyCode){case 16:Yt&&(Qn=Mn=Yt=!1,kn());break;case 18:H===Tu&&(G<0?mt=Qe:G>0&&(ke=Se),Y<0?ft=le:Y>0&&(ze=je),H=Dh,kn());break;case 32:H===Jc&&(M.event.altKey?(G&&(mt=Qe-it*G,ke=Se+it*G),Y&&(ft=le-Mt*Y,ze=je+Mt*Y),H=Tu):(G<0?mt=Qe:G>0&&(ke=Se),Y<0?ft=le:Y>0&&(ze=je),H=Dh),cr.attr("cursor",_a[V]),kn());break;default:return}Wd()}}function U(){var N=this.__brush||{selection:null};return N.extent=u.apply(this,arguments),N.dim=i,N}return E.move=function(N,V){N.selection?N.on("start.brush",function(){S(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){S(this,arguments).end()}).tween("brush",function(){var H=this,G=H.__brush,Y=S(H,arguments),J=G.selection,he=i.input("function"==typeof V?V.apply(this,arguments):V,G.extent),ee=Hr(J,he);function Ce(ke){G.selection=1===ke&&Zd(he)?null:ee(ke),I.call(H),Y.brush()}return J&&he?Ce:Ce(1)}):N.each(function(){var H=this,G=arguments,Y=H.__brush,J=i.input("function"==typeof V?V.apply(H,G):V,Y.extent),he=S(H,G).beforestart();Jr(H),Y.selection=null==J||Zd(J)?null:J,I.call(H),he.start().brush().end()})},k.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(N){ia(new qd(E,N,i.output(this.state.selection)),f.apply,f,[N,this.that,this.args])}},E.extent=function(N){return arguments.length?(u="function"==typeof N?N:Pl([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),E):u},E.filter=function(N){return arguments.length?(h="function"==typeof N?N:Pl(!!N),E):h},E.handleSize=function(N){return arguments.length?(g=+N,E):g},E.on=function(){var N=f.on.apply(f,arguments);return N===f?E:N},E}var Vi=Math.cos,Ol=Math.sin,Dp=Math.PI,nl=Dp/2,yv=2*Dp,qs=Math.max;function rl(i){return function(u,h){return i(u.source.value+u.target.value,h.source.value+h.target.value)}}var v0=Array.prototype.slice,uc=function(i){return function(){return i}},Yd=Math.PI,Ll=2*Yd,Du=1e-6,_0=Ll-Du;function Ro(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Za(){return new Ro}function w0(i){return i.source}function b0(i){return i.target}function Sp(i){return i.radius}function vv(i){return i.startAngle}function ko(i){return i.endAngle}Ro.prototype=Za.prototype={constructor:Ro,moveTo:function(i,u){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+u)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(i,u){this._+="L"+(this._x1=+i)+","+(this._y1=+u)},quadraticCurveTo:function(i,u,h,f){this._+="Q"+ +i+","+ +u+","+(this._x1=+h)+","+(this._y1=+f)},bezierCurveTo:function(i,u,h,f,g,v){this._+="C"+ +i+","+ +u+","+ +h+","+ +f+","+(this._x1=+g)+","+(this._y1=+v)},arcTo:function(i,u,h,f,g){var v=this._x1,E=this._y1,I=(h=+h)-(i=+i),S=(f=+f)-(u=+u),k=v-i,O=E-u,U=k*k+O*O;if((g=+g)<0)throw new Error("negative radius: "+g);if(null===this._x1)this._+="M"+(this._x1=i)+","+(this._y1=u);else if(U>Du)if(Math.abs(O*I-S*k)>Du&&g){var N=h-v,V=f-E,H=I*I+S*S,G=N*N+V*V,Y=Math.sqrt(H),J=Math.sqrt(U),he=g*Math.tan((Yd-Math.acos((H+U-G)/(2*Y*J)))/2),ee=he/J,Ce=he/Y;Math.abs(ee-1)>Du&&(this._+="L"+(i+ee*k)+","+(u+ee*O)),this._+="A"+g+","+g+",0,0,"+ +(O*N>k*V)+","+(this._x1=i+Ce*I)+","+(this._y1=u+Ce*S)}else this._+="L"+(this._x1=i)+","+(this._y1=u)},arc:function(i,u,h,f,g,v){i=+i,u=+u;var E=(h=+h)*Math.cos(f),I=h*Math.sin(f),S=i+E,k=u+I,O=1^v,U=v?f-g:g-f;if(h<0)throw new Error("negative radius: "+h);null===this._x1?this._+="M"+S+","+k:(Math.abs(this._x1-S)>Du||Math.abs(this._y1-k)>Du)&&(this._+="L"+S+","+k),h&&(U<0&&(U=U%Ll+Ll),U>_0?this._+="A"+h+","+h+",0,1,"+O+","+(i-E)+","+(u-I)+"A"+h+","+h+",0,1,"+O+","+(this._x1=S)+","+(this._y1=k):U>Du&&(this._+="A"+h+","+h+",0,"+ +(U>=Yd)+","+O+","+(this._x1=i+h*Math.cos(g))+","+(this._y1=u+h*Math.sin(g))))},rect:function(i,u,h,f){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+u)+"h"+ +h+"v"+ +f+"h"+-h+"Z"},toString:function(){return this._}};var No="$";function Ap(){}function Ai(i,u){var h=new Ap;if(i instanceof Ap)i.each(function(I,S){h.set(S,I)});else if(Array.isArray(i)){var v,f=-1,g=i.length;if(null==u)for(;++f<g;)h.set(f,i[f]);else for(;++f<g;)h.set(u(v=i[f],f,i),v)}else if(i)for(var E in i)h.set(E,i[E]);return h}Ap.prototype=Ai.prototype={constructor:Ap,has:function(i){return No+i in this},get:function(i){return this[No+i]},set:function(i,u){return this[No+i]=u,this},remove:function(i){var u=No+i;return u in this&&delete this[u]},clear:function(){for(var i in this)i[0]===No&&delete this[i]},keys:function(){var i=[];for(var u in this)u[0]===No&&i.push(u.slice(1));return i},values:function(){var i=[];for(var u in this)u[0]===No&&i.push(this[u]);return i},entries:function(){var i=[];for(var u in this)u[0]===No&&i.push({key:u.slice(1),value:this[u]});return i},size:function(){var i=0;for(var u in this)u[0]===No&&++i;return i},empty:function(){for(var i in this)if(i[0]===No)return!1;return!0},each:function(i){for(var u in this)u[0]===No&&i(this[u],u.slice(1),this)}};function _v(){return{}}function wv(i,u,h){i[u]=h}function bv(){return Ai()}function xp(i,u,h){i.set(u,h)}function Xd(){}var xh=Ai.prototype;function wm(i,u){var h=new Xd;if(i instanceof Xd)i.each(function(v){h.add(v)});else if(i){var f=-1,g=i.length;if(null==u)for(;++f<g;)h.add(i[f]);else for(;++f<g;)h.add(u(i[f],f,i))}return h}Xd.prototype=wm.prototype={constructor:Xd,has:xh.has,add:function(i){return this[No+(i+="")]=i,this},remove:xh.remove,clear:xh.clear,values:xh.keys,size:xh.size,empty:xh.empty,each:xh.each};function _(i){return new Function("d","return {"+i.map(function(u,h){return JSON.stringify(u)+": d["+h+"]"}).join(",")+"}")}var Z=function(i){var u=new RegExp('["'+i+"\n\r]"),h=i.charCodeAt(0);function g(k,O){var J,he,U={},N={},V=[],H=k.length,G=0,Y=0;function ee(){if(G>=H)return N;if(he)return he=!1,U;var Se,ke=G;if(34===k.charCodeAt(ke)){for(var _e=ke;_e++<H;)if(34===k.charCodeAt(_e)){if(34!==k.charCodeAt(_e+1))break;++_e}return G=_e+2,13===(Se=k.charCodeAt(_e+1))?(he=!0,10===k.charCodeAt(_e+2)&&++G):10===Se&&(he=!0),k.slice(ke+1,_e).replace(/""/g,'"')}for(;G<H;){var ze=1;if(10===(Se=k.charCodeAt(G++)))he=!0;else if(13===Se)he=!0,10===k.charCodeAt(G)&&(++G,++ze);else if(Se!==h)continue;return k.slice(ke,G-ze)}return k.slice(ke)}for(;(J=ee())!==N;){for(var Ce=[];J!==U&&J!==N;)Ce.push(J),J=ee();O&&null==(Ce=O(Ce,Y++))||V.push(Ce)}return V}function I(k){return k.map(S).join(i)}function S(k){return null==k?"":u.test(k+="")?'"'+k.replace(/\"/g,'""')+'"':k}return{parse:function f(k,O){var U,N,V=g(k,function(H,G){if(U)return U(H,G-1);N=H,U=O?function x(i,u){var h=_(i);return function(f,g){return u(h(f),g,i)}}(H,O):_(H)});return V.columns=N,V},parseRows:g,format:function v(k,O){return null==O&&(O=function j(i){var u=Object.create(null),h=[];return i.forEach(function(f){for(var g in f)g in u||h.push(u[g]=g)}),h}(k)),[O.map(S).join(i)].concat(k.map(function(U){return O.map(function(N){return S(U[N])}).join(i)})).join("\n")},formatRows:function E(k){return k.map(I).join("\n")}}},pe=Z(","),He=pe.parse,St=pe.parseRows,zt=pe.format,fn=pe.formatRows,cn=Z("\t"),ei=cn.parse,Po=cn.parseRows,Mh=cn.format,bm=cn.formatRows,_i=function(i){return function(){return i}},wa=function(){return 1e-6*(Math.random()-.5)};function Em(i,u,h,f){if(isNaN(u)||isNaN(h))return i;var g,U,N,V,H,G,Y,J,he,v=i._root,E={data:f},I=i._x0,S=i._y0,k=i._x1,O=i._y1;if(!v)return i._root=E,i;for(;v.length;)if((G=u>=(U=(I+k)/2))?I=U:k=U,(Y=h>=(N=(S+O)/2))?S=N:O=N,g=v,!(v=v[J=Y<<1|G]))return g[J]=E,i;if(V=+i._x.call(null,v.data),H=+i._y.call(null,v.data),u===V&&h===H)return E.next=v,g?g[J]=E:i._root=E,i;do{g=g?g[J]=new Array(4):i._root=new Array(4),(G=u>=(U=(I+k)/2))?I=U:k=U,(Y=h>=(N=(S+O)/2))?S=N:O=N}while((J=Y<<1|G)==(he=(H>=N)<<1|V>=U));return g[he]=v,g[J]=E,i}var ji=function(i,u,h,f,g){this.node=i,this.x0=u,this.y0=h,this.x1=f,this.y1=g};function E0(i){return i[0]}function kh(i){return i[1]}function Dm(i,u,h){var f=new Tv(null==u?E0:u,null==h?kh:h,NaN,NaN,NaN,NaN);return null==i?f:f.addAll(i)}function Tv(i,u,h,f,g,v){this._x=i,this._y=u,this._x0=h,this._y0=f,this._x1=g,this._y1=v,this._root=void 0}function I0(i){for(var u={data:i.data},h=u;i=i.next;)h=h.next={data:i.data};return u}var Ks=Dm.prototype=Tv.prototype;function Q1(i){return i.x+i.vx}function Wb(i){return i.y+i.vy}Ks.copy=function(){var h,f,i=new Tv(this._x,this._y,this._x0,this._y0,this._x1,this._y1),u=this._root;if(!u)return i;if(!u.length)return i._root=I0(u),i;for(h=[{source:u,target:i._root=new Array(4)}];u=h.pop();)for(var g=0;g<4;++g)(f=u.source[g])&&(f.length?h.push({source:f,target:u.target[g]=new Array(4)}):u.target[g]=I0(f));return i},Ks.add=function(i){var u=+this._x.call(null,i),h=+this._y.call(null,i);return Em(this.cover(u,h),u,h,i)},Ks.addAll=function Ws(i){var u,h,g,v,f=i.length,E=new Array(f),I=new Array(f),S=1/0,k=1/0,O=-1/0,U=-1/0;for(h=0;h<f;++h)isNaN(g=+this._x.call(null,u=i[h]))||isNaN(v=+this._y.call(null,u))||(E[h]=g,I[h]=v,g<S&&(S=g),g>O&&(O=g),v<k&&(k=v),v>U&&(U=v));for(O<S&&(S=this._x0,O=this._x1),U<k&&(k=this._y0,U=this._y1),this.cover(S,k).cover(O,U),h=0;h<f;++h)Em(this,E[h],I[h],i[h]);return this},Ks.cover=function(i,u){if(isNaN(i=+i)||isNaN(u=+u))return this;var h=this._x0,f=this._y0,g=this._x1,v=this._y1;if(isNaN(h))g=(h=Math.floor(i))+1,v=(f=Math.floor(u))+1;else{if(!(h>i||i>g||f>u||u>v))return this;var S,k,E=g-h,I=this._root;switch(k=(u<(f+v)/2)<<1|i<(h+g)/2){case 0:do{(S=new Array(4))[k]=I,I=S}while(v=f+(E*=2),i>(g=h+E)||u>v);break;case 1:do{(S=new Array(4))[k]=I,I=S}while(v=f+(E*=2),(h=g-E)>i||u>v);break;case 2:do{(S=new Array(4))[k]=I,I=S}while(f=v-(E*=2),i>(g=h+E)||f>u);break;case 3:do{(S=new Array(4))[k]=I,I=S}while(f=v-(E*=2),(h=g-E)>i||f>u)}this._root&&this._root.length&&(this._root=I)}return this._x0=h,this._y0=f,this._x1=g,this._y1=v,this},Ks.data=function(){var i=[];return this.visit(function(u){if(!u.length)do{i.push(u.data)}while(u=u.next)}),i},Ks.extent=function(i){return arguments.length?this.cover(+i[0][0],+i[0][1]).cover(+i[1][0],+i[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ks.find=function(i,u,h){var f,E,I,S,k,H,G,g=this._x0,v=this._y0,O=this._x1,U=this._y1,N=[],V=this._root;for(V&&N.push(new ji(V,g,v,O,U)),null==h?h=1/0:(g=i-h,v=u-h,O=i+h,U=u+h,h*=h);H=N.pop();)if(!(!(V=H.node)||(E=H.x0)>O||(I=H.y0)>U||(S=H.x1)<g||(k=H.y1)<v))if(V.length){var Y=(E+S)/2,J=(I+k)/2;N.push(new ji(V[3],Y,J,S,k),new ji(V[2],E,J,Y,k),new ji(V[1],Y,I,S,J),new ji(V[0],E,I,Y,J)),(G=(u>=J)<<1|i>=Y)&&(H=N[N.length-1],N[N.length-1]=N[N.length-1-G],N[N.length-1-G]=H)}else{var he=i-+this._x.call(null,V.data),ee=u-+this._y.call(null,V.data),Ce=he*he+ee*ee;if(Ce<h){var ke=Math.sqrt(h=Ce);g=i-ke,v=u-ke,O=i+ke,U=u+ke,f=V.data}}return f},Ks.remove=function(i){if(isNaN(O=+this._x.call(null,i))||isNaN(U=+this._y.call(null,i)))return this;var u,f,g,v,O,U,N,V,H,G,Y,J,h=this._root,E=this._x0,I=this._y0,S=this._x1,k=this._y1;if(!h)return this;if(h.length)for(;;){if((H=O>=(N=(E+S)/2))?E=N:S=N,(G=U>=(V=(I+k)/2))?I=V:k=V,u=h,!(h=h[Y=G<<1|H]))return this;if(!h.length)break;(u[Y+1&3]||u[Y+2&3]||u[Y+3&3])&&(f=u,J=Y)}for(;h.data!==i;)if(g=h,!(h=h.next))return this;return(v=h.next)&&delete h.next,g?(v?g.next=v:delete g.next,this):u?(v?u[Y]=v:delete u[Y],(h=u[0]||u[1]||u[2]||u[3])&&h===(u[3]||u[2]||u[1]||u[0])&&!h.length&&(f?f[J]=h:this._root=h),this):(this._root=v,this)},Ks.removeAll=function zb(i){for(var u=0,h=i.length;u<h;++u)this.remove(i[u]);return this},Ks.root=function(){return this._root},Ks.size=function(){var i=0;return this.visit(function(u){if(!u.length)do{++i}while(u=u.next)}),i},Ks.visit=function(i){var h,g,v,E,I,S,u=[],f=this._root;for(f&&u.push(new ji(f,this._x0,this._y0,this._x1,this._y1));h=u.pop();)if(!i(f=h.node,v=h.x0,E=h.y0,I=h.x1,S=h.y1)&&f.length){var k=(v+I)/2,O=(E+S)/2;(g=f[3])&&u.push(new ji(g,k,O,I,S)),(g=f[2])&&u.push(new ji(g,v,O,k,S)),(g=f[1])&&u.push(new ji(g,k,E,I,O)),(g=f[0])&&u.push(new ji(g,v,E,k,O))}return this},Ks.visitAfter=function(i){var f,u=[],h=[];for(this._root&&u.push(new ji(this._root,this._x0,this._y0,this._x1,this._y1));f=u.pop();){var g=f.node;if(g.length){var v,E=f.x0,I=f.y0,S=f.x1,k=f.y1,O=(E+S)/2,U=(I+k)/2;(v=g[0])&&u.push(new ji(v,E,I,O,U)),(v=g[1])&&u.push(new ji(v,O,I,S,U)),(v=g[2])&&u.push(new ji(v,E,U,O,k)),(v=g[3])&&u.push(new ji(v,O,U,S,k))}h.push(f)}for(;f=h.pop();)i(f.node,f.x0,f.y0,f.x1,f.y1);return this},Ks.x=function(i){return arguments.length?(this._x=i,this):this._x},Ks.y=function(i){return arguments.length?(this._y=i,this):this._y};function Kb(i){return i.index}function Dv(i,u){var h=i.get(u);if(!h)throw new Error("missing: "+u);return h}function Rp(i){return i.x}function Sv(i){return i.y}var rt,Av=Math.PI*(3-Math.sqrt(5)),kp=function(i,u){if((h=(i=u?i.toExponential(u-1):i.toExponential()).indexOf("e"))<0)return null;var h,f=i.slice(0,h);return[f.length>1?f[0]+f.slice(2):f,+i.slice(h+1)]},Np=function(i){return(i=kp(Math.abs(i)))?i[1]:NaN},Nn=function(i,u){var h=kp(i,u);if(!h)return i+"";var f=h[0],g=h[1];return g<0?"0."+new Array(-g).join("0")+f:f.length>g+1?f.slice(0,g+1)+"."+f.slice(g+1):f+new Array(g-f.length+2).join("0")},Pp={"":function(i,u){e:for(var v,h=(i=i.toPrecision(u)).length,f=1,g=-1;f<h;++f)switch(i[f]){case".":g=v=f;break;case"0":0===g&&(g=f),v=f;break;case"e":break e;default:g>0&&(g=0)}return g>0?i.slice(0,g)+i.slice(v+1):i},"%":function(i,u){return(100*i).toFixed(u)},b:function(i){return Math.round(i).toString(2)},c:function(i){return i+""},d:function(i){return Math.round(i).toString(10)},e:function(i,u){return i.toExponential(u)},f:function(i,u){return i.toFixed(u)},g:function(i,u){return i.toPrecision(u)},o:function(i){return Math.round(i).toString(8)},p:function(i,u){return Nn(100*i,u)},r:Nn,s:function(i,u){var h=kp(i,u);if(!h)return i+"";var f=h[0],g=h[1],v=g-(rt=3*Math.max(-8,Math.min(8,Math.floor(g/3))))+1,E=f.length;return v===E?f:v>E?f+new Array(v-E+1).join("0"):v>0?f.slice(0,v)+"."+f.slice(v):"0."+new Array(1-v).join("0")+kp(i,Math.max(0,u+v-1))[0]},X:function(i){return Math.round(i).toString(16).toUpperCase()},x:function(i){return Math.round(i).toString(16)}},T0=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function Op(i){return new D0(i)}function D0(i){if(!(u=T0.exec(i)))throw new Error("invalid format: "+i);var u,h=u[1]||" ",f=u[2]||">",g=u[3]||"-",v=u[4]||"",E=!!u[5],I=u[6]&&+u[6],S=!!u[7],k=u[8]&&+u[8].slice(1),O=u[9]||"";"n"===O?(S=!0,O="g"):Pp[O]||(O=""),(E||"0"===h&&"="===f)&&(E=!0,h="0",f="="),this.fill=h,this.align=f,this.sign=g,this.symbol=v,this.zero=E,this.width=I,this.comma=S,this.precision=k,this.type=O}Op.prototype=D0.prototype,D0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Lp,Au=function(i){return i},wi=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],xm=function(i){var u=i.grouping&&i.thousands?function(i,u){return function(h,f){for(var g=h.length,v=[],E=0,I=i[0],S=0;g>0&&I>0&&(S+I+1>f&&(I=Math.max(1,f-S)),v.push(h.substring(g-=I,g+I)),!((S+=I+1)>f));)I=i[E=(E+1)%i.length];return v.reverse().join(u)}}(i.grouping,i.thousands):Au,h=i.currency,f=i.decimal,g=i.numerals?function(i){return function(u){return u.replace(/[0-9]/g,function(h){return i[+h]})}}(i.numerals):Au,v=i.percent||"%";function E(S){var k=(S=Op(S)).fill,O=S.align,U=S.sign,N=S.symbol,V=S.zero,H=S.width,G=S.comma,Y=S.precision,J=S.type,he="$"===N?h[0]:"#"===N&&/[boxX]/.test(J)?"0"+J.toLowerCase():"",ee="$"===N?h[1]:/[%p]/.test(J)?v:"",Ce=Pp[J],ke=!J||/[defgprs%]/.test(J);function Se(_e){var xt,mt,Qe,ze=he,je=ee;if("c"===J)je=Ce(_e)+je,_e="";else{var Pt=(_e=+_e)<0;if(_e=Ce(Math.abs(_e),Y),Pt&&0==+_e&&(Pt=!1),ze=(Pt?"("===U?U:"-":"-"===U||"("===U?"":U)+ze,je=je+("s"===J?wi[8+rt/3]:"")+(Pt&&"("===U?")":""),ke)for(xt=-1,mt=_e.length;++xt<mt;)if(48>(Qe=_e.charCodeAt(xt))||Qe>57){je=(46===Qe?f+_e.slice(xt+1):_e.slice(xt))+je,_e=_e.slice(0,xt);break}}G&&!V&&(_e=u(_e,1/0));var ft=ze.length+_e.length+je.length,le=ft<H?new Array(H-ft+1).join(k):"";switch(G&&V&&(_e=u(le+_e,le.length?H-je.length:1/0),le=""),O){case"<":_e=ze+_e+je+le;break;case"=":_e=ze+le+_e+je;break;case"^":_e=le.slice(0,ft=le.length>>1)+ze+_e+je+le.slice(ft);break;default:_e=le+ze+_e+je}return g(_e)}return Y=null==Y?J?6:12:/[gprs]/.test(J)?Math.max(1,Math.min(21,Y)):Math.max(0,Math.min(20,Y)),Se.toString=function(){return S+""},Se}return{format:E,formatPrefix:function I(S,k){var O=E(((S=Op(S)).type="f",S)),U=3*Math.max(-8,Math.min(8,Math.floor(Np(k)/3))),N=Math.pow(10,-U),V=wi[8+U/3];return function(H){return O(N*H)+V}}}};function Jb(i){return Lp=xm(i),M.format=Lp.format,M.formatPrefix=Lp.formatPrefix,Lp}Jb({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var eE=function(i){return Math.max(0,-Np(Math.abs(i)))},tE=function(i,u){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Np(u)/3)))-Np(Math.abs(i)))},S0=function(i,u){return i=Math.abs(i),u=Math.abs(u)-i,Math.max(0,Np(u)-Np(i))+1},Ph=function(){return new xv};function xv(){this.reset()}xv.prototype={constructor:xv,reset:function(){this.s=this.t=0},add:function(i){Pn(Mm,i,this.t),Pn(this,Mm.s,this.s),this.s?this.t+=Mm.t:this.s=Mm.t},valueOf:function(){return this.s}};var Mm=new xv;function Pn(i,u,h){var f=i.s=u+h,g=f-u;i.t=u-(f-g)+(h-g)}var bn=1e-6,er=Math.PI,bi=er/2,ba=er/4,fo=2*er,qr=180/er,In=er/180,Hn=Math.abs,xu=Math.atan,_r=Math.atan2,dn=Math.cos,x0=Math.ceil,M0=Math.exp,R0=Math.log,Fp=Math.pow,en=Math.sin,il=Math.sign||function(i){return i>0?1:i<0?-1:0},xi=Math.sqrt,Jd=Math.tan;function k0(i){return i>1?0:i<-1?er:Math.acos(i)}function $i(i){return i>1?bi:i<-1?-bi:Math.asin(i)}function N0(i){return(i=en(i/2))*i}function wr(){}function Mv(i,u){i&&eI.hasOwnProperty(i.type)&&eI[i.type](i,u)}var Up={Feature:function(i,u){Mv(i.geometry,u)},FeatureCollection:function(i,u){for(var h=i.features,f=-1,g=h.length;++f<g;)Mv(h[f].geometry,u)}},eI={Sphere:function(i,u){u.sphere()},Point:function(i,u){u.point((i=i.coordinates)[0],i[1],i[2])},MultiPoint:function(i,u){for(var h=i.coordinates,f=-1,g=h.length;++f<g;)u.point((i=h[f])[0],i[1],i[2])},LineString:function(i,u){P0(i.coordinates,u,0)},MultiLineString:function(i,u){for(var h=i.coordinates,f=-1,g=h.length;++f<g;)P0(h[f],u,0)},Polygon:function(i,u){tI(i.coordinates,u)},MultiPolygon:function(i,u){for(var h=i.coordinates,f=-1,g=h.length;++f<g;)tI(h[f],u)},GeometryCollection:function(i,u){for(var h=i.geometries,f=-1,g=h.length;++f<g;)Mv(h[f],u)}};function P0(i,u,h){var v,f=-1,g=i.length-h;for(u.lineStart();++f<g;)u.point((v=i[f])[0],v[1],v[2]);u.lineEnd()}function tI(i,u){var h=-1,f=i.length;for(u.polygonStart();++h<f;)P0(i[h],u,1);u.polygonEnd()}var kv,nI,nE,Ru,Nv,Mu=function(i,u){i&&Up.hasOwnProperty(i.type)?Up[i.type](i,u):Mv(i,u)},Rm=Ph(),Rv=Ph(),sl={point:wr,lineStart:wr,lineEnd:wr,polygonStart:function(){Rm.reset(),sl.lineStart=rI,sl.lineEnd=pC},polygonEnd:function(){var i=+Rm;Rv.add(i<0?fo+i:i),this.lineStart=this.lineEnd=this.point=wr},sphere:function(){Rv.add(fo)}};function rI(){sl.point=iI}function pC(){rE(kv,nI)}function iI(i,u){sl.point=rE,kv=i,nI=u,nE=i*=In,Ru=dn(u=(u*=In)/2+ba),Nv=en(u)}function rE(i,u){var h=(i*=In)-nE,f=h>=0?1:-1,g=f*h,v=dn(u=(u*=In)/2+ba),E=en(u),I=Nv*E,S=Ru*v+I*dn(g),k=I*f*en(g);Rm.add(_r(k,S)),nE=i,Ru=v,Nv=E}function cc(i){return[_r(i[1],i[0]),$i(i[2])]}function Ul(i){var u=i[0],h=i[1],f=dn(h);return[f*dn(u),f*en(u),en(h)]}function ku(i,u){return i[0]*u[0]+i[1]*u[1]+i[2]*u[2]}function Bl(i,u){return[i[1]*u[2]-i[2]*u[1],i[2]*u[0]-i[0]*u[2],i[0]*u[1]-i[1]*u[0]]}function km(i,u){i[0]+=u[0],i[1]+=u[1],i[2]+=u[2]}function Nm(i,u){return[i[0]*u,i[1]*u,i[2]*u]}function ef(i){var u=xi(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=u,i[1]/=u,i[2]/=u}var Mi,ur,ti,Nu,Ya,iE,O0,tf,Ea,Xo,Pm=Ph(),Pu={point:Oh,lineStart:Oo,lineEnd:lc,polygonStart:function(){Pu.point=Vp,Pu.lineStart=sE,Pu.lineEnd=L0,Pm.reset(),sl.polygonStart()},polygonEnd:function(){sl.polygonEnd(),Pu.point=Oh,Pu.lineStart=Oo,Pu.lineEnd=lc,Rm<0?(Mi=-(ti=180),ur=-(Nu=90)):Pm>bn?Nu=90:Pm<-bn&&(ur=-90),Xo[0]=Mi,Xo[1]=ti}};function Oh(i,u){Ea.push(Xo=[Mi=i,ti=i]),u<ur&&(ur=u),u>Nu&&(Nu=u)}function Bp(i,u){var h=Ul([i*In,u*In]);if(tf){var f=Bl(tf,h),v=Bl([f[1],-f[0],0],f);ef(v),v=cc(v);var k,E=i-Ya,I=E>0?1:-1,S=v[0]*qr*I,O=Hn(E)>180;O^(I*Ya<S&&S<I*i)?(k=v[1]*qr)>Nu&&(Nu=k):O^(I*Ya<(S=(S+360)%360-180)&&S<I*i)?(k=-v[1]*qr)<ur&&(ur=k):(u<ur&&(ur=u),u>Nu&&(Nu=u)),O?i<Ya?os(Mi,i)>os(Mi,ti)&&(ti=i):os(i,ti)>os(Mi,ti)&&(Mi=i):ti>=Mi?(i<Mi&&(Mi=i),i>ti&&(ti=i)):i>Ya?os(Mi,i)>os(Mi,ti)&&(ti=i):os(i,ti)>os(Mi,ti)&&(Mi=i)}else Ea.push(Xo=[Mi=i,ti=i]);u<ur&&(ur=u),u>Nu&&(Nu=u),tf=h,Ya=i}function Oo(){Pu.point=Bp}function lc(){Xo[0]=Mi,Xo[1]=ti,Pu.point=Oh,tf=null}function Vp(i,u){if(tf){var h=i-Ya;Pm.add(Hn(h)>180?h+(h>0?360:-360):h)}else iE=i,O0=u;sl.point(i,u),Bp(i,u)}function sE(){sl.lineStart()}function L0(){Vp(iE,O0),sl.lineEnd(),Hn(Pm)>bn&&(Mi=-(ti=180)),Xo[0]=Mi,Xo[1]=ti,tf=null}function os(i,u){return(u-=i)<0?u+360:u}function jp(i,u){return i[0]-u[0]}function $p(i,u){return i[0]<=i[1]?i[0]<=u&&u<=i[1]:u<i[0]||i[1]<u}var nf,F0,Om,Lm,Pv,Hp,Fm,rf,po,U0,B0,oE,oI,Jo,Ur,go,Qa={sphere:wr,point:Vl,lineStart:aE,lineEnd:uE,polygonStart:function(){Qa.lineStart=cE,Qa.lineEnd=uI},polygonEnd:function(){Qa.lineStart=aE,Qa.lineEnd=uE}};function Vl(i,u){i*=In;var h=dn(u*=In);zp(h*dn(i),h*en(i),en(u))}function zp(i,u,h){++nf,Om+=(i-Om)/nf,Lm+=(u-Lm)/nf,Pv+=(h-Pv)/nf}function aE(){Qa.point=aI}function aI(i,u){i*=In;var h=dn(u*=In);Jo=h*dn(i),Ur=h*en(i),go=en(u),Qa.point=Ou,zp(Jo,Ur,go)}function Ou(i,u){i*=In;var h=dn(u*=In),f=h*dn(i),g=h*en(i),v=en(u),E=_r(xi((E=Ur*v-go*g)*E+(E=go*f-Jo*v)*E+(E=Jo*g-Ur*f)*E),Jo*f+Ur*g+go*v);F0+=E,Hp+=E*(Jo+(Jo=f)),Fm+=E*(Ur+(Ur=g)),rf+=E*(go+(go=v)),zp(Jo,Ur,go)}function uE(){Qa.point=Vl}function cE(){Qa.point=cI}function uI(){V0(oE,oI),Qa.point=Vl}function cI(i,u){oE=i,oI=u,i*=In,u*=In,Qa.point=V0;var h=dn(u);Jo=h*dn(i),Ur=h*en(i),go=en(u),zp(Jo,Ur,go)}function V0(i,u){i*=In;var h=dn(u*=In),f=h*dn(i),g=h*en(i),v=en(u),E=Ur*v-go*g,I=go*f-Jo*v,S=Jo*g-Ur*f,k=xi(E*E+I*I+S*S),O=$i(k),U=k&&-O/k;po+=U*E,U0+=U*I,B0+=U*S,F0+=O,Hp+=O*(Jo+(Jo=f)),Fm+=O*(Ur+(Ur=g)),rf+=O*(go+(go=v)),zp(Jo,Ur,go)}var Gp=function(i){return function(){return i}},hc=function(i,u){function h(f,g){return f=i(f,g),u(f[0],f[1])}return i.invert&&u.invert&&(h.invert=function(f,g){return(f=u.invert(f,g))&&i.invert(f[0],f[1])}),h};function qp(i,u){return[i>er?i-fo:i<-er?i+fo:i,u]}function j0(i,u,h){return(i%=fo)?u||h?hc(lI(i),Ov(u,h)):lI(i):u||h?Ov(u,h):qp}function lE(i){return function(u,h){return[(u+=i)>er?u-fo:u<-er?u+fo:u,h]}}function lI(i){var u=lE(i);return u.invert=lE(-i),u}function Ov(i,u){var h=dn(i),f=en(i),g=dn(u),v=en(u);function E(I,S){var k=dn(S),O=dn(I)*k,U=en(I)*k,N=en(S),V=N*h+O*f;return[_r(U*g-V*v,O*h-N*f),$i(V*g+U*v)]}return E.invert=function(I,S){var k=dn(S),O=dn(I)*k,U=en(I)*k,N=en(S),V=N*g-U*v;return[_r(U*g+N*v,O*h+V*f),$i(V*h-O*f)]},E}qp.invert=qp;var Lv=function(i){function u(h){return(h=i(h[0]*In,h[1]*In))[0]*=qr,h[1]*=qr,h}return i=j0(i[0]*In,i[1]*In,i.length>2?i[2]*In:0),u.invert=function(h){return(h=i.invert(h[0]*In,h[1]*In))[0]*=qr,h[1]*=qr,h},u};function $0(i,u,h,f,g,v){if(h){var E=dn(u),I=en(u),S=f*h;null==g?(g=u+f*fo,v=u-S/2):(g=hE(E,g),v=hE(E,v),(f>0?g<v:g>v)&&(g+=f*fo));for(var k,O=g;f>0?O>v:O<v;O-=S)k=cc([E,-I*dn(O),-I*en(O)]),i.point(k[0],k[1])}}function hE(i,u){(u=Ul(u))[0]-=i,ef(u);var h=k0(-u[1]);return((-u[2]<0?-h:h)+fo-bn)%fo}var dE=function(){var u,i=[];return{point:function(h,f){u.push([h,f])},lineStart:function(){i.push(u=[])},lineEnd:wr,rejoin:function(){i.length>1&&i.push(i.pop().concat(i.shift()))},result:function(){var h=i;return i=[],u=null,h}}},Fh=function(i,u){return Hn(i[0]-u[0])<bn&&Hn(i[1]-u[1])<bn};function Wp(i,u,h,f){this.x=i,this.z=u,this.o=h,this.e=f,this.v=!1,this.n=this.p=null}var fE=function(i,u,h,f,g){var I,S,v=[],E=[];if(i.forEach(function(H){if(!((G=H.length-1)<=0)){var G,he,Y=H[0],J=H[G];if(Fh(Y,J)){for(g.lineStart(),I=0;I<G;++I)g.point((Y=H[I])[0],Y[1]);return void g.lineEnd()}v.push(he=new Wp(Y,H,null,!0)),E.push(he.o=new Wp(Y,null,he,!1)),v.push(he=new Wp(J,H,null,!1)),E.push(he.o=new Wp(J,null,he,!0))}}),v.length){for(E.sort(u),Um(v),Um(E),I=0,S=E.length;I<S;++I)E[I].e=h=!h;for(var O,U,k=v[0];;){for(var N=k,V=!0;N.v;)if((N=N.n)===k)return;O=N.z,g.lineStart();do{if(N.v=N.o.v=!0,N.e){if(V)for(I=0,S=O.length;I<S;++I)g.point((U=O[I])[0],U[1]);else f(N.x,N.n.x,1,g);N=N.n}else{if(V)for(I=(O=N.p.z).length-1;I>=0;--I)g.point((U=O[I])[0],U[1]);else f(N.x,N.p.x,-1,g);N=N.p}O=(N=N.o).z,V=!V}while(!N.v);g.lineEnd()}}};function Um(i){if(u=i.length){for(var u,g,h=0,f=i[0];++h<u;)f.n=g=i[h],g.p=f,f=g;f.n=g=i[0],g.p=f}}var sf=1e9,Kp=-sf;function pE(i,u,h,f){function g(k,O){return i<=k&&k<=h&&u<=O&&O<=f}function v(k,O,U,N){var V=0,H=0;if(null==k||(V=E(k,U))!==(H=E(O,U))||S(k,O)<0^U>0)do{N.point(0===V||3===V?i:h,V>1?f:u)}while((V=(V+U+4)%4)!==H);else N.point(O[0],O[1])}function E(k,O){return Hn(k[0]-i)<bn?O>0?0:3:Hn(k[0]-h)<bn?O>0?2:1:Hn(k[1]-u)<bn?O>0?1:0:O>0?3:2}function I(k,O){return S(k.x,O.x)}function S(k,O){var U=E(k,1),N=E(O,1);return U!==N?U-N:0===U?O[1]-k[1]:1===U?k[0]-O[0]:2===U?k[1]-O[1]:O[0]-k[0]}return function(k){var N,V,H,G,Y,J,he,ee,Ce,ke,Se,O=k,U=dE(),_e={point:ze,lineStart:function Qe(){_e.point=ft,V&&V.push(H=[]),ke=!0,Ce=!1,he=ee=NaN},lineEnd:function Pt(){N&&(ft(G,Y),J&&Ce&&U.rejoin(),N.push(U.result())),_e.point=ze,Ce&&O.lineEnd()},polygonStart:function xt(){O=U,N=[],V=[],Se=!0},polygonEnd:function mt(){var le=function je(){for(var le=0,it=0,Mt=V.length;it<Mt;++it)for(var tr,Xn,Kt=V[it],Yt=1,Qn=Kt.length,Mn=Kt[0],jr=Mn[0],Sr=Mn[1];Yt<Qn;++Yt)tr=jr,Xn=Sr,jr=(Mn=Kt[Yt])[0],Sr=Mn[1],Xn<=f?Sr>f&&(jr-tr)*(f-Xn)>(Sr-Xn)*(i-tr)&&++le:Sr<=f&&(jr-tr)*(f-Xn)<(Sr-Xn)*(i-tr)&&--le;return le}(),it=Se&&le,Mt=(N=Xt(N)).length;(it||Mt)&&(k.polygonStart(),it&&(k.lineStart(),v(null,null,1,k),k.lineEnd()),Mt&&fE(N,I,le,v,k),k.polygonEnd()),O=k,N=V=H=null}};function ze(le,it){g(le,it)&&O.point(le,it)}function ft(le,it){var Mt=g(le,it);if(V&&H.push([le,it]),ke)G=le,Y=it,J=Mt,ke=!1,Mt&&(O.lineStart(),O.point(le,it));else if(Mt&&Ce)O.point(le,it);else{var Kt=[he=Math.max(Kp,Math.min(sf,he)),ee=Math.max(Kp,Math.min(sf,ee))],Yt=[le=Math.max(Kp,Math.min(sf,le)),it=Math.max(Kp,Math.min(sf,it))];!function(i,u,h,f,g,v){var H,E=i[0],I=i[1],O=0,U=1,N=u[0]-E,V=u[1]-I;if(H=h-E,N||!(H>0)){if(H/=N,N<0){if(H<O)return;H<U&&(U=H)}else if(N>0){if(H>U)return;H>O&&(O=H)}if(H=g-E,N||!(H<0)){if(H/=N,N<0){if(H>U)return;H>O&&(O=H)}else if(N>0){if(H<O)return;H<U&&(U=H)}if(H=f-I,V||!(H>0)){if(H/=V,V<0){if(H<O)return;H<U&&(U=H)}else if(V>0){if(H>U)return;H>O&&(O=H)}if(H=v-I,V||!(H<0)){if(H/=V,V<0){if(H>U)return;H>O&&(O=H)}else if(V>0){if(H<O)return;H<U&&(U=H)}return O>0&&(i[0]=E+O*N,i[1]=I+O*V),U<1&&(u[0]=E+U*N,u[1]=I+U*V),!0}}}}}(Kt,Yt,i,u,h,f)?Mt&&(O.lineStart(),O.point(le,it),Se=!1):(Ce||(O.lineStart(),O.point(Kt[0],Kt[1])),O.point(Yt[0],Yt[1]),Mt||O.lineEnd(),Se=!1)}he=le,ee=it,Ce=Mt}return _e}}var z0,Uv,Bm,Zp=Ph(),mE=function(i,u){var h=u[0],f=u[1],g=[en(h),-dn(h),0],v=0,E=0;Zp.reset();for(var I=0,S=i.length;I<S;++I)if(O=(k=i[I]).length)for(var k,O,U=k[O-1],N=U[0],V=U[1]/2+ba,H=en(V),G=dn(V),Y=0;Y<O;++Y,N=he,H=Ce,G=ke,U=J){var J=k[Y],he=J[0],ee=J[1]/2+ba,Ce=en(ee),ke=dn(ee),Se=he-N,_e=Se>=0?1:-1,ze=_e*Se,je=ze>er,xt=H*Ce;if(Zp.add(_r(xt*_e*en(ze),G*ke+xt*dn(ze))),v+=je?Se+_e*fo:Se,je^N>=h^he>=h){var mt=Bl(Ul(U),Ul(J));ef(mt);var Qe=Bl(g,mt);ef(Qe);var Pt=(je^Se>=0?-1:1)*$i(Qe[2]);(f>Pt||f===Pt&&(mt[0]||mt[1]))&&(E+=je^Se>=0?1:-1)}}return(v<-bn||v<bn&&Zp<-bn)^1&E},Fv=Ph(),Yp={sphere:wr,point:wr,lineStart:function dI(){Yp.point=G0,Yp.lineEnd=Uh},lineEnd:wr,polygonStart:wr,polygonEnd:wr};function Uh(){Yp.point=Yp.lineEnd=wr}function G0(i,u){z0=i*=In,Uv=en(u*=In),Bm=dn(u),Yp.point=mC}function mC(i,u){i*=In;var h=en(u*=In),f=dn(u),g=Hn(i-z0),v=dn(g),I=f*en(g),S=Bm*h-Uv*f*v,k=Uv*h+Bm*f*v;Fv.add(_r(xi(I*I+S*S),k)),z0=i,Uv=h,Bm=f}var q0=function(i){return Fv.reset(),Mu(i,Yp),+Fv},fI=[null,null],Vm={type:"LineString",coordinates:fI},jm=function(i,u){return fI[0]=i,fI[1]=u,q0(Vm)},Qp={Feature:function(i,u){return W0(i.geometry,u)},FeatureCollection:function(i,u){for(var h=i.features,f=-1,g=h.length;++f<g;)if(W0(h[f].geometry,u))return!0;return!1}},$m={Sphere:function(){return!0},Point:function(i,u){return K0(i.coordinates,u)},MultiPoint:function(i,u){for(var h=i.coordinates,f=-1,g=h.length;++f<g;)if(K0(h[f],u))return!0;return!1},LineString:function(i,u){return Z0(i.coordinates,u)},MultiLineString:function(i,u){for(var h=i.coordinates,f=-1,g=h.length;++f<g;)if(Z0(h[f],u))return!0;return!1},Polygon:function(i,u){return Y0(i.coordinates,u)},MultiPolygon:function(i,u){for(var h=i.coordinates,f=-1,g=h.length;++f<g;)if(Y0(h[f],u))return!0;return!1},GeometryCollection:function(i,u){for(var h=i.geometries,f=-1,g=h.length;++f<g;)if(W0(h[f],u))return!0;return!1}};function W0(i,u){return!(!i||!$m.hasOwnProperty(i.type))&&$m[i.type](i,u)}function K0(i,u){return 0===jm(i,u)}function Z0(i,u){var h=jm(i[0],i[1]);return jm(i[0],u)+jm(u,i[1])<=h+bn}function Y0(i,u){return!!mE(i.map(Q0),X0(u))}function Q0(i){return(i=i.map(X0)).pop(),i}function X0(i){return[i[0]*In,i[1]*In]}function yE(i,u,h){var f=qe(i,u-bn,h).concat(u);return function(g){return f.map(function(v){return[g,v]})}}function vE(i,u,h){var f=qe(i,u-bn,h).concat(u);return function(g){return f.map(function(v){return[v,g]})}}function J0(){var i,u,h,f,g,v,E,I,N,V,H,G,S=10,k=S,O=90,U=360,Y=2.5;function J(){return{type:"MultiLineString",coordinates:he()}}function he(){return qe(x0(f/O)*O,h,O).map(H).concat(qe(x0(I/U)*U,E,U).map(G)).concat(qe(x0(u/S)*S,i,S).filter(function(ee){return Hn(ee%O)>bn}).map(N)).concat(qe(x0(v/k)*k,g,k).filter(function(ee){return Hn(ee%U)>bn}).map(V))}return J.lines=function(){return he().map(function(ee){return{type:"LineString",coordinates:ee}})},J.outline=function(){return{type:"Polygon",coordinates:[H(f).concat(G(E).slice(1),H(h).reverse().slice(1),G(I).reverse().slice(1))]}},J.extent=function(ee){return arguments.length?J.extentMajor(ee).extentMinor(ee):J.extentMinor()},J.extentMajor=function(ee){return arguments.length?(I=+ee[0][1],E=+ee[1][1],(f=+ee[0][0])>(h=+ee[1][0])&&(ee=f,f=h,h=ee),I>E&&(ee=I,I=E,E=ee),J.precision(Y)):[[f,I],[h,E]]},J.extentMinor=function(ee){return arguments.length?(v=+ee[0][1],g=+ee[1][1],(u=+ee[0][0])>(i=+ee[1][0])&&(ee=u,u=i,i=ee),v>g&&(ee=v,v=g,g=ee),J.precision(Y)):[[u,v],[i,g]]},J.step=function(ee){return arguments.length?J.stepMajor(ee).stepMinor(ee):J.stepMinor()},J.stepMajor=function(ee){return arguments.length?(O=+ee[0],U=+ee[1],J):[O,U]},J.stepMinor=function(ee){return arguments.length?(S=+ee[0],k=+ee[1],J):[S,k]},J.precision=function(ee){return arguments.length?(Y=+ee,N=yE(v,g,90),V=vE(u,i,Y),H=yE(I,E,90),G=vE(f,h,Y),J):Y},J.extentMajor([[-180,-90+bn],[180,90-bn]]).extentMinor([[-180,-80-bn],[180,80+bn]])}var _E,wE,Bv,Vv,Bh=function(i){return i},ol=Ph(),of=Ph(),xs={point:wr,lineStart:wr,lineEnd:wr,polygonStart:function(){xs.lineStart=tw,xs.lineEnd=jv},polygonEnd:function(){xs.lineStart=xs.lineEnd=xs.point=wr,ol.add(Hn(of)),of.reset()},result:function(){var i=ol/2;return ol.reset(),i}};function tw(){xs.point=Jp}function Jp(i,u){xs.point=Ri,_E=Bv=i,wE=Vv=u}function Ri(i,u){of.add(Vv*i-Bv*u),Bv=i,Vv=u}function jv(){Ri(_E,wE)}var jl=1/0,af=jl,eg=-jl,tg=eg,Hm={point:function nw(i,u){i<jl&&(jl=i),i>eg&&(eg=i),u<af&&(af=u),u>tg&&(tg=u)},lineStart:wr,lineEnd:wr,polygonStart:wr,polygonEnd:wr,result:function(){var i=[[jl,af],[eg,tg]];return eg=tg=-(af=jl=1/0),i}};var IE,pI,as,al,rw=0,$v=0,Hv=0,iw=0,bE=0,zv=0,Gv=0,EE=0,zm=0,Xa={point:ul,lineStart:qv,lineEnd:gI,polygonStart:function(){Xa.lineStart=mI,Xa.lineEnd=yI},polygonEnd:function(){Xa.point=ul,Xa.lineStart=qv,Xa.lineEnd=gI},result:function(){var i=zm?[Gv/zm,EE/zm]:zv?[iw/zv,bE/zv]:Hv?[rw/Hv,$v/Hv]:[NaN,NaN];return rw=$v=Hv=iw=bE=zv=Gv=EE=zm=0,i}};function ul(i,u){rw+=i,$v+=u,++Hv}function qv(){Xa.point=CE}function CE(i,u){Xa.point=sw,ul(as=i,al=u)}function sw(i,u){var h=i-as,f=u-al,g=xi(h*h+f*f);iw+=g*(as+i)/2,bE+=g*(al+u)/2,zv+=g,ul(as=i,al=u)}function gI(){Xa.point=ul}function mI(){Xa.point=vI}function yI(){Gm(IE,pI)}function vI(i,u){Xa.point=Gm,ul(IE=as=i,pI=al=u)}function Gm(i,u){var h=i-as,f=u-al,g=xi(h*h+f*f);iw+=g*(as+i)/2,bE+=g*(al+u)/2,zv+=g,Gv+=(g=al*i-as*u)*(as+i),EE+=g*(al+u),zm+=3*g,ul(as=i,al=u)}function _I(i){this._context=i}_I.prototype={_radius:4.5,pointRadius:function(i){return this._radius=i,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(i,u){switch(this._point){case 0:this._context.moveTo(i,u),this._point=1;break;case 1:this._context.lineTo(i,u);break;default:this._context.moveTo(i+this._radius,u),this._context.arc(i,u,this._radius,0,fo)}},result:wr};var ow,Dr,Wv,qm,Vh,TE=Ph(),cl={point:wr,lineStart:function(){cl.point=wI},lineEnd:function(){ow&&uf(Dr,Wv),cl.point=wr},polygonStart:function(){ow=!0},polygonEnd:function(){ow=null},result:function(){var i=+TE;return TE.reset(),i}};function wI(i,u){cl.point=uf,Dr=qm=i,Wv=Vh=u}function uf(i,u){TE.add(xi((qm-=i)*qm+(Vh-=u)*Vh)),qm=i,Vh=u}function Lu(){this._string=[]}function DE(i){return"m0,"+i+"a"+i+","+i+" 0 1,1 0,"+-2*i+"a"+i+","+i+" 0 1,1 0,"+2*i+"z"}Lu.prototype={_radius:4.5,_circle:DE(4.5),pointRadius:function(i){return(i=+i)!==this._radius&&(this._radius=i,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(i,u){switch(this._point){case 0:this._string.push("M",i,",",u),this._point=1;break;case 1:this._string.push("L",i,",",u);break;default:null==this._circle&&(this._circle=DE(this._radius)),this._string.push("M",i,",",u,this._circle)}},result:function(){if(this._string.length){var i=this._string.join("");return this._string=[],i}return null}};var Ja=function(i,u,h,f){return function(g,v){var U,N,V,E=u(v),I=g.invert(f[0],f[1]),S=dE(),k=u(S),O=!1,H={point:G,lineStart:J,lineEnd:he,polygonStart:function(){H.point=ee,H.lineStart=Ce,H.lineEnd=ke,N=[],U=[]},polygonEnd:function(){H.point=G,H.lineStart=J,H.lineEnd=he,N=Xt(N);var Se=mE(U,I);N.length?(O||(v.polygonStart(),O=!0),fE(N,Lo,Se,h,v)):Se&&(O||(v.polygonStart(),O=!0),v.lineStart(),h(null,null,1,v),v.lineEnd()),O&&(v.polygonEnd(),O=!1),N=U=null},sphere:function(){v.polygonStart(),v.lineStart(),h(null,null,1,v),v.lineEnd(),v.polygonEnd()}};function G(Se,_e){var ze=g(Se,_e);i(Se=ze[0],_e=ze[1])&&v.point(Se,_e)}function Y(Se,_e){var ze=g(Se,_e);E.point(ze[0],ze[1])}function J(){H.point=Y,E.lineStart()}function he(){H.point=G,E.lineEnd()}function ee(Se,_e){V.push([Se,_e]);var ze=g(Se,_e);k.point(ze[0],ze[1])}function Ce(){k.lineStart(),V=[]}function ke(){ee(V[0][0],V[0][1]),k.lineEnd();var ze,xt,mt,Qe,Se=k.clean(),_e=S.result(),je=_e.length;if(V.pop(),U.push(V),V=null,je){if(1&Se){if((xt=(mt=_e[0]).length-1)>0){for(O||(v.polygonStart(),O=!0),v.lineStart(),ze=0;ze<xt;++ze)v.point((Qe=mt[ze])[0],Qe[1]);v.lineEnd()}return}je>1&&2&Se&&_e.push(_e.pop().concat(_e.shift())),N.push(_e.filter(Wm))}}return H}};function Wm(i){return i.length>1}function Lo(i,u){return((i=i.x)[0]<0?i[1]-bi-bn:bi-i[1])-((u=u.x)[0]<0?u[1]-bi-bn:bi-u[1])}var cf=Ja(function(){return!0},function Kv(i){var g,u=NaN,h=NaN,f=NaN;return{lineStart:function(){i.lineStart(),g=1},point:function(v,E){var I=v>0?er:-er,S=Hn(v-u);Hn(S-er)<bn?(i.point(u,h=(h+E)/2>0?bi:-bi),i.point(f,h),i.lineEnd(),i.lineStart(),i.point(I,h),i.point(v,h),g=0):f!==I&&S>=er&&(Hn(u-f)<bn&&(u-=f*bn),Hn(v-I)<bn&&(v-=I*bn),h=function Rs(i,u,h,f){var g,v,E=en(i-h);return Hn(E)>bn?xu((en(u)*(v=dn(f))*en(h)-en(f)*(g=dn(u))*en(i))/(g*v*E)):(u+f)/2}(u,h,v,E),i.point(f,h),i.lineEnd(),i.lineStart(),i.point(I,h),g=0),i.point(u=v,h=E),f=I},lineEnd:function(){i.lineEnd(),u=h=NaN},clean:function(){return 2-g}}},function aw(i,u,h,f){var g;if(null==i)f.point(-er,g=h*bi),f.point(0,g),f.point(er,g),f.point(er,0),f.point(er,-g),f.point(0,-g),f.point(-er,-g),f.point(-er,0),f.point(-er,g);else if(Hn(i[0]-u[0])>bn){var v=i[0]<u[0]?er:-er;f.point(-v,g=h*v/2),f.point(0,g),f.point(v,g)}else f.point(u[0],u[1])},[-er,-bi]);var Ia=function(i,u){var h=dn(i),f=h>0,g=Hn(h)>bn;function E(O,U){return dn(O)*dn(U)>h}function S(O,U,N){var G=[1,0,0],Y=Bl(Ul(O),Ul(U)),J=ku(Y,Y),he=Y[0],ee=J-he*he;if(!ee)return!N&&O;var Ce=h*J/ee,ke=-h*he/ee,Se=Bl(G,Y),_e=Nm(G,Ce);km(_e,Nm(Y,ke));var je=Se,xt=ku(_e,je),mt=ku(je,je),Qe=xt*xt-mt*(ku(_e,_e)-1);if(!(Qe<0)){var Pt=xi(Qe),ft=Nm(je,(-xt-Pt)/mt);if(km(ft,_e),ft=cc(ft),!N)return ft;var Yt,le=O[0],it=U[0],Mt=O[1],Kt=U[1];it<le&&(Yt=le,le=it,it=Yt);var Qn=it-le,Mn=Hn(Qn-er)<bn;if(!Mn&&Kt<Mt&&(Yt=Mt,Mt=Kt,Kt=Yt),Mn||Qn<bn?Mn?Mt+Kt>0^ft[1]<(Hn(ft[0]-le)<bn?Mt:Kt):Mt<=ft[1]&&ft[1]<=Kt:Qn>er^(le<=ft[0]&&ft[0]<=it)){var Xn=Nm(je,(-xt+Pt)/mt);return km(Xn,_e),[ft,cc(Xn)]}}}function k(O,U){var N=f?i:er-i,V=0;return O<-N?V|=1:O>N&&(V|=2),U<-N?V|=4:U>N&&(V|=8),V}return Ja(E,function I(O){var U,N,V,H,G;return{lineStart:function(){H=V=!1,G=1},point:function(Y,J){var ee,he=[Y,J],Ce=E(Y,J),ke=f?Ce?0:k(Y,J):Ce?k(Y+(Y<0?er:-er),J):0;if(!U&&(H=V=Ce)&&O.lineStart(),Ce!==V&&(!(ee=S(U,he))||Fh(U,ee)||Fh(he,ee))&&(he[0]+=bn,he[1]+=bn,Ce=E(he[0],he[1])),Ce!==V)G=0,Ce?(O.lineStart(),ee=S(he,U),O.point(ee[0],ee[1])):(ee=S(U,he),O.point(ee[0],ee[1]),O.lineEnd()),U=ee;else if(g&&U&&f^Ce){var Se;!(ke&N)&&(Se=S(he,U,!0))&&(G=0,f?(O.lineStart(),O.point(Se[0][0],Se[0][1]),O.point(Se[1][0],Se[1][1]),O.lineEnd()):(O.point(Se[1][0],Se[1][1]),O.lineEnd(),O.lineStart(),O.point(Se[0][0],Se[0][1])))}Ce&&(!U||!Fh(U,he))&&O.point(he[0],he[1]),U=he,V=Ce,N=ke},lineEnd:function(){V&&O.lineEnd(),U=null},clean:function(){return G|(H&&V)<<1}}},function v(O,U,N,V){$0(V,i,u,N,O,U)},f?[0,-i]:[-er,i-er])};function fc(i){return function(u){var h=new Tn;for(var f in i)h[f]=i[f];return h.stream=u,h}}function Tn(){}function Fu(i,u,h){var f=u[1][0]-u[0][0],g=u[1][1]-u[0][1],v=i.clipExtent&&i.clipExtent();i.scale(150).translate([0,0]),null!=v&&i.clipExtent(null),Mu(h,i.stream(Hm));var E=Hm.result(),I=Math.min(f/(E[1][0]-E[0][0]),g/(E[1][1]-E[0][1])),S=+u[0][0]+(f-I*(E[1][0]+E[0][0]))/2,k=+u[0][1]+(g-I*(E[1][1]+E[0][1]))/2;return null!=v&&i.clipExtent(v),i.scale(150*I).translate([S,k])}function ll(i,u,h){return Fu(i,[[0,0],u],h)}Tn.prototype={constructor:Tn,point:function(i,u){this.stream.point(i,u)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ng=dn(30*In),$l=function(i,u){return+u?function AE(i,u){function h(f,g,v,E,I,S,k,O,U,N,V,H,G,Y){var J=k-f,he=O-g,ee=J*J+he*he;if(ee>4*u&&G--){var Ce=E+N,ke=I+V,Se=S+H,_e=xi(Ce*Ce+ke*ke+Se*Se),ze=$i(Se/=_e),je=Hn(Hn(Se)-1)<bn||Hn(v-U)<bn?(v+U)/2:_r(ke,Ce),xt=i(je,ze),mt=xt[0],Qe=xt[1],Pt=mt-f,ft=Qe-g,le=he*Pt-J*ft;(le*le/ee>u||Hn((J*Pt+he*ft)/ee-.5)>.3||E*N+I*V+S*H<ng)&&(h(f,g,v,E,I,S,mt,Qe,je,Ce/=_e,ke/=_e,Se,G,Y),Y.point(mt,Qe),h(mt,Qe,je,Ce,ke,Se,k,O,U,N,V,H,G,Y))}}return function(f){var g,v,E,I,S,k,O,U,N,V,H,G,Y={point:J,lineStart:he,lineEnd:Ce,polygonStart:function(){f.polygonStart(),Y.lineStart=ke},polygonEnd:function(){f.polygonEnd(),Y.lineStart=he}};function J(ze,je){ze=i(ze,je),f.point(ze[0],ze[1])}function he(){U=NaN,Y.point=ee,f.lineStart()}function ee(ze,je){var xt=Ul([ze,je]),mt=i(ze,je);h(U,N,O,V,H,G,U=mt[0],N=mt[1],O=ze,V=xt[0],H=xt[1],G=xt[2],16,f),f.point(U,N)}function Ce(){Y.point=J,f.lineEnd()}function ke(){he(),Y.point=Se,Y.lineEnd=_e}function Se(ze,je){ee(g=ze,je),v=U,E=N,I=V,S=H,k=G,Y.point=ee}function _e(){h(U,N,O,V,H,G,v,E,g,I,S,k,16,f),Y.lineEnd=Ce,Ce()}return Y}}(i,u):function SE(i){return fc({point:function(u,h){u=i(u,h),this.stream.point(u[0],u[1])}})}(i)};var xE=fc({point:function(i,u){this.stream.point(i*In,u*In)}});function ni(i){return lf(function(){return i})()}function lf(i){var u,v,E,N,V,J,he,ee,_e,ze,h=150,f=480,g=250,I=0,S=0,k=0,O=0,U=0,H=null,G=cf,Y=null,Ce=Bh,ke=.5,Se=$l(mt,ke);function je(ft){return[(ft=V(ft[0]*In,ft[1]*In))[0]*h+v,E-ft[1]*h]}function xt(ft){return(ft=V.invert((ft[0]-v)/h,(E-ft[1])/h))&&[ft[0]*qr,ft[1]*qr]}function mt(ft,le){return[(ft=u(ft,le))[0]*h+v,E-ft[1]*h]}function Qe(){V=hc(N=j0(k,O,U),u);var ft=u(I,S);return v=f-ft[0]*h,E=g+ft[1]*h,Pt()}function Pt(){return _e=ze=null,je}return je.stream=function(ft){return _e&&ze===ft?_e:_e=xE(G(N,Se(Ce(ze=ft))))},je.clipAngle=function(ft){return arguments.length?(G=+ft?Ia(H=ft*In,6*In):(H=null,cf),Pt()):H*qr},je.clipExtent=function(ft){return arguments.length?(Ce=null==ft?(Y=J=he=ee=null,Bh):pE(Y=+ft[0][0],J=+ft[0][1],he=+ft[1][0],ee=+ft[1][1]),Pt()):null==Y?null:[[Y,J],[he,ee]]},je.scale=function(ft){return arguments.length?(h=+ft,Qe()):h},je.translate=function(ft){return arguments.length?(f=+ft[0],g=+ft[1],Qe()):[f,g]},je.center=function(ft){return arguments.length?(I=ft[0]%360*In,S=ft[1]%360*In,Qe()):[I*qr,S*qr]},je.rotate=function(ft){return arguments.length?(k=ft[0]%360*In,O=ft[1]%360*In,U=ft.length>2?ft[2]%360*In:0,Qe()):[k*qr,O*qr,U*qr]},je.precision=function(ft){return arguments.length?(Se=$l(mt,ke=ft*ft),Pt()):xi(ke)},je.fitExtent=function(ft,le){return Fu(je,ft,le)},je.fitSize=function(ft,le){return ll(je,ft,le)},function(){return u=i.apply(this,arguments),je.invert=u.invert&&xt,Qe()}}function us(i){var u=0,h=er/3,f=lf(i),g=f(u,h);return g.parallels=function(v){return arguments.length?f(u=v[0]*In,h=v[1]*In):[u*qr,h*qr]},g}function uw(i,u){var h=en(i),f=(h+en(u))/2;if(Hn(f)<bn)return function Hl(i){var u=dn(i);function h(f,g){return[f*u,en(g)/u]}return h.invert=function(f,g){return[f/u,$i(g*u)]},h}(i);var g=1+h*(2*f-h),v=xi(g)/f;function E(I,S){var k=xi(g-2*f*en(S))/f;return[k*en(I*=f),v-k*dn(I)]}return E.invert=function(I,S){var k=v-S;return[_r(I,Hn(k))/f*il(k),$i((g-(I*I+k*k)*f*f)/(2*f))]},E}var Km=function(){return us(uw).scale(155.424).center([0,33.6442])},cw=function(){return Km().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function lw(i){return function(u,h){var f=dn(u),g=dn(h),v=i(f*g);return[v*g*en(u),v*en(h)]}}function jh(i){return function(u,h){var f=xi(u*u+h*h),g=i(f),v=en(g),E=dn(g);return[_r(u*v,f*E),$i(f&&h*v/f)]}}var rg=lw(function(i){return xi(2/(1+i))});rg.invert=jh(function(i){return 2*$i(i/2)});var Zs=lw(function(i){return(i=k0(i))&&i/en(i)});Zs.invert=jh(function(i){return i});function cs(i,u){return[i,R0(Jd((bi+u)/2))]}cs.invert=function(i,u){return[i,2*xu(M0(u))-bi]};function dw(i){var I,S,k,u=ni(i),h=u.center,f=u.scale,g=u.translate,v=u.clipExtent,E=null;function O(){var U=er*f(),N=u(Lv(u.rotate()).invert([0,0]));return v(null==E?[[N[0]-U,N[1]-U],[N[0]+U,N[1]+U]]:i===cs?[[Math.max(N[0]-U,E),I],[Math.min(N[0]+U,S),k]]:[[E,Math.max(N[1]-U,I)],[S,Math.min(N[1]+U,k)]])}return u.scale=function(U){return arguments.length?(f(U),O()):f()},u.translate=function(U){return arguments.length?(g(U),O()):g()},u.center=function(U){return arguments.length?(h(U),O()):h()},u.clipExtent=function(U){return arguments.length?(null==U?E=I=S=k=null:(E=+U[0][0],I=+U[0][1],S=+U[1][0],k=+U[1][1]),O()):null==E?null:[[E,I],[S,k]]},O()}function Zm(i){return Jd((bi+i)/2)}function fw(i,u){var h=dn(i),f=i===u?en(i):R0(h/dn(u))/R0(Zm(u)/Zm(i)),g=h*Fp(Zm(i),f)/f;if(!f)return cs;function v(E,I){g>0?I<-bi+bn&&(I=-bi+bn):I>bi-bn&&(I=bi-bn);var S=g/Fp(Zm(I),f);return[S*en(f*E),g-S*dn(f*E)]}return v.invert=function(E,I){var S=g-I,k=il(f)*xi(E*E+S*S);return[_r(E,Hn(S))/f*il(S),2*xu(Fp(g/k,1/f))-bi]},v}function $h(i,u){return[i,u]}$h.invert=$h;function EI(i,u){var h=dn(i),f=i===u?en(i):(h-dn(u))/(u-i),g=h/f+i;if(Hn(f)<bn)return $h;function v(E,I){var S=g-I,k=f*E;return[S*en(k),g-S*dn(k)]}return v.invert=function(E,I){var S=g-I;return[_r(E,Hn(S))/f*il(S),g-il(f)*xi(E*E+S*S)]},v}function hf(i,u){var h=dn(u),f=dn(i)*h;return[h*en(i)/f,en(u)/f]}hf.invert=jh(xu);function df(i,u,h,f){return 1===i&&1===u&&0===h&&0===f?Bh:fc({point:function(g,v){this.stream.point(g*i+h,v*u+f)}})}function gw(i,u){return[dn(u)*en(i),en(u)]}gw.invert=jh($i);function ig(i,u){var h=dn(u),f=1+dn(i)*h;return[h*en(i)/f,en(u)/f]}ig.invert=jh(function(i){return 2*xu(i)});function Ym(i,u){return[R0(Jd((bi+u)/2)),-i]}Ym.invert=function(i,u){return[-u,2*xu(M0(i))-bi]};function Xv(i,u){return i.parent===u.parent?1:2}function Jv(i,u){return i+u.x}function TI(i,u){return Math.max(i,u.y)}function OE(i){var u=0,h=i.children,f=h&&h.length;if(f)for(;--f>=0;)u+=h[f].value;else u=1;i.value=u}function e_(i,u){var g,E,I,S,k,h=new Hh(i),f=+i.value&&(h.value=i.value),v=[h];for(null==u&&(u=og);g=v.pop();)if(f&&(g.value=+g.data.value),(I=u(g.data))&&(k=I.length))for(g.children=new Array(k),S=k-1;S>=0;--S)v.push(E=g.children[S]=new Hh(I[S])),E.parent=g,E.depth=g.depth+1;return h.eachBefore(SI)}function og(i){return i.children}function t_(i){i.data=i.data.data}function SI(i){var u=0;do{i.height=u}while((i=i.parent)&&i.height<++u)}function Hh(i){this.data=i,this.depth=this.height=0,this.parent=null}function ty(i){this._=i,this.next=null}Hh.prototype=e_.prototype={constructor:Hh,count:function(){return this.eachAfter(OE)},each:function(i){var h,g,v,E,u=this,f=[u];do{for(h=f.reverse(),f=[];u=h.pop();)if(i(u),g=u.children)for(v=0,E=g.length;v<E;++v)f.push(g[v])}while(f.length);return this},eachAfter:function(i){for(var g,v,E,u=this,h=[u],f=[];u=h.pop();)if(f.push(u),g=u.children)for(v=0,E=g.length;v<E;++v)h.push(g[v]);for(;u=f.pop();)i(u);return this},eachBefore:function(i){for(var f,g,u=this,h=[u];u=h.pop();)if(i(u),f=u.children)for(g=f.length-1;g>=0;--g)h.push(f[g]);return this},sum:function(i){return this.eachAfter(function(u){for(var h=+i(u.data)||0,f=u.children,g=f&&f.length;--g>=0;)h+=f[g].value;u.value=h})},sort:function(i){return this.eachBefore(function(u){u.children&&u.children.sort(i)})},path:function(i){for(var u=this,h=function UE(i,u){if(i===u)return i;var h=i.ancestors(),f=u.ancestors(),g=null;for(i=h.pop(),u=f.pop();i===u;)g=i,i=h.pop(),u=f.pop();return g}(u,i),f=[u];u!==h;)f.push(u=u.parent);for(var g=f.length;i!==h;)f.splice(g,0,i),i=i.parent;return f},ancestors:function(){for(var i=this,u=[i];i=i.parent;)u.push(i);return u},descendants:function(){var i=[];return this.each(function(u){i.push(u)}),i},leaves:function(){var i=[];return this.eachBefore(function(u){u.children||i.push(u)}),i},links:function(){var i=this,u=[];return i.each(function(h){h!==i&&u.push({source:h.parent,target:h})}),u},copy:function ey(){return e_(this).eachBefore(t_)}};var ls=function(i){return gf(function(i){for(var h=(i=i.slice()).length,f=null,g=f;h;){var v=new ty(i[h-1]);g=g?g.next=v:f=v,i[void 0]=i[--h]}return{head:f,tail:g}}(i),[])};function mo(i,u){var h=u.x-i.x,f=u.y-i.y,g=i.r-u.r;return g*g+1e-6>h*h+f*f}function gf(i,u){var h,v,E,f=null,g=i.head;switch(u.length){case 1:h=function n_(i){return{x:i.x,y:i.y,r:i.r}}(u[0]);break;case 2:h=function BE(i,u){var h=i.x,f=i.y,g=i.r,v=u.x,E=u.y,I=u.r,S=v-h,k=E-f,O=I-g,U=Math.sqrt(S*S+k*k);return{x:(h+v+S/U*O)/2,y:(f+E+k/U*O)/2,r:(U+g+I)/2}}(u[0],u[1]);break;case 3:h=function bw(i,u,h){var f=i.x,g=i.y,v=i.r,E=u.x,I=u.y,S=u.r,k=h.x,O=h.y,U=h.r,N=2*(f-E),V=2*(g-I),H=2*(S-v),G=f*f+g*g-v*v-E*E-I*I+S*S,Y=2*(f-k),J=2*(g-O),he=2*(U-v),ee=f*f+g*g-v*v-k*k-O*O+U*U,Ce=Y*V-N*J,ke=(V*ee-J*G)/Ce-f,Se=(J*H-V*he)/Ce,_e=(Y*G-N*ee)/Ce-g,ze=(N*he-Y*H)/Ce,je=Se*Se+ze*ze-1,xt=2*(ke*Se+_e*ze+v),Qe=(-xt-Math.sqrt(xt*xt-4*je*(ke*ke+_e*_e-v*v)))/(2*je);return{x:ke+Se*Qe+f,y:_e+ze*Qe+g,r:Qe}}(u[0],u[1],u[2])}for(;g;)E=g._,v=g.next,h&&mo(h,E)?f=g:(f?(i.tail=f,f.next=null):i.head=i.tail=null,u.push(E),h=gf(i,u),u.pop(),i.head?(g.next=i.head,i.head=g):(g.next=null,i.head=i.tail=g),(f=i.tail).next=v),g=v;return i.tail=f,h}function r_(i,u,h){var f=i.x,g=i.y,v=u.r+h.r,E=i.r+h.r,I=u.x-f,S=u.y-g,k=I*I+S*S;if(k){var O=.5+((E*=E)-(v*=v))/(2*k),U=Math.sqrt(Math.max(0,2*v*(E+k)-(E-=k)*E-v*v))/(2*k);h.x=f+O*I+U*S,h.y=g+O*S-U*I}else h.x=f+E,h.y=g}function VE(i,u){var h=u.x-i.x,f=u.y-i.y,g=i.r+u.r;return g*g-1e-6>h*h+f*f}function Ew(i,u,h){var f=i._,g=i.next._,v=f.r+g.r,E=(f.x*g.r+g.x*f.r)/v-u,I=(f.y*g.r+g.y*f.r)/v-h;return E*E+I*I}function mf(i){this._=i,this.next=null,this.previous=null}function ag(i){if(!(g=i.length))return 0;var u,h,f,g;if((u=i[0]).x=0,u.y=0,!(g>1))return u.r;if(u.x=-(h=i[1]).r,h.x=u.r,h.y=0,!(g>2))return u.r+h.r;r_(h,u,f=i[2]);var U,N,V,H,G,Y,J,v=u.r*u.r,E=h.r*h.r,I=f.r*f.r,S=v+E+I,k=v*u.x+E*h.x+I*f.x,O=v*u.y+E*h.y+I*f.y;u=new mf(u),h=new mf(h),f=new mf(f),u.next=f.previous=h,h.next=u.previous=f,f.next=h.previous=u;e:for(V=3;V<g;++V){r_(u._,h._,f=i[V]),f=new mf(f),H=h.next,G=u.previous,Y=h._.r,J=u._.r;do{if(Y<=J){if(VE(H._,f._)){u.next=h=H,h.previous=u,--V;continue e}Y+=H._.r,H=H.next}else{if(VE(G._,f._)){(u=G).next=h,h.previous=u,--V;continue e}J+=G._.r,G=G.previous}}while(H!==G.next);for(f.previous=u,f.next=h,u.next=h.previous=h=f,S+=I=f._.r*f._.r,v=Ew(u,U=(k+=I*f._.x)/S,N=(O+=I*f._.y)/S);(f=f.next)!==h;)(I=Ew(f,U,N))<v&&(u=f,v=I);h=u.next}for(u=[h._],f=h;(f=f.next)!==h;)u.push(f._);for(f=ls(u),V=0;V<g;++V)(u=i[V]).x-=f.x,u.y-=f.y;return f.r}function Iw(i){return null==i?null:ry(i)}function ry(i){if("function"!=typeof i)throw new Error;return i}function yf(){return 0}var hl=function(i){return function(){return i}};function iy(i){return Math.sqrt(i.value)}function s_(i){return function(u){u.children||(u.r=Math.max(0,+i(u)||0))}}function o_(i,u){return function(h){if(f=h.children){var f,g,I,v=f.length,E=i(h)*u||0;if(E)for(g=0;g<v;++g)f[g].r+=E;if(I=ag(f),E)for(g=0;g<v;++g)f[g].r-=E;h.r=I+E}}}function vf(i){return function(u){var h=u.parent;u.r*=i,h&&(u.x=h.x+i*u.x,u.y=h.y+i*u.y)}}var a_=function(i){i.x0=Math.round(i.x0),i.y0=Math.round(i.y0),i.x1=Math.round(i.x1),i.y1=Math.round(i.y1)},_f=function(i,u,h,f,g){for(var E,v=i.children,I=-1,S=v.length,k=i.value&&(f-u)/i.value;++I<S;)(E=v[I]).y0=h,E.y1=g,E.x0=u,E.x1=u+=E.value*k},vC={depth:-1},jE={};function cg(i){return i.id}function $E(i){return i.parentId}function ri(i,u){return i.parent===u.parent?1:2}function sy(i){var u=i.children;return u?u[0]:i.t}function lg(i){var u=i.children;return u?u[u.length-1]:i.t}function HE(i,u,h){var f=h/(u.i-i.i);u.c-=f,u.s+=h,i.c+=f,u.z+=h,u.m+=h}function zE(i,u,h){return i.a.parent===u.parent?i.a:h}function ks(i,u){this._=i,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=u}ks.prototype=Object.create(Hh.prototype);var wf=function(i,u,h,f,g){for(var E,v=i.children,I=-1,S=v.length,k=i.value&&(g-h)/i.value;++I<S;)(E=v[I]).x0=u,E.x1=f,E.y0=h,E.y1=h+=E.value*k},Dw=(1+Math.sqrt(5))/2;function oy(i,u,h,f,g,v){for(var S,k,V,H,Y,J,he,ee,Ce,ke,Se,E=[],I=u.children,O=0,U=0,N=I.length,G=u.value;O<N;){V=g-h,H=v-f;do{Y=I[U++].value}while(!Y&&U<N);for(J=he=Y,Se=Y*Y*(ke=Math.max(H/V,V/H)/(G*i)),Ce=Math.max(he/Se,Se/J);U<N;++U){if(Y+=k=I[U].value,k<J&&(J=k),k>he&&(he=k),Se=Y*Y*ke,(ee=Math.max(he/Se,Se/J))>Ce){Y-=k;break}Ce=ee}E.push(S={value:Y,dice:V<H,children:I.slice(O,U)}),S.dice?_f(S,h,f,g,G?f+=H*Y/G:v):wf(S,h,f,G?h+=V*Y/G:g,v),G-=Y,O=U}return E}var Sw=function i(u){function h(f,g,v,E,I){oy(u,f,g,v,E,I)}return h.ratio=function(f){return i((f=+f)>1?f:1)},h}(Dw),l_=function i(u){function h(f,g,v,E,I){if((S=f._squarify)&&S.ratio===u)for(var S,k,O,U,V,N=-1,H=S.length,G=f.value;++N<H;){for(O=(k=S[N]).children,U=k.value=0,V=O.length;U<V;++U)k.value+=O[U].value;k.dice?_f(k,g,v,E,v+=(I-v)*k.value/G):wf(k,g,v,g+=(E-g)*k.value/G,I),G-=k.value}else f._squarify=S=oy(u,f,g,v,E,I),S.ratio=u}return h.ratio=function(f){return i((f=+f)>1?f:1)},h}(Dw),ay=function(i,u,h){return(u[0]-i[0])*(h[1]-i[1])-(u[1]-i[1])*(h[0]-i[0])};function gc(i,u){return i[0]-u[0]||i[1]-u[1]}function Bu(i){for(var u=i.length,h=[0,1],f=2,g=2;g<u;++g){for(;f>1&&ay(i[h[f-2]],i[h[f-1]],i[g])<=0;)--f;h[f++]=g}return h.slice(0,f)}var GE=[].slice,qE={};function f_(i){this._size=i,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function WE(i){if(!i._start)try{!function bf(i){for(;i._start=i._waiting&&i._active<i._size;){var u=i._ended+i._active,h=i._tasks[u],f=h.length-1,g=h[f];h[f]=dg(i,u),--i._waiting,++i._active,h=g.apply(null,h),i._tasks[u]&&(i._tasks[u]=h||qE)}}(i)}catch(u){if(i._tasks[i._ended+i._active-1])fg(i,u);else if(!i._data)throw u}}function dg(i,u){return function(h,f){!i._tasks[u]||(--i._active,++i._ended,i._tasks[u]=null,null==i._error&&(null!=h?fg(i,h):(i._data[u]=f,i._waiting?WE(i):zl(i))))}}function fg(i,u){var f,h=i._tasks.length;for(i._error=u,i._data=void 0,i._waiting=NaN;--h>=0;)if((f=i._tasks[h])&&(i._tasks[h]=null,f.abort))try{f.abort()}catch(g){}i._active=NaN,zl(i)}function zl(i){if(!i._active&&i._call){var u=i._data;i._data=void 0,i._call(i._error,u)}}function zh(i){if(null==i)i=1/0;else if(!((i=+i)>=1))throw new Error("invalid concurrency");return new f_(i)}f_.prototype=zh.prototype={constructor:f_,defer:function(i){if("function"!=typeof i)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var u=GE.call(arguments,1);return u.push(i),++this._waiting,this._tasks.push(u),WE(this),this},abort:function(){return null==this._error&&fg(this,new Error("abort")),this},await:function(i){if("function"!=typeof i)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(u,h){i.apply(null,[u].concat(h))},zl(this),this},awaitAll:function(i){if("function"!=typeof i)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=i,zl(this),this}};var Gl=function(){return Math.random()},KE=function i(u){function h(f,g){return f=null==f?0:+f,g=null==g?1:+g,1===arguments.length?(g=f,f=0):g-=f,function(){return u()*g+f}}return h.source=i,h}(Gl),Ef=function i(u){function h(f,g){var v,E;return f=null==f?0:+f,g=null==g?1:+g,function(){var I;if(null!=v)I=v,v=null;else do{v=2*u()-1,I=2*u()-1,E=v*v+I*I}while(!E||E>1);return f+g*I*Math.sqrt(-2*Math.log(E)/E)}}return h.source=i,h}(Gl),pg=function i(u){function h(){var f=Ef.source(u).apply(this,arguments);return function(){return Math.exp(f())}}return h.source=i,h}(Gl),cy=function i(u){function h(f){return function(){for(var g=0,v=0;v<f;++v)g+=u();return g}}return h.source=i,h}(Gl),Gh=function i(u){function h(f){var g=cy.source(u)(f);return function(){return g()/f}}return h.source=i,h}(Gl),xw=function i(u){function h(f){return function(){return-Math.log(1-u())/f}}return h.source=i,h}(Gl),ly=function(i,u){var h,g,k,O,f=ys("beforesend","progress","load","error"),v=Ai(),E=new XMLHttpRequest,I=null,S=null,U=0;function N(V){var G,H=E.status;if(!H&&function fl(i){var u=i.responseType;return u&&"text"!==u?i.response:i.responseText}(E)||H>=200&&H<300||304===H){if(k)try{G=k.call(h,E)}catch(Y){return void f.call("error",h,Y)}else G=E;f.call("load",h,G)}else f.call("error",h,V)}if("undefined"!=typeof XDomainRequest&&!("withCredentials"in E)&&/^(http(s)?:)?\/\//.test(i)&&(E=new XDomainRequest),"onload"in E?E.onload=E.onerror=E.ontimeout=N:E.onreadystatechange=function(V){E.readyState>3&&N(V)},E.onprogress=function(V){f.call("progress",h,V)},h={header:function(V,H){return V=(V+"").toLowerCase(),arguments.length<2?v.get(V):(null==H?v.remove(V):v.set(V,H+""),h)},mimeType:function(V){return arguments.length?(g=null==V?null:V+"",h):g},responseType:function(V){return arguments.length?(O=V,h):O},timeout:function(V){return arguments.length?(U=+V,h):U},user:function(V){return arguments.length<1?I:(I=null==V?null:V+"",h)},password:function(V){return arguments.length<1?S:(S=null==V?null:V+"",h)},response:function(V){return k=V,h},get:function(V,H){return h.send("GET",V,H)},post:function(V,H){return h.send("POST",V,H)},send:function(V,H,G){return E.open(V,i,!0,I,S),null!=g&&!v.has("accept")&&v.set("accept",g+",*/*"),E.setRequestHeader&&v.each(function(Y,J){E.setRequestHeader(J,Y)}),null!=g&&E.overrideMimeType&&E.overrideMimeType(g),null!=O&&(E.responseType=O),U>0&&(E.timeout=U),null==G&&"function"==typeof H&&(G=H,H=null),null!=G&&1===G.length&&(G=function qh(i){return function(u,h){i(null==u?h:null)}}(G)),null!=G&&h.on("error",G).on("load",function(Y){G(null,Y)}),f.call("beforesend",h,E),E.send(null==H?null:H),h},abort:function(){return E.abort(),h},on:function(){var V=f.on.apply(f,arguments);return V===f?h:V}},null!=u){if("function"!=typeof u)throw new Error("invalid callback: "+u);return h.get(u)}return h};var Wh=function(i,u){return function(h,f){var g=ly(h).mimeType(i).response(u);if(null!=f){if("function"!=typeof f)throw new Error("invalid callback: "+f);return g.get(f)}return g}},hy=Wh("text/html",function(i){return document.createRange().createContextualFragment(i.responseText)}),dy=Wh("application/json",function(i){return JSON.parse(i.responseText)}),Mw=Wh("text/plain",function(i){return i.responseText}),ii=Wh("application/xml",function(i){var u=i.responseXML;if(!u)throw new Error("parse error");return u}),gg=function(i,u){return function(h,f,g){arguments.length<3&&(g=f,f=null);var v=ly(h).mimeType(i);return v.row=function(E){return arguments.length?v.response(MI(u,f=E)):f},v.row(f),g?v.get(g):v}};function MI(i,u){return function(h){return i(h.responseText,u)}}var RI=gg("text/csv",He),fy=gg("text/tab-separated-values",ei),mg=Array.prototype,Rw=mg.map,ql=mg.slice,kw={name:"implicit"};function Nw(i){var u=Ai(),h=[],f=kw;function g(v){var E=v+"",I=u.get(E);if(!I){if(f!==kw)return f;u.set(E,I=h.push(v))}return i[(I-1)%i.length]}return i=null==i?[]:ql.call(i),g.domain=function(v){if(!arguments.length)return h.slice();h=[],u=Ai();for(var S,k,E=-1,I=v.length;++E<I;)u.has(k=(S=v[E])+"")||u.set(k,h.push(S));return g},g.range=function(v){return arguments.length?(i=ql.call(v),g):i.slice()},g.unknown=function(v){return arguments.length?(f=v,g):f},g.copy=function(){return Nw().domain(h).range(i).unknown(f)},g}function Pw(){var g,v,i=Nw().unknown(void 0),u=i.domain,h=i.range,f=[0,1],E=!1,I=0,S=0,k=.5;function O(){var U=u().length,N=f[1]<f[0],V=f[N-0],H=f[1-N];g=(H-V)/Math.max(1,U-I+2*S),E&&(g=Math.floor(g)),V+=(H-V-g*(U-I))*k,v=g*(1-I),E&&(V=Math.round(V),v=Math.round(v));var G=qe(U).map(function(Y){return V+g*Y});return h(N?G.reverse():G)}return delete i.unknown,i.domain=function(U){return arguments.length?(u(U),O()):u()},i.range=function(U){return arguments.length?(f=[+U[0],+U[1]],O()):f.slice()},i.rangeRound=function(U){return f=[+U[0],+U[1]],E=!0,O()},i.bandwidth=function(){return v},i.step=function(){return g},i.round=function(U){return arguments.length?(E=!!U,O()):E},i.padding=function(U){return arguments.length?(I=S=Math.max(0,Math.min(1,U)),O()):I},i.paddingInner=function(U){return arguments.length?(I=Math.max(0,Math.min(1,U)),O()):I},i.paddingOuter=function(U){return arguments.length?(S=Math.max(0,Math.min(1,U)),O()):S},i.align=function(U){return arguments.length?(k=Math.max(0,Math.min(1,U)),O()):k},i.copy=function(){return Pw().domain(u()).range(f).round(E).paddingInner(I).paddingOuter(S).align(k)},O()}function ZE(i){var u=i.copy;return i.padding=i.paddingOuter,delete i.paddingInner,delete i.paddingOuter,i.copy=function(){return ZE(u())},i}var pl=function(i){return function(){return i}},Ow=function(i){return+i},Lw=[0,1];function p_(i,u){return(u-=i=+i)?function(h){return(h-i)/u}:pl(u)}function NI(i,u,h,f){var g=i[0],v=i[1],E=u[0],I=u[1];return v<g?(g=h(v,g),E=f(I,E)):(g=h(g,v),E=f(E,I)),function(S){return E(g(S))}}function Fw(i,u,h,f){var g=Math.min(i.length,u.length)-1,v=new Array(g),E=new Array(g),I=-1;for(i[g]<i[0]&&(i=i.slice().reverse(),u=u.slice().reverse());++I<g;)v[I]=h(i[I],i[I+1]),E[I]=f(u[I],u[I+1]);return function(S){var k=Ue(i,S,1,g)-1;return E[k](v[k](S))}}function gy(i,u){return u.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp())}function vg(i,u){var E,I,S,h=Lw,f=Lw,g=Hr,v=!1;function k(){return E=Math.min(h.length,f.length)>2?Fw:NI,I=S=null,O}function O(U){return(I||(I=E(h,f,v?function yg(i){return function(u,h){var f=i(u=+u,h=+h);return function(g){return g<=u?0:g>=h?1:f(g)}}}(i):i,g)))(+U)}return O.invert=function(U){return(S||(S=E(f,h,p_,v?function kI(i){return function(u,h){var f=i(u=+u,h=+h);return function(g){return g<=0?u:g>=1?h:f(g)}}}(u):u)))(+U)},O.domain=function(U){return arguments.length?(h=Rw.call(U,Ow),k()):h.slice()},O.range=function(U){return arguments.length?(f=ql.call(U),k()):f.slice()},O.rangeRound=function(U){return f=ql.call(U),g=$c,k()},O.clamp=function(U){return arguments.length?(v=!!U,k()):v},O.interpolate=function(U){return arguments.length?(g=U,k()):g},k()}function Kh(i){var u=i.domain;return i.ticks=function(h){var f=u();return vt(f[0],f[f.length-1],null==h?10:h)},i.tickFormat=function(h,f){return function(i,u,h){var E,f=i[0],g=i[i.length-1],v=Ke(f,g,null==u?10:u);switch((h=Op(null==h?",f":h)).type){case"s":var I=Math.max(Math.abs(f),Math.abs(g));return null==h.precision&&!isNaN(E=tE(v,I))&&(h.precision=E),M.formatPrefix(h,I);case"":case"e":case"g":case"p":case"r":null==h.precision&&!isNaN(E=S0(v,Math.max(Math.abs(f),Math.abs(g))))&&(h.precision=E-("e"===h.type));break;case"f":case"%":null==h.precision&&!isNaN(E=eE(v))&&(h.precision=E-2*("%"===h.type))}return M.format(h)}(u(),h,f)},i.nice=function(h){null==h&&(h=10);var S,f=u(),g=0,v=f.length-1,E=f[g],I=f[v];return I<E&&(S=E,E=I,I=S,S=g,g=v,v=S),(S=ce(E,I,h))>0?S=ce(E=Math.floor(E/S)*S,I=Math.ceil(I/S)*S,h):S<0&&(S=ce(E=Math.ceil(E*S)/S,I=Math.floor(I*S)/S,h)),S>0?(f[g]=Math.floor(E/S)*S,f[v]=Math.ceil(I/S)*S,u(f)):S<0&&(f[g]=Math.ceil(E*S)/S,f[v]=Math.floor(I*S)/S,u(f)),i},i}var m_=function(i,u){var E,h=0,f=(i=i.slice()).length-1,g=i[h],v=i[f];return v<g&&(E=h,h=f,f=E,E=g,g=v,v=E),i[h]=u.floor(g),i[f]=u.ceil(v),i};function y_(i,u){return(u=Math.log(u/i))?function(h){return Math.log(h/i)/u}:pl(u)}function YE(i,u){return i<0?function(h){return-Math.pow(-u,h)*Math.pow(-i,1-h)}:function(h){return Math.pow(u,h)*Math.pow(i,1-h)}}function QE(i){return isFinite(i)?+("1e"+i):i<0?0:i}function Zh(i){return 10===i?QE:i===Math.E?Math.exp:function(u){return Math.pow(i,u)}}function yy(i){return i===Math.E?Math.log:10===i&&Math.log10||2===i&&Math.log2||(i=Math.log(i),function(u){return Math.log(u)/i})}function _g(i){return function(u){return-i(-u)}}function If(i,u){return i<0?-Math.pow(-i,u):Math.pow(i,u)}function wg(){var i=1,u=vg(function f(v,E){return(E=If(E,i)-(v=If(v,i)))?function(I){return(If(I,i)-v)/E}:pl(E)},function g(v,E){return E=If(E,i)-(v=If(v,i)),function(I){return If(v+E*I,1/i)}}),h=u.domain;return u.exponent=function(v){return arguments.length?(i=+v,h(h())):i},u.copy=function(){return gy(u,wg().exponent(i))},Kh(u)}var _n=new Date,Vw=new Date;function Ns(i,u,h,f){function g(v){return i(v=new Date(+v)),v}return g.floor=g,g.ceil=function(v){return i(v=new Date(v-1)),u(v,1),i(v),v},g.round=function(v){var E=g(v),I=g.ceil(v);return v-E<I-v?E:I},g.offset=function(v,E){return u(v=new Date(+v),null==E?1:Math.floor(E)),v},g.range=function(v,E,I){var S=[];if(v=g.ceil(v),I=null==I?1:Math.floor(I),!(v<E&&I>0))return S;do{S.push(new Date(+v))}while(u(v,I),i(v),v<E);return S},g.filter=function(v){return Ns(function(E){if(E>=E)for(;i(E),!v(E);)E.setTime(E-1)},function(E,I){if(E>=E)for(;--I>=0;)for(;u(E,1),!v(E););})},h&&(g.count=function(v,E){return _n.setTime(+v),Vw.setTime(+E),i(_n),i(Vw),Math.floor(h(_n,Vw))},g.every=function(v){return v=Math.floor(v),isFinite(v)&&v>0?v>1?g.filter(f?function(E){return f(E)%v==0}:function(E){return g.count(0,E)%v==0}):g:null}),g}var Tf=Ns(function(){},function(i,u){i.setTime(+i+u)},function(i,u){return u-i});Tf.every=function(i){return i=Math.floor(i),isFinite(i)&&i>0?i>1?Ns(function(u){u.setTime(Math.floor(u/i)*i)},function(u,h){u.setTime(+u+h*i)},function(u,h){return(h-u)/i}):Tf:null};var vy=Tf.range,tu=6e4,Vu=36e5,XE=6048e5,Ca=Ns(function(i){i.setTime(1e3*Math.floor(i/1e3))},function(i,u){i.setTime(+i+1e3*u)},function(i,u){return(u-i)/1e3},function(i){return i.getUTCSeconds()}),jw=Ca.range,$w=Ns(function(i){i.setTime(Math.floor(i/tu)*tu)},function(i,u){i.setTime(+i+u*tu)},function(i,u){return(u-i)/tu},function(i){return i.getMinutes()}),__=$w.range,Yh=Ns(function(i){var u=i.getTimezoneOffset()*tu%Vu;u<0&&(u+=Vu),i.setTime(Math.floor((+i-u)/Vu)*Vu+u)},function(i,u){i.setTime(+i+u*Vu)},function(i,u){return(u-i)/Vu},function(i){return i.getHours()}),Hw=Yh.range,Df=Ns(function(i){i.setHours(0,0,0,0)},function(i,u){i.setDate(i.getDate()+u)},function(i,u){return(u-i-(u.getTimezoneOffset()-i.getTimezoneOffset())*tu)/864e5},function(i){return i.getDate()-1}),w_=Df.range;function Qh(i){return Ns(function(u){u.setDate(u.getDate()-(u.getDay()+7-i)%7),u.setHours(0,0,0,0)},function(u,h){u.setDate(u.getDate()+7*h)},function(u,h){return(h-u-(h.getTimezoneOffset()-u.getTimezoneOffset())*tu)/XE})}var Sf=Qh(0),ml=Qh(1),JE=Qh(2),zw=Qh(3),bg=Qh(4),Eg=Qh(5),b_=Qh(6),wy=Sf.range,E_=ml.range,e1=JE.range,Xh=zw.range,Ig=bg.range,t1=Eg.range,Af=b_.range,I_=Ns(function(i){i.setDate(1),i.setHours(0,0,0,0)},function(i,u){i.setMonth(i.getMonth()+u)},function(i,u){return u.getMonth()-i.getMonth()+12*(u.getFullYear()-i.getFullYear())},function(i){return i.getMonth()}),Gw=I_.range,Wl=Ns(function(i){i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,u){i.setFullYear(i.getFullYear()+u)},function(i,u){return u.getFullYear()-i.getFullYear()},function(i){return i.getFullYear()});Wl.every=function(i){return isFinite(i=Math.floor(i))&&i>0?Ns(function(u){u.setFullYear(Math.floor(u.getFullYear()/i)*i),u.setMonth(0,1),u.setHours(0,0,0,0)},function(u,h){u.setFullYear(u.getFullYear()+h*i)}):null};var qw=Wl.range,Cg=Ns(function(i){i.setUTCSeconds(0,0)},function(i,u){i.setTime(+i+u*tu)},function(i,u){return(u-i)/tu},function(i){return i.getUTCMinutes()}),Ta=Cg.range,C_=Ns(function(i){i.setUTCMinutes(0,0,0)},function(i,u){i.setTime(+i+u*Vu)},function(i,u){return(u-i)/Vu},function(i){return i.getUTCHours()}),n1=C_.range,Jh=Ns(function(i){i.setUTCHours(0,0,0,0)},function(i,u){i.setUTCDate(i.getUTCDate()+u)},function(i,u){return(u-i)/864e5},function(i){return i.getUTCDate()-1}),_C=Jh.range;function Tg(i){return Ns(function(u){u.setUTCDate(u.getUTCDate()-(u.getUTCDay()+7-i)%7),u.setUTCHours(0,0,0,0)},function(u,h){u.setUTCDate(u.getUTCDate()+7*h)},function(u,h){return(h-u)/XE})}var Dg=Tg(0),T_=Tg(1),by=Tg(2),Ww=Tg(3),r1=Tg(4),Sg=Tg(5),Ag=Tg(6),Kw=Dg.range,Ys=T_.range,xg=by.range,ed=Ww.range,Zw=r1.range,i1=Sg.range,wt=Ag.range,ki=Ns(function(i){i.setUTCDate(1),i.setUTCHours(0,0,0,0)},function(i,u){i.setUTCMonth(i.getUTCMonth()+u)},function(i,u){return u.getUTCMonth()-i.getUTCMonth()+12*(u.getUTCFullYear()-i.getUTCFullYear())},function(i){return i.getUTCMonth()}),yl=ki.range,Kl=Ns(function(i){i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,u){i.setUTCFullYear(i.getUTCFullYear()+u)},function(i,u){return u.getUTCFullYear()-i.getUTCFullYear()},function(i){return i.getUTCFullYear()});Kl.every=function(i){return isFinite(i=Math.floor(i))&&i>0?Ns(function(u){u.setUTCFullYear(Math.floor(u.getUTCFullYear()/i)*i),u.setUTCMonth(0,1),u.setUTCHours(0,0,0,0)},function(u,h){u.setUTCFullYear(u.getUTCFullYear()+h*i)}):null};var Jt=Kl.range;function Rn(i){if(0<=i.y&&i.y<100){var u=new Date(-1,i.m,i.d,i.H,i.M,i.S,i.L);return u.setFullYear(i.y),u}return new Date(i.y,i.m,i.d,i.H,i.M,i.S,i.L)}function D_(i){if(0<=i.y&&i.y<100){var u=new Date(Date.UTC(-1,i.m,i.d,i.H,i.M,i.S,i.L));return u.setUTCFullYear(i.y),u}return new Date(Date.UTC(i.y,i.m,i.d,i.H,i.M,i.S,i.L))}function Ut(i){return{y:i,m:0,d:1,H:0,M:0,S:0,L:0}}function Ge(i){var u=i.dateTime,h=i.date,f=i.time,g=i.periods,v=i.days,E=i.shortDays,I=i.months,S=i.shortMonths,k=Ey(g),O=Iy(g),U=Ey(v),N=Iy(v),V=Ey(E),H=Iy(E),G=Ey(I),Y=Iy(I),J=Ey(S),he=Iy(S),ee={a:function Mt(Bt){return E[Bt.getDay()]},A:function Kt(Bt){return v[Bt.getDay()]},b:function Yt(Bt){return S[Bt.getMonth()]},B:function Qn(Bt){return I[Bt.getMonth()]},c:null,d:Ot,e:Ot,H:Ty,I:Qw,j:xf,L:A_,m:Mf,M:x_,p:function Mn(Bt){return g[+(Bt.getHours()>=12)]},S:Xw,U:ea,w:Jw,W:c1,x:null,X:null,y:M_,Y:td,Z:eb,"%":rd},Ce={a:function tr(Bt){return E[Bt.getUTCDay()]},A:function Xn(Bt){return v[Bt.getUTCDay()]},b:function jr(Bt){return S[Bt.getUTCMonth()]},B:function Sr(Bt){return I[Bt.getUTCMonth()]},c:null,d:Ve,e:Ve,H:Dy,I:mc,j:l1,L:R_,m:nd,M:k_,p:function cr(Bt){return g[+(Bt.getUTCHours()>=12)]},S:Rf,U:kf,w:Nf,W:UI,x:null,X:null,y:wC,Y:ta,Z:h1,"%":rd},ke={a:function xt(Bt,Sn,kn){var tn=V.exec(Sn.slice(kn));return tn?(Bt.w=H[tn[0].toLowerCase()],kn+tn[0].length):-1},A:function mt(Bt,Sn,kn){var tn=U.exec(Sn.slice(kn));return tn?(Bt.w=N[tn[0].toLowerCase()],kn+tn[0].length):-1},b:function Qe(Bt,Sn,kn){var tn=J.exec(Sn.slice(kn));return tn?(Bt.m=he[tn[0].toLowerCase()],kn+tn[0].length):-1},B:function Pt(Bt,Sn,kn){var tn=G.exec(Sn.slice(kn));return tn?(Bt.m=Y[tn[0].toLowerCase()],kn+tn[0].length):-1},c:function ft(Bt,Sn,kn){return ze(Bt,u,Sn,kn)},d:Yw,e:Yw,H:An,I:An,j:li,L:u1,m:Mg,M:Cy,p:function je(Bt,Sn,kn){var tn=k.exec(Sn.slice(kn));return tn?(Bt.p=O[tn[0].toLowerCase()],kn+tn[0].length):-1},S:ir,U:OI,w:S_,W:LI,x:function le(Bt,Sn,kn){return ze(Bt,h,Sn,kn)},X:function it(Bt,Sn,kn){return ze(Bt,f,Sn,kn)},y:a1,Y:FI,Z:zn,"%":Hi};function Se(Bt,Sn){return function(kn){var eo,Zg,Yg,tn=[],Ii=-1,ra=0,Bo=Bt.length;for(kn instanceof Date||(kn=new Date(+kn));++Ii<Bo;)37===Bt.charCodeAt(Ii)&&(tn.push(Bt.slice(ra,Ii)),null!=(Zg=gt[eo=Bt.charAt(++Ii)])?eo=Bt.charAt(++Ii):Zg="e"===eo?" ":"0",(Yg=Sn[eo])&&(eo=Yg(kn,Zg)),tn.push(eo),ra=Ii+1);return tn.push(Bt.slice(ra,Ii)),tn.join("")}}function _e(Bt,Sn){return function(kn){var tn=Ut(1900);if(ze(tn,Bt,kn+="",0)!=kn.length)return null;if("p"in tn&&(tn.H=tn.H%12+12*tn.p),"W"in tn||"U"in tn){"w"in tn||(tn.w="W"in tn?1:0);var ra="Z"in tn?D_(Ut(tn.y)).getUTCDay():Sn(Ut(tn.y)).getDay();tn.m=0,tn.d="W"in tn?(tn.w+6)%7+7*tn.W-(ra+5)%7:tn.w+7*tn.U-(ra+6)%7}return"Z"in tn?(tn.H+=tn.Z/100|0,tn.M+=tn.Z%100,D_(tn)):Sn(tn)}}function ze(Bt,Sn,kn,tn){for(var eo,Zg,Ii=0,ra=Sn.length,Bo=kn.length;Ii<ra;){if(tn>=Bo)return-1;if(37===(eo=Sn.charCodeAt(Ii++))){if(eo=Sn.charAt(Ii++),!(Zg=ke[eo in gt?Sn.charAt(Ii++):eo])||(tn=Zg(Bt,kn,tn))<0)return-1}else if(eo!=kn.charCodeAt(tn++))return-1}return tn}return ee.x=Se(h,ee),ee.X=Se(f,ee),ee.c=Se(u,ee),Ce.x=Se(h,Ce),Ce.X=Se(f,Ce),Ce.c=Se(u,Ce),{format:function(Bt){var Sn=Se(Bt+="",ee);return Sn.toString=function(){return Bt},Sn},parse:function(Bt){var Sn=_e(Bt+="",Rn);return Sn.toString=function(){return Bt},Sn},utcFormat:function(Bt){var Sn=Se(Bt+="",Ce);return Sn.toString=function(){return Bt},Sn},utcParse:function(Bt){var Sn=_e(Bt,D_);return Sn.toString=function(){return Bt},Sn}}}var Pf,gt={"-":"",_:" ",0:"0"},yr=/^\s*\d+/,s1=/^%/,o1=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function Br(i,u,h){var f=i<0?"-":"",g=(f?-i:i)+"",v=g.length;return f+(v<h?new Array(h-v+1).join(u)+g:g)}function PI(i){return i.replace(o1,"\\$&")}function Ey(i){return new RegExp("^(?:"+i.map(PI).join("|")+")","i")}function Iy(i){for(var u={},h=-1,f=i.length;++h<f;)u[i[h].toLowerCase()]=h;return u}function S_(i,u,h){var f=yr.exec(u.slice(h,h+1));return f?(i.w=+f[0],h+f[0].length):-1}function OI(i,u,h){var f=yr.exec(u.slice(h));return f?(i.U=+f[0],h+f[0].length):-1}function LI(i,u,h){var f=yr.exec(u.slice(h));return f?(i.W=+f[0],h+f[0].length):-1}function FI(i,u,h){var f=yr.exec(u.slice(h,h+4));return f?(i.y=+f[0],h+f[0].length):-1}function a1(i,u,h){var f=yr.exec(u.slice(h,h+2));return f?(i.y=+f[0]+(+f[0]>68?1900:2e3),h+f[0].length):-1}function zn(i,u,h){var f=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(u.slice(h,h+6));return f?(i.Z=f[1]?0:-(f[2]+(f[3]||"00")),h+f[0].length):-1}function Mg(i,u,h){var f=yr.exec(u.slice(h,h+2));return f?(i.m=f[0]-1,h+f[0].length):-1}function Yw(i,u,h){var f=yr.exec(u.slice(h,h+2));return f?(i.d=+f[0],h+f[0].length):-1}function li(i,u,h){var f=yr.exec(u.slice(h,h+3));return f?(i.m=0,i.d=+f[0],h+f[0].length):-1}function An(i,u,h){var f=yr.exec(u.slice(h,h+2));return f?(i.H=+f[0],h+f[0].length):-1}function Cy(i,u,h){var f=yr.exec(u.slice(h,h+2));return f?(i.M=+f[0],h+f[0].length):-1}function ir(i,u,h){var f=yr.exec(u.slice(h,h+2));return f?(i.S=+f[0],h+f[0].length):-1}function u1(i,u,h){var f=yr.exec(u.slice(h,h+3));return f?(i.L=+f[0],h+f[0].length):-1}function Hi(i,u,h){var f=s1.exec(u.slice(h,h+1));return f?h+f[0].length:-1}function Ot(i,u){return Br(i.getDate(),u,2)}function Ty(i,u){return Br(i.getHours(),u,2)}function Qw(i,u){return Br(i.getHours()%12||12,u,2)}function xf(i,u){return Br(1+Df.count(Wl(i),i),u,3)}function A_(i,u){return Br(i.getMilliseconds(),u,3)}function Mf(i,u){return Br(i.getMonth()+1,u,2)}function x_(i,u){return Br(i.getMinutes(),u,2)}function Xw(i,u){return Br(i.getSeconds(),u,2)}function ea(i,u){return Br(Sf.count(Wl(i),i),u,2)}function Jw(i){return i.getDay()}function c1(i,u){return Br(ml.count(Wl(i),i),u,2)}function M_(i,u){return Br(i.getFullYear()%100,u,2)}function td(i,u){return Br(i.getFullYear()%1e4,u,4)}function eb(i){var u=i.getTimezoneOffset();return(u>0?"-":(u*=-1,"+"))+Br(u/60|0,"0",2)+Br(u%60,"0",2)}function Ve(i,u){return Br(i.getUTCDate(),u,2)}function Dy(i,u){return Br(i.getUTCHours(),u,2)}function mc(i,u){return Br(i.getUTCHours()%12||12,u,2)}function l1(i,u){return Br(1+Jh.count(Kl(i),i),u,3)}function R_(i,u){return Br(i.getUTCMilliseconds(),u,3)}function nd(i,u){return Br(i.getUTCMonth()+1,u,2)}function k_(i,u){return Br(i.getUTCMinutes(),u,2)}function Rf(i,u){return Br(i.getUTCSeconds(),u,2)}function kf(i,u){return Br(Dg.count(Kl(i),i),u,2)}function Nf(i){return i.getUTCDay()}function UI(i,u){return Br(T_.count(Kl(i),i),u,2)}function wC(i,u){return Br(i.getUTCFullYear()%100,u,2)}function ta(i,u){return Br(i.getUTCFullYear()%1e4,u,4)}function h1(){return"+0000"}function rd(){return"%"}function Ei(i){return Pf=Ge(i),M.timeFormat=Pf.format,M.timeParse=Pf.parse,M.utcFormat=Pf.utcFormat,M.utcParse=Pf.utcParse,Pf}Ei({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Rg="%Y-%m-%dT%H:%M:%S.%LZ";var br=Date.prototype.toISOString?function Qs(i){return i.toISOString()}:M.utcFormat(Rg);var vl=+new Date("2000-01-01T00:00:00.000Z")?function Sy(i){var u=new Date(i);return isNaN(u)?null:u}:M.utcParse(Rg),yo=1e3,kg=6e4,hi=60*kg,Ay=24*hi,si=30*Ay,Zl=365*Ay;function d1(i){return new Date(i)}function f1(i){return i instanceof Date?+i:+new Date(+i)}function Of(i,u,h,f,g,v,E,I,S){var k=vg(p_,es),O=k.invert,U=k.domain,N=S(".%L"),V=S(":%S"),H=S("%I:%M"),G=S("%I %p"),Y=S("%a %d"),J=S("%b %d"),he=S("%B"),ee=S("%Y"),Ce=[[E,1,yo],[E,5,5e3],[E,15,15e3],[E,30,3e4],[v,1,kg],[v,5,5*kg],[v,15,15*kg],[v,30,30*kg],[g,1,hi],[g,3,3*hi],[g,6,6*hi],[g,12,12*hi],[f,1,Ay],[f,2,2*Ay],[h,1,6048e5],[u,1,si],[u,3,3*si],[i,1,Zl]];function ke(_e){return(E(_e)<_e?N:v(_e)<_e?V:g(_e)<_e?H:f(_e)<_e?G:u(_e)<_e?h(_e)<_e?Y:J:i(_e)<_e?he:ee)(_e)}function Se(_e,ze,je,xt){if(null==_e&&(_e=10),"number"==typeof _e){var mt=Math.abs(je-ze)/_e,Qe=Q(function(Pt){return Pt[2]}).right(Ce,mt);Qe===Ce.length?(xt=Ke(ze/Zl,je/Zl,_e),_e=i):Qe?(xt=(Qe=Ce[mt/Ce[Qe-1][2]<Ce[Qe][2]/mt?Qe-1:Qe])[1],_e=Qe[0]):(xt=Ke(ze,je,_e),_e=I)}return null==xt?_e:_e.every(xt)}return k.invert=function(_e){return new Date(O(_e))},k.domain=function(_e){return arguments.length?U(Rw.call(_e,f1)):U().map(d1)},k.ticks=function(_e,ze){var Pt,je=U(),xt=je[0],mt=je[je.length-1],Qe=mt<xt;return Qe&&(Pt=xt,xt=mt,mt=Pt),Pt=(Pt=Se(_e,xt,mt,ze))?Pt.range(xt,mt+1):[],Qe?Pt.reverse():Pt},k.tickFormat=function(_e,ze){return null==ze?ke:S(ze)},k.nice=function(_e,ze){var je=U();return(_e=Se(_e,je[0],je[je.length-1],ze))?U(m_(je,_e)):k},k.copy=function(){return gy(k,Of(i,u,h,f,g,v,E,I,S))},k}var vo=function(i){return i.match(/.{6}/g).map(function(u){return"#"+u})},N_=vo("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),tb=vo("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),sd=vo("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),nb=vo("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),od=zo(To(300,.5,0),To(-240,.5,1)),Yl=zo(To(-100,.75,.35),To(80,1.5,.8)),Pg=zo(To(260,.75,.35),To(80,1.5,.8)),nu=To();function Ql(i){var u=i.length;return function(h){return i[Math.max(0,Math.min(u-1,Math.floor(h*u)))]}}var rb=Ql(vo("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Lf=Ql(vo("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ib=Ql(vo("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),xy=Ql(vo("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var Yn=function(i){return function(){return i}},My=Math.abs,ds=Math.atan2,ju=Math.cos,g1=Math.max,P_=Math.min,$u=Math.sin,ad=Math.sqrt,dr=1e-12,Xl=Math.PI,Ir=Xl/2,ud=2*Xl;function m1(i){return i>1?0:i<-1?Xl:Math.acos(i)}function cd(i){return i>=1?Ir:i<=-1?-Ir:Math.asin(i)}function BI(i){return i.innerRadius}function Ry(i){return i.outerRadius}function ld(i){return i.startAngle}function O_(i){return i.endAngle}function L_(i){return i&&i.padAngle}function yc(i,u,h,f,g,v,E,I){var S=h-i,k=f-u,O=E-g,U=I-v,N=(O*(u-v)-U*(i-g))/(U*S-O*k);return[i+N*S,u+N*k]}function fs(i,u,h,f,g,v,E){var I=i-h,S=u-f,k=(E?v:-v)/ad(I*I+S*S),O=k*S,U=-k*I,N=i+O,V=u+U,H=h+O,G=f+U,Y=(N+H)/2,J=(V+G)/2,he=H-N,ee=G-V,Ce=he*he+ee*ee,ke=g-v,Se=N*G-H*V,_e=(ee<0?-1:1)*ad(g1(0,ke*ke*Ce-Se*Se)),ze=(Se*ee-he*_e)/Ce,je=(-Se*he-ee*_e)/Ce,xt=(Se*ee+he*_e)/Ce,mt=(-Se*he+ee*_e)/Ce,Qe=ze-Y,Pt=je-J,ft=xt-Y,le=mt-J;return Qe*Qe+Pt*Pt>ft*ft+le*le&&(ze=xt,je=mt),{cx:ze,cy:je,x01:-O,y01:-U,x11:ze*(g/ke-1),y11:je*(g/ke-1)}}function Og(i){this._context=i}Og.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,u){switch(i=+i,u=+u,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,u):this._context.moveTo(i,u);break;case 1:this._point=2;default:this._context.lineTo(i,u)}}};var F_=function(i){return new Og(i)};function U_(i){return i[0]}function ab(i){return i[1]}var Lg=function(){var i=U_,u=ab,h=Yn(!0),f=null,g=F_,v=null;function E(I){var S,O,N,k=I.length,U=!1;for(null==f&&(v=g(N=Za())),S=0;S<=k;++S)!(S<k&&h(O=I[S],S,I))===U&&((U=!U)?v.lineStart():v.lineEnd()),U&&v.point(+i(O,S,I),+u(O,S,I));if(N)return v=null,N+""||null}return E.x=function(I){return arguments.length?(i="function"==typeof I?I:Yn(+I),E):i},E.y=function(I){return arguments.length?(u="function"==typeof I?I:Yn(+I),E):u},E.defined=function(I){return arguments.length?(h="function"==typeof I?I:Yn(!!I),E):h},E.curve=function(I){return arguments.length?(g=I,null!=f&&(v=g(f)),E):g},E.context=function(I){return arguments.length?(null==I?f=v=null:v=g(f=I),E):f},E},ky=function(){var i=U_,u=null,h=Yn(0),f=ab,g=Yn(!0),v=null,E=F_,I=null;function S(O){var U,N,V,G,J,H=O.length,Y=!1,he=new Array(H),ee=new Array(H);for(null==v&&(I=E(J=Za())),U=0;U<=H;++U){if(!(U<H&&g(G=O[U],U,O))===Y)if(Y=!Y)N=U,I.areaStart(),I.lineStart();else{for(I.lineEnd(),I.lineStart(),V=U-1;V>=N;--V)I.point(he[V],ee[V]);I.lineEnd(),I.areaEnd()}Y&&(he[U]=+i(G,U,O),ee[U]=+h(G,U,O),I.point(u?+u(G,U,O):he[U],f?+f(G,U,O):ee[U]))}if(J)return I=null,J+""||null}function k(){return Lg().defined(g).curve(E).context(v)}return S.x=function(O){return arguments.length?(i="function"==typeof O?O:Yn(+O),u=null,S):i},S.x0=function(O){return arguments.length?(i="function"==typeof O?O:Yn(+O),S):i},S.x1=function(O){return arguments.length?(u=null==O?null:"function"==typeof O?O:Yn(+O),S):u},S.y=function(O){return arguments.length?(h="function"==typeof O?O:Yn(+O),f=null,S):h},S.y0=function(O){return arguments.length?(h="function"==typeof O?O:Yn(+O),S):h},S.y1=function(O){return arguments.length?(f=null==O?null:"function"==typeof O?O:Yn(+O),S):f},S.lineX0=S.lineY0=function(){return k().x(i).y(h)},S.lineY1=function(){return k().x(i).y(f)},S.lineX1=function(){return k().x(u).y(h)},S.defined=function(O){return arguments.length?(g="function"==typeof O?O:Yn(!!O),S):g},S.curve=function(O){return arguments.length?(E=O,null!=v&&(I=E(v)),S):E},S.context=function(O){return arguments.length?(null==O?v=I=null:I=E(v=O),S):v},S},VI=function(i,u){return u<i?-1:u>i?1:u>=i?0:NaN},hd=function(i){return i},ub=Py(F_);function Ny(i){this._curve=i}function Py(i){function u(h){return new Ny(i(h))}return u._curve=i,u}function ru(i){var u=i.curve;return i.angle=i.x,delete i.x,i.radius=i.y,delete i.y,i.curve=function(h){return arguments.length?u(Py(h)):u()._curve},i}Ny.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(i,u){this._curve.point(u*Math.sin(i),u*-Math.cos(i))}};var Ly=Array.prototype.slice,dd=function(i,u){return[(u=+u)*Math.cos(i-=Math.PI/2),u*Math.sin(i)]};function B_(i){return i.source}function Fy(i){return i.target}function wl(i){var u=B_,h=Fy,f=U_,g=ab,v=null;function E(){var I,S=Ly.call(arguments),k=u.apply(this,S),O=h.apply(this,S);if(v||(v=I=Za()),i(v,+f.apply(this,(S[0]=k,S)),+g.apply(this,S),+f.apply(this,(S[0]=O,S)),+g.apply(this,S)),I)return v=null,I+""||null}return E.source=function(I){return arguments.length?(u=I,E):u},E.target=function(I){return arguments.length?(h=I,E):h},E.x=function(I){return arguments.length?(f="function"==typeof I?I:Yn(+I),E):f},E.y=function(I){return arguments.length?(g="function"==typeof I?I:Yn(+I),E):g},E.context=function(I){return arguments.length?(v=null==I?null:I,E):v},E}function Hu(i,u,h,f,g){i.moveTo(u,h),i.bezierCurveTo(u=(u+f)/2,h,u,g,f,g)}function v1(i,u,h,f,g){i.moveTo(u,h),i.bezierCurveTo(u,h=(h+g)/2,f,h,f,g)}function Uy(i,u,h,f,g){var v=dd(u,h),E=dd(u,h=(h+g)/2),I=dd(f,h),S=dd(f,g);i.moveTo(v[0],v[1]),i.bezierCurveTo(E[0],E[1],I[0],I[1],S[0],S[1])}var Vy={draw:function(i,u){var h=Math.sqrt(u/Xl);i.moveTo(h,0),i.arc(0,0,h,0,ud)}},j_={draw:function(i,u){var h=Math.sqrt(u/5)/2;i.moveTo(-3*h,-h),i.lineTo(-h,-h),i.lineTo(-h,-3*h),i.lineTo(h,-3*h),i.lineTo(h,-h),i.lineTo(3*h,-h),i.lineTo(3*h,h),i.lineTo(h,h),i.lineTo(h,3*h),i.lineTo(-h,3*h),i.lineTo(-h,h),i.lineTo(-3*h,h),i.closePath()}},cb=Math.sqrt(1/3),lb=2*cb,hb={draw:function(i,u){var h=Math.sqrt(u/lb),f=h*cb;i.moveTo(0,-h),i.lineTo(f,0),i.lineTo(0,h),i.lineTo(-f,0),i.closePath()}},Fg=Math.sin(Xl/10)/Math.sin(7*Xl/10),jI=Math.sin(ud/10)*Fg,w1=-Math.cos(ud/10)*Fg,fb={draw:function(i,u){var h=Math.sqrt(.8908130915292852*u),f=jI*h,g=w1*h;i.moveTo(0,-h),i.lineTo(f,g);for(var v=1;v<5;++v){var E=ud*v/5,I=Math.cos(E),S=Math.sin(E);i.lineTo(S*h,-I*h),i.lineTo(I*f-S*g,S*f+I*g)}i.closePath()}},zi={draw:function(i,u){var h=Math.sqrt(u),f=-h/2;i.rect(f,f,h,h)}},Da=Math.sqrt(3),pb={draw:function(i,u){var h=-Math.sqrt(u/(3*Da));i.moveTo(0,2*h),i.lineTo(-Da*h,-h),i.lineTo(Da*h,-h),i.closePath()}},Xs=-.5,zu=Math.sqrt(3)/2,Gu=1/Math.sqrt(12),b1=3*(Gu/2+1),jy={draw:function(i,u){var h=Math.sqrt(u/b1),f=h/2,g=h*Gu,v=f,E=h*Gu+h,I=-v,S=E;i.moveTo(f,g),i.lineTo(v,E),i.lineTo(I,S),i.lineTo(Xs*f-zu*g,zu*f+Xs*g),i.lineTo(Xs*v-zu*E,zu*v+Xs*E),i.lineTo(Xs*I-zu*S,zu*I+Xs*S),i.lineTo(Xs*f+zu*g,Xs*g-zu*f),i.lineTo(Xs*v+zu*E,Xs*E-zu*v),i.lineTo(Xs*I+zu*S,Xs*S-zu*I),i.closePath()}},$y=[Vy,j_,hb,zi,fb,pb,jy],fd=function(){};function Kr(i,u,h){i._context.bezierCurveTo((2*i._x0+i._x1)/3,(2*i._y0+i._y1)/3,(i._x0+2*i._x1)/3,(i._y0+2*i._y1)/3,(i._x0+4*i._x1+u)/6,(i._y0+4*i._y1+h)/6)}function Jl(i){this._context=i}Jl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Kr(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,u){switch(i=+i,u=+u,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,u):this._context.moveTo(i,u);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Kr(this,i,u)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=u}};function $_(i){this._context=i}$_.prototype={areaStart:fd,areaEnd:fd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(i,u){switch(i=+i,u=+u,this._point){case 0:this._point=1,this._x2=i,this._y2=u;break;case 1:this._point=2,this._x3=i,this._y3=u;break;case 2:this._point=3,this._x4=i,this._y4=u,this._context.moveTo((this._x0+4*this._x1+i)/6,(this._y0+4*this._y1+u)/6);break;default:Kr(this,i,u)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=u}};function pd(i){this._context=i}pd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,u){switch(i=+i,u=+u,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var h=(this._x0+4*this._x1+i)/6,f=(this._y0+4*this._y1+u)/6;this._line?this._context.lineTo(h,f):this._context.moveTo(h,f);break;case 3:this._point=4;default:Kr(this,i,u)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=u}};function z_(i,u){this._basis=new Jl(i),this._beta=u}z_.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var i=this._x,u=this._y,h=i.length-1;if(h>0)for(var S,f=i[0],g=u[0],v=i[h]-f,E=u[h]-g,I=-1;++I<=h;)this._basis.point(this._beta*i[I]+(1-this._beta)*(f+(S=I/h)*v),this._beta*u[I]+(1-this._beta)*(g+S*E));this._x=this._y=null,this._basis.lineEnd()},point:function(i,u){this._x.push(+i),this._y.push(+u)}};var Ug=function i(u){function h(f){return 1===u?new Jl(f):new z_(f,u)}return h.beta=function(f){return i(+f)},h}(.85);function iu(i,u,h){i._context.bezierCurveTo(i._x1+i._k*(i._x2-i._x0),i._y1+i._k*(i._y2-i._y0),i._x2+i._k*(i._x1-u),i._y2+i._k*(i._y1-h),i._x2,i._y2)}function Uf(i,u){this._context=i,this._k=(1-u)/6}Uf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:iu(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,u){switch(i=+i,u=+u,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,u):this._context.moveTo(i,u);break;case 1:this._point=2,this._x1=i,this._y1=u;break;case 2:this._point=3;default:iu(this,i,u)}this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=u}};var gb=function i(u){function h(f){return new Uf(f,u)}return h.tension=function(f){return i(+f)},h}(0);function G_(i,u){this._context=i,this._k=(1-u)/6}G_.prototype={areaStart:fd,areaEnd:fd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(i,u){switch(i=+i,u=+u,this._point){case 0:this._point=1,this._x3=i,this._y3=u;break;case 1:this._point=2,this._context.moveTo(this._x4=i,this._y4=u);break;case 2:this._point=3,this._x5=i,this._y5=u;break;default:iu(this,i,u)}this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=u}};var gd=function i(u){function h(f){return new G_(f,u)}return h.tension=function(f){return i(+f)},h}(0);function Bf(i,u){this._context=i,this._k=(1-u)/6}Bf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,u){switch(i=+i,u=+u,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:iu(this,i,u)}this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=u}};var EC=function i(u){function h(f){return new Bf(f,u)}return h.tension=function(f){return i(+f)},h}(0);function Ni(i,u,h){var f=i._x1,g=i._y1,v=i._x2,E=i._y2;if(i._l01_a>dr){var I=2*i._l01_2a+3*i._l01_a*i._l12_a+i._l12_2a,S=3*i._l01_a*(i._l01_a+i._l12_a);f=(f*I-i._x0*i._l12_2a+i._x2*i._l01_2a)/S,g=(g*I-i._y0*i._l12_2a+i._y2*i._l01_2a)/S}if(i._l23_a>dr){var k=2*i._l23_2a+3*i._l23_a*i._l12_a+i._l12_2a,O=3*i._l23_a*(i._l23_a+i._l12_a);v=(v*k+i._x1*i._l23_2a-u*i._l12_2a)/O,E=(E*k+i._y1*i._l23_2a-h*i._l12_2a)/O}i._context.bezierCurveTo(f,g,v,E,i._x2,i._y2)}function sr(i,u){this._context=i,this._alpha=u}sr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,u){if(i=+i,u=+u,this._point){var h=this._x2-i,f=this._y2-u;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(h*h+f*f,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(i,u):this._context.moveTo(i,u);break;case 1:this._point=2;break;case 2:this._point=3;default:Ni(this,i,u)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=u}};var mb=function i(u){function h(f){return u?new sr(f,u):new Uf(f,0)}return h.alpha=function(f){return i(+f)},h}(.5);function q_(i,u){this._context=i,this._alpha=u}q_.prototype={areaStart:fd,areaEnd:fd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(i,u){if(i=+i,u=+u,this._point){var h=this._x2-i,f=this._y2-u;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(h*h+f*f,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=i,this._y3=u;break;case 1:this._point=2,this._context.moveTo(this._x4=i,this._y4=u);break;case 2:this._point=3,this._x5=i,this._y5=u;break;default:Ni(this,i,u)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=u}};var md=function i(u){function h(f){return u?new q_(f,u):new G_(f,0)}return h.alpha=function(f){return i(+f)},h}(.5);function yb(i,u){this._context=i,this._alpha=u}yb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,u){if(i=+i,u=+u,this._point){var h=this._x2-i,f=this._y2-u;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(h*h+f*f,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ni(this,i,u)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=u}};var na=function i(u){function h(f){return u?new yb(f,u):new Bf(f,0)}return h.alpha=function(f){return i(+f)},h}(.5);function vb(i){this._context=i}vb.prototype={areaStart:fd,areaEnd:fd,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(i,u){i=+i,u=+u,this._point?this._context.lineTo(i,u):(this._point=1,this._context.moveTo(i,u))}};function W_(i){return i<0?-1:1}function vc(i,u,h){var f=i._x1-i._x0,g=u-i._x1,v=(i._y1-i._y0)/(f||g<0&&-0),E=(h-i._y1)/(g||f<0&&-0),I=(v*g+E*f)/(f+g);return(W_(v)+W_(E))*Math.min(Math.abs(v),Math.abs(E),.5*Math.abs(I))||0}function K_(i,u){var h=i._x1-i._x0;return h?(3*(i._y1-i._y0)/h-u)/2:u}function yd(i,u,h){var f=i._x0,v=i._x1,E=i._y1,I=(v-f)/3;i._context.bezierCurveTo(f+I,i._y0+I*u,v-I,E-I*h,v,E)}function Gy(i){this._context=i}function _b(i){this._context=new Gn(i)}function Gn(i){this._context=i}function Vf(i){this._context=i}function qy(i){var u,f,h=i.length-1,g=new Array(h),v=new Array(h),E=new Array(h);for(g[0]=0,v[0]=2,E[0]=i[0]+2*i[1],u=1;u<h-1;++u)g[u]=1,v[u]=4,E[u]=4*i[u]+2*i[u+1];for(g[h-1]=2,v[h-1]=7,E[h-1]=8*i[h-1]+i[h],u=1;u<h;++u)v[u]-=f=g[u]/v[u-1],E[u]-=f*E[u-1];for(g[h-1]=E[h-1]/v[h-1],u=h-2;u>=0;--u)g[u]=(E[u]-g[u+1])/v[u];for(v[h-1]=(i[h]+g[h-1])/2,u=0;u<h-1;++u)v[u]=2*i[u+1]-g[u+1];return[g,v]}Gy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yd(this,this._t0,K_(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,u){var h=NaN;if(u=+u,(i=+i)!==this._x1||u!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(i,u):this._context.moveTo(i,u);break;case 1:this._point=2;break;case 2:this._point=3,yd(this,K_(this,h=vc(this,i,u)),h);break;default:yd(this,this._t0,h=vc(this,i,u))}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=u,this._t0=h}}},(_b.prototype=Object.create(Gy.prototype)).point=function(i,u){Gy.prototype.point.call(this,u,i)},Gn.prototype={moveTo:function(i,u){this._context.moveTo(u,i)},closePath:function(){this._context.closePath()},lineTo:function(i,u){this._context.lineTo(u,i)},bezierCurveTo:function(i,u,h,f,g,v){this._context.bezierCurveTo(u,i,f,h,v,g)}},Vf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var i=this._x,u=this._y,h=i.length;if(h)if(this._line?this._context.lineTo(i[0],u[0]):this._context.moveTo(i[0],u[0]),2===h)this._context.lineTo(i[1],u[1]);else for(var f=qy(i),g=qy(u),v=0,E=1;E<h;++v,++E)this._context.bezierCurveTo(f[0][v],g[0][v],f[1][v],g[1][v],i[E],u[E]);(this._line||0!==this._line&&1===h)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(i,u){this._x.push(+i),this._y.push(+u)}};function Z_(i,u){this._context=i,this._t=u}Z_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(i,u){switch(i=+i,u=+u,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,u):this._context.moveTo(i,u);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,u),this._context.lineTo(i,u);else{var h=this._x*(1-this._t)+i*this._t;this._context.lineTo(h,this._y),this._context.lineTo(h,u)}}this._x=i,this._y=u}};var Bg=function(i,u){if((E=i.length)>1)for(var f,g,E,h=1,v=i[u[0]],I=v.length;h<E;++h)for(g=v,v=i[u[h]],f=0;f<I;++f)v[f][1]+=v[f][0]=isNaN(g[f][1])?g[f][0]:g[f][1]},Vg=function(i){for(var u=i.length,h=new Array(u);--u>=0;)h[u]=u;return h};function Y_(i,u){return i[u]}var Js=function(i){var u=i.map(jg);return Vg(i).sort(function(h,f){return u[h]-u[f]})};function jg(i){for(var g,u=0,h=-1,f=i.length;++h<f;)(g=+i[h][1])&&(u+=g);return u}var Cb=function(i){return function(){return i}};function T1(i){return i[0]}function Ky(i){return i[1]}function $f(){this._=null}function Zy(i){i.U=i.C=i.L=i.R=i.P=i.N=null}function Yy(i,u){var h=u,f=u.R,g=h.U;g?g.L===h?g.L=f:g.R=f:i._=f,f.U=g,h.U=f,h.R=f.L,h.R&&(h.R.U=h),f.L=h}function Q_(i,u){var h=u,f=u.L,g=h.U;g?g.L===h?g.L=f:g.R=f:i._=f,f.U=g,h.U=f,h.L=f.R,h.L&&(h.L.U=h),f.R=h}function GI(i){for(;i.L;)i=i.L;return i}function eh(i,u,h,f){var g=[null,null],v=Uo.push(g)-1;return g.left=i,g.right=u,h&&X_(g,i,u,h),f&&X_(g,u,i,f),su[i.index].halfedges.push(v),su[u.index].halfedges.push(v),g}function Hf(i,u,h){var f=[u,h];return f.left=i,f}function X_(i,u,h,f){i[0]||i[1]?i.left===h?i[1]=f:i[0]=f:(i[0]=f,i.left=u,i.right=h)}function qI(i,u,h,f,g){var G,v=i[0],E=i[1],I=v[0],S=v[1],U=0,N=1,V=E[0]-I,H=E[1]-S;if(G=u-I,V||!(G>0)){if(G/=V,V<0){if(G<U)return;G<N&&(N=G)}else if(V>0){if(G>N)return;G>U&&(U=G)}if(G=f-I,V||!(G<0)){if(G/=V,V<0){if(G>N)return;G>U&&(U=G)}else if(V>0){if(G<U)return;G<N&&(N=G)}if(G=h-S,H||!(G>0)){if(G/=H,H<0){if(G<U)return;G<N&&(N=G)}else if(H>0){if(G>N)return;G>U&&(U=G)}if(G=g-S,H||!(G<0)){if(G/=H,H<0){if(G>N)return;G>U&&(U=G)}else if(H>0){if(G<U)return;G<N&&(N=G)}return!(U>0)&&!(N<1)||(U>0&&(i[0]=[I+U*V,S+U*H]),N<1&&(i[1]=[I+N*V,S+N*H])),!0}}}}}function D1(i,u,h,f,g){var v=i[1];if(v)return!0;var G,Y,E=i[0],I=i.left,S=i.right,k=I[0],O=I[1],U=S[0],N=S[1],V=(k+U)/2;if(N===O){if(V<u||V>=f)return;if(k>U){if(E){if(E[1]>=g)return}else E=[V,h];v=[V,g]}else{if(E){if(E[1]<h)return}else E=[V,g];v=[V,h]}}else if(Y=(O+N)/2-(G=(k-U)/(N-O))*V,G<-1||G>1)if(k>U){if(E){if(E[1]>=g)return}else E=[(h-Y)/G,h];v=[(g-Y)/G,g]}else{if(E){if(E[1]<h)return}else E=[(g-Y)/G,g];v=[(h-Y)/G,h]}else if(O<N){if(E){if(E[0]>=f)return}else E=[u,G*u+Y];v=[f,G*f+Y]}else{if(E){if(E[0]<u)return}else E=[f,G*f+Y];v=[u,G*u+Y]}return i[0]=E,i[1]=v,!0}function qu(i,u){var h=i.site,f=u.left,g=u.right;return h===g&&(g=f,f=h),g?Math.atan2(g[1]-f[1],g[0]-f[0]):(h===f?(f=u[1],g=u[0]):(f=u[0],g=u[1]),Math.atan2(f[0]-g[0],g[1]-f[1]))}function S1(i,u){return u[+(u.left!==i.site)]}function Tb(i,u){return u[+(u.left===i.site)]}$f.prototype={constructor:$f,insert:function(i,u){var h,f,g;if(i){if(u.P=i,u.N=i.N,i.N&&(i.N.P=u),i.N=u,i.R){for(i=i.R;i.L;)i=i.L;i.L=u}else i.R=u;h=i}else this._?(i=GI(this._),u.P=null,u.N=i,i.P=i.L=u,h=i):(u.P=u.N=null,this._=u,h=null);for(u.L=u.R=null,u.U=h,u.C=!0,i=u;h&&h.C;)h===(f=h.U).L?(g=f.R)&&g.C?(h.C=g.C=!1,f.C=!0,i=f):(i===h.R&&(Yy(this,h),h=(i=h).U),h.C=!1,f.C=!0,Q_(this,f)):(g=f.L)&&g.C?(h.C=g.C=!1,f.C=!0,i=f):(i===h.L&&(Q_(this,h),h=(i=h).U),h.C=!1,f.C=!0,Yy(this,f)),h=i.U;this._.C=!1},remove:function(i){i.N&&(i.N.P=i.P),i.P&&(i.P.N=i.N),i.N=i.P=null;var h,v,E,u=i.U,f=i.L,g=i.R;if(v=f?g?GI(g):f:g,u?u.L===i?u.L=v:u.R=v:this._=v,f&&g?(E=v.C,v.C=i.C,v.L=f,f.U=v,v!==g?(u=v.U,v.U=i.U,u.L=i=v.R,v.R=g,g.U=v):(v.U=u,u=v,i=v.R)):(E=i.C,i=v),i&&(i.U=u),!E){if(i&&i.C)return void(i.C=!1);do{if(i===this._)break;if(i===u.L){if((h=u.R).C&&(h.C=!1,u.C=!0,Yy(this,u),h=u.R),h.L&&h.L.C||h.R&&h.R.C){(!h.R||!h.R.C)&&(h.L.C=!1,h.C=!0,Q_(this,h),h=u.R),h.C=u.C,u.C=h.R.C=!1,Yy(this,u),i=this._;break}}else if((h=u.L).C&&(h.C=!1,u.C=!0,Q_(this,u),h=u.L),h.L&&h.L.C||h.R&&h.R.C){(!h.L||!h.L.C)&&(h.R.C=!1,h.C=!0,Yy(this,h),h=u.L),h.C=u.C,u.C=h.L.C=!1,Q_(this,u),i=this._;break}h.C=!0,i=u,u=u.U}while(!i.C);i&&(i.C=!1)}}};var t0,e0=[];function A1(){Zy(this),this.x=this.y=this.arc=this.site=this.cy=null}function zf(i){var u=i.P,h=i.N;if(u&&h){var f=u.site,g=i.site,v=h.site;if(f!==v){var E=g[0],I=g[1],S=f[0]-E,k=f[1]-I,O=v[0]-E,U=v[1]-I,N=2*(S*U-k*O);if(!(N>=-ZI)){var V=S*S+k*k,H=O*O+U*U,G=(U*V-k*H)/N,Y=(S*H-O*V)/N,J=e0.pop()||new A1;J.arc=i,J.site=g,J.x=G+E,J.y=(J.cy=Y+I)+Math.sqrt(G*G+Y*Y),i.circle=J;for(var he=null,ee=qg._;ee;)if(J.y<ee.y||J.y===ee.y&&J.x<=ee.x){if(!ee.L){he=ee.P;break}ee=ee.L}else{if(!ee.R){he=ee;break}ee=ee.R}qg.insert(he,J),he||(t0=J)}}}}function Gi(i){var u=i.circle;u&&(u.P||(t0=u.N),qg.remove(u),e0.push(u),Zy(u),i.circle=null)}var x1=[];function M1(){Zy(this),this.edge=this.site=this.circle=null}function wc(i){var u=x1.pop()||new M1;return u.site=i,u}function zg(i){Gi(i),Gg.remove(i),x1.push(i),Zy(i)}function bl(i){var u=i.circle,h=u.x,f=u.cy,g=[h,f],v=i.P,E=i.N,I=[i];zg(i);for(var S=v;S.circle&&Math.abs(h-S.circle.x)<Vr&&Math.abs(f-S.circle.cy)<Vr;)v=S.P,I.unshift(S),zg(S),S=v;I.unshift(S),Gi(S);for(var k=E;k.circle&&Math.abs(h-k.circle.x)<Vr&&Math.abs(f-k.circle.cy)<Vr;)E=k.N,I.push(k),zg(k),k=E;I.push(k),Gi(k);var U,O=I.length;for(U=1;U<O;++U)X_((k=I[U]).edge,(S=I[U-1]).site,k.site,g);(k=I[O-1]).edge=eh((S=I[0]).site,k.site,null,g),zf(S),zf(k)}function Db(i){for(var f,g,v,E,u=i[0],h=i[1],I=Gg._;I;)if((v=Sb(I,h)-u)>Vr)I=I.L;else{if(!((E=u-KI(I,h))>Vr)){v>-Vr?(f=I.P,g=I):E>-Vr?(f=I,g=I.N):f=g=I;break}if(!I.R){f=I;break}I=I.R}!function WI(i){return su[i.index]={site:i,halfedges:[]}}(i);var S=wc(i);if(Gg.insert(f,S),f||g){if(f===g)return Gi(f),g=wc(f.site),Gg.insert(S,g),S.edge=g.edge=eh(f.site,S.site),zf(f),void zf(g);if(!g)return void(S.edge=eh(f.site,S.site));Gi(f),Gi(g);var k=f.site,O=k[0],U=k[1],N=i[0]-O,V=i[1]-U,H=g.site,G=H[0]-O,Y=H[1]-U,J=2*(N*Y-V*G),he=N*N+V*V,ee=G*G+Y*Y,Ce=[(Y*he-V*ee)/J+O,(N*ee-G*he)/J+U];X_(g.edge,k,H,Ce),S.edge=eh(k,i,null,Ce),g.edge=eh(i,H,null,Ce),zf(f),zf(g)}}function Sb(i,u){var h=i.site,f=h[0],g=h[1],v=g-u;if(!v)return f;var E=i.P;if(!E)return-1/0;var I=(h=E.site)[0],S=h[1],k=S-u;if(!k)return I;var O=I-f,U=1/v-1/k,N=O/k;return U?(-N+Math.sqrt(N*N-2*U*(O*O/(-2*k)-S+k/2+g-v/2)))/U+f:(f+I)/2}function KI(i,u){var h=i.N;if(h)return Sb(h,u);var f=i.site;return f[1]===u?f[0]:1/0}var Gg,su,qg,Uo,Vr=1e-6,ZI=1e-12;function YI(i,u,h){return(i[0]-h[0])*(u[1]-i[1])-(i[0]-u[0])*(h[1]-i[1])}function TC(i,u){return u[1]-i[1]||u[0]-i[0]}function Qy(i,u){var f,g,v,h=i.sort(TC).pop();for(Uo=[],su=new Array(i.length),Gg=new $f,qg=new $f;;)if(v=t0,h&&(!v||h[1]<v.y||h[1]===v.y&&h[0]<v.x))(h[0]!==f||h[1]!==g)&&(Db(h),f=h[0],g=h[1]),h=i.pop();else{if(!v)break;bl(v.arc)}if(function $g(){for(var h,f,g,v,i=0,u=su.length;i<u;++i)if((h=su[i])&&(v=(f=h.halfedges).length)){var E=new Array(v),I=new Array(v);for(g=0;g<v;++g)E[g]=g,I[g]=qu(h,Uo[f[g]]);for(E.sort(function(S,k){return I[k]-I[S]}),g=0;g<v;++g)I[g]=f[E[g]];for(g=0;g<v;++g)f[g]=I[g]}}(),u){var E=+u[0][0],I=+u[0][1],S=+u[1][0],k=+u[1][1];(function J_(i,u,h,f){for(var v,g=Uo.length;g--;)D1(v=Uo[g],i,u,h,f)&&qI(v,i,u,h,f)&&(Math.abs(v[0][0]-v[1][0])>Vr||Math.abs(v[0][1]-v[1][1])>Vr)||delete Uo[g]})(E,I,S,k),function Hg(i,u,h,f){var v,E,I,S,k,O,U,N,V,H,G,Y,g=su.length,J=!0;for(v=0;v<g;++v)if(E=su[v]){for(I=E.site,S=(k=E.halfedges).length;S--;)Uo[k[S]]||k.splice(S,1);for(S=0,O=k.length;S<O;)G=(H=Tb(E,Uo[k[S]]))[0],Y=H[1],N=(U=S1(E,Uo[k[++S%O]]))[0],V=U[1],(Math.abs(G-N)>Vr||Math.abs(Y-V)>Vr)&&(k.splice(S,0,Uo.push(Hf(I,H,Math.abs(G-i)<Vr&&f-Y>Vr?[i,Math.abs(N-i)<Vr?V:f]:Math.abs(Y-f)<Vr&&h-G>Vr?[Math.abs(V-f)<Vr?N:h,f]:Math.abs(G-h)<Vr&&Y-u>Vr?[h,Math.abs(N-h)<Vr?V:u]:Math.abs(Y-u)<Vr&&G-i>Vr?[Math.abs(V-u)<Vr?N:i,u]:null))-1),++O);O&&(J=!1)}if(J){var he,ee,Ce,ke=1/0;for(v=0,J=null;v<g;++v)(E=su[v])&&(Ce=(he=(I=E.site)[0]-i)*he+(ee=I[1]-u)*ee)<ke&&(ke=Ce,J=E);if(J){var Se=[i,u],_e=[i,f],ze=[h,f],je=[h,u];J.halfedges.push(Uo.push(Hf(I=J.site,Se,_e))-1,Uo.push(Hf(I,_e,ze))-1,Uo.push(Hf(I,ze,je))-1,Uo.push(Hf(I,je,Se))-1)}}for(v=0;v<g;++v)(E=su[v])&&(E.halfedges.length||delete su[v])}(E,I,S,k)}this.edges=Uo,this.cells=su,Gg=qg=Uo=su=null}Qy.prototype={constructor:Qy,polygons:function(){var i=this.edges;return this.cells.map(function(u){var h=u.halfedges.map(function(f){return S1(u,i[f])});return h.data=u.site.data,h})},triangles:function(){var i=[],u=this.edges;return this.cells.forEach(function(h,f){if(I=(v=h.halfedges).length)for(var v,I,S,g=h.site,E=-1,k=u[v[I-1]],O=k.left===g?k.right:k.left;++E<I;)S=O,O=(k=u[v[E]]).left===g?k.right:k.left,S&&O&&f<S.index&&f<O.index&&YI(g,S,O)<0&&i.push([g.data,S.data,O.data])}),i},links:function(){return this.edges.filter(function(i){return i.right}).map(function(i){return{source:i.left.data,target:i.right.data}})},find:function(i,u,h){for(var g,I,f=this,v=f._found||0,E=f.cells.length;!(I=f.cells[v]);)if(++v>=E)return null;var S=i-I.site[0],k=u-I.site[1],O=S*S+k*k;do{I=f.cells[g=v],v=null,I.halfedges.forEach(function(U){var N=f.edges[U],V=N.left;if(V!==I.site&&V||(V=N.right)){var H=i-V[0],G=u-V[1],Y=H*H+G*G;Y<O&&(O=Y,v=V.index)}})}while(null!==v);return f._found=g,null==h||O<=h*h?I.site:null}};var k1=function(i){return function(){return i}};function QI(i,u,h){this.target=i,this.type=u,this.transform=h}function El(i,u,h){this.k=i,this.x=u,this.y=h}El.prototype={constructor:El,scale:function(i){return 1===i?this:new El(this.k*i,this.x,this.y)},translate:function(i,u){return 0===i&0===u?this:new El(this.k,this.x+this.k*i,this.y+this.k*u)},apply:function(i){return[i[0]*this.k+this.x,i[1]*this.k+this.y]},applyX:function(i){return i*this.k+this.x},applyY:function(i){return i*this.k+this.y},invert:function(i){return[(i[0]-this.x)/this.k,(i[1]-this.y)/this.k]},invertX:function(i){return(i-this.x)/this.k},invertY:function(i){return(i-this.y)/this.k},rescaleX:function(i){return i.copy().domain(i.range().map(this.invertX,this).map(i.invert,i))},rescaleY:function(i){return i.copy().domain(i.range().map(this.invertY,this).map(i.invert,i))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Wg=new El(1,0,0);function n0(i){return i.__zoom||Wg}function Xy(){M.event.stopImmediatePropagation()}n0.prototype=El.prototype;var Kg=function(){M.event.preventDefault(),M.event.stopImmediatePropagation()};function N1(){return!M.event.button}function r0(){var u,h,i=this;return i instanceof SVGElement?(u=(i=i.ownerSVGElement||i).width.baseVal.value,h=i.height.baseVal.value):(u=i.clientWidth,h=i.clientHeight),[[0,0],[u,h]]}function Ps(){return this.__zoom||Wg}M.version="4.9.1",M.bisect=Ue,M.bisectRight=Ue,M.bisectLeft=Be,M.ascending=be,M.bisector=Q,M.cross=function(i,u,h){var E,I,S,k,f=i.length,g=u.length,v=new Array(f*g);for(null==h&&(h=Le),E=S=0;E<f;++E)for(k=i[E],I=0;I<g;++I,++S)v[S]=h(k,u[I]);return v},M.descending=function(i,u){return u<i?-1:u>i?1:u>=i?0:NaN},M.deviation=ot,M.extent=Ye,M.histogram=function(){var i=bt,u=Ye,h=fe;function f(g){var v,I,E=g.length,S=new Array(E);for(v=0;v<E;++v)S[v]=i(g[v],v,g);var k=u(S),O=k[0],U=k[1],N=h(S,O,U);Array.isArray(N)||(N=Ke(O,U,N),N=qe(Math.ceil(O/N)*N,Math.floor(U/N)*N,N));for(var V=N.length;N[0]<=O;)N.shift(),--V;for(;N[V-1]>U;)N.pop(),--V;var G,H=new Array(V+1);for(v=0;v<=V;++v)(G=H[v]=[]).x0=v>0?N[v-1]:O,G.x1=v<V?N[v]:U;for(v=0;v<E;++v)O<=(I=S[v])&&I<=U&&H[Ue(N,I,0,V)].push(g[v]);return H}return f.value=function(g){return arguments.length?(i="function"==typeof g?g:lt(g),f):i},f.domain=function(g){return arguments.length?(u="function"==typeof g?g:lt([g[0],g[1]]),f):u},f.thresholds=function(g){return arguments.length?(h="function"==typeof g?g:Array.isArray(g)?lt(ge.call(g)):lt(g),f):h},f},M.thresholdFreedmanDiaconis=function(i,u,h){return i=Me.call(i,ye).sort(be),Math.ceil((h-u)/(2*(De(i,.75)-De(i,.25))*Math.pow(i.length,-1/3)))},M.thresholdScott=function(i,u,h){return Math.ceil((h-u)/(3.5*ot(i)*Math.pow(i.length,-1/3)))},M.thresholdSturges=fe,M.max=function(i,u){var g,v,h=i.length,f=-1;if(null==u){for(;++f<h;)if(null!=(g=i[f])&&g>=g)for(v=g;++f<h;)null!=(g=i[f])&&g>v&&(v=g)}else for(;++f<h;)if(null!=(g=u(i[f],f,i))&&g>=g)for(v=g;++f<h;)null!=(g=u(i[f],f,i))&&g>v&&(v=g);return v},M.mean=function(i,u){var v,h=i.length,f=h,g=-1,E=0;if(null==u)for(;++g<h;)isNaN(v=ye(i[g]))?--f:E+=v;else for(;++g<h;)isNaN(v=ye(u(i[g],g,i)))?--f:E+=v;if(f)return E/f},M.median=function(i,u){var g,h=i.length,f=-1,v=[];if(null==u)for(;++f<h;)isNaN(g=ye(i[f]))||v.push(g);else for(;++f<h;)isNaN(g=ye(u(i[f],f,i)))||v.push(g);return De(v.sort(be),.5)},M.merge=Xt,M.min=_t,M.pairs=function(i,u){null==u&&(u=Le);for(var h=0,f=i.length-1,g=i[0],v=new Array(f<0?0:f);h<f;)v[h]=u(g,g=i[++h]);return v},M.permute=function(i,u){for(var h=u.length,f=new Array(h);h--;)f[h]=i[u[h]];return f},M.quantile=De,M.range=qe,M.scan=function(i,u){if(h=i.length){var h,v,f=0,g=0,E=i[g];for(null==u&&(u=be);++f<h;)(u(v=i[f],E)<0||0!==u(E,E))&&(E=v,g=f);if(0===u(E,E))return g}},M.shuffle=function(i,u,h){for(var g,v,f=(null==h?i.length:h)-(u=null==u?0:+u);f;)v=Math.random()*f--|0,g=i[f+u],i[f+u]=i[v+u],i[v+u]=g;return i},M.sum=function(i,u){var g,h=i.length,f=-1,v=0;if(null==u)for(;++f<h;)(g=+i[f])&&(v+=g);else for(;++f<h;)(g=+u(i[f],f,i))&&(v+=g);return v},M.ticks=vt,M.tickIncrement=ce,M.tickStep=Ke,M.transpose=Ar,M.variance=kt,M.zip=function(){return Ar(arguments)},M.axisTop=function Aa(i){return Er(1,i)},M.axisRight=function Bs(i){return Er(2,i)},M.axisBottom=function fi(i){return Er(3,i)},M.axisLeft=function Mr(i){return Er(4,i)},M.brush=function(){return Ah(gv)},M.brushX=function Bi(){return Ah(ss)},M.brushY=function Tp(){return Ah(Gr)},M.brushSelection=function Sh(i){var u=i.__brush;return u?u.dim.output(u.selection):null},M.chord=function(){var i=0,u=null,h=null,f=null;function g(v){var V,H,G,Y,J,he,E=v.length,I=[],S=qe(E),k=[],O=[],U=O.groups=new Array(E),N=new Array(E*E);for(V=0,J=-1;++J<E;){for(H=0,he=-1;++he<E;)H+=v[J][he];I.push(H),k.push(qe(E)),V+=H}for(u&&S.sort(function(xt,mt){return u(I[xt],I[mt])}),h&&k.forEach(function(xt,mt){xt.sort(function(Qe,Pt){return h(v[mt][Qe],v[mt][Pt])})}),Y=(V=qs(0,yv-i*E)/V)?i:yv/E,H=0,J=-1;++J<E;){for(G=H,he=-1;++he<E;){var ee=S[J],Ce=k[ee][he],ke=v[ee][Ce],Se=H,_e=H+=ke*V;N[Ce*E+ee]={index:ee,subindex:Ce,startAngle:Se,endAngle:_e,value:ke}}U[ee]={index:ee,startAngle:G,endAngle:H,value:I[ee]},H+=Y}for(J=-1;++J<E;)for(he=J-1;++he<E;){var ze=N[he*E+J],je=N[J*E+he];(ze.value||je.value)&&O.push(ze.value<je.value?{source:je,target:ze}:{source:ze,target:je})}return f?O.sort(f):O}return g.padAngle=function(v){return arguments.length?(i=qs(0,v),g):i},g.sortGroups=function(v){return arguments.length?(u=v,g):u},g.sortSubgroups=function(v){return arguments.length?(h=v,g):h},g.sortChords=function(v){return arguments.length?(null==v?f=null:(f=rl(v))._=v,g):f&&f._},g},M.ribbon=function(){var i=w0,u=b0,h=Sp,f=vv,g=ko,v=null;function E(){var I,S=v0.call(arguments),k=i.apply(this,S),O=u.apply(this,S),U=+h.apply(this,(S[0]=k,S)),N=f.apply(this,S)-nl,V=g.apply(this,S)-nl,H=U*Vi(N),G=U*Ol(N),Y=+h.apply(this,(S[0]=O,S)),J=f.apply(this,S)-nl,he=g.apply(this,S)-nl;if(v||(v=I=Za()),v.moveTo(H,G),v.arc(0,0,U,N,V),(N!==J||V!==he)&&(v.quadraticCurveTo(0,0,Y*Vi(J),Y*Ol(J)),v.arc(0,0,Y,J,he)),v.quadraticCurveTo(0,0,H,G),v.closePath(),I)return v=null,I+""||null}return E.radius=function(I){return arguments.length?(h="function"==typeof I?I:uc(+I),E):h},E.startAngle=function(I){return arguments.length?(f="function"==typeof I?I:uc(+I),E):f},E.endAngle=function(I){return arguments.length?(g="function"==typeof I?I:uc(+I),E):g},E.source=function(I){return arguments.length?(i=I,E):i},E.target=function(I){return arguments.length?(u=I,E):u},E.context=function(I){return arguments.length?(v=null==I?null:I,E):v},E},M.nest=function(){var h,f,g,i=[],u=[];function v(I,S,k,O){if(S>=i.length)return null!=f?f(I):null!=h?I.sort(h):I;for(var H,G,J,U=-1,N=I.length,V=i[S++],Y=Ai(),he=k();++U<N;)(J=Y.get(H=V(G=I[U])+""))?J.push(G):Y.set(H,[G]);return Y.each(function(ee,Ce){O(he,Ce,v(ee,S,k,O))}),he}function E(I,S){if(++S>i.length)return I;var k,O=u[S-1];return null!=f&&S>=i.length?k=I.entries():(k=[],I.each(function(U,N){k.push({key:N,values:E(U,S)})})),null!=O?k.sort(function(U,N){return O(U.key,N.key)}):k}return g={object:function(I){return v(I,0,_v,wv)},map:function(I){return v(I,0,bv,xp)},entries:function(I){return E(v(I,0,bv,xp),0)},key:function(I){return i.push(I),g},sortKeys:function(I){return u[i.length-1]=I,g},sortValues:function(I){return h=I,g},rollup:function(I){return f=I,g}}},M.set=wm,M.map=Ai,M.keys=function(i){var u=[];for(var h in i)u.push(h);return u},M.values=function(i){var u=[];for(var h in i)u.push(i[h]);return u},M.entries=function(i){var u=[];for(var h in i)u.push({key:h,value:i[h]});return u},M.color=so,M.rgb=mr,M.hsl=Nc,M.lab=Oc,M.hcl=da,M.cubehelix=To,M.dispatch=ys,M.drag=function(){var E,I,S,k,i=rh,u=fu,h=Yi,f={},g=ys("start","drag","end"),v=0,O=0;function U(ee){ee.on("mousedown.drag",N).on("touchstart.drag",G).on("touchmove.drag",Y).on("touchend.drag touchcancel.drag",J).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function N(){if(!k&&i.apply(this,arguments)){var ee=he("mouse",u.apply(this,arguments),Rr,this,arguments);!ee||(Ts(M.event.view).on("mousemove.drag",V,!0).on("mouseup.drag",H,!0),du(M.event.view),Id(),S=!1,E=M.event.clientX,I=M.event.clientY,ee("start"))}}function V(){if(Jn(),!S){var ee=M.event.clientX-E,Ce=M.event.clientY-I;S=ee*ee+Ce*Ce>O}f.mouse("drag")}function H(){Ts(M.event.view).on("mousemove.drag mouseup.drag",null),la(M.event.view,S),Jn(),f.mouse("end")}function G(){if(i.apply(this,arguments)){var Se,_e,ee=M.event.changedTouches,Ce=u.apply(this,arguments),ke=ee.length;for(Se=0;Se<ke;++Se)(_e=he(ee[Se].identifier,Ce,Rc,this,arguments))&&(Id(),_e("start"))}}function Y(){var ke,Se,ee=M.event.changedTouches,Ce=ee.length;for(ke=0;ke<Ce;++ke)(Se=f[ee[ke].identifier])&&(Jn(),Se("drag"))}function J(){var ke,Se,ee=M.event.changedTouches,Ce=ee.length;for(k&&clearTimeout(k),k=setTimeout(function(){k=null},500),ke=0;ke<Ce;++ke)(Se=f[ee[ke].identifier])&&(Id(),Se("end"))}function he(ee,Ce,ke,Se,_e){var je,xt,mt,ze=ke(Ce,ee),Qe=g.copy();if(ia(new Yu(U,"beforestart",je,ee,v,ze[0],ze[1],0,0,Qe),function(){return null!=(M.event.subject=je=h.apply(Se,_e))&&(xt=je.x-ze[0]||0,mt=je.y-ze[1]||0,!0)}))return function Pt(ft){var it,le=ze;switch(ft){case"start":f[ee]=Pt,it=v++;break;case"end":delete f[ee],--v;case"drag":ze=ke(Ce,ee),it=v}ia(new Yu(U,ft,je,ee,it,ze[0]+xt,ze[1]+mt,ze[0]-le[0],ze[1]-le[1],Qe),Qe.apply,Qe,[ft,Se,_e])}}return U.filter=function(ee){return arguments.length?(i="function"==typeof ee?ee:rr(!!ee),U):i},U.container=function(ee){return arguments.length?(u="function"==typeof ee?ee:rr(ee),U):u},U.subject=function(ee){return arguments.length?(h="function"==typeof ee?ee:rr(ee),U):h},U.on=function(){var ee=g.on.apply(g,arguments);return ee===g?U:ee},U.clickDistance=function(ee){return arguments.length?(O=(ee=+ee)*ee,U):Math.sqrt(O)},U},M.dragDisable=du,M.dragEnable=la,M.dsvFormat=Z,M.csvParse=He,M.csvParseRows=St,M.csvFormat=zt,M.csvFormatRows=fn,M.tsvParse=ei,M.tsvParseRows=Po,M.tsvFormat=Mh,M.tsvFormatRows=bm,M.easeLinear=function ic(i){return+i},M.easeQuad=Fd,M.easeQuadIn=function _h(i){return i*i},M.easeQuadOut=function Ld(i){return i*(2-i)},M.easeQuadInOut=Fd,M.easeCubic=pp,M.easeCubicIn=function wh(i){return i*i*i},M.easeCubicOut=function bh(i){return--i*i*i+1},M.easeCubicInOut=pp,M.easePoly=Ud,M.easePolyIn=sc,M.easePolyOut=gp,M.easePolyInOut=Ud,M.easeSin=Eh,M.easeSinIn=function yp(i){return 1-Math.cos(i*Bd)},M.easeSinOut=function uv(i){return Math.sin(i*Bd)},M.easeSinInOut=Eh,M.easeExp=cv,M.easeExpIn=function d0(i){return Math.pow(2,10*i-10)},M.easeExpOut=function f0(i){return 1-Math.pow(2,-10*i)},M.easeExpInOut=cv,M.easeCircle=Ih,M.easeCircleIn=function Qo(i){return 1-Math.sqrt(1-i*i)},M.easeCircleOut=function oc(i){return Math.sqrt(1- --i*i)},M.easeCircleInOut=Ih,M.easeBounce=Wa,M.easeBounceIn=function p0(i){return 1-Wa(1-i)},M.easeBounceOut=Wa,M.easeBounceInOut=function Vd(i){return((i*=2)<=1?1-Wa(1-i):Wa(i-1)+1)/2},M.easeBack=Hd,M.easeBackIn=va,M.easeBackOut=$d,M.easeBackInOut=Hd,M.easeElastic=g0,M.easeElasticIn=Ch,M.easeElasticOut=g0,M.easeElasticInOut=zd,M.forceCenter=function(i,u){var h;function f(){var g,E,v=h.length,I=0,S=0;for(g=0;g<v;++g)I+=(E=h[g]).x,S+=E.y;for(I=I/v-i,S=S/v-u,g=0;g<v;++g)(E=h[g]).x-=I,E.y-=S}return null==i&&(i=0),null==u&&(u=0),f.initialize=function(g){h=g},f.x=function(g){return arguments.length?(i=+g,f):i},f.y=function(g){return arguments.length?(u=+g,f):u},f},M.forceCollide=function(i){var u,h,f=1,g=1;function v(){for(var S,O,U,N,V,H,G,k=u.length,Y=0;Y<g;++Y)for(O=Dm(u,Q1,Wb).visitAfter(E),S=0;S<k;++S)G=(H=h[(U=u[S]).index])*H,N=U.x+U.vx,V=U.y+U.vy,O.visit(J);function J(he,ee,Ce,ke,Se){var _e=he.data,ze=he.r,je=H+ze;if(!_e)return ee>N+je||ke<N-je||Ce>V+je||Se<V-je;if(_e.index>U.index){var xt=N-_e.x-_e.vx,mt=V-_e.y-_e.vy,Qe=xt*xt+mt*mt;Qe<je*je&&(0===xt&&(Qe+=(xt=wa())*xt),0===mt&&(Qe+=(mt=wa())*mt),Qe=(je-(Qe=Math.sqrt(Qe)))/Qe*f,U.vx+=(xt*=Qe)*(je=(ze*=ze)/(G+ze)),U.vy+=(mt*=Qe)*je,_e.vx-=xt*(je=1-je),_e.vy-=mt*je)}}}function E(S){if(S.data)return S.r=h[S.data.index];for(var k=S.r=0;k<4;++k)S[k]&&S[k].r>S.r&&(S.r=S[k].r)}function I(){if(u){var S,O,k=u.length;for(h=new Array(k),S=0;S<k;++S)h[(O=u[S]).index]=+i(O,S,u)}}return"function"!=typeof i&&(i=_i(null==i?1:+i)),v.initialize=function(S){u=S,I()},v.iterations=function(S){return arguments.length?(g=+S,v):g},v.strength=function(S){return arguments.length?(f=+S,v):f},v.radius=function(S){return arguments.length?(i="function"==typeof S?S:_i(+S),I(),v):i},v},M.forceLink=function(i){var f,v,E,I,S,u=Kb,h=function O(G){return 1/Math.min(I[G.source.index],I[G.target.index])},g=_i(30),k=1;function U(G){for(var Y=0,J=i.length;Y<k;++Y)for(var ee,Ce,ke,Se,_e,ze,je,he=0;he<J;++he)Se=(ke=(ee=i[he]).target).x+ke.vx-(Ce=ee.source).x-Ce.vx||wa(),_e=ke.y+ke.vy-Ce.y-Ce.vy||wa(),_e*=ze=((ze=Math.sqrt(Se*Se+_e*_e))-v[he])/ze*G*f[he],ke.vx-=(Se*=ze)*(je=S[he]),ke.vy-=_e*je,Ce.vx+=Se*(je=1-je),Ce.vy+=_e*je}function N(){if(E){var G,ee,Y=E.length,J=i.length,he=Ai(E,u);for(G=0,I=new Array(Y);G<J;++G)(ee=i[G]).index=G,"object"!=typeof ee.source&&(ee.source=Dv(he,ee.source)),"object"!=typeof ee.target&&(ee.target=Dv(he,ee.target)),I[ee.source.index]=(I[ee.source.index]||0)+1,I[ee.target.index]=(I[ee.target.index]||0)+1;for(G=0,S=new Array(J);G<J;++G)S[G]=I[(ee=i[G]).source.index]/(I[ee.source.index]+I[ee.target.index]);f=new Array(J),V(),v=new Array(J),H()}}function V(){if(E)for(var G=0,Y=i.length;G<Y;++G)f[G]=+h(i[G],G,i)}function H(){if(E)for(var G=0,Y=i.length;G<Y;++G)v[G]=+g(i[G],G,i)}return null==i&&(i=[]),U.initialize=function(G){E=G,N()},U.links=function(G){return arguments.length?(i=G,N(),U):i},U.id=function(G){return arguments.length?(u=G,U):u},U.iterations=function(G){return arguments.length?(k=+G,U):k},U.strength=function(G){return arguments.length?(h="function"==typeof G?G:_i(+G),V(),U):h},U.distance=function(G){return arguments.length?(g="function"==typeof G?G:_i(+G),H(),U):g},U},M.forceManyBody=function(){var i,u,h,g,f=_i(-30),v=1,E=1/0,I=.81;function S(N){var V,H=i.length,G=Dm(i,Rp,Sv).visitAfter(O);for(h=N,V=0;V<H;++V)u=i[V],G.visit(U)}function k(){if(i){var N,H,V=i.length;for(g=new Array(V),N=0;N<V;++N)g[(H=i[N]).index]=+f(H,N,i)}}function O(N){var H,G,Y,J,he,V=0;if(N.length){for(Y=J=he=0;he<4;++he)(H=N[he])&&(G=H.value)&&(V+=G,Y+=G*H.x,J+=G*H.y);N.x=Y/V,N.y=J/V}else{(H=N).x=H.data.x,H.y=H.data.y;do{V+=g[H.data.index]}while(H=H.next)}N.value=V}function U(N,V,H,G){if(!N.value)return!0;var Y=N.x-u.x,J=N.y-u.y,he=G-V,ee=Y*Y+J*J;if(he*he/I<ee)return ee<E&&(0===Y&&(ee+=(Y=wa())*Y),0===J&&(ee+=(J=wa())*J),ee<v&&(ee=Math.sqrt(v*ee)),u.vx+=Y*N.value*h/ee,u.vy+=J*N.value*h/ee),!0;if(!(N.length||ee>=E)){(N.data!==u||N.next)&&(0===Y&&(ee+=(Y=wa())*Y),0===J&&(ee+=(J=wa())*J),ee<v&&(ee=Math.sqrt(v*ee)));do{N.data!==u&&(u.vx+=Y*(he=g[N.data.index]*h/ee),u.vy+=J*he)}while(N=N.next)}}return S.initialize=function(N){i=N,k()},S.strength=function(N){return arguments.length?(f="function"==typeof N?N:_i(+N),k(),S):f},S.distanceMin=function(N){return arguments.length?(v=N*N,S):Math.sqrt(v)},S.distanceMax=function(N){return arguments.length?(E=N*N,S):Math.sqrt(E)},S.theta=function(N){return arguments.length?(I=N*N,S):Math.sqrt(I)},S},M.forceSimulation=function(i){var u,h=1,f=.001,g=1-Math.pow(f,1/300),v=0,E=.6,I=Ai(),S=rs(O),k=ys("tick","end");function O(){U(),k.call("tick",u),h<f&&(S.stop(),k.call("end",u))}function U(){var H,Y,G=i.length;for(h+=(v-h)*g,I.each(function(J){J(h)}),H=0;H<G;++H)null==(Y=i[H]).fx?Y.x+=Y.vx*=E:(Y.x=Y.fx,Y.vx=0),null==Y.fy?Y.y+=Y.vy*=E:(Y.y=Y.fy,Y.vy=0)}function N(){for(var Y,H=0,G=i.length;H<G;++H){if((Y=i[H]).index=H,isNaN(Y.x)||isNaN(Y.y)){var J=10*Math.sqrt(H),he=H*Av;Y.x=J*Math.cos(he),Y.y=J*Math.sin(he)}(isNaN(Y.vx)||isNaN(Y.vy))&&(Y.vx=Y.vy=0)}}function V(H){return H.initialize&&H.initialize(i),H}return null==i&&(i=[]),N(),u={tick:U,restart:function(){return S.restart(O),u},stop:function(){return S.stop(),u},nodes:function(H){return arguments.length?(i=H,N(),I.each(V),u):i},alpha:function(H){return arguments.length?(h=+H,u):h},alphaMin:function(H){return arguments.length?(f=+H,u):f},alphaDecay:function(H){return arguments.length?(g=+H,u):+g},alphaTarget:function(H){return arguments.length?(v=+H,u):v},velocityDecay:function(H){return arguments.length?(E=1-H,u):1-E},force:function(H,G){return arguments.length>1?(null==G?I.remove(H):I.set(H,V(G)),u):I.get(H)},find:function(H,G,Y){var ee,Ce,ke,Se,_e,J=0,he=i.length;for(null==Y?Y=1/0:Y*=Y,J=0;J<he;++J)(ke=(ee=H-(Se=i[J]).x)*ee+(Ce=G-Se.y)*Ce)<Y&&(_e=Se,Y=ke);return _e},on:function(H,G){return arguments.length>1?(k.on(H,G),u):k.on(H)}}},M.forceX=function(i){var h,f,g,u=_i(.1);function v(I){for(var O,S=0,k=h.length;S<k;++S)(O=h[S]).vx+=(g[S]-O.x)*f[S]*I}function E(){if(h){var I,S=h.length;for(f=new Array(S),g=new Array(S),I=0;I<S;++I)f[I]=isNaN(g[I]=+i(h[I],I,h))?0:+u(h[I],I,h)}}return"function"!=typeof i&&(i=_i(null==i?0:+i)),v.initialize=function(I){h=I,E()},v.strength=function(I){return arguments.length?(u="function"==typeof I?I:_i(+I),E(),v):u},v.x=function(I){return arguments.length?(i="function"==typeof I?I:_i(+I),E(),v):i},v},M.forceY=function(i){var h,f,g,u=_i(.1);function v(I){for(var O,S=0,k=h.length;S<k;++S)(O=h[S]).vy+=(g[S]-O.y)*f[S]*I}function E(){if(h){var I,S=h.length;for(f=new Array(S),g=new Array(S),I=0;I<S;++I)f[I]=isNaN(g[I]=+i(h[I],I,h))?0:+u(h[I],I,h)}}return"function"!=typeof i&&(i=_i(null==i?0:+i)),v.initialize=function(I){h=I,E()},v.strength=function(I){return arguments.length?(u="function"==typeof I?I:_i(+I),E(),v):u},v.y=function(I){return arguments.length?(i="function"==typeof I?I:_i(+I),E(),v):i},v},M.formatDefaultLocale=Jb,M.formatLocale=xm,M.formatSpecifier=Op,M.precisionFixed=eE,M.precisionPrefix=tE,M.precisionRound=S0,M.geoArea=function(i){return Rv.reset(),Mu(i,sl),2*Rv},M.geoBounds=function(i){var u,h,f,g,v,E,I;if(Nu=ti=-(Mi=ur=1/0),Ea=[],Mu(i,Pu),h=Ea.length){for(Ea.sort(jp),u=1,v=[f=Ea[0]];u<h;++u)$p(f,(g=Ea[u])[0])||$p(f,g[1])?(os(f[0],g[1])>os(f[0],f[1])&&(f[1]=g[1]),os(g[0],f[1])>os(f[0],f[1])&&(f[0]=g[0])):v.push(f=g);for(E=-1/0,u=0,f=v[h=v.length-1];u<=h;f=g,++u)(I=os(f[1],(g=v[u])[0]))>E&&(E=I,Mi=g[0],ti=f[1])}return Ea=Xo=null,Mi===1/0||ur===1/0?[[NaN,NaN],[NaN,NaN]]:[[Mi,ur],[ti,Nu]]},M.geoCentroid=function(i){nf=F0=Om=Lm=Pv=Hp=Fm=rf=po=U0=B0=0,Mu(i,Qa);var u=po,h=U0,f=B0,g=u*u+h*h+f*f;return g<1e-12&&(u=Hp,h=Fm,f=rf,F0<bn&&(u=Om,h=Lm,f=Pv),(g=u*u+h*h+f*f)<1e-12)?[NaN,NaN]:[_r(h,u)*qr,$i(f/xi(g))*qr]},M.geoCircle=function(){var f,g,i=Gp([0,0]),u=Gp(90),h=Gp(6),v={point:function E(S,k){f.push(S=g(S,k)),S[0]*=qr,S[1]*=qr}};function I(){var S=i.apply(this,arguments),k=u.apply(this,arguments)*In,O=h.apply(this,arguments)*In;return f=[],g=j0(-S[0]*In,-S[1]*In,0).invert,$0(v,k,O,1),S={type:"Polygon",coordinates:[f]},f=g=null,S}return I.center=function(S){return arguments.length?(i="function"==typeof S?S:Gp([+S[0],+S[1]]),I):i},I.radius=function(S){return arguments.length?(u="function"==typeof S?S:Gp(+S),I):u},I.precision=function(S){return arguments.length?(h="function"==typeof S?S:Gp(+S),I):h},I},M.geoClipExtent=function(){var g,v,E,i=0,u=0,h=960,f=500;return E={stream:function(I){return g&&v===I?g:g=pE(i,u,h,f)(v=I)},extent:function(I){return arguments.length?(i=+I[0][0],u=+I[0][1],h=+I[1][0],f=+I[1][1],g=v=null,E):[[i,u],[h,f]]}}},M.geoContains=function(i,u){return(i&&Qp.hasOwnProperty(i.type)?Qp[i.type]:W0)(i,u)},M.geoDistance=jm,M.geoGraticule=J0,M.geoGraticule10=function Xp(){return J0()()},M.geoInterpolate=function(i,u){var h=i[0]*In,f=i[1]*In,g=u[0]*In,v=u[1]*In,E=dn(f),I=en(f),S=dn(v),k=en(v),O=E*dn(h),U=E*en(h),N=S*dn(g),V=S*en(g),H=2*$i(xi(N0(v-f)+E*S*N0(g-h))),G=en(H),Y=H?function(J){var he=en(J*=H)/G,ee=en(H-J)/G,Ce=ee*O+he*N,ke=ee*U+he*V,Se=ee*I+he*k;return[_r(ke,Ce)*qr,_r(Se,xi(Ce*Ce+ke*ke))*qr]}:function(){return[h*qr,f*qr]};return Y.distance=H,Y},M.geoLength=q0,M.geoPath=function(i,u){var f,g,h=4.5;function v(E){return E&&("function"==typeof h&&g.pointRadius(+h.apply(this,arguments)),Mu(E,f(g))),g.result()}return v.area=function(E){return Mu(E,f(xs)),xs.result()},v.measure=function(E){return Mu(E,f(cl)),cl.result()},v.bounds=function(E){return Mu(E,f(Hm)),Hm.result()},v.centroid=function(E){return Mu(E,f(Xa)),Xa.result()},v.projection=function(E){return arguments.length?(f=null==E?(i=null,Bh):(i=E).stream,v):i},v.context=function(E){return arguments.length?(g=null==E?(u=null,new Lu):new _I(u=E),"function"!=typeof h&&g.pointRadius(h),v):u},v.pointRadius=function(E){return arguments.length?(h="function"==typeof E?E:(g.pointRadius(+E),+E),v):h},v.projection(i).context(u)},M.geoAlbers=cw,M.geoAlbersUsa=function(){var i,u,f,v,I,S,h=cw(),g=Km().rotate([154,0]).center([-2,58.5]).parallels([55,65]),E=Km().rotate([157,0]).center([-3,19.9]).parallels([8,18]),k={point:function(N,V){S=[N,V]}};function O(N){var V=N[0],H=N[1];return S=null,f.point(V,H),S||(v.point(V,H),S)||(I.point(V,H),S)}function U(){return i=u=null,O}return O.invert=function(N){var V=h.scale(),H=h.translate(),G=(N[0]-H[0])/V,Y=(N[1]-H[1])/V;return(Y>=.12&&Y<.234&&G>=-.425&&G<-.214?g:Y>=.166&&Y<.234&&G>=-.214&&G<-.115?E:h).invert(N)},O.stream=function(N){return i&&u===N?i:i=function ME(i){var u=i.length;return{point:function(h,f){for(var g=-1;++g<u;)i[g].point(h,f)},sphere:function(){for(var h=-1;++h<u;)i[h].sphere()},lineStart:function(){for(var h=-1;++h<u;)i[h].lineStart()},lineEnd:function(){for(var h=-1;++h<u;)i[h].lineEnd()},polygonStart:function(){for(var h=-1;++h<u;)i[h].polygonStart()},polygonEnd:function(){for(var h=-1;++h<u;)i[h].polygonEnd()}}}([h.stream(u=N),g.stream(N),E.stream(N)])},O.precision=function(N){return arguments.length?(h.precision(N),g.precision(N),E.precision(N),U()):h.precision()},O.scale=function(N){return arguments.length?(h.scale(N),g.scale(.35*N),E.scale(N),O.translate(h.translate())):h.scale()},O.translate=function(N){if(!arguments.length)return h.translate();var V=h.scale(),H=+N[0],G=+N[1];return f=h.translate(N).clipExtent([[H-.455*V,G-.238*V],[H+.455*V,G+.238*V]]).stream(k),v=g.translate([H-.307*V,G+.201*V]).clipExtent([[H-.425*V+bn,G+.12*V+bn],[H-.214*V-bn,G+.234*V-bn]]).stream(k),I=E.translate([H-.205*V,G+.212*V]).clipExtent([[H-.214*V+bn,G+.166*V+bn],[H-.115*V-bn,G+.234*V-bn]]).stream(k),U()},O.fitExtent=function(N,V){return Fu(O,N,V)},O.fitSize=function(N,V){return ll(O,N,V)},O.scale(1070)},M.geoAzimuthalEqualArea=function(){return ni(rg).scale(124.75).clipAngle(179.999)},M.geoAzimuthalEqualAreaRaw=rg,M.geoAzimuthalEquidistant=function(){return ni(Zs).scale(79.4188).clipAngle(179.999)},M.geoAzimuthalEquidistantRaw=Zs,M.geoConicConformal=function(){return us(fw).scale(109.5).parallels([30,30])},M.geoConicConformalRaw=fw,M.geoConicEqualArea=Km,M.geoConicEqualAreaRaw=uw,M.geoConicEquidistant=function(){return us(EI).scale(131.154).center([0,13.9389])},M.geoConicEquidistantRaw=EI,M.geoEquirectangular=function(){return ni($h).scale(152.63)},M.geoEquirectangularRaw=$h,M.geoGnomonic=function(){return ni(hf).scale(144.049).clipAngle(60)},M.geoGnomonicRaw=hf,M.geoIdentity=function(){var I,S,k,U,N,V,i=1,u=0,h=0,f=1,g=1,v=Bh,E=null,O=Bh;function H(){return U=N=null,V}return V={stream:function(G){return U&&N===G?U:U=v(O(N=G))},clipExtent:function(G){return arguments.length?(O=null==G?(E=I=S=k=null,Bh):pE(E=+G[0][0],I=+G[0][1],S=+G[1][0],k=+G[1][1]),H()):null==E?null:[[E,I],[S,k]]},scale:function(G){return arguments.length?(v=df((i=+G)*f,i*g,u,h),H()):i},translate:function(G){return arguments.length?(v=df(i*f,i*g,u=+G[0],h=+G[1]),H()):[u,h]},reflectX:function(G){return arguments.length?(v=df(i*(f=G?-1:1),i*g,u,h),H()):f<0},reflectY:function(G){return arguments.length?(v=df(i*f,i*(g=G?-1:1),u,h),H()):g<0},fitExtent:function(G,Y){return Fu(V,G,Y)},fitSize:function(G,Y){return ll(V,G,Y)}}},M.geoProjection=ni,M.geoProjectionMutator=lf,M.geoMercator=function(){return dw(cs).scale(961/fo)},M.geoMercatorRaw=cs,M.geoOrthographic=function(){return ni(gw).scale(249.5).clipAngle(90+bn)},M.geoOrthographicRaw=gw,M.geoStereographic=function(){return ni(ig).scale(250).clipAngle(142)},M.geoStereographicRaw=ig,M.geoTransverseMercator=function(){var i=dw(Ym),u=i.center,h=i.rotate;return i.center=function(f){return arguments.length?u([-f[1],f[0]]):[(f=u())[1],-f[0]]},i.rotate=function(f){return arguments.length?h([f[0],f[1],f.length>2?f[2]+90:90]):[(f=h())[0],f[1],f[2]-90]},h([0,0,90]).scale(159.155)},M.geoTransverseMercatorRaw=Ym,M.geoRotation=Lv,M.geoStream=Mu,M.geoTransform=function(i){return{stream:fc(i)}},M.cluster=function(){var i=Xv,u=1,h=1,f=!1;function g(v){var E,I=0;v.eachAfter(function(N){var V=N.children;V?(N.x=function CI(i){return i.reduce(Jv,0)/i.length}(V),N.y=function PE(i){return 1+i.reduce(TI,0)}(V)):(N.x=E?I+=i(N,E):0,N.y=0,E=N)});var S=function DI(i){for(var u;u=i.children;)i=u[0];return i}(v),k=function Fo(i){for(var u;u=i.children;)i=u[u.length-1];return i}(v),O=S.x-i(S,k)/2,U=k.x+i(k,S)/2;return v.eachAfter(f?function(N){N.x=(N.x-v.x)*u,N.y=(v.y-N.y)*h}:function(N){N.x=(N.x-O)/(U-O)*u,N.y=(1-(v.y?N.y/v.y:1))*h})}return g.separation=function(v){return arguments.length?(i=v,g):i},g.size=function(v){return arguments.length?(f=!1,u=+v[0],h=+v[1],g):f?null:[u,h]},g.nodeSize=function(v){return arguments.length?(f=!0,u=+v[0],h=+v[1],g):f?[u,h]:null},g},M.hierarchy=e_,M.pack=function(){var i=null,u=1,h=1,f=yf;function g(v){return v.x=u/2,v.y=h/2,i?v.eachBefore(s_(i)).eachAfter(o_(f,.5)).eachBefore(vf(1)):v.eachBefore(s_(iy)).eachAfter(o_(yf,1)).eachAfter(o_(f,v.r/Math.min(u,h))).eachBefore(vf(Math.min(u,h)/(2*v.r))),v}return g.radius=function(v){return arguments.length?(i=Iw(v),g):i},g.size=function(v){return arguments.length?(u=+v[0],h=+v[1],g):[u,h]},g.padding=function(v){return arguments.length?(f="function"==typeof v?v:hl(+v),g):f},g},M.packSiblings=function(i){return ag(i),i},M.packEnclose=ls,M.partition=function(){var i=1,u=1,h=0,f=!1;function g(E){var I=E.height+1;return E.x0=E.y0=h,E.x1=i,E.y1=u/I,E.eachBefore(function v(E,I){return function(S){S.children&&_f(S,S.x0,E*(S.depth+1)/I,S.x1,E*(S.depth+2)/I);var k=S.x0,O=S.y0,U=S.x1-h,N=S.y1-h;U<k&&(k=U=(k+U)/2),N<O&&(O=N=(O+N)/2),S.x0=k,S.y0=O,S.x1=U,S.y1=N}}(u,I)),f&&E.eachBefore(a_),E}return g.round=function(E){return arguments.length?(f=!!E,g):f},g.size=function(E){return arguments.length?(i=+E[0],u=+E[1],g):[i,u]},g.padding=function(E){return arguments.length?(h=+E,g):h},g},M.stratify=function(){var i=cg,u=$E;function h(f){var g,v,I,S,k,U,N,E=f.length,O=new Array(E),V={};for(v=0;v<E;++v)k=O[v]=new Hh(g=f[v]),null!=(U=i(g,v,f))&&(U+="")&&(V[N="$"+(k.id=U)]=N in V?jE:k);for(v=0;v<E;++v)if(k=O[v],null!=(U=u(f[v],v,f))&&(U+="")){if(!(S=V["$"+U]))throw new Error("missing: "+U);if(S===jE)throw new Error("ambiguous: "+U);S.children?S.children.push(k):S.children=[k],k.parent=S}else{if(I)throw new Error("multiple roots");I=k}if(!I)throw new Error("no root");if(I.parent=vC,I.eachBefore(function(H){H.depth=H.parent.depth+1,--E}).eachBefore(SI),I.parent=null,E>0)throw new Error("cycle");return I}return h.id=function(f){return arguments.length?(i=ry(f),h):i},h.parentId=function(f){return arguments.length?(u=ry(f),h):u},h},M.tree=function(){var i=ri,u=1,h=1,f=null;function g(k){var O=function Tw(i){for(var h,g,v,E,I,u=new ks(i,0),f=[u];h=f.pop();)if(v=h._.children)for(h.children=new Array(I=v.length),E=I-1;E>=0;--E)f.push(g=h.children[E]=new ks(v[E],E)),g.parent=h;return(u.parent=new ks(null,0)).children=[u],u}(k);if(O.eachAfter(v),O.parent.m=-O.z,O.eachBefore(E),f)k.eachBefore(S);else{var U=k,N=k,V=k;k.eachBefore(function(he){he.x<U.x&&(U=he),he.x>N.x&&(N=he),he.depth>V.depth&&(V=he)});var H=U===N?1:i(U,N)/2,G=H-U.x,Y=u/(N.x+H+G),J=h/(V.depth||1);k.eachBefore(function(he){he.x=(he.x+G)*Y,he.y=he.depth*J})}return k}function v(k){var O=k.children,U=k.parent.children,N=k.i?U[k.i-1]:null;if(O){!function hg(i){for(var v,u=0,h=0,f=i.children,g=f.length;--g>=0;)(v=f[g]).z+=u,v.m+=u,u+=v.s+(h+=v.c)}(k);var V=(O[0].z+O[O.length-1].z)/2;N?(k.z=N.z+i(k._,N._),k.m=k.z-V):k.z=V}else N&&(k.z=N.z+i(k._,N._));k.parent.A=function I(k,O,U){if(O){for(var Ce,N=k,V=k,H=O,G=N.parent.children[0],Y=N.m,J=V.m,he=H.m,ee=G.m;H=lg(H),N=sy(N),H&&N;)G=sy(G),(V=lg(V)).a=k,(Ce=H.z+he-N.z-Y+i(H._,N._))>0&&(HE(zE(H,k,U),k,Ce),Y+=Ce,J+=Ce),he+=H.m,Y+=N.m,ee+=G.m,J+=V.m;H&&!lg(V)&&(V.t=H,V.m+=he-J),N&&!sy(G)&&(G.t=N,G.m+=Y-ee,U=k)}return U}(k,N,k.parent.A||U[0])}function E(k){k._.x=k.z+k.parent.m,k.m+=k.parent.m}function S(k){k.x*=u,k.y=k.depth*h}return g.separation=function(k){return arguments.length?(i=k,g):i},g.size=function(k){return arguments.length?(f=!1,u=+k[0],h=+k[1],g):f?null:[u,h]},g.nodeSize=function(k){return arguments.length?(f=!0,u=+k[0],h=+k[1],g):f?[u,h]:null},g},M.treemap=function(){var i=Sw,u=!1,h=1,f=1,g=[0],v=yf,E=yf,I=yf,S=yf,k=yf;function O(N){return N.x0=N.y0=0,N.x1=h,N.y1=f,N.eachBefore(U),g=[0],u&&N.eachBefore(a_),N}function U(N){var V=g[N.depth],H=N.x0+V,G=N.y0+V,Y=N.x1-V,J=N.y1-V;Y<H&&(H=Y=(H+Y)/2),J<G&&(G=J=(G+J)/2),N.x0=H,N.y0=G,N.x1=Y,N.y1=J,N.children&&(V=g[N.depth+1]=v(N)/2,H+=k(N)-V,G+=E(N)-V,(Y-=I(N)-V)<H&&(H=Y=(H+Y)/2),(J-=S(N)-V)<G&&(G=J=(G+J)/2),i(N,H,G,Y,J))}return O.round=function(N){return arguments.length?(u=!!N,O):u},O.size=function(N){return arguments.length?(h=+N[0],f=+N[1],O):[h,f]},O.tile=function(N){return arguments.length?(i=ry(N),O):i},O.padding=function(N){return arguments.length?O.paddingInner(N).paddingOuter(N):O.paddingInner()},O.paddingInner=function(N){return arguments.length?(v="function"==typeof N?N:hl(+N),O):v},O.paddingOuter=function(N){return arguments.length?O.paddingTop(N).paddingRight(N).paddingBottom(N).paddingLeft(N):O.paddingTop()},O.paddingTop=function(N){return arguments.length?(E="function"==typeof N?N:hl(+N),O):E},O.paddingRight=function(N){return arguments.length?(I="function"==typeof N?N:hl(+N),O):I},O.paddingBottom=function(N){return arguments.length?(S="function"==typeof N?N:hl(+N),O):S},O.paddingLeft=function(N){return arguments.length?(k="function"==typeof N?N:hl(+N),O):k},O},M.treemapBinary=function(i,u,h,f,g){var E,S,v=i.children,I=v.length,k=new Array(I+1);for(k[0]=S=E=0;E<I;++E)k[E+1]=S+=v[E].value;!function O(U,N,V,H,G,Y,J){if(U>=N-1){var he=v[U];return he.x0=H,he.y0=G,he.x1=Y,void(he.y1=J)}for(var ee=k[U],Ce=V/2+ee,ke=U+1,Se=N-1;ke<Se;){var _e=ke+Se>>>1;k[_e]<Ce?ke=_e+1:Se=_e}Ce-k[ke-1]<k[ke]-Ce&&U+1<ke&&--ke;var ze=k[ke]-ee,je=V-ze;if(Y-H>J-G){var xt=(H*je+Y*ze)/V;O(U,ke,ze,H,G,xt,J),O(ke,N,je,xt,G,Y,J)}else{var mt=(G*je+J*ze)/V;O(U,ke,ze,H,G,Y,mt),O(ke,N,je,H,mt,Y,J)}}(0,I,i.value,u,h,f,g)},M.treemapDice=_f,M.treemapSlice=wf,M.treemapSliceDice=function(i,u,h,f,g){(1&i.depth?wf:_f)(i,u,h,f,g)},M.treemapSquarify=Sw,M.treemapResquarify=l_,M.interpolate=Hr,M.interpolateArray=om,M.interpolateBasis=Ad,M.interpolateBasisClosed=sm,M.interpolateDate=fa,M.interpolateNumber=es,M.interpolateObject=am,M.interpolateRound=$c,M.interpolateString=uo,M.interpolateTransformCss=Rd,M.interpolateTransformSvg=ts,M.interpolateZoom=Fa,M.interpolateRgb=gh,M.interpolateRgbBasis=Vc,M.interpolateRgbBasisClosed=mh,M.interpolateHsl=Eu,M.interpolateHslLong=zc,M.interpolateLab=function sp(i,u){var h=vi((i=Oc(i)).l,(u=Oc(u)).l),f=vi(i.a,u.a),g=vi(i.b,u.b),v=vi(i.opacity,u.opacity);return function(E){return i.l=h(E),i.a=f(E),i.b=g(E),i.opacity=v(E),i+""}},M.interpolateHcl=Ua,M.interpolateHclLong=tc,M.interpolateCubehelix=kd,M.interpolateCubehelixLong=zo,M.quantize=function(i,u){for(var h=new Array(u),f=0;f<u;++f)h[f]=i(f/(u-1));return h},M.path=Za,M.polygonArea=function(i){for(var f,u=-1,h=i.length,g=i[h-1],v=0;++u<h;)v+=(f=g)[1]*(g=i[u])[0]-f[0]*g[1];return v/2},M.polygonCentroid=function(i){for(var v,I,u=-1,h=i.length,f=0,g=0,E=i[h-1],S=0;++u<h;)S+=I=(v=E)[0]*(E=i[u])[1]-E[0]*v[1],f+=(v[0]+E[0])*I,g+=(v[1]+E[1])*I;return[f/(S*=3),g/S]},M.polygonHull=function(i){if((h=i.length)<3)return null;var u,h,f=new Array(h),g=new Array(h);for(u=0;u<h;++u)f[u]=[+i[u][0],+i[u][1],u];for(f.sort(gc),u=0;u<h;++u)g[u]=[f[u][0],-f[u][1]];var v=Bu(f),E=Bu(g),I=E[0]===v[0],S=E[E.length-1]===v[v.length-1],k=[];for(u=v.length-1;u>=0;--u)k.push(i[f[v[u]][2]]);for(u=+I;u<E.length-S;++u)k.push(i[f[E[u]][2]]);return k},M.polygonContains=function(i,u){for(var S,k,h=i.length,f=i[h-1],g=u[0],v=u[1],E=f[0],I=f[1],O=!1,U=0;U<h;++U)S=(f=i[U])[0],(k=f[1])>v!=I>v&&g<(E-S)*(v-k)/(I-k)+S&&(O=!O),E=S,I=k;return O},M.polygonLength=function(i){for(var g,v,u=-1,h=i.length,f=i[h-1],E=f[0],I=f[1],S=0;++u<h;)g=E,v=I,g-=E=(f=i[u])[0],v-=I=f[1],S+=Math.sqrt(g*g+v*v);return S},M.quadtree=Dm,M.queue=zh,M.randomUniform=KE,M.randomNormal=Ef,M.randomLogNormal=pg,M.randomBates=Gh,M.randomIrwinHall=cy,M.randomExponential=xw,M.request=ly,M.html=hy,M.json=dy,M.text=Mw,M.xml=ii,M.csv=RI,M.tsv=fy,M.scaleBand=Pw,M.scalePoint=function py(){return ZE(Pw().paddingInner(1))},M.scaleIdentity=function g_(){var i=[0,1];function u(h){return+h}return u.invert=u,u.domain=u.range=function(h){return arguments.length?(i=Rw.call(h,Ow),u):i.slice()},u.copy=function(){return g_().domain(i)},Kh(u)},M.scaleLinear=function my(){var i=vg(p_,es);return i.copy=function(){return gy(i,my())},Kh(i)},M.scaleLog=function gl(){var i=vg(y_,YE).domain([1,10]),u=i.domain,h=10,f=yy(10),g=Zh(10);function v(){return f=yy(h),g=Zh(h),u()[0]<0&&(f=_g(f),g=_g(g)),i}return i.base=function(E){return arguments.length?(h=+E,v()):h},i.domain=function(E){return arguments.length?(u(E),v()):u()},i.ticks=function(E){var O,I=u(),S=I[0],k=I[I.length-1];(O=k<S)&&(U=S,S=k,k=U);var V,H,G,U=f(S),N=f(k),Y=null==E?10:+E,J=[];if(!(h%1)&&N-U<Y){if(U=Math.round(U)-1,N=Math.round(N)+1,S>0){for(;U<N;++U)for(H=1,V=g(U);H<h;++H)if(!((G=V*H)<S)){if(G>k)break;J.push(G)}}else for(;U<N;++U)for(H=h-1,V=g(U);H>=1;--H)if(!((G=V*H)<S)){if(G>k)break;J.push(G)}}else J=vt(U,N,Math.min(N-U,Y)).map(g);return O?J.reverse():J},i.tickFormat=function(E,I){if(null==I&&(I=10===h?".0e":","),"function"!=typeof I&&(I=M.format(I)),E===1/0)return I;null==E&&(E=10);var S=Math.max(1,h*E/i.ticks().length);return function(k){var O=k/g(Math.round(f(k)));return O*h<h-.5&&(O*=h),O<=S?I(k):""}},i.nice=function(){return u(m_(u(),{floor:function(E){return g(Math.floor(f(E)))},ceil:function(E){return g(Math.ceil(f(E)))}}))},i.copy=function(){return gy(i,gl().base(h))},i},M.scaleOrdinal=Nw,M.scaleImplicit=kw,M.scalePow=wg,M.scaleSqrt=function v_(){return wg().exponent(.5)},M.scaleQuantile=function Cf(){var i=[],u=[],h=[];function f(){var v=0,E=Math.max(1,u.length);for(h=new Array(E-1);++v<E;)h[v-1]=De(i,v/E);return g}function g(v){if(!isNaN(v=+v))return u[Ue(h,v)]}return g.invertExtent=function(v){var E=u.indexOf(v);return E<0?[NaN,NaN]:[E>0?h[E-1]:i[0],E<h.length?h[E]:i[i.length-1]]},g.domain=function(v){if(!arguments.length)return i.slice();i=[];for(var S,E=0,I=v.length;E<I;++E)null!=(S=v[E])&&!isNaN(S=+S)&&i.push(S);return i.sort(be),f()},g.range=function(v){return arguments.length?(u=ql.call(v),f()):u.slice()},g.quantiles=function(){return h.slice()},g.copy=function(){return Cf().domain(i).range(u)},g},M.scaleQuantize=function Bw(){var i=0,u=1,h=1,f=[.5],g=[0,1];function v(I){if(I<=I)return g[Ue(f,I,0,h)]}function E(){var I=-1;for(f=new Array(h);++I<h;)f[I]=((I+1)*u-(I-h)*i)/(h+1);return v}return v.domain=function(I){return arguments.length?(i=+I[0],u=+I[1],E()):[i,u]},v.range=function(I){return arguments.length?(h=(g=ql.call(I)).length-1,E()):g.slice()},v.invertExtent=function(I){var S=g.indexOf(I);return S<0?[NaN,NaN]:S<1?[i,f[0]]:S>=h?[f[h-1],u]:[f[S-1],f[S]]},v.copy=function(){return Bw().domain([i,u]).range(g)},Kh(v)},M.scaleThreshold=function hs(){var i=[.5],u=[0,1],h=1;function f(g){if(g<=g)return u[Ue(i,g,0,h)]}return f.domain=function(g){return arguments.length?(i=ql.call(g),h=Math.min(i.length,u.length-1),f):i.slice()},f.range=function(g){return arguments.length?(u=ql.call(g),h=Math.min(i.length,u.length-1),f):u.slice()},f.invertExtent=function(g){var v=u.indexOf(g);return[i[v-1],i[v]]},f.copy=function(){return hs().domain(i).range(u)},f},M.scaleTime=function(){return Of(Wl,I_,Sf,Df,Yh,$w,Ca,Tf,M.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},M.scaleUtc=function(){return Of(Kl,ki,Dg,Jh,C_,Cg,Ca,Tf,M.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},M.schemeCategory10=N_,M.schemeCategory20b=tb,M.schemeCategory20c=sd,M.schemeCategory20=nb,M.interpolateCubehelixDefault=od,M.interpolateRainbow=function(i){(i<0||i>1)&&(i-=Math.floor(i));var u=Math.abs(i-.5);return nu.h=360*i-100,nu.s=1.5-1.5*u,nu.l=.8-.9*u,nu+""},M.interpolateWarm=Yl,M.interpolateCool=Pg,M.interpolateViridis=rb,M.interpolateMagma=Lf,M.interpolateInferno=ib,M.interpolatePlasma=xy,M.scaleSequential=function sb(i){var u=0,h=1,f=!1;function g(v){var E=(v-u)/(h-u);return i(f?Math.max(0,Math.min(1,E)):E)}return g.domain=function(v){return arguments.length?(u=+v[0],h=+v[1],g):[u,h]},g.clamp=function(v){return arguments.length?(f=!!v,g):f},g.interpolator=function(v){return arguments.length?(i=v,g):i},g.copy=function(){return sb(i).domain([u,h]).clamp(f)},Kh(g)},M.creator=sn,M.local=se,M.matcher=Ct,M.mouse=Rr,M.namespace=Vs,M.namespaces=Un,M.select=Ts,M.selectAll=function(i){return"string"==typeof i?new Oi([document.querySelectorAll(i)],[document.documentElement]):new Oi([null==i?[]:i],$s)},M.selection=hu,M.selector=kr,M.selectorAll=$o,M.style=bo,M.touch=Rc,M.touches=function(i,u){null==u&&(u=Ra().touches);for(var h=0,f=u?u.length:0,g=new Array(f);h<f;++h)g[h]=$r(i,u[h]);return g},M.window=ws,M.customEvent=ia,M.arc=function(){var i=BI,u=Ry,h=Yn(0),f=null,g=ld,v=O_,E=L_,I=null;function S(){var k,O,U=+i.apply(this,arguments),N=+u.apply(this,arguments),V=g.apply(this,arguments)-Ir,H=v.apply(this,arguments)-Ir,G=My(H-V),Y=H>V;if(I||(I=k=Za()),N<U&&(O=N,N=U,U=O),N>dr)if(G>ud-dr)I.moveTo(N*ju(V),N*$u(V)),I.arc(0,0,N,V,H,!Y),U>dr&&(I.moveTo(U*ju(H),U*$u(H)),I.arc(0,0,U,H,V,Y));else{var Qe,Pt,J=V,he=H,ee=V,Ce=H,ke=G,Se=G,_e=E.apply(this,arguments)/2,ze=_e>dr&&(f?+f.apply(this,arguments):ad(U*U+N*N)),je=P_(My(N-U)/2,+h.apply(this,arguments)),xt=je,mt=je;if(ze>dr){var ft=cd(ze/U*$u(_e)),le=cd(ze/N*$u(_e));(ke-=2*ft)>dr?(ee+=ft*=Y?1:-1,Ce-=ft):(ke=0,ee=Ce=(V+H)/2),(Se-=2*le)>dr?(J+=le*=Y?1:-1,he-=le):(Se=0,J=he=(V+H)/2)}var it=N*ju(J),Mt=N*$u(J),Kt=U*ju(Ce),Yt=U*$u(Ce);if(je>dr){var Qn=N*ju(he),Mn=N*$u(he),tr=U*ju(ee),Xn=U*$u(ee);if(G<Xl){var jr=ke>dr?yc(it,Mt,tr,Xn,Qn,Mn,Kt,Yt):[Kt,Yt],Sr=it-jr[0],cr=Mt-jr[1],Bt=Qn-jr[0],Sn=Mn-jr[1],kn=1/$u(m1((Sr*Bt+cr*Sn)/(ad(Sr*Sr+cr*cr)*ad(Bt*Bt+Sn*Sn)))/2),tn=ad(jr[0]*jr[0]+jr[1]*jr[1]);xt=P_(je,(U-tn)/(kn-1)),mt=P_(je,(N-tn)/(kn+1))}}Se>dr?mt>dr?(Qe=fs(tr,Xn,it,Mt,N,mt,Y),Pt=fs(Qn,Mn,Kt,Yt,N,mt,Y),I.moveTo(Qe.cx+Qe.x01,Qe.cy+Qe.y01),mt<je?I.arc(Qe.cx,Qe.cy,mt,ds(Qe.y01,Qe.x01),ds(Pt.y01,Pt.x01),!Y):(I.arc(Qe.cx,Qe.cy,mt,ds(Qe.y01,Qe.x01),ds(Qe.y11,Qe.x11),!Y),I.arc(0,0,N,ds(Qe.cy+Qe.y11,Qe.cx+Qe.x11),ds(Pt.cy+Pt.y11,Pt.cx+Pt.x11),!Y),I.arc(Pt.cx,Pt.cy,mt,ds(Pt.y11,Pt.x11),ds(Pt.y01,Pt.x01),!Y))):(I.moveTo(it,Mt),I.arc(0,0,N,J,he,!Y)):I.moveTo(it,Mt),U>dr&&ke>dr?xt>dr?(Qe=fs(Kt,Yt,Qn,Mn,U,-xt,Y),Pt=fs(it,Mt,tr,Xn,U,-xt,Y),I.lineTo(Qe.cx+Qe.x01,Qe.cy+Qe.y01),xt<je?I.arc(Qe.cx,Qe.cy,xt,ds(Qe.y01,Qe.x01),ds(Pt.y01,Pt.x01),!Y):(I.arc(Qe.cx,Qe.cy,xt,ds(Qe.y01,Qe.x01),ds(Qe.y11,Qe.x11),!Y),I.arc(0,0,U,ds(Qe.cy+Qe.y11,Qe.cx+Qe.x11),ds(Pt.cy+Pt.y11,Pt.cx+Pt.x11),Y),I.arc(Pt.cx,Pt.cy,xt,ds(Pt.y11,Pt.x11),ds(Pt.y01,Pt.x01),!Y))):I.arc(0,0,U,Ce,ee,Y):I.lineTo(Kt,Yt)}else I.moveTo(0,0);if(I.closePath(),k)return I=null,k+""||null}return S.centroid=function(){var k=(+i.apply(this,arguments)+ +u.apply(this,arguments))/2,O=(+g.apply(this,arguments)+ +v.apply(this,arguments))/2-Xl/2;return[ju(O)*k,$u(O)*k]},S.innerRadius=function(k){return arguments.length?(i="function"==typeof k?k:Yn(+k),S):i},S.outerRadius=function(k){return arguments.length?(u="function"==typeof k?k:Yn(+k),S):u},S.cornerRadius=function(k){return arguments.length?(h="function"==typeof k?k:Yn(+k),S):h},S.padRadius=function(k){return arguments.length?(f=null==k?null:"function"==typeof k?k:Yn(+k),S):f},S.startAngle=function(k){return arguments.length?(g="function"==typeof k?k:Yn(+k),S):g},S.endAngle=function(k){return arguments.length?(v="function"==typeof k?k:Yn(+k),S):v},S.padAngle=function(k){return arguments.length?(E="function"==typeof k?k:Yn(+k),S):E},S.context=function(k){return arguments.length?(I=null==k?null:k,S):I},S},M.area=ky,M.line=Lg,M.pie=function(){var i=hd,u=VI,h=null,f=Yn(0),g=Yn(ud),v=Yn(0);function E(I){var S,O,U,J,Ce,k=I.length,N=0,V=new Array(k),H=new Array(k),G=+f.apply(this,arguments),Y=Math.min(ud,Math.max(-ud,g.apply(this,arguments)-G)),he=Math.min(Math.abs(Y)/k,v.apply(this,arguments)),ee=he*(Y<0?-1:1);for(S=0;S<k;++S)(Ce=H[V[S]=S]=+i(I[S],S,I))>0&&(N+=Ce);for(null!=u?V.sort(function(ke,Se){return u(H[ke],H[Se])}):null!=h&&V.sort(function(ke,Se){return h(I[ke],I[Se])}),S=0,U=N?(Y-k*ee)/N:0;S<k;++S,G=J)H[O=V[S]]={data:I[O],index:S,value:Ce=H[O],startAngle:G,endAngle:J=G+(Ce>0?Ce*U:0)+ee,padAngle:he};return H}return E.value=function(I){return arguments.length?(i="function"==typeof I?I:Yn(+I),E):i},E.sortValues=function(I){return arguments.length?(u=I,h=null,E):u},E.sort=function(I){return arguments.length?(h=I,u=null,E):h},E.startAngle=function(I){return arguments.length?(f="function"==typeof I?I:Yn(+I),E):f},E.endAngle=function(I){return arguments.length?(g="function"==typeof I?I:Yn(+I),E):g},E.padAngle=function(I){return arguments.length?(v="function"==typeof I?I:Yn(+I),E):v},E},M.radialArea=function(){var i=ky().curve(ub),u=i.curve,h=i.lineX0,f=i.lineX1,g=i.lineY0,v=i.lineY1;return i.angle=i.x,delete i.x,i.startAngle=i.x0,delete i.x0,i.endAngle=i.x1,delete i.x1,i.radius=i.y,delete i.y,i.innerRadius=i.y0,delete i.y0,i.outerRadius=i.y1,delete i.y1,i.lineStartAngle=function(){return ru(h())},delete i.lineX0,i.lineEndAngle=function(){return ru(f())},delete i.lineX1,i.lineInnerRadius=function(){return ru(g())},delete i.lineY0,i.lineOuterRadius=function(){return ru(v())},delete i.lineY1,i.curve=function(E){return arguments.length?u(Py(E)):u()._curve},i},M.radialLine=function(){return ru(Lg().curve(ub))},M.linkHorizontal=function _1(){return wl(Hu)},M.linkVertical=function V_(){return wl(v1)},M.linkRadial=function By(){var i=wl(Uy);return i.angle=i.x,delete i.x,i.radius=i.y,delete i.y,i},M.symbol=function(){var i=Yn(Vy),u=Yn(64),h=null;function f(){var g;if(h||(h=g=Za()),i.apply(this,arguments).draw(h,+u.apply(this,arguments)),g)return h=null,g+""||null}return f.type=function(g){return arguments.length?(i="function"==typeof g?g:Yn(g),f):i},f.size=function(g){return arguments.length?(u="function"==typeof g?g:Yn(+g),f):u},f.context=function(g){return arguments.length?(h=null==g?null:g,f):h},f},M.symbols=$y,M.symbolCircle=Vy,M.symbolCross=j_,M.symbolDiamond=hb,M.symbolSquare=zi,M.symbolStar=fb,M.symbolTriangle=pb,M.symbolWye=jy,M.curveBasisClosed=function(i){return new $_(i)},M.curveBasisOpen=function(i){return new pd(i)},M.curveBasis=function(i){return new Jl(i)},M.curveBundle=Ug,M.curveCardinalClosed=gd,M.curveCardinalOpen=EC,M.curveCardinal=gb,M.curveCatmullRomClosed=md,M.curveCatmullRomOpen=na,M.curveCatmullRom=mb,M.curveLinearClosed=function(i){return new vb(i)},M.curveLinear=F_,M.curveMonotoneX=function $I(i){return new Gy(i)},M.curveMonotoneY=function wb(i){return new _b(i)},M.curveNatural=function(i){return new Vf(i)},M.curveStep=function(i){return new Z_(i,.5)},M.curveStepAfter=function IC(i){return new Z_(i,1)},M.curveStepBefore=function zI(i){return new Z_(i,0)},M.stack=function(){var i=Yn([]),u=Vg,h=Bg,f=Y_;function g(v){var I,U,E=i.apply(this,arguments),S=v.length,k=E.length,O=new Array(k);for(I=0;I<k;++I){for(var G,N=E[I],V=O[I]=new Array(S),H=0;H<S;++H)V[H]=G=[0,+f(v[H],N,H,v)],G.data=v[H];V.key=N}for(I=0,U=u(O);I<k;++I)O[U[I]].index=I;return h(O,U),O}return g.keys=function(v){return arguments.length?(i="function"==typeof v?v:Yn(Ly.call(v)),g):i},g.value=function(v){return arguments.length?(f="function"==typeof v?v:Yn(+v),g):f},g.order=function(v){return arguments.length?(u=null==v?Vg:"function"==typeof v?v:Yn(Ly.call(v)),g):u},g.offset=function(v){return arguments.length?(h=null==v?Bg:v,g):h},g},M.stackOffsetExpand=function(i,u){if((f=i.length)>0){for(var h,f,E,g=0,v=i[0].length;g<v;++g){for(E=h=0;h<f;++h)E+=i[h][g][1]||0;if(E)for(h=0;h<f;++h)i[h][g][1]/=E}Bg(i,u)}},M.stackOffsetDiverging=function(i,u){if((S=i.length)>1)for(var h,g,v,E,I,S,f=0,k=i[u[0]].length;f<k;++f)for(E=I=0,h=0;h<S;++h)(v=(g=i[u[h]][f])[1]-g[0])>=0?(g[0]=E,g[1]=E+=v):v<0?(g[1]=I,g[0]=I+=v):g[0]=E},M.stackOffsetNone=Bg,M.stackOffsetSilhouette=function(i,u){if((g=i.length)>0){for(var g,h=0,f=i[u[0]],v=f.length;h<v;++h){for(var E=0,I=0;E<g;++E)I+=i[E][h][1]||0;f[h][1]+=f[h][0]=-I/2}Bg(i,u)}},M.stackOffsetWiggle=function(i,u){if((E=i.length)>0&&(v=(g=i[u[0]]).length)>0){for(var g,v,E,h=0,f=1;f<v;++f){for(var I=0,S=0,k=0;I<E;++I){for(var O=i[u[I]],U=O[f][1]||0,V=(U-(O[f-1][1]||0))/2,H=0;H<I;++H){var G=i[u[H]];V+=(G[f][1]||0)-(G[f-1][1]||0)}S+=U,k+=V*U}g[f-1][1]+=g[f-1][0]=h,S&&(h-=k/S)}g[f-1][1]+=g[f-1][0]=h,Bg(i,u)}},M.stackOrderAscending=Js,M.stackOrderDescending=function(i){return Js(i).reverse()},M.stackOrderInsideOut=function(i){var h,f,u=i.length,g=i.map(jg),v=Vg(i).sort(function(O,U){return g[U]-g[O]}),E=0,I=0,S=[],k=[];for(h=0;h<u;++h)f=v[h],E<I?(E+=g[f],S.push(f)):(I+=g[f],k.push(f));return k.reverse().concat(S)},M.stackOrderNone=Vg,M.stackOrderReverse=function(i){return Vg(i).reverse()},M.timeInterval=Ns,M.timeMillisecond=Tf,M.timeMilliseconds=vy,M.utcMillisecond=Tf,M.utcMilliseconds=vy,M.timeSecond=Ca,M.timeSeconds=jw,M.utcSecond=Ca,M.utcSeconds=jw,M.timeMinute=$w,M.timeMinutes=__,M.timeHour=Yh,M.timeHours=Hw,M.timeDay=Df,M.timeDays=w_,M.timeWeek=Sf,M.timeWeeks=wy,M.timeSunday=Sf,M.timeSundays=wy,M.timeMonday=ml,M.timeMondays=E_,M.timeTuesday=JE,M.timeTuesdays=e1,M.timeWednesday=zw,M.timeWednesdays=Xh,M.timeThursday=bg,M.timeThursdays=Ig,M.timeFriday=Eg,M.timeFridays=t1,M.timeSaturday=b_,M.timeSaturdays=Af,M.timeMonth=I_,M.timeMonths=Gw,M.timeYear=Wl,M.timeYears=qw,M.utcMinute=Cg,M.utcMinutes=Ta,M.utcHour=C_,M.utcHours=n1,M.utcDay=Jh,M.utcDays=_C,M.utcWeek=Dg,M.utcWeeks=Kw,M.utcSunday=Dg,M.utcSundays=Kw,M.utcMonday=T_,M.utcMondays=Ys,M.utcTuesday=by,M.utcTuesdays=xg,M.utcWednesday=Ww,M.utcWednesdays=ed,M.utcThursday=r1,M.utcThursdays=Zw,M.utcFriday=Sg,M.utcFridays=i1,M.utcSaturday=Ag,M.utcSaturdays=wt,M.utcMonth=ki,M.utcMonths=yl,M.utcYear=Kl,M.utcYears=Jt,M.timeFormatDefaultLocale=Ei,M.timeFormatLocale=Ge,M.isoFormat=br,M.isoParse=vl,M.now=Wc,M.timer=rs,M.timerFlush=Nd,M.timeout=Xr,M.interval=function(i,u,h){var f=new ga,g=u;return null==u?(f.restart(i,u,h),f):(u=+u,h=null==h?Wc():+h,f.restart(function v(E){E+=g,f.restart(v,g+=u,h),i(E)},u,h),f)},M.transition=fp,M.active=function(i,u){var f,g,h=i.__transition;if(h)for(g in u=null==u?null:u+"",h)if((f=h[g]).state>1&&f.name===u)return new Ga([[i]],Ip,u,+g);return null},M.interrupt=Jr,M.voronoi=function(){var i=T1,u=Ky,h=null;function f(g){return new Qy(g.map(function(v,E){var I=[Math.round(i(v,E,g)/Vr)*Vr,Math.round(u(v,E,g)/Vr)*Vr];return I.index=E,I.data=v,I}),h)}return f.polygons=function(g){return f(g).polygons()},f.links=function(g){return f(g).links()},f.triangles=function(g){return f(g).triangles()},f.x=function(g){return arguments.length?(i="function"==typeof g?g:Cb(+g),f):i},f.y=function(g){return arguments.length?(u="function"==typeof g?g:Cb(+g),f):u},f.extent=function(g){return arguments.length?(h=null==g?null:[[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]],f):h&&[[h[0][0],h[0][1]],[h[1][0],h[1][1]]]},f.size=function(g){return arguments.length?(h=null==g?null:[[0,0],[+g[0],+g[1]]],f):h&&[h[1][0]-h[0][0],h[1][1]-h[0][1]]},f},M.zoom=function(){var N,V,i=N1,u=r0,h=0,f=1/0,g=-f,v=f,E=g,I=v,S=250,k=Fa,O=[],U=ys("start","zoom","end"),H=500,Y=0;function J(le){le.on("wheel.zoom",je).on("mousedown.zoom",xt).on("dblclick.zoom",mt).on("touchstart.zoom",Qe).on("touchmove.zoom",Pt).on("touchend.zoom touchcancel.zoom",ft).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",Ps)}function he(le,it){return(it=Math.max(h,Math.min(f,it)))===le.k?le:new El(it,le.x,le.y)}function ee(le,it,Mt){var Kt=it[0]-Mt[0]*le.k,Yt=it[1]-Mt[1]*le.k;return Kt===le.x&&Yt===le.y?le:new El(le.k,Kt,Yt)}function Ce(le,it){var Mt=le.invertX(it[0][0])-g,Kt=le.invertX(it[1][0])-v,Yt=le.invertY(it[0][1])-E,Qn=le.invertY(it[1][1])-I;return le.translate(Kt>Mt?(Mt+Kt)/2:Math.min(0,Mt)||Math.max(0,Kt),Qn>Yt?(Yt+Qn)/2:Math.min(0,Yt)||Math.max(0,Qn))}function ke(le){return[(+le[0][0]+ +le[1][0])/2,(+le[0][1]+ +le[1][1])/2]}function Se(le,it,Mt){le.on("start.zoom",function(){_e(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){_e(this,arguments).end()}).tween("zoom",function(){var Kt=this,Yt=arguments,Qn=_e(Kt,Yt),Mn=u.apply(Kt,Yt),tr=Mt||ke(Mn),Xn=Math.max(Mn[1][0]-Mn[0][0],Mn[1][1]-Mn[0][1]),jr=Kt.__zoom,Sr="function"==typeof it?it.apply(Kt,Yt):it,cr=k(jr.invert(tr).concat(Xn/jr.k),Sr.invert(tr).concat(Xn/Sr.k));return function(Bt){if(1===Bt)Bt=Sr;else{var Sn=cr(Bt),kn=Xn/Sn[2];Bt=new El(kn,tr[0]-Sn[0]*kn,tr[1]-Sn[1]*kn)}Qn.zoom(null,Bt)}})}function _e(le,it){for(var Yt,Mt=0,Kt=O.length;Mt<Kt;++Mt)if((Yt=O[Mt]).that===le)return Yt;return new ze(le,it)}function ze(le,it){this.that=le,this.args=it,this.index=-1,this.active=0,this.extent=u.apply(le,it)}function je(){if(i.apply(this,arguments)){var le=_e(this,arguments),it=this.__zoom,Mt=Math.max(h,Math.min(f,it.k*Math.pow(2,-M.event.deltaY*(M.event.deltaMode?120:1)/500))),Kt=Rr(this);if(le.wheel)(le.mouse[0][0]!==Kt[0]||le.mouse[0][1]!==Kt[1])&&(le.mouse[1]=it.invert(le.mouse[0]=Kt)),clearTimeout(le.wheel);else{if(it.k===Mt)return;le.mouse=[Kt,it.invert(Kt)],Jr(this),le.start()}Kg(),le.wheel=setTimeout(Yt,150),le.zoom("mouse",Ce(ee(he(it,Mt),le.mouse[0],le.mouse[1]),le.extent))}function Yt(){le.wheel=null,le.end()}}function xt(){if(!V&&i.apply(this,arguments)){var le=_e(this,arguments),it=Ts(M.event.view).on("mousemove.zoom",Qn,!0).on("mouseup.zoom",Mn,!0),Mt=Rr(this),Kt=M.event.clientX,Yt=M.event.clientY;du(M.event.view),Xy(),le.mouse=[Mt,this.__zoom.invert(Mt)],Jr(this),le.start()}function Qn(){if(Kg(),!le.moved){var tr=M.event.clientX-Kt,Xn=M.event.clientY-Yt;le.moved=tr*tr+Xn*Xn>Y}le.zoom("mouse",Ce(ee(le.that.__zoom,le.mouse[0]=Rr(le.that),le.mouse[1]),le.extent))}function Mn(){it.on("mousemove.zoom mouseup.zoom",null),la(M.event.view,le.moved),Kg(),le.end()}}function mt(){if(i.apply(this,arguments)){var le=this.__zoom,it=Rr(this),Mt=le.invert(it),Yt=Ce(ee(he(le,le.k*(M.event.shiftKey?.5:2)),it,Mt),u.apply(this,arguments));Kg(),S>0?Ts(this).transition().duration(S).call(Se,Yt,it):Ts(this).call(J.transform,Yt)}}function Qe(){if(i.apply(this,arguments)){var Mt,Yt,Qn,Mn,le=_e(this,arguments),it=M.event.changedTouches,Kt=it.length;for(Xy(),Yt=0;Yt<Kt;++Yt)Mn=[Mn=Rc(this,it,(Qn=it[Yt]).identifier),this.__zoom.invert(Mn),Qn.identifier],le.touch0?le.touch1||(le.touch1=Mn):(le.touch0=Mn,Mt=!0);if(N&&(N=clearTimeout(N),!le.touch1))return le.end(),void((Mn=Ts(this).on("dblclick.zoom"))&&Mn.apply(this,arguments));Mt&&(N=setTimeout(function(){N=null},H),Jr(this),le.start())}}function Pt(){var Kt,Yt,Qn,Mn,le=_e(this,arguments),it=M.event.changedTouches,Mt=it.length;for(Kg(),N&&(N=clearTimeout(N)),Kt=0;Kt<Mt;++Kt)Qn=Rc(this,it,(Yt=it[Kt]).identifier),le.touch0&&le.touch0[2]===Yt.identifier?le.touch0[0]=Qn:le.touch1&&le.touch1[2]===Yt.identifier&&(le.touch1[0]=Qn);if(Yt=le.that.__zoom,le.touch1){var tr=le.touch0[0],Xn=le.touch0[1],jr=le.touch1[0],Sr=le.touch1[1],cr=(cr=jr[0]-tr[0])*cr+(cr=jr[1]-tr[1])*cr,Bt=(Bt=Sr[0]-Xn[0])*Bt+(Bt=Sr[1]-Xn[1])*Bt;Yt=he(Yt,Math.sqrt(cr/Bt)),Qn=[(tr[0]+jr[0])/2,(tr[1]+jr[1])/2],Mn=[(Xn[0]+Sr[0])/2,(Xn[1]+Sr[1])/2]}else{if(!le.touch0)return;Qn=le.touch0[0],Mn=le.touch0[1]}le.zoom("touch",Ce(ee(Yt,Qn,Mn),le.extent))}function ft(){var Kt,Yt,le=_e(this,arguments),it=M.event.changedTouches,Mt=it.length;for(Xy(),V&&clearTimeout(V),V=setTimeout(function(){V=null},H),Kt=0;Kt<Mt;++Kt)Yt=it[Kt],le.touch0&&le.touch0[2]===Yt.identifier?delete le.touch0:le.touch1&&le.touch1[2]===Yt.identifier&&delete le.touch1;le.touch1&&!le.touch0&&(le.touch0=le.touch1,delete le.touch1),le.touch0?le.touch0[1]=this.__zoom.invert(le.touch0[0]):le.end()}return J.transform=function(le,it){var Mt=le.selection?le.selection():le;Mt.property("__zoom",Ps),le!==Mt?Se(le,it):Mt.interrupt().each(function(){_e(this,arguments).start().zoom(null,"function"==typeof it?it.apply(this,arguments):it).end()})},J.scaleBy=function(le,it){J.scaleTo(le,function(){return this.__zoom.k*("function"==typeof it?it.apply(this,arguments):it)})},J.scaleTo=function(le,it){J.transform(le,function(){var Mt=u.apply(this,arguments),Kt=this.__zoom,Yt=ke(Mt),Qn=Kt.invert(Yt);return Ce(ee(he(Kt,"function"==typeof it?it.apply(this,arguments):it),Yt,Qn),Mt)})},J.translateBy=function(le,it,Mt){J.transform(le,function(){return Ce(this.__zoom.translate("function"==typeof it?it.apply(this,arguments):it,"function"==typeof Mt?Mt.apply(this,arguments):Mt),u.apply(this,arguments))})},ze.prototype={start:function(){return 1==++this.active&&(this.index=O.push(this)-1,this.emit("start")),this},zoom:function(le,it){return this.mouse&&"mouse"!==le&&(this.mouse[1]=it.invert(this.mouse[0])),this.touch0&&"touch"!==le&&(this.touch0[1]=it.invert(this.touch0[0])),this.touch1&&"touch"!==le&&(this.touch1[1]=it.invert(this.touch1[0])),this.that.__zoom=it,this.emit("zoom"),this},end:function(){return 0==--this.active&&(O.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(le){ia(new QI(J,le,this.that.__zoom),U.apply,U,[le,this.that,this.args])}},J.filter=function(le){return arguments.length?(i="function"==typeof le?le:k1(!!le),J):i},J.extent=function(le){return arguments.length?(u="function"==typeof le?le:k1([[+le[0][0],+le[0][1]],[+le[1][0],+le[1][1]]]),J):u},J.scaleExtent=function(le){return arguments.length?(h=+le[0],f=+le[1],J):[h,f]},J.translateExtent=function(le){return arguments.length?(g=+le[0][0],v=+le[1][0],E=+le[0][1],I=+le[1][1],J):[[g,E],[v,I]]},J.duration=function(le){return arguments.length?(S=+le,J):S},J.interpolate=function(le){return arguments.length?(k=le,J):k},J.on=function(){var le=U.on.apply(U,arguments);return le===U?J:le},J.clickDistance=function(le){return arguments.length?(Y=(le=+le)*le,J):Math.sqrt(Y)},J},M.zoomTransform=n0,M.zoomIdentity=Wg,Object.defineProperty(M,"__esModule",{value:!0})}(et)},5867:(jt,et,M)=>{"use strict";M.d(et,{C6:()=>D.getApps,Mq:()=>D.getApp,ZF:()=>D.initializeApp});var D=M(9681);(0,D.registerVersion)("firebase","9.8.4","app")},127:(jt,et,M)=>{"use strict";M.d(et,{Z:()=>D.Z});var D=M(3942);D.Z.registerVersion("firebase","9.8.4","app-compat")},3677:(jt,et,M)=>{"use strict";M.r(et);var D=M(5861),be=M(3942),Q=M(2090),Fe=M(9681),xe=M(655),Ue=M(1877),Be=M(4859);const Ye=function kt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},It=function ot(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new Q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),lt=new Ue.Yd("@firebase/auth");function bt(C,...y){lt.logLevel<=Ue.in.ERROR&&lt.error(`Auth (${Fe.SDK_VERSION}): ${C}`,...y)}function qe(C,...y){throw vt(C,...y)}function We(C,...y){return vt(C,...y)}function Xe(C,y,_){const x=Object.assign(Object.assign({},It()),{[y]:_});return new Q.LL("auth","Firebase",x).create(y,{appName:C.name})}function ut(C,y,_){if(!(y instanceof _))throw _.name!==y.constructor.name&&qe(C,"argument-error"),Xe(C,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vt(C,...y){if("string"!=typeof C){const _=y[0],x=[...y.slice(1)];return x[0]&&(x[0].appName=C.name),C._errorFactory.create(_,...x)}return ge.create(C,...y)}function ce(C,y,..._){if(!C)throw vt(y,..._)}function Ke(C){const y="INTERNAL ASSERTION FAILED: "+C;throw bt(y),new Error(y)}function fe(C,y){C||Ke(y)}const Re=new Map;function De(C){fe(C instanceof Function,"Expected a class definition");let y=Re.get(C);return y?(fe(y instanceof C,"Instance stored in cache mismatched with class"),y):(y=new C,Re.set(C,y),y)}function ht(){var C;return"undefined"!=typeof self&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function qt(){return"http:"===at()||"https:"===at()}function at(){var C;return"undefined"!=typeof self&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class Fn{constructor(y,_){this.shortDelay=y,this.longDelay=_,fe(_>y,"Short delay should be less than long delay!"),this.isMobile=(0,Q.uI)()||(0,Q.b$)()}get(){return function Xt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(qt()||(0,Q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function lr(C,y){fe(C.emulator,"Emulator should always be set here");const{url:_}=C.emulator;return y?`${_}${y.startsWith("/")?y.slice(1):y}`:_}class jn{static initialize(y,_,x){this.fetchImpl=y,_&&(this.headersImpl=_),x&&(this.responseImpl=x)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ke("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ke("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ke("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ar=new Fn(3e4,6e4);function Zn(C,y){return C.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:C.tenantId}):y}function On(C,y,_,x){return Os.apply(this,arguments)}function Os(){return(Os=(0,D.Z)(function*(C,y,_,x,j={}){return gs(C,j,(0,D.Z)(function*(){let Z={},pe={};x&&("GET"===y?pe=x:Z={body:JSON.stringify(x)});const He=(0,Q.xO)(Object.assign({key:C.config.apiKey},pe)).slice(1),St=yield C._getAdditionalHeaders();return St["Content-Type"]="application/json",C.languageCode&&(St["X-Firebase-Locale"]=C.languageCode),jn.fetch()(Fs(C,C.config.apiHost,_,He),Object.assign({method:y,headers:St,referrerPolicy:"no-referrer"},Z))}))})).apply(this,arguments)}function gs(C,y,_){return oi.apply(this,arguments)}function oi(){return(oi=(0,D.Z)(function*(C,y,_){C._canInitEmulator=!1;const x=Object.assign(Object.assign({},Kn),y);try{const j=new ms(C),Z=yield Promise.race([_(),j.promise]);j.clearNetworkTimeout();const pe=yield Z.json();if("needConfirmation"in pe)throw to(C,"account-exists-with-different-credential",pe);if(Z.ok&&!("errorMessage"in pe))return pe;{const He=Z.ok?pe.errorMessage:pe.error.message,[St,zt]=He.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===St)throw to(C,"credential-already-in-use",pe);if("EMAIL_EXISTS"===St)throw to(C,"email-already-in-use",pe);if("USER_DISABLED"===St)throw to(C,"user-disabled",pe);const fn=x[St]||St.toLowerCase().replace(/[_\s]+/g,"-");if(zt)throw Xe(C,fn,zt);qe(C,fn)}}catch(j){if(j instanceof Q.ZR)throw j;qe(C,"network-request-failed")}})).apply(this,arguments)}function di(C,y,_,x){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,D.Z)(function*(C,y,_,x,j={}){const Z=yield On(C,y,_,x,j);return"mfaPendingCredential"in Z&&qe(C,"multi-factor-auth-required",{_serverResponse:Z}),Z})).apply(this,arguments)}function Fs(C,y,_,x){const j=`${y}${_}?${x}`;return C.config.emulator?lr(C.config,j):`${C.config.apiScheme}://${j}`}class ms{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((_,x)=>{this.timer=setTimeout(()=>x(We(this.auth,"network-request-failed")),Ar.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function to(C,y,_){const x={appName:C.name};_.email&&(x.email=_.email),_.phoneNumber&&(x.phoneNumber=_.phoneNumber);const j=We(C,y,x);return j.customData._tokenResponse=_,j}function Us(){return(Us=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function xr(C,y){return Er.apply(this,arguments)}function Er(){return(Er=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Aa(C,y){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function fi(C){if(C)try{const y=new Date(Number(C));if(!isNaN(y.getTime()))return y.toUTCString()}catch(y){}}function ys(){return(ys=(0,D.Z)(function*(C,y=!1){const _=(0,Q.m9)(C),x=yield _.getIdToken(y),j=rn(x);ce(j&&j.exp&&j.auth_time&&j.iat,_.auth,"internal-error");const Z="object"==typeof j.firebase?j.firebase:void 0,pe=null==Z?void 0:Z.sign_in_provider;return{claims:j,token:x,authTime:fi(qn(j.auth_time)),issuedAtTime:fi(qn(j.iat)),expirationTime:fi(qn(j.exp)),signInProvider:pe||null,signInSecondFactor:(null==Z?void 0:Z.sign_in_second_factor)||null}})).apply(this,arguments)}function qn(C){return 1e3*Number(C)}function rn(C){var y;const[_,x,j]=C.split(".");if(void 0===_||void 0===x||void 0===j)return bt("JWT malformed, contained fewer than 3 sections"),null;try{const Z=(0,Q.tV)(x);return Z?JSON.parse(Z):(bt("Failed to decode base64 JWT payload"),null)}catch(Z){return bt("Caught error parsing JWT payload as JSON",null===(y=Z)||void 0===y?void 0:y.toString()),null}}function Ci(C,y){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,D.Z)(function*(C,y,_=!1){if(_)return y;try{return yield y}catch(x){throw x instanceof Q.ZR&&Un(x)&&C.auth.currentUser===C&&(yield C.auth.signOut()),x}})).apply(this,arguments)}function Un({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}class Vs{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var _;if(y){const x=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),x}{this.errorBackoff=3e4;const j=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,j)}}schedule(y=!1){var _=this;if(!this.isRunning)return;const x=this.getInterval(y);this.timerId=setTimeout((0,D.Z)(function*(){yield _.iteration()}),x)}iteration(){var y=this;return(0,D.Z)(function*(){var _;try{yield y.user.getIdToken(!0)}catch(x){return void("auth/network-request-failed"===(null===(_=x)||void 0===_?void 0:_.code)&&y.schedule(!0))}y.schedule()})()}}class Pi{constructor(y,_){this.createdAt=y,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=fi(this.lastLoginAt),this.creationTime=fi(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function pi(C){return sn.apply(this,arguments)}function sn(){return(sn=(0,D.Z)(function*(C){var y;const _=C.auth,x=yield C.getIdToken(),j=yield Ci(C,Aa(_,{idToken:x}));ce(null==j?void 0:j.users.length,_,"internal-error");const Z=j.users[0];C._notifyReloadListener(Z);const pe=(null===(y=Z.providerUserInfo)||void 0===y?void 0:y.length)?Ie(Z.providerUserInfo):[],He=Ee(C.providerData,pe),fn=!!C.isAnonymous&&!(C.email&&Z.passwordHash||(null==He?void 0:He.length)),cn={uid:Z.localId,displayName:Z.displayName||null,photoURL:Z.photoUrl||null,email:Z.email||null,emailVerified:Z.emailVerified||!1,phoneNumber:Z.phoneNumber||null,tenantId:Z.tenantId||null,providerData:He,metadata:new Pi(Z.createdAt,Z.lastLoginAt),isAnonymous:fn};Object.assign(C,cn)})).apply(this,arguments)}function se(){return(se=(0,D.Z)(function*(C){const y=(0,Q.m9)(C);yield pi(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function Ee(C,y){return[...C.filter(x=>!y.some(j=>j.providerId===x.providerId)),...y]}function Ie(C){return C.map(y=>{var{providerId:_}=y,x=(0,xe._T)(y,["providerId"]);return{providerId:_,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}function nt(){return(nt=(0,D.Z)(function*(C,y){const _=yield gs(C,{},(0,D.Z)(function*(){const x=(0,Q.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:j,apiKey:Z}=C.config,pe=Fs(C,j,"/v1/token",`key=${Z}`),He=yield C._getAdditionalHeaders();return He["Content-Type"]="application/x-www-form-urlencoded",jn.fetch()(pe,{method:"POST",headers:He,body:x})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Ct{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){ce(y.idToken,"internal-error"),ce(void 0!==y.idToken,"internal-error"),ce(void 0!==y.refreshToken,"internal-error");const _="expiresIn"in y&&void 0!==y.expiresIn?Number(y.expiresIn):function mn(C){const y=rn(C);return ce(y,"internal-error"),ce(void 0!==y.exp,"internal-error"),ce(void 0!==y.iat,"internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,_)}getToken(y,_=!1){var x=this;return(0,D.Z)(function*(){return ce(!x.accessToken||x.refreshToken,y,"user-token-expired"),_||!x.accessToken||x.isExpired?x.refreshToken?(yield x.refresh(y,x.refreshToken),x.accessToken):null:x.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,_){var x=this;return(0,D.Z)(function*(){const{accessToken:j,refreshToken:Z,expiresIn:pe}=yield function ne(C,y){return nt.apply(this,arguments)}(y,_);x.updateTokensAndExpiration(j,Z,Number(pe))})()}updateTokensAndExpiration(y,_,x){this.refreshToken=_||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*x}static fromJSON(y,_){const{refreshToken:x,accessToken:j,expirationTime:Z}=_,pe=new Ct;return x&&(ce("string"==typeof x,"internal-error",{appName:y}),pe.refreshToken=x),j&&(ce("string"==typeof j,"internal-error",{appName:y}),pe.accessToken=j),Z&&(ce("number"==typeof Z,"internal-error",{appName:y}),pe.expirationTime=Z),pe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new Ct,this.toJSON())}_performRefresh(){return Ke("not implemented")}}function Ht(C,y){ce("string"==typeof C||void 0===C,"internal-error",{appName:y})}class Dn{constructor(y){var{uid:_,auth:x,stsTokenManager:j}=y,Z=(0,xe._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=x,this.stsTokenManager=j,this.accessToken=j.accessToken,this.displayName=Z.displayName||null,this.email=Z.email||null,this.emailVerified=Z.emailVerified||!1,this.phoneNumber=Z.phoneNumber||null,this.photoURL=Z.photoURL||null,this.isAnonymous=Z.isAnonymous||!1,this.tenantId=Z.tenantId||null,this.providerData=Z.providerData?[...Z.providerData]:[],this.metadata=new Pi(Z.createdAt||void 0,Z.lastLoginAt||void 0)}getIdToken(y){var _=this;return(0,D.Z)(function*(){const x=yield Ci(_,_.stsTokenManager.getToken(_.auth,y));return ce(x,_.auth,"internal-error"),_.accessToken!==x&&(_.accessToken=x,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),x})()}getIdTokenResult(y){return function no(C){return ys.apply(this,arguments)}(this,y)}reload(){return function ve(C){return se.apply(this,arguments)}(this)}_assign(y){this!==y&&(ce(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(_=>Object.assign({},_)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){return new Dn(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(y){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,_=!1){var x=this;return(0,D.Z)(function*(){let j=!1;y.idToken&&y.idToken!==x.stsTokenManager.accessToken&&(x.stsTokenManager.updateFromServerResponse(y),j=!0),_&&(yield pi(x)),yield x.auth._persistUserIfCurrent(x),j&&x.auth._notifyListenersIfCurrent(x)})()}delete(){var y=this;return(0,D.Z)(function*(){const _=yield y.getIdToken();return yield Ci(y,function pn(C,y){return Us.apply(this,arguments)}(y.auth,{idToken:_})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,_){var x,j,Z,pe,He,St,zt,fn;const cn=null!==(x=_.displayName)&&void 0!==x?x:void 0,ei=null!==(j=_.email)&&void 0!==j?j:void 0,Po=null!==(Z=_.phoneNumber)&&void 0!==Z?Z:void 0,Mh=null!==(pe=_.photoURL)&&void 0!==pe?pe:void 0,bm=null!==(He=_.tenantId)&&void 0!==He?He:void 0,Ev=null!==(St=_._redirectEventId)&&void 0!==St?St:void 0,_i=null!==(zt=_.createdAt)&&void 0!==zt?zt:void 0,wa=null!==(fn=_.lastLoginAt)&&void 0!==fn?fn:void 0,{uid:Mp,emailVerified:Em,isAnonymous:Ws,providerData:Im,stsTokenManager:Cm}=_;ce(Mp&&Cm,y,"internal-error");const Tm=Ct.fromJSON(this.name,Cm);ce("string"==typeof Mp,y,"internal-error"),Ht(cn,y.name),Ht(ei,y.name),ce("boolean"==typeof Em,y,"internal-error"),ce("boolean"==typeof Ws,y,"internal-error"),Ht(Po,y.name),Ht(Mh,y.name),Ht(bm,y.name),Ht(Ev,y.name),Ht(_i,y.name),Ht(wa,y.name);const ji=new Dn({uid:Mp,auth:y,email:ei,emailVerified:Em,displayName:cn,isAnonymous:Ws,photoURL:Mh,phoneNumber:Po,tenantId:bm,stsTokenManager:Tm,createdAt:_i,lastLoginAt:wa});return Im&&Array.isArray(Im)&&(ji.providerData=Im.map(Rh=>Object.assign({},Rh))),Ev&&(ji._redirectEventId=Ev),ji}static _fromIdTokenResponse(y,_,x=!1){return(0,D.Z)(function*(){const j=new Ct;j.updateFromServerResponse(_);const Z=new Dn({uid:_.localId,auth:y,stsTokenManager:j,isAnonymous:x});return yield pi(Z),Z})()}}const ar=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.Z)(function*(){return!0})()}_set(_,x){var j=this;return(0,D.Z)(function*(){j.storage[_]=x})()}_get(_){var x=this;return(0,D.Z)(function*(){const j=x.storage[_];return void 0===j?null:j})()}_remove(_){var x=this;return(0,D.Z)(function*(){delete x.storage[_]})()}_addListener(_,x){}_removeListener(_,x){}}return C.type="NONE",C})();function Bn(C,y,_){return`firebase:${C}:${y}:${_}`}class Zr{constructor(y,_,x){this.persistence=y,this.auth=_,this.userKey=x;const{config:j,name:Z}=this.auth;this.fullUserKey=Bn(this.userKey,j.apiKey,Z),this.fullPersistenceKey=Bn("persistence",j.apiKey,Z),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,D.Z)(function*(){const _=yield y.persistence._get(y.fullUserKey);return _?Dn._fromJSON(y.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var _=this;return(0,D.Z)(function*(){if(_.persistence===y)return;const x=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=y,x?_.setCurrentUser(x):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,_,x="authUser"){return(0,D.Z)(function*(){if(!_.length)return new Zr(De(ar),y,x);const j=(yield Promise.all(_.map(function(){var zt=(0,D.Z)(function*(fn){if(yield fn._isAvailable())return fn});return function(fn){return zt.apply(this,arguments)}}()))).filter(zt=>zt);let Z=j[0]||De(ar);const pe=Bn(x,y.config.apiKey,y.name);let He=null;for(const zt of _)try{const fn=yield zt._get(pe);if(fn){const cn=Dn._fromJSON(y,fn);zt!==Z&&(He=cn),Z=zt;break}}catch(fn){}const St=j.filter(zt=>zt._shouldAllowMigration);return Z._shouldAllowMigration&&St.length?(Z=St[0],He&&(yield Z._set(pe,He.toJSON())),yield Promise.all(_.map(function(){var zt=(0,D.Z)(function*(fn){if(fn!==Z)try{yield fn._remove(pe)}catch(cn){}});return function(fn){return zt.apply(this,arguments)}}())),new Zr(Z,y,x)):new Zr(Z,y,x)})()}}function xa(C){const y=C.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if($r(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(Ma(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(jo(y))return"Blackberry";if(kr(y))return"Webos";if(ia(y))return"Safari";if((y.includes("chrome/")||Ra(y))&&!y.includes("edge/"))return"Chrome";if(Rr(y))return"Android";{const x=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==x?void 0:x.length))return x[1]}return"Other"}function Ma(C=(0,Q.z$)()){return/firefox\//i.test(C)}function ia(C=(0,Q.z$)()){const y=C.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function Ra(C=(0,Q.z$)()){return/crios\//i.test(C)}function $r(C=(0,Q.z$)()){return/iemobile/i.test(C)}function Rr(C=(0,Q.z$)()){return/android/i.test(C)}function jo(C=(0,Q.z$)()){return/blackberry/i.test(C)}function kr(C=(0,Q.z$)()){return/webos/i.test(C)}function vs(C=(0,Q.z$)()){return/iphone|ipad|ipod/i.test(C)}function sa(C=(0,Q.z$)()){return vs(C)||Rr(C)||kr(C)||jo(C)||/windows phone/i.test(C)||$r(C)}function au(C,y=[]){let _;switch(C){case"Browser":_=xa((0,Q.z$)());break;case"Worker":_=`${xa((0,Q.z$)())}-${C}`;break;default:_=C}const x=y.length?y.join(","):"FirebaseCore-web";return`${_}/JsCore/${Fe.SDK_VERSION}/${x}`}class ai{constructor(y){this.auth=y,this.queue=[]}pushCallback(y,_){const x=Z=>new Promise((pe,He)=>{try{pe(y(Z))}catch(St){He(St)}});x.onAbort=_,this.queue.push(x);const j=this.queue.length-1;return()=>{this.queue[j]=()=>Promise.resolve()}}runMiddleware(y){var _=this;return(0,D.Z)(function*(){var x;if(_.auth.currentUser===y)return;const j=[];try{for(const Z of _.queue)yield Z(y),Z.onAbort&&j.push(Z.onAbort)}catch(Z){j.reverse();for(const pe of j)try{pe()}catch(He){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(x=Z)||void 0===x?void 0:x.message})}})()}}class Tt{constructor(y,_,x){this.app=y,this.heartbeatServiceProvider=_,this.config=x,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hr(this),this.idTokenSubscription=new hr(this),this.beforeStateQueue=new ai(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=x.sdkClientVersion}_initializeWithPersistence(y,_){var x=this;return _&&(this._popupRedirectResolver=De(_)),this._initializationPromise=this.queue((0,D.Z)(function*(){var j,Z;if(!x._deleted&&(x.persistenceManager=yield Zr.create(x,y),!x._deleted)){if(null===(j=x._popupRedirectResolver)||void 0===j?void 0:j._shouldInitProactively)try{yield x._popupRedirectResolver._initialize(x)}catch(pe){}yield x.initializeCurrentUser(_),x.lastNotifiedUid=(null===(Z=x.currentUser)||void 0===Z?void 0:Z.uid)||null,!x._deleted&&(x._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,D.Z)(function*(){if(y._deleted)return;const _=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||_){if(y.currentUser&&_&&y.currentUser.uid===_.uid)return y._currentUser._assign(_),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(_,!0)}})()}initializeCurrentUser(y){var _=this;return(0,D.Z)(function*(){var x;const j=yield _.assertedPersistence.getCurrentUser();let Z=j,pe=!1;if(y&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const He=null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId,St=null==Z?void 0:Z._redirectEventId,zt=yield _.tryRedirectSignIn(y);(!He||He===St)&&(null==zt?void 0:zt.user)&&(Z=zt.user,pe=!0)}if(!Z)return _.directlySetCurrentUser(null);if(!Z._redirectEventId){if(pe)try{yield _.beforeStateQueue.runMiddleware(Z)}catch(He){Z=j,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(He))}return Z?_.reloadAndSetCurrentUserOrClear(Z):_.directlySetCurrentUser(null)}return ce(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===Z._redirectEventId?_.directlySetCurrentUser(Z):_.reloadAndSetCurrentUserOrClear(Z)})()}tryRedirectSignIn(y){var _=this;return(0,D.Z)(function*(){let x=null;try{x=yield _._popupRedirectResolver._completeRedirectFn(_,y,!0)}catch(j){yield _._setRedirectUser(null)}return x})()}reloadAndSetCurrentUserOrClear(y){var _=this;return(0,D.Z)(function*(){var x;try{yield pi(y)}catch(j){if("auth/network-request-failed"!==(null===(x=j)||void 0===x?void 0:x.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function _t(){if("undefined"==typeof navigator)return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var y=this;return(0,D.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var _=this;return(0,D.Z)(function*(){const x=y?(0,Q.m9)(y):null;return x&&ce(x.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(x&&x._clone(_))})()}_updateCurrentUser(y,_=!1){var x=this;return(0,D.Z)(function*(){if(!x._deleted)return y&&ce(x.tenantId===y.tenantId,x,"tenant-id-mismatch"),_||(yield x.beforeStateQueue.runMiddleware(y)),x.queue((0,D.Z)(function*(){yield x.directlySetCurrentUser(y),x.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,D.Z)(function*(){return yield y.beforeStateQueue.runMiddleware(null),(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null,!0)})()}setPersistence(y){var _=this;return this.queue((0,D.Z)(function*(){yield _.assertedPersistence.setPersistence(De(y))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new Q.LL("auth","Firebase",y())}onAuthStateChanged(y,_,x){return this.registerStateListener(this.authStateSubscription,y,_,x)}beforeAuthStateChanged(y,_){return this.beforeStateQueue.pushCallback(y,_)}onIdTokenChanged(y,_,x){return this.registerStateListener(this.idTokenSubscription,y,_,x)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,_){var x=this;return(0,D.Z)(function*(){const j=yield x.getOrInitRedirectPersistenceManager(_);return null===y?j.removeCurrentUser():j.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var _=this;return(0,D.Z)(function*(){if(!_.redirectPersistenceManager){const x=y&&De(y)||_._popupRedirectResolver;ce(x,_,"argument-error"),_.redirectPersistenceManager=yield Zr.create(_,[De(x._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(y){var _=this;return(0,D.Z)(function*(){var x,j;return _._isInitialized&&(yield _.queue((0,D.Z)(function*(){}))),(null===(x=_._currentUser)||void 0===x?void 0:x._redirectEventId)===y?_._currentUser:(null===(j=_.redirectUser)||void 0===j?void 0:j._redirectEventId)===y?_.redirectUser:null})()}_persistUserIfCurrent(y){var _=this;return(0,D.Z)(function*(){if(y===_.currentUser)return _.queue((0,D.Z)(function*(){return _.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=null!==(_=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,_,x,j){if(this._deleted)return()=>{};const Z="function"==typeof _?_:_.next.bind(_),pe=this._isInitialized?Promise.resolve():this._initializationPromise;return ce(pe,this,"internal-error"),pe.then(()=>Z(this.currentUser)),"function"==typeof _?y.addObserver(_,x,j):y.addObserver(_)}directlySetCurrentUser(y){var _=this;return(0,D.Z)(function*(){_.currentUser&&_.currentUser!==y&&(_._currentUser._stopProactiveRefresh(),y&&_.isProactiveRefreshEnabled&&y._startProactiveRefresh()),_.currentUser=y,y?yield _.assertedPersistence.setCurrentUser(y):yield _.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=au(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var y=this;return(0,D.Z)(function*(){var _;const x={"X-Client-Version":y.clientVersion};y.app.options.appId&&(x["X-Firebase-gmpid"]=y.app.options.appId);const j=yield null===(_=y.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return j&&(x["X-Firebase-Client"]=j),x})()}}function on(C){return(0,Q.m9)(C)}class hr{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,Q.ne)(_=>this.observer=_)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function _o(C){const y=C.indexOf(":");return y<0?"":C.substr(0,y+1)}function wo(C){if(!C)return null;const y=Number(C);return isNaN(y)?null:y}class me{constructor(y,_){this.providerId=y,this.signInMethod=_}toJSON(){return Ke("not implemented")}_getIdTokenResponse(y){return Ke("not implemented")}_linkToIdToken(y,_){return Ke("not implemented")}_getReauthenticationResolver(y){return Ke("not implemented")}}function tt(C,y){return Je.apply(this,arguments)}function Je(){return(Je=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:resetPassword",Zn(C,y))})).apply(this,arguments)}function Dt(C,y){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function un(C,y){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:update",Zn(C,y))})).apply(this,arguments)}function yn(){return(yn=(0,D.Z)(function*(C,y){return di(C,"POST","/v1/accounts:signInWithPassword",Zn(C,y))})).apply(this,arguments)}function Ln(C,y){return pr.apply(this,arguments)}function pr(){return(pr=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:sendOobCode",Zn(C,y))})).apply(this,arguments)}function $n(C,y){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,D.Z)(function*(C,y){return Ln(C,y)})).apply(this,arguments)}function oa(C,y){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,D.Z)(function*(C,y){return Ln(C,y)})).apply(this,arguments)}function ws(C,y){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,D.Z)(function*(C,y){return Ln(C,y)})).apply(this,arguments)}function uu(C,y){return bs.apply(this,arguments)}function bs(){return(bs=(0,D.Z)(function*(C,y){return Ln(C,y)})).apply(this,arguments)}function bo(){return(bo=(0,D.Z)(function*(C,y){return di(C,"POST","/v1/accounts:signInWithEmailLink",Zn(C,y))})).apply(this,arguments)}function Wf(){return(Wf=(0,D.Z)(function*(C,y){return di(C,"POST","/v1/accounts:signInWithEmailLink",Zn(C,y))})).apply(this,arguments)}class Es extends me{constructor(y,_,x,j=null){super("password",x),this._email=y,this._password=_,this._tenantId=j}static _fromEmailAndPassword(y,_){return new Es(y,_,"password")}static _fromEmailAndCode(y,_,x=null){return new Es(y,_,"emailLink",x)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const _="string"==typeof y?JSON.parse(y):y;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(y){var _=this;return(0,D.Z)(function*(){switch(_.signInMethod){case"password":return function Vt(C,y){return yn.apply(this,arguments)}(y,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function ro(C,y){return bo.apply(this,arguments)}(y,{email:_._email,oobCode:_._password});default:qe(y,"internal-error")}})()}_linkToIdToken(y,_){var x=this;return(0,D.Z)(function*(){switch(x.signInMethod){case"password":return Dt(y,{idToken:_,returnSecureToken:!0,email:x._email,password:x._password});case"emailLink":return function qf(C,y){return Wf.apply(this,arguments)}(y,{idToken:_,email:x._email,oobCode:x._password});default:qe(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function cu(C,y){return wd.apply(this,arguments)}function wd(){return(wd=(0,D.Z)(function*(C,y){return di(C,"POST","/v1/accounts:signInWithIdp",Zn(C,y))})).apply(this,arguments)}class aa extends me{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const _=new aa(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(_.idToken=y.idToken),y.accessToken&&(_.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(_.nonce=y.nonce),y.pendingToken&&(_.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(_.accessToken=y.oauthToken,_.secret=y.oauthTokenSecret):qe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const _="string"==typeof y?JSON.parse(y):y,{providerId:x,signInMethod:j}=_,Z=(0,xe._T)(_,["providerId","signInMethod"]);if(!x||!j)return null;const pe=new aa(x,j);return pe.idToken=Z.idToken||void 0,pe.accessToken=Z.accessToken||void 0,pe.secret=Z.secret,pe.nonce=Z.nonce,pe.pendingToken=Z.pendingToken||null,pe}_getIdTokenResponse(y){return cu(y,this.buildRequest())}_linkToIdToken(y,_){const x=this.buildRequest();return x.idToken=_,cu(y,x)}_getReauthenticationResolver(y){const _=this.buildRequest();return _.autoCreate=!1,cu(y,_)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),y.postBody=(0,Q.xO)(_)}return y}}function em(C,y){return bd.apply(this,arguments)}function bd(){return(bd=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:sendVerificationCode",Zn(C,y))})).apply(this,arguments)}function lu(){return(lu=(0,D.Z)(function*(C,y){return di(C,"POST","/v1/accounts:signInWithPhoneNumber",Zn(C,y))})).apply(this,arguments)}function Zf(){return(Zf=(0,D.Z)(function*(C,y){const _=yield di(C,"POST","/v1/accounts:signInWithPhoneNumber",Zn(C,y));if(_.temporaryProof)throw to(C,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const iv={USER_NOT_FOUND:"user-not-found"};function Yf(){return(Yf=(0,D.Z)(function*(C,y){return di(C,"POST","/v1/accounts:signInWithPhoneNumber",Zn(C,Object.assign(Object.assign({},y),{operation:"REAUTH"})),iv)})).apply(this,arguments)}class Dc extends me{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,_){return new Dc({verificationId:y,verificationCode:_})}static _fromTokenResponse(y,_){return new Dc({phoneNumber:y,temporaryProof:_})}_getIdTokenResponse(y){return function Ed(C,y){return lu.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,_){return function rv(C,y){return Zf.apply(this,arguments)}(y,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function sv(C,y){return Yf.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:_,verificationId:x,verificationCode:j}=this.params;return y&&_?{temporaryProof:y,phoneNumber:_}:{sessionInfo:x,code:j}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:_,verificationCode:x,phoneNumber:j,temporaryProof:Z}=y;return x||_||j||Z?new Dc({verificationId:_,verificationCode:x,phoneNumber:j,temporaryProof:Z}):null}}class nh{constructor(y){var _,x,j,Z,pe,He;const St=(0,Q.zd)((0,Q.pd)(y)),zt=null!==(_=St.apiKey)&&void 0!==_?_:null,fn=null!==(x=St.oobCode)&&void 0!==x?x:null,cn=function tm(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(j=St.mode)&&void 0!==j?j:null);ce(zt&&fn&&cn,"argument-error"),this.apiKey=zt,this.operation=cn,this.code=fn,this.continueUrl=null!==(Z=St.continueUrl)&&void 0!==Z?Z:null,this.languageCode=null!==(pe=St.languageCode)&&void 0!==pe?pe:null,this.tenantId=null!==(He=St.tenantId)&&void 0!==He?He:null}static parseLink(y){const _=function Il(C){const y=(0,Q.zd)((0,Q.pd)(C)).link,_=y?(0,Q.zd)((0,Q.pd)(y)).deep_link_id:null,x=(0,Q.zd)((0,Q.pd)(C)).deep_link_id;return(x?(0,Q.zd)((0,Q.pd)(x)).link:null)||x||_||y||C}(y);try{return new nh(_)}catch(x){return null}}}let Xf=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(_,x){return Es._fromEmailAndPassword(_,x)}static credentialWithLink(_,x){const j=nh.parseLink(x);return ce(j,"argument-error"),Es._fromEmailAndCode(_,j.code,j.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class Is{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class Ku extends Is{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class ua extends Ku{static credentialFromJSON(y){const _="string"==typeof y?JSON.parse(y):y;return ce("providerId"in _&&"signInMethod"in _,"argument-error"),aa._fromParams(_)}credential(y){return this._credential(Object.assign(Object.assign({},y),{nonce:y.rawNonce}))}_credential(y){return ce(y.idToken||y.accessToken,"argument-error"),aa._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return ua.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return ua.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:_,oauthAccessToken:x,oauthTokenSecret:j,pendingToken:Z,nonce:pe,providerId:He}=y;if(!x&&!j&&!_&&!Z||!He)return null;try{return new ua(He)._credential({idToken:_,accessToken:x,nonce:pe,pendingToken:Z})}catch(St){return null}}}let Sc=(()=>{class C extends Ku{constructor(){super("facebook.com")}static credential(_){return aa._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return C.credential(_.oauthAccessToken)}catch(x){return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),Jf=(()=>{class C extends Ku{constructor(){super("google.com"),this.addScope("profile")}static credential(_,x){return aa._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:x})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:x,oauthAccessToken:j}=_;if(!x&&!j)return null;try{return C.credential(x,j)}catch(Z){return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),nm=(()=>{class C extends Ku{constructor(){super("github.com")}static credential(_){return aa._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return C.credential(_.oauthAccessToken)}catch(x){return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class Zu extends me{constructor(y,_){super(y,y),this.pendingToken=_}_getIdTokenResponse(y){return cu(y,this.buildRequest())}_linkToIdToken(y,_){const x=this.buildRequest();return x.idToken=_,cu(y,x)}_getReauthenticationResolver(y){const _=this.buildRequest();return _.autoCreate=!1,cu(y,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const _="string"==typeof y?JSON.parse(y):y,{providerId:x,signInMethod:j,pendingToken:Z}=_;return x&&j&&Z&&x===j?new Zu(x,Z):null}static _create(y,_){return new Zu(y,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Cs extends Is{constructor(y){ce(y.startsWith("saml."),"argument-error"),super(y)}static credentialFromResult(y){return Cs.samlCredentialFromTaggedObject(y)}static credentialFromError(y){return Cs.samlCredentialFromTaggedObject(y.customData||{})}static credentialFromJSON(y){const _=Zu.fromJSON(y);return ce(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{pendingToken:_,providerId:x}=y;if(!_||!x)return null;try{return Zu._create(x,_)}catch(j){return null}}}let tp=(()=>{class C extends Ku{constructor(){super("twitter.com")}static credential(_,x){return aa._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:x})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:x,oauthTokenSecret:j}=_;if(!x||!j)return null;try{return C.credential(x,j)}catch(Z){return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function js(C,y){return xc.apply(this,arguments)}function xc(){return(xc=(0,D.Z)(function*(C,y){return di(C,"POST","/v1/accounts:signUp",Zn(C,y))})).apply(this,arguments)}class $s{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,_,x,j=!1){return(0,D.Z)(function*(){const Z=yield Dn._fromIdTokenResponse(y,x,j),pe=Oi(x);return new $s({user:Z,providerId:pe,_tokenResponse:x,operationType:_})})()}static _forOperation(y,_,x){return(0,D.Z)(function*(){yield y._updateTokensIfNecessary(x,!0);const j=Oi(x);return new $s({user:y,providerId:j,_tokenResponse:x,operationType:_})})()}}function Oi(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function Ts(){return(Ts=(0,D.Z)(function*(C){var y;const _=on(C);if(yield _._initializationPromise,null===(y=_.currentUser)||void 0===y?void 0:y.isAnonymous)return new $s({user:_.currentUser,providerId:null,operationType:"signIn"});const x=yield js(_,{returnSecureToken:!0}),j=yield $s._fromIdTokenResponse(_,"signIn",x,!0);return yield _._updateCurrentUser(j.user),j})).apply(this,arguments)}class Mc extends Q.ZR{constructor(y,_,x,j){var Z;super(_.code,_.message),this.operationType=x,this.user=j,Object.setPrototypeOf(this,Mc.prototype),this.customData={appName:y.name,tenantId:null!==(Z=y.tenantId)&&void 0!==Z?Z:void 0,_serverResponse:_.customData._serverResponse,operationType:x}}static _fromErrorAndOperation(y,_,x,j){return new Mc(y,_,x,j)}}function Rc(C,y,_,x){return("reauthenticate"===y?_._getReauthenticationResolver(C):_._getIdTokenResponse(C)).catch(Z=>{throw"auth/multi-factor-auth-required"===Z.code?Mc._fromErrorAndOperation(C,Z,y,x):Z})}function ca(C){return new Set(C.map(({providerId:y})=>y).filter(y=>!!y))}function Jn(){return(Jn=(0,D.Z)(function*(C,y){const _=(0,Q.m9)(C);yield rr(!0,_,y);const{providerUserInfo:x}=yield xr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[y]}),j=ca(x||[]);return _.providerData=_.providerData.filter(Z=>j.has(Z.providerId)),j.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function du(C,y){return la.apply(this,arguments)}function la(){return(la=(0,D.Z)(function*(C,y,_=!1){const x=yield Ci(C,y._linkToIdToken(C.auth,yield C.getIdToken()),_);return $s._forOperation(C,"link",x)})).apply(this,arguments)}function rr(C,y,_){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,D.Z)(function*(C,y,_){yield pi(y);const j=!1===C?"provider-already-linked":"no-such-provider";ce(ca(y.providerData).has(_)===C,y.auth,j)})).apply(this,arguments)}function rh(C,y){return fu.apply(this,arguments)}function fu(){return(fu=(0,D.Z)(function*(C,y,_=!1){var x;const{auth:j}=C,Z="reauthenticate";try{const pe=yield Ci(C,Rc(j,Z,y,C),_);ce(pe.idToken,j,"internal-error");const He=rn(pe.idToken);ce(He,j,"internal-error");const{sub:St}=He;return ce(C.uid===St,j,"user-mismatch"),$s._forOperation(C,Z,pe)}catch(pe){throw"auth/user-not-found"===(null===(x=pe)||void 0===x?void 0:x.code)&&qe(j,"user-mismatch"),pe}})).apply(this,arguments)}function Yi(C,y){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,D.Z)(function*(C,y,_=!1){const x="signIn",j=yield Rc(C,x,y),Z=yield $s._fromIdTokenResponse(C,x,j);return _||(yield C._updateCurrentUser(Z.user)),Z})).apply(this,arguments)}function gr(C,y){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,D.Z)(function*(C,y){return Yi(on(C),y)})).apply(this,arguments)}function Pr(C,y){return io.apply(this,arguments)}function io(){return(io=(0,D.Z)(function*(C,y){const _=(0,Q.m9)(C);return yield rr(!1,_,y.providerId),du(_,y)})).apply(this,arguments)}function zs(C,y){return ha.apply(this,arguments)}function ha(){return(ha=(0,D.Z)(function*(C,y){return rh((0,Q.m9)(C),y)})).apply(this,arguments)}function Ds(C,y){return mi.apply(this,arguments)}function mi(){return(mi=(0,D.Z)(function*(C,y){return di(C,"POST","/v1/accounts:signInWithCustomToken",Zn(C,y))})).apply(this,arguments)}function wn(){return(wn=(0,D.Z)(function*(C,y){const _=on(C),x=yield Ds(_,{token:y,returnSecureToken:!0}),j=yield $s._fromIdTokenResponse(_,"signIn",x);return yield _._updateCurrentUser(j.user),j})).apply(this,arguments)}class pu{constructor(y,_){this.factorId=y,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(y,_){return"phoneInfo"in _?Td._fromServerResponse(y,_):qe(y,"internal-error")}}class Td extends pu{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,_){return new Td(_)}}function Cl(C,y,_){var x;ce((null===(x=_.url)||void 0===x?void 0:x.length)>0,C,"invalid-continue-uri"),ce(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),y.continueUrl=_.url,y.dynamicLinkDomain=_.dynamicLinkDomain,y.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ce(_.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),y.iOSBundleId=_.iOS.bundleId),_.android&&(ce(_.android.packageName.length>0,C,"missing-android-pkg-name"),y.androidInstallApp=_.android.installApp,y.androidMinimumVersionCode=_.android.minimumVersion,y.androidPackageName=_.android.packageName)}function ih(){return(ih=(0,D.Z)(function*(C,y,_){const x=(0,Q.m9)(C),j={requestType:"PASSWORD_RESET",email:y};_&&Cl(x,j,_),yield oa(x,j)})).apply(this,arguments)}function oh(){return(oh=(0,D.Z)(function*(C,y,_){yield tt((0,Q.m9)(C),{oobCode:y,newPassword:_})})).apply(this,arguments)}function ct(){return(ct=(0,D.Z)(function*(C,y){yield un((0,Q.m9)(C),{oobCode:y})})).apply(this,arguments)}function Wn(C,y){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,D.Z)(function*(C,y){const _=(0,Q.m9)(C),x=yield tt(_,{oobCode:y}),j=x.requestType;switch(ce(j,_,"internal-error"),j){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ce(x.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ce(x.mfaInfo,_,"internal-error");default:ce(x.email,_,"internal-error")}let Z=null;return x.mfaInfo&&(Z=pu._fromServerResponse(on(_),x.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.newEmail:x.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.email:x.newEmail)||null,multiFactorInfo:Z},operation:j}})).apply(this,arguments)}function ui(){return(ui=(0,D.Z)(function*(C,y){const{data:_}=yield Wn((0,Q.m9)(C),y);return _.email})).apply(this,arguments)}function Eo(){return(Eo=(0,D.Z)(function*(C,y,_){const x=on(C),j=yield js(x,{returnSecureToken:!0,email:y,password:_}),Z=yield $s._fromIdTokenResponse(x,"signIn",j);return yield x._updateCurrentUser(Z.user),Z})).apply(this,arguments)}function Tl(){return(Tl=(0,D.Z)(function*(C,y,_){const x=(0,Q.m9)(C),j={requestType:"EMAIL_SIGNIN",email:y};ce(_.handleCodeInApp,x,"argument-error"),_&&Cl(x,j,_),yield ws(x,j)})).apply(this,arguments)}function Co(){return(Co=(0,D.Z)(function*(C,y,_){const x=(0,Q.m9)(C),j=Xf.credentialWithLink(y,_||ht());return ce(j._tenantId===(x.tenantId||null),x,"tenant-id-mismatch"),gr(x,j)})).apply(this,arguments)}function Qi(C,y){return oo.apply(this,arguments)}function oo(){return(oo=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:createAuthUri",Zn(C,y))})).apply(this,arguments)}function ka(){return(ka=(0,D.Z)(function*(C,y){const x={identifier:y,continueUri:qt()?ht():"http://localhost"},{signinMethods:j}=yield Qi((0,Q.m9)(C),x);return j||[]})).apply(this,arguments)}function ah(){return(ah=(0,D.Z)(function*(C,y){const _=(0,Q.m9)(C),j={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};y&&Cl(_.auth,j,y);const{email:Z}=yield $n(_.auth,j);Z!==C.email&&(yield C.reload())})).apply(this,arguments)}function Pc(){return(Pc=(0,D.Z)(function*(C,y,_){const x=(0,Q.m9)(C),Z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:y};_&&Cl(x.auth,Z,_);const{email:pe}=yield uu(x.auth,Z);pe!==C.email&&(yield C.reload())})).apply(this,arguments)}function Oc(C,y){return ao.apply(this,arguments)}function ao(){return(ao=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Fc(){return(Fc=(0,D.Z)(function*(C,{displayName:y,photoURL:_}){if(void 0===y&&void 0===_)return;const x=(0,Q.m9)(C),Z={idToken:yield x.getIdToken(),displayName:y,photoUrl:_,returnSecureToken:!0},pe=yield Ci(x,Oc(x.auth,Z));x.displayName=pe.displayName||null,x.photoURL=pe.photoUrl||null;const He=x.providerData.find(({providerId:St})=>"password"===St);He&&(He.displayName=x.displayName,He.photoURL=x.photoURL),yield x._updateTokensIfNecessary(pe)})).apply(this,arguments)}function hh(C,y,_){return da.apply(this,arguments)}function da(){return(da=(0,D.Z)(function*(C,y,_){const{auth:x}=C,Z={idToken:yield C.getIdToken(),returnSecureToken:!0};y&&(Z.email=y),_&&(Z.password=_);const pe=yield Ci(C,Dt(x,Z));yield C._updateTokensIfNecessary(pe,!0)})).apply(this,arguments)}class Xu{constructor(y,_,x={}){this.isNewUser=y,this.providerId=_,this.profile=x}}class dh extends Xu{constructor(y,_,x,j){super(y,_,x),this.username=j}}class Uc extends Xu{constructor(y,_){super(y,"facebook.com",_)}}class Ji extends dh{constructor(y,_){super(y,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Sl extends Xu{constructor(y,_){super(y,"google.com",_)}}class fh extends dh{constructor(y,_,x){super(y,"twitter.com",_,x)}}function Ti(C){const{user:y,_tokenResponse:_}=C;return y.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Na(C){var y,_;if(!C)return null;const{providerId:x}=C,j=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},Z=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!x&&(null==C?void 0:C.idToken)){const pe=null===(_=null===(y=rn(C.idToken))||void 0===y?void 0:y.firebase)||void 0===_?void 0:_.sign_in_provider;if(pe)return new Xu(Z,"anonymous"!==pe&&"custom"!==pe?pe:null)}if(!x)return null;switch(x){case"facebook.com":return new Uc(Z,j);case"github.com":return new Ji(Z,j);case"google.com":return new Sl(Z,j);case"twitter.com":return new fh(Z,j,C.screenName||null);case"custom":case"anonymous":return new Xu(Z,null);default:return new Xu(Z,x,j)}}(_)}class Pa{constructor(y,_){this.type=y,this.credential=_}static _fromIdtoken(y){return new Pa("enroll",y)}static _fromMfaPendingCredential(y){return new Pa("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var _,x;if(null==y?void 0:y.multiFactorSession){if(null===(_=y.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Pa._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null===(x=y.multiFactorSession)||void 0===x?void 0:x.idToken)return Pa._fromIdtoken(y.multiFactorSession.idToken)}return null}}class Oa{constructor(y,_,x){this.session=y,this.hints=_,this.signInResolver=x}static _fromError(y,_){const x=on(y),j=_.customData._serverResponse,Z=(j.mfaInfo||[]).map(He=>pu._fromServerResponse(x,He));ce(j.mfaPendingCredential,x,"internal-error");const pe=Pa._fromMfaPendingCredential(j.mfaPendingCredential);return new Oa(pe,Z,function(){var He=(0,D.Z)(function*(St){const zt=yield St._process(x,pe);delete j.mfaInfo,delete j.mfaPendingCredential;const fn=Object.assign(Object.assign({},j),{idToken:zt.idToken,refreshToken:zt.refreshToken});switch(_.operationType){case"signIn":const cn=yield $s._fromIdTokenResponse(x,_.operationType,fn);return yield x._updateCurrentUser(cn.user),cn;case"reauthenticate":return ce(_.user,x,"internal-error"),$s._forOperation(_.user,_.operationType,fn);default:qe(x,"internal-error")}});return function(St){return He.apply(this,arguments)}}())}resolveSignIn(y){var _=this;return(0,D.Z)(function*(){return _.signInResolver(y)})()}}function vi(C,y){return On(C,"POST","/v2/accounts/mfaEnrollment:start",Zn(C,y))}class Vc{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(x=>pu._fromServerResponse(y.auth,x)))})}static _fromUser(y){return new Vc(y)}getSession(){var y=this;return(0,D.Z)(function*(){return Pa._fromIdtoken(yield y.user.getIdToken())})()}enroll(y,_){var x=this;return(0,D.Z)(function*(){const j=y,Z=yield x.getSession(),pe=yield Ci(x.user,j._process(x.user.auth,Z,_));return yield x.user._updateTokensIfNecessary(pe),x.user.reload()})()}unenroll(y){var _=this;return(0,D.Z)(function*(){var x;const j="string"==typeof y?y:y.uid,Z=yield _.user.getIdToken(),pe=yield Ci(_.user,function yu(C,y){return On(C,"POST","/v2/accounts/mfaEnrollment:withdraw",Zn(C,y))}(_.user.auth,{idToken:Z,mfaEnrollmentId:j}));_.enrolledFactors=_.enrolledFactors.filter(({uid:He})=>He!==j),yield _.user._updateTokensIfNecessary(pe);try{yield _.user.reload()}catch(He){if("auth/user-token-expired"!==(null===(x=He)||void 0===x?void 0:x.code))throw He}})()}}const mh=new WeakMap,fa="__sak";class es{constructor(y,_){this.storageRetriever=y,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(fa,"1"),this.storage.removeItem(fa),Promise.resolve(!0)):Promise.resolve(!1)}catch(y){return Promise.resolve(!1)}}_set(y,_){return this.storage.setItem(y,JSON.stringify(_)),Promise.resolve()}_get(y){const _=this.storage.getItem(y);return Promise.resolve(_?JSON.parse(_):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}get storage(){return this.storageRetriever()}}const Gs=(()=>{class C extends es{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,x)=>this.onStorageEvent(_,x),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function am(){const C=(0,Q.z$)();return ia(C)||vs(C)}()&&function gi(){try{return!(!window||window===window.top)}catch(C){return!1}}(),this.fallbackToPolling=sa(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const x of Object.keys(this.listeners)){const j=this.storage.getItem(x),Z=this.localCache[x];j!==Z&&_(x,Z,j)}}onStorageEvent(_,x=!1){if(!_.key)return void this.forAllChangedKeys((He,St,zt)=>{this.notifyListeners(He,zt)});const j=_.key;if(x?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const He=this.storage.getItem(j);if(_.newValue!==He)null!==_.newValue?this.storage.setItem(j,_.newValue):this.storage.removeItem(j);else if(this.localCache[j]===_.newValue&&!x)return}const Z=()=>{const He=this.storage.getItem(j);!x&&this.localCache[j]===He||this.notifyListeners(j,He)},pe=this.storage.getItem(j);!function ou(){return(0,Q.w1)()&&10===document.documentMode}()||pe===_.newValue||_.newValue===_.oldValue?Z():setTimeout(Z,10)}notifyListeners(_,x){this.localCache[_]=x;const j=this.listeners[_];if(j)for(const Z of Array.from(j))Z(x&&JSON.parse(x))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,x,j)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:x,newValue:j}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,x){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(x)}_removeListener(_,x){this.listeners[_]&&(this.listeners[_].delete(x),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,x){var j=()=>super._set,Z=this;return(0,D.Z)(function*(){yield j().call(Z,_,x),Z.localCache[_]=JSON.stringify(x)})()}_get(_){var x=()=>super._get,j=this;return(0,D.Z)(function*(){const Z=yield x().call(j,_);return j.localCache[_]=JSON.stringify(Z),Z})()}_remove(_){var x=()=>super._remove,j=this;return(0,D.Z)(function*(){yield x().call(j,_),delete j.localCache[_]})()}}return C.type="LOCAL",C})(),Hr=(()=>{class C extends es{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,x){}_removeListener(_,x){}}return C.type="SESSION",C})();let xd=(()=>{class C{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const x=this.receivers.find(Z=>Z.isListeningto(_));if(x)return x;const j=new C(_);return this.receivers.push(j),j}isListeningto(_){return this.eventTarget===_}handleEvent(_){var x=this;return(0,D.Z)(function*(){const j=_,{eventId:Z,eventType:pe,data:He}=j.data,St=x.handlersMap[pe];if(!(null==St?void 0:St.size))return;j.ports[0].postMessage({status:"ack",eventId:Z,eventType:pe});const zt=Array.from(St).map(function(){var cn=(0,D.Z)(function*(ei){return ei(j.origin,He)});return function(ei){return cn.apply(this,arguments)}}()),fn=yield function $c(C){return Promise.all(C.map(function(){var y=(0,D.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(x){return{fulfilled:!1,reason:x}}});return function(_){return y.apply(this,arguments)}}()))}(zt);j.ports[0].postMessage({status:"done",eventId:Z,eventType:pe,response:fn})})()}_subscribe(_,x){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(x)}_unsubscribe(_,x){this.handlersMap[_]&&x&&this.handlersMap[_].delete(x),(!x||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function vu(C="",y=10){let _="";for(let x=0;x<y;x++)_+=Math.floor(10*Math.random());return C+_}class La{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,_,x=50){var j=this;return(0,D.Z)(function*(){const Z="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!Z)throw new Error("connection_unavailable");let pe,He;return new Promise((St,zt)=>{const fn=vu("",20);Z.port1.start();const cn=setTimeout(()=>{zt(new Error("unsupported_event"))},x);He={messageChannel:Z,onMessage(ei){const Po=ei;if(Po.data.eventId===fn)switch(Po.data.status){case"ack":clearTimeout(cn),pe=setTimeout(()=>{zt(new Error("timeout"))},3e3);break;case"done":clearTimeout(pe),St(Po.data.response);break;default:clearTimeout(cn),clearTimeout(pe),zt(new Error("invalid_response"))}}},j.handlers.add(He),Z.port1.addEventListener("message",He.onMessage),j.target.postMessage({eventType:y,eventId:fn,data:_},[Z.port2])}).finally(()=>{He&&j.removeMessageHandler(He)})})()}}function Lr(){return window}function Ho(){return void 0!==Lr().WorkerGlobalScope&&"function"==typeof Lr().importScripts}function rp(){return(rp=(0,D.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(C){return null}})).apply(this,arguments)}const Rd="firebaseLocalStorageDb",Do="firebaseLocalStorage",_u="fbase_key";class wu{constructor(y){this.request=y}toPromise(){return new Promise((y,_)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function ns(C,y){return C.transaction([Do],y?"readwrite":"readonly").objectStore(Do)}function Ju(){const C=indexedDB.open(Rd,1);return new Promise((y,_)=>{C.addEventListener("error",()=>{_(C.error)}),C.addEventListener("upgradeneeded",()=>{const x=C.result;try{x.createObjectStore(Do,{keyPath:_u})}catch(j){_(j)}}),C.addEventListener("success",(0,D.Z)(function*(){const x=C.result;x.objectStoreNames.contains(Do)?y(x):(x.close(),yield function bu(){const C=indexedDB.deleteDatabase(Rd);return new wu(C).toPromise()}(),y(yield Ju()))}))})}function Hc(C,y,_){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,D.Z)(function*(C,y,_){const x=ns(C,!0).put({[_u]:y,value:_});return new wu(x).toPromise()})).apply(this,arguments)}function Eu(){return(Eu=(0,D.Z)(function*(C,y){const _=ns(C,!1).get(y),x=yield new wu(_).toPromise();return void 0===x?null:x.value})).apply(this,arguments)}function zc(C,y){const _=ns(C,!0).delete(y);return new wu(_).toPromise()}const tc=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,D.Z)(function*(){return _.db||(_.db=yield Ju()),_.db})()}_withRetries(_){var x=this;return(0,D.Z)(function*(){let j=0;for(;;)try{const Z=yield x._openDb();return yield _(Z)}catch(Z){if(j++>3)throw Z;x.db&&(x.db.close(),x.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,D.Z)(function*(){return Ho()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,D.Z)(function*(){_.receiver=xd._getInstance(function Md(){return Ho()?self:null}()),_.receiver._subscribe("keyChanged",function(){var x=(0,D.Z)(function*(j,Z){return{keyProcessed:(yield _._poll()).includes(Z.key)}});return function(j,Z){return x.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var x=(0,D.Z)(function*(j,Z){return["keyChanged"]});return function(j,Z){return x.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,D.Z)(function*(){var x,j;if(_.activeServiceWorker=yield function En(){return rp.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new La(_.activeServiceWorker);const Z=yield _.sender._send("ping",{},800);!Z||(null===(x=Z[0])||void 0===x?void 0:x.fulfilled)&&(null===(j=Z[0])||void 0===j?void 0:j.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var x=this;return(0,D.Z)(function*(){if(x.sender&&x.activeServiceWorker&&function ip(){var C;return(null===(C=null==navigator?void 0:navigator.serviceWorker)||void 0===C?void 0:C.controller)||null}()===x.activeServiceWorker)try{yield x.sender._send("keyChanged",{key:_},x.serviceWorkerReceiverAvailable?800:50)}catch(j){}})()}_isAvailable(){return(0,D.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Ju();return yield Hc(_,fa,"1"),yield zc(_,fa),!0}catch(_){}return!1})()}_withPendingWrite(_){var x=this;return(0,D.Z)(function*(){x.pendingWrites++;try{yield _()}finally{x.pendingWrites--}})()}_set(_,x){var j=this;return(0,D.Z)(function*(){return j._withPendingWrite((0,D.Z)(function*(){return yield j._withRetries(Z=>Hc(Z,_,x)),j.localCache[_]=x,j.notifyServiceWorker(_)}))})()}_get(_){var x=this;return(0,D.Z)(function*(){const j=yield x._withRetries(Z=>function ec(C,y){return Eu.apply(this,arguments)}(Z,_));return x.localCache[_]=j,j})()}_remove(_){var x=this;return(0,D.Z)(function*(){return x._withPendingWrite((0,D.Z)(function*(){return yield x._withRetries(j=>zc(j,_)),delete x.localCache[_],x.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,D.Z)(function*(){const x=yield _._withRetries(pe=>{const He=ns(pe,!1).getAll();return new wu(He).toPromise()});if(!x)return[];if(0!==_.pendingWrites)return[];const j=[],Z=new Set;for(const{fbase_key:pe,value:He}of x)Z.add(pe),JSON.stringify(_.localCache[pe])!==JSON.stringify(He)&&(_.notifyListeners(pe,He),j.push(pe));for(const pe of Object.keys(_.localCache))_.localCache[pe]&&!Z.has(pe)&&(_.notifyListeners(pe,null),j.push(pe));return j})()}notifyListeners(_,x){this.localCache[_]=x;const j=this.listeners[_];if(j)for(const Z of Array.from(j))Z(x)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,D.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,x){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(x)}_removeListener(_,x){this.listeners[_]&&(this.listeners[_].delete(x),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})();function Li(C,y){return On(C,"POST","/v2/accounts/mfaSignIn:start",Zn(C,y))}function Fi(){return(Fi=(0,D.Z)(function*(C){return(yield On(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Go(C){return new Promise((y,_)=>{const x=document.createElement("script");x.setAttribute("src",C),x.onload=y,x.onerror=j=>{const Z=We("internal-error");Z.customData=j,_(Z)},x.type="text/javascript",x.charset="UTF-8",function So(){var C,y;return null!==(y=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==y?y:document}().appendChild(x)})}function co(C){return`__${C}${Math.floor(1e6*Math.random())}`}const Ss=1e12;class Qr{constructor(y){this.auth=y,this.counter=Ss,this._widgets=new Map}render(y,_){const x=this.counter;return this._widgets.set(x,new Si(y,this.auth.name,_||{})),this.counter++,x}reset(y){var _;const x=y||Ss;null===(_=this._widgets.get(x))||void 0===_||_.delete(),this._widgets.delete(x)}getResponse(y){var _;return(null===(_=this._widgets.get(y||Ss))||void 0===_?void 0:_.getResponse())||""}execute(y){var _=this;return(0,D.Z)(function*(){var x;return null===(x=_._widgets.get(y||Ss))||void 0===x||x.execute(),""})()}}class Si{constructor(y,_,x){this.params=x,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const j="string"==typeof y?document.getElementById(y):y;ce(j,"argument-error",{appName:_}),this.container=j,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function qc(C){const y=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let x=0;x<C;x++)y.push(_.charAt(Math.floor(Math.random()*_.length)));return y.join("")}(50);const{callback:y,"expired-callback":_}=this.params;if(y)try{y(this.responseToken)}catch(x){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(x){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Al=co("rcb"),zr=new Fn(3e4,6e4);class h0{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Lr().grecaptcha}load(y,_=""){return ce(function ga(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(_),y,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Lr().grecaptcha):new Promise((x,j)=>{const Z=Lr().setTimeout(()=>{j(We(y,"network-request-failed"))},zr.get());Lr()[Al]=()=>{Lr().clearTimeout(Z),delete Lr()[Al];const He=Lr().grecaptcha;if(!He)return void j(We(y,"internal-error"));const St=He.render;He.render=(zt,fn)=>{const cn=St(zt,fn);return this.counter++,cn},this.hostLanguage=_,x(He)},Go(`https://www.google.com/recaptcha/api.js??${(0,Q.xO)({onload:Al,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(Z),j(We(y,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){return!!Lr().grecaptcha&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class rs{load(y){return(0,D.Z)(function*(){return new Qr(y)})()}clearedOneInstance(){}}const Nd="recaptcha",Ba={theme:"light",type:"image"};class op{constructor(y,_=Object.assign({},Ba),x){this.parameters=_,this.type=Nd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=on(x),this.isInvisible="invisible"===this.parameters.size,ce("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const j="string"==typeof y?document.getElementById(y):y;ce(j,this.auth,"argument-error"),this.container=j,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new rs:new h0,this.validateStartingState()}verify(){var y=this;return(0,D.Z)(function*(){y.assertNotDestroyed();const _=yield y.render(),x=y.getAssertedRecaptcha();return x.getResponse(_)||new Promise(Z=>{const pe=He=>{!He||(y.tokenChangeListeners.delete(pe),Z(He))};y.tokenChangeListeners.add(pe),y.isInvisible&&x.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){ce(!this.parameters.sitekey,this.auth,"argument-error"),ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ce("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return _=>{if(this.tokenChangeListeners.forEach(x=>x(_)),"function"==typeof y)y(_);else if("string"==typeof y){const x=Lr()[y];"function"==typeof x&&x(_)}}}assertNotDestroyed(){ce(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,D.Z)(function*(){if(yield y.init(),!y.widgetId){let _=y.container;if(!y.isInvisible){const x=document.createElement("div");_.appendChild(x),_=x}y.widgetId=y.getAssertedRecaptcha().render(_,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,D.Z)(function*(){ce(qt()&&!Ho(),y.auth,"internal-error"),yield function Va(){let C=null;return new Promise(y=>{"complete"!==document.readyState?(C=()=>y(),window.addEventListener("load",C)):y()}).catch(y=>{throw C&&window.removeEventListener("load",C),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const _=yield function zo(C){return Fi.apply(this,arguments)}(y.auth);ce(_,y.auth,"internal-error"),y.parameters.sitekey=_})()}getAssertedRecaptcha(){return ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class xl{constructor(y,_){this.verificationId=y,this.onConfirmation=_}confirm(y){const _=Dc._fromVerification(this.verificationId,y);return this.onConfirmation(_)}}function Ml(){return(Ml=(0,D.Z)(function*(C,y,_){const x=on(C),j=yield Ui(x,y,(0,Q.m9)(_));return new xl(j,Z=>gr(x,Z))})).apply(this,arguments)}function ap(){return(ap=(0,D.Z)(function*(C,y,_){const x=(0,Q.m9)(C);yield rr(!1,x,"phone");const j=yield Ui(x.auth,y,(0,Q.m9)(_));return new xl(j,Z=>Pr(x,Z))})).apply(this,arguments)}function is(){return(is=(0,D.Z)(function*(C,y,_){const x=(0,Q.m9)(C),j=yield Ui(x.auth,y,(0,Q.m9)(_));return new xl(j,Z=>zs(x,Z))})).apply(this,arguments)}function Ui(C,y,_){return nc.apply(this,arguments)}function nc(){return(nc=(0,D.Z)(function*(C,y,_){var x;const j=yield _.verify();try{let Z;if(ce("string"==typeof j,C,"argument-error"),ce(_.type===Nd,C,"argument-error"),Z="string"==typeof y?{phoneNumber:y}:y,"session"in Z){const pe=Z.session;if("phoneNumber"in Z)return ce("enroll"===pe.type,C,"internal-error"),(yield vi(C,{idToken:pe.credential,phoneEnrollmentInfo:{phoneNumber:Z.phoneNumber,recaptchaToken:j}})).phoneSessionInfo.sessionInfo;{ce("signin"===pe.type,C,"internal-error");const He=(null===(x=Z.multiFactorHint)||void 0===x?void 0:x.uid)||Z.multiFactorUid;return ce(He,C,"missing-multi-factor-info"),(yield Li(C,{mfaPendingCredential:pe.credential,mfaEnrollmentId:He,phoneSignInInfo:{recaptchaToken:j}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:pe}=yield em(C,{phoneNumber:Z.phoneNumber,recaptchaToken:j});return pe}}finally{_._reset()}})).apply(this,arguments)}function Wo(){return(Wo=(0,D.Z)(function*(C,y){yield du((0,Q.m9)(C),y)})).apply(this,arguments)}let Ko=(()=>{class C{constructor(_){this.providerId=C.PROVIDER_ID,this.auth=on(_)}verifyPhoneNumber(_,x){return Ui(this.auth,_,(0,Q.m9)(x))}static credential(_,x){return Dc._fromVerification(_,x)}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:x,temporaryProof:j}=_;return x&&j?Dc._fromTokenResponse(x,j):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function Ao(C,y){return y?De(y):(ce(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class Iu extends me{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return cu(y,this._buildIdpRequest())}_linkToIdToken(y,_){return cu(y,this._buildIdpRequest(_))}_getReauthenticationResolver(y){return cu(y,this._buildIdpRequest())}_buildIdpRequest(y){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(_.idToken=y),_}}function xn(C){return Yi(C.auth,new Iu(C),C.bypassAuthState)}function ma(C){const{auth:y,user:_}=C;return ce(_,y,"internal-error"),rh(_,new Iu(C),C.bypassAuthState)}function Kc(C){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,D.Z)(function*(C){const{auth:y,user:_}=C;return ce(_,y,"internal-error"),du(_,new Iu(C),C.bypassAuthState)})).apply(this,arguments)}class Rl{constructor(y,_,x,j,Z=!1){this.auth=y,this.resolver=x,this.user=j,this.bypassAuthState=Z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var y=this;return new Promise(function(){var _=(0,D.Z)(function*(x,j){y.pendingPromise={resolve:x,reject:j};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(Z){y.reject(Z)}});return function(x,j){return _.apply(this,arguments)}}())}onAuthEvent(y){var _=this;return(0,D.Z)(function*(){const{urlResponse:x,sessionId:j,postBody:Z,tenantId:pe,error:He,type:St}=y;if(He)return void _.reject(He);const zt={auth:_.auth,requestUri:x,sessionId:j,tenantId:pe||void 0,postBody:Z||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(St)(zt))}catch(fn){_.reject(fn)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return xn;case"linkViaPopup":case"linkViaRedirect":return Kc;case"reauthViaPopup":case"reauthViaRedirect":return ma;default:qe(this.auth,"internal-error")}}resolve(y){fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zc=new Fn(2e3,1e4);function ja(){return(ja=(0,D.Z)(function*(C,y,_){const x=on(C);ut(C,y,Is);const j=Ao(x,_);return new lp(x,"signInViaPopup",y,j).executeNotNull()})).apply(this,arguments)}function kl(){return(kl=(0,D.Z)(function*(C,y,_){const x=(0,Q.m9)(C);ut(x.auth,y,Is);const j=Ao(x.auth,_);return new lp(x.auth,"reauthViaPopup",y,j,x).executeNotNull()})).apply(this,arguments)}function ya(){return(ya=(0,D.Z)(function*(C,y,_){const x=(0,Q.m9)(C);ut(x.auth,y,Is);const j=Ao(x.auth,_);return new lp(x.auth,"linkViaPopup",y,j,x).executeNotNull()})).apply(this,arguments)}let lp=(()=>{class C extends Rl{constructor(_,x,j,Z,pe){super(_,x,Z,pe),this.provider=j,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var _=this;return(0,D.Z)(function*(){const x=yield _.execute();return ce(x,_.auth,"internal-error"),x})()}onExecution(){var _=this;return(0,D.Z)(function*(){fe(1===_.filter.length,"Popup operations only handle one event");const x=vu();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],x),_.authWindow.associatedEvent=x,_.resolver._originValidation(_.auth).catch(j=>{_.reject(j)}),_.resolver._isIframeWebStorageSupported(_.auth,j=>{j||_.reject(We(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(We(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const _=()=>{var x,j;this.pollId=(null===(j=null===(x=this.authWindow)||void 0===x?void 0:x.window)||void 0===j?void 0:j.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(We(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Zc.get())};_()}}return C.currentPopupAction=null,C})();const As=new Map;class Pd extends Rl{constructor(y,_,x=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,x),this.eventId=null}execute(){var y=()=>super.execute,_=this;return(0,D.Z)(function*(){let x=As.get(_.auth._key());if(!x){try{const Z=(yield function um(C,y){return Cu.apply(this,arguments)}(_.resolver,_.auth))?yield y().call(_):null;x=()=>Promise.resolve(Z)}catch(j){x=()=>Promise.reject(j)}As.set(_.auth._key(),x)}return _.bypassAuthState||As.set(_.auth._key(),()=>Promise.resolve(null)),x()})()}onAuthEvent(y){var _=()=>super.onAuthEvent,x=this;return(0,D.Z)(function*(){if("signInViaRedirect"===y.type)return _().call(x,y);if("unknown"!==y.type){if(y.eventId){const j=yield x.auth._redirectUserForId(y.eventId);if(j)return x.user=j,_().call(x,y);x.resolve(null)}}else x.resolve(null)})()}onExecution(){return(0,D.Z)(function*(){})()}cleanUp(){}}function Cu(){return(Cu=(0,D.Z)(function*(C,y){const _=re(y),x=W(C);if(!(yield x._isAvailable()))return!1;const j="true"===(yield x._get(_));return yield x._remove(_),j})).apply(this,arguments)}function Yc(C,y){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,D.Z)(function*(C,y){return W(C)._set(re(y),"true")})).apply(this,arguments)}function B(C,y){As.set(C._key(),y)}function W(C){return De(C._redirectPersistence)}function re(C){return Bn("pendingRedirect",C.config.apiKey,C.name)}function $e(){return($e=(0,D.Z)(function*(C,y,_){const x=on(C);ut(C,y,Is);const j=Ao(x,_);return yield Yc(j,x),j._openRedirect(x,y,"signInViaRedirect")})).apply(this,arguments)}function vn(){return(vn=(0,D.Z)(function*(C,y,_){const x=(0,Q.m9)(C);ut(x.auth,y,Is);const j=Ao(x.auth,_);yield Yc(j,x.auth);const Z=yield Ha(x);return j._openRedirect(x.auth,y,"reauthViaRedirect",Z)})).apply(this,arguments)}function Fr(){return(Fr=(0,D.Z)(function*(C,y,_){const x=(0,Q.m9)(C);ut(x.auth,y,Is);const j=Ao(x.auth,_);yield rr(!1,x,y.providerId),yield Yc(j,x.auth);const Z=yield Ha(x);return j._openRedirect(x.auth,y,"linkViaRedirect",Z)})).apply(this,arguments)}function $a(){return($a=(0,D.Z)(function*(C,y){return yield on(C)._initializationPromise,xo(C,y,!1)})).apply(this,arguments)}function xo(C,y){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,D.Z)(function*(C,y,_=!1){const x=on(C),j=Ao(x,y),pe=yield new Pd(x,j,_).execute();return pe&&!_&&(delete pe.user._redirectEventId,yield x._persistUserIfCurrent(pe.user),yield x._setRedirectUser(null,y)),pe})).apply(this,arguments)}function Ha(C){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,D.Z)(function*(C){const y=vu(`${C.uid}:::`);return C._redirectEventId=y,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),y})).apply(this,arguments)}class Yo{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let _=!1;return this.consumers.forEach(x=>{this.isEventForConsumer(y,x)&&(_=!0,this.sendToConsumer(y,x),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function hp(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xc(C);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=y,_=!0)),_}sendToConsumer(y,_){var x;if(y.error&&!Xc(y)){const j=(null===(x=y.error.code)||void 0===x?void 0:x.split("auth/")[1])||"internal-error";_.onError(We(this.auth,j))}else _.onAuthEvent(y)}isEventForConsumer(y,_){const x=null===_.eventId||!!y.eventId&&y.eventId===_.eventId;return _.filter.includes(y.type)&&x}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(za(y))}saveEventToCache(y){this.cachedEventUids.add(za(y)),this.lastProcessedEventTime=Date.now()}}function za(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(y=>y).join("-")}function Xc({type:C,error:y}){return"unknown"===C&&"auth/no-auth-event"===(null==y?void 0:y.code)}function cm(C){return lm.apply(this,arguments)}function lm(){return(lm=(0,D.Z)(function*(C,y={}){return On(C,"GET","/v1/projects",y)})).apply(this,arguments)}const dp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vh=/^https?/;function hm(){return(hm=(0,D.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:y}=yield cm(C);for(const _ of y)try{if(jb(_))return}catch(x){}qe(C,"unauthorized-domain")})).apply(this,arguments)}function jb(C){const y=ht(),{protocol:_,hostname:x}=new URL(y);if(C.startsWith("chrome-extension://")){const pe=new URL(C);return""===pe.hostname&&""===x?"chrome-extension:"===_&&C.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===_&&pe.hostname===x}if(!vh.test(_))return!1;if(dp.test(C))return x===C;const j=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+j+"|"+j+")$","i").test(x)}const Ga=new Fn(3e4,6e4);function fp(){const C=Lr().___jsl;if(null==C?void 0:C.H)for(const y of Object.keys(C.H))if(C.H[y].r=C.H[y].r||[],C.H[y].L=C.H[y].L||[],C.H[y].r=[...C.H[y].L],C.CP)for(let _=0;_<C.CP.length;_++)C.CP[_]=null}let qa=null;function ic(C){return qa=qa||function dm(C){return new Promise((y,_)=>{var x,j,Z;function pe(){fp(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{fp(),_(We(C,"network-request-failed"))},timeout:Ga.get()})}if(null===(j=null===(x=Lr().gapi)||void 0===x?void 0:x.iframes)||void 0===j?void 0:j.Iframe)y(gapi.iframes.getContext());else{if(!(null===(Z=Lr().gapi)||void 0===Z?void 0:Z.load)){const He=co("iframefcb");return Lr()[He]=()=>{gapi.load?pe():_(We(C,"network-request-failed"))},Go(`https://apis.google.com/js/api.js?onload=${He}`).catch(St=>_(St))}pe()}}).catch(y=>{throw qa=null,y})}(C),qa}const _h=new Fn(5e3,15e3),wh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pp(C){const y=C.config;ce(y.authDomain,C,"auth-domain-config-required");const _=y.emulator?lr(y,"emulator/auth/iframe"):`https://${C.config.authDomain}/__/auth/iframe`,x={apiKey:y.apiKey,appName:C.name,v:Fe.SDK_VERSION},j=bh.get(C.config.apiHost);j&&(x.eid=j);const Z=C._getFrameworks();return Z.length&&(x.fw=Z.join(",")),`${_}?${(0,Q.xO)(x).slice(1)}`}function sc(){return sc=(0,D.Z)(function*(C){const y=yield ic(C),_=Lr().gapi;return ce(_,C,"internal-error"),y.open({where:document.body,url:pp(C),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wh,dontclear:!0},x=>new Promise(function(){var j=(0,D.Z)(function*(Z,pe){yield x.restyle({setHideOnLeave:!1});const He=We(C,"network-request-failed"),St=Lr().setTimeout(()=>{pe(He)},_h.get());function zt(){Lr().clearTimeout(St),Z(x)}x.ping(zt).then(zt,()=>{pe(He)})});return function(Z,pe){return j.apply(this,arguments)}}()))}),sc.apply(this,arguments)}const gp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class uv{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(y){}}}function Qo(C,y,_,x,j,Z){ce(C.config.authDomain,C,"auth-domain-config-required"),ce(C.config.apiKey,C,"invalid-api-key");const pe={apiKey:C.config.apiKey,appName:C.name,authType:_,redirectUrl:x,v:Fe.SDK_VERSION,eventId:j};if(y instanceof Is){y.setDefaultLanguage(C.languageCode),pe.providerId=y.providerId||"",(0,Q.xb)(y.getCustomParameters())||(pe.customParameters=JSON.stringify(y.getCustomParameters()));for(const[St,zt]of Object.entries(Z||{}))pe[St]=zt}if(y instanceof Ku){const St=y.getScopes().filter(zt=>""!==zt);St.length>0&&(pe.scopes=St.join(","))}C.tenantId&&(pe.tid=C.tenantId);const He=pe;for(const St of Object.keys(He))void 0===He[St]&&delete He[St];return`${function oc({config:C}){return C.emulator?lr(C,"emulator/auth/handler"):`https://${C.authDomain}/__/auth/handler`}(C)}?${(0,Q.xO)(He).slice(1)}`}const Ih="webStorageSupport";class vp extends class $b{constructor(y){this.factorId=y}_process(y,_,x){switch(_.type){case"enroll":return this._finalizeEnroll(y,_.credential,x);case"signin":return this._finalizeSignIn(y,_.credential);default:return Ke("unexpected MultiFactorSessionType")}}}{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new vp(y)}_finalizeEnroll(y,_,x){return function gh(C,y){return On(C,"POST","/v2/accounts/mfaEnrollment:finalize",Zn(C,y))}(y,{idToken:_,displayName:x,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,_){return function kd(C,y){return On(C,"POST","/v2/accounts/mfaSignIn:finalize",Zn(C,y))}(y,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Hb=(()=>{class C{constructor(){}static assertion(_){return vp._fromCredential(_)}}return C.FACTOR_ID="phone",C})();var pm="@firebase/auth";class dv{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var _=this;return(0,D.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const _=this.auth.onIdTokenChanged(x=>{var j;y((null===(j=x)||void 0===j?void 0:j.stsTokenManager.accessToken)||null)});this.internalListeners.set(y,_),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const _=this.internalListeners.get(y);!_||(this.internalListeners.delete(y),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Wa(){return window}function va(){return(va=(0,D.Z)(function*(C,y,_){var x;const{BuildInfo:j}=Wa();fe(y.sessionId,"AuthEvent did not contain a session ID");const Z=yield g0(y.sessionId),pe={};return vs()?pe.ibi=j.packageName:Rr()?pe.apn=j.packageName:qe(C,"operation-not-supported-in-this-environment"),j.displayName&&(pe.appDisplayName=j.displayName),pe.sessionId=Z,Qo(C,_,y.type,void 0,null!==(x=y.eventId)&&void 0!==x?x:void 0,pe)})).apply(this,arguments)}function Hd(){return(Hd=(0,D.Z)(function*(C){const{BuildInfo:y}=Wa(),_={};vs()?_.iosBundleId=y.packageName:Rr()?_.androidPackageName=y.packageName:qe(C,"operation-not-supported-in-this-environment"),yield cm(C,_)})).apply(this,arguments)}function bp(){return(bp=(0,D.Z)(function*(C,y,_){const{cordova:x}=Wa();let j=()=>{};try{yield new Promise((Z,pe)=>{let He=null;function St(){var cn;Z();const ei=null===(cn=x.plugins.browsertab)||void 0===cn?void 0:cn.close;"function"==typeof ei&&ei(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function zt(){He||(He=window.setTimeout(()=>{pe(We(C,"redirect-cancelled-by-user"))},2e3))}function fn(){"visible"===(null==document?void 0:document.visibilityState)&&zt()}y.addPassiveListener(St),document.addEventListener("resume",zt,!1),Rr()&&document.addEventListener("visibilitychange",fn,!1),j=()=>{y.removePassiveListener(St),document.removeEventListener("resume",zt,!1),document.removeEventListener("visibilitychange",fn,!1),He&&window.clearTimeout(He)}})}finally{j()}})).apply(this,arguments)}function g0(C){return zd.apply(this,arguments)}function zd(){return(zd=(0,D.Z)(function*(C){const y=Gd(C),_=yield crypto.subtle.digest("SHA-256",y);return Array.from(new Uint8Array(_)).map(j=>j.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Gd(C){if(fe(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(C);const y=new ArrayBuffer(C.length),_=new Uint8Array(y);for(let x=0;x<C.length;x++)_[x]=C.charCodeAt(x);return _}!function wp(C){(0,Fe._registerComponent)(new Be.wA("auth",(y,{options:_})=>{const x=y.getProvider("app").getImmediate(),j=y.getProvider("heartbeat"),{apiKey:Z,authDomain:pe}=x.options;return((He,St)=>{ce(Z&&!Z.includes(":"),"invalid-api-key",{appName:He.name}),ce(!(null==pe?void 0:pe.includes(":")),"argument-error",{appName:He.name});const zt={apiKey:Z,authDomain:pe,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:au(C)},fn=new Tt(He,St,zt);return function Ne(C,y){const _=(null==y?void 0:y.persistence)||[],x=(Array.isArray(_)?_:[_]).map(De);(null==y?void 0:y.errorMap)&&C._updateErrorMap(y.errorMap),C._initializeWithPersistence(x,null==y?void 0:y.popupRedirectResolver)}(fn,_),fn})(x,j)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,_,x)=>{y.getProvider("auth-internal").initialize()})),(0,Fe._registerComponent)(new Be.wA("auth-internal",y=>{const _=on(y.getProvider("auth").getImmediate());return new dv(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Fe.registerVersion)(pm,"0.20.4",function _p(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,Fe.registerVersion)(pm,"0.20.4","esm2017")}("Browser");class Ep extends Yo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(y=>{this.resolveInialized=y})}addPassiveListener(y){this.passiveListeners.add(y)}removePassiveListener(y){this.passiveListeners.delete(y)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(y){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(y)),super.onEvent(y)}initialized(){var y=this;return(0,D.Z)(function*(){yield y.initPromise})()}}function Pl(C){return qd.apply(this,arguments)}function qd(){return(qd=(0,D.Z)(function*(C){const y=yield Th()._get(Jc(C));return y&&(yield Th()._remove(Jc(C))),y})).apply(this,arguments)}function Wd(){const C=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const x=Math.floor(Math.random()*y.length);C.push(y.charAt(x))}return C.join("")}function Th(){return De(Gs)}function Jc(C){return Bn("authEvent",C.config.apiKey,C.name)}function ss(C){if(!(null==C?void 0:C.includes("?")))return{};const[y,..._]=C.split("?");return(0,Q.zd)(_.join("?"))}function el(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:We("no-auth-event")}}function tl(){var C;return(null===(C=null==self?void 0:self.location)||void 0===C?void 0:C.protocol)||null}function Cp(C=(0,Q.z$)()){return!("file:"!==tl()&&"ionic:"!==tl()&&"capacitor:"!==tl()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function ym(){try{const C=self.localStorage,y=vu();if(C)return C.setItem(y,"1"),C.removeItem(y),!function Tp(C=(0,Q.z$)()){return function Sh(){return(0,Q.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Bi(C=(0,Q.z$)()){return/Edge\/\d+/.test(C)}(C)}()||(0,Q.hl)()}catch(C){return Ah()&&(0,Q.hl)()}return!1}function Ah(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vi(){return(function mv(){return"http:"===tl()||"https:"===tl()}()||(0,Q.ru)()||Cp())&&!function Zd(){return(0,Q.b$)()||(0,Q.UG)()}()&&ym()&&!Ah()}function Ol(){return Cp()&&"undefined"!=typeof document}function nl(){return(nl=(0,D.Z)(function*(){return!!Ol()&&new Promise(C=>{const y=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(y),C(!0)})})})).apply(this,arguments)}const qs={LOCAL:"local",NONE:"none",SESSION:"session"},rl=ce,vm="persistence";function uc(C){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,D.Z)(function*(C){yield C._initializationPromise;const y=Du(),_=Bn(vm,C.config.apiKey,C.name);y&&y.setItem(_,C._getPersistence())})).apply(this,arguments)}function Du(){var C;try{return(null===(C=function yv(){return"undefined"!=typeof window?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch(y){return null}}const _0=ce;class Ro{constructor(){this.browserResolver=De(class fm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hr,this._completeRedirectFn=xo,this._overrideRedirectResult=B}_openPopup(y,_,x,j){var Z=this;return(0,D.Z)(function*(){var pe;fe(null===(pe=Z.eventManagers[y._key()])||void 0===pe?void 0:pe.manager,"_initialize() not called before _openPopup()");const He=Qo(y,_,x,ht(),j);return function Eh(C,y,_,x=500,j=600){const Z=Math.max((window.screen.availHeight-j)/2,0).toString(),pe=Math.max((window.screen.availWidth-x)/2,0).toString();let He="";const St=Object.assign(Object.assign({},gp),{width:x.toString(),height:j.toString(),top:Z,left:pe}),zt=(0,Q.z$)().toLowerCase();_&&(He=Ra(zt)?"_blank":_),Ma(zt)&&(y=y||"http://localhost",St.scrollbars="yes");const fn=Object.entries(St).reduce((ei,[Po,Mh])=>`${ei}${Po}=${Mh},`,"");if(function $o(C=(0,Q.z$)()){var y;return vs(C)&&!!(null===(y=window.navigator)||void 0===y?void 0:y.standalone)}(zt)&&"_self"!==He)return function d0(C,y){const _=document.createElement("a");_.href=C,_.target=y;const x=document.createEvent("MouseEvent");x.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(x)}(y||"",He),new uv(null);const cn=window.open(y||"",He,fn);ce(cn,C,"popup-blocked");try{cn.focus()}catch(ei){}return new uv(cn)}(y,He,vu())})()}_openRedirect(y,_,x,j){var Z=this;return(0,D.Z)(function*(){return yield Z._originValidation(y),function pa(C){Lr().location.href=C}(Qo(y,_,x,ht(),j)),new Promise(()=>{})})()}_initialize(y){const _=y._key();if(this.eventManagers[_]){const{manager:j,promise:Z}=this.eventManagers[_];return j?Promise.resolve(j):(fe(Z,"If manager is not set, promise should be"),Z)}const x=this.initAndGetManager(y);return this.eventManagers[_]={promise:x},x.catch(()=>{delete this.eventManagers[_]}),x}initAndGetManager(y){var _=this;return(0,D.Z)(function*(){const x=yield function av(C){return sc.apply(this,arguments)}(y),j=new Yo(y);return x.register("authEvent",Z=>(ce(null==Z?void 0:Z.authEvent,y,"invalid-auth-event"),{status:j.onEvent(Z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[y._key()]={manager:j},_.iframes[y._key()]=x,j})()}_isIframeWebStorageSupported(y,_){this.iframes[y._key()].send(Ih,{type:Ih},j=>{var Z;const pe=null===(Z=null==j?void 0:j[0])||void 0===Z?void 0:Z[Ih];void 0!==pe&&_(!!pe),qe(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const _=y._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Od(C){return hm.apply(this,arguments)}(y)),this.originValidationPromises[_]}get _shouldInitProactively(){return sa()||ia()||vs()}}),this.cordovaResolver=De(class gv{constructor(){this._redirectPersistence=Hr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=xo,this._overrideRedirectResult=B}_initialize(y){var _=this;return(0,D.Z)(function*(){const x=y._key();let j=_.eventManagers.get(x);return j||(j=new Ep(y),_.eventManagers.set(x,j),_.attachCallbackListeners(y,j)),j})()}_openPopup(y){qe(y,"operation-not-supported-in-this-environment")}_openRedirect(y,_,x,j){var Z=this;return(0,D.Z)(function*(){!function Ch(C){var y,_,x,j,Z,pe,He,St,zt,fn;const cn=Wa();ce("function"==typeof(null===(y=null==cn?void 0:cn.universalLinks)||void 0===y?void 0:y.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ce(void 0!==(null===(_=null==cn?void 0:cn.BuildInfo)||void 0===_?void 0:_.packageName),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ce("function"==typeof(null===(Z=null===(j=null===(x=null==cn?void 0:cn.cordova)||void 0===x?void 0:x.plugins)||void 0===j?void 0:j.browsertab)||void 0===Z?void 0:Z.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ce("function"==typeof(null===(St=null===(He=null===(pe=null==cn?void 0:cn.cordova)||void 0===pe?void 0:pe.plugins)||void 0===He?void 0:He.browsertab)||void 0===St?void 0:St.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ce("function"==typeof(null===(fn=null===(zt=null==cn?void 0:cn.cordova)||void 0===zt?void 0:zt.InAppBrowser)||void 0===fn?void 0:fn.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(y);const pe=yield Z._initialize(y);yield pe.initialized(),pe.resetRedirect(),function F(){As.clear()}(),yield Z._originValidation(y);const He=function Ip(C,y,_=null){return{type:y,eventId:_,urlResponse:null,sessionId:Wd(),postBody:null,tenantId:C.tenantId,error:We(C,"no-auth-event")}}(y,x,j);yield function fv(C,y){return Th()._set(Jc(C),y)}(y,He);const St=yield function jd(C,y,_){return va.apply(this,arguments)}(y,He,_),zt=yield function ac(C){const{cordova:y}=Wa();return new Promise(_=>{y.plugins.browsertab.isAvailable(x=>{let j=null;x?y.plugins.browsertab.openUrl(C):j=y.InAppBrowser.open(C,function th(C=(0,Q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}()?"_blank":"_system","location=yes"),_(j)})})}(St);return function Ka(C,y,_){return bp.apply(this,arguments)}(y,pe,zt)})()}_isIframeWebStorageSupported(y,_){throw new Error("Method not implemented.")}_originValidation(y){const _=y._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function $d(C){return Hd.apply(this,arguments)}(y)),this.originValidationPromises[_]}attachCallbackListeners(y,_){const{universalLinks:x,handleOpenURL:j,BuildInfo:Z}=Wa(),pe=setTimeout((0,D.Z)(function*(){yield Pl(y),_.onEvent(el())}),500),He=function(){var fn=(0,D.Z)(function*(cn){clearTimeout(pe);const ei=yield Pl(y);let Po=null;ei&&(null==cn?void 0:cn.url)&&(Po=function pv(C,y){var _,x;const j=function Tu(C){const y=ss(C),_=y.link?decodeURIComponent(y.link):void 0,x=ss(_).link,j=y.deep_link_id?decodeURIComponent(y.deep_link_id):void 0;return ss(j).link||j||x||_||C}(y);if(j.includes("/__/auth/callback")){const Z=ss(j),pe=Z.firebaseError?function Dh(C){try{return JSON.parse(C)}catch(y){return null}}(decodeURIComponent(Z.firebaseError)):null,He=null===(x=null===(_=null==pe?void 0:pe.code)||void 0===_?void 0:_.split("auth/"))||void 0===x?void 0:x[1],St=He?We(He):null;return St?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:St,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:j,postBody:null}}return null}(ei,cn.url)),_.onEvent(Po||el())});return function(ei){return fn.apply(this,arguments)}}();void 0!==x&&"function"==typeof x.subscribe&&x.subscribe(null,He);const St=j,zt=`${Z.packageName.toLowerCase()}://`;Wa().handleOpenURL=function(){var fn=(0,D.Z)(function*(cn){if(cn.toLowerCase().startsWith(zt)&&He({url:cn}),"function"==typeof St)try{St(cn)}catch(ei){console.error(ei)}});return function(cn){return fn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Hr,this._completeRedirectFn=xo,this._overrideRedirectResult=B}_initialize(y){var _=this;return(0,D.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(y)})()}_openPopup(y,_,x,j){var Z=this;return(0,D.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openPopup(y,_,x,j)})()}_openRedirect(y,_,x,j){var Z=this;return(0,D.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openRedirect(y,_,x,j)})()}_isIframeWebStorageSupported(y,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(y,_)}_originValidation(y){return this.assertedUnderlyingResolver._originValidation(y)}get _shouldInitProactively(){return Ol()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _0(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var y=this;return(0,D.Z)(function*(){if(y.underlyingResolver)return;const _=yield function Dp(){return nl.apply(this,arguments)}();y.underlyingResolver=_?y.cordovaResolver:y.browserResolver})()}}function Za(C){return C.unwrap()}function b0(C){return vv(C)}function vv(C){const{_tokenResponse:y}=C instanceof Q.ZR?C.customData:C;if(!y)return null;if(!(C instanceof Q.ZR)&&"temporaryProof"in y&&"phoneNumber"in y)return Ko.credentialFromResult(C);const _=y.providerId;if(!_||"password"===_)return null;let x;switch(_){case"google.com":x=Jf;break;case"facebook.com":x=Sc;break;case"github.com":x=nm;break;case"twitter.com":x=tp;break;default:const{oauthIdToken:j,oauthAccessToken:Z,oauthTokenSecret:pe,pendingToken:He,nonce:St}=y;return Z||pe||j||He?He?_.startsWith("saml.")?Zu._create(_,He):aa._fromParams({providerId:_,signInMethod:_,pendingToken:He,idToken:j,accessToken:Z}):new ua(_).credential({idToken:j,accessToken:Z,rawNonce:St}):null}return C instanceof Q.ZR?x.credentialFromError(C):x.credentialFromResult(C)}function ko(C,y){return y.catch(_=>{throw _ instanceof Q.ZR&&function Sp(C,y){var _,x;const j=null===(_=y.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null===(x=y)||void 0===x?void 0:x.code))y.resolver=new Ap(C,function Di(C,y){var _;const x=(0,Q.m9)(C),j=y;return ce(y.customData.operationType,x,"argument-error"),ce(null===(_=j.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,x,"argument-error"),Oa._fromError(x,j)}(C,y));else if(j){const Z=vv(y),pe=y;Z&&(pe.credential=Z,pe.tenantId=j.tenantId||void 0,pe.email=j.email||void 0,pe.phoneNumber=j.phoneNumber||void 0)}}(C,_),_}).then(_=>{const j=_.user;return{operationType:_.operationType,credential:b0(_),additionalUserInfo:Ti(_),user:Ai.getOrCreate(j)}})}function _m(C,y){return No.apply(this,arguments)}function No(){return(No=(0,D.Z)(function*(C,y){const _=yield y;return{verificationId:_.verificationId,confirm:x=>ko(C,_.confirm(x))}})).apply(this,arguments)}class Ap{constructor(y,_){this.resolver=_,this.auth=function w0(C){return C.wrapped()}(y)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(y){return ko(Za(this.auth),this.resolver.resolveSignIn(y))}}class Ai{constructor(y){this._delegate=y,this.multiFactor=function om(C){const y=(0,Q.m9)(C);return mh.has(y)||mh.set(y,Vc._fromUser(y)),mh.get(y)}(y)}static getOrCreate(y){return Ai.USER_MAP.has(y)||Ai.USER_MAP.set(y,new Ai(y)),Ai.USER_MAP.get(y)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(y){return this._delegate.getIdTokenResult(y)}getIdToken(y){return this._delegate.getIdToken(y)}linkAndRetrieveDataWithCredential(y){return this.linkWithCredential(y)}linkWithCredential(y){var _=this;return(0,D.Z)(function*(){return ko(_.auth,Pr(_._delegate,y))})()}linkWithPhoneNumber(y,_){var x=this;return(0,D.Z)(function*(){return _m(x.auth,function yh(C,y,_){return ap.apply(this,arguments)}(x._delegate,y,_))})()}linkWithPopup(y){var _=this;return(0,D.Z)(function*(){return ko(_.auth,function cp(C,y,_){return ya.apply(this,arguments)}(_._delegate,y,Ro))})()}linkWithRedirect(y){var _=this;return(0,D.Z)(function*(){return yield uc(on(_.auth)),function Vn(C,y,_){return function hn(C,y,_){return Fr.apply(this,arguments)}(C,y,_)}(_._delegate,y,Ro)})()}reauthenticateAndRetrieveDataWithCredential(y){return this.reauthenticateWithCredential(y)}reauthenticateWithCredential(y){var _=this;return(0,D.Z)(function*(){return ko(_.auth,zs(_._delegate,y))})()}reauthenticateWithPhoneNumber(y,_){return _m(this.auth,function up(C,y,_){return is.apply(this,arguments)}(this._delegate,y,_))}reauthenticateWithPopup(y){return ko(this.auth,function lo(C,y,_){return kl.apply(this,arguments)}(this._delegate,y,Ro))}reauthenticateWithRedirect(y){var _=this;return(0,D.Z)(function*(){return yield uc(on(_.auth)),function Nt(C,y,_){return function Wt(C,y,_){return vn.apply(this,arguments)}(C,y,_)}(_._delegate,y,Ro)})()}sendEmailVerification(y){return function Xi(C,y){return ah.apply(this,arguments)}(this._delegate,y)}unlink(y){var _=this;return(0,D.Z)(function*(){return yield function Id(C,y){return Jn.apply(this,arguments)}(_._delegate,y),_})()}updateEmail(y){return function ch(C,y){return hh((0,Q.m9)(C),y,null)}(this._delegate,y)}updatePassword(y){return function lh(C,y){return hh((0,Q.m9)(C),null,y)}(this._delegate,y)}updatePhoneNumber(y){return function rc(C,y){return Wo.apply(this,arguments)}(this._delegate,y)}updateProfile(y){return function Lc(C,y){return Fc.apply(this,arguments)}(this._delegate,y)}verifyBeforeUpdateEmail(y,_){return function uh(C,y,_){return Pc.apply(this,arguments)}(this._delegate,y,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ai.USER_MAP=new WeakMap;const Qd=ce;let _v=(()=>{class C{constructor(_,x){if(this.app=_,x.isInitialized())return this._delegate=x.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:j}=_.options;Qd(j,"invalid-api-key",{appName:_.name}),Qd(j,"invalid-api-key",{appName:_.name});const Z="undefined"!=typeof window?Ro:void 0;this._delegate=x.initialize({options:{persistence:bv(j,_.name),popupRedirectResolver:Z}}),this._delegate._updateErrorMap(Ye),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ai.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,x){!function _s(C,y,_){const x=on(C);ce(x._canInitEmulator,x,"emulator-config-failed"),ce(/^https?:\/\//.test(y),x,"invalid-emulator-scheme");const j=!!(null==_?void 0:_.disableWarnings),Z=_o(y),{host:pe,port:He}=function Yr(C){const y=_o(C),_=/(\/\/)?([^?#/]+)/.exec(C.substr(y.length));if(!_)return{host:"",port:null};const x=_[2].split("@").pop()||"",j=/^(\[[^\]]+\])(:|$)/.exec(x);if(j){const Z=j[1];return{host:Z,port:wo(x.substr(Z.length+1))}}{const[Z,pe]=x.split(":");return{host:Z,port:wo(pe)}}}(y);x.config.emulator={url:`${Z}//${pe}${null===He?"":`:${He}`}/`},x.settings.appVerificationDisabledForTesting=!0,x.emulatorConfig=Object.freeze({host:pe,port:He,protocol:Z.replace(":",""),options:Object.freeze({disableWarnings:j})}),j||function X(){function C(){const y=document.createElement("p"),_=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}(this._delegate,_,x)}applyActionCode(_){return function so(C,y){return ct.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Wn(this._delegate,_)}confirmPasswordReset(_,x){return function sh(C,y,_){return oh.apply(this,arguments)}(this._delegate,_,x)}createUserWithEmailAndPassword(_,x){var j=this;return(0,D.Z)(function*(){return ko(j._delegate,function gu(C,y,_){return Eo.apply(this,arguments)}(j._delegate,_,x))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Dl(C,y){return ka.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Sd(C,y){const _=nh.parseLink(y);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,D.Z)(function*(){Qd(Vi(),_._delegate,"operation-not-supported-in-this-environment");const x=yield function ho(C,y){return $a.apply(this,arguments)}(_._delegate,Ro);return x?ko(_._delegate,Promise.resolve(x)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function mm(C,y){on(C)._logFramework(y)}(this._delegate,_)}onAuthStateChanged(_,x,j){const{next:Z,error:pe,complete:He}=wv(_,x,j);return this._delegate.onAuthStateChanged(Z,pe,He)}onIdTokenChanged(_,x,j){const{next:Z,error:pe,complete:He}=wv(_,x,j);return this._delegate.onIdTokenChanged(Z,pe,He)}sendSignInLinkToEmail(_,x){return function Io(C,y,_){return Tl.apply(this,arguments)}(this._delegate,_,x)}sendPasswordResetEmail(_,x){return function Dd(C,y,_){return ih.apply(this,arguments)}(this._delegate,_,x||void 0)}setPersistence(_){var x=this;return(0,D.Z)(function*(){let j;switch(function v0(C,y){rl(Object.values(qs).includes(y),C,"invalid-persistence-type"),(0,Q.b$)()?rl(y!==qs.SESSION,C,"unsupported-persistence-type"):(0,Q.UG)()?rl(y===qs.NONE,C,"unsupported-persistence-type"):Ah()?rl(y===qs.NONE||y===qs.LOCAL&&(0,Q.hl)(),C,"unsupported-persistence-type"):rl(y===qs.NONE||ym(),C,"unsupported-persistence-type")}(x._delegate,_),_){case qs.SESSION:j=Hr;break;case qs.LOCAL:j=(yield De(tc)._isAvailable())?tc:Gs;break;case qs.NONE:j=ar;break;default:return qe("argument-error",{appName:x._delegate.name})}return x._delegate.setPersistence(j)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return ko(this._delegate,function hu(C){return Ts.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return ko(this._delegate,gr(this._delegate,_))}signInWithCustomToken(_){return ko(this._delegate,function kc(C,y){return wn.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,x){return ko(this._delegate,function Nc(C,y,_){return gr((0,Q.m9)(C),Xf.credential(y,_))}(this._delegate,_,x))}signInWithEmailLink(_,x){return ko(this._delegate,function rm(C,y,_){return Co.apply(this,arguments)}(this._delegate,_,x))}signInWithPhoneNumber(_,x){return _m(this._delegate,function Xr(C,y,_){return Ml.apply(this,arguments)}(this._delegate,_,x))}signInWithPopup(_){var x=this;return(0,D.Z)(function*(){return Qd(Vi(),x._delegate,"operation-not-supported-in-this-environment"),ko(x._delegate,function ov(C,y,_){return ja.apply(this,arguments)}(x._delegate,_,Ro))})()}signInWithRedirect(_){var x=this;return(0,D.Z)(function*(){return Qd(Vi(),x._delegate,"operation-not-supported-in-this-environment"),yield uc(x._delegate),function we(C,y,_){return function Pe(C,y,_){return $e.apply(this,arguments)}(C,y,_)}(x._delegate,_,Ro)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function mr(C,y){return ui.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=qs,C})();function wv(C,y,_){let x=C;"function"!=typeof C&&({next:x,error:y,complete:_}=C);const j=x;return{next:pe=>j(pe&&Ai.getOrCreate(pe)),error:y,complete:_}}function bv(C,y){const _=function Ll(C,y){const _=Du();if(!_)return[];const x=Bn(vm,C,y);switch(_.getItem(x)){case qs.NONE:return[ar];case qs.LOCAL:return[tc,Hr];case qs.SESSION:return[Hr];default:return[]}}(C,y);if("undefined"!=typeof self&&!_.includes(tc)&&_.push(tc),"undefined"!=typeof window)for(const x of[Gs,Hr])_.includes(x)||_.push(x);return _.includes(ar)||_.push(ar),_}class xp{constructor(){this.providerId="phone",this._delegate=new Ko(Za(be.Z.auth()))}static credential(y,_){return Ko.credential(y,_)}verifyPhoneNumber(y,_){return this._delegate.verifyPhoneNumber(y,_)}unwrap(){return this._delegate}}xp.PHONE_SIGN_IN_METHOD=Ko.PHONE_SIGN_IN_METHOD,xp.PROVIDER_ID=Ko.PROVIDER_ID;const Xd=ce;class xh{constructor(y,_,x=be.Z.app()){var j;Xd(null===(j=x.options)||void 0===j?void 0:j.apiKey,"invalid-api-key",{appName:x.name}),this._delegate=new op(y,_,x.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Fl(C){C.INTERNAL.registerComponent(new Be.wA("auth-compat",y=>{const _=y.getProvider("app-compat").getImmediate(),x=y.getProvider("auth");return new _v(_,x)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Xf,FacebookAuthProvider:Sc,GithubAuthProvider:nm,GoogleAuthProvider:Jf,OAuthProvider:ua,SAMLAuthProvider:Cs,PhoneAuthProvider:xp,PhoneMultiFactorGenerator:Hb,RecaptchaVerifier:xh,TwitterAuthProvider:tp,Auth:_v,AuthCredential:me,Error:Q.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.2.17")}(be.Z)},8306:(jt,et,M)=>{"use strict";M.d(et,{y:()=>oe});var D=M(2961),be=M(727),Q=M(8822),Fe=M(4671);var Be=M(2416),Oe=M(576),Le=M(2806);let oe=(()=>{class ot{constructor(It){It&&(this._subscribe=It)}lift(It){const ge=new ot;return ge.source=this,ge.operator=It,ge}subscribe(It,ge,Me){const lt=function kt(ot){return ot&&ot instanceof D.Lv||function ye(ot){return ot&&(0,Oe.m)(ot.next)&&(0,Oe.m)(ot.error)&&(0,Oe.m)(ot.complete)}(ot)&&(0,be.Nn)(ot)}(It)?It:new D.Hp(It,ge,Me);return(0,Le.x)(()=>{const{operator:bt,source:qe}=this;lt.add(bt?bt.call(lt,qe):qe?this._subscribe(lt):this._trySubscribe(lt))}),lt}_trySubscribe(It){try{return this._subscribe(It)}catch(ge){It.error(ge)}}forEach(It,ge){return new(ge=ue(ge))((Me,lt)=>{const bt=new D.Hp({next:qe=>{try{It(qe)}catch(We){lt(We),bt.unsubscribe()}},error:lt,complete:Me});this.subscribe(bt)})}_subscribe(It){var ge;return null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(It)}[Q.L](){return this}pipe(...It){return function Ue(ot){return 0===ot.length?Fe.y:1===ot.length?ot[0]:function(It){return ot.reduce((ge,Me)=>Me(ge),It)}}(It)(this)}toPromise(It){return new(It=ue(It))((ge,Me)=>{let lt;this.subscribe(bt=>lt=bt,bt=>Me(bt),()=>ge(lt))})}}return ot.create=Ye=>new ot(Ye),ot})();function ue(ot){var Ye;return null!==(Ye=null!=ot?ot:Be.v.Promise)&&void 0!==Ye?Ye:Promise}},7579:(jt,et,M)=>{"use strict";M.d(et,{x:()=>Be});var D=M(8306),be=M(727);const Fe=(0,M(3888).d)(Le=>function(){Le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var xe=M(8737),Ue=M(2806);let Be=(()=>{class Le extends D.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ue){const ye=new Oe(this,this);return ye.operator=ue,ye}_throwIfClosed(){if(this.closed)throw new Fe}next(ue){(0,Ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ye of this.currentObservers)ye.next(ue)}})}error(ue){(0,Ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ue;const{observers:ye}=this;for(;ye.length;)ye.shift().error(ue)}})}complete(){(0,Ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ue}=this;for(;ue.length;)ue.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ue;return(null===(ue=this.observers)||void 0===ue?void 0:ue.length)>0}_trySubscribe(ue){return this._throwIfClosed(),super._trySubscribe(ue)}_subscribe(ue){return this._throwIfClosed(),this._checkFinalizedStatuses(ue),this._innerSubscribe(ue)}_innerSubscribe(ue){const{hasError:ye,isStopped:kt,observers:ot}=this;return ye||kt?be.Lc:(this.currentObservers=null,ot.push(ue),new be.w0(()=>{this.currentObservers=null,(0,xe.P)(ot,ue)}))}_checkFinalizedStatuses(ue){const{hasError:ye,thrownError:kt,isStopped:ot}=this;ye?ue.error(kt):ot&&ue.complete()}asObservable(){const ue=new D.y;return ue.source=this,ue}}return Le.create=(oe,ue)=>new Oe(oe,ue),Le})();class Oe extends Be{constructor(oe,ue){super(),this.destination=oe,this.source=ue}next(oe){var ue,ye;null===(ye=null===(ue=this.destination)||void 0===ue?void 0:ue.next)||void 0===ye||ye.call(ue,oe)}error(oe){var ue,ye;null===(ye=null===(ue=this.destination)||void 0===ue?void 0:ue.error)||void 0===ye||ye.call(ue,oe)}complete(){var oe,ue;null===(ue=null===(oe=this.destination)||void 0===oe?void 0:oe.complete)||void 0===ue||ue.call(oe)}_subscribe(oe){var ue,ye;return null!==(ye=null===(ue=this.source)||void 0===ue?void 0:ue.subscribe(oe))&&void 0!==ye?ye:be.Lc}}},2961:(jt,et,M)=>{"use strict";M.d(et,{Hp:()=>It,Lv:()=>ye});var D=M(576),be=M(727),Q=M(2416),Fe=M(7849);function xe(){}const Ue=Le("C",void 0,void 0);function Le(qe,We,Xe){return{kind:qe,value:We,error:Xe}}var oe=M(3410),ue=M(2806);class ye extends be.w0{constructor(We){super(),this.isStopped=!1,We?(this.destination=We,(0,be.Nn)(We)&&We.add(this)):this.destination=bt}static create(We,Xe,ut){return new It(We,Xe,ut)}next(We){this.isStopped?lt(function Oe(qe){return Le("N",qe,void 0)}(We),this):this._next(We)}error(We){this.isStopped?lt(function Be(qe){return Le("E",void 0,qe)}(We),this):(this.isStopped=!0,this._error(We))}complete(){this.isStopped?lt(Ue,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(We){this.destination.next(We)}_error(We){try{this.destination.error(We)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const kt=Function.prototype.bind;function ot(qe,We){return kt.call(qe,We)}class Ye{constructor(We){this.partialObserver=We}next(We){const{partialObserver:Xe}=this;if(Xe.next)try{Xe.next(We)}catch(ut){ge(ut)}}error(We){const{partialObserver:Xe}=this;if(Xe.error)try{Xe.error(We)}catch(ut){ge(ut)}else ge(We)}complete(){const{partialObserver:We}=this;if(We.complete)try{We.complete()}catch(Xe){ge(Xe)}}}class It extends ye{constructor(We,Xe,ut){let vt;if(super(),(0,D.m)(We)||!We)vt={next:null!=We?We:void 0,error:null!=Xe?Xe:void 0,complete:null!=ut?ut:void 0};else{let ce;this&&Q.v.useDeprecatedNextContext?(ce=Object.create(We),ce.unsubscribe=()=>this.unsubscribe(),vt={next:We.next&&ot(We.next,ce),error:We.error&&ot(We.error,ce),complete:We.complete&&ot(We.complete,ce)}):vt=We}this.destination=new Ye(vt)}}function ge(qe){Q.v.useDeprecatedSynchronousErrorHandling?(0,ue.O)(qe):(0,Fe.h)(qe)}function lt(qe,We){const{onStoppedNotification:Xe}=Q.v;Xe&&oe.z.setTimeout(()=>Xe(qe,We))}const bt={closed:!0,next:xe,error:function Me(qe){throw qe},complete:xe}},727:(jt,et,M)=>{"use strict";M.d(et,{Lc:()=>Ue,w0:()=>xe,Nn:()=>Be});var D=M(576);const Q=(0,M(3888).d)(Le=>function(ue){Le(this),this.message=ue?`${ue.length} errors occurred during unsubscription:\n${ue.map((ye,kt)=>`${kt+1}) ${ye.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ue});var Fe=M(8737);class xe{constructor(oe){this.initialTeardown=oe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let oe;if(!this.closed){this.closed=!0;const{_parentage:ue}=this;if(ue)if(this._parentage=null,Array.isArray(ue))for(const ot of ue)ot.remove(this);else ue.remove(this);const{initialTeardown:ye}=this;if((0,D.m)(ye))try{ye()}catch(ot){oe=ot instanceof Q?ot.errors:[ot]}const{_finalizers:kt}=this;if(kt){this._finalizers=null;for(const ot of kt)try{Oe(ot)}catch(Ye){oe=null!=oe?oe:[],Ye instanceof Q?oe=[...oe,...Ye.errors]:oe.push(Ye)}}if(oe)throw new Q(oe)}}add(oe){var ue;if(oe&&oe!==this)if(this.closed)Oe(oe);else{if(oe instanceof xe){if(oe.closed||oe._hasParent(this))return;oe._addParent(this)}(this._finalizers=null!==(ue=this._finalizers)&&void 0!==ue?ue:[]).push(oe)}}_hasParent(oe){const{_parentage:ue}=this;return ue===oe||Array.isArray(ue)&&ue.includes(oe)}_addParent(oe){const{_parentage:ue}=this;this._parentage=Array.isArray(ue)?(ue.push(oe),ue):ue?[ue,oe]:oe}_removeParent(oe){const{_parentage:ue}=this;ue===oe?this._parentage=null:Array.isArray(ue)&&(0,Fe.P)(ue,oe)}remove(oe){const{_finalizers:ue}=this;ue&&(0,Fe.P)(ue,oe),oe instanceof xe&&oe._removeParent(this)}}xe.EMPTY=(()=>{const Le=new xe;return Le.closed=!0,Le})();const Ue=xe.EMPTY;function Be(Le){return Le instanceof xe||Le&&"closed"in Le&&(0,D.m)(Le.remove)&&(0,D.m)(Le.add)&&(0,D.m)(Le.unsubscribe)}function Oe(Le){(0,D.m)(Le)?Le():Le.unsubscribe()}},2416:(jt,et,M)=>{"use strict";M.d(et,{v:()=>D});const D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(jt,et,M)=>{"use strict";M.d(et,{E:()=>be});const be=new(M(8306).y)(xe=>xe.complete())},8996:(jt,et,M)=>{"use strict";M.d(et,{D:()=>We});var D=M(8421),be=M(5363),Q=M(9468),Ue=M(8306),Oe=M(2202),Le=M(576),oe=M(9672);function ye(Xe,ut){if(!Xe)throw new Error("Iterable cannot be null");return new Ue.y(vt=>{(0,oe.f)(vt,ut,()=>{const ce=Xe[Symbol.asyncIterator]();(0,oe.f)(vt,ut,()=>{ce.next().then(Ke=>{Ke.done?vt.complete():vt.next(Ke.value)})},0,!0)})})}var kt=M(3670),ot=M(8239),Ye=M(1144),It=M(6495),ge=M(2206),Me=M(4532),lt=M(3260);function We(Xe,ut){return ut?function qe(Xe,ut){if(null!=Xe){if((0,kt.c)(Xe))return function Fe(Xe,ut){return(0,D.Xf)(Xe).pipe((0,Q.R)(ut),(0,be.Q)(ut))}(Xe,ut);if((0,Ye.z)(Xe))return function Be(Xe,ut){return new Ue.y(vt=>{let ce=0;return ut.schedule(function(){ce===Xe.length?vt.complete():(vt.next(Xe[ce++]),vt.closed||this.schedule())})})}(Xe,ut);if((0,ot.t)(Xe))return function xe(Xe,ut){return(0,D.Xf)(Xe).pipe((0,Q.R)(ut),(0,be.Q)(ut))}(Xe,ut);if((0,ge.D)(Xe))return ye(Xe,ut);if((0,It.T)(Xe))return function ue(Xe,ut){return new Ue.y(vt=>{let ce;return(0,oe.f)(vt,ut,()=>{ce=Xe[Oe.h](),(0,oe.f)(vt,ut,()=>{let Ke,fe;try{({value:Ke,done:fe}=ce.next())}catch(Re){return void vt.error(Re)}fe?vt.complete():vt.next(Ke)},0,!0)}),()=>(0,Le.m)(null==ce?void 0:ce.return)&&ce.return()})}(Xe,ut);if((0,lt.L)(Xe))return function bt(Xe,ut){return ye((0,lt.Q)(Xe),ut)}(Xe,ut)}throw(0,Me.z)(Xe)}(Xe,ut):(0,D.Xf)(Xe)}},8421:(jt,et,M)=>{"use strict";M.d(et,{Xf:()=>kt});var D=M(655),be=M(1144),Q=M(8239),Fe=M(8306),xe=M(3670),Ue=M(2206),Be=M(4532),Oe=M(6495),Le=M(3260),oe=M(576),ue=M(7849),ye=M(8822);function kt(qe){if(qe instanceof Fe.y)return qe;if(null!=qe){if((0,xe.c)(qe))return function ot(qe){return new Fe.y(We=>{const Xe=qe[ye.L]();if((0,oe.m)(Xe.subscribe))return Xe.subscribe(We);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(qe);if((0,be.z)(qe))return function Ye(qe){return new Fe.y(We=>{for(let Xe=0;Xe<qe.length&&!We.closed;Xe++)We.next(qe[Xe]);We.complete()})}(qe);if((0,Q.t)(qe))return function It(qe){return new Fe.y(We=>{qe.then(Xe=>{We.closed||(We.next(Xe),We.complete())},Xe=>We.error(Xe)).then(null,ue.h)})}(qe);if((0,Ue.D)(qe))return Me(qe);if((0,Oe.T)(qe))return function ge(qe){return new Fe.y(We=>{for(const Xe of qe)if(We.next(Xe),We.closed)return;We.complete()})}(qe);if((0,Le.L)(qe))return function lt(qe){return Me((0,Le.Q)(qe))}(qe)}throw(0,Be.z)(qe)}function Me(qe){return new Fe.y(We=>{(function bt(qe,We){var Xe,ut,vt,ce;return(0,D.mG)(this,void 0,void 0,function*(){try{for(Xe=(0,D.KL)(qe);!(ut=yield Xe.next()).done;)if(We.next(ut.value),We.closed)return}catch(Ke){vt={error:Ke}}finally{try{ut&&!ut.done&&(ce=Xe.return)&&(yield ce.call(Xe))}finally{if(vt)throw vt.error}}We.complete()})})(qe,We).catch(Xe=>We.error(Xe))})}},6451:(jt,et,M)=>{"use strict";M.d(et,{T:()=>Ue});var D=M(8189),be=M(8421),Q=M(515),Fe=M(7669),xe=M(8996);function Ue(...Be){const Oe=(0,Fe.yG)(Be),Le=(0,Fe._6)(Be,1/0),oe=Be;return oe.length?1===oe.length?(0,be.Xf)(oe[0]):(0,D.J)(Le)((0,xe.D)(oe,Oe)):Q.E}},5403:(jt,et,M)=>{"use strict";M.d(et,{x:()=>be});var D=M(2961);function be(Fe,xe,Ue,Be,Oe){return new Q(Fe,xe,Ue,Be,Oe)}class Q extends D.Lv{constructor(xe,Ue,Be,Oe,Le,oe){super(xe),this.onFinalize=Le,this.shouldUnsubscribe=oe,this._next=Ue?function(ue){try{Ue(ue)}catch(ye){xe.error(ye)}}:super._next,this._error=Oe?function(ue){try{Oe(ue)}catch(ye){xe.error(ye)}finally{this.unsubscribe()}}:super._error,this._complete=Be?function(){try{Be()}catch(ue){xe.error(ue)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var xe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ue}=this;super.unsubscribe(),!Ue&&(null===(xe=this.onFinalize)||void 0===xe||xe.call(this))}}}},4004:(jt,et,M)=>{"use strict";M.d(et,{U:()=>Q});var D=M(4482),be=M(5403);function Q(Fe,xe){return(0,D.e)((Ue,Be)=>{let Oe=0;Ue.subscribe((0,be.x)(Be,Le=>{Be.next(Fe.call(xe,Le,Oe++))}))})}},8189:(jt,et,M)=>{"use strict";M.d(et,{J:()=>Q});var D=M(5577),be=M(4671);function Q(Fe=1/0){return(0,D.z)(be.y,Fe)}},5577:(jt,et,M)=>{"use strict";M.d(et,{z:()=>Oe});var D=M(4004),be=M(8421),Q=M(4482),Fe=M(9672),xe=M(5403),Be=M(576);function Oe(Le,oe,ue=1/0){return(0,Be.m)(oe)?Oe((ye,kt)=>(0,D.U)((ot,Ye)=>oe(ye,ot,kt,Ye))((0,be.Xf)(Le(ye,kt))),ue):("number"==typeof oe&&(ue=oe),(0,Q.e)((ye,kt)=>function Ue(Le,oe,ue,ye,kt,ot,Ye,It){const ge=[];let Me=0,lt=0,bt=!1;const qe=()=>{bt&&!ge.length&&!Me&&oe.complete()},We=ut=>Me<ye?Xe(ut):ge.push(ut),Xe=ut=>{ot&&oe.next(ut),Me++;let vt=!1;(0,be.Xf)(ue(ut,lt++)).subscribe((0,xe.x)(oe,ce=>{null==kt||kt(ce),ot?We(ce):oe.next(ce)},()=>{vt=!0},void 0,()=>{if(vt)try{for(Me--;ge.length&&Me<ye;){const ce=ge.shift();Ye?(0,Fe.f)(oe,Ye,()=>Xe(ce)):Xe(ce)}qe()}catch(ce){oe.error(ce)}}))};return Le.subscribe((0,xe.x)(oe,We,()=>{bt=!0,qe()})),()=>{null==It||It()}}(ye,kt,Le,ue)))}},5363:(jt,et,M)=>{"use strict";M.d(et,{Q:()=>Fe});var D=M(9672),be=M(4482),Q=M(5403);function Fe(xe,Ue=0){return(0,be.e)((Be,Oe)=>{Be.subscribe((0,Q.x)(Oe,Le=>(0,D.f)(Oe,xe,()=>Oe.next(Le),Ue),()=>(0,D.f)(Oe,xe,()=>Oe.complete(),Ue),Le=>(0,D.f)(Oe,xe,()=>Oe.error(Le),Ue)))})}},3099:(jt,et,M)=>{"use strict";M.d(et,{B:()=>Ue});var D=M(8996),be=M(5698),Q=M(7579),Fe=M(2961),xe=M(4482);function Ue(Oe={}){const{connector:Le=(()=>new Q.x),resetOnError:oe=!0,resetOnComplete:ue=!0,resetOnRefCountZero:ye=!0}=Oe;return kt=>{let ot=null,Ye=null,It=null,ge=0,Me=!1,lt=!1;const bt=()=>{null==Ye||Ye.unsubscribe(),Ye=null},qe=()=>{bt(),ot=It=null,Me=lt=!1},We=()=>{const Xe=ot;qe(),null==Xe||Xe.unsubscribe()};return(0,xe.e)((Xe,ut)=>{ge++,!lt&&!Me&&bt();const vt=It=null!=It?It:Le();ut.add(()=>{ge--,0===ge&&!lt&&!Me&&(Ye=Be(We,ye))}),vt.subscribe(ut),ot||(ot=new Fe.Hp({next:ce=>vt.next(ce),error:ce=>{lt=!0,bt(),Ye=Be(qe,oe,ce),vt.error(ce)},complete:()=>{Me=!0,bt(),Ye=Be(qe,ue),vt.complete()}}),(0,D.D)(Xe).subscribe(ot))})(kt)}}function Be(Oe,Le,...oe){return!0===Le?(Oe(),null):!1===Le?null:Le(...oe).pipe((0,be.q)(1)).subscribe(()=>Oe())}},9468:(jt,et,M)=>{"use strict";M.d(et,{R:()=>be});var D=M(4482);function be(Q,Fe=0){return(0,D.e)((xe,Ue)=>{Ue.add(Q.schedule(()=>xe.subscribe(Ue),Fe))})}},5698:(jt,et,M)=>{"use strict";M.d(et,{q:()=>Fe});var D=M(515),be=M(4482),Q=M(5403);function Fe(xe){return xe<=0?()=>D.E:(0,be.e)((Ue,Be)=>{let Oe=0;Ue.subscribe((0,Q.x)(Be,Le=>{++Oe<=xe&&(Be.next(Le),xe<=Oe&&Be.complete())}))})}},8505:(jt,et,M)=>{"use strict";M.d(et,{b:()=>xe});var D=M(576),be=M(4482),Q=M(5403),Fe=M(4671);function xe(Ue,Be,Oe){const Le=(0,D.m)(Ue)||Be||Oe?{next:Ue,error:Be,complete:Oe}:Ue;return Le?(0,be.e)((oe,ue)=>{var ye;null===(ye=Le.subscribe)||void 0===ye||ye.call(Le);let kt=!0;oe.subscribe((0,Q.x)(ue,ot=>{var Ye;null===(Ye=Le.next)||void 0===Ye||Ye.call(Le,ot),ue.next(ot)},()=>{var ot;kt=!1,null===(ot=Le.complete)||void 0===ot||ot.call(Le),ue.complete()},ot=>{var Ye;kt=!1,null===(Ye=Le.error)||void 0===Ye||Ye.call(Le,ot),ue.error(ot)},()=>{var ot,Ye;kt&&(null===(ot=Le.unsubscribe)||void 0===ot||ot.call(Le)),null===(Ye=Le.finalize)||void 0===Ye||Ye.call(Le)}))}):Fe.y}},4408:(jt,et,M)=>{"use strict";M.d(et,{o:()=>xe});var D=M(727);class be extends D.w0{constructor(Be,Oe){super()}schedule(Be,Oe=0){return this}}const Q={setInterval(Ue,Be,...Oe){const{delegate:Le}=Q;return(null==Le?void 0:Le.setInterval)?Le.setInterval(Ue,Be,...Oe):setInterval(Ue,Be,...Oe)},clearInterval(Ue){const{delegate:Be}=Q;return((null==Be?void 0:Be.clearInterval)||clearInterval)(Ue)},delegate:void 0};var Fe=M(8737);class xe extends be{constructor(Be,Oe){super(Be,Oe),this.scheduler=Be,this.work=Oe,this.pending=!1}schedule(Be,Oe=0){if(this.closed)return this;this.state=Be;const Le=this.id,oe=this.scheduler;return null!=Le&&(this.id=this.recycleAsyncId(oe,Le,Oe)),this.pending=!0,this.delay=Oe,this.id=this.id||this.requestAsyncId(oe,this.id,Oe),this}requestAsyncId(Be,Oe,Le=0){return Q.setInterval(Be.flush.bind(Be,this),Le)}recycleAsyncId(Be,Oe,Le=0){if(null!=Le&&this.delay===Le&&!1===this.pending)return Oe;Q.clearInterval(Oe)}execute(Be,Oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Le=this._execute(Be,Oe);if(Le)return Le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Be,Oe){let oe,Le=!1;try{this.work(Be)}catch(ue){Le=!0,oe=ue||new Error("Scheduled action threw falsy error")}if(Le)return this.unsubscribe(),oe}unsubscribe(){if(!this.closed){const{id:Be,scheduler:Oe}=this,{actions:Le}=Oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Fe.P)(Le,this),null!=Be&&(this.id=this.recycleAsyncId(Oe,Be,null)),this.delay=null,super.unsubscribe()}}}},7565:(jt,et,M)=>{"use strict";M.d(et,{v:()=>Q});var D=M(6063);class be{constructor(xe,Ue=be.now){this.schedulerActionCtor=xe,this.now=Ue}schedule(xe,Ue=0,Be){return new this.schedulerActionCtor(this,xe).schedule(Be,Ue)}}be.now=D.l.now;class Q extends be{constructor(xe,Ue=be.now){super(xe,Ue),this.actions=[],this._active=!1,this._scheduled=void 0}flush(xe){const{actions:Ue}=this;if(this._active)return void Ue.push(xe);let Be;this._active=!0;do{if(Be=xe.execute(xe.state,xe.delay))break}while(xe=Ue.shift());if(this._active=!1,Be){for(;xe=Ue.shift();)xe.unsubscribe();throw Be}}}},4986:(jt,et,M)=>{"use strict";M.d(et,{z:()=>Q});var D=M(4408);const Q=new(M(7565).v)(D.o)},6063:(jt,et,M)=>{"use strict";M.d(et,{l:()=>D});const D={now:()=>(D.delegate||Date).now(),delegate:void 0}},3410:(jt,et,M)=>{"use strict";M.d(et,{z:()=>D});const D={setTimeout(be,Q,...Fe){const{delegate:xe}=D;return(null==xe?void 0:xe.setTimeout)?xe.setTimeout(be,Q,...Fe):setTimeout(be,Q,...Fe)},clearTimeout(be){const{delegate:Q}=D;return((null==Q?void 0:Q.clearTimeout)||clearTimeout)(be)},delegate:void 0}},2202:(jt,et,M)=>{"use strict";M.d(et,{h:()=>be});const be=function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(jt,et,M)=>{"use strict";M.d(et,{L:()=>D});const D="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(jt,et,M)=>{"use strict";M.d(et,{_6:()=>Ue,jO:()=>Fe,yG:()=>xe});var D=M(576);function Q(Be){return Be[Be.length-1]}function Fe(Be){return(0,D.m)(Q(Be))?Be.pop():void 0}function xe(Be){return function be(Be){return Be&&(0,D.m)(Be.schedule)}(Q(Be))?Be.pop():void 0}function Ue(Be,Oe){return"number"==typeof Q(Be)?Be.pop():Oe}},8737:(jt,et,M)=>{"use strict";function D(be,Q){if(be){const Fe=be.indexOf(Q);0<=Fe&&be.splice(Fe,1)}}M.d(et,{P:()=>D})},3888:(jt,et,M)=>{"use strict";function D(be){const Fe=be(xe=>{Error.call(xe),xe.stack=(new Error).stack});return Fe.prototype=Object.create(Error.prototype),Fe.prototype.constructor=Fe,Fe}M.d(et,{d:()=>D})},2806:(jt,et,M)=>{"use strict";M.d(et,{O:()=>Fe,x:()=>Q});var D=M(2416);let be=null;function Q(xe){if(D.v.useDeprecatedSynchronousErrorHandling){const Ue=!be;if(Ue&&(be={errorThrown:!1,error:null}),xe(),Ue){const{errorThrown:Be,error:Oe}=be;if(be=null,Be)throw Oe}}else xe()}function Fe(xe){D.v.useDeprecatedSynchronousErrorHandling&&be&&(be.errorThrown=!0,be.error=xe)}},9672:(jt,et,M)=>{"use strict";function D(be,Q,Fe,xe=0,Ue=!1){const Be=Q.schedule(function(){Fe(),Ue?be.add(this.schedule(null,xe)):this.unsubscribe()},xe);if(be.add(Be),!Ue)return Be}M.d(et,{f:()=>D})},4671:(jt,et,M)=>{"use strict";function D(be){return be}M.d(et,{y:()=>D})},1144:(jt,et,M)=>{"use strict";M.d(et,{z:()=>D});const D=be=>be&&"number"==typeof be.length&&"function"!=typeof be},2206:(jt,et,M)=>{"use strict";M.d(et,{D:()=>be});var D=M(576);function be(Q){return Symbol.asyncIterator&&(0,D.m)(null==Q?void 0:Q[Symbol.asyncIterator])}},576:(jt,et,M)=>{"use strict";function D(be){return"function"==typeof be}M.d(et,{m:()=>D})},3670:(jt,et,M)=>{"use strict";M.d(et,{c:()=>Q});var D=M(8822),be=M(576);function Q(Fe){return(0,be.m)(Fe[D.L])}},6495:(jt,et,M)=>{"use strict";M.d(et,{T:()=>Q});var D=M(2202),be=M(576);function Q(Fe){return(0,be.m)(null==Fe?void 0:Fe[D.h])}},8239:(jt,et,M)=>{"use strict";M.d(et,{t:()=>be});var D=M(576);function be(Q){return(0,D.m)(null==Q?void 0:Q.then)}},3260:(jt,et,M)=>{"use strict";M.d(et,{L:()=>Fe,Q:()=>Q});var D=M(655),be=M(576);function Q(xe){return(0,D.FC)(this,arguments,function*(){const Be=xe.getReader();try{for(;;){const{value:Oe,done:Le}=yield(0,D.qq)(Be.read());if(Le)return yield(0,D.qq)(void 0);yield yield(0,D.qq)(Oe)}}finally{Be.releaseLock()}})}function Fe(xe){return(0,be.m)(null==xe?void 0:xe.getReader)}},4482:(jt,et,M)=>{"use strict";M.d(et,{A:()=>be,e:()=>Q});var D=M(576);function be(Fe){return(0,D.m)(null==Fe?void 0:Fe.lift)}function Q(Fe){return xe=>{if(be(xe))return xe.lift(function(Ue){try{return Fe(Ue,this)}catch(Be){this.error(Be)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(jt,et,M)=>{"use strict";M.d(et,{h:()=>Q});var D=M(2416),be=M(3410);function Q(Fe){be.z.setTimeout(()=>{const{onUnhandledError:xe}=D.v;if(!xe)throw Fe;xe(Fe)})}},4532:(jt,et,M)=>{"use strict";function D(be){return new TypeError(`You provided ${null!==be&&"object"==typeof be?"an invalid object":`'${be}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}M.d(et,{z:()=>D})},505:function(jt,et,M){var D,be,Q;be=[M(5021),M(4013)],D=function(Fe,xe){return function(){var Ue=function It(){return"n"},Be=function ge(){return[0,0]},Oe=function Me(){return" "},Le=document.body,oe=De(),ue=null,ye=null,kt=null,ot=function lt(){return!1};function Ye(at){(ue=function Ze(at){var Xt=at.node();return Xt?"svg"===Xt.tagName.toLowerCase()?Xt:Xt.ownerSVGElement:null}(at))&&(ye=ue.createSVGPoint(),Le.appendChild(oe))}Ye.show=function(){var at=Array.prototype.slice.call(arguments);at[at.length-1]instanceof SVGElement&&(kt=at.pop());var Ar,Xt=Oe.apply(this,at),_t=Be.apply(this,at),Fn=Ue.apply(this,at),lr=Boolean(ot.apply(this,at)),jn=Ne(),Kn=qe.length,Zn=document.documentElement.scrollTop||Le.scrollTop,On=document.documentElement.scrollLeft||Le.scrollLeft;for(jn.html(Xt).style("opacity",1).style("pointer-events","all");Kn--;)jn.classed(qe[Kn],!1);return lr?(xe.mouse(xe.selection().node()),jn.style("top",xe.event.y+_t[1]+"px").style("left",xe.event.x+_t[0]+"px")):(Ar=bt.get(Fn).apply(this),jn.classed(Fn,!0).style("top",Ar.top+_t[0]+Zn+"px").style("left",Ar.left+_t[1]+On+"px")),Ye},Ye.hide=function(){return Ne().style("opacity",0).style("pointer-events","none"),Ye},Ye.attr=function(at,Xt){if(arguments.length<2&&"string"==typeof at)return Ne().attr(at);var _t=Array.prototype.slice.call(arguments);return xe.selection.prototype.attr.apply(Ne(),_t),Ye},Ye.style=function(at,Xt){if(arguments.length<2&&"string"==typeof at)return Ne().style(at);var _t=Array.prototype.slice.call(arguments);return xe.selection.prototype.style.apply(Ne(),_t),Ye},Ye.direction=function(at){return arguments.length?(Ue=null==at?at:qt(at),Ye):Ue},Ye.offset=function(at){return arguments.length?(Be=null==at?at:qt(at),Ye):Be},Ye.html=function(at){return arguments.length?(Oe=null==at?at:qt(at),Ye):Oe},Ye.rootElement=function(at){return arguments.length?(Le=null==at?at:qt(at),Ye):Le},Ye.followMouse=function(at){return arguments.length?(ot=null==at?at:qt(at),Ye):ot},Ye.destroy=function(){return oe&&(Ne().remove(),oe=null),Ye};var bt=Fe.map({n:function We(){var at=ht();return{top:at.n.y-oe.offsetHeight,left:at.n.x-oe.offsetWidth/2}},s:function Xe(){var at=ht();return{top:at.s.y,left:at.s.x-oe.offsetWidth/2}},e:function ut(){var at=ht();return{top:at.e.y-oe.offsetHeight/2,left:at.e.x}},w:function vt(){var at=ht();return{top:at.w.y-oe.offsetHeight/2,left:at.w.x-oe.offsetWidth}},nw:function ce(){var at=ht();return{top:at.nw.y-oe.offsetHeight,left:at.nw.x-oe.offsetWidth}},ne:function Ke(){var at=ht();return{top:at.ne.y-oe.offsetHeight,left:at.ne.x}},sw:function fe(){var at=ht();return{top:at.sw.y,left:at.sw.x-oe.offsetWidth}},se:function Re(){var at=ht();return{top:at.se.y,left:at.se.x}}}),qe=bt.keys();function De(){var at=xe.select(document.createElement("div"));return at.style("position","absolute").style("top",0).style("opacity",0).style("pointer-events","none").style("box-sizing","border-box"),at.node()}function Ne(){return null==oe&&(oe=De(),Le.appendChild(oe)),xe.select(oe)}function ht(){for(var at=kt||xe.event.target;null==at.getScreenCTM&&null==at.parentNode;)at=at.parentNode;var Xt={},_t=at.getScreenCTM(),Fn=at.getBBox(),lr=Fn.width,jn=Fn.height,Ar=Fn.y;return ye.x=Fn.x,ye.y=Ar,Xt.nw=ye.matrixTransform(_t),ye.x+=lr,Xt.ne=ye.matrixTransform(_t),ye.y+=jn,Xt.se=ye.matrixTransform(_t),ye.x-=lr,Xt.sw=ye.matrixTransform(_t),ye.y-=jn/2,Xt.w=ye.matrixTransform(_t),ye.x+=lr,Xt.e=ye.matrixTransform(_t),ye.x-=lr/2,ye.y-=jn/2,Xt.n=ye.matrixTransform(_t),ye.y+=jn,Xt.s=ye.matrixTransform(_t),Xt}function qt(at){return"function"==typeof at?at:function(){return at}}return Ye}},void 0!==(Q=D.apply(et,be))&&(jt.exports=Q)},655:(jt,et,M)=>{"use strict";function Fe(fe,Re){var De={};for(var Ze in fe)Object.prototype.hasOwnProperty.call(fe,Ze)&&Re.indexOf(Ze)<0&&(De[Ze]=fe[Ze]);if(null!=fe&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(Ze=Object.getOwnPropertySymbols(fe);Ne<Ze.length;Ne++)Re.indexOf(Ze[Ne])<0&&Object.prototype.propertyIsEnumerable.call(fe,Ze[Ne])&&(De[Ze[Ne]]=fe[Ze[Ne]])}return De}function Oe(fe,Re,De,Ze){return new(De||(De=Promise))(function(ht,qt){function at(Fn){try{_t(Ze.next(Fn))}catch(lr){qt(lr)}}function Xt(Fn){try{_t(Ze.throw(Fn))}catch(lr){qt(lr)}}function _t(Fn){Fn.done?ht(Fn.value):function Ne(ht){return ht instanceof De?ht:new De(function(qt){qt(ht)})}(Fn.value).then(at,Xt)}_t((Ze=Ze.apply(fe,Re||[])).next())})}function ge(fe){return this instanceof ge?(this.v=fe,this):new ge(fe)}function Me(fe,Re,De){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,Ze=De.apply(fe,Re||[]),ht=[];return Ne={},qt("next"),qt("throw"),qt("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function qt(jn){Ze[jn]&&(Ne[jn]=function(Kn){return new Promise(function(Ar,Zn){ht.push([jn,Kn,Ar,Zn])>1||at(jn,Kn)})})}function at(jn,Kn){try{!function Xt(jn){jn.value instanceof ge?Promise.resolve(jn.value.v).then(_t,Fn):lr(ht[0][2],jn)}(Ze[jn](Kn))}catch(Ar){lr(ht[0][3],Ar)}}function _t(jn){at("next",jn)}function Fn(jn){at("throw",jn)}function lr(jn,Kn){jn(Kn),ht.shift(),ht.length&&at(ht[0][0],ht[0][1])}}function bt(fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var De,Re=fe[Symbol.asyncIterator];return Re?Re.call(fe):(fe=function ye(fe){var Re="function"==typeof Symbol&&Symbol.iterator,De=Re&&fe[Re],Ze=0;if(De)return De.call(fe);if(fe&&"number"==typeof fe.length)return{next:function(){return fe&&Ze>=fe.length&&(fe=void 0),{value:fe&&fe[Ze++],done:!fe}}};throw new TypeError(Re?"Object is not iterable.":"Symbol.iterator is not defined.")}(fe),De={},Ze("next"),Ze("throw"),Ze("return"),De[Symbol.asyncIterator]=function(){return this},De);function Ze(ht){De[ht]=fe[ht]&&function(qt){return new Promise(function(at,Xt){!function Ne(ht,qt,at,Xt){Promise.resolve(Xt).then(function(_t){ht({value:_t,done:at})},qt)}(at,Xt,(qt=fe[ht](qt)).done,qt.value)})}}}M.d(et,{FC:()=>Me,KL:()=>bt,_T:()=>Fe,mG:()=>Oe,qq:()=>ge})},5e3:(jt,et,M)=>{"use strict";M.d(et,{$8M:()=>Go,$Z:()=>vw,AFp:()=>Eb,AaK:()=>Oe,CRH:()=>lb,CZH:()=>jf,CqO:()=>BE,EJc:()=>Zy,F4k:()=>n_,FYo:()=>ta,FiY:()=>Ha,G48:()=>Ab,Gf:()=>j_,GfV:()=>Rg,JOm:()=>Z,LFG:()=>Wt,LSH:()=>el,Lbi:()=>Wy,NdJ:()=>bw,O4$:()=>To,OlP:()=>zr,PXZ:()=>Gg,QGY:()=>gf,Qsj:()=>h1,R0b:()=>qu,RDi:()=>Rc,Rgc:()=>Og,SBq:()=>Nf,Sil:()=>Hf,Suo:()=>cb,TTD:()=>ua,TgZ:()=>ey,VLi:()=>wc,X6Q:()=>Ps,XFs:()=>pn,Xpm:()=>Ht,Y36:()=>pf,YKP:()=>_l,Yjl:()=>Ra,Yz7:()=>Kn,ZZ4:()=>Xn,_UZ:()=>t_,_Vd:()=>k_,_c5:()=>Ii,_uU:()=>Gh,aQg:()=>cr,c2e:()=>T1,cJS:()=>Zn,cg1:()=>wg,dDg:()=>Gi,deG:()=>Wc,dqk:()=>Un,eFA:()=>qg,g9A:()=>Ib,h0i:()=>Ng,hGG:()=>ra,iGM:()=>Vy,ifc:()=>qn,ip1:()=>I1,kL8:()=>Cf,kcU:()=>im,lG2:()=>ia,oAB:()=>Zr,q4F:()=>Qs,qLn:()=>Sp,qZA:()=>og,sBO:()=>f,sIi:()=>uf,s_b:()=>ky,soG:()=>$f,tBr:()=>Mo,tb:()=>_c,tp0:()=>Zo,uIk:()=>aw,vHH:()=>Ye,vpe:()=>yc,wAp:()=>_n,z2F:()=>Wg,zSh:()=>Qp,zs3:()=>xs});var D=M(7579),be=M(727),Q=M(8306),Fe=M(6451),xe=M(3099);function Ue(s){for(let o in s)if(s[o]===Ue)return o;throw Error("Could not find renamed property on target object.")}function Oe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Oe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const c=o.indexOf("\n");return-1===c?o:o.substring(0,c)}function Le(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const oe=Ue({__forward_ref__:Ue});function ue(s){return s.__forward_ref__=ue,s.toString=function(){return Oe(this())},s}function ye(s){return function kt(s){return"function"==typeof s&&s.hasOwnProperty(oe)&&s.__forward_ref__===ue}(s)?s():s}class Ye extends Error{constructor(o,c){super(function It(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,c)),this.code=o}}function ge(s){return"string"==typeof s?s:null==s?"":String(s)}function Me(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ge(s)}function We(s,o){const c=o?` in ${o}`:"";throw new Ye(-201,`No provider for ${Me(s)} found${c}`)}function Xt(s,o){null==s&&function _t(s,o,c,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${c} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function Kn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Zn(s){return{providers:s.providers||[],imports:s.imports||[]}}function On(s){return Os(s,Ls)||Os(s,ms)}function Os(s,o){return s.hasOwnProperty(o)?s[o]:null}function di(s){return s&&(s.hasOwnProperty(Fs)||s.hasOwnProperty(to))?s[Fs]:null}const Ls=Ue({\u0275prov:Ue}),Fs=Ue({\u0275inj:Ue}),ms=Ue({ngInjectableDef:Ue}),to=Ue({ngInjectorDef:Ue});var pn=(()=>((pn=pn||{})[pn.Default=0]="Default",pn[pn.Host=1]="Host",pn[pn.Self=2]="Self",pn[pn.SkipSelf=4]="SkipSelf",pn[pn.Optional=8]="Optional",pn))();let Us;function Er(s){const o=Us;return Us=s,o}function Aa(s,o,c){const d=On(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&pn.Optional?null:void 0!==o?o:void We(Oe(s),"Injector")}function fi(s){return{toString:s}.toString()}var Mr=(()=>((Mr=Mr||{})[Mr.OnPush=0]="OnPush",Mr[Mr.Default=1]="Default",Mr))(),qn=(()=>{return(s=qn||(qn={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",qn;var s})();const rn="undefined"!=typeof globalThis&&globalThis,mn="undefined"!=typeof window&&window,Ci="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Un=rn||"undefined"!=typeof global&&global||mn||Ci,pi={},sn=[],ve=Ue({\u0275cmp:Ue}),se=Ue({\u0275dir:Ue}),Ee=Ue({\u0275pipe:Ue}),Ie=Ue({\u0275mod:Ue}),ne=Ue({\u0275fac:Ue}),nt=Ue({__NG_ELEMENT_ID__:Ue});let Ct=0;function Ht(s){return fi(()=>{const c={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Mr.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||sn,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||qn.Emulated,id:"c",styles:s.styles||sn,_:null,setInput:null,schemas:s.schemas||null,tView:null},m=s.directives,w=s.features,T=s.pipes;return d.id+=Ct++,d.inputs=Ma(s.inputs,c),d.outputs=Ma(s.outputs),w&&w.forEach(R=>R(d)),d.directiveDefs=m?()=>("function"==typeof m?m():m).map(nr):null,d.pipeDefs=T?()=>("function"==typeof T?T():T).map(ar):null,d})}function nr(s){return $r(s)||function Rr(s){return s[se]||null}(s)}function ar(s){return function jo(s){return s[Ee]||null}(s)}const Bn={};function Zr(s){return fi(()=>{const o={type:s.type,bootstrap:s.bootstrap||sn,declarations:s.declarations||sn,imports:s.imports||sn,exports:s.exports||sn,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Bn[s.id]=s.type),o})}function Ma(s,o){if(null==s)return pi;const c={};for(const d in s)if(s.hasOwnProperty(d)){let m=s[d],w=m;Array.isArray(m)&&(w=m[1],m=m[0]),c[m]=d,o&&(o[m]=w)}return c}const ia=Ht;function Ra(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function $r(s){return s[ve]||null}function kr(s,o){const c=s[Ie]||null;if(!c&&!0===o)throw new Error(`Type ${Oe(s)} does not have '\u0275mod' property.`);return c}function Zi(s){return Array.isArray(s)&&"object"==typeof s[1]}function ws(s){return Array.isArray(s)&&!0===s[1]}function Tc(s){return 0!=(8&s.flags)}function uu(s){return 2==(2&s.flags)}function bs(s){return 1==(1&s.flags)}function ro(s){return null!==s.template}function bo(s){return 0!=(512&s[2])}function Is(s,o){return s.hasOwnProperty(ne)?s[ne]:null}class Ku{constructor(o,c,d){this.previousValue=o,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function ua(){return Sc}function Sc(s){return s.type.prototype.ngOnChanges&&(s.setInput=nm),Jf}function Jf(){const s=Zu(this),o=null==s?void 0:s.current;if(o){const c=s.previous;if(c===pi)s.previous=o;else for(let d in o)c[d]=o[d];s.current=null,this.ngOnChanges(o)}}function nm(s,o,c,d){const m=Zu(s)||function Ac(s,o){return s[ep]=o}(s,{previous:pi,current:null}),w=m.current||(m.current={}),T=m.previous,R=this.declaredInputs[c],P=T[R];w[R]=new Ku(P&&P.currentValue,o,T===pi),s[d]=o}ua.ngInherit=!0;const ep="__ngSimpleChanges__";function Zu(s){return s[ep]||null}let Mc;function Rc(s){Mc=s}function Jn(s){return!!s.listen}const du={createRenderer:(s,o)=>function ca(){return void 0!==Mc?Mc:"undefined"!=typeof document?document:void 0}()};function rr(s){for(;Array.isArray(s);)s=s[0];return s}function Yi(s,o){return rr(o[s.index])}function gr(s,o){return s.data[o]}function Pr(s,o){const c=o[s];return Zi(c)?c:c[0]}function io(s){return 4==(4&s[2])}function zs(s){return 128==(128&s[2])}function Ds(s,o){return null==o?null:s[o]}function mi(s){s[18]=0}function kc(s,o){s[5]+=o;let c=s,d=s[3];for(;null!==d&&(1===o&&1===c[5]||-1===o&&0===c[5]);)d[5]+=o,c=d,d=d[3]}const wn={lFrame:Xu(null),bindingsEnabled:!0};function sh(){return wn.bindingsEnabled}function ct(){return wn.lFrame.lView}function Wn(){return wn.lFrame.tView}function mr(){let s=ui();for(;null!==s&&64===s.type;)s=s.parent;return s}function ui(){return wn.lFrame.currentTNode}function Eo(s,o){const c=wn.lFrame;c.currentTNode=s,c.isParent=o}function Nc(){return wn.lFrame.isParent}function Pc(s,o){const c=wn.lFrame;c.bindingIndex=c.bindingRootIndex=s,ao(o)}function ao(s){wn.lFrame.currentDirectiveIndex=s}function Fc(){return wn.lFrame.currentQueryIndex}function ch(s){wn.lFrame.currentQueryIndex=s}function lh(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function hh(s,o,c){if(c&pn.SkipSelf){let m=o,w=s;for(;!(m=m.parent,null!==m||c&pn.Host||(m=lh(w),null===m||(w=w[15],10&m.type))););if(null===m)return!1;o=m,s=w}const d=wn.lFrame=Na();return d.currentTNode=o,d.lView=s,!0}function da(s){const o=Na(),c=s[1];wn.lFrame=o,o.currentTNode=c.firstChild,o.lView=s,o.tView=c,o.contextLView=s,o.bindingIndex=c.bindingStartIndex,o.inI18n=!1}function Na(){const s=wn.lFrame,o=null===s?null:s.child;return null===o?Xu(s):o}function Xu(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function dh(){const s=wn.lFrame;return wn.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Uc=dh;function Ji(){const s=dh();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function mu(s){wn.lFrame.selectedIndex=s}function To(){wn.lFrame.currentNamespace="svg"}function im(){!function Ad(){wn.lFrame.currentNamespace=null}()}function Bc(s,o){for(let c=o.directiveStart,d=o.directiveEnd;c<d;c++){const w=s.data[c].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:R,ngAfterViewInit:P,ngAfterViewChecked:$,ngOnDestroy:q}=w;T&&(s.contentHooks||(s.contentHooks=[])).push(-c,T),R&&((s.contentHooks||(s.contentHooks=[])).push(c,R),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(c,R)),P&&(s.viewHooks||(s.viewHooks=[])).push(-c,P),$&&((s.viewHooks||(s.viewHooks=[])).push(c,$),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(c,$)),null!=q&&(s.destroyHooks||(s.destroyHooks=[])).push(c,q)}}function Pa(s,o,c){vi(s,o,3,c)}function Oa(s,o,c,d){(3&s[2])===c&&vi(s,o,c,d)}function Di(s,o){let c=s[2];(3&c)===o&&(c&=2047,c+=1,s[2]=c)}function vi(s,o,c,d){const w=null!=d?d:-1,T=o.length-1;let R=0;for(let P=void 0!==d?65535&s[18]:0;P<T;P++)if("number"==typeof o[P+1]){if(R=o[P],null!=d&&R>=d)break}else o[P]<0&&(s[18]+=65536),(R<w||-1==w)&&(gh(s,c,o,P),s[18]=(4294901760&s[18])+P+2),P++}function gh(s,o,c,d){const m=c[d]<0,w=c[d+1],R=s[m?-c[d]:c[d]];if(m){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{w.call(R)}finally{}}}else try{w.call(R)}finally{}}class Vc{constructor(o,c,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function Gs(s,o,c){const d=Jn(s);let m=0;for(;m<c.length;){const w=c[m];if("number"==typeof w){if(0!==w)break;m++;const T=c[m++],R=c[m++],P=c[m++];d?s.setAttribute(o,R,P,T):o.setAttributeNS(T,R,P)}else{const T=w,R=c[++m];Hr(T)?d&&s.setProperty(o,T,R):d?s.setAttribute(o,T,R):o.setAttribute(T,R),m++}}return m}function uo(s){return 3===s||4===s||6===s}function Hr(s){return 64===s.charCodeAt(0)}function $c(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let c=-1;for(let d=0;d<o.length;d++){const m=o[d];"number"==typeof m?c=m:0===c||xd(s,c,m,null,-1===c||2===c?o[++d]:null)}}return s}function xd(s,o,c,d,m){let w=0,T=s.length;if(-1===o)T=-1;else for(;w<s.length;){const R=s[w++];if("number"==typeof R){if(R===o){T=-1;break}if(R>o){T=w-1;break}}}for(;w<s.length;){const R=s[w];if("number"==typeof R)break;if(R===c){if(null===d)return void(null!==m&&(s[w+1]=m));if(d===s[w+1])return void(s[w+2]=m)}w++,null!==d&&w++,null!==m&&w++}-1!==T&&(s.splice(T,0,o),w=T+1),s.splice(w++,0,c),null!==d&&s.splice(w++,0,d),null!==m&&s.splice(w++,0,m)}function vu(s){return-1!==s}function La(s){return 32767&s}function pa(s,o){let c=function Lr(s){return s>>16}(s),d=o;for(;c>0;)d=d[15],c--;return d}let Ho=!0;function En(s){const o=Ho;return Ho=s,o}let Rd=0;function Do(s,o){const c=wu(s,o);if(-1!==c)return c;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,_u(d.data,s),_u(o,null),_u(d.blueprint,null));const m=ns(s,o),w=s.injectorIndex;if(vu(m)){const T=La(m),R=pa(m,o),P=R[1].data;for(let $=0;$<8;$++)o[w+$]=R[T+$]|P[T+$]}return o[w+8]=m,w}function _u(s,o){s.push(0,0,0,0,0,0,0,0,o)}function wu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function ns(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,d=null,m=o;for(;null!==m;){const w=m[1],T=w.type;if(d=2===T?w.declTNode:1===T?m[6]:null,null===d)return-1;if(c++,m=m[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function bu(s,o,c){!function ts(s,o,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(nt)&&(d=c[nt]),null==d&&(d=c[nt]=Rd++);const m=255&d;o.data[s+(m>>5)]|=1<<m}(s,o,c)}function Hc(s,o,c){if(c&pn.Optional)return s;We(o,"NodeInjector")}function Fa(s,o,c,d){if(c&pn.Optional&&void 0===d&&(d=null),0==(c&(pn.Self|pn.Host))){const m=s[9],w=Er(void 0);try{return m?m.get(o,d,c&pn.Optional):Aa(o,d,c&pn.Optional)}finally{Er(w)}}return Hc(d,o,c)}function ec(s,o,c,d=pn.Default,m){if(null!==s){const w=function tc(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(nt)?s[nt]:void 0;return"number"==typeof o?o>=0?255&o:zc:o}(c);if("function"==typeof w){if(!hh(o,s,d))return d&pn.Host?Hc(m,c,d):Fa(o,c,d,m);try{const T=w(d);if(null!=T||d&pn.Optional)return T;We(c)}finally{Uc()}}else if("number"==typeof w){let T=null,R=wu(s,o),P=-1,$=d&pn.Host?o[16][6]:null;for((-1===R||d&pn.SkipSelf)&&(P=-1===R?ns(s,o):o[R+8],-1!==P&&kd(d,!1)?(T=o[1],R=La(P),o=pa(P,o)):R=-1);-1!==R;){const q=o[1];if(Li(w,R,q.data)){const te=sp(R,o,c,T,d,$);if(te!==Eu)return te}P=o[R+8],-1!==P&&kd(d,o[1].data[R+8]===$)&&Li(w,R,o)?(T=q,R=La(P),o=pa(P,o)):R=-1}}}return Fa(o,c,d,m)}const Eu={};function zc(){return new zo(mr(),ct())}function sp(s,o,c,d,m,w){const T=o[1],R=T.data[s+8],q=Gc(R,T,c,null==d?uu(R)&&Ho:d!=T&&0!=(3&R.type),m&pn.Host&&w===R);return null!==q?Ua(o,T,q,R):Eu}function Gc(s,o,c,d,m){const w=s.providerIndexes,T=o.data,R=1048575&w,P=s.directiveStart,q=w>>20,de=m?R+q:s.directiveEnd;for(let Ae=d?R:R+q;Ae<de;Ae++){const st=T[Ae];if(Ae<P&&c===st||Ae>=P&&st.type===c)return Ae}if(m){const Ae=T[P];if(Ae&&ro(Ae)&&Ae.type===c)return P}return null}function Ua(s,o,c,d){let m=s[c];const w=o.data;if(function mh(s){return s instanceof Vc}(m)){const T=m;T.resolving&&function lt(s,o){const c=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ye(-200,`Circular dependency in DI detected for ${s}${c}`)}(Me(w[c]));const R=En(T.canSeeViewProviders);T.resolving=!0;const P=T.injectImpl?Er(T.injectImpl):null;hh(s,d,pn.Default);try{m=s[c]=T.factory(void 0,w,s,d),o.firstCreatePass&&c>=d.directiveStart&&function np(s,o,c){const{ngOnChanges:d,ngOnInit:m,ngDoCheck:w}=o.type.prototype;if(d){const T=Sc(o);(c.preOrderHooks||(c.preOrderHooks=[])).push(s,T),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,T)}m&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-s,m),w&&((c.preOrderHooks||(c.preOrderHooks=[])).push(s,w),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,w))}(c,w[c],o)}finally{null!==P&&Er(P),En(R),T.resolving=!1,Uc()}}return m}function Li(s,o,c){return!!(c[o+(s>>5)]&1<<s)}function kd(s,o){return!(s&pn.Self||s&pn.Host&&o)}class zo{constructor(o,c){this._tNode=o,this._lView=c}get(o,c,d){return ec(this._tNode,this._lView,o,d,c)}}function Go(s){return function Ju(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const c=s.attrs;if(c){const d=c.length;let m=0;for(;m<d;){const w=c[m];if(uo(w))break;if(0===w)m+=2;else if("number"==typeof w)for(m++;m<d&&"string"==typeof c[m];)m++;else{if(w===o)return c[m+1];m+=2}}}return null}(mr(),s)}const qo="__parameters__";function Si(s,o,c){return fi(()=>{const d=function Qr(s){return function(...c){if(s){const d=s(...c);for(const m in d)this[m]=d[m]}}}(o);function m(...w){if(this instanceof m)return d.apply(this,w),this;const T=new m(...w);return R.annotation=T,R;function R(P,$,q){const te=P.hasOwnProperty(qo)?P[qo]:Object.defineProperty(P,qo,{value:[]})[qo];for(;te.length<=q;)te.push(null);return(te[q]=te[q]||[]).push(T),P}}return c&&(m.prototype=Object.create(c.prototype)),m.prototype.ngMetadataName=s,m.annotationCls=m,m})}class zr{constructor(o,c){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Kn({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Wc=new zr("AnalyzeForEntryComponents");function is(s,o){void 0===o&&(o=s);for(let c=0;c<s.length;c++){let d=s[c];Array.isArray(d)?(o===s&&(o=s.slice(0,c)),is(d,o)):o!==s&&o.push(d)}return o}function Ui(s,o){s.forEach(c=>Array.isArray(c)?Ui(c,o):o(c))}function nc(s,o,c){o>=s.length?s.push(c):s.splice(o,0,c)}function rc(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const Cu={},Yc="__NG_DI_FLAG__",Nl="ngTempTokenPath",B=/\n/gm,re="__source",we=Ue({provide:String,useValue:Ue});let Pe;function $e(s){const o=Pe;return Pe=s,o}function Nt(s,o=pn.Default){if(void 0===Pe)throw new Ye(203,"");return null===Pe?Aa(s,void 0,o):Pe.get(s,o&pn.Optional?null:void 0,o)}function Wt(s,o=pn.Default){return(function xr(){return Us}()||Nt)(ye(s),o)}const Vn=Wt;function hn(s){const o=[];for(let c=0;c<s.length;c++){const d=ye(s[c]);if(Array.isArray(d)){if(0===d.length)throw new Ye(900,"");let m,w=pn.Default;for(let T=0;T<d.length;T++){const R=d[T],P=ho(R);"number"==typeof P?-1===P?m=R.token:w|=P:m=R}o.push(Wt(m,w))}else o.push(Wt(d))}return o}function Fr(s,o){return s[Yc]=o,s.prototype[Yc]=o,s}function ho(s){return s[Yc]}const Mo=Fr(Si("Inject",s=>({token:s})),-1),Ha=Fr(Si("Optional"),8),Zo=Fr(Si("SkipSelf"),4);class yp{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const wp=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Wa=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Gr=(()=>((Gr=Gr||{})[Gr.NONE=0]="NONE",Gr[Gr.HTML=1]="HTML",Gr[Gr.STYLE=2]="STYLE",Gr[Gr.SCRIPT=3]="SCRIPT",Gr[Gr.URL=4]="URL",Gr[Gr.RESOURCE_URL=5]="RESOURCE_URL",Gr))();function el(s){const o=function Sh(){const s=ct();return s&&s[12]}();return o?o.sanitize(Gr.URL,s)||"":function oc(s,o){const c=function Ih(s){return s instanceof yp&&s.getTypeName()||null}(s);if(null!=c&&c!==o){if("ResourceURL"===c&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===o}(s,"URL")?function Qo(s){return s instanceof yp?s.changingThisBreaksApplicationSecurity:s}(s):function Vd(s){return(s=String(s)).match(wp)||s.match(Wa)?s:"unsafe:"+s}(ge(s))}const Ah="__ngContext__";function Vi(s,o){s[Ah]=o}function Dp(s){const o=function Ol(s){return s[Ah]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Za(s){return s.ngOriginalError}function b0(s,...o){s.error(...o)}class Sp{constructor(){this._console=console}handleError(o){const c=this._findOriginalError(o),d=function w0(s){return s&&s.ngErrorLogger||b0}(o);d(this._console,"ERROR",o),c&&d(this._console,"ORIGINAL ERROR",c)}_findOriginalError(o){let c=o&&Za(o);for(;c&&Za(c);)c=Za(c);return c||null}}const xp=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Un))();function C(s){return s instanceof Function?s():s}var Z=(()=>((Z=Z||{})[Z.Important=1]="Important",Z[Z.DashCase=2]="DashCase",Z))();function He(s,o){return undefined(s,o)}function fn(s){const o=s[3];return ws(o)?o[3]:o}function Po(s){return bm(s[13])}function Mh(s){return bm(s[4])}function bm(s){for(;null!==s&&!ws(s);)s=s[4];return s}function _i(s,o,c,d,m){if(null!=d){let w,T=!1;ws(d)?w=d:Zi(d)&&(T=!0,d=d[0]);const R=rr(d);0===s&&null!==c?null==m?Dm(o,c,R):Nh(o,c,R,m||null,!0):1===s&&null!==c?Nh(o,c,R,m||null,!0):2===s?function Qb(s,o,c){const d=Ks(s,o);d&&function I0(s,o,c,d){Jn(s)?s.removeChild(o,c,d):o.removeChild(c)}(s,d,o,c)}(o,R,T):3===s&&o.destroyNode(R),null!=w&&function Np(s,o,c,d,m){const w=c[7];w!==rr(c)&&_i(o,s,d,w,m);for(let R=10;R<c.length;R++){const P=c[R];Sm(P[1],P,s,o,d,w)}}(o,s,w,c,m)}}function Ws(s,o,c){if(Jn(s))return s.createElement(o,c);{const d=null!==c?function Ts(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(c):null;return null===d?s.createElement(o):s.createElementNS(d,o)}}function zb(s,o){const c=s[9],d=c.indexOf(o),m=o[3];1024&o[2]&&(o[2]&=-1025,kc(m,-1)),c.splice(d,1)}function Iv(s,o){if(s.length<=10)return;const c=10+o,d=s[c];if(d){const m=d[17];null!==m&&m!==s&&zb(m,d),o>0&&(s[c-1][4]=d[4]);const w=rc(s,10+o);!function Im(s,o){Sm(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const T=w[19];null!==T&&T.detachView(w[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function Gb(s,o){if(!(256&o[2])){const c=o[11];Jn(c)&&c.destroyNode&&Sm(s,o,c,3,null,null),function ji(s){let o=s[13];if(!o)return Cv(s[1],s);for(;o;){let c=null;if(Zi(o))c=o[13];else{const d=o[10];d&&(c=d)}if(!c){for(;o&&!o[4]&&o!==s;)Zi(o)&&Cv(o[1],o),o=o[3];null===o&&(o=s),Zi(o)&&Cv(o[1],o),c=o&&o[4]}o=c}}(o)}}function Cv(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function E0(s,o){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let d=0;d<c.length;d+=2){const m=o[c[d]];if(!(m instanceof Vc)){const w=c[d+1];if(Array.isArray(w))for(let T=0;T<w.length;T+=2){const R=m[w[T]],P=w[T+1];try{P.call(R)}finally{}}else try{w.call(m)}finally{}}}}(s,o),function qb(s,o){const c=s.cleanup,d=o[7];let m=-1;if(null!==c)for(let w=0;w<c.length-1;w+=2)if("string"==typeof c[w]){const T=c[w+1],R="function"==typeof T?T(o):rr(o[T]),P=d[m=c[w+2]],$=c[w+3];"boolean"==typeof $?R.removeEventListener(c[w],P,$):$>=0?d[m=$]():d[m=-$].unsubscribe(),w+=2}else{const T=d[m=c[w+1]];c[w].call(T)}if(null!==d){for(let w=m+1;w<d.length;w++)d[w]();o[7]=null}}(s,o),1===o[1].type&&Jn(o[11])&&o[11].destroy();const c=o[17];if(null!==c&&ws(o[3])){c!==o[3]&&zb(c,o);const d=o[19];null!==d&&d.detachView(s)}}}function Y1(s,o,c){return function kh(s,o,c){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return c[0];if(2&d.flags){const m=s.data[d.directiveStart].encapsulation;if(m===qn.None||m===qn.Emulated)return null}return Yi(d,c)}(s,o.parent,c)}function Nh(s,o,c,d,m){Jn(s)?s.insertBefore(o,c,d,m):o.insertBefore(c,d,m)}function Dm(s,o,c){Jn(s)?s.appendChild(o,c):o.appendChild(c)}function Tv(s,o,c,d,m){null!==d?Nh(s,o,c,d,m):Dm(s,o,c)}function Ks(s,o){return Jn(s)?s.parentNode(o):o.parentNode}let Kb=function C0(s,o,c){return 40&s.type?Yi(s,c):null};function Rp(s,o,c,d){const m=Y1(s,d,o),w=o[11],R=function Wb(s,o,c){return Kb(s,o,c)}(d.parent||o[6],d,o);if(null!=m)if(Array.isArray(c))for(let P=0;P<c.length;P++)Tv(w,m,c[P],R,!1);else Tv(w,m,c,R,!1)}function Sv(s,o){if(null!==o){const c=o.type;if(3&c)return Yi(o,s);if(4&c)return Av(-1,s[o.index]);if(8&c){const d=o.child;if(null!==d)return Sv(s,d);{const m=s[o.index];return ws(m)?Av(-1,m):rr(m)}}if(32&c)return He(o,s)()||rr(s[o.index]);{const d=Yb(s,o);return null!==d?Array.isArray(d)?d[0]:Sv(fn(s[16]),d):Sv(s,o.next)}}return null}function Yb(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Av(s,o){const c=10+s+1;if(c<o.length){const d=o[c],m=d[1].firstChild;if(null!==m)return Sv(d,m)}return o[7]}function Xb(s,o,c,d,m,w,T){for(;null!=c;){const R=d[c.index],P=c.type;if(T&&0===o&&(R&&Vi(rr(R),d),c.flags|=4),64!=(64&c.flags))if(8&P)Xb(s,o,c.child,d,m,w,!1),_i(o,s,m,R,w);else if(32&P){const $=He(c,d);let q;for(;q=$();)_i(o,s,m,q,w);_i(o,s,m,R,w)}else 16&P?kp(s,o,d,c,m,w):_i(o,s,m,R,w);c=T?c.projectionNext:c.next}}function Sm(s,o,c,d,m,w){Xb(c,d,s.firstChild,o,m,w,!1)}function kp(s,o,c,d,m,w){const T=c[16],P=T[6].projection[d.projection];if(Array.isArray(P))for(let $=0;$<P.length;$++)_i(o,s,m,P[$],w);else Xb(s,o,P,T[3],m,w,!0)}function J1(s,o,c){Jn(s)?s.setAttribute(o,"style",c):o.style.cssText=c}function Am(s,o,c){Jn(s)?""===c?s.removeAttribute(o,"class"):s.setAttribute(o,"class",c):o.className=c}function rt(s,o,c){let d=s.length;for(;;){const m=s.indexOf(o,c);if(-1===m)return m;if(0===m||s.charCodeAt(m-1)<=32){const w=o.length;if(m+w===d||s.charCodeAt(m+w)<=32)return m}c=m+1}}const Nn="ng-template";function Pp(s,o,c){let d=0;for(;d<s.length;){let m=s[d++];if(c&&"class"===m){if(m=s[d],-1!==rt(m.toLowerCase(),o,0))return!0}else if(1===m){for(;d<s.length&&"string"==typeof(m=s[d++]);)if(m.toLowerCase()===o)return!0;return!1}}return!1}function T0(s){return 4===s.type&&s.value!==Nn}function Op(s,o,c){return o===(4!==s.type||c?s.value:Nn)}function D0(s,o,c){let d=4;const m=s.attrs||[],w=function Jb(s){for(let o=0;o<s.length;o++)if(uo(s[o]))return o;return s.length}(m);let T=!1;for(let R=0;R<o.length;R++){const P=o[R];if("number"!=typeof P){if(!T)if(4&d){if(d=2|1&d,""!==P&&!Op(s,P,c)||""===P&&1===o.length){if(Au(d))return!1;T=!0}}else{const $=8&d?P:o[++R];if(8&d&&null!==s.attrs){if(!Pp(s.attrs,$,c)){if(Au(d))return!1;T=!0}continue}const te=wi(8&d?"class":P,m,T0(s),c);if(-1===te){if(Au(d))return!1;T=!0;continue}if(""!==$){let de;de=te>w?"":m[te+1].toLowerCase();const Ae=8&d?de:null;if(Ae&&-1!==rt(Ae,$,0)||2&d&&$!==de){if(Au(d))return!1;T=!0}}}}else{if(!T&&!Au(d)&&!Au(P))return!1;if(T&&Au(P))continue;T=!1,d=P|1&d}}return Au(d)||T}function Au(s){return 0==(1&s)}function wi(s,o,c,d){if(null===o)return-1;let m=0;if(d||!c){let w=!1;for(;m<o.length;){const T=o[m];if(T===s)return m;if(3===T||6===T)w=!0;else{if(1===T||2===T){let R=o[++m];for(;"string"==typeof R;)R=o[++m];continue}if(4===T)break;if(0===T){m+=4;continue}}m+=w?1:2}return-1}return function eE(s,o){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const d=s[c];if("number"==typeof d)return-1;if(d===o)return c;c++}return-1}(o,s)}function xm(s,o,c=!1){for(let d=0;d<o.length;d++)if(D0(s,o[d],c))return!0;return!1}function S0(s,o){return s?":not("+o.trim()+")":o}function Ph(s){let o=s[0],c=1,d=2,m="",w=!1;for(;c<s.length;){let T=s[c];if("string"==typeof T)if(2&d){const R=s[++c];m+="["+T+(R.length>0?'="'+R+'"':"")+"]"}else 8&d?m+="."+T:4&d&&(m+=" "+T);else""!==m&&!Au(T)&&(o+=S0(w,m),m=""),d=T,w=w||!Au(d);c++}return""!==m&&(o+=S0(w,m)),o}const Pn={};function O0(s,o){const c=s.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const m=c[d],w=c[d+1];if(-1!==w){const T=s.data[w];ch(m),T.contentQueries(2,o[w],w)}}}function Ea(s,o,c,d,m,w,T,R,P,$){const q=o.blueprint.slice();return q[0]=m,q[2]=140|d,mi(q),q[3]=q[15]=s,q[8]=c,q[10]=T||s&&s[10],q[11]=R||s&&s[11],q[12]=P||s&&s[12]||null,q[9]=$||s&&s[9]||null,q[6]=w,q[16]=2==o.type?s[16]:q,q}function Xo(s,o,c,d,m){let w=s.data[o];if(null===w)w=function Pu(s,o,c,d,m){const w=ui(),T=Nc(),P=s.data[o]=function Pv(s,o,c,d,m,w){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:m,attrs:w,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?w:w&&w.parent,c,o,d,m);return null===s.firstChild&&(s.firstChild=P),null!==w&&(T?null==w.child&&null!==P.parent&&(w.child=P):null===w.next&&(w.next=P)),P}(s,o,c,d,m),function ah(){return wn.lFrame.inI18n}()&&(w.flags|=64);else if(64&w.type){w.type=c,w.value=d,w.attrs=m;const T=function gu(){const s=wn.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();w.injectorIndex=null===T?-1:T.injectorIndex}return Eo(w,!0),w}function Oh(s,o,c,d){if(0===c)return-1;const m=o.length;for(let w=0;w<c;w++)o.push(d),s.blueprint.push(d),s.data.push(null);return m}function Bp(s,o,c){da(o);try{const d=s.viewQuery;null!==d&&Zp(1,d,c);const m=s.template;null!==m&&Vp(s,o,m,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&O0(s,o),s.staticViewQueries&&Zp(2,s.viewQuery,c);const w=s.components;null!==w&&function Pm(s,o){for(let c=0;c<o.length;c++)dE(s,o[c])}(o,w)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,Ji()}}function Oo(s,o,c,d){const m=o[2];if(256!=(256&m)){da(o);try{mi(o),function Dl(s){return wn.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&Vp(s,o,c,2,d);const T=3==(3&m);if(T){const $=s.preOrderCheckHooks;null!==$&&Pa(o,$,null)}else{const $=s.preOrderHooks;null!==$&&Oa(o,$,0,null),Di(o,0)}if(function $0(s){for(let o=Po(s);null!==o;o=Mh(o)){if(!o[2])continue;const c=o[9];for(let d=0;d<c.length;d++){const m=c[d],w=m[3];0==(1024&m[2])&&kc(w,1),m[2]|=1024}}}(o),function Lv(s){for(let o=Po(s);null!==o;o=Mh(o))for(let c=10;c<o.length;c++){const d=o[c],m=d[1];zs(d)&&Oo(m,d,m.template,d[8])}}(o),null!==s.contentQueries&&O0(s,o),T){const $=s.contentCheckHooks;null!==$&&Pa(o,$)}else{const $=s.contentHooks;null!==$&&Oa(o,$,1),Di(o,1)}!function iE(s,o){const c=s.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const m=c[d];if(m<0)mu(~m);else{const w=m,T=c[++d],R=c[++d];Pc(T,w),R(2,o[w])}}}finally{mu(-1)}}(s,o);const R=s.components;null!==R&&function tf(s,o){for(let c=0;c<o.length;c++)hE(s,o[c])}(o,R);const P=s.viewQuery;if(null!==P&&Zp(2,P,d),T){const $=s.viewCheckHooks;null!==$&&Pa(o,$)}else{const $=s.viewHooks;null!==$&&Oa(o,$,2),Di(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-73,1024&o[2]&&(o[2]&=-1025,kc(o[3],-1))}finally{Ji()}}}function lc(s,o,c,d){const m=o[10],T=io(o);try{!T&&m.begin&&m.begin(),T&&Bp(s,o,d),Oo(s,o,c,d)}finally{!T&&m.end&&m.end()}}function Vp(s,o,c,d,m){const w=function Ti(){return wn.lFrame.selectedIndex}(),T=2&d;try{mu(-1),T&&o.length>20&&function A0(s,o,c,d){if(!d)if(3==(3&o[2])){const w=s.preOrderCheckHooks;null!==w&&Pa(o,w,c)}else{const w=s.preOrderHooks;null!==w&&Oa(o,w,0,c)}mu(c)}(s,o,20,!1),c(d,m)}finally{mu(w)}}function jp(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=$p(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function $p(s,o,c,d,m,w,T,R,P,$){const q=20+d,te=q+m,de=function sI(s,o){const c=[];for(let d=0;d<o;d++)c.push(d<s?null:Pn);return c}(q,te),Ae="function"==typeof $?$():$;return de[1]={type:s,blueprint:de,template:c,queries:null,viewQuery:R,declTNode:o,data:de.slice().fill(null,q),bindingStartIndex:q,expandoStartIndex:te,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof w?w():w,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:P,consts:Ae,incompleteFirstPass:!1}}function Lm(s,o,c,d){const m=z0(o);null===c?m.push(d):(m.push(c),s.firstCreatePass&&Uv(s).push(d,m.length-1))}function Hp(s,o,c){for(let d in s)if(s.hasOwnProperty(d)){const m=s[d];(c=null===c?{}:c).hasOwnProperty(d)?c[d].push(o,m):c[d]=[o,m]}return c}function Vl(s,o,c,d,m,w){const T=w.hostBindings;if(T){let R=s.hostBindingOpCodes;null===R&&(R=s.hostBindingOpCodes=[]);const P=~o.index;(function zp(s){let o=s.length;for(;o>0;){const c=s[--o];if("number"==typeof c&&c<0)return c}return 0})(R)!=P&&R.push(P),R.push(d,m,T)}}function Ou(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function cE(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function cI(s,o,c){if(c){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)c[o.exportAs[d]]=s;ro(o)&&(c[""]=s)}}function V0(s,o,c){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+c,s.providerIndexes=o}function Lh(s,o,c,d,m){s.data[d]=m;const w=m.factory||(m.factory=Is(m.type)),T=new Vc(w,ro(m),null);s.blueprint[d]=T,c[d]=T,Vl(s,o,0,d,Oh(s,c,m.hostVars,Pn),m)}function Gp(s,o,c){const d=Yi(o,s),m=jp(c),w=s[10],T=Fh(s,Ea(s,m,null,c.onPush?64:16,d,o,w,w.createRenderer(d,c),null,null));s[o.index]=T}function hc(s,o,c,d,m,w){const T=Yi(s,o);!function qp(s,o,c,d,m,w,T){if(null==w)Jn(s)?s.removeAttribute(o,m,c):o.removeAttribute(m);else{const R=null==T?ge(w):T(w,d||"",m);Jn(s)?s.setAttribute(o,m,R,c):c?o.setAttributeNS(c,m,R):o.setAttribute(m,R)}}(o[11],T,w,s.value,c,d,m)}function j0(s,o,c,d,m,w){const T=w[o];if(null!==T){const R=d.setInput;for(let P=0;P<T.length;){const $=T[P++],q=T[P++],te=T[P++];null!==R?d.setInput(c,te,$,q):c[q]=te}}}function lE(s,o){let c=null,d=0;for(;d<o.length;){const m=o[d];if(0!==m)if(5!==m){if("number"==typeof m)break;s.hasOwnProperty(m)&&(null===c&&(c=[]),c.push(m,s[m],o[d+1])),d+=2}else d+=2;else d+=4}return c}function hE(s,o){const c=Pr(o,s);if(zs(c)){const d=c[1];80&c[2]?Oo(d,c,d.template,c[8]):c[5]>0&&H0(c)}}function H0(s){for(let d=Po(s);null!==d;d=Mh(d))for(let m=10;m<d.length;m++){const w=d[m];if(1024&w[2]){const T=w[1];Oo(T,w,T.template,w[8])}else w[5]>0&&H0(w)}const c=s[1].components;if(null!==c)for(let d=0;d<c.length;d++){const m=Pr(c[d],s);zs(m)&&m[5]>0&&H0(m)}}function dE(s,o){const c=Pr(o,s),d=c[1];(function hI(s,o){for(let c=o.length;c<s.blueprint.length;c++)o.push(s.blueprint[c])})(d,c),Bp(d,c,c[8])}function Fh(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Wp(s){for(;s;){s[2]|=64;const o=fn(s);if(bo(s)&&!o)return s;s=o}return null}function Kp(s){!function Um(s){for(let o=0;o<s.components.length;o++){const c=s.components[o],d=Dp(c),m=d[1];lc(m,d,m.template,c)}}(s[8])}function Zp(s,o,c){ch(0),o(s,c)}const Fv=(()=>Promise.resolve(null))();function z0(s){return s[7]||(s[7]=[])}function Uv(s){return s.cleanup||(s.cleanup=[])}function Yp(s,o){const c=s[9],d=c?c.get(Sp,null):null;d&&d.handleError(o)}function G0(s,o,c){let d=c?s.styles:null,m=c?s.classes:null,w=0;if(null!==o)for(let T=0;T<o.length;T++){const R=o[T];"number"==typeof R?w=R:1==w?m=Le(m,R):2==w&&(d=Le(d,R+": "+o[++T]+";"))}c?s.styles=d:s.stylesWithoutHost=d,c?s.classes=m:s.classesWithoutHost=m}const Vm=new zr("INJECTOR",-1);class jm{get(o,c=Cu){if(c===Cu){const d=new Error(`NullInjectorError: No provider for ${Oe(o)}!`);throw d.name="NullInjectorError",d}return c}}const Qp=new zr("Set Injector scope."),$m={},W0={};let K0;function Z0(){return void 0===K0&&(K0=new jm),K0}function Y0(s,o=null,c=null,d){const m=Q0(s,o,c,d);return m._resolveInjectorDefTypes(),m}function Q0(s,o=null,c=null,d){return new X0(s,c,o||Z0(),d)}class X0{constructor(o,c,d,m=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const w=[];c&&Ui(c,R=>this.processProvider(R,o,c)),Ui([o],R=>this.processInjectorType(R,[],w)),this.records.set(Vm,Xp(void 0,this));const T=this.records.get(Qp);this.scope=null!=T?T.value:null,this.source=m||("object"==typeof o?null:Oe(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,c=Cu,d=pn.Default){this.assertNotDestroyed();const m=$e(this),w=Er(void 0);try{if(!(d&pn.SkipSelf)){let R=this.records.get(o);if(void 0===R){const P=function Vv(s){return"function"==typeof s||"object"==typeof s&&s instanceof zr}(o)&&On(o);R=P&&this.injectableDefInScope(P)?Xp(dc(o),$m):null,this.records.set(o,R)}if(null!=R)return this.hydrate(o,R)}return(d&pn.Self?Z0():this.parent).get(o,c=d&pn.Optional&&c===Cu?null:c)}catch(T){if("NullInjectorError"===T.name){if((T[Nl]=T[Nl]||[]).unshift(Oe(o)),m)throw T;return function $a(s,o,c,d){const m=s[Nl];throw o[re]&&m.unshift(o[re]),s.message=function xo(s,o,c,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let m=Oe(o);if(Array.isArray(o))m=o.map(Oe).join(" -> ");else if("object"==typeof o){let w=[];for(let T in o)if(o.hasOwnProperty(T)){let R=o[T];w.push(T+":"+("string"==typeof R?JSON.stringify(R):Oe(R)))}m=`{${w.join(", ")}}`}return`${c}${d?"("+d+")":""}[${m}]: ${s.replace(B,"\n  ")}`}("\n"+s.message,m,c,d),s.ngTokenPath=m,s[Nl]=null,s}(T,o,"R3InjectorError",this.source)}throw T}finally{Er(w),$e(m)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((d,m)=>o.push(Oe(m))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ye(205,!1)}processInjectorType(o,c,d){if(!(o=ye(o)))return!1;let m=di(o);const w=null==m&&o.ngModule||void 0,T=void 0===w?o:w,R=-1!==d.indexOf(T);if(void 0!==w&&(m=di(w)),null==m)return!1;if(null!=m.imports&&!R){let q;d.push(T);try{Ui(m.imports,te=>{this.processInjectorType(te,c,d)&&(void 0===q&&(q=[]),q.push(te))})}finally{}if(void 0!==q)for(let te=0;te<q.length;te++){const{ngModule:de,providers:Ae}=q[te];Ui(Ae,st=>this.processProvider(st,de,Ae||sn))}}this.injectorDefTypes.add(T);const P=Is(T)||(()=>new T);this.records.set(T,Xp(P,$m));const $=m.providers;if(null!=$&&!R){const q=o;Ui($,te=>this.processProvider(te,q,$))}return void 0!==w&&void 0!==o.providers}processProvider(o,c,d){let m=of(o=ye(o))?o:ye(o&&o.provide);const w=function vE(s,o,c){return ew(s)?Xp(void 0,s.useValue):Xp(function J0(s,o,c){let d;if(of(s)){const m=ye(s);return Is(m)||dc(m)}if(ew(s))d=()=>ye(s.useValue);else if(function ol(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...hn(s.deps||[]));else if(function Bh(s){return!(!s||!s.useExisting)}(s))d=()=>Wt(ye(s.useExisting));else{const m=ye(s&&(s.useClass||s.provide));if(!function wE(s){return!!s.deps}(s))return Is(m)||dc(m);d=()=>new m(...hn(s.deps))}return d}(s),$m)}(o);if(of(o)||!0!==o.multi)this.records.get(m);else{let T=this.records.get(m);T||(T=Xp(void 0,$m,!0),T.factory=()=>hn(T.multi),this.records.set(m,T)),m=o,T.multi.push(o)}this.records.set(m,w)}hydrate(o,c){return c.value===$m&&(c.value=W0,c.value=c.factory()),"object"==typeof c.value&&c.value&&function Bv(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this.onDestroy.add(c.value),c.value}injectableDefInScope(o){if(!o.providedIn)return!1;const c=ye(o.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function dc(s){const o=On(s),c=null!==o?o.factory:Is(s);if(null!==c)return c;if(s instanceof zr)throw new Ye(204,!1);if(s instanceof Function)return function yE(s){const o=s.length;if(o>0)throw function Wo(s,o){const c=[];for(let d=0;d<s;d++)c.push(o);return c}(o,"?"),new Ye(204,!1);const c=function gs(s){const o=s&&(s[Ls]||s[ms]);if(o){const c=function oi(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),o}return null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new Ye(204,!1)}function Xp(s,o,c=!1){return{factory:s,value:o,multi:c?[]:void 0}}function ew(s){return null!==s&&"object"==typeof s&&we in s}function of(s){return"function"==typeof s}let xs=(()=>{class s{static create(c,d){var m;if(Array.isArray(c))return Y0({name:""},d,c,"");{const w=null!==(m=c.name)&&void 0!==m?m:"";return Y0({name:w},c.parent,c.providers,w)}}}return s.THROW_IF_NOT_FOUND=Cu,s.NULL=new jm,s.\u0275prov=Kn({token:s,providedIn:"any",factory:()=>Wt(Vm)}),s.__NG_ELEMENT_ID__=-1,s})();function sw(s,o){Bc(Dp(s)[1],mr())}let Vh=null;function cl(){if(!Vh){const s=Un.Symbol;if(s&&s.iterator)Vh=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<o.length;++c){const d=o[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Vh=d)}}}return Vh}function uf(s){return!!Ms(s)&&(Array.isArray(s)||!(s instanceof Map)&&cl()in s)}function Ms(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function aw(s,o,c,d){const m=ct();return function Lo(s,o,c){return!Object.is(s[o],c)&&(s[o]=c,!0)}(m,function ka(){return wn.lFrame.bindingIndex++}(),o)&&(Wn(),hc(function yi(){const s=wn.lFrame;return gr(s.tView,s.selectedIndex)}(),m,s,o,c,d)),aw}function pf(s,o=pn.Default){const c=ct();return null===c?Wt(s,o):ec(mr(),c,ye(s),o)}function vw(){throw new Error("invalid")}function ww(s,o,c,d,m){const T=m?"class":"style";!function dI(s,o,c,d,m){for(let w=0;w<c.length;){const T=c[w++],R=c[w++],P=o[T],$=s.data[T];null!==$.setInput?$.setInput(P,m,d,R):P[R]=m}}(s,c,o.inputs[T],T,d)}function ey(s,o,c,d){const m=ct(),w=Wn(),T=20+s,R=m[11],P=m[T]=Ws(R,o,function sm(){return wn.lFrame.currentNamespace}()),$=w.firstCreatePass?function e_(s,o,c,d,m,w,T){const R=o.consts,$=Xo(o,s,2,m,Ds(R,w));return function Qa(s,o,c,d){let m=!1;if(sh()){const w=function uE(s,o,c){const d=s.directiveRegistry;let m=null;if(d)for(let w=0;w<d.length;w++){const T=d[w];xm(c,T.selectors,!1)&&(m||(m=[]),bu(Do(c,o),s,T.type),ro(T)?(cE(s,c),m.unshift(T)):m.push(T))}return m}(s,o,c),T=null===d?null:{"":-1};if(null!==w){m=!0,V0(c,s.data.length,w.length);for(let q=0;q<w.length;q++){const te=w[q];te.providersResolver&&te.providersResolver(te)}let R=!1,P=!1,$=Oh(s,o,w.length,null);for(let q=0;q<w.length;q++){const te=w[q];c.mergedAttrs=$c(c.mergedAttrs,te.hostAttrs),Lh(s,c,o,$,te),cI($,te,T),null!==te.contentQueries&&(c.flags|=8),(null!==te.hostBindings||null!==te.hostAttrs||0!==te.hostVars)&&(c.flags|=128);const de=te.type.prototype;!R&&(de.ngOnChanges||de.ngOnInit||de.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(c.index),R=!0),!P&&(de.ngOnChanges||de.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(c.index),P=!0),$++}!function Fm(s,o){const d=o.directiveEnd,m=s.data,w=o.attrs,T=[];let R=null,P=null;for(let $=o.directiveStart;$<d;$++){const q=m[$],te=q.inputs,de=null===w||T0(o)?null:lE(te,w);T.push(de),R=Hp(te,$,R),P=Hp(q.outputs,$,P)}null!==R&&(R.hasOwnProperty("class")&&(o.flags|=16),R.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=T,o.inputs=R,o.outputs=P}(s,c)}T&&function uI(s,o,c){if(o){const d=s.localNames=[];for(let m=0;m<o.length;m+=2){const w=c[o[m+1]];if(null==w)throw new Ye(-301,!1);d.push(o[m],w)}}}(c,d,T)}return c.mergedAttrs=$c(c.mergedAttrs,c.attrs),m}(o,c,$,Ds(R,T)),null!==$.attrs&&G0($,$.attrs,!1),null!==$.mergedAttrs&&G0($,$.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,$),$}(T,w,m,0,o,c,d):w.data[T];Eo($,!0);const q=$.mergedAttrs;null!==q&&Gs(R,P,q);const te=$.classes;null!==te&&Am(R,P,te);const de=$.styles;return null!==de&&J1(R,P,de),64!=(64&$.flags)&&Rp(w,m,P,$),0===function Cl(){return wn.lFrame.elementDepthCount}()&&Vi(P,m),function Dd(){wn.lFrame.elementDepthCount++}(),bs($)&&(function L0(s,o,c){!sh()||(function aE(s,o,c,d){const m=c.directiveStart,w=c.directiveEnd;s.firstCreatePass||Do(c,o),Vi(d,o);const T=c.initialInputs;for(let R=m;R<w;R++){const P=s.data[R],$=ro(P);$&&Gp(o,c,P);const q=Ua(o,s,R,c);Vi(q,o),null!==T&&j0(0,R-m,q,P,0,T),$&&(Pr(c.index,o)[8]=q)}}(s,o,c,Yi(c,o)),128==(128&c.flags)&&function aI(s,o,c){const d=c.directiveStart,m=c.directiveEnd,T=c.index,R=function Oc(){return wn.lFrame.currentDirectiveIndex}();try{mu(T);for(let P=d;P<m;P++){const $=s.data[P],q=o[P];ao(P),(null!==$.hostBindings||0!==$.hostVars||null!==$.hostAttrs)&&Ou($,q)}}finally{mu(-1),ao(R)}}(s,o,c))}(w,m,$),function sE(s,o,c){if(Tc(o)){const m=o.directiveEnd;for(let w=o.directiveStart;w<m;w++){const T=s.data[w];T.contentQueries&&T.contentQueries(1,c[w],w)}}}(w,$,m)),null!==d&&function os(s,o,c=Yi){const d=o.localNames;if(null!==d){let m=o.index+1;for(let w=0;w<d.length;w+=2){const T=d[w+1],R=-1===T?c(o,s):s[T];s[m++]=R}}}(m,$),ey}function og(){let s=mr();Nc()?function Io(){wn.lFrame.isParent=!1}():(s=s.parent,Eo(s,!1));const o=s;!function ih(){wn.lFrame.elementDepthCount--}();const c=Wn();return c.firstCreatePass&&(Bc(c,s),Tc(s)&&c.queries.elementEnd(s)),null!=o.classesWithoutHost&&function am(s){return 0!=(16&s.flags)}(o)&&ww(c,o,ct(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Or(s){return 0!=(32&s.flags)}(o)&&ww(c,o,ct(),o.stylesWithoutHost,!1),og}function t_(s,o,c,d){return ey(s,o,c,d),og(),t_}function gf(s){return!!s&&"function"==typeof s.then}function n_(s){return!!s&&"function"==typeof s.subscribe}const BE=n_;function bw(s,o,c,d){const m=ct(),w=Wn(),T=mr();return function Ew(s,o,c,d,m,w,T,R){const P=bs(d),q=s.firstCreatePass&&Uv(s),te=o[8],de=z0(o);let Ae=!0;if(3&d.type||R){const Et=Yi(d,o),nn=R?R(Et):Et,pt=de.length,Cn=R?or=>R(rr(or[d.index])):d.index;if(Jn(c)){let or=null;if(!R&&P&&(or=function VE(s,o,c,d){const m=s.cleanup;if(null!=m)for(let w=0;w<m.length-1;w+=2){const T=m[w];if(T===c&&m[w+1]===d){const R=o[7],P=m[w+2];return R.length>P?R[P]:null}"string"==typeof T&&(w+=2)}return null}(s,o,m,d.index)),null!==or)(or.__ngLastListenerFn__||or).__ngNextListenerFn__=w,or.__ngLastListenerFn__=w,Ae=!1;else{w=ag(d,o,te,w,!1);const Cr=c.listen(nn,m,w);de.push(w,Cr),q&&q.push(m,Cn,pt,pt+1)}}else w=ag(d,o,te,w,!0),nn.addEventListener(m,w,T),de.push(w),q&&q.push(m,Cn,pt,T)}else w=ag(d,o,te,w,!1);const st=d.outputs;let Rt;if(Ae&&null!==st&&(Rt=st[m])){const Et=Rt.length;if(Et)for(let nn=0;nn<Et;nn+=2){const bc=o[Rt[nn]][Rt[nn+1]].subscribe(w),vd=de.length;de.push(w,bc),q&&q.push(m,d.index,vd,-(vd+1))}}}(w,m,m[11],T,s,o,!!c,d),bw}function mf(s,o,c,d){try{return!1!==c(d)}catch(m){return Yp(s,m),!1}}function ag(s,o,c,d,m){return function w(T){if(T===Function)return d;const R=2&s.flags?Pr(s.index,o):o;0==(32&o[2])&&Wp(R);let P=mf(o,0,d,T),$=w.__ngNextListenerFn__;for(;$;)P=mf(o,0,$,T)&&P,$=$.__ngNextListenerFn__;return m&&!1===P&&(T.preventDefault(),T.returnValue=!1),P}}function Gh(s,o=""){const c=ct(),d=Wn(),m=s+20,w=d.firstCreatePass?Xo(d,m,1,o,null):d.data[m],T=c[m]=function wa(s,o){return Jn(s)?s.createText(o):s.createTextNode(o)}(c[11],o);Rp(d,c,T,w),Eo(w,!1)}const Zh=void 0;var _g=["en",[["a","p"],["AM","PM"],Zh],[["AM","PM"],Zh,Zh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zh,"{1} 'at' {0}",Zh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function yy(s){const c=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let gl={};function wg(s){const o=function Vw(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=Bw(o);if(c)return c;const d=o.split("-")[0];if(c=Bw(d),c)return c;if("en"===d)return _g;throw new Error(`Missing locale data for the locale "${s}".`)}function Cf(s){return wg(s)[_n.PluralCase]}function Bw(s){return s in gl||(gl[s]=Un.ng&&Un.ng.common&&Un.ng.common.locales&&Un.ng.common.locales[s]),gl[s]}var _n=(()=>((_n=_n||{})[_n.LocaleId=0]="LocaleId",_n[_n.DayPeriodsFormat=1]="DayPeriodsFormat",_n[_n.DayPeriodsStandalone=2]="DayPeriodsStandalone",_n[_n.DaysFormat=3]="DaysFormat",_n[_n.DaysStandalone=4]="DaysStandalone",_n[_n.MonthsFormat=5]="MonthsFormat",_n[_n.MonthsStandalone=6]="MonthsStandalone",_n[_n.Eras=7]="Eras",_n[_n.FirstDayOfWeek=8]="FirstDayOfWeek",_n[_n.WeekendRange=9]="WeekendRange",_n[_n.DateFormat=10]="DateFormat",_n[_n.TimeFormat=11]="TimeFormat",_n[_n.DateTimeFormat=12]="DateTimeFormat",_n[_n.NumberSymbols=13]="NumberSymbols",_n[_n.NumberFormats=14]="NumberFormats",_n[_n.CurrencyCode=15]="CurrencyCode",_n[_n.CurrencySymbol=16]="CurrencySymbol",_n[_n.CurrencyName=17]="CurrencyName",_n[_n.Currencies=18]="Currencies",_n[_n.Directionality=19]="Directionality",_n[_n.PluralCase=20]="PluralCase",_n[_n.ExtraData=21]="ExtraData",_n))();const vy="en-US";let Ca=vy;class Dy{}class nd{resolveComponentFactory(o){throw function mc(s){const o=Error(`No component factory found for ${Oe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let k_=(()=>{class s{}return s.NULL=new nd,s})();function Rf(){return kf(mr(),ct())}function kf(s,o){return new Nf(Yi(s,o))}let Nf=(()=>{class s{constructor(c){this.nativeElement=c}}return s.__NG_ELEMENT_ID__=Rf,s})();function UI(s){return s instanceof Nf?s.nativeElement:s}class ta{}let h1=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Pf(){const s=ct(),c=Pr(mr().index,s);return function rd(s){return s[11]}(Zi(c)?c:s)}(),s})(),Ei=(()=>{class s{}return s.\u0275prov=Kn({token:s,providedIn:"root",factory:()=>null}),s})();class Rg{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Qs=new Rg("13.3.9"),br={};function Sy(s,o,c,d,m=!1){for(;null!==c;){const w=o[c.index];if(null!==w&&d.push(rr(w)),ws(w))for(let R=10;R<w.length;R++){const P=w[R],$=P[1].firstChild;null!==$&&Sy(P[1],P,$,d)}const T=c.type;if(8&T)Sy(s,o,c.child,d);else if(32&T){const R=He(c,o);let P;for(;P=R();)d.push(P)}else if(16&T){const R=Yb(o,c);if(Array.isArray(R))d.push(...R);else{const P=fn(o[16]);Sy(P[1],P,R,d,!0)}}c=m?c.projectionNext:c.next}return d}class vl{constructor(o,c){this._lView=o,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,c=o[1];return Sy(c,o,c.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ws(o)){const c=o[8],d=c?c.indexOf(this):-1;d>-1&&(Iv(o,d),rc(c,d))}this._attachedToViewContainer=!1}Gb(this._lView[1],this._lView)}onDestroy(o){Lm(this._lView[1],this._lView,null,o)}markForCheck(){Wp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function sf(s,o,c){const d=o[10];d.begin&&d.begin();try{Oo(s,o,s.template,c)}catch(m){throw Yp(o,m),m}finally{d.end&&d.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ye(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Tm(s,o){Sm(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ye(902,"");this._appRef=o}}class yo extends vl{constructor(o){super(o),this._view=o}detectChanges(){Kp(this._view)}checkNoChanges(){}get context(){return null}}class kg extends k_{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const c=$r(o);return new si(c,this.ngModule)}}function hi(s){const o=[];for(let c in s)s.hasOwnProperty(c)&&o.push({propName:s[c],templateName:c});return o}class si extends Dy{constructor(o,c){super(),this.componentDef=o,this.ngModule=c,this.componentType=o.type,this.selector=function xv(s){return s.map(Ph).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return hi(this.componentDef.inputs)}get outputs(){return hi(this.componentDef.outputs)}create(o,c,d,m){const w=(m=m||this.ngModule)?function id(s,o){return{get:(c,d,m)=>{const w=s.get(c,br,m);return w!==br||d===br?w:o.get(c,d,m)}}}(o,m.injector):o,T=w.get(ta,du),R=w.get(Ei,null),P=T.createRenderer(null,this.componentDef),$=this.componentDef.selectors[0][0]||"div",q=d?function Om(s,o,c){if(Jn(s))return s.selectRootElement(o,c===qn.ShadowDom);let d="string"==typeof o?s.querySelector(o):o;return d.textContent="",d}(P,d,this.componentDef.encapsulation):Ws(T.createRenderer(null,this.componentDef),$,function Ay(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}($)),te=this.componentDef.onPush?576:528,de=function CE(s,o){return{components:[],scheduler:s||xp,clean:Fv,playerHandler:o||null,flags:0}}(),Ae=$p(0,null,null,1,0,null,null,null,null,null),st=Ea(null,Ae,de,te,null,null,T,P,R,w);let Rt,Et;da(st);try{const nn=function ul(s,o,c,d,m,w){const T=c[1];c[20]=s;const P=Xo(T,20,2,"#host",null),$=P.mergedAttrs=o.hostAttrs;null!==$&&(G0(P,$,!0),null!==s&&(Gs(m,s,$),null!==P.classes&&Am(m,s,P.classes),null!==P.styles&&J1(m,s,P.styles)));const q=d.createRenderer(s,o),te=Ea(c,jp(o),null,o.onPush?64:16,c[20],P,d,q,w||null,null);return T.firstCreatePass&&(bu(Do(P,c),T,o.type),cE(T,P),V0(P,c.length,1)),Fh(c,te),c[20]=te}(q,this.componentDef,st,T,P);if(q)if(d)Gs(P,q,["ng-version",Qs.full]);else{const{attrs:pt,classes:Cn}=function Mm(s){const o=[],c=[];let d=1,m=2;for(;d<s.length;){let w=s[d];if("string"==typeof w)2===m?""!==w&&o.push(w,s[++d]):8===m&&c.push(w);else{if(!Au(m))break;m=w}d++}return{attrs:o,classes:c}}(this.componentDef.selectors[0]);pt&&Gs(P,q,pt),Cn&&Cn.length>0&&Am(P,q,Cn.join(" "))}if(Et=gr(Ae,20),void 0!==c){const pt=Et.projection=[];for(let Cn=0;Cn<this.ngContentSelectors.length;Cn++){const or=c[Cn];pt.push(null!=or?Array.from(or):null)}}Rt=function qv(s,o,c,d,m){const w=c[1],T=function go(s,o,c){const d=mr();s.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),Lh(s,d,o,Oh(s,o,1,null),c));const m=Ua(o,s,d.directiveStart,d);Vi(m,o);const w=Yi(d,o);return w&&Vi(w,o),m}(w,c,o);if(d.components.push(T),s[8]=T,m&&m.forEach(P=>P(T,o)),o.contentQueries){const P=mr();o.contentQueries(1,T,P.directiveStart)}const R=mr();return!w.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(mu(R.index),Vl(c[1],R,0,R.directiveStart,R.directiveEnd,o),Ou(o,T)),T}(nn,this.componentDef,st,de,[sw]),Bp(Ae,st,null)}finally{Ji()}return new f1(this.componentType,Rt,kf(Et,st),st,Et)}}class f1 extends class Ve{}{constructor(o,c,d,m,w){super(),this.location=d,this._rootLView=m,this._tNode=w,this.instance=c,this.hostView=this.changeDetectorRef=new yo(m),this.componentType=o}get injector(){return new zo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Ng{}class _l{}const vo=new Map;class Pg extends Ng{constructor(o,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new kg(this);const d=kr(o);this._bootstrapComponents=C(d.bootstrap),this._r3Injector=Q0(o,c,[{provide:Ng,useValue:this},{provide:k_,useValue:this.componentFactoryResolver}],Oe(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,c=xs.THROW_IF_NOT_FOUND,d=pn.Default){return o===xs||o===Ng||o===Vm?this:this._r3Injector.get(o,c,d)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class nu extends _l{constructor(o){super(),this.moduleType=o,null!==kr(o)&&function sd(s){const o=new Set;!function c(d){const m=kr(d,!0),w=m.id;null!==w&&(function tb(s,o,c){if(o&&o!==c)throw new Error(`Duplicate module registered for ${s} - ${Oe(o)} vs ${Oe(o.name)}`)}(w,vo.get(w),d),vo.set(w,d));const T=C(m.imports);for(const R of T)o.has(R)||(o.add(R),c(R))}(s)}(o)}create(o){return new Pg(this.moduleType,o)}}function L_(s){return o=>{setTimeout(s,void 0,o)}}const yc=class O_ extends D.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,c,d){var m,w,T;let R=o,P=c||(()=>null),$=d;if(o&&"object"==typeof o){const te=o;R=null===(m=te.next)||void 0===m?void 0:m.bind(te),P=null===(w=te.error)||void 0===w?void 0:w.bind(te),$=null===(T=te.complete)||void 0===T?void 0:T.bind(te)}this.__isAsync&&(P=L_(P),R&&(R=L_(R)),$&&($=L_($)));const q=super.subscribe({next:R,error:P,complete:$});return o instanceof be.w0&&o.add(q),q}};function fs(){return this._results[cl()]()}class ob{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=cl(),d=ob.prototype;d[c]||(d[c]=fs)}get changes(){return this._changes||(this._changes=new yc)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,c){return this._results.reduce(o,c)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,c){const d=this;d.dirty=!1;const m=is(o);(this._changesDetected=!function up(s,o,c){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let m=s[d],w=o[d];if(c&&(m=c(m),w=c(w)),w!==m)return!1}return!0}(d._results,m,c))&&(d._results=m,d.length=m.length,d.last=m[this.length-1],d.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Og=(()=>{class s{}return s.__NG_ELEMENT_ID__=ab,s})();const F_=Og,U_=class extends F_{constructor(o,c,d){super(),this._declarationLView=o,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(o){const c=this._declarationTContainer.tViews,d=Ea(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[19];return null!==w&&(d[19]=w.createEmbeddedView(c)),Bp(c,d,o),new vl(d)}};function ab(){return Lg(mr(),ct())}function Lg(s,o){return 4&s.type?new U_(o,s,kf(s,o)):null}let ky=(()=>{class s{}return s.__NG_ELEMENT_ID__=VI,s})();function VI(){return Py(mr(),ct())}const hd=ky,Ff=class extends hd{constructor(o,c,d){super(),this._lContainer=o,this._hostTNode=c,this._hostLView=d}get element(){return kf(this._hostTNode,this._hostLView)}get injector(){return new zo(this._hostTNode,this._hostLView)}get parentInjector(){const o=ns(this._hostTNode,this._hostLView);if(vu(o)){const c=pa(o,this._hostLView),d=La(o);return new zo(c[1].data[d+8],c)}return new zo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const c=ub(this._lContainer);return null!==c&&c[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,c,d){const m=o.createEmbeddedView(c||{});return this.insert(m,d),m}createComponent(o,c,d,m,w){const T=o&&!function yh(s){return"function"==typeof s}(o);let R;if(T)R=c;else{const te=c||{};R=te.index,d=te.injector,m=te.projectableNodes,w=te.ngModuleRef}const P=T?o:new si($r(o)),$=d||this.parentInjector;if(!w&&null==P.ngModule){const de=(T?$:this.parentInjector).get(Ng,null);de&&(w=de)}const q=P.create($,m,void 0,w);return this.insert(q.hostView,R),q}insert(o,c){const d=o._lView,m=d[1];if(function ha(s){return ws(s[3])}(d)){const q=this.indexOf(o);if(-1!==q)this.detach(q);else{const te=d[3],de=new Ff(te,te[6],te[3]);de.detach(de.indexOf(o))}}const w=this._adjustIndex(c),T=this._lContainer;!function Rh(s,o,c,d){const m=10+d,w=c.length;d>0&&(c[m-1][4]=o),d<w-10?(o[4]=c[m],nc(c,10+d,o)):(c.push(o),o[4]=null),o[3]=c;const T=o[17];null!==T&&c!==T&&function Z1(s,o){const c=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===c?s[9]=[o]:c.push(o)}(T,o);const R=o[19];null!==R&&R.insertView(s),o[2]|=128}(m,d,T,w);const R=Av(w,T),P=d[11],$=Ks(P,T[7]);return null!==$&&function Cm(s,o,c,d,m,w){d[0]=m,d[6]=o,Sm(s,d,c,1,m,w)}(m,T[6],P,d,$,R),o.attachToViewContainerRef(),nc(Ny(T),w,o),o}move(o,c){return this.insert(o,c)}indexOf(o){const c=ub(this._lContainer);return null!==c?c.indexOf(o):-1}remove(o){const c=this._adjustIndex(o,-1),d=Iv(this._lContainer,c);d&&(rc(Ny(this._lContainer),c),Gb(d[1],d))}detach(o){const c=this._adjustIndex(o,-1),d=Iv(this._lContainer,c);return d&&null!=rc(Ny(this._lContainer),c)?new vl(d):null}_adjustIndex(o,c=0){return null==o?this.length+c:o}};function ub(s){return s[8]}function Ny(s){return s[8]||(s[8]=[])}function Py(s,o){let c;const d=o[s.index];if(ws(d))c=d;else{let m;if(8&s.type)m=rr(d);else{const w=o[11];m=w.createComment("");const T=Yi(s,o);Nh(w,Ks(w,T),m,function Q1(s,o){return Jn(s)?s.nextSibling(o):o.nextSibling}(w,T),!1)}o[s.index]=c=function Ov(s,o,c,d){return new Array(s,!0,!1,o,null,0,d,c,null,null)}(d,o,m,s),Fh(o,c)}return new Ff(c,s,o)}class Ly{constructor(o){this.queryList=o,this.matches=null}clone(){return new Ly(this.queryList)}setDirty(){this.queryList.setDirty()}}class dd{constructor(o=[]){this.queries=o}createEmbeddedView(o){const c=o.queries;if(null!==c){const d=null!==o.contentQueries?o.contentQueries[0]:c.length,m=[];for(let w=0;w<d;w++){const T=c.getByIndex(w);m.push(this.queries[T.indexInDeclarationView].clone())}return new dd(m)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let c=0;c<this.queries.length;c++)null!==w1(o,c).matches&&this.queries[c].setDirty()}}class B_{constructor(o,c,d=null){this.predicate=o,this.flags=c,this.read=d}}class Fy{constructor(o=[]){this.queries=o}elementStart(o,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,c)}elementEnd(o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(o)}embeddedTView(o){let c=null;for(let d=0;d<this.length;d++){const m=null!==c?c.length:0,w=this.getByIndex(d).embeddedTView(o,m);w&&(w.indexInDeclarationView=d,null!==c?c.push(w):c=[w])}return null!==c?new Fy(c):null}template(o,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,c)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class wl{constructor(o,c=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(o,c){this.isApplyingToNode(c)&&this.matchTNode(o,c)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,c){this.elementStart(o,c)}embeddedTView(o,c){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,c),new wl(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let m=0;m<d.length;m++){const w=d[m];this.matchTNodeWithReadOption(o,c,Hu(c,w)),this.matchTNodeWithReadOption(o,c,Gc(c,o,w,!1,!1))}else d===Og?4&c.type&&this.matchTNodeWithReadOption(o,c,-1):this.matchTNodeWithReadOption(o,c,Gc(c,o,d,!1,!1))}matchTNodeWithReadOption(o,c,d){if(null!==d){const m=this.metadata.read;if(null!==m)if(m===Nf||m===ky||m===Og&&4&c.type)this.addMatch(c.index,-2);else{const w=Gc(c,o,m,!1,!1);null!==w&&this.addMatch(c.index,w)}else this.addMatch(c.index,d)}}addMatch(o,c){null===this.matches?this.matches=[o,c]:this.matches.push(o,c)}}function Hu(s,o){const c=s.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===o)return c[d+1];return null}function Uy(s,o,c,d){return-1===c?function v1(s,o){return 11&s.type?kf(s,o):4&s.type?Lg(s,o):null}(o,s):-2===c?function _1(s,o,c){return c===Nf?kf(o,s):c===Og?Lg(o,s):c===ky?Py(o,s):void 0}(s,o,d):Ua(s,s[1],c,o)}function V_(s,o,c,d){const m=o[19].queries[d];if(null===m.matches){const w=s.data,T=c.matches,R=[];for(let P=0;P<T.length;P+=2){const $=T[P];R.push($<0?null:Uy(o,w[$],T[P+1],c.metadata.read))}m.matches=R}return m.matches}function By(s,o,c,d){const m=s.queries.getByIndex(c),w=m.matches;if(null!==w){const T=V_(s,o,m,c);for(let R=0;R<w.length;R+=2){const P=w[R];if(P>0)d.push(T[R/2]);else{const $=w[R+1],q=o[-P];for(let te=10;te<q.length;te++){const de=q[te];de[17]===de[3]&&By(de[1],de,$,d)}if(null!==q[9]){const te=q[9];for(let de=0;de<te.length;de++){const Ae=te[de];By(Ae[1],Ae,$,d)}}}}}return d}function Vy(s){const o=ct(),c=Wn(),d=Fc();ch(d+1);const m=w1(c,d);if(s.dirty&&io(o)===(2==(2&m.metadata.flags))){if(null===m.matches)s.reset([]);else{const w=m.crossesNgTemplate?By(c,o,d,[]):V_(c,o,m,d);s.reset(w,UI),s.notifyOnChanges()}return!0}return!1}function j_(s,o,c){const d=Wn();d.firstCreatePass&&(Fg(d,new B_(s,o,c),-1),2==(2&o)&&(d.staticViewQueries=!0)),db(d,ct(),o)}function cb(s,o,c,d){const m=Wn();if(m.firstCreatePass){const w=mr();Fg(m,new B_(o,c,d),w.index),function jI(s,o){const c=s.contentQueries||(s.contentQueries=[]);o!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,o)}(m,s),2==(2&c)&&(m.staticContentQueries=!0)}db(m,ct(),c)}function lb(){return function hb(s,o){return s[19].queries[o].queryList}(ct(),Fc())}function db(s,o,c){const d=new ob(4==(4&c));Lm(s,o,d,d.destroy),null===o[19]&&(o[19]=new dd),o[19].queries.push(new Ly(d))}function Fg(s,o,c){null===s.queries&&(s.queries=new Fy),s.queries.track(new wl(o,c))}function w1(s,o){return s.queries.getByIndex(o)}function Y_(...s){}const I1=new zr("Application Initializer");let jf=(()=>{class s{constructor(c){this.appInits=c,this.resolve=Y_,this.reject=Y_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,m)=>{this.resolve=d,this.reject=m})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let m=0;m<this.appInits.length;m++){const w=this.appInits[m]();if(gf(w))c.push(w);else if(BE(w)){const T=new Promise((R,P)=>{w.subscribe({complete:R,error:P})});c.push(T)}}Promise.all(c).then(()=>{d()}).catch(m=>{this.reject(m)}),0===c.length&&d(),this.initialized=!0}}return s.\u0275fac=function(c){return new(c||s)(Wt(I1,8))},s.\u0275prov=Kn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Eb=new zr("AppId",{providedIn:"root",factory:function C1(){return`${jg()}${jg()}${jg()}`}});function jg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ib=new zr("Platform Initializer"),Wy=new zr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),_c=new zr("appBootstrapListener");let T1=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Kn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const $f=new zr("LocaleId",{providedIn:"root",factory:()=>Vn($f,pn.Optional|pn.SkipSelf)||function Ky(){return"undefined"!=typeof $localize&&$localize.locale||vy}()}),Zy=new zr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class eh{constructor(o,c){this.ngModuleFactory=o,this.componentFactories=c}}let Hf=(()=>{class s{compileModuleSync(c){return new nu(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),w=C(kr(c).declarations).reduce((T,R)=>{const P=$r(R);return P&&T.push(new si(P)),T},[]);return new eh(d,w)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Kn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const D1=(()=>Promise.resolve(0))();function J_(s){"undefined"==typeof Zone?D1.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class qu{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yc(!1),this.onMicrotaskEmpty=new yc(!1),this.onStable=new yc(!1),this.onError=new yc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!d&&c,m.shouldCoalesceRunChangeDetection=d,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function WI(){let s=Un.requestAnimationFrame,o=Un.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Hg(s){const o=()=>{!function $g(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Un,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,e0(s),s.isCheckStableRunning=!0,Tb(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),e0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,m,w,T,R)=>{try{return t0(s),c.invokeTask(m,w,T,R)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===w.type||s.shouldCoalesceRunChangeDetection)&&o(),A1(s)}},onInvoke:(c,d,m,w,T,R,P)=>{try{return t0(s),c.invoke(m,w,T,R,P)}finally{s.shouldCoalesceRunChangeDetection&&o(),A1(s)}},onHasTask:(c,d,m,w)=>{c.hasTask(m,w),d===m&&("microTask"==w.change?(s._hasPendingMicrotasks=w.microTask,e0(s),Tb(s)):"macroTask"==w.change&&(s.hasPendingMacrotasks=w.macroTask))},onHandleError:(c,d,m,w)=>(c.handleError(m,w),s.runOutsideAngular(()=>s.onError.emit(w)),!1)})}(m)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(qu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,c,d){return this._inner.run(o,c,d)}runTask(o,c,d,m){const w=this._inner,T=w.scheduleEventTask("NgZoneEvent: "+m,o,S1,Y_,Y_);try{return w.runTask(T,c,d)}finally{w.cancelTask(T)}}runGuarded(o,c,d){return this._inner.runGuarded(o,c,d)}runOutsideAngular(o){return this._outer.run(o)}}const S1={};function Tb(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function e0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function t0(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function A1(s){s._nesting--,Tb(s)}class zf{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yc,this.onMicrotaskEmpty=new yc,this.onStable=new yc,this.onError=new yc}run(o,c,d){return o.apply(c,d)}runGuarded(o,c,d){return o.apply(c,d)}runOutsideAngular(o){return o()}runTask(o,c,d,m){return o.apply(c,d)}}let Gi=(()=>{class s{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qu.assertNotInAngularZone(),J_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())J_(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,m){let w=-1;d&&d>0&&(w=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==w),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:w,updateCb:m})}whenStable(c,d,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,d,m){return[]}}return s.\u0275fac=function(c){return new(c||s)(Wt(qu))},s.\u0275prov=Kn({token:s,factory:s.\u0275fac}),s})(),x1=(()=>{class s{constructor(){this._applications=new Map,zg.addToWindow(this)}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return zg.findTestabilityInTree(this,c,d)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Kn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class M1{addToWindow(o){}findTestabilityInTree(o,c,d){return null}}function wc(s){zg=s}let zg=new M1,bl=null;const Db=new zr("AllowMultipleToken"),Sb=new zr("PlatformOnDestroy");class Gg{constructor(o,c){this.name=o,this.token=c}}function qg(s,o,c=[]){const d=`Platform: ${o}`,m=new zr(d);return(w=[])=>{let T=Qy();if(!T||T.injector.get(Db,!1)){const R=[...c,...w,{provide:m,useValue:!0}];s?s(R):function su(s){if(bl&&!bl.get(Db,!1))throw new Ye(400,"");bl=s;const o=s.get(R1),c=s.get(Ib,null);c&&c.forEach(d=>d())}(function YI(s=[],o){return xs.create({name:o,providers:[{provide:Qp,useValue:"platform"},{provide:Sb,useValue:()=>bl=null},...s]})}(R,d))}return function Uo(s){const o=Qy();if(!o)throw new Ye(401,"");return o}()}}function Qy(){var s;return null!==(s=null==bl?void 0:bl.get(R1))&&void 0!==s?s:null}let R1=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const R=function k1(s,o){let c;return c="noop"===s?new zf:("zone.js"===s?void 0:s)||new qu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),c}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),P=[{provide:qu,useValue:R}];return R.run(()=>{const $=xs.create({providers:P,parent:this.injector,name:c.moduleType.name}),q=c.create($),te=q.injector.get(Sp,null);if(!te)throw new Ye(402,"");return R.runOutsideAngular(()=>{const de=R.onError.subscribe({next:Ae=>{te.handleError(Ae)}});q.onDestroy(()=>{n0(this._modules,q),de.unsubscribe()})}),function QI(s,o,c){try{const d=c();return gf(d)?d.catch(m=>{throw o.runOutsideAngular(()=>s.handleError(m)),m}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(te,R,()=>{const de=q.injector.get(jf);return de.runInitializers(),de.donePromise.then(()=>(function jw(s){Xt(s,"Expected localeId to be defined"),"string"==typeof s&&(Ca=s.toLowerCase().replace(/_/g,"-"))}(q.injector.get($f,vy)||vy),this._moduleDoBootstrap(q),q))})})}bootstrapModule(c,d=[]){const m=El({},d);return function KI(s,o,c){const d=new nu(c);return Promise.resolve(d)}(0,0,c).then(w=>this.bootstrapModuleFactory(w,m))}_moduleDoBootstrap(c){const d=c.injector.get(Wg);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(m=>d.bootstrap(m));else{if(!c.instance.ngDoBootstrap)throw new Ye(403,"");c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ye(404,"");this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(Sb,null);null==c||c(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(c){return new(c||s)(Wt(xs))},s.\u0275prov=Kn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function El(s,o){return Array.isArray(o)?o.reduce(El,s):Object.assign(Object.assign({},s),o)}let Wg=(()=>{class s{constructor(c,d,m,w){this._zone=c,this._injector=d,this._exceptionHandler=m,this._initStatus=w,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const T=new Q.y(P=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{P.next(this._stable),P.complete()})}),R=new Q.y(P=>{let $;this._zone.runOutsideAngular(()=>{$=this._zone.onStable.subscribe(()=>{qu.assertNotInAngularZone(),J_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,P.next(!0))})})});const q=this._zone.onUnstable.subscribe(()=>{qu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{P.next(!1)}))});return()=>{$.unsubscribe(),q.unsubscribe()}});this.isStable=(0,Fe.T)(T,R.pipe((0,xe.B)()))}bootstrap(c,d){if(!this._initStatus.done)throw new Ye(405,"");let m;m=c instanceof Dy?c:this._injector.get(k_).resolveComponentFactory(c),this.componentTypes.push(m.componentType);const w=function ZI(s){return s.isBoundToModule}(m)?void 0:this._injector.get(Ng),R=m.create(xs.NULL,[],d||m.selector,w),P=R.location.nativeElement,$=R.injector.get(Gi,null),q=$&&R.injector.get(x1);return $&&q&&q.registerApplication(P,$),R.onDestroy(()=>{this.detachView(R.hostView),n0(this.components,R),q&&q.unregisterApplication(P)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new Ye(101,"");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;n0(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(_c,[]).concat(this._bootstrapListeners).forEach(m=>m(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(c){return new(c||s)(Wt(qu),Wt(xs),Wt(Sp),Wt(jf))},s.\u0275prov=Kn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function n0(s,o){const c=s.indexOf(o);c>-1&&s.splice(c,1)}let N1=!0,r0=!1;function Ps(){return r0=!0,N1}function Ab(){if(r0)throw new Error("Cannot enable prod mode after platform setup.");N1=!1}let f=(()=>{class s{}return s.__NG_ELEMENT_ID__=g,s})();function g(s){return function v(s,o,c){if(uu(s)&&!c){const d=Pr(s.index,o);return new vl(d,d)}return 47&s.type?new vl(o[16],o):null}(mr(),ct(),16==(16&s))}class Qe{constructor(){}supports(o){return uf(o)}create(o){return new ft(o)}}const Pt=(s,o)=>o;class ft{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Pt}forEachItem(o){let c;for(c=this._itHead;null!==c;c=c._next)o(c)}forEachOperation(o){let c=this._itHead,d=this._removalsHead,m=0,w=null;for(;c||d;){const T=!d||c&&c.currentIndex<Kt(d,m,w)?c:d,R=Kt(T,m,w),P=T.currentIndex;if(T===d)m--,d=d._nextRemoved;else if(c=c._next,null==T.previousIndex)m++;else{w||(w=[]);const $=R-m,q=P-m;if($!=q){for(let de=0;de<$;de++){const Ae=de<w.length?w[de]:w[de]=0,st=Ae+de;q<=st&&st<$&&(w[de]=Ae+1)}w[T.previousIndex]=q-$}}R!==P&&o(T,R,P)}}forEachPreviousItem(o){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachMovedItem(o){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}forEachIdentityChange(o){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)o(c)}diff(o){if(null==o&&(o=[]),!uf(o))throw new Ye(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let m,w,T,c=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let R=0;R<this.length;R++)w=o[R],T=this._trackByFn(R,w),null!==c&&Object.is(c.trackById,T)?(d&&(c=this._verifyReinsertion(c,w,T,R)),Object.is(c.item,w)||this._addIdentityChange(c,w)):(c=this._mismatch(c,w,T,R),d=!0),c=c._next}else m=0,function DE(s,o){if(Array.isArray(s))for(let c=0;c<s.length;c++)o(s[c]);else{const c=s[cl()]();let d;for(;!(d=c.next()).done;)o(d.value)}}(o,R=>{T=this._trackByFn(m,R),null!==c&&Object.is(c.trackById,T)?(d&&(c=this._verifyReinsertion(c,R,T,m)),Object.is(c.item,R)||this._addIdentityChange(c,R)):(c=this._mismatch(c,R,T,m),d=!0),c=c._next,m++}),this.length=m;return this._truncate(c),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,c,d,m){let w;return null===o?w=this._itTail:(w=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._reinsertAfter(o,w,m)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,m))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._moveAfter(o,w,m)):o=this._addAfter(new le(c,d),w,m),o}_verifyReinsertion(o,c,d,m){let w=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==w?o=this._reinsertAfter(w,o._prev,m):o.currentIndex!=m&&(o.currentIndex=m,this._addToMoves(o,m)),o}_truncate(o){for(;null!==o;){const c=o._next;this._addToRemovals(this._unlink(o)),o=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const m=o._prevRemoved,w=o._nextRemoved;return null===m?this._removalsHead=w:m._nextRemoved=w,null===w?this._removalsTail=m:w._prevRemoved=m,this._insertAfter(o,c,d),this._addToMoves(o,d),o}_moveAfter(o,c,d){return this._unlink(o),this._insertAfter(o,c,d),this._addToMoves(o,d),o}_addAfter(o,c,d){return this._insertAfter(o,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,c,d){const m=null===c?this._itHead:c._next;return o._next=m,o._prev=c,null===m?this._itTail=o:m._prev=o,null===c?this._itHead=o:c._next=o,null===this._linkedRecords&&(this._linkedRecords=new Mt),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const c=o._prev,d=o._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,o}_addToMoves(o,c){return o.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Mt),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,c){return o.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class le{constructor(o,c){this.item=o,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class it{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const c=o._prevDup,d=o._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class Mt{constructor(){this.map=new Map}put(o){const c=o.trackById;let d=this.map.get(c);d||(d=new it,this.map.set(c,d)),d.add(o)}get(o,c){const m=this.map.get(o);return m?m.get(o,c):null}remove(o){const c=o.trackById;return this.map.get(c).remove(o)&&this.map.delete(c),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Kt(s,o,c){const d=s.previousIndex;if(null===d)return d;let m=0;return c&&d<c.length&&(m=c[d]),d+o+m}class Yt{constructor(){}supports(o){return o instanceof Map||Ms(o)}create(){return new Qn}}class Qn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let c;for(c=this._mapHead;null!==c;c=c._next)o(c)}forEachPreviousItem(o){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)o(c)}forEachChangedItem(o){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}diff(o){if(o){if(!(o instanceof Map||Ms(o)))throw new Ye(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,m)=>{if(c&&c.key===m)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const w=this._getOrCreateRecordForKey(m,d);c=this._insertBeforeOrAppend(c,w)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,c){if(o){const d=o._prev;return c._next=o,c._prev=d,o._prev=c,d&&(d._next=c),o===this._mapHead&&(this._mapHead=c),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(o,c){if(this._records.has(o)){const m=this._records.get(o);this._maybeAddToChanges(m,c);const w=m._prev,T=m._next;return w&&(w._next=T),T&&(T._prev=w),m._next=null,m._prev=null,m}const d=new Mn(o);return this._records.set(o,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,c){Object.is(c,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=c,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,c){o instanceof Map?o.forEach(c):Object.keys(o).forEach(d=>c(o[d],d))}}class Mn{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function tr(){return new Xn([new Qe])}let Xn=(()=>{class s{constructor(c){this.factories=c}static create(c,d){if(null!=d){const m=d.factories.slice();c=c.concat(m)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||tr()),deps:[[s,new Zo,new Ha]]}}find(c){const d=this.factories.find(m=>m.supports(c));if(null!=d)return d;throw new Ye(901,"")}}return s.\u0275prov=Kn({token:s,providedIn:"root",factory:tr}),s})();function Sr(){return new cr([new Yt])}let cr=(()=>{class s{constructor(c){this.factories=c}static create(c,d){if(d){const m=d.factories.slice();c=c.concat(m)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||Sr()),deps:[[s,new Zo,new Ha]]}}find(c){const d=this.factories.find(w=>w.supports(c));if(d)return d;throw new Ye(901,"")}}return s.\u0275prov=Kn({token:s,providedIn:"root",factory:Sr}),s})();const Ii=qg(null,"core",[]);let ra=(()=>{class s{constructor(c){}}return s.\u0275fac=function(c){return new(c||s)(Wt(Wg))},s.\u0275mod=Zr({type:s}),s.\u0275inj=Zn({}),s})()},3942:(jt,et,M)=>{"use strict";M.d(et,{Z:()=>Ye});var D=M(2090),be=M(4859),Q=M(9681),Fe=M(1877);class xe{constructor(ge,Me){this._delegate=ge,this.firebase=Me,(0,Q._addComponent)(ge,new be.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Q.deleteApp)(this._delegate)))}_getService(ge,Me=Q._DEFAULT_ENTRY_NAME){var lt;this._delegate.checkDestroyed();const bt=this._delegate.container.getProvider(ge);return!bt.isInitialized()&&"EXPLICIT"===(null===(lt=bt.getComponent())||void 0===lt?void 0:lt.instantiationMode)&&bt.initialize(),bt.getImmediate({identifier:Me})}_removeServiceInstance(ge,Me=Q._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(Me)}_addComponent(ge){(0,Q._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,Q._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Be=new D.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),oe=function Le(){const It=function Oe(It){const ge={},Me={__esModule:!0,initializeApp:function qe(vt,ce={}){const Ke=Q.initializeApp(vt,ce);if((0,D.r3)(ge,Ke.name))return ge[Ke.name];const fe=new It(Ke,Me);return ge[Ke.name]=fe,fe},app:bt,registerVersion:Q.registerVersion,setLogLevel:Q.setLogLevel,onLog:Q.onLog,apps:null,SDK_VERSION:Q.SDK_VERSION,INTERNAL:{registerComponent:function Xe(vt){const ce=vt.name,Ke=ce.replace("-compat","");if(Q._registerComponent(vt)&&"PUBLIC"===vt.type){const fe=(Re=bt())=>{if("function"!=typeof Re[Ke])throw Be.create("invalid-app-argument",{appName:ce});return Re[Ke]()};void 0!==vt.serviceProps&&(0,D.ZB)(fe,vt.serviceProps),Me[Ke]=fe,It.prototype[Ke]=function(...Re){return this._getService.bind(this,ce).apply(this,vt.multipleInstances?Re:[])}}return"PUBLIC"===vt.type?Me[Ke]:null},removeApp:function lt(vt){delete ge[vt]},useAsService:function ut(vt,ce){return"serverAuth"===ce?null:ce},modularAPIs:Q}};function bt(vt){if(!(0,D.r3)(ge,vt=vt||Q._DEFAULT_ENTRY_NAME))throw Be.create("no-app",{appName:vt});return ge[vt]}return Me.default=Me,Object.defineProperty(Me,"apps",{get:function We(){return Object.keys(ge).map(vt=>ge[vt])}}),bt.App=It,Me}(xe);return It.INTERNAL=Object.assign(Object.assign({},It.INTERNAL),{createFirebaseNamespace:Le,extendNamespace:function ge(Me){(0,D.ZB)(It,Me)},createSubscribe:D.ne,ErrorFactory:D.LL,deepExtend:D.ZB}),It}(),ue=new Fe.Yd("@firebase/app-compat");if((0,D.jU)()&&void 0!==self.firebase){ue.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const It=self.firebase.SDK_VERSION;It&&It.indexOf("LITE")>=0&&ue.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ye=oe;!function ot(It){(0,Q.registerVersion)("@firebase/app-compat","0.1.28",It)}()},9681:(jt,et,M)=>{"use strict";M.r(et),M.d(et,{FirebaseError:()=>Fe.ZR,SDK_VERSION:()=>Ls,_DEFAULT_ENTRY_NAME:()=>Xt,_addComponent:()=>jn,_addOrOverwriteComponent:()=>Kn,_apps:()=>Fn,_clearComponents:()=>Os,_components:()=>lr,_getProvider:()=>Zn,_registerComponent:()=>Ar,_removeServiceInstance:()=>On,deleteApp:()=>pn,getApp:()=>ms,getApps:()=>to,initializeApp:()=>Fs,onLog:()=>Er,registerVersion:()=>xr,setLogLevel:()=>Aa});var D=M(5861),be=M(4859),Q=M(1877),Fe=M(2090),xe=M(8766);class Ue{constructor(ne){this.container=ne}getPlatformInfoString(){return this.container.getProviders().map(nt=>{if(function Be(Ie){const ne=Ie.getComponent();return"VERSION"===(null==ne?void 0:ne.type)}(nt)){const Ct=nt.getImmediate();return`${Ct.library}/${Ct.version}`}return null}).filter(nt=>nt).join(" ")}}const Oe="@firebase/app",oe=new Q.Yd("@firebase/app"),Xt="[DEFAULT]",_t={[Oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Fn=new Map,lr=new Map;function jn(Ie,ne){try{Ie.container.addComponent(ne)}catch(nt){oe.debug(`Component ${ne.name} failed to register with FirebaseApp ${Ie.name}`,nt)}}function Kn(Ie,ne){Ie.container.addOrOverwriteComponent(ne)}function Ar(Ie){const ne=Ie.name;if(lr.has(ne))return oe.debug(`There were multiple attempts to register component ${ne}.`),!1;lr.set(ne,Ie);for(const nt of Fn.values())jn(nt,Ie);return!0}function Zn(Ie,ne){const nt=Ie.container.getProvider("heartbeat").getImmediate({optional:!0});return nt&&nt.triggerHeartbeat(),Ie.container.getProvider(ne)}function On(Ie,ne,nt=Xt){Zn(Ie,ne).clearInstance(nt)}function Os(){lr.clear()}const oi=new Fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class di{constructor(ne,nt,Ct){this._isDeleted=!1,this._options=Object.assign({},ne),this._config=Object.assign({},nt),this._name=nt.name,this._automaticDataCollectionEnabled=nt.automaticDataCollectionEnabled,this._container=Ct,this.container.addComponent(new be.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ne){this._isDeleted=ne}checkDestroyed(){if(this.isDeleted)throw oi.create("app-deleted",{appName:this._name})}}const Ls="9.8.4";function Fs(Ie,ne={}){"object"!=typeof ne&&(ne={name:ne});const nt=Object.assign({name:Xt,automaticDataCollectionEnabled:!1},ne),Ct=nt.name;if("string"!=typeof Ct||!Ct)throw oi.create("bad-app-name",{appName:String(Ct)});const Ht=Fn.get(Ct);if(Ht){if((0,Fe.vZ)(Ie,Ht.options)&&(0,Fe.vZ)(nt,Ht.config))return Ht;throw oi.create("duplicate-app",{appName:Ct})}const Dn=new be.H0(Ct);for(const ar of lr.values())Dn.addComponent(ar);const nr=new di(Ie,nt,Dn);return Fn.set(Ct,nr),nr}function ms(Ie=Xt){const ne=Fn.get(Ie);if(!ne)throw oi.create("no-app",{appName:Ie});return ne}function to(){return Array.from(Fn.values())}function pn(Ie){return Us.apply(this,arguments)}function Us(){return(Us=(0,D.Z)(function*(Ie){const ne=Ie.name;Fn.has(ne)&&(Fn.delete(ne),yield Promise.all(Ie.container.getProviders().map(nt=>nt.delete())),Ie.isDeleted=!0)})).apply(this,arguments)}function xr(Ie,ne,nt){var Ct;let Ht=null!==(Ct=_t[Ie])&&void 0!==Ct?Ct:Ie;nt&&(Ht+=`-${nt}`);const Dn=Ht.match(/\s|\//),nr=ne.match(/\s|\//);if(Dn||nr){const ar=[`Unable to register library "${Ht}" with version "${ne}":`];return Dn&&ar.push(`library name "${Ht}" contains illegal characters (whitespace or "/")`),Dn&&nr&&ar.push("and"),nr&&ar.push(`version name "${ne}" contains illegal characters (whitespace or "/")`),void oe.warn(ar.join(" "))}Ar(new be.wA(`${Ht}-version`,()=>({library:Ht,version:ne}),"VERSION"))}function Er(Ie,ne){if(null!==Ie&&"function"!=typeof Ie)throw oi.create("invalid-log-argument");(0,Q.Am)(Ie,ne)}function Aa(Ie){(0,Q.Ub)(Ie)}const Mr="firebase-heartbeat-store";let no=null;function ys(){return no||(no=(0,xe.X3)("firebase-heartbeat-database",1,{upgrade:(Ie,ne)=>{0===ne&&Ie.createObjectStore(Mr)}}).catch(Ie=>{throw oi.create("storage-open",{originalErrorMessage:Ie.message})})),no}function rn(){return(rn=(0,D.Z)(function*(Ie){var ne;try{return(yield ys()).transaction(Mr).objectStore(Mr).get(Ki(Ie))}catch(nt){throw oi.create("storage-get",{originalErrorMessage:null===(ne=nt)||void 0===ne?void 0:ne.message})}})).apply(this,arguments)}function mn(Ie,ne){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,D.Z)(function*(Ie,ne){var nt;try{const Ht=(yield ys()).transaction(Mr,"readwrite");return yield Ht.objectStore(Mr).put(ne,Ki(Ie)),Ht.done}catch(Ct){throw oi.create("storage-set",{originalErrorMessage:null===(nt=Ct)||void 0===nt?void 0:nt.message})}})).apply(this,arguments)}function Ki(Ie){return`${Ie.name}!${Ie.options.appId}`}class Pi{constructor(ne){this.container=ne,this._heartbeatsCache=null;const nt=this.container.getProvider("app").getImmediate();this._storage=new ve(nt),this._heartbeatsCachePromise=this._storage.read().then(Ct=>(this._heartbeatsCache=Ct,Ct))}triggerHeartbeat(){var ne=this;return(0,D.Z)(function*(){const Ct=ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ht=pi();if(null===ne._heartbeatsCache&&(ne._heartbeatsCache=yield ne._heartbeatsCachePromise),ne._heartbeatsCache.lastSentHeartbeatDate!==Ht&&!ne._heartbeatsCache.heartbeats.some(Dn=>Dn.date===Ht))return ne._heartbeatsCache.heartbeats.push({date:Ht,agent:Ct}),ne._heartbeatsCache.heartbeats=ne._heartbeatsCache.heartbeats.filter(Dn=>{const nr=new Date(Dn.date).valueOf();return Date.now()-nr<=2592e6}),ne._storage.overwrite(ne._heartbeatsCache)})()}getHeartbeatsHeader(){var ne=this;return(0,D.Z)(function*(){if(null===ne._heartbeatsCache&&(yield ne._heartbeatsCachePromise),null===ne._heartbeatsCache||0===ne._heartbeatsCache.heartbeats.length)return"";const nt=pi(),{heartbeatsToSend:Ct,unsentEntries:Ht}=function sn(Ie,ne=1024){const nt=[];let Ct=Ie.slice();for(const Ht of Ie){const Dn=nt.find(nr=>nr.agent===Ht.agent);if(Dn){if(Dn.dates.push(Ht.date),se(nt)>ne){Dn.dates.pop();break}}else if(nt.push({agent:Ht.agent,dates:[Ht.date]}),se(nt)>ne){nt.pop();break}Ct=Ct.slice(1)}return{heartbeatsToSend:nt,unsentEntries:Ct}}(ne._heartbeatsCache.heartbeats),Dn=(0,Fe.L)(JSON.stringify({version:2,heartbeats:Ct}));return ne._heartbeatsCache.lastSentHeartbeatDate=nt,Ht.length>0?(ne._heartbeatsCache.heartbeats=Ht,yield ne._storage.overwrite(ne._heartbeatsCache)):(ne._heartbeatsCache.heartbeats=[],ne._storage.overwrite(ne._heartbeatsCache)),Dn})()}}function pi(){return(new Date).toISOString().substring(0,10)}class ve{constructor(ne){this.app=ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.Z)(function*(){return!!(0,Fe.hl)()&&(0,Fe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ne=this;return(0,D.Z)(function*(){return(yield ne._canUseIndexedDBPromise)&&(yield function qn(Ie){return rn.apply(this,arguments)}(ne.app))||{heartbeats:[]}})()}overwrite(ne){var nt=this;return(0,D.Z)(function*(){var Ct;if(yield nt._canUseIndexedDBPromise){const Dn=yield nt.read();return mn(nt.app,{lastSentHeartbeatDate:null!==(Ct=ne.lastSentHeartbeatDate)&&void 0!==Ct?Ct:Dn.lastSentHeartbeatDate,heartbeats:ne.heartbeats})}})()}add(ne){var nt=this;return(0,D.Z)(function*(){var Ct;if(yield nt._canUseIndexedDBPromise){const Dn=yield nt.read();return mn(nt.app,{lastSentHeartbeatDate:null!==(Ct=ne.lastSentHeartbeatDate)&&void 0!==Ct?Ct:Dn.lastSentHeartbeatDate,heartbeats:[...Dn.heartbeats,...ne.heartbeats]})}})()}}function se(Ie){return(0,Fe.L)(JSON.stringify({version:2,heartbeats:Ie})).length}!function Ee(Ie){Ar(new be.wA("platform-logger",ne=>new Ue(ne),"PRIVATE")),Ar(new be.wA("heartbeat",ne=>new Pi(ne),"PRIVATE")),xr(Oe,"0.7.27",Ie),xr(Oe,"0.7.27","esm2017"),xr("fire-js","")}("")},4859:(jt,et,M)=>{"use strict";M.d(et,{H0:()=>Oe,wA:()=>Q});var D=M(5861),be=M(2090);class Q{constructor(oe,ue,ye){this.name=oe,this.instanceFactory=ue,this.type=ye,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(oe){return this.instantiationMode=oe,this}setMultipleInstances(oe){return this.multipleInstances=oe,this}setServiceProps(oe){return this.serviceProps=oe,this}setInstanceCreatedCallback(oe){return this.onInstanceCreated=oe,this}}const Fe="[DEFAULT]";class xe{constructor(oe,ue){this.name=oe,this.container=ue,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(oe){const ue=this.normalizeInstanceIdentifier(oe);if(!this.instancesDeferred.has(ue)){const ye=new be.BH;if(this.instancesDeferred.set(ue,ye),this.isInitialized(ue)||this.shouldAutoInitialize())try{const kt=this.getOrInitializeService({instanceIdentifier:ue});kt&&ye.resolve(kt)}catch(kt){}}return this.instancesDeferred.get(ue).promise}getImmediate(oe){var ue;const ye=this.normalizeInstanceIdentifier(null==oe?void 0:oe.identifier),kt=null!==(ue=null==oe?void 0:oe.optional)&&void 0!==ue&&ue;if(!this.isInitialized(ye)&&!this.shouldAutoInitialize()){if(kt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ye})}catch(ot){if(kt)return null;throw ot}}getComponent(){return this.component}setComponent(oe){if(oe.name!==this.name)throw Error(`Mismatching Component ${oe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=oe,this.shouldAutoInitialize()){if(function Be(Le){return"EAGER"===Le.instantiationMode}(oe))try{this.getOrInitializeService({instanceIdentifier:Fe})}catch(ue){}for(const[ue,ye]of this.instancesDeferred.entries()){const kt=this.normalizeInstanceIdentifier(ue);try{const ot=this.getOrInitializeService({instanceIdentifier:kt});ye.resolve(ot)}catch(ot){}}}}clearInstance(oe=Fe){this.instancesDeferred.delete(oe),this.instancesOptions.delete(oe),this.instances.delete(oe)}delete(){var oe=this;return(0,D.Z)(function*(){const ue=Array.from(oe.instances.values());yield Promise.all([...ue.filter(ye=>"INTERNAL"in ye).map(ye=>ye.INTERNAL.delete()),...ue.filter(ye=>"_delete"in ye).map(ye=>ye._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(oe=Fe){return this.instances.has(oe)}getOptions(oe=Fe){return this.instancesOptions.get(oe)||{}}initialize(oe={}){const{options:ue={}}=oe,ye=this.normalizeInstanceIdentifier(oe.instanceIdentifier);if(this.isInitialized(ye))throw Error(`${this.name}(${ye}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const kt=this.getOrInitializeService({instanceIdentifier:ye,options:ue});for(const[ot,Ye]of this.instancesDeferred.entries())ye===this.normalizeInstanceIdentifier(ot)&&Ye.resolve(kt);return kt}onInit(oe,ue){var ye;const kt=this.normalizeInstanceIdentifier(ue),ot=null!==(ye=this.onInitCallbacks.get(kt))&&void 0!==ye?ye:new Set;ot.add(oe),this.onInitCallbacks.set(kt,ot);const Ye=this.instances.get(kt);return Ye&&oe(Ye,kt),()=>{ot.delete(oe)}}invokeOnInitCallbacks(oe,ue){const ye=this.onInitCallbacks.get(ue);if(ye)for(const kt of ye)try{kt(oe,ue)}catch(ot){}}getOrInitializeService({instanceIdentifier:oe,options:ue={}}){let ye=this.instances.get(oe);if(!ye&&this.component&&(ye=this.component.instanceFactory(this.container,{instanceIdentifier:(Le=oe,Le===Fe?void 0:Le),options:ue}),this.instances.set(oe,ye),this.instancesOptions.set(oe,ue),this.invokeOnInitCallbacks(ye,oe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,oe,ye)}catch(kt){}var Le;return ye||null}normalizeInstanceIdentifier(oe=Fe){return this.component?this.component.multipleInstances?oe:Fe:oe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Oe{constructor(oe){this.name=oe,this.providers=new Map}addComponent(oe){const ue=this.getProvider(oe.name);if(ue.isComponentSet())throw new Error(`Component ${oe.name} has already been registered with ${this.name}`);ue.setComponent(oe)}addOrOverwriteComponent(oe){this.getProvider(oe.name).isComponentSet()&&this.providers.delete(oe.name),this.addComponent(oe)}getProvider(oe){if(this.providers.has(oe))return this.providers.get(oe);const ue=new xe(oe,this);return this.providers.set(oe,ue),ue}getProviders(){return Array.from(this.providers.values())}}},1877:(jt,et,M)=>{"use strict";M.d(et,{Am:()=>Le,Ub:()=>Oe,Yd:()=>Be,in:()=>be});const D=[];var be=(()=>{return(oe=be||(be={}))[oe.DEBUG=0]="DEBUG",oe[oe.VERBOSE=1]="VERBOSE",oe[oe.INFO=2]="INFO",oe[oe.WARN=3]="WARN",oe[oe.ERROR=4]="ERROR",oe[oe.SILENT=5]="SILENT",be;var oe})();const Q={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},Fe=be.INFO,xe={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},Ue=(oe,ue,...ye)=>{if(ue<oe.logLevel)return;const kt=(new Date).toISOString(),ot=xe[ue];if(!ot)throw new Error(`Attempted to log a message with an invalid logType (value: ${ue})`);console[ot](`[${kt}]  ${oe.name}:`,...ye)};class Be{constructor(ue){this.name=ue,this._logLevel=Fe,this._logHandler=Ue,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(ue){if(!(ue in be))throw new TypeError(`Invalid value "${ue}" assigned to \`logLevel\``);this._logLevel=ue}setLogLevel(ue){this._logLevel="string"==typeof ue?Q[ue]:ue}get logHandler(){return this._logHandler}set logHandler(ue){if("function"!=typeof ue)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ue}get userLogHandler(){return this._userLogHandler}set userLogHandler(ue){this._userLogHandler=ue}debug(...ue){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...ue),this._logHandler(this,be.DEBUG,...ue)}log(...ue){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...ue),this._logHandler(this,be.VERBOSE,...ue)}info(...ue){this._userLogHandler&&this._userLogHandler(this,be.INFO,...ue),this._logHandler(this,be.INFO,...ue)}warn(...ue){this._userLogHandler&&this._userLogHandler(this,be.WARN,...ue),this._logHandler(this,be.WARN,...ue)}error(...ue){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...ue),this._logHandler(this,be.ERROR,...ue)}}function Oe(oe){D.forEach(ue=>{ue.setLogLevel(oe)})}function Le(oe,ue){for(const ye of D){let kt=null;ue&&ue.level&&(kt=Q[ue.level]),ye.userLogHandler=null===oe?null:(ot,Ye,...It)=>{const ge=It.map(Me=>{if(null==Me)return null;if("string"==typeof Me)return Me;if("number"==typeof Me||"boolean"==typeof Me)return Me.toString();if(Me instanceof Error)return Me.message;try{return JSON.stringify(Me)}catch(lt){return null}}).filter(Me=>Me).join(" ");Ye>=(null!=kt?kt:ot.logLevel)&&oe({level:be[Ye].toLowerCase(),message:ge,args:It,type:ot.name})}}}},8766:(jt,et,M)=>{"use strict";M.d(et,{Lj:()=>qe,X3:()=>bt});var D=M(5861);let Q,Fe;const Be=new WeakMap,Oe=new WeakMap,Le=new WeakMap,oe=new WeakMap,ue=new WeakMap;let ot={get(ce,Ke,fe){if(ce instanceof IDBTransaction){if("done"===Ke)return Oe.get(ce);if("objectStoreNames"===Ke)return ce.objectStoreNames||Le.get(ce);if("store"===Ke)return fe.objectStoreNames[1]?void 0:fe.objectStore(fe.objectStoreNames[0])}return Me(ce[Ke])},set:(ce,Ke,fe)=>(ce[Ke]=fe,!0),has:(ce,Ke)=>ce instanceof IDBTransaction&&("done"===Ke||"store"===Ke)||Ke in ce};function ge(ce){return"function"==typeof ce?function It(ce){return ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ue(){return Fe||(Fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ce)?function(...Ke){return ce.apply(lt(this),Ke),Me(Be.get(this))}:function(...Ke){return Me(ce.apply(lt(this),Ke))}:function(Ke,...fe){const Re=ce.call(lt(this),Ke,...fe);return Le.set(Re,Ke.sort?Ke.sort():[Ke]),Me(Re)}}(ce):(ce instanceof IDBTransaction&&function kt(ce){if(Oe.has(ce))return;const Ke=new Promise((fe,Re)=>{const De=()=>{ce.removeEventListener("complete",Ze),ce.removeEventListener("error",Ne),ce.removeEventListener("abort",Ne)},Ze=()=>{fe(),De()},Ne=()=>{Re(ce.error||new DOMException("AbortError","AbortError")),De()};ce.addEventListener("complete",Ze),ce.addEventListener("error",Ne),ce.addEventListener("abort",Ne)});Oe.set(ce,Ke)}(ce),((ce,Ke)=>Ke.some(fe=>ce instanceof fe))(ce,function xe(){return Q||(Q=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ce,ot):ce)}function Me(ce){if(ce instanceof IDBRequest)return function ye(ce){const Ke=new Promise((fe,Re)=>{const De=()=>{ce.removeEventListener("success",Ze),ce.removeEventListener("error",Ne)},Ze=()=>{fe(Me(ce.result)),De()},Ne=()=>{Re(ce.error),De()};ce.addEventListener("success",Ze),ce.addEventListener("error",Ne)});return Ke.then(fe=>{fe instanceof IDBCursor&&Be.set(fe,ce)}).catch(()=>{}),ue.set(Ke,ce),Ke}(ce);if(oe.has(ce))return oe.get(ce);const Ke=ge(ce);return Ke!==ce&&(oe.set(ce,Ke),ue.set(Ke,ce)),Ke}const lt=ce=>ue.get(ce);function bt(ce,Ke,{blocked:fe,upgrade:Re,blocking:De,terminated:Ze}={}){const Ne=indexedDB.open(ce,Ke),ht=Me(Ne);return Re&&Ne.addEventListener("upgradeneeded",qt=>{Re(Me(Ne.result),qt.oldVersion,qt.newVersion,Me(Ne.transaction))}),fe&&Ne.addEventListener("blocked",()=>fe()),ht.then(qt=>{Ze&&qt.addEventListener("close",()=>Ze()),De&&qt.addEventListener("versionchange",()=>De())}).catch(()=>{}),ht}function qe(ce,{blocked:Ke}={}){const fe=indexedDB.deleteDatabase(ce);return Ke&&fe.addEventListener("blocked",()=>Ke()),Me(fe).then(()=>{})}const We=["get","getKey","getAll","getAllKeys","count"],Xe=["put","add","delete","clear"],ut=new Map;function vt(ce,Ke){if(!(ce instanceof IDBDatabase)||Ke in ce||"string"!=typeof Ke)return;if(ut.get(Ke))return ut.get(Ke);const fe=Ke.replace(/FromIndex$/,""),Re=Ke!==fe,De=Xe.includes(fe);if(!(fe in(Re?IDBIndex:IDBObjectStore).prototype)||!De&&!We.includes(fe))return;const Ze=function(){var Ne=(0,D.Z)(function*(ht,...qt){const at=this.transaction(ht,De?"readwrite":"readonly");let Xt=at.store;return Re&&(Xt=Xt.index(qt.shift())),(yield Promise.all([Xt[fe](...qt),De&&at.done]))[0]});return function(qt){return Ne.apply(this,arguments)}}();return ut.set(Ke,Ze),Ze}!function Ye(ce){ot=ce(ot)}(ce=>yx(mx({},ce),{get:(Ke,fe,Re)=>vt(Ke,fe)||ce.get(Ke,fe,Re),has:(Ke,fe)=>!!vt(Ke,fe)||ce.has(Ke,fe)}))},5861:(jt,et,M)=>{"use strict";function D(Q,Fe,xe,Ue,Be,Oe,Le){try{var oe=Q[Oe](Le),ue=oe.value}catch(ye){return void xe(ye)}oe.done?Fe(ue):Promise.resolve(ue).then(Ue,Be)}function be(Q){return function(){var Fe=this,xe=arguments;return new Promise(function(Ue,Be){var Oe=Q.apply(Fe,xe);function Le(ue){D(Oe,Ue,Be,Le,oe,"next",ue)}function oe(ue){D(Oe,Ue,Be,Le,oe,"throw",ue)}Le(void 0)})}}M.d(et,{Z:()=>be})}},jt=>{jt(jt.s=8813)}]);