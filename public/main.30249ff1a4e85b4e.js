var UN=Object.defineProperty,BN=Object.defineProperties,VN=Object.getOwnPropertyDescriptors,oM=Object.getOwnPropertySymbols,jN=Object.prototype.hasOwnProperty,$N=Object.prototype.propertyIsEnumerable,aM=(jt,et,M)=>et in jt?UN(jt,et,{enumerable:!0,configurable:!0,writable:!0,value:M}):jt[et]=M,uM=(jt,et)=>{for(var M in et||(et={}))jN.call(et,M)&&aM(jt,M,et[M]);if(oM)for(var M of oM(et))$N.call(et,M)&&aM(jt,M,et[M]);return jt},cM=(jt,et)=>BN(jt,VN(et));(self.webpackChunkmininet_optical_visualizer=self.webpackChunkmininet_optical_visualizer||[]).push([[179],{2011:(jt,et,M)=>{"use strict";M.d(et,{Dh:()=>Le,GT:()=>Be,cc:()=>ot,hO:()=>Rt,on:()=>ae,pX:()=>xe,xv:()=>Fe});var D=M(5e3),be=M(127),Q=M(5813);jt=M.hmd(jt);const Ue=["ngOnDestroy"],xe=(Me,ht,bt,We={})=>new Proxy(Me,{get:(Ke,Xe)=>bt.runOutsideAngular(()=>{var ut;if(Me[Xe])return(null===(ut=null==We?void 0:We.spy)||void 0===ut?void 0:ut.get)&&We.spy.get(Xe,Me[Xe]),Me[Xe];if(Ue.indexOf(Xe)>-1)return()=>{};const vt=ht.toPromise().then(ce=>{const Ze=ce&&ce[Xe];return"function"==typeof Ze?Ze.bind(ce):Ze&&Ze.then?Ze.then(fe=>bt.run(()=>fe)):bt.run(()=>Ze)});return new Proxy(()=>{},{get:(ce,Ze)=>vt[Ze],apply:(ce,Ze,fe)=>vt.then(Re=>{var Te;const Ye=Re&&Re(...fe);return(null===(Te=null==We?void 0:We.spy)||void 0===Te?void 0:Te.apply)&&We.spy.apply(Xe,fe,Ye),Ye})})})}),Be=(Me,ht)=>{ht.forEach(bt=>{Object.getOwnPropertyNames(bt.prototype||bt).forEach(We=>{Object.defineProperty(Me.prototype,We,Object.getOwnPropertyDescriptor(bt.prototype||bt,We))})})};class Ve{constructor(ht){return ht}}const Le=new D.OlP("angularfire2.app.options"),Fe=new D.OlP("angularfire2.app.name");function ae(Me,ht,bt){const Ke="object"==typeof bt&&bt||{};Ke.name=Ke.name||"string"==typeof bt&&bt||"[DEFAULT]";const ut=be.Z.apps.filter(vt=>vt&&vt.name===Ke.name)[0]||ht.runOutsideAngular(()=>be.Z.initializeApp(Me,Ke));try{JSON.stringify(Me)!==JSON.stringify(ut.options)&&ue("error",`${ut.name} Firebase App already initialized with different options${jt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(vt){}return new Ve(ut)}const ue=(Me,...ht)=>{(0,D.X6Q)()&&"undefined"!=typeof console&&console[Me](...ht)},ye={provide:Ve,useFactory:ae,deps:[Le,D.R0b,[new D.FiY,Fe]]};let Rt=(()=>{class Me{constructor(bt){be.Z.registerVersion("angularfire",Q.q4.full,"core"),be.Z.registerVersion("angularfire",Q.q4.full,"app-compat"),be.Z.registerVersion("angular",D.q4F.full,bt.toString())}static initializeApp(bt,We){return{ngModule:Me,providers:[{provide:Le,useValue:bt},{provide:Fe,useValue:We}]}}}return Me.\u0275fac=function(bt){return new(bt||Me)(D.LFG(D.Lbi))},Me.\u0275mod=D.oAB({type:Me}),Me.\u0275inj=D.cJS({providers:[ye]}),Me})();function ot(Me,ht,bt,We,Ke){const[,Xe,ut]=globalThis.\u0275AngularfireInstanceCache.find(vt=>vt[0]===Me)||[];if(Xe)return function Qe(Me,ht){try{return Me.toString()===ht.toString()}catch(bt){return Me===ht}}(Ke,ut)||(ge("error",`${ht} was already initialized on the ${bt} Firebase App with different settings.${Et?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Ke,was:ut})),Xe;{const vt=We();return globalThis.\u0275AngularfireInstanceCache.push([Me,vt,Ke]),vt}}const Et=!!jt.hot,ge=(Me,...ht)=>{(0,D.X6Q)()&&"undefined"!=typeof console&&console[Me](...ht)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(jt,et,M)=>{"use strict";M.d(et,{q4:()=>Ku,iC:()=>Hg,fc:()=>Xi,HU:()=>Kf,vb:()=>zy,JM:()=>jc});var D=M(5e3),be=M(5867),Q=M(5861),Ue=M(9681),xe=M(2090),Be=M(4859),Ve=M(1877),Le=M(8766);const Fe="@firebase/installations",ae="0.5.11",ye=`w:${ae}`,Rt="FIS_v2",ht=new xe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function bt(F){return F instanceof xe.ZR&&F.code.includes("request-failed")}function We({projectId:F}){return`https://firebaseinstallations.googleapis.com/v1/projects/${F}/installations`}function Ke(F){return{token:F.token,requestStatus:2,expiresIn:Re(F.expiresIn),creationTime:Date.now()}}function Xe(F,B){return ut.apply(this,arguments)}function ut(){return(ut=(0,Q.Z)(function*(F,B){const re=(yield B.json()).error;return ht.create("request-failed",{requestName:F,serverCode:re.code,serverMessage:re.message,serverStatus:re.status})})).apply(this,arguments)}function vt({apiKey:F}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F})}function ce(F,{refreshToken:B}){const W=vt(F);return W.append("Authorization",function Te(F){return`${Rt} ${F}`}(B)),W}function Ze(F){return fe.apply(this,arguments)}function fe(){return(fe=(0,Q.Z)(function*(F){const B=yield F();return B.status>=500&&B.status<600?F():B})).apply(this,arguments)}function Re(F){return Number(F.replace("s","000"))}function Ye(F,B){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,Q.Z)(function*({appConfig:F,heartbeatServiceProvider:B},{fid:W}){const re=We(F),we=vt(F),Pe=B.getImmediate({optional:!0});if(Pe){const wn=yield Pe.getHeartbeatsHeader();wn&&we.append("x-firebase-client",wn)}const Nt={method:"POST",headers:we,body:JSON.stringify({fid:W,authVersion:Rt,appId:F.appId,sdkVersion:ye})},Kt=yield Ze(()=>fetch(re,Nt));if(Kt.ok){const wn=yield Kt.json();return{fid:wn.fid||W,registrationStatus:2,refreshToken:wn.refreshToken,authToken:Ke(wn.authToken)}}throw yield Xe("Create Installation",Kt)})).apply(this,arguments)}function dt(F){return new Promise(B=>{setTimeout(B,F)})}const at=/^[cdef][\w-]{21}$/;function _t(){try{const F=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(F),F[0]=112+F[0]%16;const W=function Fn(F){return function Wt(F){return btoa(String.fromCharCode(...F)).replace(/\+/g,"-").replace(/\//g,"_")}(F).substr(0,22)}(F);return at.test(W)?W:""}catch(F){return""}}function cr(F){return`${F.appName}!${F.appId}`}const Hn=new Map;function Zn(F,B){const W=cr(F);On(W,B),function xs(F,B){const W=function ti(){return!us&&"BroadcastChannel"in self&&(us=new BroadcastChannel("[Firebase] FID Change"),us.onmessage=F=>{On(F.data.key,F.data.fid)}),us}();W&&W.postMessage({key:F,fid:B}),function oi(){0===Hn.size&&us&&(us.close(),us=null)}()}(W,B)}function On(F,B){const W=Hn.get(F);if(W)for(const re of W)re(B)}let us=null;const cs="firebase-installations-store";let Ws=null;function pn(){return Ws||(Ws=(0,Le.X3)("firebase-installations-database",1,{upgrade:(F,B)=>{0===B&&F.createObjectStore(cs)}})),Ws}function ks(F,B){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,Q.Z)(function*(F,B){const W=cr(F),we=(yield pn()).transaction(cs,"readwrite"),Pe=we.objectStore(cs),He=yield Pe.get(W);return yield Pe.put(B,W),yield we.done,(!He||He.fid!==B.fid)&&Zn(F,B.fid),B})).apply(this,arguments)}function Ir(F){return Da.apply(this,arguments)}function Da(){return(Da=(0,Q.Z)(function*(F){const B=cr(F),re=(yield pn()).transaction(cs,"readwrite");yield re.objectStore(cs).delete(B),yield re.done})).apply(this,arguments)}function Ns(F,B){return ai.apply(this,arguments)}function ai(){return(ai=(0,Q.Z)(function*(F,B){const W=cr(F),we=(yield pn()).transaction(cs,"readwrite"),Pe=we.objectStore(cs),He=yield Pe.get(W),Nt=B(He);return void 0===Nt?yield Pe.delete(W):yield Pe.put(Nt,W),yield we.done,Nt&&(!He||He.fid!==Nt.fid)&&Zn(F,Nt.fid),Nt})).apply(this,arguments)}function Rr(F){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,Q.Z)(function*(F){let B;const W=yield Ns(F.appConfig,re=>{const we=ls(re),Pe=Wn(F,we);return B=Pe.registrationPromise,Pe.installationEntry});return""===W.fid?{installationEntry:yield B}:{installationEntry:W,registrationPromise:B}})).apply(this,arguments)}function ls(F){return Ps(F||{fid:_t(),registrationStatus:0})}function Wn(F,B){if(0===B.registrationStatus){if(!navigator.onLine)return{installationEntry:B,registrationPromise:Promise.reject(ht.create("app-offline"))};const W={fid:B.fid,registrationStatus:1,registrationTime:Date.now()},re=function rn(F,B){return vn.apply(this,arguments)}(F,W);return{installationEntry:W,registrationPromise:re}}return 1===B.registrationStatus?{installationEntry:B,registrationPromise:wi(F)}:{installationEntry:B}}function vn(){return(vn=(0,Q.Z)(function*(F,B){try{const W=yield Ye(F,B);return ks(F.appConfig,W)}catch(W){throw bt(W)&&409===W.customData.serverCode?yield Ir(F.appConfig):yield ks(F.appConfig,{fid:B.fid,registrationStatus:0}),W}})).apply(this,arguments)}function wi(F){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,Q.Z)(function*(F){let B=yield Un(F.appConfig);for(;1===B.registrationStatus;)yield dt(100),B=yield Un(F.appConfig);if(0===B.registrationStatus){const{installationEntry:W,registrationPromise:re}=yield Rr(F);return re||W}return B})).apply(this,arguments)}function Un(F){return Ns(F,B=>{if(!B)throw ht.create("installation-not-found");return Ps(B)})}function Ps(F){return function Mi(F){return 1===F.registrationStatus&&F.registrationTime+1e4<Date.now()}(F)?{fid:F.fid,registrationStatus:0}:F}function ui(F,B){return sn.apply(this,arguments)}function sn(){return(sn=(0,Q.Z)(function*({appConfig:F,heartbeatServiceProvider:B},W){const re=ve(F,W),we=ce(F,W),Pe=B.getImmediate({optional:!0});if(Pe){const wn=yield Pe.getHeartbeatsHeader();wn&&we.append("x-firebase-client",wn)}const Nt={method:"POST",headers:we,body:JSON.stringify({installation:{sdkVersion:ye,appId:F.appId}})},Kt=yield Ze(()=>fetch(re,Nt));if(Kt.ok)return Ke(yield Kt.json());throw yield Xe("Generate Auth Token",Kt)})).apply(this,arguments)}function ve(F,{fid:B}){return`${We(F)}/${B}/authTokens:generate`}function se(F){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,Q.Z)(function*(F,B=!1){let W;const re=yield Ns(F.appConfig,Pe=>{if(!Dn(Pe))throw ht.create("not-registered");const He=Pe.authToken;if(!B&&ir(He))return Pe;if(1===He.requestStatus)return W=Ie(F,B),Pe;{if(!navigator.onLine)throw ht.create("app-offline");const Nt=Bn(Pe);return W=It(F,Nt),Nt}});return W?yield W:re.authToken})).apply(this,arguments)}function Ie(F,B){return ne.apply(this,arguments)}function ne(){return(ne=(0,Q.Z)(function*(F,B){let W=yield nt(F.appConfig);for(;1===W.authToken.requestStatus;)yield dt(100),W=yield nt(F.appConfig);const re=W.authToken;return 0===re.requestStatus?se(F,B):re})).apply(this,arguments)}function nt(F){return Ns(F,B=>{if(!Dn(B))throw ht.create("not-registered");return function Gr(F){return 1===F.requestStatus&&F.requestTime+1e4<Date.now()}(B.authToken)?Object.assign(Object.assign({},B),{authToken:{requestStatus:0}}):B})}function It(F,B){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,Q.Z)(function*(F,B){try{const W=yield ui(F,B),re=Object.assign(Object.assign({},B),{authToken:W});return yield ks(F.appConfig,re),W}catch(W){if(!bt(W)||401!==W.customData.serverCode&&404!==W.customData.serverCode){const re=Object.assign(Object.assign({},B),{authToken:{requestStatus:0}});yield ks(F.appConfig,re)}else yield Ir(F.appConfig);throw W}})).apply(this,arguments)}function Dn(F){return void 0!==F&&2===F.registrationStatus}function ir(F){return 2===F.requestStatus&&!function or(F){const B=Date.now();return B<F.creationTime||F.creationTime+F.expiresIn<B+36e5}(F)}function Bn(F){const B={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},F),{authToken:B})}function Aa(){return(Aa=(0,Q.Z)(function*(F){const B=F,{installationEntry:W,registrationPromise:re}=yield Rr(B);return re?re.catch(console.error):se(B).catch(console.error),W.fid})).apply(this,arguments)}function xa(){return(xa=(0,Q.Z)(function*(F,B=!1){const W=F;return yield Vr(W),(yield se(W,B)).token})).apply(this,arguments)}function Vr(F){return kr.apply(this,arguments)}function kr(){return(kr=(0,Q.Z)(function*(F){const{registrationPromise:B}=yield Rr(F);B&&(yield B)})).apply(this,arguments)}function ru(F){return ht.create("missing-app-config-values",{valueName:F})}const ni="installations",on=F=>{const B=F.getProvider("app").getImmediate(),W=function ci(F){if(!F||!F.options)throw ru("App Configuration");if(!F.name)throw ru("App Name");const B=["projectId","apiKey","appId"];for(const W of B)if(!F.options[W])throw ru(W);return{appName:F.name,projectId:F.options.projectId,apiKey:F.options.apiKey,appId:F.options.appId}}(B);return{app:B,appConfig:W,heartbeatServiceProvider:(0,Ue._getProvider)(B,"heartbeat"),_delete:()=>Promise.resolve()}},lr=F=>{const B=F.getProvider("app").getImmediate(),W=(0,Ue._getProvider)(B,ni).getImmediate();return{getId:()=>function Sa(F){return Aa.apply(this,arguments)}(W),getToken:we=>function Qo(F){return xa.apply(this,arguments)}(W,we)}};(function ds(){(0,Ue._registerComponent)(new Be.wA(ni,on,"PUBLIC")),(0,Ue._registerComponent)(new Be.wA("installations-internal",lr,"PRIVATE"))})(),(0,Ue.registerVersion)(Fe,ae),(0,Ue.registerVersion)(Fe,ae,"esm2017");const ho="@firebase/remote-config",tt=new xe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Rf{constructor(B,W,re,we){this.client=B,this.storage=W,this.storageCache=re,this.logger=we}isCachedDataFresh(B,W){if(!W)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const re=Date.now()-W,we=re<=B;return this.logger.debug(`Config fetch cache check. Cache age millis: ${re}. Cache max age millis (minimumFetchIntervalMillis setting): ${B}. Is cache hit: ${we}.`),we}fetch(B){var W=this;return(0,Q.Z)(function*(){const[re,we]=yield Promise.all([W.storage.getLastSuccessfulFetchTimestampMillis(),W.storage.getLastSuccessfulFetchResponse()]);if(we&&W.isCachedDataFresh(B.cacheMaxAgeMillis,re))return we;B.eTag=we&&we.eTag;const Pe=yield W.client.fetch(B),He=[W.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Pe.status&&He.push(W.storage.setLastSuccessfulFetchResponse(Pe)),yield Promise.all(He),Pe})()}}function kf(F=navigator){return F.languages&&F.languages[0]||F.language}class gs{constructor(B,W,re,we,Pe,He){this.firebaseInstallations=B,this.sdkVersion=W,this.namespace=re,this.projectId=we,this.apiKey=Pe,this.appId=He}fetch(B){var W=this;return(0,Q.Z)(function*(){var re,we,Pe;const[He,Nt]=yield Promise.all([W.firebaseInstallations.getId(),W.firebaseInstallations.getToken()]),wn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${W.projectId}/namespaces/${W.namespace}:fetch?key=${W.apiKey}`,Vn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":B.eTag||"*"},hn={sdk_version:W.sdkVersion,app_instance_id:He,app_instance_id_token:Nt,app_id:W.appId,language_code:kf()},Ur={method:"POST",headers:Vn,body:JSON.stringify(hn)},ro=fetch(wn,Ur),Va=new Promise((qo,$a)=>{B.signal.addEventListener(()=>{const zc=new Error("The operation was aborted.");zc.name="AbortError",$a(zc)})});let Eo;try{yield Promise.race([ro,Va]),Eo=yield ro}catch(qo){let $a="fetch-client-network";throw"AbortError"===(null===(re=qo)||void 0===re?void 0:re.name)&&($a="fetch-timeout"),tt.create($a,{originalErrorMessage:null===(we=qo)||void 0===we?void 0:we.message})}let Io=Eo.status;const ja=Eo.headers.get("ETag")||void 0;let Hc,Go;if(200===Eo.status){let qo;try{qo=yield Eo.json()}catch($a){throw tt.create("fetch-client-parse",{originalErrorMessage:null===(Pe=$a)||void 0===Pe?void 0:Pe.message})}Hc=qo.entries,Go=qo.state}if("INSTANCE_STATE_UNSPECIFIED"===Go?Io=500:"NO_CHANGE"===Go?Io=304:("NO_TEMPLATE"===Go||"EMPTY_CONFIG"===Go)&&(Hc={}),304!==Io&&200!==Io)throw tt.create("fetch-status",{httpStatus:Io});return{status:Io,eTag:ja,config:Hc}})()}}class Nf{constructor(B,W){this.client=B,this.storage=W}fetch(B){var W=this;return(0,Q.Z)(function*(){const re=(yield W.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return W.attemptFetch(B,re)})()}attemptFetch(B,{throttleEndTimeMillis:W,backoffCount:re}){var we=this;return(0,Q.Z)(function*(){yield function su(F,B){return new Promise((W,re)=>{const we=Math.max(B-Date.now(),0),Pe=setTimeout(W,we);F.addEventListener(()=>{clearTimeout(Pe),re(tt.create("fetch-throttle",{throttleEndTimeMillis:B}))})})}(B.signal,W);try{const Pe=yield we.client.fetch(B);return yield we.storage.deleteThrottleMetadata(),Pe}catch(Pe){if(!function td(F){if(!(F instanceof xe.ZR&&F.customData))return!1;const B=Number(F.customData.httpStatus);return 429===B||500===B||503===B||504===B}(Pe))throw Pe;const He={throttleEndTimeMillis:Date.now()+(0,xe.$s)(re),backoffCount:re+1};return yield we.storage.setThrottleMetadata(He),we.attemptFetch(B,He)}})()}}class nd{constructor(B,W,re,we,Pe){this.app=B,this._client=W,this._storageCache=re,this._storage=we,this._logger=Pe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function rd(F,B){var W;const re=F.target.error||void 0;return tt.create(B,{originalErrorMessage:re&&(null===(W=re)||void 0===W?void 0:W.message)})}const ou="app_namespace_store";class Hy{constructor(B,W,re,we=function $y(){return new Promise((F,B)=>{var W;try{const re=indexedDB.open("firebase_remote_config",1);re.onerror=we=>{B(rd(we,"storage-open"))},re.onsuccess=we=>{F(we.target.result)},re.onupgradeneeded=we=>{0===we.oldVersion&&we.target.result.createObjectStore(ou,{keyPath:"compositeKey"})}}catch(re){B(tt.create("storage-open",{originalErrorMessage:null===(W=re)||void 0===W?void 0:W.message}))}})}()){this.appId=B,this.appName=W,this.namespace=re,this.openDbPromise=we}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(B){return this.set("last_fetch_status",B)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(B){return this.set("last_successful_fetch_timestamp_millis",B)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(B){return this.set("last_successful_fetch_response",B)}getActiveConfig(){return this.get("active_config")}setActiveConfig(B){return this.set("active_config",B)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(B){return this.set("active_config_etag",B)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(B){return this.set("throttle_metadata",B)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(B){var W=this;return(0,Q.Z)(function*(){const re=yield W.openDbPromise;return new Promise((we,Pe)=>{var He;const Kt=re.transaction([ou],"readonly").objectStore(ou),wn=W.createCompositeKey(B);try{const Vn=Kt.get(wn);Vn.onerror=hn=>{Pe(rd(hn,"storage-get"))},Vn.onsuccess=hn=>{const Ur=hn.target.result;we(Ur?Ur.value:void 0)}}catch(Vn){Pe(tt.create("storage-get",{originalErrorMessage:null===(He=Vn)||void 0===He?void 0:He.message}))}})})()}set(B,W){var re=this;return(0,Q.Z)(function*(){const we=yield re.openDbPromise;return new Promise((Pe,He)=>{var Nt;const wn=we.transaction([ou],"readwrite").objectStore(ou),Vn=re.createCompositeKey(B);try{const hn=wn.put({compositeKey:Vn,value:W});hn.onerror=Ur=>{He(rd(Ur,"storage-set"))},hn.onsuccess=()=>{Pe()}}catch(hn){He(tt.create("storage-set",{originalErrorMessage:null===(Nt=hn)||void 0===Nt?void 0:Nt.message}))}})})()}delete(B){var W=this;return(0,Q.Z)(function*(){const re=yield W.openDbPromise;return new Promise((we,Pe)=>{var He;const Kt=re.transaction([ou],"readwrite").objectStore(ou),wn=W.createCompositeKey(B);try{const Vn=Kt.delete(wn);Vn.onerror=hn=>{Pe(rd(hn,"storage-delete"))},Vn.onsuccess=()=>{we()}}catch(Vn){Pe(tt.create("storage-delete",{originalErrorMessage:null===(He=Vn)||void 0===He?void 0:He.message}))}})})()}createCompositeKey(B){return[this.appId,this.appName,this.namespace,B].join()}}class Of{constructor(B){this.storage=B}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var B=this;return(0,Q.Z)(function*(){const W=B.storage.getLastFetchStatus(),re=B.storage.getLastSuccessfulFetchTimestampMillis(),we=B.storage.getActiveConfig(),Pe=yield W;Pe&&(B.lastFetchStatus=Pe);const He=yield re;He&&(B.lastSuccessfulFetchTimestampMillis=He);const Nt=yield we;Nt&&(B.activeConfig=Nt)})()}setLastFetchStatus(B){return this.lastFetchStatus=B,this.storage.setLastFetchStatus(B)}setLastSuccessfulFetchTimestampMillis(B){return this.lastSuccessfulFetchTimestampMillis=B,this.storage.setLastSuccessfulFetchTimestampMillis(B)}setActiveConfig(B){return this.activeConfig=B,this.storage.setActiveConfig(B)}}function Hl(){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,Q.Z)(function*(){if(!(0,xe.hl)())return!1;try{return yield(0,xe.eu)()}catch(F){return!1}})).apply(this,arguments)}!function vc(){(0,Ue._registerComponent)(new Be.wA("remote-config",function F(B,{instanceIdentifier:W}){const re=B.getProvider("app").getImmediate(),we=B.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw tt.create("registration-window");if(!(0,xe.hl)())throw tt.create("indexed-db-unavailable");const{projectId:Pe,apiKey:He,appId:Nt}=re.options;if(!Pe)throw tt.create("registration-project-id");if(!He)throw tt.create("registration-api-key");if(!Nt)throw tt.create("registration-app-id");const Kt=new Hy(Nt,re.name,W=W||"firebase"),wn=new Of(Kt),Vn=new Ve.Yd(ho);Vn.logLevel=Ve.in.ERROR;const hn=new gs(we,Ue.SDK_VERSION,W,Pe,He,Nt),Ur=new Nf(hn,Kt),ro=new Rf(Ur,Kt,wn,Vn),Va=new nd(re,ro,wn,Kt,Vn);return function zn(F){const B=(0,xe.m9)(F);B._initializePromise||(B._initializePromise=B._storageCache.loadFromStorage().then(()=>{B._isInitializationComplete=!0}))}(Va),Va},"PUBLIC").setMultipleInstances(!0)),(0,Ue.registerVersion)(ho,"0.3.10"),(0,Ue.registerVersion)(ho,"0.3.10","esm2017")}();const Ff="/firebase-messaging-sw.js",ms="/firebase-cloud-messaging-push-scope",Vu="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",_c="google.c.a.c_id",Uf="google.c.a.c_l",Fg="google.c.a.ts",Bf="google.c.a.e";var wc=(()=>{return(F=wc||(wc={})).PUSH_RECEIVED="push-received",F.NOTIFICATION_CLICKED="notification-clicked",wc;var F})();function ys(F){const B=new Uint8Array(F);return btoa(String.fromCharCode(...B)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Vf(F){const W=(F+"=".repeat((4-F.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),re=atob(W),we=new Uint8Array(re.length);for(let Pe=0;Pe<re.length;++Pe)we[Pe]=re.charCodeAt(Pe);return we}const Os="fcm_token_details_db",Ls="fcm_token_object_Store";function Ri(F){return au.apply(this,arguments)}function au(){return au=(0,Q.Z)(function*(F){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Pe=>Pe.name).includes(Os))return null;let B=null;return(yield(0,Le.X3)(Os,5,{upgrade:(re=(0,Q.Z)(function*(we,Pe,He,Nt){var Kt;if(Pe<2||!we.objectStoreNames.contains(Ls))return;const wn=Nt.objectStore(Ls),Vn=yield wn.index("fcmSenderId").get(F);if(yield wn.clear(),Vn)if(2===Pe){const hn=Vn;if(!hn.auth||!hn.p256dh||!hn.endpoint)return;B={token:hn.fcmToken,createTime:null!==(Kt=hn.createTime)&&void 0!==Kt?Kt:Date.now(),subscriptionOptions:{auth:hn.auth,p256dh:hn.p256dh,endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:"string"==typeof hn.vapidKey?hn.vapidKey:ys(hn.vapidKey)}}}else if(3===Pe){const hn=Vn;B={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:ys(hn.auth),p256dh:ys(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:ys(hn.vapidKey)}}}else if(4===Pe){const hn=Vn;B={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:ys(hn.auth),p256dh:ys(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:ys(hn.vapidKey)}}}}),function(Pe,He,Nt,Kt){return re.apply(this,arguments)})})).close(),yield(0,Le.Lj)(Os),yield(0,Le.Lj)("fcm_vapid_details_db"),yield(0,Le.Lj)("undefined"),vs(B)?B:null;var re}),au.apply(this,arguments)}function vs(F){if(!F||!F.subscriptionOptions)return!1;const{subscriptionOptions:B}=F;return"number"==typeof F.createTime&&F.createTime>0&&"string"==typeof F.token&&F.token.length>0&&"string"==typeof B.auth&&B.auth.length>0&&"string"==typeof B.p256dh&&B.p256dh.length>0&&"string"==typeof B.endpoint&&B.endpoint.length>0&&"string"==typeof B.swScope&&B.swScope.length>0&&"string"==typeof B.vapidKey&&B.vapidKey.length>0}const na="firebase-messaging-store";let id=null;function tr(){return id||(id=(0,Le.X3)("firebase-messaging-database",1,{upgrade:(F,B)=>{0===B&&F.createObjectStore(na)}})),id}function uu(F){return ra.apply(this,arguments)}function ra(){return(ra=(0,Q.Z)(function*(F){const B=Gi(F),re=yield(yield tr()).transaction(na).objectStore(na).get(B);if(re)return re;{const we=yield Ri(F.appConfig.senderId);if(we)return yield sr(F,we),we}})).apply(this,arguments)}function sr(F,B){return $u.apply(this,arguments)}function $u(){return($u=(0,Q.Z)(function*(F,B){const W=Gi(F),we=(yield tr()).transaction(na,"readwrite");return yield we.objectStore(na).put(B,W),yield we.done,B})).apply(this,arguments)}function zl(F){return cu.apply(this,arguments)}function cu(){return(cu=(0,Q.Z)(function*(F){const B=Gi(F),re=(yield tr()).transaction(na,"readwrite");yield re.objectStore(na).delete(B),yield re.done})).apply(this,arguments)}function Gi({appConfig:F}){return F.appId}const fr=new xe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Fs(F,B){return Or.apply(this,arguments)}function Or(){return(Or=(0,Q.Z)(function*(F,B){var W;const re=yield Cc(F),we=lu(B),Pe={method:"POST",headers:re,body:JSON.stringify(we)};let He;try{He=yield(yield fetch(li(F.appConfig),Pe)).json()}catch(Nt){throw fr.create("token-subscribe-failed",{errorInfo:null===(W=Nt)||void 0===W?void 0:W.toString()})}if(He.error)throw fr.create("token-subscribe-failed",{errorInfo:He.error.message});if(!He.token)throw fr.create("token-subscribe-no-token");return He.token})).apply(this,arguments)}function Ys(F,B){return Us.apply(this,arguments)}function Us(){return(Us=(0,Q.Z)(function*(F,B){var W;const re=yield Cc(F),we=lu(B.subscriptionOptions),Pe={method:"PATCH",headers:re,body:JSON.stringify(we)};let He;try{He=yield(yield fetch(`${li(F.appConfig)}/${B.token}`,Pe)).json()}catch(Nt){throw fr.create("token-update-failed",{errorInfo:null===(W=Nt)||void 0===W?void 0:W.toString()})}if(He.error)throw fr.create("token-update-failed",{errorInfo:He.error.message});if(!He.token)throw fr.create("token-update-no-token");return He.token})).apply(this,arguments)}function ia(F,B){return _s.apply(this,arguments)}function _s(){return(_s=(0,Q.Z)(function*(F,B){var W;const we={method:"DELETE",headers:yield Cc(F)};try{const He=yield(yield fetch(`${li(F.appConfig)}/${B}`,we)).json();if(He.error)throw fr.create("token-unsubscribe-failed",{errorInfo:He.error.message})}catch(Pe){throw fr.create("token-unsubscribe-failed",{errorInfo:null===(W=Pe)||void 0===W?void 0:W.toString()})}})).apply(this,arguments)}function li({projectId:F}){return`https://fcmregistrations.googleapis.com/v1/projects/${F}/registrations`}function Cc(F){return bn.apply(this,arguments)}function bn(){return(bn=(0,Q.Z)(function*({appConfig:F,installations:B}){const W=yield B.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F.apiKey,"x-goog-firebase-installations-auth":`FIS ${W}`})})).apply(this,arguments)}function lu({p256dh:F,auth:B,endpoint:W,vapidKey:re}){const we={web:{endpoint:W,auth:B,p256dh:F}};return re!==Vu&&(we.web.applicationPubKey=re),we}const od=6048e5;function ll(F){return ad.apply(this,arguments)}function ad(){return(ad=(0,Q.Z)(function*(F){const B=yield Hu(F.swRegistration,F.vapidKey),W={vapidKey:F.vapidKey,swScope:F.swRegistration.scope,endpoint:B.endpoint,auth:ys(B.getKey("auth")),p256dh:ys(B.getKey("p256dh"))},re=yield uu(F.firebaseDependencies);if(re){if(ri(re.subscriptionOptions,W))return Date.now()>=re.createTime+od?Wl(F,{token:re.token,createTime:Date.now(),subscriptionOptions:W}):re.token;try{yield ia(F.firebaseDependencies,re.token)}catch(we){console.warn(we)}return lt(F.firebaseDependencies,W)}return lt(F.firebaseDependencies,W)})).apply(this,arguments)}function Gl(F){return ql.apply(this,arguments)}function ql(){return(ql=(0,Q.Z)(function*(F){const B=yield uu(F.firebaseDependencies);B&&(yield ia(F.firebaseDependencies,B.token),yield zl(F.firebaseDependencies));const W=yield F.swRegistration.pushManager.getSubscription();return!W||W.unsubscribe()})).apply(this,arguments)}function Wl(F,B){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,Q.Z)(function*(F,B){try{const W=yield Ys(F.firebaseDependencies,B),re=Object.assign(Object.assign({},B),{token:W,createTime:Date.now()});return yield sr(F.firebaseDependencies,re),W}catch(W){throw yield Gl(F),W}})).apply(this,arguments)}function lt(F,B){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,Q.Z)(function*(F,B){const re={token:yield Fs(F,B),createTime:Date.now(),subscriptionOptions:B};return yield sr(F,re),re.token})).apply(this,arguments)}function Hu(F,B){return pr.apply(this,arguments)}function pr(){return(pr=(0,Q.Z)(function*(F,B){return(yield F.pushManager.getSubscription())||F.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Vf(B)})})).apply(this,arguments)}function ri(F,B){return B.vapidKey===F.vapidKey&&B.endpoint===F.endpoint&&B.auth===F.auth&&B.p256dh===F.p256dh}function hu(F){const B={from:F.from,collapseKey:F.collapse_key,messageId:F.fcmMessageId};return function go(F,B){if(!B.notification)return;F.notification={};const W=B.notification.title;W&&(F.notification.title=W);const re=B.notification.body;re&&(F.notification.body=re);const we=B.notification.image;we&&(F.notification.image=we)}(B,F),function Tc(F,B){!B.data||(F.data=B.data)}(B,F),function mo(F,B){var W,re,we,Pe,He;if(!B.fcmOptions&&!(null===(W=B.notification)||void 0===W?void 0:W.click_action))return;F.fcmOptions={};const Nt=null!==(we=null===(re=B.fcmOptions)||void 0===re?void 0:re.link)&&void 0!==we?we:null===(Pe=B.notification)||void 0===Pe?void 0:Pe.click_action;Nt&&(F.fcmOptions.link=Nt);const Kt=null===(He=B.fcmOptions)||void 0===He?void 0:He.analytics_label;Kt&&(F.fcmOptions.analyticsLabel=Kt)}(B,F),B}function hl(F){return"object"==typeof F&&!!F&&_c in F}function ud(F,B){const W=[];for(let re=0;re<F.length;re++)W.push(F.charAt(re)),re<B.length&&W.push(B.charAt(re));return W.join("")}function yo(F){return fr.create("missing-app-config-values",{valueName:F})}ud("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ud("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class qi{constructor(B,W,re){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const we=function Ug(F){if(!F||!F.options)throw yo("App Configuration Object");if(!F.name)throw yo("App Name");const B=["projectId","apiKey","appId","messagingSenderId"],{options:W}=F;for(const re of B)if(!W[re])throw yo(re);return{appName:F.name,projectId:W.projectId,apiKey:W.apiKey,appId:W.appId,senderId:W.messagingSenderId}}(B);this.firebaseDependencies={app:B,appConfig:we,installations:W,analyticsProvider:re}}_delete(){return Promise.resolve()}}function Xs(F){return dl.apply(this,arguments)}function dl(){return(dl=(0,Q.Z)(function*(F){var B;try{F.swRegistration=yield navigator.serviceWorker.register(Ff,{scope:ms}),F.swRegistration.update().catch(()=>{})}catch(W){throw fr.create("failed-service-worker-registration",{browserErrorMessage:null===(B=W)||void 0===B?void 0:B.message})}})).apply(this,arguments)}function Ma(F,B){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,Q.Z)(function*(F,B){if(!B&&!F.swRegistration&&(yield Xs(F)),B||!F.swRegistration){if(!(B instanceof ServiceWorkerRegistration))throw fr.create("invalid-sw-registration");F.swRegistration=B}})).apply(this,arguments)}function Kl(F,B){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,Q.Z)(function*(F,B){B?F.vapidKey=B:F.vapidKey||(F.vapidKey=Vu)})).apply(this,arguments)}function Sc(){return(Sc=(0,Q.Z)(function*(F,B){if(!navigator)throw fr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw fr.create("permission-blocked");return yield Kl(F,null==B?void 0:B.vapidKey),yield Ma(F,null==B?void 0:B.serviceWorkerRegistration),ll(F)})).apply(this,arguments)}function Js(F,B,W){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,Q.Z)(function*(F,B,W){const re=xc(B);(yield F.firebaseDependencies.analyticsProvider.get()).logEvent(re,{message_id:W[_c],message_name:W[Uf],message_time:W[Fg],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function xc(F){switch(F){case wc.NOTIFICATION_CLICKED:return"notification_open";case wc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ql(){return(Ql=(0,Q.Z)(function*(F,B){const W=B.data;if(!W.isFirebaseMessaging)return;F.onMessageHandler&&W.messageType===wc.PUSH_RECEIVED&&("function"==typeof F.onMessageHandler?F.onMessageHandler(hu(W)):F.onMessageHandler.next(hu(W)));const re=W.data;hl(re)&&"1"===re[Bf]&&(yield Js(F,W.messageType,re))})).apply(this,arguments)}const Xl="@firebase/messaging",Ra=F=>{const B=new qi(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),F.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",W=>function Yl(F,B){return Ql.apply(this,arguments)}(B,W)),B},zu=F=>{const B=F.getProvider("messaging").getImmediate();return{getToken:re=>function Dc(F,B){return Sc.apply(this,arguments)}(B,re)}};function Mc(){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,Q.Z)(function*(){try{yield(0,xe.eu)()}catch(F){return!1}return"undefined"!=typeof window&&(0,xe.hl)()&&(0,xe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Jl(){(0,Ue._registerComponent)(new Be.wA("messaging",Ra,"PUBLIC")),(0,Ue._registerComponent)(new Be.wA("messaging-internal",zu,"PRIVATE")),(0,Ue.registerVersion)(Xl,"0.9.15"),(0,Ue.registerVersion)(Xl,"0.9.15","esm2017")}();const cd="analytics",Vg="firebase_id",ka="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Na="https://www.googletagmanager.com/gtag/js",Ei=new Ve.Yd("@firebase/analytics");function di(F){return Promise.all(F.map(B=>B.catch(W=>W)))}function nh(F,B){const W=document.createElement("script");W.src=`${Na}?l=${F}&id=${B}`,W.async=!0,document.head.appendChild(W)}function kc(F,B,W,re,we,Pe){return rh.apply(this,arguments)}function rh(){return(rh=(0,Q.Z)(function*(F,B,W,re,we,Pe){const He=re[we];try{if(He)yield B[He];else{const Kt=(yield di(W)).find(wn=>wn.measurementId===we);Kt&&(yield B[Kt.appId])}}catch(Nt){Ei.error(Nt)}F("config",we,Pe)})).apply(this,arguments)}function jg(F,B,W,re,we){return oa.apply(this,arguments)}function oa(){return(oa=(0,Q.Z)(function*(F,B,W,re,we){try{let Pe=[];if(we&&we.send_to){let He=we.send_to;Array.isArray(He)||(He=[He]);const Nt=yield di(W);for(const Kt of He){const wn=Nt.find(hn=>hn.measurementId===Kt),Vn=wn&&B[wn.appId];if(!Vn){Pe=[];break}Pe.push(Vn)}}0===Pe.length&&(Pe=Object.values(B)),yield Promise.all(Pe),F("event",re,we||{})}catch(Pe){Ei.error(Pe)}})).apply(this,arguments)}function gr(){const F=window.document.getElementsByTagName("script");for(const B of Object.values(F))if(B.src&&B.src.includes(Na))return B;return null}const nn=new xe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Pc=new class Lr{constructor(B={},W=1e3){this.throttleMetadata=B,this.intervalMillis=W}getThrottleMetadata(B){return this.throttleMetadata[B]}setThrottleMetadata(B,W){this.throttleMetadata[B]=W}deleteThrottleMetadata(B){delete this.throttleMetadata[B]}};function ld(F){return new Headers({Accept:"application/json","x-goog-api-key":F})}function pu(F){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,Q.Z)(function*(F){var B;const{appId:W,apiKey:re}=F,we={method:"GET",headers:ld(re)},Pe=ka.replace("{app-id}",W),He=yield fetch(Pe,we);if(200!==He.status&&304!==He.status){let Nt="";try{const Kt=yield He.json();(null===(B=Kt.error)||void 0===B?void 0:B.message)&&(Nt=Kt.error.message)}catch(Kt){}throw nn.create("config-fetch-failed",{httpStatus:He.status,responseMessage:Nt})}return He.json()})).apply(this,arguments)}function Fr(F){return aa.apply(this,arguments)}function aa(){return(aa=(0,Q.Z)(function*(F,B=Pc,W){const{appId:re,apiKey:we,measurementId:Pe}=F.options;if(!re)throw nn.create("no-app-id");if(!we){if(Pe)return{measurementId:Pe,appId:re};throw nn.create("no-api-key")}const He=B.getThrottleMetadata(re)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Nt=new hd;return setTimeout((0,Q.Z)(function*(){Nt.abort()}),void 0!==W?W:6e4),Bo({appId:re,apiKey:we,measurementId:Pe},He,Nt,B)})).apply(this,arguments)}function Bo(F,B,W){return En.apply(this,arguments)}function En(){return(En=(0,Q.Z)(function*(F,{throttleEndTimeMillis:B,backoffCount:W},re,we=Pc){var Pe,He;const{appId:Nt,measurementId:Kt}=F;try{yield $f(re,B)}catch(wn){if(Kt)return Ei.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Kt} provided in the "measurementId" field in the local Firebase config. [${null===(Pe=wn)||void 0===Pe?void 0:Pe.message}]`),{appId:Nt,measurementId:Kt};throw wn}try{const wn=yield pu(F);return we.deleteThrottleMetadata(Nt),wn}catch(wn){const Vn=wn;if(!Hf(Vn)){if(we.deleteThrottleMetadata(Nt),Kt)return Ei.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Kt} provided in the "measurementId" field in the local Firebase config. [${null==Vn?void 0:Vn.message}]`),{appId:Nt,measurementId:Kt};throw wn}const hn=503===Number(null===(He=null==Vn?void 0:Vn.customData)||void 0===He?void 0:He.httpStatus)?(0,xe.$s)(W,we.intervalMillis,30):(0,xe.$s)(W,we.intervalMillis),Ur={throttleEndTimeMillis:Date.now()+hn,backoffCount:W+1};return we.setThrottleMetadata(Nt,Ur),Ei.debug(`Calling attemptFetch again in ${hn} millis`),Bo(F,Ur,re,we)}})).apply(this,arguments)}function $f(F,B){return new Promise((W,re)=>{const we=Math.max(B-Date.now(),0),Pe=setTimeout(W,we);F.addEventListener(()=>{clearTimeout(Pe),re(nn.create("fetch-throttle",{throttleEndTimeMillis:B}))})})}function Hf(F){if(!(F instanceof xe.ZR&&F.customData))return!1;const B=Number(F.customData.httpStatus);return 429===B||500===B||503===B||504===B}class hd{constructor(){this.listeners=[]}addEventListener(B){this.listeners.push(B)}abort(){this.listeners.forEach(B=>B())}}function dd(){return ki.apply(this,arguments)}function ki(){return(ki=(0,Q.Z)(function*(){var F;if(!(0,xe.hl)())return Ei.warn(nn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,xe.eu)()}catch(B){return Ei.warn(nn.create("indexeddb-unavailable",{errorInfo:null===(F=B)||void 0===F?void 0:F.toString()}).message),!1}return!0})).apply(this,arguments)}function gu(){return(gu=(0,Q.Z)(function*(F,B,W,re,we,Pe,He){var Nt;const Kt=Fr(F);Kt.then(ro=>{W[ro.measurementId]=ro.appId,F.options.measurementId&&ro.measurementId!==F.options.measurementId&&Ei.warn(`The measurement ID in the local Firebase config (${F.options.measurementId}) does not match the measurement ID fetched from the server (${ro.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ro=>Ei.error(ro)),B.push(Kt);const wn=dd().then(ro=>{if(ro)return re.getId()}),[Vn,hn]=yield Promise.all([Kt,wn]);gr()||nh(Pe,Vn.measurementId),we("js",new Date);const Ur=null!==(Nt=null==He?void 0:He.config)&&void 0!==Nt?Nt:{};return Ur.origin="firebase",Ur.update=!0,null!=hn&&(Ur[Vg]=hn),we("config",Vn.measurementId,Ur),Vn.measurementId})).apply(this,arguments)}class mu{constructor(B){this.app=B}_delete(){return delete Yi[this.app.options.appId],Promise.resolve()}}let Yi={},yu=[];const Gu={};let qu,vu,Oc="dataLayer",Lc=!1;function La(F,B,W){!function Fc(){const F=[];if((0,xe.ru)()&&F.push("This is a browser extension environment."),(0,xe.zI)()||F.push("Cookies are not available."),F.length>0){const B=F.map((re,we)=>`(${we+1}) ${re}`).join(" "),W=nn.create("invalid-analytics-context",{errorInfo:B});Ei.warn(W.message)}}();const re=F.options.appId;if(!re)throw nn.create("no-app-id");if(!F.options.apiKey){if(!F.options.measurementId)throw nn.create("no-api-key");Ei.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${F.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Yi[re])throw nn.create("already-exists",{id:re});if(!Lc){!function fu(F){let B=[];Array.isArray(window[F])?B=window[F]:window[F]=B}(Oc);const{wrappedGtag:Pe,gtagCore:He}=function $g(F,B,W,re,we){let Pe=function(...He){window[re].push(arguments)};return window[we]&&"function"==typeof window[we]&&(Pe=window[we]),window[we]=function Zi(F,B,W,re){function Pe(){return(Pe=(0,Q.Z)(function*(He,Nt,Kt){try{"event"===He?yield jg(F,B,W,Nt,Kt):"config"===He?yield kc(F,B,W,re,Nt,Kt):F("set",Nt)}catch(wn){Ei.error(wn)}})).apply(this,arguments)}return function we(He,Nt,Kt){return Pe.apply(this,arguments)}}(Pe,F,B,W),{gtagCore:Pe,wrappedGtag:window[we]}}(Yi,yu,Gu,Oc,"gtag");vu=Pe,qu=He,Lc=!0}return Yi[re]=function _o(F,B,W,re,we,Pe,He){return gu.apply(this,arguments)}(F,yu,Gu,B,qu,Oc,W),new mu(F)}function Ii(){return(Ii=(0,Q.Z)(function*(F,B,W,re,we){if(we&&we.global)F("event",W,re);else{const Pe=yield B;F("event",W,Object.assign(Object.assign({},re),{send_to:Pe}))}})).apply(this,arguments)}function Ci(){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,Q.Z)(function*(){if((0,xe.ru)()||!(0,xe.zI)()||!(0,xe.hl)())return!1;try{return yield(0,xe.eu)()}catch(F){return!1}})).apply(this,arguments)}const Qi="@firebase/analytics";!function Fa(){(0,Ue._registerComponent)(new Be.wA(cd,(B,{options:W})=>La(B.getProvider("app").getImmediate(),B.getProvider("installations-internal").getImmediate(),W),"PUBLIC")),(0,Ue._registerComponent)(new Be.wA("analytics-internal",function F(B){try{const W=B.getProvider(cd).getImmediate();return{logEvent:(re,we,Pe)=>function ua(F,B,W,re){F=(0,xe.m9)(F),function Wu(F,B,W,re,we){return Ii.apply(this,arguments)}(vu,Yi[F.app.options.appId],B,W,re).catch(we=>Ei.error(we))}(W,re,we,Pe)}}catch(W){throw nn.create("interop-component-reg-failed",{reason:W})}},"PRIVATE")),(0,Ue.registerVersion)(Qi,"0.7.11"),(0,Ue.registerVersion)(Qi,"0.7.11","esm2017")}();var Gf=M(4408),gl=M(7565);const ml=new class Kr extends gl.v{}(class Ua extends Gf.o{constructor(B,W){super(B,W),this.scheduler=B,this.work=W}schedule(B,W=0){return W>0?super.schedule(B,W):(this.delay=W,this.state=B,this.scheduler.flush(this),this)}execute(B,W){return W>0||this.closed?super.execute(B,W):this._execute(B,W)}requestAsyncId(B,W,re=0){return null!=re&&re>0||null==re&&this.delay>0?super.requestAsyncId(B,W,re):B.flush(this)}});var qf=M(4986),Wf=M(8505),Ni=M(5363),Pi=M(9468);const Ku=new D.GfV("7.4.1"),Zu="__angularfire_symbol__analyticsIsSupportedValue",Ho="__angularfire_symbol__analyticsIsSupported",zo="__angularfire_symbol__remoteConfigIsSupportedValue",bo="__angularfire_symbol__remoteConfigIsSupported",_u="__angularfire_symbol__messagingIsSupportedValue",xn="__angularfire_symbol__messagingIsSupported";function jc(F,B,W){if(B){if(1===B.length)return B[0];const Pe=B.filter(He=>He.app===W);if(1===Pe.length)return Pe[0]}return W.container.getProvider(F).getImmediate({optional:!0})}globalThis[Ho]||(globalThis[Ho]=Ci().then(F=>globalThis[Zu]=F).catch(()=>globalThis[Zu]=!1)),globalThis[xn]||(globalThis[xn]=Mc().then(F=>globalThis[_u]=F).catch(()=>globalThis[_u]=!1)),globalThis[bo]||(globalThis[bo]=Hl().then(F=>globalThis[zo]=F).catch(()=>globalThis[zo]=!1));const zy=(F,B)=>{const W=B?[B]:(0,be.C6)(),re=[];return W.forEach(we=>{we.container.getProvider(F).instances.forEach(He=>{re.includes(He)||re.push(He)})}),re};function Ba(){}class no{constructor(B,W=ml){this.zone=B,this.delegate=W}now(){return this.delegate.now()}schedule(B,W,re){const we=this.zone;return this.delegate.schedule(function(He){we.runGuarded(()=>{B.apply(this,[He])})},W,re)}}class vl{constructor(B){this.zone=B,this.task=null}call(B,W){const re=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ba,{},Ba,Ba)),W.pipe((0,Wf.b)({next:re,complete:re,error:re})).subscribe(B).add(re)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Kf=(()=>{class F{constructor(W){this.ngZone=W,this.outsideAngular=W.runOutsideAngular(()=>new no(Zone.current)),this.insideAngular=W.run(()=>new no(Zone.current,qf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return F.\u0275fac=function(W){return new(W||F)(D.LFG(D.R0b))},F.\u0275prov=D.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();function la(){const F=globalThis.\u0275AngularFireScheduler;if(!F)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return F}function Xi(F){return F.pipe((0,Ni.Q)(la().outsideAngular))}function Hg(F){return la(),function wu(F){return function(W){return(W=W.lift(new vl(F.ngZone))).pipe((0,Pi.R)(F.outsideAngular),(0,Ni.Q)(F.insideAngular))}}(la())(F)}},2090:(jt,et,M)=>{"use strict";M.d(et,{$s:()=>Ps,BH:()=>Rt,G6:()=>vt,L:()=>Le,LL:()=>Ne,Mn:()=>Xe,Sg:()=>ot,UG:()=>ge,US:()=>Be,ZB:()=>ue,ZR:()=>Ye,b$:()=>bt,d:()=>We,eu:()=>Ze,hl:()=>ce,jU:()=>Me,m9:()=>sn,ne:()=>Ws,pd:()=>Rs,r3:()=>xr,ru:()=>ht,tV:()=>Fe,uI:()=>Et,vZ:()=>us,w1:()=>Ke,xO:()=>oi,xb:()=>On,z$:()=>Qe,zI:()=>fe,zd:()=>Ms});const Ue=function(ve){const se=[];let Ee=0;for(let Ie=0;Ie<ve.length;Ie++){let ne=ve.charCodeAt(Ie);ne<128?se[Ee++]=ne:ne<2048?(se[Ee++]=ne>>6|192,se[Ee++]=63&ne|128):55296==(64512&ne)&&Ie+1<ve.length&&56320==(64512&ve.charCodeAt(Ie+1))?(ne=65536+((1023&ne)<<10)+(1023&ve.charCodeAt(++Ie)),se[Ee++]=ne>>18|240,se[Ee++]=ne>>12&63|128,se[Ee++]=ne>>6&63|128,se[Ee++]=63&ne|128):(se[Ee++]=ne>>12|224,se[Ee++]=ne>>6&63|128,se[Ee++]=63&ne|128)}return se},Be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ve,se){if(!Array.isArray(ve))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ee=se?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let ne=0;ne<ve.length;ne+=3){const nt=ve[ne],It=ne+1<ve.length,Gt=It?ve[ne+1]:0,Dn=ne+2<ve.length,ir=Dn?ve[ne+2]:0;let Gr=(15&Gt)<<2|ir>>6,Sa=63&ir;Dn||(Sa=64,It||(Gr=64)),Ie.push(Ee[nt>>2],Ee[(3&nt)<<4|Gt>>4],Ee[Gr],Ee[Sa])}return Ie.join("")},encodeString(ve,se){return this.HAS_NATIVE_SUPPORT&&!se?btoa(ve):this.encodeByteArray(Ue(ve),se)},decodeString(ve,se){return this.HAS_NATIVE_SUPPORT&&!se?atob(ve):function(ve){const se=[];let Ee=0,Ie=0;for(;Ee<ve.length;){const ne=ve[Ee++];if(ne<128)se[Ie++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const nt=ve[Ee++];se[Ie++]=String.fromCharCode((31&ne)<<6|63&nt)}else if(ne>239&&ne<365){const Dn=((7&ne)<<18|(63&ve[Ee++])<<12|(63&ve[Ee++])<<6|63&ve[Ee++])-65536;se[Ie++]=String.fromCharCode(55296+(Dn>>10)),se[Ie++]=String.fromCharCode(56320+(1023&Dn))}else{const nt=ve[Ee++],It=ve[Ee++];se[Ie++]=String.fromCharCode((15&ne)<<12|(63&nt)<<6|63&It)}}return se.join("")}(this.decodeStringToByteArray(ve,se))},decodeStringToByteArray(ve,se){this.init_();const Ee=se?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let ne=0;ne<ve.length;){const nt=Ee[ve.charAt(ne++)],Gt=ne<ve.length?Ee[ve.charAt(ne)]:0;++ne;const ir=ne<ve.length?Ee[ve.charAt(ne)]:64;++ne;const Bn=ne<ve.length?Ee[ve.charAt(ne)]:64;if(++ne,null==nt||null==Gt||null==ir||null==Bn)throw Error();Ie.push(nt<<2|Gt>>4),64!==ir&&(Ie.push(Gt<<4&240|ir>>2),64!==Bn&&Ie.push(ir<<6&192|Bn))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ve=0;ve<this.ENCODED_VALS.length;ve++)this.byteToCharMap_[ve]=this.ENCODED_VALS.charAt(ve),this.charToByteMap_[this.byteToCharMap_[ve]]=ve,this.byteToCharMapWebSafe_[ve]=this.ENCODED_VALS_WEBSAFE.charAt(ve),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ve]]=ve,ve>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ve)]=ve,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ve)]=ve)}}},Le=function(ve){return function(ve){const se=Ue(ve);return Be.encodeByteArray(se,!0)}(ve).replace(/\./g,"")},Fe=function(ve){try{return Be.decodeString(ve,!0)}catch(se){console.error("base64Decode failed: ",se)}return null};function ue(ve,se){if(!(se instanceof Object))return se;switch(se.constructor){case Date:return new Date(se.getTime());case Object:void 0===ve&&(ve={});break;case Array:ve=[];break;default:return se}for(const Ee in se)!se.hasOwnProperty(Ee)||!ye(Ee)||(ve[Ee]=ue(ve[Ee],se[Ee]));return ve}function ye(ve){return"__proto__"!==ve}class Rt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((se,Ee)=>{this.resolve=se,this.reject=Ee})}wrapCallback(se){return(Ee,Ie)=>{Ee?this.reject(Ee):this.resolve(Ie),"function"==typeof se&&(this.promise.catch(()=>{}),1===se.length?se(Ee):se(Ee,Ie))}}}function ot(ve,se){if(ve.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=se||"demo-project",ne=ve.iat||0,nt=ve.sub||ve.user_id;if(!nt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const It=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:ne,exp:ne+3600,auth_time:ne,sub:nt,user_id:nt,firebase:{sign_in_provider:"custom",identities:{}}},ve);return[Le(JSON.stringify({alg:"none",type:"JWT"})),Le(JSON.stringify(It)),""].join(".")}function Qe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Et(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function ge(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ve){return!1}}function Me(){return"object"==typeof self&&self.self===self}function ht(){const ve="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ve&&void 0!==ve.id}function bt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function We(){return Qe().indexOf("Electron/")>=0}function Ke(){const ve=Qe();return ve.indexOf("MSIE ")>=0||ve.indexOf("Trident/")>=0}function Xe(){return Qe().indexOf("MSAppHost/")>=0}function vt(){return!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ce(){return"object"==typeof indexedDB}function Ze(){return new Promise((ve,se)=>{try{let Ee=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(Ie);ne.onsuccess=()=>{ne.result.close(),Ee||self.indexedDB.deleteDatabase(Ie),ve(!0)},ne.onupgradeneeded=()=>{Ee=!1},ne.onerror=()=>{var nt;se((null===(nt=ne.error)||void 0===nt?void 0:nt.message)||"")}}catch(Ee){se(Ee)}})}function fe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ye extends Error{constructor(se,Ee,Ie){super(Ee),this.code=se,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,Ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ne.prototype.create)}}class Ne{constructor(se,Ee,Ie){this.service=se,this.serviceName=Ee,this.errors=Ie}create(se,...Ee){const Ie=Ee[0]||{},ne=`${this.service}/${se}`,nt=this.errors[se],It=nt?function dt(ve,se){return ve.replace(Wt,(Ee,Ie)=>{const ne=se[Ie];return null!=ne?String(ne):`<${Ie}?>`})}(nt,Ie):"Error";return new Ye(ne,`${this.serviceName}: ${It} (${ne}).`,Ie)}}const Wt=/\{\$([^}]+)}/g;function xr(ve,se){return Object.prototype.hasOwnProperty.call(ve,se)}function On(ve){for(const se in ve)if(Object.prototype.hasOwnProperty.call(ve,se))return!1;return!0}function us(ve,se){if(ve===se)return!0;const Ee=Object.keys(ve),Ie=Object.keys(se);for(const ne of Ee){if(!Ie.includes(ne))return!1;const nt=ve[ne],It=se[ne];if(ti(nt)&&ti(It)){if(!us(nt,It))return!1}else if(nt!==It)return!1}for(const ne of Ie)if(!Ee.includes(ne))return!1;return!0}function ti(ve){return null!==ve&&"object"==typeof ve}function oi(ve){const se=[];for(const[Ee,Ie]of Object.entries(ve))Array.isArray(Ie)?Ie.forEach(ne=>{se.push(encodeURIComponent(Ee)+"="+encodeURIComponent(ne))}):se.push(encodeURIComponent(Ee)+"="+encodeURIComponent(Ie));return se.length?"&"+se.join("&"):""}function Ms(ve){const se={};return ve.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[ne,nt]=Ie.split("=");se[decodeURIComponent(ne)]=decodeURIComponent(nt)}}),se}function Rs(ve){const se=ve.indexOf("?");if(!se)return"";const Ee=ve.indexOf("#",se);return ve.substring(se,Ee>0?Ee:void 0)}function Ws(ve,se){const Ee=new pn(ve,se);return Ee.subscribe.bind(Ee)}class pn{constructor(se,Ee){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ee,this.task.then(()=>{se(this)}).catch(Ie=>{this.error(Ie)})}next(se){this.forEachObserver(Ee=>{Ee.next(se)})}error(se){this.forEachObserver(Ee=>{Ee.error(se)}),this.close(se)}complete(){this.forEachObserver(se=>{se.complete()}),this.close()}subscribe(se,Ee,Ie){let ne;if(void 0===se&&void 0===Ee&&void 0===Ie)throw new Error("Missing Observer.");ne=function Mr(ve,se){if("object"!=typeof ve||null===ve)return!1;for(const Ee of se)if(Ee in ve&&"function"==typeof ve[Ee])return!0;return!1}(se,["next","error","complete"])?se:{next:se,error:Ee,complete:Ie},void 0===ne.next&&(ne.next=Ir),void 0===ne.error&&(ne.error=Ir),void 0===ne.complete&&(ne.complete=Ir);const nt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch(It){}}),this.observers.push(ne),nt}unsubscribeOne(se){void 0===this.observers||void 0===this.observers[se]||(delete this.observers[se],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(se){if(!this.finalized)for(let Ee=0;Ee<this.observers.length;Ee++)this.sendOne(Ee,se)}sendOne(se,Ee){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[se])try{Ee(this.observers[se])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(se){this.finalized||(this.finalized=!0,void 0!==se&&(this.finalError=se),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ir(){}function Ps(ve,se=1e3,Ee=2){const Ie=se*Math.pow(Ee,ve),ne=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+ne)}function sn(ve){return ve&&ve._delegate?ve._delegate:ve}},9889:(jt,et,M)=>{"use strict";var D=M(5e3);let be=null;function Q(){return be}const Ve=new D.OlP("DocumentToken");let Le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=D.Yz7({token:n,factory:function(){return function Fe(){return(0,D.LFG)(ue)}()},providedIn:"platform"}),n})();const ae=new D.OlP("Location Initialized");let ue=(()=>{class n extends Le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Q().getBaseHref(this._doc)}onPopState(t){const r=Q().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Q().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,a){ye()?this._history.pushState(t,r,a):this.location.hash=a}replaceState(t,r,a){ye()?this._history.replaceState(t,r,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Ve))},n.\u0275prov=D.Yz7({token:n,factory:function(){return function Rt(){return new ue((0,D.LFG)(Ve))}()},providedIn:"platform"}),n})();function ye(){return!!window.history.pushState}function ot(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Qe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Et(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=D.Yz7({token:n,factory:function(){return function Me(n){const e=(0,D.LFG)(Ve).location;return new bt((0,D.LFG)(Le),e&&e.origin||"")}()},providedIn:"root"}),n})();const ht=new D.OlP("appBaseHref");let bt=(()=>{class n extends ge{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ot(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Et(this._platformLocation.search),a=this._platformLocation.hash;return a&&t?`${r}${a}`:r}pushState(t,r,a,l){const p=this.prepareExternalUrl(a+Et(l));this._platformLocation.pushState(t,r,p)}replaceState(t,r,a,l){const p=this.prepareExternalUrl(a+Et(l));this._platformLocation.replaceState(t,r,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Le),D.LFG(ht,8))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})(),We=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ot(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,a,l){let p=this.prepareExternalUrl(a+Et(l));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.pushState(t,r,p)}replaceState(t,r,a,l){let p=this.prepareExternalUrl(a+Et(l));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Le),D.LFG(ht,8))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})(),Ke=(()=>{class n{constructor(t,r){this._subject=new D.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const a=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Qe(vt(a)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Et(r))}normalize(t){return n.stripTrailingSlash(function ut(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,vt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",a=null){this._platformStrategy.pushState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Et(r)),a)}replaceState(t,r="",a=null){this._platformStrategy.replaceState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Et(r)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformStrategy).historyGo)||void 0===a||a.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(a=>a(t,r))}subscribe(t,r,a){return this._subject.subscribe({next:t,error:r,complete:a})}}return n.normalizeQueryParams=Et,n.joinWithSlash=ot,n.stripTrailingSlash=Qe,n.\u0275fac=function(t){return new(t||n)(D.LFG(ge),D.LFG(Le))},n.\u0275prov=D.Yz7({token:n,factory:function(){return function Xe(){return new Ke((0,D.LFG)(ge),(0,D.LFG)(Le))}()},providedIn:"root"}),n})();function vt(n){return n.replace(/\/index.html$/,"")}function Tt(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[a,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(a.trim()===e)return decodeURIComponent(l)}return null}let Bf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=D.oAB({type:n}),n.\u0275inj=D.cJS({}),n})();function bc(n){return"server"===n}let vs=(()=>{class n{}return n.\u0275prov=(0,D.Yz7)({token:n,providedIn:"root",factory:()=>new Ec((0,D.LFG)(Ve),window)}),n})();class Ec{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function na(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let a=r.currentNode;for(;a;){const l=a.shadowRoot;if(l){const p=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(p)return p}a=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,a=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],a-l[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ic(this.window.history)||Ic(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ic(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class tr{}class ra extends class uu extends class Be{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function xe(n){be||(be=n)}(new ra)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function $u(){return sr=sr||document.querySelector("base"),sr?sr.getAttribute("href"):null}();return null==t?null:function cu(n){zl=zl||document.createElement("a"),zl.setAttribute("href",n);const e=zl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){sr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Tt(document.cookie,e)}}let zl,sr=null;const Gi=new D.OlP("TRANSITION_ID"),fr=[{provide:D.ip1,useFactory:function sd(n,e,t){return()=>{t.get(D.CZH).donePromise.then(()=>{const r=Q(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<a.length;l++)r.remove(a[l])})}},deps:[Gi,Ve,D.zs3],multi:!0}];class Fs{static init(){(0,D.VLi)(new Fs)}addToWindow(e){D.dqk.getAngularTestability=(r,a=!0)=>{const l=e.findTestabilityInTree(r,a);if(null==l)throw new Error("Could not find testability for element.");return l},D.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),D.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),D.dqk.frameworkStabilizers||(D.dqk.frameworkStabilizers=[]),D.dqk.frameworkStabilizers.push(r=>{const a=D.dqk.getAllAngularTestabilities();let l=a.length,p=!1;const b=function(A){p=p||A,l--,0==l&&r(p)};a.forEach(function(A){A.whenStable(b)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const a=e.getTestability(t);return null!=a?a:r?Q().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Or=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();const Ys=new D.OlP("EventManagerPlugins");let Us=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,a){return this._findPluginFor(r).addEventListener(t,r,a)}addGlobalEventListener(t,r,a){return this._findPluginFor(r).addGlobalEventListener(t,r,a)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const a=this._plugins;for(let l=0;l<a.length;l++){const p=a[l];if(p.supports(t))return this._eventNameToPlugin.set(t,p),p}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Ys),D.LFG(D.R0b))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();class ia{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const a=Q().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,r)}}let _s=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),r.add(a))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})(),li=(()=>{class n extends _s{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,a){t.forEach(l=>{const p=this._doc.createElement("style");p.textContent=l,a.push(r.appendChild(p))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Cc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,a)=>{this._addStylesToHost(t,a,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Cc))}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Ve))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();function Cc(n){Q().remove(n)}const bn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},lu=/%COMP%/g;function Qs(n,e,t){for(let r=0;r<e.length;r++){let a=e[r];Array.isArray(a)?Qs(n,a,t):(a=a.replace(lu,n),t.push(a))}return t}function lt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Hu=(()=>{class n{constructor(t,r,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new pr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case D.ifc.Emulated:{let a=this.rendererByCompId.get(r.id);return a||(a=new go(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,a)),a.applyToHost(t),a}case 1:case D.ifc.ShadowDom:return new Tc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const a=Qs(r.id,r.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Us),D.LFG(li),D.LFG(D.AFp))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();class pr{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(bn[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,a){if(a){t=a+":"+t;const l=bn[a];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const a=bn[r];a?e.removeAttributeNS(a,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,a){a&(D.JOm.DashCase|D.JOm.Important)?e.style.setProperty(t,r,a&D.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&D.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,lt(r)):this.eventManager.addEventListener(e,t,lt(r))}}class go extends pr{constructor(e,t,r,a){super(e),this.component=r;const l=Qs(a+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr=function ql(n){return"_ngcontent-%COMP%".replace(lu,n)}(a+"-"+r.id),this.hostAttr=function Wl(n){return"_nghost-%COMP%".replace(lu,n)}(a+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Tc extends pr{constructor(e,t,r,a){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Qs(a.id,a.styles,[]);for(let p=0;p<l.length;p++){const b=document.createElement("style");b.textContent=l[p],this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let mo=(()=>{class n extends ia{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,a){return t.addEventListener(r,a,!1),()=>this.removeEventListener(t,r,a)}removeEventListener(t,r,a){return t.removeEventListener(r,a)}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Ve))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();const hl=["alt","control","meta","shift"],Ug={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yo={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},qi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Xs=(()=>{class n extends ia{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,a){const l=n.parseEventName(r),p=n.eventCallback(l.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Q().onAndCancel(t,l.domEventName,p))}static parseEventName(t){const r=t.toLowerCase().split("."),a=r.shift();if(0===r.length||"keydown"!==a&&"keyup"!==a)return null;const l=n._normalizeKey(r.pop());let p="";if(hl.forEach(A=>{const L=r.indexOf(A);L>-1&&(r.splice(L,1),p+=A+".")}),p+=l,0!=r.length||0===l.length)return null;const b={};return b.domEventName=a,b.fullKey=p,b}static getEventFullKey(t){let r="",a=function dl(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&yo.hasOwnProperty(e)&&(e=yo[e]))}return Ug[e]||e}(t);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),hl.forEach(l=>{l!=a&&qi[l](t)&&(r+=l+".")}),r+=a,r}static eventCallback(t,r,a){return l=>{n.getEventFullKey(l)===t&&a.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Ve))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();const Dc=(0,D.eFA)(D._c5,"browser",[{provide:D.Lbi,useValue:"browser"},{provide:D.g9A,useValue:function Ma(){ra.makeCurrent(),Fs.init()},multi:!0},{provide:Ve,useFactory:function Kl(){return(0,D.RDi)(document),document},deps:[]}]),Sc=[{provide:D.zSh,useValue:"root"},{provide:D.qLn,useFactory:function Wi(){return new D.qLn},deps:[]},{provide:Ys,useClass:mo,multi:!0,deps:[Ve,D.R0b,D.Lbi]},{provide:Ys,useClass:Xs,multi:!0,deps:[Ve]},{provide:Hu,useClass:Hu,deps:[Us,li,D.AFp]},{provide:D.FYo,useExisting:Hu},{provide:_s,useExisting:li},{provide:li,useClass:li,deps:[Ve]},{provide:D.dDg,useClass:D.dDg,deps:[D.R0b]},{provide:Us,useClass:Us,deps:[Ys,D.R0b]},{provide:tr,useClass:Or,deps:[]}];let Js=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:D.AFp,useValue:t.appId},{provide:Gi,useExisting:D.AFp},fr]}}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(n,12))},n.\u0275mod=D.oAB({type:n}),n.\u0275inj=D.cJS({providers:Sc,imports:[Bf,D.hGG]}),n})();"undefined"!=typeof window&&window;var gr=M(8996),Nc=M(7669);function nn(...n){const e=(0,Nc.yG)(n);return(0,gr.D)(n,e)}var Bs=M(7579);class eo extends Bs.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Lr=M(8306);const{isArray:Pc}=Array,{getPrototypeOf:ld,prototype:pu,keys:Pa}=Object;var Bo=M(4671),En=M(4004);const{isArray:$f}=Array;var ki=M(5403),_o=M(9672);function gu(...n){const e=(0,Nc.yG)(n),t=(0,Nc.jO)(n),{args:r,keys:a}=function Fr(n){if(1===n.length){const e=n[0];if(Pc(e))return{args:e,keys:null};if(function aa(n){return n&&"object"==typeof n&&ld(n)===pu}(e)){const t=Pa(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,gr.D)([],e);const l=new Lr.y(function mu(n,e,t=Bo.y){return r=>{Yi(e,()=>{const{length:a}=n,l=new Array(a);let p=a,b=a;for(let A=0;A<a;A++)Yi(e,()=>{const L=(0,gr.D)(n[A],e);let G=!1;L.subscribe((0,ki.x)(r,K=>{l[A]=K,G||(G=!0,b--),b||r.next(t(l.slice()))},()=>{--p||r.complete()}))},r)},r)}}(r,e,a?p=>function dd(n,e){return n.reduce((t,r,a)=>(t[r]=e[a],t),{})}(a,p):Bo.y));return t?l.pipe(function hd(n){return(0,En.U)(e=>function Hf(n,e){return $f(e)?n(...e):n(e)}(n,e))}(t)):l}function Yi(n,e,t){n?(0,_o.f)(t,n,e):e()}var yu=M(576);function Gu(n,e){const t=(0,yu.m)(n)?n:()=>n,r=a=>a.error(t());return new Lr.y(e?a=>e.schedule(r,0,a):r)}const Oa=(0,M(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var qu=M(8189);function Lc(...n){return function vu(){return(0,qu.J)(1)}()((0,gr.D)(n,(0,Nc.yG)(n)))}var zf=M(8421);function Fc(n){return new Lr.y(e=>{(0,zf.Xf)(n()).subscribe(e)})}var La=M(515),Wu=M(727),Ii=M(4482);function fd(){return(0,Ii.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ki.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const a=n._connection,l=t;t=null,a&&(!l||a===l)&&a.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Vo extends Lr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ii.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Wu.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ki.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Wu.w0.EMPTY)}return e}refCount(){return fd()(this)}}function fi(n,e){return(0,Ii.e)((t,r)=>{let a=null,l=0,p=!1;const b=()=>p&&!a&&r.complete();t.subscribe((0,ki.x)(r,A=>{null==a||a.unsubscribe();let L=0;const G=l++;(0,zf.Xf)(n(A,G)).subscribe(a=(0,ki.x)(r,K=>r.next(e?e(A,K,G,L++):K),()=>{a=null,b()}))},()=>{p=!0,b()}))})}var wo=M(5698);function jo(...n){const e=(0,Nc.yG)(n);return(0,Ii.e)((t,r)=>{(e?Lc(n,t,e):Lc(n,t)).subscribe(r)})}function to(n,e,t,r,a){return(l,p)=>{let b=t,A=e,L=0;l.subscribe((0,ki.x)(p,G=>{const K=L++;A=b?n(A,G,K):(b=!0,G),r&&p.next(A)},a&&(()=>{b&&p.next(A),p.complete()})))}}function $o(n,e){return(0,Ii.e)(to(n,e,arguments.length>=2,!0))}function ii(n,e){return(0,Ii.e)((t,r)=>{let a=0;t.subscribe((0,ki.x)(r,l=>n.call(e,l,a++)&&r.next(l)))})}function ws(n){return(0,Ii.e)((e,t)=>{let l,r=null,a=!1;r=e.subscribe((0,ki.x)(t,void 0,void 0,p=>{l=(0,zf.Xf)(n(p,ws(n)(e))),r?(r.unsubscribe(),r=null,l.subscribe(t)):a=!0})),a&&(r.unsubscribe(),r=null,l.subscribe(t))})}var Wr=M(5577);function Ci(n,e){return(0,yu.m)(e)?(0,Wr.z)(n,e,1):(0,Wr.z)(n,1)}function Uc(n){return n<=0?()=>La.E:(0,Ii.e)((e,t)=>{let r=[];e.subscribe((0,ki.x)(t,a=>{r.push(a),n<r.length&&r.shift()},()=>{for(const a of r)t.next(a);t.complete()},void 0,()=>{r=null}))})}function pl(n=jr){return(0,Ii.e)((e,t)=>{let r=!1;e.subscribe((0,ki.x)(t,a=>{r=!0,t.next(a)},()=>r?t.complete():t.error(n())))})}function jr(){return new Oa}function Bc(n){return(0,Ii.e)((e,t)=>{let r=!1;e.subscribe((0,ki.x)(t,a=>{r=!0,t.next(a)},()=>{r||t.next(n),t.complete()}))})}function ua(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ii((a,l)=>n(a,l,r)):Bo.y,(0,wo.q)(1),t?Bc(e):pl(()=>new Oa))}var Qi=M(8505);class Fa{constructor(e,t){this.id=e,this.url=t}}class Gf extends Fa{constructor(e,t,r="imperative",a=null){super(e,t),this.navigationTrigger=r,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ua extends Fa{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gl extends Fa{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Kr extends Fa{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ml extends Fa{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ih extends Fa{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qf extends Fa{constructor(e,t,r,a,l){super(e,t),this.urlAfterRedirects=r,this.state=a,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Wf extends Fa{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ni extends Fa{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pi{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ku{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Zu{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ho{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zo{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bo{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _u{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const xn="primary";class ca{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Vc(n){return new ca(n)}const Zr="ngNavigationCancelingError";function yl(n){const e=Error("NavigationCancelingError: "+n);return e[Zr]=!0,e}function zy(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const a={};for(let l=0;l<r.length;l++){const p=r[l],b=n[l];if(p.startsWith(":"))a[p.substring(1)]=b;else if(p!==b.path)return null}return{consumed:n.slice(0,r.length),posParams:a}}function no(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let a;for(let l=0;l<t.length;l++)if(a=t[l],!vl(n[a],e[a]))return!1;return!0}function vl(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((a,l)=>r[l]===a)}return n===e}function Kf(n){return Array.prototype.concat.apply([],n)}function la(n){return n.length>0?n[n.length-1]:null}function Tr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Xi(n){return(0,D.CqO)(n)?n:(0,D.QGY)(n)?(0,gr.D)(Promise.resolve(n)):nn(n)}const Hg={exact:function F(n,e,t){if(!wn(n.segments,e.segments)||!we(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!F(n.children[r],e.children[r],t))return!1;return!0},subset:W},wu={exact:function _l(n,e){return no(n,e)},subset:function B(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>vl(n[t],e[t]))},ignored:()=>!0};function $c(n,e,t){return Hg[t.paths](n.root,e.root,t.matrixParams)&&wu[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function W(n,e,t){return re(n,e,e.segments,t)}function re(n,e,t,r){if(n.segments.length>t.length){const a=n.segments.slice(0,t.length);return!(!wn(a,t)||e.hasChildren()||!we(a,t,r))}if(n.segments.length===t.length){if(!wn(n.segments,t)||!we(n.segments,t,r))return!1;for(const a in e.children)if(!n.children[a]||!W(n.children[a],e.children[a],r))return!1;return!0}{const a=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(wn(n.segments,a)&&we(n.segments,a,r)&&n.children[xn])&&re(n.children[xn],e,l,r)}}function we(n,e,t){return e.every((r,a)=>wu[t](n[a].parameters,r.parameters))}class Pe{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vc(this.queryParams)),this._queryParamMap}toString(){return ro.serialize(this)}}class He{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Tr(t,(r,a)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Va(this)}}class Nt{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Vc(this.parameters)),this._parameterMap}toString(){return zc(this)}}function wn(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class hn{}class Ur{parse(e){const t=new Ha(e);return new Pe(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Eo(e.root,!0)}`,r=function zg(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(a=>`${ja(t)}=${ja(a)}`).join("&"):`${ja(t)}=${ja(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Hc(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ro=new Ur;function Va(n){return n.segments.map(e=>zc(e)).join("/")}function Eo(n,e){if(!n.hasChildren())return Va(n);if(e){const t=n.children[xn]?Eo(n.children[xn],!1):"",r=[];return Tr(n.children,(a,l)=>{l!==xn&&r.push(`${l}:${Eo(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Vn(n,e){let t=[];return Tr(n.children,(r,a)=>{a===xn&&(t=t.concat(e(r,a)))}),Tr(n.children,(r,a)=>{a!==xn&&(t=t.concat(e(r,a)))}),t}(n,(r,a)=>a===xn?[Eo(n.children[xn],!1)]:[`${a}:${Eo(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xn]?`${Va(n)}/${t[0]}`:`${Va(n)}/(${t.join("//")})`}}function Io(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ja(n){return Io(n).replace(/%3B/gi,";")}function Go(n){return Io(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qo(n){return decodeURIComponent(n)}function $a(n){return qo(n.replace(/\+/g,"%20"))}function zc(n){return`${Go(n.path)}${function Yf(n){return Object.keys(n).map(e=>`;${Go(e)}=${Go(n[e])}`).join("")}(n.parameters)}`}const Gg=/^[^\/()?;=#]+/;function Qf(n){const e=n.match(Gg);return e?e[0]:""}const sh=/^[^=?&#]+/,qg=/^[^&#]+/;class Ha{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new He([],{}):new He([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xn]=new He(e,t)),r}parseSegment(){const e=Qf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Nt(qo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Qf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=Qf(this.remaining);a&&(r=a,this.capture(r))}e[qo(t)]=qo(r)}parseQueryParam(e){const t=function md(n){const e=n.match(sh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const p=function xb(n){const e=n.match(qg);return e?e[0]:""}(this.remaining);p&&(r=p,this.capture(r))}const a=$a(t),l=$a(r);if(e.hasOwnProperty(a)){let p=e[a];Array.isArray(p)||(p=[p],e[a]=p),p.push(l)}else e[a]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Qf(this.remaining),a=this.remaining[r.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=xn);const p=this.parseChildren();t[l]=1===Object.keys(p).length?p[xn]:new He([],p),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Xf{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Wg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Wg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=za(e,this._root);return t.length<2?[]:t[t.length-2].children.map(a=>a.value).filter(a=>a!==e)}pathFromRoot(e){return za(e,this._root).map(t=>t.value)}}function Wg(n,e){if(n===e.value)return e;for(const t of e.children){const r=Wg(n,t);if(r)return r}return null}function za(n,e){if(n===e.value)return[e];for(const t of e.children){const r=za(n,t);if(r.length)return r.unshift(e),r}return[]}class Yu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function oh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class yd extends Xf{constructor(e,t){super(e),this.snapshot=t,_d(this,e)}toString(){return this.snapshot.toString()}}function vd(n,e){const t=function ah(n,e){const p=new Qu([],{},{},"",{},xn,e,null,n.root,-1,{});return new ep("",new Yu(p,[]))}(n,e),r=new eo([new Nt("",{})]),a=new eo({}),l=new eo({}),p=new eo({}),b=new eo(""),A=new uh(r,a,p,b,l,xn,e,t.root);return A.snapshot=t.root,new yd(new Yu(A,[]),t)}class uh{constructor(e,t,r,a,l,p,b,A){this.url=e,this.params=t,this.queryParams=r,this.fragment=a,this.data=l,this.outlet=p,this.component=b,this._futureSnapshot=A}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,En.U)(e=>Vc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,En.U)(e=>Vc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Jf(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const a=t[r],l=t[r-1];if(a.routeConfig&&""===a.routeConfig.path)r--;else{if(l.component)break;r--}}return function Gy(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Qu{constructor(e,t,r,a,l,p,b,A,L,G,K){this.url=e,this.params=t,this.queryParams=r,this.fragment=a,this.data=l,this.outlet=p,this.component=b,this.routeConfig=A,this._urlSegment=L,this._lastPathIndex=G,this._resolve=K}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Vc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ep extends Xf{constructor(e,t){super(t),this.url=e,_d(this,t)}toString(){return tp(this._root)}}function _d(n,e){e.value._routerState=n,e.children.forEach(t=>_d(n,t))}function tp(n){const e=n.children.length>0?` { ${n.children.map(tp).join(", ")} } `:"";return`${n.value}${e}`}function wd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,no(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),no(e.params,t.params)||n.params.next(t.params),function Ba(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!no(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),no(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function np(n,e){const t=no(n.params,e.params)&&function Kt(n,e){return wn(n,e)&&n.every((t,r)=>no(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||np(n.parent,e.parent))}function ch(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const a=function s0(n,e,t){return e.children.map(r=>{for(const a of t.children)if(n.shouldReuseRoute(r.value,a.value.snapshot))return ch(n,r,a);return ch(n,r)})}(n,e,t);return new Yu(r,a)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const p=l.route;return p.value._futureSnapshot=e.value,p.children=e.children.map(b=>ch(n,b)),p}}const r=function o0(n){return new uh(new eo(n.url),new eo(n.params),new eo(n.queryParams),new eo(n.fragment),new eo(n.data),n.outlet,n.component,n)}(e.value),a=e.children.map(l=>ch(n,l));return new Yu(r,a)}}function Wo(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Xu(n){return"object"==typeof n&&null!=n&&n.outlets}function lh(n,e,t,r,a){let l={};if(r&&Tr(r,(b,A)=>{l[A]=Array.isArray(b)?b.map(L=>`${L}`):`${b}`}),n===e)return new Pe(t,l,a);const p=Kg(n,e,t);return new Pe(p,l,a)}function Kg(n,e,t){const r={};return Tr(n.children,(a,l)=>{r[l]=a===e?t:Kg(a,e,t)}),new He(n.segments,r)}class Ky{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Wo(r[0]))throw new Error("Root segment cannot have matrix parameters");const a=r.find(Xu);if(a&&a!==la(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rp{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Yy(n,e,t){if(n||(n=new He([],{})),0===n.segments.length&&n.hasChildren())return ip(n,e,t);const r=function sp(n,e,t){let r=0,a=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(r>=t.length)return l;const p=n.segments[a],b=t[r];if(Xu(b))break;const A=`${b}`,L=r<t.length-1?t[r+1]:null;if(a>0&&void 0===A)break;if(A&&L&&"object"==typeof L&&void 0===L.outlets){if(!Ed(A,L,p))return l;r+=2}else{if(!Ed(A,{},p))return l;r++}a++}return{match:!0,pathIndex:a,commandIndex:r}}(n,e,t),a=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new He(n.segments.slice(0,r.pathIndex),{});return l.children[xn]=new He(n.segments.slice(r.pathIndex),n.children),ip(l,0,a)}return r.match&&0===a.length?new He(n.segments,{}):r.match&&!n.hasChildren()?a0(n,e,t):r.match?ip(n,0,a):a0(n,e,t)}function ip(n,e,t){if(0===t.length)return new He(n.segments,{});{const r=function Zy(n){return Xu(n[0])?n[0].outlets:{[xn]:n}}(t),a={};return Tr(r,(l,p)=>{"string"==typeof l&&(l=[l]),null!==l&&(a[p]=Yy(n.children[p],e,l))}),Tr(n.children,(l,p)=>{void 0===r[p]&&(a[p]=l)}),new He(n.segments,a)}}function a0(n,e,t){const r=n.segments.slice(0,e);let a=0;for(;a<t.length;){const l=t[a];if(Xu(l)){const A=Ga(l.outlets);return new He(r,A)}if(0===a&&Wo(t[0])){r.push(new Nt(n.segments[e].path,bd(t[0]))),a++;continue}const p=Xu(l)?l.outlets[xn]:`${l}`,b=a<t.length-1?t[a+1]:null;p&&b&&Wo(b)?(r.push(new Nt(p,bd(b))),a+=2):(r.push(new Nt(p,{})),a++)}return new He(r,{})}function Ga(n){const e={};return Tr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=a0(new He([],{}),0,t))}),e}function bd(n){const e={};return Tr(n,(t,r)=>e[r]=`${t}`),e}function Ed(n,e,t){return n==t.path&&no(e,t.parameters)}class Id{constructor(e,t,r,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),wd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const a=oh(t);e.children.forEach(l=>{const p=l.value.outlet;this.deactivateRoutes(l,a[p],r),delete a[p]}),Tr(a,(l,p)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(e,t,r){const a=e.value,l=t?t.value:null;if(a===l)if(a.component){const p=r.getContext(a.outlet);p&&this.deactivateChildRoutes(e,t,p.children)}else this.deactivateChildRoutes(e,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),a=r&&e.value.component?r.children:t,l=oh(e);for(const p of Object.keys(l))this.deactivateRouteAndItsChildren(l[p],a);if(r&&r.outlet){const p=r.outlet.detach(),b=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:p,route:e,contexts:b})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),a=r&&e.value.component?r.children:t,l=oh(e);for(const p of Object.keys(l))this.deactivateRouteAndItsChildren(l[p],a);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const a=oh(t);e.children.forEach(l=>{this.activateRoutes(l,a[l.value.outlet],r),this.forwardEvent(new bo(l.value.snapshot))}),e.children.length&&this.forwardEvent(new Ho(e.value.snapshot))}activateRoutes(e,t,r){const a=e.value,l=t?t.value:null;if(wd(a),a===l)if(a.component){const p=r.getOrCreateContext(a.outlet);this.activateChildRoutes(e,t,p.children)}else this.activateChildRoutes(e,t,r);else if(a.component){const p=r.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const b=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),p.children.onOutletReAttached(b.contexts),p.attachRef=b.componentRef,p.route=b.route.value,p.outlet&&p.outlet.attach(b.componentRef,b.route.value),wd(b.route.value),this.activateChildRoutes(e,null,p.children)}else{const b=function Cd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(a.snapshot),A=b?b.module.componentFactoryResolver:null;p.attachRef=null,p.route=a,p.resolver=A,p.outlet&&p.outlet.activateWith(a,A),this.activateChildRoutes(e,null,p.children)}}else this.activateChildRoutes(e,null,r)}}class Ju{constructor(e,t){this.routes=e,this.module=t}}function qa(n){return"function"==typeof n}function hh(n){return n instanceof Pe}const ap=Symbol("INITIAL_VALUE");function up(){return fi(n=>gu(n.map(e=>e.pipe((0,wo.q)(1),jo(ap)))).pipe($o((e,t)=>{let r=!1;return t.reduce((a,l,p)=>a!==ap?a:(l===ap&&(r=!0),r||!1!==l&&p!==t.length-1&&!hh(l)?a:l),e)},ap),ii(e=>e!==ap),(0,En.U)(e=>hh(e)?e:!0===e),(0,wo.q)(1)))}class Qy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new wl,this.attachRef=null}}class wl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Qy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Sd=(()=>{class n{constructor(t,r,a,l,p){this.parentContexts=t,this.location=r,this.resolver=a,this.changeDetector=p,this.activated=null,this._activatedRoute=null,this.activateEvents=new D.vpe,this.deactivateEvents=new D.vpe,this.attachEvents=new D.vpe,this.detachEvents=new D.vpe,this.name=l||xn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const p=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),b=this.parentContexts.getOrCreateContext(this.name).children,A=new Xy(t,b,this.location.injector);this.activated=this.location.createComponent(p,this.location.length,A),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(D.Y36(wl),D.Y36(D.s_b),D.Y36(D._Vd),D.$8M("name"),D.Y36(D.sBO))},n.\u0275dir=D.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Xy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===uh?this.route:e===wl?this.childContexts:this.parent.get(e,t)}}let Ad=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=D.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&D._UZ(0,"router-outlet")},directives:[Sd],encapsulation:2}),n})();function dh(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Gc(r,fh(e,r))}}function Gc(n,e){n.children&&dh(n.children,e)}function fh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function bu(n){const e=n.children&&n.children.map(bu),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xn&&(t.component=Ad),t}function Ji(n){return n.outlet||xn}function $r(n,e){const t=n.filter(r=>Ji(r)===e);return t.push(...n.filter(r=>Ji(r)!==e)),t}const Jy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function da(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Jy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const l=(e.matcher||zy)(t,n,e);if(!l)return Object.assign({},Jy);const p={};Tr(l.posParams,(A,L)=>{p[L]=A.path});const b=l.consumed.length>0?Object.assign(Object.assign({},p),l.consumed[l.consumed.length-1].parameters):p;return{matched:!0,consumedSegments:l.consumed,remainingSegments:t.slice(l.consumed.length),parameters:b,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function qc(n,e,t,r,a="corrected"){if(t.length>0&&function l0(n,e,t){return t.some(r=>Wc(n,e,r)&&Ji(r)!==xn)}(n,t,r)){const p=new He(e,function c0(n,e,t,r){const a={};a[xn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&Ji(l)!==xn){const p=new He([],{});p._sourceSegment=n,p._segmentIndexShift=e.length,a[Ji(l)]=p}return a}(n,e,r,new He(t,n.children)));return p._sourceSegment=n,p._segmentIndexShift=e.length,{segmentGroup:p,slicedSegments:[]}}if(0===t.length&&function xd(n,e,t){return t.some(r=>Wc(n,e,r))}(n,t,r)){const p=new He(n.segments,function Qg(n,e,t,r,a,l){const p={};for(const b of r)if(Wc(n,t,b)&&!a[Ji(b)]){const A=new He([],{});A._sourceSegment=n,A._segmentIndexShift="legacy"===l?n.segments.length:e.length,p[Ji(b)]=A}return Object.assign(Object.assign({},a),p)}(n,e,t,r,n.children,a));return p._sourceSegment=n,p._segmentIndexShift=e.length,{segmentGroup:p,slicedSegments:t}}const l=new He(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function Wc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ev(n,e,t,r){return!!(Ji(n)===r||r!==xn&&Wc(e,t,n))&&("**"===n.path||da(e,n,t).matched)}function cp(n,e,t){return 0===e.length&&!n.children[t]}class Md{constructor(e){this.segmentGroup=e||null}}class ph{constructor(e){this.urlTree=e}}function Oi(n){return Gu(new Md(n))}function lp(n){return Gu(new ph(n))}class bl{constructor(e,t,r,a,l){this.configLoader=t,this.urlSerializer=r,this.urlTree=a,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(D.h0i)}apply(){const e=qc(this.urlTree.root,[],[],this.config).segmentGroup,t=new He(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,xn).pipe((0,En.U)(l=>this.createUrlTree(Kc(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ws(l=>{if(l instanceof ph)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof Md?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,xn).pipe((0,En.U)(a=>this.createUrlTree(Kc(a),e.queryParams,e.fragment))).pipe(ws(a=>{throw a instanceof Md?this.noMatchError(a):a}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const a=e.segments.length>0?new He([],{[xn]:e}):e;return new Pe(a,t,r)}expandSegmentGroup(e,t,r,a){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,En.U)(l=>new He([],l))):this.expandSegment(e,r,t,r.segments,a,!0)}expandChildren(e,t,r){const a=[];for(const l of Object.keys(r.children))"primary"===l?a.unshift(l):a.push(l);return(0,gr.D)(a).pipe(Ci(l=>{const p=r.children[l],b=$r(t,l);return this.expandSegmentGroup(e,b,p,l).pipe((0,En.U)(A=>({segment:A,outlet:l})))}),$o((l,p)=>(l[p.outlet]=p.segment,l),{}),function r0(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ii((a,l)=>n(a,l,r)):Bo.y,Uc(1),t?Bc(e):pl(()=>new Oa))}())}expandSegment(e,t,r,a,l,p){return(0,gr.D)(r).pipe(Ci(b=>this.expandSegmentAgainstRoute(e,t,r,b,a,l,p).pipe(ws(L=>{if(L instanceof Md)return nn(null);throw L}))),ua(b=>!!b),ws((b,A)=>{if(b instanceof Oa||"EmptyError"===b.name)return cp(t,a,l)?nn(new He([],{})):Oi(t);throw b}))}expandSegmentAgainstRoute(e,t,r,a,l,p,b){return ev(a,t,l,p)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(e,t,a,l,p):b&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,a,l,p):Oi(t):Oi(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,a,l,p){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,a,p):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,a,l,p)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,a){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?lp(l):this.lineralizeSegments(r,l).pipe((0,Wr.z)(p=>{const b=new He(p,{});return this.expandSegment(e,b,t,p,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,a,l,p){const{matched:b,consumedSegments:A,remainingSegments:L,positionalParamSegments:G}=da(t,a,l);if(!b)return Oi(t);const K=this.applyRedirectCommands(A,a.redirectTo,G);return a.redirectTo.startsWith("/")?lp(K):this.lineralizeSegments(a,K).pipe((0,Wr.z)(oe=>this.expandSegment(e,t,r,oe.concat(L),p,!1)))}matchSegmentAgainstRoute(e,t,r,a,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?nn(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,En.U)(K=>(r._loadedConfig=K,new He(a,{})))):nn(new He(a,{}));const{matched:p,consumedSegments:b,remainingSegments:A}=da(t,r,a);return p?this.getChildConfig(e,r,a).pipe((0,Wr.z)(G=>{const K=G.module,oe=G.routes,{segmentGroup:ie,slicedSegments:Ce}=qc(t,b,A,oe),ft=new He(ie.segments,ie.children);if(0===Ce.length&&ft.hasChildren())return this.expandChildren(K,oe,ft).pipe((0,En.U)(Zt=>new He(b,Zt)));if(0===oe.length&&0===Ce.length)return nn(new He(b,{}));const yt=Ji(r)===l;return this.expandSegment(K,ft,oe,Ce,yt?xn:l,!0).pipe((0,En.U)(At=>new He(b.concat(At.segments),At.children)))})):Oi(t)}getChildConfig(e,t,r){return t.children?nn(new Ju(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?nn(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Wr.z)(a=>a?this.configLoader.load(e.injector,t).pipe((0,En.U)(l=>(t._loadedConfig=l,l))):function gh(n){return Gu(yl(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):nn(new Ju([],e))}runCanLoadGuards(e,t,r){const a=t.canLoad;return a&&0!==a.length?nn(a.map(p=>{const b=e.get(p);let A;if(function u0(n){return n&&qa(n.canLoad)}(b))A=b.canLoad(t,r);else{if(!qa(b))throw new Error("Invalid CanLoad guard");A=b(t,r)}return Xi(A)})).pipe(up(),(0,Qi.b)(p=>{if(!hh(p))return;const b=yl(`Redirecting to "${this.urlSerializer.serialize(p)}"`);throw b.url=p,b}),(0,En.U)(p=>!0===p)):nn(!0)}lineralizeSegments(e,t){let r=[],a=t.root;for(;;){if(r=r.concat(a.segments),0===a.numberOfChildren)return nn(r);if(a.numberOfChildren>1||!a.children[xn])return Gu(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));a=a.children[xn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,a){const l=this.createSegmentGroup(e,t.root,r,a);return new Pe(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Tr(e,(a,l)=>{if("string"==typeof a&&a.startsWith(":")){const b=a.substring(1);r[l]=t[b]}else r[l]=a}),r}createSegmentGroup(e,t,r,a){const l=this.createSegments(e,t.segments,r,a);let p={};return Tr(t.children,(b,A)=>{p[A]=this.createSegmentGroup(e,b,r,a)}),new He(l,p)}createSegments(e,t,r,a){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,a):this.findOrReturn(l,r))}findPosParam(e,t,r){const a=r[t.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return a}findOrReturn(e,t){let r=0;for(const a of t){if(a.path===e.path)return t.splice(r),a;r++}return e}}function Kc(n){const e={};for(const r of Object.keys(n.children)){const l=Kc(n.children[r]);(l.segments.length>0||l.hasChildren())&&(e[r]=l)}return function hp(n){if(1===n.numberOfChildren&&n.children[xn]){const e=n.children[xn];return new He(n.segments.concat(e.segments),e.children)}return n}(new He(n.segments,e))}class Vs{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Zc{constructor(e,t){this.component=e,this.route=t}}function Jg(n,e,t){const r=n._root;return El(r,e?e._root:null,t,[r.value])}function ec(n,e,t){const r=function Rd(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function El(n,e,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=oh(e);return n.children.forEach(p=>{(function Eu(n,e,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,p=e?e.value:null,b=t?t.getContext(n.value.outlet):null;if(p&&l.routeConfig===p.routeConfig){const A=function d0(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!wn(n.url,e.url);case"pathParamsOrQueryParamsChange":return!wn(n.url,e.url)||!no(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!np(n,e)||!no(n.queryParams,e.queryParams);default:return!np(n,e)}}(p,l,l.routeConfig.runGuardsAndResolvers);A?a.canActivateChecks.push(new Vs(r)):(l.data=p.data,l._resolvedData=p._resolvedData),El(n,e,l.component?b?b.children:null:t,r,a),A&&b&&b.outlet&&b.outlet.isActivated&&a.canDeactivateChecks.push(new Zc(b.outlet.component,p))}else p&&Co(e,b,a),a.canActivateChecks.push(new Vs(r)),El(n,null,l.component?b?b.children:null:t,r,a)})(p,l[p.value.outlet],t,r.concat([p.value]),a),delete l[p.value.outlet]}),Tr(l,(p,b)=>Co(p,t.getContext(b),a)),a}function Co(n,e,t){const r=oh(n),a=n.value;Tr(r,(l,p)=>{Co(l,a.component?e?e.children.getContext(p):null:e,t)}),t.canDeactivateChecks.push(new Zc(a.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,a))}class fp{}function Ti(n){return new Lr.y(e=>e.error(n))}class rv{constructor(e,t,r,a,l,p){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=p}recognize(){const e=qc(this.urlTree.root,[],[],this.config.filter(p=>void 0===p.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,xn);if(null===t)return null;const r=new Qu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},xn,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new Yu(r,t),l=new ep(this.url,a);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,r=Jf(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const l of Object.keys(t.children)){const p=t.children[l],b=$r(e,l),A=this.processSegmentGroup(b,p,l);if(null===A)return null;r.push(...A)}const a=Nd(r);return function iv(n){n.sort((e,t)=>e.value.outlet===xn?-1:t.value.outlet===xn?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}processSegment(e,t,r,a){for(const l of e){const p=this.processSegmentAgainstRoute(l,t,r,a);if(null!==p)return p}return cp(t,r,a)?[]:null}processSegmentAgainstRoute(e,t,r,a){if(e.redirectTo||!ev(e,t,r,a))return null;let l,p=[],b=[];if("**"===e.path){const ie=r.length>0?la(r).parameters:{};l=new Qu(r,ie,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,C(e),Ji(e),e.component,e,tm(t),Il(t)+r.length,y(e))}else{const ie=da(t,e,r);if(!ie.matched)return null;p=ie.consumedSegments,b=ie.remainingSegments,l=new Qu(p,ie.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,C(e),Ji(e),e.component,e,tm(t),Il(t)+p.length,y(e))}const A=function sv(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:L,slicedSegments:G}=qc(t,p,b,A.filter(ie=>void 0===ie.redirectTo),this.relativeLinkResolution);if(0===G.length&&L.hasChildren()){const ie=this.processChildren(A,L);return null===ie?null:[new Yu(l,ie)]}if(0===A.length&&0===G.length)return[new Yu(l,[])];const K=Ji(e)===a,oe=this.processSegment(A,L,G,K?xn:a);return null===oe?null:[new Yu(l,oe)]}}function pp(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Nd(n){const e=[],t=new Set;for(const r of n){if(!pp(r)){e.push(r);continue}const a=e.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==a?(a.children.push(...r.children),t.add(a)):e.push(r)}for(const r of t){const a=Nd(r.children);e.push(new Yu(r.value,a))}return e.filter(r=>!t.has(r))}function tm(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Il(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function C(n){return n.data||{}}function y(n){return n.resolve||{}}function pe(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Dt(n){return fi(e=>{const t=n(e);return t?(0,gr.D)(t).pipe((0,En.U)(()=>e)):nn(e)})}class cn extends class fn{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Yr=new D.OlP("ROUTES");class So{constructor(e,t,r,a){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=a}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const a=this.loadModuleFactory(t.loadChildren).pipe((0,En.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const p=l.create(e);return new Ju(Kf(p.injector.get(Yr,void 0,D.XFs.Self|D.XFs.Optional)).map(bu),p)}),ws(l=>{throw t._loader$=void 0,l}));return t._loader$=new Vo(a,()=>new Bs.x).pipe(fd()),t._loader$}loadModuleFactory(e){return Xi(e()).pipe((0,Wr.z)(t=>t instanceof D.YKP?nn(t):(0,gr.D)(this.compiler.compileModuleAsync(t))))}}class nm{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ov(n){throw n}function pi(n,e,t){return e.parse("/")}function fa(n,e){return nn(null)}const gp={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rm={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let js=(()=>{class n{constructor(t,r,a,l,p,b,A){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=a,this.location=l,this.config=A,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Bs.x,this.errorHandler=ov,this.malformedUriErrorHandler=pi,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:fa,afterPreactivation:fa},this.urlHandlingStrategy=new nm,this.routeReuseStrategy=new cn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=p.get(D.h0i),this.console=p.get(D.c2e);const K=p.get(D.R0b);this.isNgZoneEnabled=K instanceof D.R0b&&D.R0b.isInAngularZone(),this.resetConfig(A),this.currentUrlTree=function gd(){return new Pe(new He([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new So(p,b,oe=>this.triggerEvent(new Pi(oe)),oe=>this.triggerEvent(new Ku(oe))),this.routerState=vd(this.currentUrlTree,this.rootComponentType),this.transitions=new eo({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ii(a=>0!==a.id),(0,En.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),fi(a=>{let l=!1,p=!1;return nn(a).pipe((0,Qi.b)(b=>{this.currentNavigation={id:b.id,initialUrl:b.currentRawUrl,extractedUrl:b.extractedUrl,trigger:b.source,extras:b.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),fi(b=>{const A=this.browserUrlTree.toString(),L=!this.navigated||b.extractedUrl.toString()!==A||A!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||L)&&this.urlHandlingStrategy.shouldProcessUrl(b.rawUrl))return sm(b.source)&&(this.browserUrlTree=b.extractedUrl),nn(b).pipe(fi(K=>{const oe=this.transitions.getValue();return r.next(new Gf(K.id,this.serializeUrl(K.extractedUrl),K.source,K.restoredState)),oe!==this.transitions.getValue()?La.E:Promise.resolve(K)}),function tv(n,e,t,r){return fi(a=>function Li(n,e,t,r,a){return new bl(n,e,t,r,a).apply()}(n,e,t,a.extractedUrl,r).pipe((0,En.U)(l=>Object.assign(Object.assign({},a),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Qi.b)(K=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:K.urlAfterRedirects})}),function w(n,e,t,r,a){return(0,Wr.z)(l=>function kd(n,e,t,r,a="emptyOnly",l="legacy"){try{const p=new rv(n,e,t,r,a,l).recognize();return null===p?Ti(new fp):nn(p)}catch(p){return Ti(p)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),r,a).pipe((0,En.U)(p=>Object.assign(Object.assign({},l),{targetSnapshot:p}))))}(this.rootComponentType,this.config,K=>this.serializeUrl(K),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Qi.b)(K=>{if("eager"===this.urlUpdateStrategy){if(!K.extras.skipLocationChange){const ie=this.urlHandlingStrategy.merge(K.urlAfterRedirects,K.rawUrl);this.setBrowserUrl(ie,K)}this.browserUrlTree=K.urlAfterRedirects}const oe=new ml(K.id,this.serializeUrl(K.extractedUrl),this.serializeUrl(K.urlAfterRedirects),K.targetSnapshot);r.next(oe)}));if(L&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:oe,extractedUrl:ie,source:Ce,restoredState:ft,extras:yt}=b,Xt=new Gf(oe,this.serializeUrl(ie),Ce,ft);r.next(Xt);const At=vd(ie,this.rootComponentType).snapshot;return nn(Object.assign(Object.assign({},b),{targetSnapshot:At,urlAfterRedirects:ie,extras:Object.assign(Object.assign({},yt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=b.rawUrl,b.resolve(null),La.E}),Dt(b=>{const{targetSnapshot:A,id:L,extractedUrl:G,rawUrl:K,extras:{skipLocationChange:oe,replaceUrl:ie}}=b;return this.hooks.beforePreactivation(A,{navigationId:L,appliedUrlTree:G,rawUrlTree:K,skipLocationChange:!!oe,replaceUrl:!!ie})}),(0,Qi.b)(b=>{const A=new ih(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(A)}),(0,En.U)(b=>Object.assign(Object.assign({},b),{guards:Jg(b.targetSnapshot,b.currentSnapshot,this.rootContexts)})),function Wa(n,e){return(0,Wr.z)(t=>{const{targetSnapshot:r,currentSnapshot:a,guards:{canActivateChecks:l,canDeactivateChecks:p}}=t;return 0===p.length&&0===l.length?nn(Object.assign(Object.assign({},t),{guardsResult:!0})):function f0(n,e,t,r){return(0,gr.D)(n).pipe((0,Wr.z)(a=>function Do(n,e,t,r,a){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return l&&0!==l.length?nn(l.map(b=>{const A=ec(b,e,a);let L;if(function Yg(n){return n&&qa(n.canDeactivate)}(A))L=Xi(A.canDeactivate(n,e,t,r));else{if(!qa(A))throw new Error("Invalid CanDeactivate guard");L=Xi(A(n,e,t,r))}return L.pipe(ua())})).pipe(up()):nn(!0)}(a.component,a.route,t,e,r)),ua(a=>!0!==a,!0))}(p,r,a,n).pipe((0,Wr.z)(b=>b&&function op(n){return"boolean"==typeof n}(b)?function p0(n,e,t,r){return(0,gr.D)(e).pipe(Ci(a=>Lc(function nv(n,e){return null!==n&&e&&e(new Zu(n)),nn(!0)}(a.route.parent,r),function dp(n,e){return null!==n&&e&&e(new zo(n)),nn(!0)}(a.route,r),function em(n,e,t){const r=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(p=>function h0(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(p)).filter(p=>null!==p).map(p=>Fc(()=>nn(p.guards.map(A=>{const L=ec(A,p.node,t);let G;if(function Dd(n){return n&&qa(n.canActivateChild)}(L))G=Xi(L.canActivateChild(r,n));else{if(!qa(L))throw new Error("Invalid CanActivateChild guard");G=Xi(L(r,n))}return G.pipe(ua())})).pipe(up())));return nn(l).pipe(up())}(n,a.path,t),function To(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return nn(!0);const a=r.map(l=>Fc(()=>{const p=ec(l,e,t);let b;if(function Td(n){return n&&qa(n.canActivate)}(p))b=Xi(p.canActivate(e,n));else{if(!qa(p))throw new Error("Invalid CanActivate guard");b=Xi(p(e,n))}return b.pipe(ua())}));return nn(a).pipe(up())}(n,a.route,t))),ua(a=>!0!==a,!0))}(r,l,n,e):nn(b)),(0,En.U)(b=>Object.assign(Object.assign({},t),{guardsResult:b})))})}(this.ngModule.injector,b=>this.triggerEvent(b)),(0,Qi.b)(b=>{if(hh(b.guardsResult)){const L=yl(`Redirecting to "${this.serializeUrl(b.guardsResult)}"`);throw L.url=b.guardsResult,L}const A=new qf(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot,!!b.guardsResult);this.triggerEvent(A)}),ii(b=>!!b.guardsResult||(this.restoreHistory(b),this.cancelNavigationTransition(b,""),!1)),Dt(b=>{if(b.guards.canActivateChecks.length)return nn(b).pipe((0,Qi.b)(A=>{const L=new Wf(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);this.triggerEvent(L)}),fi(A=>{let L=!1;return nn(A).pipe(function x(n,e){return(0,Wr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:a}}=t;if(!a.length)return nn(t);let l=0;return(0,gr.D)(a).pipe(Ci(p=>function $(n,e,t,r){return function Z(n,e,t,r){const a=pe(n);if(0===a.length)return nn({});const l={};return(0,gr.D)(a).pipe((0,Wr.z)(p=>function ze(n,e,t,r){const a=ec(n,e,r);return Xi(a.resolve?a.resolve(e,t):a(e,t))}(n[p],e,t,r).pipe((0,Qi.b)(b=>{l[p]=b}))),Uc(1),(0,Wr.z)(()=>pe(l).length===a.length?nn(l):La.E))}(n._resolve,n,e,r).pipe((0,En.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),Jf(n,t).resolve),null)))}(p.route,r,n,e)),(0,Qi.b)(()=>l++),Uc(1),(0,Wr.z)(p=>l===a.length?nn(t):La.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Qi.b)({next:()=>L=!0,complete:()=>{L||(this.restoreHistory(A),this.cancelNavigationTransition(A,"At least one route resolver didn't emit any value."))}}))}),(0,Qi.b)(A=>{const L=new Ni(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);this.triggerEvent(L)}))}),Dt(b=>{const{targetSnapshot:A,id:L,extractedUrl:G,rawUrl:K,extras:{skipLocationChange:oe,replaceUrl:ie}}=b;return this.hooks.afterPreactivation(A,{navigationId:L,appliedUrlTree:G,rawUrlTree:K,skipLocationChange:!!oe,replaceUrl:!!ie})}),(0,En.U)(b=>{const A=function qy(n,e,t){const r=ch(n,e._root,t?t._root:void 0);return new yd(r,e)}(this.routeReuseStrategy,b.targetSnapshot,b.currentRouterState);return Object.assign(Object.assign({},b),{targetRouterState:A})}),(0,Qi.b)(b=>{this.currentUrlTree=b.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl),this.routerState=b.targetRouterState,"deferred"===this.urlUpdateStrategy&&(b.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,b),this.browserUrlTree=b.urlAfterRedirects)}),((n,e,t)=>(0,En.U)(r=>(new Id(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,b=>this.triggerEvent(b)),(0,Qi.b)({next(){l=!0},complete(){l=!0}}),function pd(n){return(0,Ii.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var b;l||p||this.cancelNavigationTransition(a,`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`),(null===(b=this.currentNavigation)||void 0===b?void 0:b.id)===a.id&&(this.currentNavigation=null)}),ws(b=>{if(p=!0,function jc(n){return n&&n[Zr]}(b)){const A=hh(b.url);A||(this.navigated=!0,this.restoreHistory(a,!0));const L=new gl(a.id,this.serializeUrl(a.extractedUrl),b.message);r.next(L),A?setTimeout(()=>{const G=this.urlHandlingStrategy.merge(b.url,this.rawUrlTree),K={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||sm(a.source)};this.scheduleNavigation(G,"imperative",null,K,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const A=new Kr(a.id,this.serializeUrl(a.extractedUrl),b);r.next(A);try{a.resolve(this.errorHandler(b))}catch(L){a.reject(L)}}return La.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var a;const l={replaceUrl:!0},p=(null===(a=t.state)||void 0===a?void 0:a.navigationId)?t.state:null;if(p){const A=Object.assign({},p);delete A.navigationId,delete A.\u0275routerPageId,0!==Object.keys(A).length&&(l.state=A)}const b=this.parseUrl(t.url);this.scheduleNavigation(b,r,p,l)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){dh(t),this.config=t.map(bu),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:a,queryParams:l,fragment:p,queryParamsHandling:b,preserveFragment:A}=r,L=a||this.routerState.root,G=A?this.currentUrlTree.fragment:p;let K=null;switch(b){case"merge":K=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":K=this.currentUrlTree.queryParams;break;default:K=l||null}return null!==K&&(K=this.removeEmptyProps(K)),function Wy(n,e,t,r,a){if(0===t.length)return lh(e.root,e.root,e.root,r,a);const l=function Mb(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ky(!0,0,n);let e=0,t=!1;const r=n.reduce((a,l,p)=>{if("object"==typeof l&&null!=l){if(l.outlets){const b={};return Tr(l.outlets,(A,L)=>{b[L]="string"==typeof A?A.split("/"):A}),[...a,{outlets:b}]}if(l.segmentPath)return[...a,l.segmentPath]}return"string"!=typeof l?[...a,l]:0===p?(l.split("/").forEach((b,A)=>{0==A&&"."===b||(0==A&&""===b?t=!0:".."===b?e++:""!=b&&a.push(b))}),a):[...a,l]},[]);return new Ky(t,e,r)}(t);if(l.toRoot())return lh(e.root,e.root,new He([],{}),r,a);const p=function Rb(n,e,t){if(n.isAbsolute)return new rp(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new rp(l,l===e.root,0)}const r=Wo(n.commands[0])?0:1;return function Zg(n,e,t){let r=n,a=e,l=t;for(;l>a;){if(l-=a,r=r.parent,!r)throw new Error("Invalid number of '../'");a=r.segments.length}return new rp(r,!1,a-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,e,n),b=p.processChildren?ip(p.segmentGroup,p.index,l.commands):Yy(p.segmentGroup,p.index,l.commands);return lh(e.root,p.segmentGroup,b,r,a)}(L,this.currentUrlTree,t,K,null!=G?G:null)}navigateByUrl(t,r={skipLocationChange:!1}){const a=hh(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function im(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(a){r=this.malformedUriErrorHandler(a,this.urlSerializer,t)}return r}isActive(t,r){let a;if(a=!0===r?Object.assign({},gp):!1===r?Object.assign({},rm):r,hh(t))return $c(this.currentUrlTree,t,a);const l=this.parseUrl(t);return $c(this.currentUrlTree,l,a)}removeEmptyProps(t){return Object.keys(t).reduce((r,a)=>{const l=t[a];return null!=l&&(r[a]=l),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ua(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,a,l,p){var b,A;if(this.disposed)return Promise.resolve(!1);let L,G,K;p?(L=p.resolve,G=p.reject,K=p.promise):K=new Promise((Ce,ft)=>{L=Ce,G=ft});const oe=++this.navigationId;let ie;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),ie=a&&a.\u0275routerPageId?a.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(b=this.browserPageId)&&void 0!==b?b:0:(null!==(A=this.browserPageId)&&void 0!==A?A:0)+1):ie=0,this.setTransition({id:oe,targetPageId:ie,source:r,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:L,reject:G,promise:K,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),K.catch(Ce=>Promise.reject(Ce))}setBrowserUrl(t,r){const a=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(a)||r.extras.replaceUrl?this.location.replaceState(a,"",l):this.location.go(a,"",l)}restoreHistory(t,r=!1){var a,l;if("computed"===this.canceledNavigationResolution){const p=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===p?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===p&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(p)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const a=new gl(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){D.$Z()},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();function sm(n){return"imperative"!==n}class av{}class uv{preload(e,t){return nn(null)}}let Pb=(()=>{class n{constructor(t,r,a,l){this.router=t,this.injector=a,this.preloadingStrategy=l,this.loader=new So(a,r,A=>t.triggerEvent(new Pi(A)),A=>t.triggerEvent(new Ku(A)))}setUpPreloading(){this.subscription=this.router.events.pipe(ii(t=>t instanceof Ua),Ci(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(D.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const a=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const p=l._loadedConfig;a.push(this.processRoutes(p.module,p.routes))}else l.loadChildren&&!l.canLoad?a.push(this.preloadConfig(t,l)):l.children&&a.push(this.processRoutes(t,l.children));return(0,gr.D)(a).pipe((0,qu.J)(),(0,En.U)(l=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?nn(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Wr.z)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(js),D.LFG(D.Sil),D.LFG(D.zs3),D.LFG(av))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})(),g0=(()=>{class n{constructor(t,r,a={}){this.router=t,this.viewportScroller=r,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Gf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ua&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _u&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new _u(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){D.$Z()},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();const _h=new D.OlP("ROUTER_CONFIGURATION"),wh=new D.OlP("ROUTER_FORROOT_GUARD"),am=[Ke,{provide:hn,useClass:Ur},{provide:js,useFactory:function Lb(n,e,t,r,a,l,p={},b,A){const L=new js(null,n,e,t,r,a,Kf(l));return b&&(L.urlHandlingStrategy=b),A&&(L.routeReuseStrategy=A),function lv(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(p,L),p.enableTracing&&L.events.subscribe(G=>{var K,oe;null===(K=console.group)||void 0===K||K.call(console,`Router Event: ${G.constructor.name}`),console.log(G.toString()),console.log(G),null===(oe=console.groupEnd)||void 0===oe||oe.call(console)}),L},deps:[hn,wl,Ke,D.zs3,D.Sil,Yr,_h,[class yh{},new D.FiY],[class qt{},new D.FiY]]},wl,{provide:uh,useFactory:function Fb(n){return n.routerState.root},deps:[js]},Pb,uv,class Nb{preload(e,t){return t().pipe(ws(()=>nn(null)))}},{provide:_h,useValue:{enableTracing:!1}}];function cv(){return new D.PXZ("Router",js)}let m0=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[am,y0(t),{provide:wh,useFactory:Ob,deps:[[js,new D.FiY,new D.tp0]]},{provide:_h,useValue:r||{}},{provide:ge,useFactory:uI,deps:[Le,[new D.tBr(ht),new D.FiY],_h]},{provide:g0,useFactory:$s,deps:[js,vs,_h]},{provide:av,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:uv},{provide:D.PXZ,multi:!0,useFactory:cv},[mp,{provide:D.ip1,multi:!0,useFactory:hv,deps:[mp]},{provide:dv,useFactory:Ub,deps:[mp]},{provide:D.tb,multi:!0,useExisting:dv}]]}}static forChild(t){return{ngModule:n,providers:[y0(t)]}}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(wh,8),D.LFG(js,8))},n.\u0275mod=D.oAB({type:n}),n.\u0275inj=D.cJS({}),n})();function $s(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new g0(n,e,t)}function uI(n,e,t={}){return t.useHash?new We(n,e):new bt(n,e)}function Ob(n){return"guarded"}function y0(n){return[{provide:D.deG,multi:!0,useValue:n},{provide:Yr,multi:!0,useValue:n}]}let mp=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Bs.x}appInitializer(){return this.injector.get(ae,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const a=new Promise(b=>r=b),l=this.injector.get(js),p=this.injector.get(_h);return"disabled"===p.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===p.initialNavigation||"enabledBlocking"===p.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?nn(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),a})}bootstrapListener(t){const r=this.injector.get(_h),a=this.injector.get(Pb),l=this.injector.get(g0),p=this.injector.get(js),b=this.injector.get(D.z2F);t===b.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&p.initialNavigation(),a.setUpPreloading(),l.init(),p.resetRootComponentType(b.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(D.zs3))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();function hv(n){return n.appInitializer.bind(n)}function Ub(n){return n.bootstrapListener.bind(n)}const dv=new D.OlP("Router Initializer"),um=[];let cI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=D.oAB({type:n}),n.\u0275inj=D.cJS({imports:[[m0.forRoot(um)],m0]}),n})();class cm{constructor(e){this.topo=e}}class yp{constructor(e,t){this.nodes=e,this.links=t}}var lm=M(5867),rt=M(5861),Iu=M(9681),Tn=M(2090),Pd=M(4859);const v0="firebasestorage.googleapis.com",vp="storageBucket";class gi extends Tn.ZR{constructor(e,t){super(hm(e),`Firebase Storage: ${t} (${hm(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,gi.prototype)}_codeEquals(e){return hm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function hm(n){return"storage/"+n}function _p(){return new gi("unknown","An unknown error occurred, please check the error payload for server response.")}function dm(){return new gi("canceled","User canceled the upload/download.")}function nr(){return new gi("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function es(n){return new gi("invalid-argument",n)}function Hr(){return new gi("app-deleted","The Firebase app was deleted.")}function Cn(n){return new gi("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Gn(n,e){return new gi("invalid-format","String does not match format '"+n+"': "+e)}function Tu(n){throw new gi("internal-error","Internal error: "+n)}class mr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=mr.makeFromUrl(e,t)}catch(a){return new mr(e,"")}if(""===r.path)return r;throw function In(n){return new gi("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const a="([A-Za-z0-9.\\-_]+)",b=new RegExp("^gs://"+a+"(/(.*))?$","i");function L(zt){zt.path_=decodeURIComponent(zt.path)}const K=t.replace(/[.]/g,"\\."),Zt=[{regex:b,indices:{bucket:1,path:3},postModify:function l(zt){"/"===zt.path.charAt(zt.path.length-1)&&(zt.path_=zt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${K}/v[A-Za-z0-9_]+/b/${a}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:L},{regex:new RegExp(`^https?://${t===v0?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${a}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:L}];for(let zt=0;zt<Zt.length;zt++){const ln=Zt[zt],yn=ln.regex.exec(e);if(yn){let $i=yn[ln.indices.path];$i||($i=""),r=new mr(yn[ln.indices.bucket],$i),ln.postModify(r);break}}if(null==r)throw function Pn(n){return new gi("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class dn{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Yc(n){return"string"==typeof n||n instanceof String}function Di(n){return Od()&&n instanceof Blob}function Od(){return"undefined"!=typeof Blob}function T0(n,e,t,r){if(r<e)throw es(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw es(`Invalid value for '${n}'. Expected ${t} or less.`)}function Ui(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function D0(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var br=(()=>{return(n=br||(br={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",br;var n})();class pv{constructor(e,t,r,a,l,p,b,A,L,G,K){this.url_=e,this.method_=t,this.headers_=r,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=p,this.callback_=b,this.errorCallback_=A,this.timeout_=L,this.progressCallback_=G,this.connectionFactory_=K,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((oe,ie)=>{this.resolve_=oe,this.reject_=ie,this.start_()})}start_(){const t=(r,a)=>{const l=this.resolve_,p=this.reject_,b=a.connection;if(a.wasSuccessCode)try{const A=this.callback_(b,b.getResponse());!function C0(n){return void 0!==n}(A)?l():l(A)}catch(A){p(A)}else if(null!==b){const A=_p();A.serverResponse=b.getErrorText(),p(this.errorCallback_?this.errorCallback_(b,A):A)}else p(a.canceled?this.appDelete_?Hr():dm():function fv(){return new gi("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new bp(!1,null,!0)):this.backoffId_=function E0(n,e,t){let r=1,a=null,l=null,p=!1,b=0;function A(){return 2===b}let L=!1;function G(...yt){L||(L=!0,e.apply(null,yt))}function K(yt){a=setTimeout(()=>{a=null,n(ie,A())},yt)}function oe(){l&&clearTimeout(l)}function ie(yt,...Xt){if(L)return void oe();if(yt)return oe(),void G.call(null,yt,...Xt);if(A()||p)return oe(),void G.call(null,yt,...Xt);let Zt;r<64&&(r*=2),1===b?(b=2,Zt=0):Zt=1e3*(r+Math.random()),K(Zt)}let Ce=!1;function ft(yt){Ce||(Ce=!0,oe(),!L&&(null!==a?(yt||(b=2),clearTimeout(a),K(0)):yt||(b=1)))}return K(0),l=setTimeout(()=>{p=!0,ft(!0)},t),ft}((r,a)=>{if(a)return void r(!1,new bp(!1,null,!0));const l=this.connectionFactory_();this.pendingConnection_=l;const p=b=>{null!==this.progressCallback_&&this.progressCallback_(b.loaded,b.lengthComputable?b.total:-1)};null!==this.progressCallback_&&l.addUploadProgressListener(p),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&l.removeUploadProgressListener(p),this.pendingConnection_=null;const b=l.getErrorCode()===br.NO_ERROR,A=l.getStatus();if(!b||this.isRetryStatusCode_(A)){const G=l.getErrorCode()===br.ABORT;return void r(!1,new bp(!1,null,G))}const L=-1!==this.successCodes_.indexOf(A);r(!0,new bp(L,l))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function I0(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,a=-1!==[408,429].indexOf(e),l=-1!==this.additionalRetryCodes_.indexOf(e);return t||a||l}}class bp{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function mv(...n){const e=function gv(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Od())return new Blob(n);throw new gi("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ga={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class yv{constructor(e,t){this.data=e,this.contentType=t||null}}function tc(n,e){switch(n){case ga.RAW:return new yv(pI(e));case ga.BASE64:case ga.BASE64URL:return new yv(gI(n,e));case ga.DATA_URL:return new yv(function $C(n){const e=new Gb(n);return e.base64?gI(ga.BASE64,e.rest):function jC(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Gn(ga.DATA_URL,"Malformed data URL.")}return pI(e)}(e.rest)}(e),function nc(n){return new Gb(n).contentType}(e))}throw _p()}function pI(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function gI(n,e){switch(n){case ga.BASE64:{const a=-1!==e.indexOf("-"),l=-1!==e.indexOf("_");if(a||l)throw Gn(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case ga.BASE64URL:{const a=-1!==e.indexOf("+"),l=-1!==e.indexOf("/");if(a||l)throw Gn(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function zb(n){return atob(n)}(e)}catch(a){throw Gn(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}class Gb{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Gn(ga.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Cl(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ka{constructor(e,t){let r=0,a="";Di(e)?(this.data_=e,r=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(Di(this.data_)){const a=function fI(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===a?null:new Ka(a)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ka(r,!0)}}static getBlob(...e){if(Od()){const t=e.map(r=>r instanceof Ka?r.data_:r);return new Ka(mv.apply(null,t))}{const t=e.map(p=>Yc(p)?tc(ga.RAW,p).data:p.data_);let r=0;t.forEach(p=>{r+=p.byteLength});const a=new Uint8Array(r);let l=0;return t.forEach(p=>{for(let b=0;b<p.length;b++)a[l++]=p[b]}),new Ka(a,!0)}}uploadData(){return this.data_}}function Tl(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function tn(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Ld(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Si(n,e){return e}class ar{constructor(e,t,r,a){this.server=e,this.local=t||e,this.writable=!!r,this.xform=a||Si}}let Qr=null;function Za(){if(Qr)return Qr;const n=[];n.push(new ar("bucket")),n.push(new ar("generation")),n.push(new ar("metageneration")),n.push(new ar("name","fullPath",!0));const t=new ar("name");t.xform=function e(l,p){return function Su(n){return!Yc(n)||n.length<2?n:Ld(n)}(p)},n.push(t);const a=new ar("size");return a.xform=function r(l,p){return void 0!==p?Number(p):p},n.push(a),n.push(new ar("timeCreated")),n.push(new ar("updated")),n.push(new ar("md5Hash",null,!0)),n.push(new ar("cacheControl",null,!0)),n.push(new ar("contentDisposition",null,!0)),n.push(new ar("contentEncoding",null,!0)),n.push(new ar("contentLanguage",null,!0)),n.push(new ar("contentType",null,!0)),n.push(new ar("metadata","customMetadata",!0)),Qr=n,Qr}function Fd(n,e,t){const r=Tl(e);return null===r?null:function A0(n,e,t){const r={type:"file"},a=t.length;for(let l=0;l<a;l++){const p=t[l];r[p.local]=p.xform(r,e[p.server])}return function qb(n,e){Object.defineProperty(n,"ref",{get:function t(){const l=new mr(n.bucket,n.fullPath);return e._makeStorageReference(l)}})}(r,n),r}(n,r,t)}function ma(n,e){const t={},r=e.length;for(let a=0;a<r;a++){const l=e[a];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}const Ko="prefixes";class Ao{constructor(e,t,r,a){this.url=e,this.method=t,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function rc(n){if(!n)throw _p()}function Ip(n,e){return function t(r,a){const l=Fd(n,a,e);return rc(null!==l),l}}function ts(n){return function e(t,r){let a;return a=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function w0(){return new gi("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Hb(){return new gi("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function $b(n){return new gi("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function bh(n){return new gi("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,a.serverResponse=r.serverResponse,a}}function Cp(n){const e=ts(n);return function t(r,a){let l=e(r,a);return 404===r.getStatus()&&(l=function jb(n){return new gi("object-not-found","Object '"+n+"' does not exist.")}(n.path)),l.serverResponse=a.serverResponse,l}}function Tp(n,e,t){const a=Ui(e.fullServerUrl(),n.host,n._protocol),p=n.maxOperationRetryTime,b=new Ao(a,"GET",Ip(n,t),p);return b.errorHandler=Cp(e),b}function mI(n,e,t,r,a){const l={};l.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(l.delimiter=t),r&&(l.pageToken=r),a&&(l.maxResults=a);const b=Ui(e.bucketOnlyServerUrl(),n.host,n._protocol),L=n.maxOperationRetryTime,G=new Ao(b,"GET",function Wb(n,e){return function t(r,a){const l=function Ep(n,e,t){const r=Tl(t);return null===r?null:function Eh(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Ko])for(const a of t[Ko]){const l=a.replace(/\/$/,""),p=n._makeStorageReference(new mr(e,l));r.prefixes.push(p)}if(t.items)for(const a of t.items){const l=n._makeStorageReference(new mr(e,a.name));r.items.push(l)}return r}(n,e,r)}(n,e,a);return rc(null!==l),l}}(n,e.bucket),L);return G.urlParams=l,G.errorHandler=ts(e),G}function Dp(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function vv(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}function _m(n,e,t,r,a){const l=e.bucketOnlyServerUrl(),p={"X-Goog-Upload-Protocol":"multipart"},A=function b(){let Zt="";for(let zt=0;zt<2;zt++)Zt+=Math.random().toString().slice(2);return Zt}();p["Content-Type"]="multipart/related; boundary="+A;const L=Dp(e,r,a),G=ma(L,t),ie=Ka.getBlob("--"+A+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+G+"\r\n--"+A+"\r\nContent-Type: "+L.contentType+"\r\n\r\n",r,"\r\n--"+A+"--");if(null===ie)throw nr();const Ce={name:L.fullPath},ft=Ui(l,n.host,n._protocol),Xt=n.maxUploadRetryTime,At=new Ao(ft,"POST",Ip(n,t),Xt);return At.urlParams=Ce,At.headers=p,At.body=ie.uploadData(),At.errorHandler=ts(e),At}class Bd{constructor(e,t,r,a){this.current=e,this.total=t,this.finalized=!!r,this.metadata=a||null}}function io(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(a){rc(!1)}return rc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const xo={STATE_CHANGED:"state_changed"},Dr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function so(n){switch(n){case"running":case"pausing":case"canceling":return Dr.RUNNING;case"paused":return Dr.PAUSED;case"success":return Dr.SUCCESS;case"canceled":return Dr.CANCELED;default:return Dr.ERROR}}class Ya{constructor(e,t,r){if(function wp(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function Dl(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class vI extends class Zb{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=br.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=br.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=br.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,a){if(this.sent_)throw Tu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==a)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Tu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Tu("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Tu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Tu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function xu(){return new vI}class _v{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Za(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{this._request=void 0,this._chunkMultiplier=1,a._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=a,this._transition("error"))},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals("canceled")?this.completeTransitions_():(this._error=a,this._transition("error"))},this._promise=new Promise((a,l)=>{this._resolve=a,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function R0(n,e,t,r,a){const l=e.bucketOnlyServerUrl(),p=Dp(e,r,a),b={name:p.fullPath},A=Ui(l,n.host,n._protocol),G={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":p.contentType,"Content-Type":"application/json; charset=utf-8"},K=ma(p,t),Ce=new Ao(A,"POST",function ie(ft){let yt;io(ft);try{yt=ft.getResponseHeader("X-Goog-Upload-URL")}catch(Xt){rc(!1)}return rc(Yc(yt)),yt},n.maxUploadRetryTime);return Ce.urlParams=b,Ce.headers=G,Ce.body=K,Ce.errorHandler=ts(e),Ce}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(r,xu,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const a=function k0(n,e,t,r){const A=new Ao(t,"POST",function l(L){const G=io(L,["active","final"]);let K=null;try{K=L.getResponseHeader("X-Goog-Upload-Size-Received")}catch(ie){rc(!1)}K||rc(!1);const oe=Number(K);return rc(!isNaN(oe)),new Bd(oe,r.size(),"final"===G)},n.maxUploadRetryTime);return A.headers={"X-Goog-Upload-Command":"query"},A.errorHandler=ts(e),A}(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(a,xu,t,r);this._request=l,l.getPromise().then(p=>{p=p,this._request=void 0,this._updateProgress(p.current),this._needToFetchStatus=!1,p.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Bd(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((a,l)=>{let p;try{p=function yI(n,e,t,r,a,l,p,b){const A=new Bd(0,0);if(p?(A.current=p.current,A.total=p.total):(A.current=0,A.total=r.size()),r.size()!==A.total)throw function mi(){return new gi("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const L=A.total-A.current;let G=L;a>0&&(G=Math.min(G,a));const K=A.current,Ce={"X-Goog-Upload-Command":G===L?"upload, finalize":"upload","X-Goog-Upload-Offset":`${A.current}`},ft=r.slice(K,K+G);if(null===ft)throw nr();const Zt=new Ao(t,"POST",function yt(zt,ln){const yn=io(zt,["active","final"]),hr=A.current+G,$i=r.size();let sI;return sI="final"===yn?Ip(e,l)(zt,ln):null,new Bd(hr,$i,"final"===yn,sI)},e.maxUploadRetryTime);return Zt.headers=Ce,Zt.body=ft.uploadData(),Zt.progressCallback=b||null,Zt.errorHandler=ts(n),Zt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(A){return this._error=A,void this._transition("error")}const b=this._ref.storage._makeRequest(p,xu,a,l);this._request=b,b.getPromise().then(A=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(A.current),A.finalized?(this._metadata=A.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Tp(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(r,xu,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=_m(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(r,xu,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=dm(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=so(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,a){const l=new Ya(t||void 0,r||void 0,a||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(so(this._state)){case Dr.SUCCESS:Dl(this._resolve.bind(null,this.snapshot))();break;case Dr.CANCELED:case Dr.ERROR:Dl(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(so(this._state)){case Dr.RUNNING:case Dr.PAUSED:e.next&&Dl(e.next.bind(e,this.snapshot))();break;case Dr.SUCCESS:e.complete&&Dl(e.complete.bind(e))();break;default:e.error&&Dl(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Ih{constructor(e,t){this._service=e,this._location=t instanceof mr?t:mr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ih(e,t)}get root(){const e=new mr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ld(this._location.path)}get storage(){return this._service}get parent(){const e=function pm(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new mr(this._location.bucket,e);return new Ih(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Cn(e)}}function wv(n,e,t){return bv.apply(this,arguments)}function bv(){return(bv=(0,rt.Z)(function*(n,e,t){const a=yield P0(n,{pageToken:t});e.prefixes.push(...a.prefixes),e.items.push(...a.items),null!=a.nextPageToken&&(yield wv(n,e,a.nextPageToken))})).apply(this,arguments)}function P0(n,e){null!=e&&"number"==typeof e.maxResults&&T0("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=mI(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,xu)}function eE(n){n._throwIfRoot("getDownloadURL");const e=function M0(n,e,t){const a=Ui(e.fullServerUrl(),n.host,n._protocol),p=n.maxOperationRetryTime,b=new Ao(a,"GET",function x0(n,e){return function t(r,a){const l=Fd(n,a,e);return rc(null!==l),function mm(n,e,t,r){const a=Tl(e);if(null===a||!Yc(a.downloadTokens))return null;const l=a.downloadTokens;if(0===l.length)return null;const p=encodeURIComponent;return l.split(",").map(L=>{const K=n.fullPath;return Ui("/b/"+p(n.bucket)+"/o/"+p(K),t,r)+D0({alt:"media",token:L})})[0]}(l,a,n.host,n._protocol)}}(n,t),p);return b.errorHandler=Cp(e),b}(n.storage,n._location,Za());return n.storage.makeRequestWithTokens(e,xu).then(t=>{if(null===t)throw function pa(){return new gi("no-download-url","The given file does not have any download URLs.")}();return t})}function Ch(n,e){const t=function gm(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new mr(n._location.bucket,t);return new Ih(n.storage,r)}function wm(n,e){if(n instanceof rE){const t=n;if(null==t._bucket)throw function b0(){return new gi("no-default-bucket","No default bucket found. Did you set the '"+vp+"' property when initializing the app?")}();const r=new Ih(t,t._bucket);return null!=e?wm(r,e):r}return void 0!==e?Ch(n,e):n}function Vd(n,e){if(e&&function Mp(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof rE)return function tE(n,e){return new Ih(n,e)}(n,e);throw es("To use ref(service, url), the first argument must be a Storage instance.")}return wm(n,e)}function Rp(n,e){const t=null==e?void 0:e[vp];return null==t?null:mr.makeFromBucketSpec(t,n)}class rE{constructor(e,t,r,a,l){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=a,this._firebaseVersion=l,this._bucket=null,this._host=v0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=a?mr.makeFromBucketSpec(a,this._host):Rp(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?mr.makeFromBucketSpec(this._url,e):Rp(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){T0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){T0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,rt.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,rt.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ih(this,e)}_makeRequest(e,t,r,a){if(this._deleted)return new dn(Hr());{const l=function fm(n,e,t,r,a,l){const p=D0(n.urlParams),b=n.url+p,A=Object.assign({},n.headers);return function dI(n,e){e&&(n["X-Firebase-GMPID"]=e)}(A,e),function hI(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(A,t),function S0(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(A,l),function Du(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(A,r),new pv(b,n.method,A,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a)}(e,this._appId,r,a,t,this._firebaseVersion);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,rt.Z)(function*(){const[a,l]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,a,l).getPromise()})()}}const kp="@firebase/storage",Ev="storage";function bm(n,e,t,r){return function Xb(n,e,t=ga.RAW,r){n._throwIfRoot("uploadString");const a=tc(t,e),l=Object.assign({},r);return null==l.contentType&&null!=a.contentType&&(l.contentType=a.contentType),function xp(n,e,t){n._throwIfRoot("uploadBytes");const r=_m(n.storage,n._location,Za(),new Ka(e,!0),t);return n.storage.makeRequestWithTokens(r,xu).then(a=>({metadata:a,ref:n}))}(n,a.data,l)}(n=(0,Tn.m9)(n),e,t,r)}function Tv(n){return eE(n=(0,Tn.m9)(n))}function $d(n,e){return Vd(n=(0,Tn.m9)(n),e)}function Pp(n=(0,Iu.getApp)(),e){return n=(0,Tn.m9)(n),(0,Iu._getProvider)(n,Ev).getImmediate({identifier:e})}function B0(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new rE(t,r,a,e,Iu.SDK_VERSION)}!function V0(){(0,Iu._registerComponent)(new Pd.wA(Ev,B0,"PUBLIC").setMultipleInstances(!0)),(0,Iu.registerVersion)(kp,"0.9.8",""),(0,Iu.registerVersion)(kp,"0.9.8","esm2017")}();class j0{}class $0{}class sc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const a=t.slice(0,r),l=a.toLowerCase(),p=t.slice(r+1).trim();this.maybeSetNormalizedName(a,l),this.headers.has(l)?this.headers.get(l).push(p):this.headers.set(l,[p])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const a=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(a,r),this.maybeSetNormalizedName(t,a))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof sc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new sc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof sc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const a=("a"===e.op?this.headers.get(t):void 0)||[];a.push(...r),this.headers.set(t,a);break;case"d":const l=e.value;if(l){let p=this.headers.get(t);if(!p)return;p=p.filter(b=>-1===l.indexOf(b)),0===p.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,p)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class aE{encodeKey(e){return z0(e)}encodeValue(e){return z0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const H0=/%(\d[a-f0-9])/gi,Lp={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function z0(n){return encodeURIComponent(n).replace(H0,(e,t)=>{var r;return null!==(r=Lp[t])&&void 0!==r?r:e})}function Th(n){return`${n}`}class Qc{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new aE,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function uE(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(a=>{const l=a.indexOf("="),[p,b]=-1==l?[e.decodeKey(a),""]:[e.decodeKey(a.slice(0,l)),e.decodeValue(a.slice(l+1))],A=t.get(p)||[];A.push(b),t.set(p,A)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const a=e[r];Array.isArray(a)?a.forEach(l=>{t.push({param:r,value:l,op:"a"})}):t.push({param:r,value:a,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Qc({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Th(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const a=r.indexOf(Th(e.value));-1!==a&&r.splice(a,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class cE{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Dv(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Sv(n){return"undefined"!=typeof Blob&&n instanceof Blob}function bs(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Fp{constructor(e,t,r,a){let l;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function lE(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||a?(this.body=void 0!==r?r:null,l=a):l=r,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new sc),this.context||(this.context=new cE),this.params){const p=this.params.toString();if(0===p.length)this.urlWithParams=t;else{const b=t.indexOf("?");this.urlWithParams=t+(-1===b?"?":b<t.length-1?"&":"")+p}}else this.params=new Qc,this.urlWithParams=t}serializeBody(){return null===this.body?null:Dv(this.body)||Sv(this.body)||bs(this.body)||function G0(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||bs(this.body)?null:Sv(this.body)?this.body.type||null:Dv(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,a=e.url||this.url,l=e.responseType||this.responseType,p=void 0!==e.body?e.body:this.body,b=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,A=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let L=e.headers||this.headers,G=e.params||this.params;const K=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(L=Object.keys(e.setHeaders).reduce((oe,ie)=>oe.set(ie,e.setHeaders[ie]),L)),e.setParams&&(G=Object.keys(e.setParams).reduce((oe,ie)=>oe.set(ie,e.setParams[ie]),G)),new Fp(r,a,p,{params:G,headers:L,context:K,reportProgress:A,responseType:l,withCredentials:b})}}var Ai=(()=>((Ai=Ai||{})[Ai.Sent=0]="Sent",Ai[Ai.UploadProgress=1]="UploadProgress",Ai[Ai.ResponseHeader=2]="ResponseHeader",Ai[Ai.DownloadProgress=3]="DownloadProgress",Ai[Ai.Response=4]="Response",Ai[Ai.User=5]="User",Ai))();class Av{constructor(e,t=200,r="OK"){this.headers=e.headers||new sc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Al extends Av{constructor(e={}){super(e),this.type=Ai.ResponseHeader}clone(e={}){return new Al({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class zd extends Av{constructor(e={}){super(e),this.type=Ai.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new zd({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Up extends Av{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Bp(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Em=(()=>{class n{constructor(t){this.handler=t}request(t,r,a={}){let l;if(t instanceof Fp)l=t;else{let A,L;A=a.headers instanceof sc?a.headers:new sc(a.headers),a.params&&(L=a.params instanceof Qc?a.params:new Qc({fromObject:a.params})),l=new Fp(t,r,void 0!==a.body?a.body:null,{headers:A,context:a.context,params:L,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials})}const p=nn(l).pipe(Ci(A=>this.handler.handle(A)));if(t instanceof Fp||"events"===a.observe)return p;const b=p.pipe(ii(A=>A instanceof zd));switch(a.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return b.pipe((0,En.U)(A=>{if(null!==A.body&&!(A.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return A.body}));case"blob":return b.pipe((0,En.U)(A=>{if(null!==A.body&&!(A.body instanceof Blob))throw new Error("Response is not a Blob.");return A.body}));case"text":return b.pipe((0,En.U)(A=>{if(null!==A.body&&"string"!=typeof A.body)throw new Error("Response is not a string.");return A.body}));default:return b.pipe((0,En.U)(A=>A.body))}case"response":return b;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Qc).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,a={}){return this.request("PATCH",t,Bp(a,r))}post(t,r,a={}){return this.request("POST",t,Bp(a,r))}put(t,r,a={}){return this.request("PUT",t,Bp(a,r))}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(j0))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();class q0{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const W0=new D.OlP("HTTP_INTERCEPTORS");let xv=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();const CI=/^\)\]\}',?\n/;let Xc=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Lr.y(r=>{const a=this.xhrFactory.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((ie,Ce)=>a.setRequestHeader(ie,Ce.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const ie=t.detectContentTypeHeader();null!==ie&&a.setRequestHeader("Content-Type",ie)}if(t.responseType){const ie=t.responseType.toLowerCase();a.responseType="json"!==ie?ie:"text"}const l=t.serializeBody();let p=null;const b=()=>{if(null!==p)return p;const ie=a.statusText||"OK",Ce=new sc(a.getAllResponseHeaders()),ft=function ns(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(a)||t.url;return p=new Al({headers:Ce,status:a.status,statusText:ie,url:ft}),p},A=()=>{let{headers:ie,status:Ce,statusText:ft,url:yt}=b(),Xt=null;204!==Ce&&(Xt=void 0===a.response?a.responseText:a.response),0===Ce&&(Ce=Xt?200:0);let At=Ce>=200&&Ce<300;if("json"===t.responseType&&"string"==typeof Xt){const Zt=Xt;Xt=Xt.replace(CI,"");try{Xt=""!==Xt?JSON.parse(Xt):null}catch(zt){Xt=Zt,At&&(At=!1,Xt={error:zt,text:Xt})}}At?(r.next(new zd({body:Xt,headers:ie,status:Ce,statusText:ft,url:yt||void 0})),r.complete()):r.error(new Up({error:Xt,headers:ie,status:Ce,statusText:ft,url:yt||void 0}))},L=ie=>{const{url:Ce}=b(),ft=new Up({error:ie,status:a.status||0,statusText:a.statusText||"Unknown Error",url:Ce||void 0});r.error(ft)};let G=!1;const K=ie=>{G||(r.next(b()),G=!0);let Ce={type:Ai.DownloadProgress,loaded:ie.loaded};ie.lengthComputable&&(Ce.total=ie.total),"text"===t.responseType&&!!a.responseText&&(Ce.partialText=a.responseText),r.next(Ce)},oe=ie=>{let Ce={type:Ai.UploadProgress,loaded:ie.loaded};ie.lengthComputable&&(Ce.total=ie.total),r.next(Ce)};return a.addEventListener("load",A),a.addEventListener("error",L),a.addEventListener("timeout",L),a.addEventListener("abort",L),t.reportProgress&&(a.addEventListener("progress",K),null!==l&&a.upload&&a.upload.addEventListener("progress",oe)),a.send(l),r.next({type:Ai.Sent}),()=>{a.removeEventListener("error",L),a.removeEventListener("abort",L),a.removeEventListener("load",A),a.removeEventListener("timeout",L),t.reportProgress&&(a.removeEventListener("progress",K),null!==l&&a.upload&&a.upload.removeEventListener("progress",oe)),a.readyState!==a.DONE&&a.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(tr))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})();const Qa=new D.OlP("XSRF_COOKIE_NAME"),Jc=new D.OlP("XSRF_HEADER_NAME");class Nv{}let pE=(()=>{class n{constructor(t,r,a){this.doc=t,this.platform=r,this.cookieName=a,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Tt(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Ve),D.LFG(D.Lbi),D.LFG(Qa))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})(),Z0=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const a=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||a.startsWith("http://")||a.startsWith("https://"))return r.handle(t);const l=this.tokenService.getToken();return null!==l&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,l)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Nv),D.LFG(Jc))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})(),TI=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(W0,[]);this.chain=r.reduceRight((a,l)=>new q0(a,l),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(D.LFG($0),D.LFG(D.zs3))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac}),n})(),AI=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Z0,useClass:xv}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Qa,useValue:t.cookieName}:[],t.headerName?{provide:Jc,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=D.oAB({type:n}),n.\u0275inj=D.cJS({providers:[Z0,{provide:W0,useExisting:Z0,multi:!0},{provide:Nv,useClass:pE},{provide:Qa,useValue:"XSRF-TOKEN"},{provide:Jc,useValue:"X-XSRF-TOKEN"}]}),n})(),Cm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=D.oAB({type:n}),n.\u0275inj=D.cJS({providers:[Em,{provide:j0,useClass:TI},Xc,{provide:$0,useExisting:Xc}],imports:[[AI.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();var Pv=M(4986),yi=M(5813),Es=M(2011),xl=M(3942);class Xa{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class yE{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Xa(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Xa(r,this,this._ref))},t)}on(e,t,r,a){let l;return t&&(l="function"==typeof t?p=>t(new Xa(p,this,this._ref)):{next:t.next?p=>t.next(new Xa(p,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,l,r||void 0,a||void 0)}}class Gd{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new el(e,this._service))}get items(){return this._delegate.items.map(e=>new el(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class el{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Np(n,e){return Ch(n,e)}(this._delegate,e);return new el(t,this.storage)}get root(){return new el(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new el(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new yE(function jd(n,e,t){return function N0(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new _v(n,new Ka(e),t)}(n=(0,Tn.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ga.RAW,r){this._throwIfRoot("putString");const a=tc(t,e),l=Object.assign({},r);return null==l.contentType&&null!=a.contentType&&(l.contentType=a.contentType),new yE(new _v(this._delegate,new Ka(a.data,!0),l),this)}listAll(){return function II(n){return function bI(n){const e={prefixes:[],items:[]};return wv(n,e).then(()=>e)}(n=(0,Tn.m9)(n))}(this._delegate).then(e=>new Gd(e,this.storage))}list(e){return function Cv(n,e){return P0(n=(0,Tn.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Gd(t,this.storage))}getMetadata(){return function sE(n){return function Jb(n){n._throwIfRoot("getMetadata");const e=Tp(n.storage,n._location,Za());return n.storage.makeRequestWithTokens(e,xu)}(n=(0,Tn.m9)(n))}(this._delegate)}updateMetadata(e){return function Sl(n,e){return function O0(n,e){n._throwIfRoot("updateMetadata");const t=function ym(n,e,t,r){const l=Ui(e.fullServerUrl(),n.host,n._protocol),b=ma(t,r),L=n.maxOperationRetryTime,G=new Ao(l,"PATCH",Ip(n,r),L);return G.headers={"Content-Type":"application/json; charset=utf-8"},G.body=b,G.errorHandler=Cp(e),G}(n.storage,n._location,e,Za());return n.storage.makeRequestWithTokens(t,xu)}(n=(0,Tn.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return Tv(this._delegate)}delete(){return this._throwIfRoot("delete"),function oE(n){return function EI(n){n._throwIfRoot("deleteObject");const e=function vm(n,e){const r=Ui(e.fullServerUrl(),n.host,n._protocol),b=new Ao(r,"DELETE",function p(A,L){},n.maxOperationRetryTime);return b.successCodes=[200,204],b.errorHandler=Cp(e),b}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,xu)}(n=(0,Tn.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Cn(e)}}class Y0{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Ov(e))throw es("ref() expected a child path but got a URL, use refFromURL instead.");return new el($d(this._delegate,e),this)}refFromURL(e){if(!Ov(e))throw es("refFromURL() expected a full URL but got a child path, use ref() instead.");try{mr.makeFromUrl(e,this._delegate.host)}catch(t){throw es("refFromUrl() expected a valid full URL but got an invalid one.")}return new el($d(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function Op(n,e,t,r={}){!function nE(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken="string"==typeof a?a:(0,Tn.Sg)(a,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function Ov(n){return/^[A-Za-z]+:\/\//.test(n)}function Dh(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Y0(t,r)}!function Lv(n){const e={TaskState:Dr,TaskEvent:xo,StringFormat:ga,Storage:Y0,Reference:el};n.INTERNAL.registerComponent(new Pd.wA("storage-compat",Dh,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.16")}(xl.Z);var Ml=M(1877);const Fv=new Map,Am={activated:!1,tokenObservers:[]},vE={initialized:!1,enabled:!1};function Hs(n){return Fv.get(n)||Am}function uc(n,e){Fv.set(n,e)}function xm(){return vE}class PI{constructor(e,t,r,a,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=a,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=a,a>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,rt.Z)(function*(){t.stop();try{t.pending=new Tn.BH,yield function wE(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Tn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ro=new Tn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Rh(n){if(!Hs(n).activated)throw Ro.create("use-before-activation",{appName:n.name})}function bE(n,e){return Vv.apply(this,arguments)}function Vv(){return(Vv=(0,rt.Z)(function*({url:n,body:e},t){var r,a;const l={"Content-Type":"application/json"},p=t.getImmediate({optional:!0});if(p){const ie=yield p.getHeartbeatsHeader();ie&&(l["X-Firebase-Client"]=ie)}const b={method:"POST",body:JSON.stringify(e),headers:l};let A,L;try{A=yield fetch(n,b)}catch(ie){throw Ro.create("fetch-network-error",{originalErrorMessage:null===(r=ie)||void 0===r?void 0:r.message})}if(200!==A.status)throw Ro.create("fetch-status-error",{httpStatus:A.status});try{L=yield A.json()}catch(ie){throw Ro.create("fetch-parse-error",{originalErrorMessage:null===(a=ie)||void 0===a?void 0:a.message})}const G=L.ttl.match(/^([\d.]+)(s)$/);if(!G||!G[2]||isNaN(Number(G[1])))throw Ro.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${L.ttl}`});const K=1e3*Number(G[1]),oe=Date.now();return{token:L.token,expireTimeMillis:oe+K,issuedAtTimeMillis:oe}})).apply(this,arguments)}function HC(n,e){const{projectId:t,appId:r,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const Kd="firebase-app-check-store";let Gp=null;function sw(){return Gp||(Gp=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=a=>{n(a.target.result)},r.onerror=a=>{var l;e(Ro.create("storage-open",{originalErrorMessage:null===(l=a.target.error)||void 0===l?void 0:l.message}))},r.onupgradeneeded=a=>{0===a.oldVersion&&a.target.result.createObjectStore(Kd,{keyPath:"compositeKey"})}}catch(r){e(Ro.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Gp)}function ow(){return(ow=(0,rt.Z)(function*(n,e){const r=(yield sw()).transaction(Kd,"readwrite"),l=r.objectStore(Kd).put({compositeKey:n,value:e});return new Promise((p,b)=>{l.onsuccess=A=>{p()},r.onerror=A=>{var L;b(Ro.create("storage-set",{originalErrorMessage:null===(L=A.target.error)||void 0===L?void 0:L.message}))}})})).apply(this,arguments)}const Rm=new Ml.Yd("@firebase/app-check");function Hv(n,e){return(0,Tn.hl)()?function LI(n,e){return function IE(n,e){return ow.apply(this,arguments)}(function uw(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Rm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function DE(){return xm().enabled}function UI(){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,rt.Z)(function*(){const n=xm();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const AE={error:"UNKNOWN_ERROR"};function cw(n){return Tn.US.encodeString(JSON.stringify(n),!1)}function qp(n){return Wp.apply(this,arguments)}function Wp(){return(Wp=(0,rt.Z)(function*(n,e=!1){const t=n.app;Rh(t);const r=Hs(t);let l,a=r.token;if(!a){const A=yield r.cachedTokenPromise;A&&Yp(A)&&(a=A)}if(!e&&a&&Yp(a))return{token:a.token};let b,p=!1;if(DE()){r.exchangeTokenPromise||(r.exchangeTokenPromise=bE(HC(t,yield UI()),n.heartbeatServiceProvider).then(L=>(r.exchangeTokenPromise=void 0,L)),p=!0);const A=yield r.exchangeTokenPromise;return yield Hv(t,A),uc(t,Object.assign(Object.assign({},r),{token:A})),{token:A.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(A=>(r.exchangeTokenPromise=void 0,A)),p=!0),a=yield r.exchangeTokenPromise}catch(A){"appCheck/throttled"===A.code?Rm.warn(A.message):Rm.error(A),l=A}return a?(b={token:a.token},uc(t,Object.assign(Object.assign({},r),{token:a})),yield Hv(t,a)):b=lw(l),p&&zv(t,b),b})).apply(this,arguments)}function Nm(n,e){const t=Hs(n),r=t.tokenObservers.filter(a=>a.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),uc(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function xE(n){const{app:e}=n,t=Hs(e);let r=t.tokenRefresher;r||(r=function Zp(n){const{app:e}=n;return new PI((0,rt.Z)(function*(){let r;if(r=Hs(e).token?yield qp(n,!0):yield qp(n),r.error)throw r.error}),()=>!0,()=>{const t=Hs(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),uc(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function zv(n,e){const t=Hs(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(a){}}function Yp(n){return n.expireTimeMillis-Date.now()>0}function lw(n){return{token:cw(AE),error:n}}class BI{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Hs(this.app);for(const t of e)Nm(this.app,t.next);return Promise.resolve()}}const UE="app-check-internal";!function Is(){(0,Iu._registerComponent)(new Pd.wA("app-check",n=>function Gv(n,e){return new BI(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(UE).initialize()})),(0,Iu._registerComponent)(new Pd.wA(UE,n=>function ME(n){return{getToken:e=>qp(n,e),addTokenListener:e=>function Kp(n,e,t,r){const{app:a}=n,l=Hs(a),p={next:t,error:r,type:e};if(uc(a,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,p]})),l.token&&Yp(l.token)){const b=l.token;Promise.resolve().then(()=>{t({token:b.token}),xE(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>xE(n))}(n,"INTERNAL",e),removeTokenListener:e=>Nm(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Iu.registerVersion)("@firebase/app-check","0.5.10")}();class Yv{constructor(){return(0,yi.vb)("app-check")}}"undefined"!=typeof window&&window;var zI=M(127);function Ja(n){const e=function tl(n){return new Lr.y(e=>{const t=p=>e.next(p);t(n.snapshot);const l=n.on("state_changed",t);return n.then(p=>{t(p),e.complete()},p=>{t(n.snapshot),(p=>{e.error(p)})(p)}),function(){l()}}).pipe(function mE(n,e=Pv.z){return(0,Ii.e)((t,r)=>{let a=null,l=null,p=null;const b=()=>{if(a){a.unsubscribe(),a=null;const L=l;l=null,r.next(L)}};function A(){const L=p+n,G=e.now();if(G<L)return a=this.schedule(void 0,L-G),void r.add(a);b()}t.subscribe((0,ki.x)(r,L=>{l=L,p=e.now(),a||(a=e.schedule(A,n),r.add(a))},()=>{b(),r.complete()},void 0,()=>{l=a=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,En.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function ya(n){return{getDownloadURL:()=>nn(void 0).pipe(yi.fc,fi(()=>n.getDownloadURL()),yi.iC),getMetadata:()=>nn(void 0).pipe(yi.fc,fi(()=>n.getMetadata()),yi.iC),delete:()=>(0,gr.D)(n.delete()),child:e=>ya(n.child(e)),updateMetadata:e=>(0,gr.D)(n.updateMetadata(e)),put:(e,t)=>Ja(n.put(e,t)),putString:(e,t,r)=>Ja(n.putString(e,t,r)),list:e=>(0,gr.D)(n.list(e)),listAll:()=>(0,gr.D)(n.listAll())}}const HE=new D.OlP("angularfire2.storageBucket"),zE=new D.OlP("angularfire2.storage.maxUploadRetryTime"),GI=new D.OlP("angularfire2.storage.maxOperationRetryTime"),qI=new D.OlP("angularfire2.storage.use-emulator");let yw=(()=>{class n{constructor(t,r,a,l,p,b,A,L,G,K){const oe=(0,Es.on)(t,p,r);this.storage=(0,Es.cc)(`${oe.name}.storage.${a}`,"AngularFireStorage",oe.name,()=>{const ie=p.runOutsideAngular(()=>oe.storage(a||void 0)),Ce=G;return Ce&&ie.useEmulator(...Ce),A&&ie.setMaxUploadRetryTime(A),L&&ie.setMaxOperationRetryTime(L),ie},[A,L])}ref(t){return ya(this.storage.ref(t))}refFromURL(t){return ya(this.storage.refFromURL(t))}upload(t,r,a){return ya(this.storage.ref(t)).put(r,a)}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Es.Dh),D.LFG(Es.xv,8),D.LFG(HE,8),D.LFG(D.Lbi),D.LFG(D.R0b),D.LFG(yi.HU),D.LFG(zE,8),D.LFG(GI,8),D.LFG(qI,8),D.LFG(Yv,8))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const vw=["topo_container"];var yr=M(5188),e_=M(505);(0,lm.ZF)({apiKey:"AIzaSyCeRkrVepStRHHP-5WuMgJ80f3hIfTLn_0",authDomain:"mininet-optical-file-system.firebaseapp.com",projectId:"mininet-optical-file-system",storageBucket:"mininet-optical-file-system.appspot.com",messagingSenderId:"752741188254",appId:"1:752741188254:web:b113a9ec279d157325b18f"});let qE=(()=>{class n{constructor(t,r){this.http=t,this.storages=r,this.isRendered=!1,this.linksArray=[],this.nodeArray=[],this.preLinkProcess=!1,this.preNodeProcess=!1,this.nodeFileUrl="",this.linkFileUrl="",this.storageUrl="gs://mininet-optical-file-system.appspot.com",this.animated=!1,this.ticks_per_render=5,this.regexExp=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/gi,this.networkData=new yp([],[]),this.firebaseGetLinkFile()}ngOnInit(){}ngAfterContentInit(){}ngAfterViewInit(){this.isRendered=!0}initialize_topo(){this.svg=yr.select(this.svgContainerRef.nativeElement);let t=this.svg.select("g.links");t.size()||(t=this.svg.append("g").attr("class","links"));let r=this.svg.select("g.nodes");r.size()||(r=this.svg.append("g").attr("class","nodes"));let a=this.svg.select("g.desc");if(a.size()||(a=this.svg.append("g").attr("class","desc")),!this.topo){this.simulation=yr.forceSimulation().stop();let l=yr.forceLink().id(ie=>ie.id).distance(function(ie){return"id"in ie.source&&"id"in ie.target?120:60}),p=yr.forceManyBody().strength(ie=>"id"in ie?-160:-200).distanceMax(300),b=yr.forceCenter(),A=yr.drag().on("start",ie=>{yr.event.active||this.simulation.alphaTarget(.3).restart(),ie.fx=ie.x,ie.fy=ie.y}).on("drag",ie=>{ie.fx=yr.event.x,ie.fy=yr.event.y}).on("end",ie=>{this.simulation=this.topo.simulation,yr.event.active||this.simulation.alphaTarget(0),ie.fx=null,ie.fy=null}),L=yr.zoom().scaleExtent([.1,5]).on("zoom",()=>{t.attr("transform",yr.event.transform),r.attr("transform",yr.event.transform),a.attr("transform",yr.event.transform)});this.svg.call(L);let G=e_().attr("class","tooltip").offset([-10,0]).html(ie=>"<p><strong class='title'>Name:</strong>"+(ie=this.selData).device_name+"</p><p><strong class='title'>IP:</strong>"+ie.ip+"</p><p><strong class='title'>Pid:</strong>"+ie.pid+"</p>");this.svg.call(G);let K=e_().attr("class","tooltip"),oe=e_().attr("class","tooltip");this.svg.call(K),this.svg.call(oe),this.animated&&this.simulation.force("link",l).force("center",b).force("charge",p),this.topo={simulation:this.simulation,link_force:l,charge_force:p,center_force:b,drag:A,zoom:L,node_tip:G,link_source_tip:K,link_dest_tip:oe}}}load(){let t=this.topo.simulation,r=this.topo.link_force,a=this.topo.drag,l=this.topo.node_tip,p=this.topo.link_source_tip,b=this.topo.link_dest_tip,A=yr.select(this.svgContainerRef.nativeElement);yr.json("../../assets/data.json",L=>{let G=yr.map((L=L.topo).nodes,At=>At.id),K=[];L.links.forEach((At,Zt)=>{let zt=At.source=G.get(At.source),ln=At.target=G.get(At.target),yn={};L.nodes.push(yn),L.links.push({source:zt,target:yn},{source:yn,target:ln}),K.push({id:At.id,source:zt,intermediate:yn,target:ln,source_port_disp:At.source_port_disp,target_port_disp:At.target_port_disp})});let oe=A.select("g.links").selectAll("g.link_container").data(K);oe.exit().remove();let ie=oe.enter().append("g").classed("link_container",!0);ie.append("path").classed("link_item",!0),ie.append("path").classed("link_selector",!0).on("mouseover",(At,Zt,zt)=>{yr.select(zt[Zt].parentNode).classed("focus",!0),A.select("g.nodes").selectAll("g.node_container").each((rM,iM,sM)=>{rM.id==At.source.id?this.src_node=yr.select(sM[iM]).classed("focus focusing",!0):rM.id==At.target.id&&(this.dst_node=yr.select(sM[iM]).classed("focus focusing",!0))});let ln,yn,hr=[0,0],$i=[0,0],MT=this.src_node.datum().x-this.dst_node.datum().x,RT=this.src_node.datum().y-this.dst_node.datum().y;Math.abs(MT)>Math.abs(RT)?(MT>0?(ln="e",hr[1]=5,yn="w",$i[1]=-5):(ln="w",hr[1]=-5,yn="e",$i[1]=5),Math.abs(RT)>20&&(RT>0?(ln="s"+ln,hr=[-5,-5*Math.sign(hr[1])],yn="n"+yn,$i=[5,-5*Math.sign($i[1])]):(ln="n"+ln,hr=[5,-5*Math.sign(hr[1])],yn="s"+yn,$i=[-5,-5*Math.sign($i[1])]))):(RT>0?(ln="s",hr[0]=5,yn="n",$i[0]=-5):(ln="n",hr[0]=-5,yn="s",$i[0]=5),Math.abs(MT)>20&&(MT>0?(ln+="e",hr=[-5*Math.sign(hr[0]),-5],yn+="w",$i=[-5*Math.sign($i[0]),5]):(ln+="w",hr=[-5*Math.sign(hr[0]),5],yn+="e",$i=[-5*Math.sign($i[0]),-5]))),p.direction(ln).offset(hr).html("<strong>"+At.source_port_disp+"</strong>").show(this.src_node.node()),b.direction(yn).offset($i).html("<strong> "+At.target_port_disp+"</strong>").show(this.dst_node.node())}).on("mouseout",(At,Zt,zt)=>{yr.select(zt[Zt].parentNode).classed("focus",!1),A.select("g.nodes").selectAll("g.node_container").each((ln,yn,hr)=>{ln.id==At.source.id?(this.src_node=yr.select(hr[yn]).classed("focus focusing",!1),p.hide()):ln.id==At.target.id&&(this.dst_node=yr.select(hr[yn]).classed("focus focusing",!1),b.hide())})}),oe=ie.merge(oe);let Ce=A.select("g.nodes").selectAll("g.node_container").data(L.nodes.filter(At=>"id"in At));Ce.exit().remove();let ft=Ce.enter().append("g").on("click",()=>{}).on("mouseover",(At,Zt,zt)=>(this.selData=At,yr.select(zt[Zt]).classed("focus",!0),l.show.apply(this,[zt[Zt]]))).on("mouseout",(At,Zt,zt)=>(yr.select(zt[Zt]).classed("focus",!1),l.hide.apply(this,zt[Zt]))).call(a);ft.append("circle").attr("r",20),ft.append("text").attr("x",0).attr("y",12).classed("ftstcall",!0).text("\ueaf2"),Ce=ft.merge(Ce),Ce.attr("class",At=>{let Zt;return Zt=At.knmp_on&&At.ip_on&&At.snmp_on?"stat_normal":At.knmp_on&&At.ip_on&&!At.snmp_on?"stat_abnormal":!At.knmp_on||At.ip_on||At.snmp_on?At.knmp_on||At.ip_on||At.snmp_on?"stat_unknown":"stat_down":"stat_error","node_container "+Zt});let yt=A.select("g.desc").selectAll("g.desc_container").data(L.nodes.filter(At=>"id"in At));yt.exit().remove();let Xt=yt.enter().append("g").classed("desc_container",!0);Xt.append("text").attr("x",0).attr("y",35),yt=Xt.merge(yt),yt.select("text").text(At=>At.mac),t.nodes(L.nodes),r.links(L.links),t.on("tick",()=>{this.do_tick(oe,Ce,yt)}),this.simulation=t,this.do_layout()})}do_layout(){let t=yr.select(this.svgContainerRef.nativeElement),r=this.topo.center_force,a=+t.style("width").replace("px",""),l=+t.style("height").replace("px","");r.x(a/2).y(l/2),this.animated?this.do_animated_layout():this.do_static_layout()}do_static_layout(){let t=this.topo.simulation,a=this.topo.charge_force,l=this.topo.link_force;this.animated||t.force("center",this.topo.center_force).force("charge",a).force("link",l),t.alpha(1);for(let p=0,b=Math.ceil(Math.log(t.alphaMin())/Math.log(1-t.alphaDecay()));p<b;++p)t.tick();this.animated||t.force("center",null).force("charge",null).force("link",null),this.do_one_tick()}do_animated_layout(){let t=this.topo.simulation,a=this.topo.charge_force,l=this.topo.link_force;this.animated||t.force("center",this.topo.center_force).force("charge",a).force("link",l),t.alpha(1),window.requestAnimationFrame(()=>this.render(t))}do_tick(t,r,a){t.select("path.link_item").attr("d",function(l){return"M"+l.source.x+","+l.source.y+"S"+l.intermediate.x+","+l.intermediate.y+" "+l.target.x+","+l.target.y}),t.select("path.link_selector").attr("d",function(l){return"M"+l.source.x+","+l.source.y+"S"+l.intermediate.x+","+l.intermediate.y+" "+l.target.x+","+l.target.y}),r.attr("transform",function(l){return"translate("+l.x+","+l.y+")"}),a.attr("transform",function(l){return"translate("+l.x+","+l.y+")"})}do_one_tick(){let t=yr.select(this.svgContainerRef.nativeElement),r=t.select("g.links").selectAll("g.link_container"),a=t.select("g.nodes").selectAll("g.node_container"),l=t.select("g.desc").selectAll("g.desc_container");this.do_tick(r,a,l)}render(t){for(let r=0;r<5;r++);this.do_one_tick(),t.alpha()>t.alphaMin()?window.requestAnimationFrame(this.render):this.animated||t.force("center",null).force("charge",null).force("link",null)}nodefileParse(){fetch(this.nodeFileUrl).then(t=>t.text()).then(t=>{for(let r of t.split(/[\r\n]+/)){let a=r.match(/\<(.*?)\>/);null!=a&&(a[1].includes("Host")?this.hostParse(a[1]):a[1].includes("ROADM")?this.roadmParse(a[1]):a[1].includes("OVSBridge")?this.ovsbridgeParse(a[1]):a[1].includes("Terminal")?this.terminalParse(a[1]):this.additionalParse(""))}this.networkData.nodes=this.nodeArray,this.preNodeProcess=!0,this.network=new cm(this.networkData),this.firebaseUploadDataFile(JSON.stringify(this.network)),this.initialize_topo(),this.load()})}hostParse(t){let r=t.split(":");if(r.length>0){let a=r[0].replace("Host","").replace(/\s/g,""),l="",p="";r[2].split(" ").forEach(b=>{this.regexExp.test(b)?l=b:b.includes("pid")&&(p=b.split("=")[1])}),this.addNode(a,l,p)}}roadmParse(t){let r=t.split(",");if(r.length>0){let a="",l="",p="";a=r[0].split(":")[0].replace("ROADM","").replace(/\s/g,""),r.forEach(b=>{this.regexExp.test(b.split("lo:")[1])?l=b.split("lo:")[1]:b.includes("pid")&&(p=b.split("=")[1])}),this.addNode(a,l,p)}}ovsbridgeParse(t){let r=t.split(",");if(r.length>0){let a="",l="",p="";a=r[0].split(":")[0].replace("OVSBridge ","").replace(/\s/g,""),r.forEach(b=>{this.regexExp.test(b.split("lo:")[1])?l=b.split("lo:")[1]:b.includes("pid")&&(p=b.split("=")[1])}),this.addNode(a,l,p)}}terminalParse(t){let r=t.split(",");if(r.length>0){let a="",l="",p="";a=r[0].split(":")[0].replace("Terminal ","").replace(/\s/g,""),r.forEach(b=>{this.regexExp.test(b.split("lo:")[1])?l=b.split("lo:")[1]:b.includes("pid")&&(p=b.split("=")[1])}),this.addNode(a,l,p)}}additionalParse(t){}addNode(t,r,a){this.nodeArray.push({id:t,device_name:t,netmask:"255.255.255.0",ip:r,pid:a})}linkfileParse(){fetch(this.linkFileUrl).then(t=>t.text()).then(t=>{for(let r of t.split(/[\r\n]+/)){let a=r.match(/\((.*?)\)/);null!=a&&a.length>0&&r.split("<->").forEach((l,p)=>{l=l.replace(a[0],""),this.sourceName=l.split("-")[0],this.sourcePort=l.split("-")[1],0==p?(this.target=r.split("<->")[p+1].split("-")[0].replace(a[0],"").replace(/\s/g,""),this.targetPort=r.split("<->")[p+1].split("-")[1].replace(a[0],"").replace(/\s/g,"")):(this.target=r.split("<->")[p-1].split("-")[0].replace(a[0],"").replace(/\s/g,""),this.targetPort=r.split("<->")[p-1].split("-")[1].replace(a[0],"").replace(/\s/g,"")),this.addLink(this.sourceName,this.sourcePort,this.target,this.targetPort)})}this.networkData.links=this.linksArray,this.preLinkProcess=!0,this.nodefileParse()})}addLink(t,r,a,l){this.linksArray.push({source:t,target:a,target_port_disp:l,source_port_disp:r})}firebaseGetNodeFile(){Tv($d(Pp(),this.storageUrl+"/nodes.txt")).then(r=>{console.log(r),this.nodeFileUrl=r,this.linkfileParse()}).catch(r=>{})}firebaseGetLinkFile(){Tv($d(Pp(),this.storageUrl+"/links.txt")).then(r=>{console.log(r),this.linkFileUrl=r,this.firebaseGetNodeFile()}).catch(r=>{})}firebaseUploadDataFile(t){bm($d(Pp(),this.storageUrl+"/data.json"),t).then(l=>{console.log("Parsed data uploaded to Firebase storage")})}}return n.\u0275fac=function(t){return new(t||n)(D.Y36(Em),D.Y36(yw))},n.\u0275cmp=D.Xpm({type:n,selectors:[["app-d3-vis"]],viewQuery:function(t,r){if(1&t&&D.Gf(vw,7,D.SBq),2&t){let a;D.iGM(a=D.CRH())&&(r.svgContainerRef=a.first)}},decls:15,vars:0,consts:[["id","load_btn"],["id","animated_btn"],["autocomplete","off","id","desc_field_selector"],["value","mac","selected",""],["value","ip"],["value","device_name"],[1,"topo_container"],["topo_container",""],["id","view_container","x","0","y","0",1,"topo_container"]],template:function(t,r){1&t&&(D.TgZ(0,"div")(1,"button",0),D._uU(2,"Load"),D.qZA(),D.TgZ(3,"button",1),D._uU(4,"Static"),D.qZA(),D.TgZ(5,"select",2)(6,"option",3),D._uU(7,"MAC"),D.qZA(),D.TgZ(8,"option",4),D._uU(9,"IP"),D.qZA(),D.TgZ(10,"option",5),D._uU(11,"Name"),D.qZA()()(),D.O4$(),D.TgZ(12,"svg",6,7),D._UZ(14,"rect",8),D.qZA())},styles:[".topo_container[_ngcontent-%COMP%]{height:2000px;width:100%;background:white}"]}),n})(),Vm=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=D.Xpm({type:n,selectors:[["app-network-topology"]],decls:2,vars:0,template:function(t,r){1&t&&(D.TgZ(0,"body"),D._UZ(1,"app-d3-vis"),D.qZA())},directives:[qE],styles:[".ftstcall[_ngcontent-%COMP%]{font-family:fontastic-all!important}.links[_ngcontent-%COMP%]   .link_container[_ngcontent-%COMP%]   .link_item[_ngcontent-%COMP%]{stroke:#999;fill:none;stroke-width:3px}.links[_ngcontent-%COMP%]   .link_container[_ngcontent-%COMP%]   .link_selector[_ngcontent-%COMP%]{stroke:#aaa06400;fill:none;stroke-width:9px}.links[_ngcontent-%COMP%]   .link_container.focus[_ngcontent-%COMP%]   .link_item[_ngcontent-%COMP%]{stroke:#000}.nodes[_ngcontent-%COMP%]{cursor:pointer}.nodes[_ngcontent-%COMP%]   .node_container[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{text-anchor:middle;font-size:25px;fill:#444}.nodes[_ngcontent-%COMP%]   .node_container[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke-width:5}.nodes[_ngcontent-%COMP%]   .node_container.stat_normal[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#1ca2db;fill:#35baf6ab}.nodes[_ngcontent-%COMP%]   .node_container.stat_abnormal[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#e5f1b6;fill:#e5f1b6ab}.nodes[_ngcontent-%COMP%]   .node_container.stat_error[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#ff4200;fill:#d6643eab}.nodes[_ngcontent-%COMP%]   .node_container.stat_down[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#adabab;fill:#c1c1c1ab}.nodes[_ngcontent-%COMP%]   .node_container.stat_unknown[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#604c45;fill:#634d45ab}.nodes[_ngcontent-%COMP%]   .node_container.focus[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#000!important}.desc[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{text-anchor:middle}.tooltip[_ngcontent-%COMP%]{line-height:1;font-weight:700;padding:12px;background:rgba(0,0,0,.8);color:#fff;border-radius:10px;z-index:100}.tooltip[_ngcontent-%COMP%]   strong.title[_ngcontent-%COMP%]{display:inline-block;width:75px}.intermediate_nodes[_ngcontent-%COMP%]{stroke:#000;stroke-width:1.5px}#sigmaContainer[_ngcontent-%COMP%]{height:600px;background:white}"]}),n})(),KI=(()=>{class n{constructor(){this.title="Mininet Optical Visualizer"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=D.Xpm({type:n,selectors:[["app-root"]],decls:12,vars:0,consts:[["role","banner",1,"toolbar"],["width","40","alt","Angular Logo","src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABamSURBVHic7Z1ZjCTJWcd/EZFZZ09P91y9M+PZYzzetXcXt816PD4x9trAg8EP4BckjOABcUgW4gUsCyEkCyFejEA88IwRyDJPCHHYgjVohYcxsgYf2DtovN7Za3bOnp7qqjwigofIrMqqriOzurqydrr+UlZERl6R8f3jiyO/+EpYa1ni4EKWnYElysWSAAccSwIccCwJcMCxJMABx5IABxxLAhxwLAlwwLEkwAHHkgAHHEsCHHCUTgAhxO8KIa4IIf5NCPF42fmZB4QQjwoh/lUI8YIQ4nOl5qXMj0FCiE8DX1ZKobUG+A6waa01pWVqnyGEEMB/VSqV94RhmCb/orX2b8rIT9ka4JfPnDnDsWPH0v2ngQ+VmJ954CngPZubm9m0Xy8pL6UTYOXQoUN4npdNO1JWZuaEFYB6vZ5NO1xOVsonAEK4bYlyUDoBlvYo5aJ0AixRLhaCAAdTCyzGS5dOgKVNYrkonQBLlIslAUrCoii+JQEOOBaAAAtSFeaOxXjvBSDAEmWidAIsSlt4UFE6ARZFFc4bi0L8BSDAEmWidAIsSk04qCidAEuUiwUhwEFUA4vxzgtCgCXKwgIQYDFqwkFF6QQ4qJ3ARXnv0gkAi1MYBxELQICl9MvEAhBgiTJROgEOrvpfjBcvnQBLlIuyCXBsSNqJuedivjg9JK20dy6NAEKIDeCpIUahHy8hO/PEs7Cr6TsphHiyjMyUqQGeHZUuhChbM+0nRhH8p+aaiwSlE+Dw4V3L4o4Az8w9N3OAEOIM8DYpJbVabfDwJ0rIUvkE2NgY2vyVUhhzwMcBjh8/hlK7iv4jQojKvDNUCgGEEOeARwA2NjaGnfKgEuBZgJMnTw071gTeP9fcUJ4G+DjA6urq4DLpFB8QQjTnm6W5ICHAyVHH5078sggwqSAqwEfmlps5QAjxFPAQwKlTI9977h3BuRMgcZHyMRhbEKTnPED4GEClUuHo0aOjznlGCLE6vyyVowFWSbyAHDp0aNx5wyaJ3sw4BbCysoIY7RFDMmcPKWUQYMjbL8a8+D5jIf2geJNPeXNg8/wFgdMap3DTradwvndqQHVMWAU6wP2BrTWwvwW8Drx2+dLFrXm9135jIQiQ54vg5vkLqzgPW2/DCTe7nQZOAv6+ZbI/Lx3gNRJCDAmvAFcvX7oYzyM/e8FCECALIQTVep3V1cNnN89f+GOc67inSeYNZvIM96AkBKxzVFGgIaoBjyXbKMSb5y9cBV4AfnDqzMNP37t7F6UWq8jn7ihSCLEG3AH45M9+kpVDq1z65n8Ta02tXqdSrY3rJPVBCoFSEt/3qPg+lYrfjfueh5QCgQRpkUIiEM4jmQCBcIIXgLVobTBWo2ODsQajDdq4LY3HcUwUa7TWSWiKEgcATykEcOPGG7R3dthp3afdamGMAXjMWvtiwVtOjbkSYPP8hZUwCH56687trzQPrdJoTp7rkVJSr1VpNGo063Ua9Tq+r/A9H89TSKWcmxkL1lXlbtztZ2q3TV3SDJ5j3WVJUdjujrtuVBkZYzHGEOuYONZdgsRxTCeICKOIWOtcTZy1lk67jV+pfMnzvK8C3wCuXL50cV8FtK8E2Dx/oQF8EPgo8JPAeUY0O1IKatUqK80GzWadZqNOvVajWq0gpUzkkQiLnrDTZLpC7qUba7DGYq3FWAvWYAxYa7BJ3BiDlE7jCCGwOM0iEKR1ey9lpLUmCmOCKCSMYoJOQBBFBFGMMRPvexu4iCPDN4CvX750MZg6M0OwLwTYPH/hJPBl4AIjOmaeUqytrXJkbZXDq6s0m3Wn+jO1dJRwtTXEscbEMbFxNU4nqlkbjY5djTTWZGr3oEYYEbf9QhdCdDelVGbzUEohpeiL54W1liiK2Gl3aHcCdtodgjB2RB2NL16+dPF3cj8kB/aLAF8Bfj6b5inF+vphjhxeZW1tlWaz0W3rUwHRV/iWONZEcUQURi6MIqIwxJgB1Y3tawa68SmEPiqeB1JKpJT4vu+aKN/D81y/RCk18XqtNUEQ0m4H7HQcMaJYZ/sYMfCuy5cufjdXhnJg5l3SzfMXPkUi/EPNBqdPbbC2dphDicBt0hh321YLWEMYhl1Bh2FIHEVOhacawGauSVVz5pc0bjNxxsRtf7odFS9QQYwxrk8Qx7Rp9x2TUuJ5PUJ4nk+1Wunzk6yUotGo02jUOUpPS7TaAa9ev4m11gP+jNHGNIUxUw2QjNW/B5z2PI8Pve8ZqtVKV+hZdRxGAUEQEgYBQRi4Wp2q/oxG6BFld1xbgbESbRXaSixJHImxEmMVBoVButBKtFDYNF0oLAqsQRIjbIy0LhTJvjBR5pjupmfP38tMplKKarVKtVKlUq1QqVSGjoJefeMWt+90558+ffnSxa9M/dAMZk2AvwB+E+DJt7+Nh99ysqtKgyAgDBOhh2HSEaNP6DfCI7R1HZ0I0liJQaK7wpRo0vTJKnVeEJgeeegnURrPEkbakHr82vB7CYHv+wkhqtTrdaQUaG144YfX0v9VeAl4x+VLF3f2mveZNQGb5y+8n8Tv/draYd5y+iTWQhSG3Lx1a3ftBrLquG1qvNh5FLvPU+ZCCISUrqcvZdIsueGcNaav7c8Li8SKCqaAQc/R9jeHksBaSxi6SsL9bVZWVjhy5AhKSU6eOMbLr10HeBj4HPD7hTI6BDPRAJvnL/jAt4CnpJR88MKP02w2sMZy89YNoijqtf1JM0DSEUsJ8cLOOe7GPftAKSVSKZSSSNkL046WSMJuPBEoaZxkP/FHn/bkjbXJ0LAnbJP2MZJjuksE0zt3MLQ2Icy4Y6PJ5JkWG63nEEz+c5SNjQ2q1SoWePHaq7R2OuC+Xzx1+dLFq3uR3aw0wO/h5uk5+8gZVlYaWAutVoso7k2HZ8siWyz34kNd4a+tr/H0O9+JxWaENURQybHBNJM5NuwaweQWOyULSPbc0nTz5QjSaW3TabWIZZP7lUc5FE6W3+3bt3nooYcQQvDQieNc/dHLWGtrwBeBT+0le3v+HLx5/sITwOcBmo0GZx972HXQtGb7/nau/tFLwRkXEYKz5966oB9Op0SimZTy8Hyf5uqa00zAduVxYtlg0gtHUcT29n0A6lWfo+tdTflzm+cv/MyesreXJiD5BPsc8BNCCN77zCZH1lexFu7cvk0n6KCNJDAegfbo6Aqh8QiMT2AqhMYnNBVi66rZxsmHePztT/TXZjOihk+pAVx7n8bNyHvuJ9r3t2lt3c2kWJQNUKaDsh1kJq5sB2U6+CLk9ENHcX+wZbny4jVip11fAH7s8qWL4fCnjceemgArq79hhf8TRtVZP3aS6+FDXH1ZcL8D94Mmgfa7wp0EpRSPnh33ca0gxun6aY/NCPXmCp3WfXS3eRRoUUOrXWsF+vDKPUNTdWh6bWrHVtm6+SOUvvc41vw28CfT5GVqDfDkh3/hXLDy1A+MrE/VjPi+T7VWdWPgapX1I+scPX58bG0eVqNNQQ3Rr1mGaIDknvuNOIqIggBjNEZnNqOxpsi/5hlUvKW9zqvv/v7X/+rbRfMxtQaIqqf/eZTwfd+nVq9Rq9Wo1WvUa3VqtZoTeCJ0KeVE1TuHyji3pwzC8308f7j9irW2jxBpXOsYHUZonbUzkWhvXVE1/4AbHhbCVBrgiY/+6ufDxuNfAGiuNHnrubd2hV2r1UbOew+tiblr63QaYOg1u+5p5q4B9gJrDHEUEochnZ0ddBwB4AWvf+HK1/600NxAYQK8/SO/tBHVz75sVN0TQvC+D7yPtfW1fBnfJwKYjDrXZISf3jPzgai3D1iTfDZOvi8Yus8jMRTp/2Tg9oXtvU/Z0HHE3TeuuyGujTVWn736j3/wUt7rCzcBxjv8JaPqHsCjjz2aW/jDYK0l1sapNmNc3GiMNhhjiY2z0jGZyRnTFarp//aTB4k1UA8y88uueMG3SUiVfKIytjfvkZAVLO5PcbNfIkGkRJsCyvNprB6mtXUXKzwldfuvgQ/nvb4wAaxQXXv9s+fO7j6OM69yVjIujGJNrDVRHBNpF9c6JtYP0l8Ep+ZmiXFJYSY5cnRnD01Pa7lOocUFu6lSXznEzvY9d54QhdZT7GkYeG+nTefO3USoPeHOuk/ltHFas5I5ewQkU7Gp5Yiz+umFbjo2Odadrk2nb0Fbk9Q+gRDW2QmmlqLCCdQKSWrnIaRIzpFOzlIgk3MRwk1Lp1PWyk1l57VvBIGQia3iBNju++HeRdvEgqk4piZAtdHg1Zs3i10kQAlXaK6yiC6jhbFYYbHa4ky3nGC7H2mMBQza4I5bC8YkgnUF0SUAdOfie4ToFZxJ2nubGJcZa3tq2KaqOz1K37HCECJDCEcK9w1DITzZjUtPIZWH8hTS88YSR6TfNySABN/Jo31/u3D2piaAzPT0lZJ4yUt6QqKSWqOkRJB82EnayNRowrXlJhGwxYi0E+fK+YGZDbYWo2OMLnaZkNKRQXlI38NTjhhKSaTnd4miEoMSNWJIOQkz+Ri0sbZOo1JJeuiGwenb3vYgtfn7C2sMcWiAiAHjoi4q9RrHHyk89O9Dqb549r2Wj1uFOPLhD4zuyYWSCDDDQk5utd+GJA8qZtIEXPuPvyS89/qIXqjtC/qjuwfydjA28vjw66FHr2NrTTw1G2JcC07RMuvDsjSQwWn64iOuGf8gJKtMMfvbh5kQIA5bxGFrFreaGQSgRA0lZmM7KK3GFu3J7TdmMBO5WCsVFxhCKIT0J7Ree9A2uecLMpeovTsVmwkBpNc/BBFCcPzYMSqV0Rk0xnDr1i2CcCo7hlyY5VS9rKzgyfXZ3XAGUNXx9gN5sC8awDlCrE44R1Gv1/eVAGV85n2zYV9GAfmnP/NB1Q1+oydMIcBvGlStN68gPZcmvcx5S/lPxML3Afym4ZFPbAOCV59vsHPDY/VswIl3Rhijufr3h7EGTn+wRX1dELQMP/rqCgB2xkR8ELEvGsDkNGnK8z1dKBB4+L4Pyp0vPajVfef8If1Q41sah6pIlb3nUgVMwr5oAGMMt+/cdUIbAWsM2/fvT7yX3hF07lqQhmjbDek6NxVbb3TQHUW6ruL+yz7QpnU988yl/CeiEAGEEOLcs5/Nde79HMLNAx0Lrj230pfWvuXx0tf6025/v8rt7/d3PA+q/IUQwuY0V3qQ/fIftGn9qZBbAyQuXocWaePEE3iqSrBzi2jn7mwH4HvAgz4KkHJo/U1MLQR5tMBM+gDRiWeQJ55hRUqkBBnsoMMtbPsuprOFCbbR4Q4mamHCHXTQQkdt9ltJvxnl7+wAPLcw1vOQnguVckYjSvXSppk9HERRAghhgv8B3hUFnT6LegvExrhOmapBvQb13n8BKDLrLEXS9oRtbNzCRDuIsIMJW5h4BxO6zUZuM3EbG3XAFp2LL4cCUqo+0zAhZRImlkGDpmNpOMESaBzisOMiVr9BgcUORQggABHee+0PRe3MZ+IQbrx0jebqKpVqFa/iIxIbOGe8NcZk1yadd78Ofh2R/GWAZHynxOrQkcAa0AaMcwolrMFa7SxubYw1GmsNodkm0iEWi7DGmYEnlkhoAzKxqbMCISRWyF4ulHLr/hOTrWrtJFWvnrELFD3TLCHckvRE2PsHi9GpXaRzimXimNbWPYKW8xVhtPlzevbPE0mQa11Apv2XgH/uY7/1XFw7/d6xvazEq1a1VqPWqFOt1fAqPp7nI5QE6fwFGQsmEd70xtFvTnSXq3fXRYDVsVsFlHpBiyLiMCIOA4zWY+dOhIk617/1tyd2rn+vA4l13QQBFyWAwrl9qz787k9+1F9/9I+st3LGylrDyvFz/xPu7zxrVSr4FZ9KtYJMHEEqz3NOH6Tq1jhEokEsfYs+ErvhXrNkyXj72wMsIOg+p/8A3We7xRnp4hIDxjhvosZ0l3jpWDsbwVgn9pC6zzvJNBA2MqLzxle3X3/hszf+919eAUL2gQASR4AKzsN2PQmrJ97zK1+TUp5cObpBY+UwJmqj49At8LAicchUwYrZ+XJO/fYNuntJ97NeQRxxpHMdm/Ea0vUXbDMLT3S6ACURSFcwvYUfNuPwKru/V0EOh0Ga0PkYEgYlBHHUIWpvo42+Gd74wa/dvvad78WdrRbOa0iHHgHMJAIU7gTSawpSQqhurVM1KmvD/hjTwcYBOriHDtqYqIMxcVJoYBDYxJuXFRU3BzwG1tp0ffybEqLrSEoj0EjhvKU6K+Aqyq+jaitIv7Hr2ruvXKGztYU1pvXGlef/L0lWOJmMHK4PwzTDwEES5O71CK+K5x3HG+Mi+NXvPo+OQ3T7xj+ZrR8+X2msbXjVlePSbxyRfnVNqNqqUJUmqtJAKM9tSbcaKa3riQmEEr1O3QxhDQKTrPFyCxCFNckihSjCRB102LEmalkdbNs4uKfjzh3UyuPWqz+NrHLyHe+bZunQKGSFXkj4MP08wNCHRO17bN+8NuUtHVKzK61tcOelb1/B+d5Pn5d97qgX7V/95/mqWj+84tWadVVpND2/2pB+rS5VpS69Sk1Ir2qtia2JQ6ujwMRRYHTUNjqMdBS2ddTuxGG7HQc7QRy0Uj+949SqHRYeefJTn/FX6k9LYWnfu52vMEYgCvvsxAsLPYtpCGB3bYmrq872HTrbd6bNSx+EW0Sw58bUxFHc3r55l+2bqU+WPIU16bljBri74n2hiUNuvljYj8NwCOtG3P3yKISieih9gMlsWre3/g7nx3YmsCa+Gdx58T9JOjJDwjSe3R9MH3Zs3HV5j417Zna/LwzvvXJpipms8eUU7Pz7wLMLk6DoMNAjGQbS+8+dSpLm4ToiHv2dxGx/QbC7ozLYfg1LZ0g4GGdC+jRqcljhTFv7raqvN/z6arOXLmxmTadNvl4kGlUko12R7huEMMKF2sTRTufW1etAhOv1B8nWSdJi9nEeIB0KZoWfbqng5ZAt24EcR4A8RBiMF00bTM8j2LxpfYIfsT8q3QzEh2kbgxOwxgk7S4Iw2c81D1C0D5BmSicZEEPSxwl/WI81z8aQOEPio9LykiKPsIsKPxsftUHXtKVLgGw4rjmK6dX4bFOQC7kIYK21yUeKbIZSAqRpqeAHCTCuCRhX2/MQgUzaXvb7XncG+0UEPyx9UPiDRMj2MVISxAPnT6z9MP0oQNMrxPShw2q+GBMWFf4oAsxS+Nl3nHZ/lgQYR4JBTZBuhTqB0zQBWXXPwH5Rwe+l9k9LgqIEKCr8NNwrCQY1QZ5mofBIYC8ESPfHCX2w05dH8MPSJhGg6H7eJmBaTVC045dXG+QhQyECFHITlxkNDBNskQ4eI+JF9vuytsf9LGbRB0jDUcIl57FJ22BT0T2W1yh02j5ACkNPMNl4XoFSMC0vAfKek6aPKqxJwh53zjhh502bRpMU6gMUdhQpejZLexXmLMK+rOVMG5cO+ckwKW0W4VRpeWs/TEEA6CMBDG9bxwlsUieuyD12ZW1E+qRjozCucPIQZZKQJ51f+B5FhA9TEqB78W4Lxrwdr2nOy9uJ2+vxSQVS5HjR+LTnFRZ8ipn9a9gQMnQPTdjPk1ZEvefJQxEUKaBJzUTRZmRs2rRCz2Lf/jt4DCFgOlWdR4h7EXRR5Cm4Iv2JicdmIfBBzPXfwyeQYtfpMzpnXtgLIXafOCfBzJUAk1CQIENvMZOM5MOeCm5eAp6EhSLAJMyAIHPDogh4Et5UBFhi9niwl4cvMRFLAhxwLAlwwLEkwAHHkgAHHEsCHHAsCXDA8f/K5sk+ywgQrQAAAABJRU5ErkJggg=="],[1,"spacer"],["aria-label","YouTube","target","_blank","rel","noopener","href","https://youtube.com","title","YouTube"],["id","youtube-logo","height","24","width","24","data-name","Logo","viewBox","0 0 24 24","fill","#fff"],["d","M0 0h24v24H0V0z","fill","none"],["d","M21.58 7.19c-.23-.86-.91-1.54-1.77-1.77C18.25 5 12 5 12 5s-6.25 0-7.81.42c-.86.23-1.54.91-1.77 1.77C2 8.75 2 12 2 12s0 3.25.42 4.81c.23.86.91 1.54 1.77 1.77C5.75 19 12 19 12 19s6.25 0 7.81-.42c.86-.23 1.54-.91 1.77-1.77C22 15.25 22 12 22 12s0-3.25-.42-4.81zM10 15V9l5.2 3-5.2 3z"],["role","main",1,"content"]],template:function(t,r){1&t&&(D.TgZ(0,"div",0),D._UZ(1,"img",1),D.TgZ(2,"span"),D._uU(3,"Mininet Optical Visualizer"),D.qZA(),D._UZ(4,"div",2),D.TgZ(5,"a",3),D.O4$(),D.TgZ(6,"svg",4),D._UZ(7,"path",5)(8,"path",6),D.qZA()()(),D.kcU(),D.TgZ(9,"div",7),D._UZ(10,"app-network-topology")(11,"router-outlet"),D.qZA())},directives:[Vm,Sd],styles:['[_nghost-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;font-size:14px;color:#333;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:8px 0}p[_ngcontent-%COMP%]{margin:0}.spacer[_ngcontent-%COMP%]{flex:1}.toolbar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:60px;display:flex;align-items:center;background-color:#1976d2;color:#fff;font-weight:600}.toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]{height:40px;margin:0 8px}.toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]{height:40px;margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]:hover, .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]:hover{opacity:.8}.content[_ngcontent-%COMP%]{display:flex;margin:82px auto 32px;padding:0 16px;flex-direction:column}svg.material-icons[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}.card[_ngcontent-%COMP%]   svg.material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#888}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:16px}.card[_ngcontent-%COMP%]{all:unset;border-radius:4px;border:1px solid #eee;background-color:#fafafa;height:40px;width:200px;margin:0 8px 16px;padding:16px;display:flex;flex-direction:row;justify-content:center;align-items:center;transition:all .2s ease-in-out;line-height:24px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(:last-child){margin-right:0}.card.card-small[_ngcontent-%COMP%]{height:16px;width:168px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card){cursor:pointer}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover{transform:translateY(-3px);box-shadow:0 4px 17px #00000059}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover   .material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#696767}.card.highlight-card[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff;font-weight:600;border:none;width:auto;min-width:30%;position:relative}.card.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:60px}svg#rocket[_ngcontent-%COMP%]{width:80px;position:absolute;left:-10px;top:-24px}svg#rocket-smoke[_ngcontent-%COMP%]{height:calc(100vh - 95px);position:absolute;top:10px;right:180px;z-index:-10}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:hover{color:#1976d2;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#125699}.terminal[_ngcontent-%COMP%]{position:relative;width:80%;max-width:600px;border-radius:6px;padding-top:45px;margin-top:8px;overflow:hidden;background-color:#0f0f10}.terminal[_ngcontent-%COMP%]:before{content:"\\2022\\2022\\2022";position:absolute;top:0;left:0;height:4px;background:rgb(58,58,58);color:#c2c3c4;width:100%;font-size:2rem;line-height:0;padding:14px 0;text-indent:4px}.terminal[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;color:#fff;padding:0 1rem 1rem;margin:0}.circle-link[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:40px;margin:8px;background-color:#fff;border:1px solid #eeeeee;display:flex;justify-content:center;align-items:center;cursor:pointer;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;transition:1s ease-out}.circle-link[_ngcontent-%COMP%]:hover{transform:translateY(-.25rem);box-shadow:0 3px 15px #0003}footer[_ngcontent-%COMP%]{margin-top:8px;display:flex;align-items:center;line-height:20px}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center}.github-star-badge[_ngcontent-%COMP%]{color:#24292e;display:flex;align-items:center;font-size:12px;padding:3px 10px;border:1px solid rgba(27,31,35,.2);border-radius:3px;background-image:linear-gradient(-180deg,#fafbfc,#eff3f6 90%);margin-left:4px;font-weight:600}.github-star-badge[_ngcontent-%COMP%]:hover{background-image:linear-gradient(-180deg,#f0f3f6,#e6ebf1 90%);border-color:#1b1f2359;background-position:-.5em}.github-star-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{height:16px;width:16px;margin-right:4px}svg#clouds[_ngcontent-%COMP%]{position:fixed;bottom:-160px;left:-230px;z-index:-10;width:1920px}@media screen and (max-width: 767px){.card-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.circle-link), .terminal[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%]:not(.highlight-card){height:16px;margin:8px 0}.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:72px}svg#rocket-smoke[_ngcontent-%COMP%]{right:120px;transform:rotate(-5deg)}}@media screen and (max-width: 575px){svg#rocket-smoke[_ngcontent-%COMP%]{display:none;visibility:hidden}}']}),n})();const t__firebase={apiKey:"AIzaSyCeRkrVepStRHHP-5WuMgJ80f3hIfTLn_0",authDomain:"mininet-optical-file-system.firebaseapp.com",projectId:"mininet-optical-file-system",storageBucket:"mininet-optical-file-system.appspot.com",messagingSenderId:"752741188254",appId:"1:752741188254:web:b113a9ec279d157325b18f"};function n_(){return(0,Ii.e)((n,e)=>{let t,r=!1;n.subscribe((0,ki.x)(e,a=>{const l=t;t=a,r&&e.next([l,a]),r=!0}))})}function jm(n,e){return n===e}M(3677);var en,KE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},eu={},r_=r_||{},Rn=KE||self;function $m(){}function Hm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function zm(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var _w="closure_uid_"+(1e9*Math.random()>>>0),ZE=0;function ww(n,e,t){return n.call.apply(n.bind,arguments)}function kh(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,r),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function Cs(n,e,t){return(Cs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ww:kh).apply(null,arguments)}function Xp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ts(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,a,l){for(var p=Array(arguments.length-2),b=2;b<arguments.length;b++)p[b-2]=arguments[b];return e.prototype[a].apply(r,p)}}function kl(){this.s=this.s,this.o=this.o}var bw={};kl.prototype.s=!1,kl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function YI(n){return Object.prototype.hasOwnProperty.call(n,_w)&&n[_w]||(n[_w]=++ZE)}(this);delete bw[n]}},kl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ew=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Iw=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,a="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in a&&e.call(t,a[l],l,n)};function YE(n){return Array.prototype.concat.apply([],arguments)}function Tw(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function i_(n){return/^[\s\xa0]*$/.test(n)}var ko,Dw=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ds(n,e){return-1!=n.indexOf(e)}function ef(n,e){return n<e?-1:n>e?1:0}e:{var tf=Rn.navigator;if(tf){var s_=tf.userAgent;if(s_){ko=s_;break e}}ko=""}function Gm(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function o_(n){const e={};for(const t in n)e[t]=n[t];return e}var Sw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Aw(n,e){let t,r;for(let a=1;a<arguments.length;a++){for(t in r=arguments[a],r)n[t]=r[t];for(let l=0;l<Sw.length;l++)t=Sw[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function a_(n){return a_[" "](n),n}a_[" "]=$m;var eg,n,QE=Ds(ko,"Opera"),nf=Ds(ko,"Trident")||Ds(ko,"MSIE"),Ph=Ds(ko,"Edge"),rf=Ph||nf,Jp=Ds(ko,"Gecko")&&!(Ds(ko.toLowerCase(),"webkit")&&!Ds(ko,"Edge"))&&!(Ds(ko,"Trident")||Ds(ko,"MSIE"))&&!Ds(ko,"Edge"),WC=Ds(ko.toLowerCase(),"webkit")&&!Ds(ko,"Edge");function u_(){var n=Rn.document;return n?n.documentMode:void 0}e:{var xw="",gn=(n=ko,Jp?/rv:([^\);]+)(\)|;)/.exec(n):Ph?/Edge\/([\d\.]+)/.exec(n):nf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):WC?/WebKit\/(\S+)/.exec(n):QE?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(gn&&(xw=gn?gn[1]:""),nf){var qm=u_();if(null!=qm&&qm>parseFloat(xw)){eg=String(qm);break e}}eg=xw}var Ss={};var Mu=Rn.document&&nf&&(u_()||parseInt(eg,10))||void 0,cc=function(){if(!Rn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rn.addEventListener("test",$m,e),Rn.removeEventListener("test",$m,e)}catch(t){}return n}();function Xn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Km(n,e){if(Xn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Jp){e:{try{a_(e.nodeName);var a=!0;break e}catch(l){}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:tg[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Km.Z.h.call(this)}}Xn.prototype.h=function(){this.defaultPrevented=!0},Ts(Km,Xn);var tg={2:"touch",3:"pen",4:"mouse"};Km.prototype.h=function(){Km.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ng="closure_listenable_"+(1e6*Math.random()|0),Mw=0;function XE(n,e,t,r,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=a,this.key=++Mw,this.ca=this.fa=!1}function uf(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Zm(n){this.src=n,this.g={},this.h=0}function cf(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],a=Ew(r,e);(l=0<=a)&&Array.prototype.splice.call(r,a,1),l&&(uf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Rw(n,e,t,r){for(var a=0;a<n.length;++a){var l=n[a];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return a}return-1}Zm.prototype.add=function(n,e,t,r,a){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var p=Rw(n,e,r,a);return-1<p?(e=n[p],t||(e.fa=!1)):((e=new XE(e,this.src,l,!!r,a)).fa=t,n.push(e)),e};var Nl="closure_lm_"+(1e6*Math.random()|0),lf={};function Oh(n,e,t,r,a){if(r&&r.once)return Nw(n,e,t,r,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)Oh(n,e[l],t,r,a);return null}return t=df(t),n&&n[ng]?n.N(e,t,zm(r)?!!r.capture:!!r,a):kw(n,e,t,!1,r,a)}function kw(n,e,t,r,a,l){if(!e)throw Error("Invalid event type");var p=zm(a)?!!a.capture:!!a,b=Pw(n);if(b||(n[Nl]=b=new Zm(n)),(t=b.add(e,t,r,p,l)).proxy)return t;if(r=function JE(){var e=e1;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)cc||(a=p),void 0===a&&(a=!1),n.addEventListener(e.toString(),r,a);else if(n.attachEvent)n.attachEvent(c_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Nw(n,e,t,r,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Nw(n,e[l],t,r,a);return null}return t=df(t),n&&n[ng]?n.O(e,t,zm(r)?!!r.capture:!!r,a):kw(n,e,t,!0,r,a)}function rg(n,e,t,r,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)rg(n,e[l],t,r,a);else r=zm(r)?!!r.capture:!!r,t=df(t),n&&n[ng]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Rw(l=n.g[e],t,r,a))&&(uf(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=Pw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Rw(e,t,r,a)),(t=-1<n?e[n]:null)&&Ym(t))}function Ym(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[ng])cf(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(c_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Pw(e))?(cf(t,n),0==t.h&&(t.src=null,e[Nl]=null)):uf(n)}}}function c_(n){return n in lf?lf[n]:lf[n]="on"+n}function e1(n,e){if(n.ca)n=!0;else{e=new Km(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Ym(n),n=t.call(r,e)}return n}function Pw(n){return(n=n[Nl])instanceof Zm?n:null}var hf="__closure_events_fn_"+(1e9*Math.random()>>>0);function df(n){return"function"==typeof n?n:(n[hf]||(n[hf]=function(e){return n.handleEvent(e)}),n[hf])}function zs(){kl.call(this),this.i=new Zm(this),this.P=this,this.I=null}function oo(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Xn(e,n);else if(e instanceof Xn)e.target=e.target||n;else{var a=e;Aw(e=new Xn(r,n),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var p=e.g=t[l];a=ig(p,r,!0,e)&&a}if(a=ig(p=e.g=n,r,!0,e)&&a,a=ig(p,r,!1,e)&&a,t)for(l=0;l<t.length;l++)a=ig(p=e.g=t[l],r,!1,e)&&a}function ig(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var p=e[l];if(p&&!p.ca&&p.capture==t){var b=p.listener,A=p.ia||p.src;p.fa&&cf(n.i,p),a=!1!==b.call(A,r)&&a}}return a&&!r.defaultPrevented}Ts(zs,kl),zs.prototype[ng]=!0,zs.prototype.removeEventListener=function(n,e,t,r){rg(this,n,e,t,r)},zs.prototype.M=function(){if(zs.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)uf(t[r]);delete n.g[e],n.h--}}this.I=null},zs.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},zs.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var l_=Rn.JSON.stringify;function Lh(){var n=Xm;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Qm,h_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new n1,n=>n.reset());class n1{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ow(n){Rn.setTimeout(()=>{throw n},0)}function Lw(n,e){Qm||function KC(){var n=Rn.Promise.resolve(void 0);Qm=function(){n.then(d_)}}(),Fh||(Qm(),Fh=!0),Xm.add(n,e)}var Fh=!1,Xm=new class t1{constructor(){this.h=this.g=null}add(e,t){const r=h_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function d_(){for(var n;n=Lh();){try{n.h.call(n.g)}catch(t){Ow(t)}var e=h_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Fh=!1}function Uh(n,e){zs.call(this),this.h=n||1,this.g=e||Rn,this.j=Cs(this.kb,this),this.l=Date.now()}function f_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function p_(n,e,t){if("function"==typeof n)t&&(n=Cs(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Cs(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rn.setTimeout(n,e||0)}function g_(n){n.g=p_(()=>{n.g=null,n.i&&(n.i=!1,g_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ts(Uh,zs),(en=Uh.prototype).da=!1,en.S=null,en.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),oo(this,"tick"),this.da&&(f_(this),this.start()))}},en.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},en.M=function(){Uh.Z.M.call(this),f_(this),delete this.g};class sg extends kl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:g_(this)}M(){super.M(),this.g&&(Rn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function og(n){kl.call(this),this.h=n,this.g={}}Ts(og,kl);var r1=[];function i1(n,e,t,r){Array.isArray(t)||(t&&(r1[0]=t.toString()),t=r1);for(var a=0;a<t.length;a++){var l=Oh(e,t[a],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function s1(n){Gm(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ym(e)},n),n.g={}}function m_(){this.g=!0}function Bh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ff(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var p=1;p<a.length;p++)a[p]=""}}}return l_(t)}catch(b){return e}}(n,t)+(r?" "+r:"")})}og.prototype.M=function(){og.Z.M.call(this),s1(this)},og.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},m_.prototype.Aa=function(){this.g=!1},m_.prototype.info=function(){};var Vh={},a1=null;function pf(){return a1=a1||new zs}function y_(n){Xn.call(this,Vh.Ma,n)}function gf(n){const e=pf();oo(e,new y_(e,n))}function Fw(n,e){Xn.call(this,Vh.STAT_EVENT,n),this.stat=e}function Sr(n){const e=pf();oo(e,new Fw(e,n))}function u1(n,e){Xn.call(this,Vh.Na,n),this.size=e}function ug(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rn.setTimeout(function(){n()},e)}Vh.Ma="serverreachability",Ts(y_,Xn),Vh.STAT_EVENT="statevent",Ts(Fw,Xn),Vh.Na="timingevent",Ts(u1,Xn);var Er={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},c1={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function mf(){}function v_(){}mf.prototype.h=null;var Bw,Jm={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function __(){Xn.call(this,"d")}function Uw(){Xn.call(this,"c")}function w_(){}function ey(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new og(this),this.P=JI,this.W=new Uh(n=rf?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Vw}function Vw(){this.i=null,this.g="",this.h=!1}Ts(__,Xn),Ts(Uw,Xn),Ts(w_,mf),w_.prototype.g=function(){return new XMLHttpRequest},w_.prototype.i=function(){return{}},Bw=new w_;var JI=45e3,b_={},E_={};function I_(n,e,t){n.K=1,n.v=Ll(Ol(e)),n.s=t,n.U=!0,jw(n,null)}function jw(n,e){n.F=Date.now(),ty(n),n.A=Ol(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),wf(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Vw,n.g=_y(n.l,t?e:null,!n.s),0<n.O&&(n.L=new sg(Cs(n.Ia,n,n.g),n.O)),i1(n.V,n.g,"readystatechange",n.gb),e=n.H?o_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),gf(1),function o1(n,e,t,r,a,l){n.info(function(){if(n.g)if(l)for(var p="",b=l.split("&"),A=0;A<b.length;A++){var L=b[A].split("=");if(1<L.length){var G=L[0];L=L[1];var K=G.split("_");p=2<=K.length&&"type"==K[1]?p+(G+"=")+L+"&":p+(G+"=redacted&")}}else p=null;else p=l;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(n.j,n.u,n.A,n.m,n.X,n.s)}function l1(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function $w(n,e,t){let a,r=!0;for(;!n.I&&n.C<t.length;){if(a=h1(n,t),a==E_){4==e&&(n.o=4,Sr(14),r=!1),Bh(n.j,n.m,null,"[Incomplete Response]");break}if(a==b_){n.o=4,Sr(15),Bh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Bh(n.j,n.m,a,null),T_(n,a)}l1(n)&&a!=E_&&a!=b_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Sr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),yy(e),e.L=!0,Sr(11))):(Bh(n.j,n.m,t,"[Invalid Chunked Response]"),Pl(n),yf(n))}function h1(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?E_:(t=Number(e.substring(t,r)),isNaN(t)?b_:(r+=1)+t>e.length?E_:(e=e.substr(r,t),n.C=r+t,e))}function ty(n){n.Y=Date.now()+n.P,d1(n,n.P)}function d1(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ug(Cs(n.eb,n),e)}function C_(n){n.B&&(Rn.clearTimeout(n.B),n.B=null)}function yf(n){0==n.l.G||n.I||C1(n.l,n)}function Pl(n){C_(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,f_(n.W),s1(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function T_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||uy(t.i,n)))if(t.I=n.N,!n.J&&uy(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(L){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0])e:if(t.u)t.ta=a[1],0<t.ta-t.U&&37500>a[2]&&t.N&&0==t.A&&!t.v&&(t.v=ug(Cs(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;qh(t),M_(t)}my(t),Sr(18)}if(1>=y1(t.i)&&t.ka){try{t.ka()}catch(L){}t.ka=void 0}}else Wh(t,11)}else if((n.J||t.g==n)&&qh(t),!i_(e))for(a=t.Ca.g.parse(e),e=0;e<a.length;e++){let L=a[e];if(t.U=L[0],L=L[1],2==t.G)if("c"==L[0]){t.J=L[1],t.la=L[2];const G=L[3];null!=G&&(t.ma=G,t.h.info("VER="+t.ma));const K=L[4];null!=K&&(t.za=K,t.h.info("SVER="+t.za));const oe=L[5];null!=oe&&"number"==typeof oe&&0<oe&&(t.K=r=1.5*oe,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const ie=n.g;if(ie){const Ce=ie.g?ie.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ce){var l=r.i;!l.g&&(Ds(Ce,"spdy")||Ds(Ce,"quic")||Ds(Ce,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&($h(l,l.h),l.h=null))}if(r.D){const ft=ie.g?ie.g.getResponseHeader("X-HTTP-Session-Id"):null;ft&&(r.sa=ft,si(r.F,r.D,ft))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var p=n;if((r=t).oa=vy(r,r.H?r.la:null,r.W),p.J){Zw(r.i,p);var b=p,A=r.K;A&&b.setTimeout(A),b.B&&(C_(b),ty(b)),r.g=p}else gy(r);0<t.l.length&&mg(t)}else"stop"!=L[0]&&"close"!=L[0]||Wh(t,7);else 3==t.G&&("stop"==L[0]||"close"==L[0]?"stop"==L[0]?Wh(t,7):Xw(t):"noop"!=L[0]&&t.j&&t.j.wa(L),t.A=0)}gf(4)}catch(L){}}function zw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Hm(n)||"string"==typeof n)Iw(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Hm(n)||"string"==typeof n){t=[];for(var r=n.length,a=0;a<r;a++)t.push(a)}else for(a in t=[],r=0,n)t[r++]=a;r=function Hw(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Hm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),a=r.length;for(var l=0;l<a;l++)e.call(void 0,r[l],t&&t[l],n)}}function lg(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof lg)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function ny(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];vf(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var a={};for(t=e=0;e<n.g.length;)vf(a,r=n.g[e])||(n.g[t++]=r,a[r]=1),e++;n.g.length=t}}function vf(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(en=ey.prototype).setTimeout=function(n){this.P=n},en.gb=function(n){n=n.target;const e=this.L;e&&3==Xr(n)?e.l():this.Ia(n)},en.Ia=function(n){try{if(n==this.g)e:{const G=Xr(this.g);var e=this.g.Da();const K=this.g.ba();if(!(3>G)&&(3!=G||rf||this.g&&(this.h.h||this.g.ga()||Fl(this.g)))){this.I||4!=G||7==e||gf(8==e||0>=K?3:2),C_(this);var t=this.g.ba();this.N=t;t:if(l1(this)){var r=Fl(this.g);n="";var a=r.length,l=4==Xr(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Pl(this),yf(this);var p="";break t}this.h.i=new Rn.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==a-1});r.splice(0,a),this.h.g+=n,this.C=0,p=this.h.g}else p=this.g.ga();if(this.i=200==t,function XI(n,e,t,r,a,l,p){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+p})}(this.j,this.u,this.A,this.m,this.X,G,t),this.i){if(this.$&&!this.J){t:{if(this.g){var b,A=this.g;if((b=A.g?A.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!i_(b)){var L=b;break t}}L=null}if(!(t=L)){this.i=!1,this.o=3,Sr(12),Pl(this),yf(this);break e}Bh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,T_(this,t)}this.U?($w(this,G,p),rf&&this.i&&3==G&&(i1(this.V,this.W,"tick",this.fb),this.W.start())):(Bh(this.j,this.m,p,null),T_(this,p)),4==G&&Pl(this),this.i&&!this.I&&(4==G?C1(this.l,this):(this.i=!1,ty(this)))}else 400==t&&0<p.indexOf("Unknown SID")?(this.o=3,Sr(12)):(this.o=0,Sr(13)),Pl(this),yf(this)}}}catch(G){}},en.fb=function(){if(this.g){var n=Xr(this.g),e=this.g.ga();this.C<e.length&&(C_(this),$w(this,n,e),this.i&&4!=n&&ty(this))}},en.cancel=function(){this.I=!0,Pl(this)},en.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function ag(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(gf(3),Sr(17)),Pl(this),this.o=2,yf(this)):d1(this,this.Y-n)},(en=lg.prototype).R=function(){ny(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},en.T=function(){return ny(this),this.g.concat()},en.get=function(n,e){return vf(this.h,n)?this.h[n]:e},en.set=function(n,e){vf(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},en.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var a=t[r],l=this.get(a);n.call(e,l,a,this)}};var f1=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function jh(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof jh){this.g=void 0!==e?e:n.g,ry(this,n.j),this.s=n.s,Gw(this,n.i),D_(this,n.m),this.l=n.l,e=n.h;var t=new _f;t.i=e.i,e.g&&(t.g=new lg(e.g),t.h=e.h),iy(this,t),this.o=n.o}else n&&(t=String(n).match(f1))?(this.g=!!e,ry(this,t[1]||"",!0),this.s=S_(t[2]||""),Gw(this,t[3]||"",!0),D_(this,t[4]),this.l=S_(t[5]||"",!0),iy(this,t[6]||"",!0),this.o=S_(t[7]||"")):(this.g=!!e,this.h=new _f(null,this.g))}function Ol(n){return new jh(n)}function ry(n,e,t){n.j=t?S_(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Gw(n,e,t){n.i=t?S_(e,!0):e}function D_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function iy(n,e,t){e instanceof _f?(n.h=e,function oy(n,e){e&&!n.j&&(lc(n),n.i=null,n.g.forEach(function(t,r){var a=r.toLowerCase();r!=a&&(fg(this,r),wf(this,a,t))},n)),n.j=e}(n.h,n.g)):(t||(e=hg(e,Ww)),n.h=new _f(e,n.g))}function si(n,e,t){n.h.set(e,t)}function Ll(n){return si(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function S_(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function hg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,tC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function tC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}jh.prototype.toString=function(){var n=[],e=this.j;e&&n.push(hg(e,qw,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(hg(e,qw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(hg(t,"/"==t.charAt(0)?g1:dg,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",hg(t,m1)),n.join("")};var qw=/[#\/\?@]/g,dg=/[#\?:]/g,g1=/[#\?]/g,Ww=/[#\?@]/g,m1=/#/g;function _f(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function lc(n){n.g||(n.g=new lg,n.h=0,n.i&&function p1(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),a=null;if(0<=r){var l=n[t].substring(0,r);a=n[t].substring(r+1)}else l=n[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function fg(n,e){lc(n),e=hc(n,e),vf(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,vf((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&ny(n)))}function pg(n,e){return lc(n),e=hc(n,e),vf(n.g.h,e)}function wf(n,e,t){fg(n,e),0<t.length&&(n.i=null,n.g.set(hc(n,e),Tw(t)),n.h+=t.length)}function hc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ay(n){this.l=n||Kw,n=Rn.PerformanceNavigationTiming?0<(n=Rn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rn.g&&Rn.g.Ea&&Rn.g.Ea()&&Rn.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(en=_f.prototype).add=function(n,e){lc(this),this.i=null,n=hc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},en.forEach=function(n,e){lc(this),this.g.forEach(function(t,r){Iw(t,function(a){n.call(e,a,r,this)},this)},this)},en.T=function(){lc(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var a=n[r],l=0;l<a.length;l++)t.push(e[r]);return t},en.R=function(n){lc(this);var e=[];if("string"==typeof n)pg(this,n)&&(e=YE(e,this.g.get(hc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=YE(e,n[t])}return e},en.set=function(n,e){return lc(this),this.i=null,pg(this,n=hc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},en.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},en.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],a=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var p=a;""!==r[l]&&(p+="="+encodeURIComponent(String(r[l]))),n.push(p)}}return this.i=n.join("&")};var Kw=10;function rC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function y1(n){return n.h?1:n.g?n.g.size:0}function uy(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function $h(n,e){n.g?n.g.add(e):n.h=e}function Zw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function va(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Tw(n.i)}function v1(){}function _1(){this.g=new v1}function iC(n,e,t){const r=t||"";try{zw(n,function(a,l){let p=a;zm(a)&&(p=l_(a)),e.push(r+l+"="+encodeURIComponent(p))})}catch(a){throw e.push(r+"type="+encodeURIComponent("_badmap")),a}}function cy(n,e,t,r,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(r)}catch(l){}}function A_(n){this.l=n.$b||null,this.j=n.ib||!1}function ly(n,e){zs.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Hh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ay.prototype.cancel=function(){if(this.i=va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},v1.prototype.stringify=function(n){return Rn.JSON.stringify(n,void 0)},v1.prototype.parse=function(n){return Rn.JSON.parse(n,void 0)},Ts(A_,mf),A_.prototype.g=function(){return new ly(this.l,this.j)},A_.prototype.i=function(n){return function(){return n}}({}),Ts(ly,zs);var Hh=0;function w1(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function zh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,hy(n)}function hy(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(en=ly.prototype).open=function(n,e){if(this.readyState!=Hh)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,hy(this)},en.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Rn).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},en.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zh(this)),this.readyState=Hh},en.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,hy(this)),this.g&&(this.readyState=3,hy(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Rn.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;w1(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},en.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?zh(this):hy(this),3==this.readyState&&w1(this)}},en.Ua=function(n){this.g&&(this.response=this.responseText=n,zh(this))},en.Ta=function(n){this.g&&(this.response=n,zh(this))},en.ha=function(){this.g&&zh(this)},en.setRequestHeader=function(n,e){this.v.append(n,e)},en.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},en.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ly.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var sC=Rn.JSON.parse;function rs(n){zs.call(this),this.headers=new lg,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=b1,this.K=this.L=!1}Ts(rs,zs);var b1="",E1=/^https?$/i,Jn=["POST","PUT"];function No(n){return"content-type"==n.toLowerCase()}function Ru(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Yw(n),_a(n)}function Yw(n){n.D||(n.D=!0,oo(n,"complete"),oo(n,"error"))}function dy(n){if(n.h&&void 0!==r_&&(!n.C[1]||4!=Xr(n)||2!=n.ba()))if(n.v&&4==Xr(n))p_(n.Fa,0,n);else if(oo(n,"readystatechange"),4==Xr(n)){n.h=!1;try{const b=n.ba();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===b){var a=String(n.H).match(f1)[1]||null;if(!a&&Rn.self&&Rn.self.location){var l=Rn.self.location.protocol;a=l.substr(0,l.length-1)}r=!E1.test(a?a.toLowerCase():"")}t=r}if(t)oo(n,"complete"),oo(n,"success");else{n.m=6;try{var p=2<Xr(n)?n.g.statusText:""}catch(A){p=""}n.j=p+" ["+n.ba()+"]",Yw(n)}}finally{_a(n)}}}function _a(n,e){if(n.g){Gh(n);const t=n.g,r=n.C[0]?$m:null;n.g=null,n.C=null,e||oo(n,"ready");try{t.onreadystatechange=r}catch(a){}}}function Gh(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Rn.clearTimeout(n.A),n.A=null)}function Xr(n){return n.g?n.g.readyState:0}function Fl(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case b1:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function nl(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function x_(n){let e="";return Gm(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):si(n,e,t))}function fy(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Qw(n){this.za=0,this.l=[],this.h=new m_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=fy("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=fy("baseRetryDelayMs",5e3,n),this.$a=fy("retryDelaySeedMs",1e4,n),this.Ya=fy("forwardChannelMaxRetries",2,n),this.ra=fy("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new ay(n&&n.concurrentRequestLimit),this.Ca=new _1,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Xw(n){if(gg(n),3==n.G){var e=n.V++,t=Ol(n.F);si(t,"SID",n.J),si(t,"RID",e),si(t,"TYPE","terminate"),bf(n,t),(e=new ey(n,n.h,e,void 0)).K=2,e.v=Ll(Ol(t)),t=!1,Rn.navigator&&Rn.navigator.sendBeacon&&(t=Rn.navigator.sendBeacon(e.v.toString(),"")),!t&&Rn.Image&&((new Image).src=e.v,t=!0),t||(e.g=_y(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ty(e)}R_(n)}function M_(n){n.g&&(yy(n),n.g.cancel(),n.g=null)}function gg(n){M_(n),n.u&&(Rn.clearTimeout(n.u),n.u=null),qh(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Rn.clearTimeout(n.m),n.m=null)}function Jw(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&mg(n)}function mg(n){rC(n.i)||n.m||(n.m=!0,Lw(n.Ha,n),n.C=0)}function py(n,e){var t;t=e?e.m:n.V++;const r=Ol(n.F);si(r,"SID",n.J),si(r,"RID",t),si(r,"AID",n.U),bf(n,r),n.o&&n.s&&nl(r,n.o,n.s),t=new ey(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Ef(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),$h(n.i,t),I_(t,r,e)}function bf(n,e){n.j&&zw({},function(t,r){si(e,r,t)})}function Ef(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Cs(n.j.Oa,n.j,n):null;e:{var a=n.l;let l=-1;for(;;){const p=["count="+t];-1==l?0<t?(l=a[0].h,p.push("ofs="+l)):l=0:p.push("ofs="+l);let b=!0;for(let A=0;A<t;A++){let L=a[A].h;const G=a[A].g;if(L-=l,0>L)l=Math.max(0,a[A].h-100),b=!1;else try{iC(G,p,"req"+L+"_")}catch(K){r&&r(G)}}if(b){r=p.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function gy(n){n.g||n.u||(n.Y=1,Lw(n.Ga,n),n.A=0)}function my(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=ug(Cs(n.Ga,n),T1(n,n.A)),n.A++,0))}function yy(n){null!=n.B&&(Rn.clearTimeout(n.B),n.B=null)}function If(n){n.g=new ey(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ol(n.oa);si(e,"RID","rpc"),si(e,"SID",n.J),si(e,"CI",n.N?"0":"1"),si(e,"AID",n.U),bf(n,e),si(e,"TYPE","xmlhttp"),n.o&&n.s&&nl(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Ll(Ol(e)),t.s=null,t.U=!0,jw(t,n)}function qh(n){null!=n.v&&(Rn.clearTimeout(n.v),n.v=null)}function C1(n,e){var t=null;if(n.g==e){qh(n),yy(n),n.g=null;var r=2}else{if(!uy(n.i,e))return;t=e.D,Zw(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;oo(r=pf(),new u1(r,t,e,a)),mg(n)}else gy(n);else if(3==(a=e.o)||0==a&&0<n.I||!(1==r&&function rl(n,e){return!(y1(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=ug(Cs(n.Ha,n,e),T1(n,n.C)),n.C++,0)))}(n,e)||2==r&&my(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),a){case 1:Wh(n,5);break;case 4:Wh(n,10);break;case 3:Wh(n,6);break;default:Wh(n,2)}}function T1(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Wh(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Cs(n.jb,n);t||(t=new jh("//www.google.com/images/cleardot.gif"),Rn.location&&"http"==Rn.location.protocol||ry(t,"https"),Ll(t)),function ZC(n,e){const t=new m_;if(Rn.Image){const r=new Image;r.onload=Xp(cy,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Xp(cy,t,r,"TestLoadImage: error",!1,e),r.onabort=Xp(cy,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Xp(cy,t,r,"TestLoadImage: timeout",!1,e),Rn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Sr(2);n.G=0,n.j&&n.j.va(e),R_(n),gg(n)}function R_(n){n.G=0,n.I=-1,n.j&&((0!=va(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Tw(n.l),n.l.length=0),n.j.ua())}function vy(n,e,t){let r=function sy(n){return n instanceof jh?Ol(n):new jh(n,void 0)}(t);if(""!=r.i)e&&Gw(r,e+"."+r.i),D_(r,r.m);else{const a=Rn.location;r=function eC(n,e,t,r){var a=new jh(null,void 0);return n&&ry(a,n),e&&Gw(a,e),t&&D_(a,t),r&&(a.l=r),a}(a.protocol,e?e+"."+a.hostname:a.hostname,+a.port,t)}return n.aa&&Gm(n.aa,function(a,l){si(r,l,a)}),t=n.sa,(e=n.D)&&t&&si(r,e,t),si(r,"VER",n.ma),bf(n,r),r}function _y(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new rs(t&&n.Ba&&!n.qa?new A_({ib:!0}):n.qa)).L=n.H,e}function yg(){}function k_(){if(nf&&!(10<=Number(Mu)))throw Error("Environmental error: no available transport.")}function ku(n,e){zs.call(this),this.g=new Qw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!i_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!i_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Tf(this)}function vg(n){__.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Cf(){Uw.call(this),this.status=1}function Tf(n){this.g=n}(en=rs.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Bw.g(),this.C=function cg(n){return n.h||(n.h=n.i())}(this.u?this.u:Bw),this.g.onreadystatechange=Cs(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void Ru(this,l)}n=t||"";const a=new lg(this.headers);r&&zw(r,function(l,p){a.set(p,l)}),r=function Cw(n){e:{var e=No;const t=n.length,r="string"==typeof n?n.split(""):n;for(let a=0;a<t;a++)if(a in r&&e.call(void 0,r[a],a,n)){e=a;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(a.T()),t=Rn.FormData&&n instanceof Rn.FormData,!(0<=Ew(Jn,e))||r||t||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(l,p){this.g.setRequestHeader(p,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Gh(this),0<this.B&&((this.K=function I1(n){return nf&&function sf(){return function Nh(n){var e=Ss;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Dw(String(eg)).split("."),t=Dw("9").split("."),r=Math.max(e.length,t.length);for(let p=0;0==n&&p<r;p++){var a=e[p]||"",l=t[p]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;n=ef(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||ef(0==a[2].length,0==l[2].length)||ef(a[2],l[2]),a=a[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Cs(this.pa,this)):this.A=p_(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){Ru(this,l)}},en.pa=function(){void 0!==r_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,oo(this,"timeout"),this.abort(8))},en.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,oo(this,"complete"),oo(this,"abort"),_a(this))},en.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_a(this,!0)),rs.Z.M.call(this)},en.Fa=function(){this.s||(this.F||this.v||this.l?dy(this):this.cb())},en.cb=function(){dy(this)},en.ba=function(){try{return 2<Xr(this)?this.g.status:-1}catch(n){return-1}},en.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},en.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),sC(e)}},en.Da=function(){return this.m},en.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(en=Qw.prototype).ma=8,en.G=1,en.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},en.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const a=new ey(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=o_(l),Aw(l,this.P)):l=this.P),null===this.o&&(a.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ef(this,a,e),si(t=Ol(this.F),"RID",n),si(t,"CVER",22),this.D&&si(t,"X-HTTP-Session-Id",this.D),bf(this,t),this.o&&l&&nl(t,this.o,l),$h(this.i,a),this.Ra&&si(t,"TYPE","init"),this.ja?(si(t,"$req",e),si(t,"SID","null"),a.$=!0,I_(a,t,null)):I_(a,t,e),this.G=2}}else 3==this.G&&(n?py(this,n):0==this.l.length||rC(this.i)||py(this))},en.Ga=function(){if(this.u=null,If(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=ug(Cs(this.bb,this),n)}},en.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Sr(10),M_(this),If(this))},en.ab=function(){null!=this.v&&(this.v=null,M_(this),my(this),Sr(19))},en.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Sr(2)):(this.h.info("Failed to ping google.com"),Sr(1))},(en=yg.prototype).xa=function(){},en.wa=function(){},en.va=function(){},en.ua=function(){},en.Oa=function(){},k_.prototype.g=function(n,e){return new ku(n,e)},Ts(ku,zs),ku.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Lw(Cs(n.hb,n,e))),Sr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=vy(n,null,n.W),mg(n)},ku.prototype.close=function(){Xw(this.g)},ku.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Jw(this.g,e)}else this.v?((e={}).__data__=l_(n),Jw(this.g,e)):Jw(this.g,n)},ku.prototype.M=function(){this.g.j=null,delete this.j,Xw(this.g),delete this.g,ku.Z.M.call(this)},Ts(vg,__),Ts(Cf,Uw),Ts(Tf,yg),Tf.prototype.xa=function(){oo(this.g,"a")},Tf.prototype.wa=function(n){oo(this.g,new vg(n))},Tf.prototype.va=function(n){oo(this.g,new Cf(n))},Tf.prototype.ua=function(){oo(this.g,"b")},k_.prototype.createWebChannel=k_.prototype.g,ku.prototype.send=ku.prototype.u,ku.prototype.open=ku.prototype.m,ku.prototype.close=ku.prototype.close,Er.NO_ERROR=0,Er.TIMEOUT=8,Er.HTTP_ERROR=6,c1.COMPLETE="complete",v_.EventType=Jm,Jm.OPEN="a",Jm.CLOSE="b",Jm.ERROR="c",Jm.MESSAGE="d",zs.prototype.listen=zs.prototype.N,rs.prototype.listenOnce=rs.prototype.O,rs.prototype.getLastError=rs.prototype.La,rs.prototype.getLastErrorCode=rs.prototype.Da,rs.prototype.getStatus=rs.prototype.ba,rs.prototype.getResponseJson=rs.prototype.Qa,rs.prototype.getResponseText=rs.prototype.ga,rs.prototype.send=rs.prototype.ea;var eb=eu.createWebChannelTransport=function(){return new k_},wy=eu.getStatEventTarget=function(){return pf()},tb=eu.ErrorCode=Er,oC=eu.EventType=c1,aC=eu.Event=Vh,D1=eu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},S1=eu.FetchXmlHttpFactory=A_,_g=eu.WebChannel=v_,N_=eu.XhrIo=rs;const P_="@firebase/firestore";class is{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}is.UNAUTHENTICATED=new is(null),is.GOOGLE_CREDENTIALS=new is("google-credentials-uid"),is.FIRST_PARTY=new is("first-party-uid"),is.MOCK_USER=new is("mock-user");let Df="9.8.4";const Ul=new Ml.Yd("@firebase/firestore");function O_(){return Ul.logLevel}function wt(n,...e){if(Ul.logLevel<=Ml.in.DEBUG){const t=e.map(Gs);Ul.debug(`Firestore (${Df}): ${n}`,...t)}}function Bi(n,...e){if(Ul.logLevel<=Ml.in.ERROR){const t=e.map(Gs);Ul.error(`Firestore (${Df}): ${n}`,...t)}}function wg(n,...e){if(Ul.logLevel<=Ml.in.WARN){const t=e.map(Gs);Ul.warn(`Firestore (${Df}): ${n}`,...t)}}function Gs(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Ht(n="Unexpected state"){const e=`FIRESTORE (${Df}) INTERNAL ASSERTION FAILED: `+n;throw Bi(e),new Error(e)}function Mn(n,e){n||Ht()}function kt(n,e){return n}const Ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class gt extends Tn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class A1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class x1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(is.UNAUTHENTICATED))}shutdown(){}}class Kh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class L_{constructor(e){this.t=e,this.currentUser=is.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let a=this.i;const l=L=>this.i!==a?(a=this.i,t(L)):Promise.resolve();let p=new Vi;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new Vi,e.enqueueRetryable(()=>l(this.currentUser))};const b=()=>{const L=p;e.enqueueRetryable((0,rt.Z)(function*(){yield L.promise,yield l(r.currentUser)}))},A=L=>{wt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=L,this.auth.addAuthTokenListener(this.o),b()};this.t.onInit(L=>A(L)),setTimeout(()=>{if(!this.auth){const L=this.t.getImmediate({optional:!0});L?A(L):(wt("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new Vi)}},0),b()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(wt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Mn("string"==typeof r.accessToken),new A1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Mn(null===e||"string"==typeof e),new is(e)}}class bg{constructor(e,t,r){this.type="FirstParty",this.user=is.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const a=e.auth.getAuthHeaderValueForFirstParty([]);a&&this.headers.set("Authorization",a),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class M1{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new bg(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(is.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class F_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U_{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=l=>{null!=l.error&&wt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const p=l.token!==this.p;return this.p=l.token,wt("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const a=l=>{wt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?a(l):wt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Mn("string"==typeof t.token),this.p=t.token,new F_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function YC(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class B_{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const a=YC(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%e.length))}return r}}function qn(n,e){return n<e?-1:n>e?1:0}function il(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}function Sf(n){return n+"\0"}class Jr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new gt(Ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new gt(Ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new gt(Ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new gt(Ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Jr.fromMillis(Date.now())}static fromDate(e){return Jr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Jr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qn(this.nanoseconds,e.nanoseconds):qn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Sn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Sn(e)}static min(){return new Sn(new Jr(0,0))}static max(){return new Sn(new Jr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Af{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ht(),void 0===r?r=e.length-t:r>e.length-t&&Ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Af.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Af?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=e.get(a),p=t.get(a);if(l<p)return-1;if(l>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class er extends Af{construct(e,t,r){return new er(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new gt(Ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new er(t)}static emptyPath(){return new er([])}}const QC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vi extends Af{construct(e,t,r){return new vi(e,t,r)}static isValidIdentifier(e){return QC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vi(["__name__"])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(0===r.length)throw new gt(Ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let p=!1;for(;a<e.length;){const b=e[a];if("\\"===b){if(a+1===e.length)throw new gt(Ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const A=e[a+1];if("\\"!==A&&"."!==A&&"`"!==A)throw new gt(Ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=A,a+=2}else"`"===b?(p=!p,a++):"."!==b||p?(r+=b,a++):(l(),a++)}if(l(),p)throw new gt(Ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vi(t)}static emptyPath(){return new vi([])}}class Ot{constructor(e){this.path=e}static fromPath(e){return new Ot(er.fromString(e))}static fromName(e){return new Ot(er.fromString(e).popFirst(5))}static empty(){return new Ot(er.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===er.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return er.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ot(new er(e.slice()))}}class by{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function Ey(n){return n.fields.find(e=>2===e.kind)}function xf(n){return n.fields.filter(e=>2!==e.kind)}by.UNKNOWN_ID=-1;class Eg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ig{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ig(0,Yo.min())}}function ib(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=Sn.fromTimestamp(1e9===r?new Jr(t+1,0):new Jr(t,r));return new Yo(a,Ot.empty(),e)}function R1(n){return new Yo(n.readTime,n.key,-1)}class Yo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Yo(Sn.min(),Ot.empty(),-1)}static max(){return new Yo(Sn.max(),Ot.empty(),-1)}}function V_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ot.comparator(n.documentKey,e.documentKey),0!==t?t:qn(n.largestBatchId,e.largestBatchId))}const j_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Iy{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Pu(n){return Cy.apply(this,arguments)}function Cy(){return Cy=(0,rt.Z)(function*(n){if(n.code!==Ge.FAILED_PRECONDITION||n.message!==j_)throw n;wt("LocalStore","Unexpectedly lost primary lease")}),Cy.apply(this,arguments)}class je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new je((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof je?t:je.resolve(t)}catch(t){return je.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):je.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):je.reject(t)}static resolve(e){return new je((t,r)=>{t(e)})}static reject(e){return new je((t,r)=>{r(e)})}static waitFor(e){return new je((t,r)=>{let a=0,l=0,p=!1;e.forEach(b=>{++a,b.next(()=>{++l,p&&l===a&&t()},A=>r(A))}),p=!0,l===a&&t()})}static or(e){let t=je.resolve(!1);for(const r of e)t=t.next(a=>a?je.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,l)=>{r.push(t.call(this,a,l))}),this.waitFor(r)}static mapArray(e,t){return new je((r,a)=>{const l=e.length,p=new Array(l);let b=0;for(let A=0;A<l;A++){const L=A;t(e[L]).next(G=>{p[L]=G,++b,b===l&&r(p)},G=>a(G))}})}static doWhile(e,t){return new je((r,a)=>{const l=()=>{!0===e()?t().next(()=>{l()},a):r()};l()})}}class $_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Vi,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Ty(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const a=k1(r.target.error);this.T.reject(new Ty(e,a))}}static open(e,t,r,a){try{return new $_(t,e.transaction(a,r))}catch(l){throw new Ty(t,l)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(wt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ob(t)}}class sl{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===sl.v((0,Tn.z$)())&&Bi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return wt("SimpleDb","Removing database:",e),Cg(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,Tn.hl)())return!1;if(sl.S())return!0;const e=(0,Tn.z$)(),t=sl.v(e),r=0<t&&t<10,a=sl.D(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,rt.Z)(function*(){return t.db||(wt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=p=>{r(p.target.result)},l.onblocked=()=>{a(new Ty(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=p=>{const b=p.target.error;a("VersionError"===b.name?new gt(Ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===b.name?new gt(Ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+b):new Ty(e,b))},l.onupgradeneeded=p=>{wt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.P.O(p.target.result,l.transaction,p.oldVersion,t.version).next(()=>{wt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,a){var l=this;return(0,rt.Z)(function*(){const p="readonly"===t;let b=0;for(;;){++b;try{l.db=yield l.k(e);const A=$_.open(l.db,e,p?"readonly":"readwrite",r),L=a(A).next(G=>(A.R(),G)).catch(G=>(A.abort(G),je.reject(G))).toPromise();return L.catch(()=>{}),yield A.A,L}catch(A){const L=A,G="FirebaseError"!==L.name&&b<3;if(wt("SimpleDb","Transaction failed with error:",L.message,"Retrying:",G),l.close(),!G)return Promise.reject(L)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class sb{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Cg(this.$.delete())}}class Ty extends gt{constructor(e,t){super(Ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Mf(n){return"IndexedDbTransactionError"===n.name}class ob{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(wt("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(wt("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Cg(r)}add(e){return wt("SimpleDb","ADD",this.store.name,e,e),Cg(this.store.add(e))}get(e){return Cg(this.store.get(e)).next(t=>(void 0===t&&(t=null),wt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return wt("SimpleDb","DELETE",this.store.name,e),Cg(this.store.delete(e))}count(){return wt("SimpleDb","COUNT",this.store.name),Cg(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const a=this.cursor(r),l=[];return this.G(a,(p,b)=>{l.push(b)}).next(()=>l)}{const a=this.store.getAll(r.range);return new je((l,p)=>{a.onerror=b=>{p(b.target.error)},a.onsuccess=b=>{l(b.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new je((a,l)=>{r.onerror=p=>{l(p.target.error)},r.onsuccess=p=>{a(p.target.result)}})}W(e,t){wt("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const a=this.cursor(r);return this.G(a,(l,p,b)=>b.delete())}J(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.G(a,t)}Y(e){const t=this.cursor({});return new je((r,a)=>{t.onerror=l=>{const p=k1(l.target.error);a(p)},t.onsuccess=l=>{const p=l.target.result;p?e(p.primaryKey,p.value).next(b=>{b?p.continue():r()}):r()}})}G(e,t){const r=[];return new je((a,l)=>{e.onerror=p=>{l(p.target.error)},e.onsuccess=p=>{const b=p.target.result;if(!b)return void a();const A=new sb(b),L=t(b.primaryKey,b.value,A);if(L instanceof je){const G=L.catch(K=>(A.done(),je.reject(K)));r.push(G)}A.isDone?a():null===A.U?b.continue():b.continue(A.U)}}).next(()=>je.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cg(n){return new je((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const a=k1(r.target.error);t(a)}})}let uC=!1;function k1(n){const e=sl.v((0,Tn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new gt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return uC||(uC=!0,setTimeout(()=>{throw r},0)),r}}return n}class Dy{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;wt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,rt.Z)(function*(){t.task=null;try{wt("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){Mf(r)?wt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Pu(r)}yield t.Z(1)}))}}class Sy{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,rt.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let a=t,l=!0;return je.doWhile(()=>!0===l&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(null!==p&&!r.has(p))return wt("IndexBackiller",`Processing collection: ${p}`),this.nt(e,p,a).next(b=>{a-=b,r.add(p)});l=!1})).next(()=>t-a)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(l=>{const p=l.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.st(a,l)).next(b=>(wt("IndexBackiller",`Updating offset: ${b}`),this.localStore.indexManager.updateCollectionGroup(e,t,b))).next(()=>p.size)}))}st(e,t){let r=e;return t.changes.forEach((a,l)=>{const p=R1(l);V_(p,r)>0&&(r=p)}),new Yo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ao{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function cC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zh(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function H_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}ao.ot=-1;class _i{constructor(e,t){this.comparator=e,this.root=t||uo.EMPTY}insert(e,t){return new _i(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,uo.BLACK,null,null))}remove(e){return new _i(this.comparator,this.root.remove(e,this.comparator).copy(null,null,uo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(0===a)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ay(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ay(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ay(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ay(this.root,e,this.comparator,!0)}}class Ay{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class uo{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=null!=r?r:uo.RED,this.left=null!=a?a:uo.EMPTY,this.right=null!=l?l:uo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new uo(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return uo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return uo.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,uo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,uo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ht();const e=this.left.check();if(e!==this.right.check())throw Ht();return e+(this.isRed()?0:1)}}uo.EMPTY=null,uo.RED=!0,uo.BLACK=!1,uo.EMPTY=new class{constructor(){this.size=0}get key(){throw Ht()}get value(){throw Ht()}get color(){throw Ht()}get left(){throw Ht()}get right(){throw Ht()}copy(n,e,t,r,a){return this}insert(n,e,t){return new uo(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vr{constructor(e){this.comparator=e,this.data=new _i(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ab(this.data.getIterator())}getIteratorFrom(e){return new ab(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof vr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vr(this.comparator);return t.data=e,t}}class ab{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Tg(n){return n.hasNext()?n.getNext():void 0}class wa{constructor(e){this.fields=e,e.sort(vi.comparator)}static empty(){return new wa([])}unionWith(e){let t=new vr(vi.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new wa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return il(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class As{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new As(t)}static fromUint8Array(e){const t=function(r){let a="";for(let l=0;l<r.length;++l)a+=String.fromCharCode(r[l]);return a}(e);return new As(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}As.EMPTY_BYTE_STRING=new As("");const hC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tu(n){if(Mn(!!n),"string"==typeof n){let e=0;const t=hC.exec(n);if(Mn(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ei(n.seconds),nanos:ei(n.nanos)}}function ei(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ol(n){return"string"==typeof n?As.fromBase64String(n):As.fromUint8Array(n)}function Dg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function N1(n){const e=n.mapValue.fields.__previous_value__;return Dg(e)?N1(e):e}function Bl(n){const e=tu(n.mapValue.fields.__local_write_time__.timestampValue);return new Jr(e.seconds,e.nanos)}class xy{constructor(e,t,r,a,l,p,b,A){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=p,this.autoDetectLongPolling=b,this.useFetchStreams=A}}class Ou{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ou("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ou&&e.projectId===this.projectId&&e.database===this.database}}function z_(n){return null==n}function My(n){return 0===n&&1/n==-1/0}function G_(n){return"number"==typeof n&&Number.isInteger(n)&&!My(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Yh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ba={nullValue:"NULL_VALUE"};function Qh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Dg(n)?4:cb(n)?9007199254740991:10:Ht()}function Lu(n,e){if(n===e)return!0;const t=Qh(n);if(t!==Qh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bl(n).isEqual(Bl(e));case 3:return function(r,a){if("string"==typeof r.timestampValue&&"string"==typeof a.timestampValue&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const l=tu(r.timestampValue),p=tu(a.timestampValue);return l.seconds===p.seconds&&l.nanos===p.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,ol(n.bytesValue).isEqual(ol(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,a){return ei(r.geoPointValue.latitude)===ei(a.geoPointValue.latitude)&&ei(r.geoPointValue.longitude)===ei(a.geoPointValue.longitude)}(n,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return ei(r.integerValue)===ei(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const l=ei(r.doubleValue),p=ei(a.doubleValue);return l===p?My(l)===My(p):isNaN(l)&&isNaN(p)}return!1}(n,e);case 9:return il(n.arrayValue.values||[],e.arrayValue.values||[],Lu);case 10:return function(r,a){const l=r.mapValue.fields||{},p=a.mapValue.fields||{};if(cC(l)!==cC(p))return!1;for(const b in l)if(l.hasOwnProperty(b)&&(void 0===p[b]||!Lu(l[b],p[b])))return!1;return!0}(n,e);default:return Ht()}var a}function Ry(n,e){return void 0!==(n.values||[]).find(t=>Lu(t,e))}function Xh(n,e){if(n===e)return 0;const t=Qh(n),r=Qh(e);if(t!==r)return qn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return qn(n.booleanValue,e.booleanValue);case 2:return function(a,l){const p=ei(a.integerValue||a.doubleValue),b=ei(l.integerValue||l.doubleValue);return p<b?-1:p>b?1:p===b?0:isNaN(p)?isNaN(b)?0:-1:1}(n,e);case 3:return ky(n.timestampValue,e.timestampValue);case 4:return ky(Bl(n),Bl(e));case 5:return qn(n.stringValue,e.stringValue);case 6:return function(a,l){const p=ol(a),b=ol(l);return p.compareTo(b)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const p=a.split("/"),b=l.split("/");for(let A=0;A<p.length&&A<b.length;A++){const L=qn(p[A],b[A]);if(0!==L)return L}return qn(p.length,b.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const p=qn(ei(a.latitude),ei(l.latitude));return 0!==p?p:qn(ei(a.longitude),ei(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,l){const p=a.values||[],b=l.values||[];for(let A=0;A<p.length&&A<b.length;++A){const L=Xh(p[A],b[A]);if(L)return L}return qn(p.length,b.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,l){if(a===Yh.mapValue&&l===Yh.mapValue)return 0;if(a===Yh.mapValue)return 1;if(l===Yh.mapValue)return-1;const p=a.fields||{},b=Object.keys(p),A=l.fields||{},L=Object.keys(A);b.sort(),L.sort();for(let G=0;G<b.length&&G<L.length;++G){const K=qn(b[G],L[G]);if(0!==K)return K;const oe=Xh(p[b[G]],A[L[G]]);if(0!==oe)return oe}return qn(b.length,L.length)}(n.mapValue,e.mapValue);default:throw Ht()}}function ky(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return qn(n,e);const t=tu(n),r=tu(e),a=qn(t.seconds,r.seconds);return 0!==a?a:qn(t.nanos,r.nanos)}function Vl(n){return q_(n)}function q_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const a=tu(r);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ol(n.bytesValue).toBase64():"referenceValue"in n?Ot.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let a="[",l=!0;for(const p of r.values||[])l?l=!1:a+=",",a+=q_(p);return a+"]"}(n.arrayValue):"mapValue"in n?function(r){const a=Object.keys(r.fields||{}).sort();let l="{",p=!0;for(const b of a)p?p=!1:l+=",",l+=`${b}:${q_(r.fields[b])}`;return l+"}"}(n.mapValue):Ht();var e}function Fu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function jl(n){return!!n&&"integerValue"in n}function Sg(n){return!!n&&"arrayValue"in n}function P1(n){return!!n&&"nullValue"in n}function ub(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jh(n){return!!n&&"mapValue"in n}function dc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Zh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=dc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function cb(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function lb(n){return"nullValue"in n?ba:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Fu(Ou.empty(),Ot.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ht()}function dC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Fu(Ou.empty(),Ot.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Yh:Ht()}function Ar(n,e){const t=Xh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function O1(n,e){const t=Xh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class xi{constructor(e){this.value=e}static empty(){return new xi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Jh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dc(t)}setAll(e){let t=vi.emptyPath(),r={},a=[];e.forEach((p,b)=>{if(!t.isImmediateParentOf(b)){const A=this.getFieldsMap(t);this.applyChanges(A,r,a),r={},a=[],t=b.popLast()}p?r[b.lastSegment()]=dc(p):a.push(b.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());Jh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Lu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Jh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Zh(t,(a,l)=>e[a]=l);for(const a of r)delete e[a]}clone(){return new xi(dc(this.value))}}function Ea(n){const e=[];return Zh(n.fields,(t,r)=>{const a=new vi([t]);if(Jh(r)){const l=Ea(r.mapValue).fields;if(0===l.length)e.push(a);else for(const p of l)e.push(a.child(p))}else e.push(a)}),new wa(e)}class _r{constructor(e,t,r,a,l,p){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.data=l,this.documentState=p}static newInvalidDocument(e){return new _r(e,0,Sn.min(),Sn.min(),xi.empty(),0)}static newFoundDocument(e,t,r){return new _r(e,1,t,Sn.min(),r,0)}static newNoDocument(e,t){return new _r(e,2,t,Sn.min(),xi.empty(),0)}static newUnknownDocument(e,t){return new _r(e,3,t,Sn.min(),xi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Sn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _r&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _r(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Po{constructor(e,t=null,r=[],a=[],l=null,p=null,b=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=p,this.endAt=b,this.ut=null}}function L1(n,e=null,t=[],r=[],a=null,l=null,p=null){return new Po(n,e,t,r,a,l,p)}function Ag(n){const e=kt(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(a=r).field.canonicalString()+a.op.toString()+Vl(a.value);var a}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(a=r).field.canonicalString()+a.dir;var a}).join(","),z_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vl(r)).join(",")),e.ut=t}return e.ut}function xg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!g(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(r=e.filters[a]).op||!t.field.isEqual(r.field)||!Lu(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!E(n.startAt,e.startAt)&&E(n.endAt,e.endAt)}function Py(n){return Ot.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function W_(n,e){return n.filters.filter(t=>t instanceof ss&&t.field.isEqual(e))}function fc(n,e,t){let r=ba,a=!0;for(const l of W_(n,e)){let p=ba,b=!0;switch(l.op){case"<":case"<=":p=lb(l.value);break;case"==":case"in":case">=":p=l.value;break;case">":p=l.value,b=!1;break;case"!=":case"not-in":p=ba}Ar({value:r,inclusive:a},{value:p,inclusive:b})<0&&(r=p,a=b)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const p=t.position[l];Ar({value:r,inclusive:a},{value:p,inclusive:t.inclusive})<0&&(r=p,a=t.inclusive);break}return{value:r,inclusive:a}}function Mg(n,e,t){let r=Yh,a=!0;for(const l of W_(n,e)){let p=Yh,b=!0;switch(l.op){case">=":case">":p=dC(l.value),b=!1;break;case"==":case"in":case"<=":p=l.value;break;case"<":p=l.value,b=!1;break;case"!=":case"not-in":p=Yh}O1({value:r,inclusive:a},{value:p,inclusive:b})>0&&(r=p,a=b)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const p=t.position[l];O1({value:r,inclusive:a},{value:p,inclusive:t.inclusive})>0&&(r=p,a=t.inclusive);break}return{value:r,inclusive:a}}class ss extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new K_(e,t,r):"array-contains"===t?new U1(e,r):"in"===t?new fC(e,r):"not-in"===t?new i(e,r):"array-contains-any"===t?new u(e,r):new ss(e,t,r)}static ct(e,t,r){return"in"===t?new Oy(e,r):new F1(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Xh(t,this.value)):null!==t&&Qh(this.value)===Qh(t)&&this.at(Xh(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ht()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class K_ extends ss{constructor(e,t,r){super(e,t,r),this.key=Ot.fromName(r.referenceValue)}matches(e){const t=Ot.comparator(e.key,this.key);return this.at(t)}}class Oy extends ss{constructor(e,t){super(e,"in",t),this.keys=hb(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class F1 extends ss{constructor(e,t){super(e,"not-in",t),this.keys=hb(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function hb(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ot.fromName(r.referenceValue))}class U1 extends ss{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sg(t)&&Ry(t.arrayValue,this.value)}}class fC extends ss{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ry(this.value.arrayValue,t)}}class i extends ss{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ry(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ry(this.value.arrayValue,t)}}class u extends ss{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ry(this.value.arrayValue,r))}}class h{constructor(e,t){this.position=e,this.inclusive=t}}class f{constructor(e,t="asc"){this.field=e,this.dir=t}}function g(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function v(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],p=n.position[a];if(r=l.field.isKeyField()?Ot.comparator(Ot.fromName(p.referenceValue),t.key):Xh(p,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function E(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Lu(n.position[t],e.position[t]))return!1;return!0}class I{constructor(e,t=null,r=[],a=[],l=null,p="F",b=null,A=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=p,this.startAt=b,this.endAt=A,this.lt=null,this.ft=null}}function S(n,e,t,r,a,l,p,b){return new I(n,e,t,r,a,l,p,b)}function k(n){return new I(n)}function U(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function N(n){for(const e of n.filters)if(e.ht())return e.field;return null}function V(n){return null!==n.collectionGroup}function H(n){const e=kt(n);if(null===e.lt){e.lt=[];const t=N(e),r=U(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new f(t)),e.lt.push(new f(vi.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e.lt.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new f(vi.keyField(),l))}}}return e.lt}function z(n){const e=kt(n);if(!e.ft)if("F"===e.limitType)e.ft=L1(e.path,e.collectionGroup,H(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of H(e))t.push(new f(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new h(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new h(e.startAt.position,e.startAt.inclusive):null;e.ft=L1(e.path,e.collectionGroup,t,e.filters,e.limit,r,a)}return e.ft}function Y(n,e,t){return new I(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function X(n,e){return xg(z(n),z(e))&&n.limitType===e.limitType}function he(n){return`${Ag(z(n))}|lt:${n.limitType}`}function ee(n){return`Query(target=${function Ny(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Vl(r.value)}`;var r}).join(", ")}]`),z_(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Vl(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Vl(t)).join(",")),`Target(${e})`}(z(n))}; limitType=${n.limitType})`}function De(n,e){return e.isFoundDocument()&&function(t,r){const a=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Ot.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,r){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===r.data.field(a.field))return!1;return!0}(n,e)&&function(t,r){for(const a of t.filters)if(!a.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(a,l,p){const b=v(a,l,p);return a.inclusive?b<=0:b<0}(t.startAt,H(t),r)||t.endAt&&!function(a,l,p){const b=v(a,l,p);return a.inclusive?b>=0:b>0}(t.endAt,H(t),r)));var t,r}function Oe(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Se(n){return(e,t)=>{let r=!1;for(const a of H(n)){const l=_e(a,e,t);if(0!==l)return l;r=r||a.field.isKeyField()}return 0}}function _e(n,e,t){const r=n.field.isKeyField()?Ot.comparator(e.key,t.key):function(a,l,p){const b=l.data.field(a),A=p.data.field(a);return null!==b&&null!==A?Xh(b,A):Ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ht()}}function qe(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:My(e)?"-0":e}}function $e(n){return{integerValue:""+n}}function St(n,e){return G_(e)?$e(e):qe(n,e)}class mt{constructor(){this._=void 0}}function st(n,e,t){return n instanceof le?function(r,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):n instanceof it?xt(n,e):n instanceof $t?Yt(n,e):function(r,a){const l=pt(r,a),p=kn(l)+kn(r._t);return jl(l)&&jl(r._t)?$e(p):qe(r.wt,p)}(n,e)}function Vt(n,e,t){return n instanceof it?xt(n,e):n instanceof $t?Yt(n,e):t}function pt(n,e){return n instanceof jn?jl(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class le extends mt{}class it extends mt{constructor(e){super(),this.elements=e}}function xt(n,e){const t=ur(e);for(const r of n.elements)t.some(a=>Lu(a,r))||t.push(r);return{arrayValue:{values:t}}}class $t extends mt{constructor(e){super(),this.elements=e}}function Yt(n,e){let t=ur(e);for(const r of n.elements)t=t.filter(a=>!Lu(a,r));return{arrayValue:{values:t}}}class jn extends mt{constructor(e,t){super(),this.wt=e,this._t=t}}function kn(n){return ei(n.integerValue||n.doubleValue)}function ur(n){return Sg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Qn{constructor(e,t){this.field=e,this.transform=t}}class Br{constructor(e,t){this.version=e,this.transformResults=t}}class $n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ft(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class An{}function Nn(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new db(n.key,$n.none()):new co(n.key,n.data,$n.none());{const t=n.data,r=xi.empty();let a=new vr(vi.comparator);for(let l of e.fields)if(!a.has(l)){let p=t.field(l);null===p&&l.length>1&&(l=l.popLast(),p=t.field(l)),null===p?r.delete(l):r.set(l,p),a=a.add(l)}return new Ia(n.key,r,new wa(a.toArray()),$n.none())}}function an(n,e,t){n instanceof co?function(r,a,l){const p=r.value.clone(),b=PT(r.fieldTransforms,a,l.transformResults);p.setAll(b),a.convertToFoundDocument(l.version,p).setHasCommittedMutations()}(n,e,t):n instanceof Ia?function(r,a,l){if(!Ft(r.precondition,a))return void a.convertToUnknownDocument(l.version);const p=PT(r.fieldTransforms,a,l.transformResults),b=a.data;b.setAll(B1(r)),b.setAll(p),a.convertToFoundDocument(l.version,b).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function os(n,e,t,r){return n instanceof co?function(a,l,p,b){if(!Ft(a.precondition,l))return p;const A=a.value.clone(),L=XC(a.fieldTransforms,b,l);return A.setAll(L),l.convertToFoundDocument(l.version,A).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ia?function(a,l,p,b){if(!Ft(a.precondition,l))return p;const A=XC(a.fieldTransforms,b,l),L=l.data;return L.setAll(B1(a)),L.setAll(A),l.convertToFoundDocument(l.version,L).setHasLocalMutations(),null===p?null:p.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(G=>G.field))}(n,e,t,r):(p=t,Ft(n.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):p);var l,p}function al(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=pt(r.transform,a||null);null!=l&&(null===t&&(t=xi.empty()),t.set(r.field,l))}return t||null}function Oo(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&il(t,r,(a,l)=>function zr(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof it&&r instanceof it||t instanceof $t&&r instanceof $t?il(t.elements,r.elements,Lu):t instanceof jn&&r instanceof jn?Lu(t._t,r._t):t instanceof le&&r instanceof le);var t,r}(a,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class co extends An{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ia extends An{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function B1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function PT(n,e,t){const r=new Map;Mn(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],p=l.transform,b=e.data.field(l.field);r.set(l.field,Vt(p,b,t[a]))}return r}function XC(n,e,t){const r=new Map;for(const a of n){const l=a.transform,p=t.data.field(a.field);r.set(a.field,st(l,p,e))}return r}class db extends An{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JC extends An{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class TS{constructor(e){this.count=e}}var lo,s;function o(n){switch(n){default:return Ht();case Ge.CANCELLED:case Ge.UNKNOWN:case Ge.DEADLINE_EXCEEDED:case Ge.RESOURCE_EXHAUSTED:case Ge.INTERNAL:case Ge.UNAVAILABLE:case Ge.UNAUTHENTICATED:return!1;case Ge.INVALID_ARGUMENT:case Ge.NOT_FOUND:case Ge.ALREADY_EXISTS:case Ge.PERMISSION_DENIED:case Ge.FAILED_PRECONDITION:case Ge.ABORTED:case Ge.OUT_OF_RANGE:case Ge.UNIMPLEMENTED:case Ge.DATA_LOSS:return!0}}function c(n){if(void 0===n)return Bi("GRPC error has no .code"),Ge.UNKNOWN;switch(n){case lo.OK:return Ge.OK;case lo.CANCELLED:return Ge.CANCELLED;case lo.UNKNOWN:return Ge.UNKNOWN;case lo.DEADLINE_EXCEEDED:return Ge.DEADLINE_EXCEEDED;case lo.RESOURCE_EXHAUSTED:return Ge.RESOURCE_EXHAUSTED;case lo.INTERNAL:return Ge.INTERNAL;case lo.UNAVAILABLE:return Ge.UNAVAILABLE;case lo.UNAUTHENTICATED:return Ge.UNAUTHENTICATED;case lo.INVALID_ARGUMENT:return Ge.INVALID_ARGUMENT;case lo.NOT_FOUND:return Ge.NOT_FOUND;case lo.ALREADY_EXISTS:return Ge.ALREADY_EXISTS;case lo.PERMISSION_DENIED:return Ge.PERMISSION_DENIED;case lo.FAILED_PRECONDITION:return Ge.FAILED_PRECONDITION;case lo.ABORTED:return Ge.ABORTED;case lo.OUT_OF_RANGE:return Ge.OUT_OF_RANGE;case lo.UNIMPLEMENTED:return Ge.UNIMPLEMENTED;case lo.DATA_LOSS:return Ge.DATA_LOSS;default:return Ht()}}(s=lo||(lo={}))[s.OK=0]="OK",s[s.CANCELLED=1]="CANCELLED",s[s.UNKNOWN=2]="UNKNOWN",s[s.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",s[s.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",s[s.NOT_FOUND=5]="NOT_FOUND",s[s.ALREADY_EXISTS=6]="ALREADY_EXISTS",s[s.PERMISSION_DENIED=7]="PERMISSION_DENIED",s[s.UNAUTHENTICATED=16]="UNAUTHENTICATED",s[s.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",s[s.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",s[s.ABORTED=10]="ABORTED",s[s.OUT_OF_RANGE=11]="OUT_OF_RANGE",s[s.UNIMPLEMENTED=12]="UNIMPLEMENTED",s[s.INTERNAL=13]="INTERNAL",s[s.UNAVAILABLE=14]="UNAVAILABLE",s[s.DATA_LOSS=15]="DATA_LOSS";class d{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[a,l]of r)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0===a)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return 1===r.length?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Zh(this.inner,(t,r)=>{for(const[a,l]of r)e(a,l)})}isEmpty(){return H_(this.inner)}size(){return this.innerSize}}const m=new _i(Ot.comparator);function _(){return m}const T=new _i(Ot.comparator);function R(...n){let e=T;for(const t of n)e=e.insert(t.key,t);return e}function P(n){let e=T;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function j(){return te()}function q(){return te()}function te(){return new d(n=>n.toString(),(n,e)=>n.isEqual(e))}const de=new _i(Ot.comparator),Ae=new vr(Ot.comparator);function ke(...n){let e=Ae;for(const t of n)e=e.add(t);return e}const Mt=new vr(qn);function Pt(){return Mt}class Qt{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,ct.createSynthesizedTargetChangeForCurrentChange(e,t)),new Qt(Sn.min(),r,Pt(),_(),ke())}}class ct{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new ct(As.EMPTY_BYTE_STRING,t,ke(),ke(),ke())}}class mn{constructor(e,t,r,a){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=a}}class rr{constructor(e,t){this.targetId=e,this.It=t}}class Cr{constructor(e,t,r=As.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class Uu{constructor(){this.Tt=0,this.Et=j1(),this.At=As.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=ke(),t=ke(),r=ke();return this.Et.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Ht()}}),new ct(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=j1()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class Ly{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=_(),this.Bt=V1(),this.Lt=new vr(qn)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:Ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,a)=>{this.jt(a)&&t(a)})}zt(e){const t=e.targetId,r=e.It.count,a=this.Ht(t);if(a){const l=a.target;if(Py(l))if(0===r){const p=new Ot(l.path);this.Kt(t,p,_r.newNoDocument(p,Sn.min()))}else Mn(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((l,p)=>{const b=this.Ht(p);if(b){if(l.current&&Py(b.target)){const A=new Ot(b.target.path);null!==this.$t.get(A)||this.Xt(p,A)||this.Kt(p,A,_r.newNoDocument(A,e))}l.vt&&(t.set(p,l.St()),l.Dt())}});let r=ke();this.Bt.forEach((l,p)=>{let b=!0;p.forEachWhile(A=>{const L=this.Ht(A);return!L||2===L.purpose||(b=!1,!1)}),b&&(r=r.add(l))}),this.$t.forEach((l,p)=>p.setReadTime(e));const a=new Qt(e,t,this.Lt,this.$t,r);return this.$t=_(),this.Bt=V1(),this.Lt=new vr(qn),a}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const a=this.Qt(e);this.Xt(e,t)?a.Ct(t,1):a.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new Uu,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new vr(qn),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||wt("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new Uu),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function V1(){return new _i(Ot.comparator)}function j1(){return new _i(Ot.comparator)}const pC={asc:"ASCENDING",desc:"DESCENDING"},gC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class mC{constructor(e,t){this.databaseId=e,this.dt=t}}function Fy(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $1(n,e){return n.dt?e.toBase64():e.toUint8Array()}function yC(n,e){return Fy(n,e.toTimestamp())}function qs(n){return Mn(!!n),Sn.fromTimestamp(function(e){const t=tu(e);return new Jr(t.seconds,t.nanos)}(n))}function OT(n,e){return(t=n,new er(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function DS(n){const e=er.fromString(n);return Mn(OS(e)),e}function vC(n,e){return OT(n.databaseId,e.path)}function Rg(n,e){const t=DS(e);if(t.get(1)!==n.databaseId.projectId)throw new gt(Ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new gt(Ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ot(AS(t))}function LT(n,e){return OT(n.databaseId,e)}function SS(n){const e=DS(n);return 4===e.length?er.emptyPath():AS(e)}function _C(n){return new er(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AS(n){return Mn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function xS(n,e,t){return{name:vC(n,e),fields:t.value.mapValue.fields}}function MS(n,e,t){const r=Rg(n,e.name),a=qs(e.updateTime),l=new xi({mapValue:{fields:e.fields}}),p=_r.newFoundDocument(r,a,l);return t&&p.setHasCommittedMutations(),t?p.setHasCommittedMutations():p}function wC(n,e){let t;if(e instanceof co)t={update:xS(n,e.key,e.value)};else if(e instanceof db)t={delete:vC(n,e.key)};else if(e instanceof Ia)t={update:xS(n,e.key,e.data),updateMask:vM(e.fieldMask)};else{if(!(e instanceof JC))return Ht();t={verify:vC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,l){const p=l.transform;if(p instanceof le)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof it)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof $t)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof jn)return{fieldPath:l.field.canonicalString(),increment:p._t};throw Ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:yC(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Ht()),t;var a}function FT(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?$n.updateTime(qs(a.updateTime)):void 0!==a.exists?$n.exists(a.exists):$n.none():$n.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(l,p){let b=null;"setToServerValue"in p?(Mn("REQUEST_TIME"===p.setToServerValue),b=new le):"appendMissingElements"in p?b=new it(p.appendMissingElements.values||[]):"removeAllFromArray"in p?b=new $t(p.removeAllFromArray.values||[]):"increment"in p?b=new jn(l,p.increment):Ht();const A=vi.fromServerFormat(p.fieldPath);return new Qn(A,b)}(n,a)):[];var a;if(e.update){const a=Rg(n,e.update.name),l=new xi({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new wa((e.updateMask.fieldPaths||[]).map(L=>vi.fromServerFormat(L)));return new Ia(a,l,p,t,r)}return new co(a,l,t,r)}if(e.delete){const a=Rg(n,e.delete);return new db(a,t)}if(e.verify){const a=Rg(n,e.verify);return new JC(a,t)}return Ht()}function RS(n,e){return{documents:[LT(n,e.path)]}}function kS(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=LT(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=LT(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const a=function(A){if(0===A.length)return;const L=A.map(G=>function(K){if("=="===K.op){if(ub(K.value))return{unaryFilter:{field:H1(K.field),op:"IS_NAN"}};if(P1(K.value))return{unaryFilter:{field:H1(K.field),op:"IS_NULL"}}}else if("!="===K.op){if(ub(K.value))return{unaryFilter:{field:H1(K.field),op:"IS_NOT_NAN"}};if(P1(K.value))return{unaryFilter:{field:H1(K.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:H1(K.field),op:gM(K.op),value:K.value}}}(G));return 1===L.length?L[0]:{compositeFilter:{op:"AND",filters:L}}}(e.filters);a&&(t.structuredQuery.where=a);const l=function(A){if(0!==A.length)return A.map(L=>{return{field:H1((G=L).field),direction:pM(G.dir)};var G})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const p=(L=e.limit,n.dt||z_(L)?L:{value:L});var L,b,A;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt={before:(b=e.startAt).inclusive,values:b.position}),e.endAt&&(t.structuredQuery.endAt={before:!(A=e.endAt).inclusive,values:A.position}),t}function NS(n){let e=SS(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Mn(1===r);const G=t.from[0];G.allDescendants?a=G.collectionId:e=e.child(G.collectionId)}let l=[];t.where&&(l=PS(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(G=>{return new f(z1((K=G).field),function(oe){switch(oe){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(K.direction));var K}));let b=null;t.limit&&(b=function(G){let K;return K="object"==typeof G?G.value:G,z_(K)?null:K}(t.limit));let A=null;var G;t.startAt&&(A=new h((G=t.startAt).values||[],!!G.before));let L=null;return t.endAt&&(L=function(G){return new h(G.values||[],!G.before)}(t.endAt)),S(e,a,p,l,b,"F",A,L)}function PS(n){return n?void 0!==n.unaryFilter?[yM(n)]:void 0!==n.fieldFilter?[mM(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>PS(e)).reduce((e,t)=>e.concat(t)):Ht():[]}function pM(n){return pC[n]}function gM(n){return gC[n]}function H1(n){return{fieldPath:n.canonicalString()}}function z1(n){return vi.fromServerFormat(n.fieldPath)}function mM(n){return ss.create(z1(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ht()}}(n.fieldFilter.op),n.fieldFilter.value)}function yM(n){switch(n.unaryFilter.op){case"IS_NAN":const e=z1(n.unaryFilter.field);return ss.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=z1(n.unaryFilter.field);return ss.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=z1(n.unaryFilter.field);return ss.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=z1(n.unaryFilter.field);return ss.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Ht()}}function vM(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function OS(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function pc(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=LS(e)),e=_M(n.get(t),e);return LS(e)}function _M(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function LS(n){return n+"\x01\x01"}function kg(n){const e=n.length;if(Mn(e>=2),2===e)return Mn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),er.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const p=n.indexOf("\x01",l);switch((p<0||p>t)&&Ht(),n.charAt(p+1)){case"\x01":const b=n.substring(l,p);let A;0===a.length?A=b:(a+=b,A=a,a=""),r.push(A);break;case"\x10":a+=n.substring(l,p),a+="\0";break;case"\x11":a+=n.substring(l,p+1);break;default:Ht()}l=p+2}return new er(r)}const FS=["userId","batchId"];function eT(n,e){return[n,pc(e)]}function US(n,e,t){return[n,pc(e),t]}const wM={},bM=["prefixPath","collectionGroup","readTime","documentId"],EM=["prefixPath","collectionGroup","documentId"],IM=["collectionGroup","readTime","prefixPath","documentId"],CM=["canonicalId","targetId"],TM=["targetId","path"],DM=["path","targetId"],SM=["collectionId","parent"],AM=["indexId","uid"],xM=["uid","sequenceNumber"],MM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],RM=["indexId","uid","orderedDocumentKey"],kM=["userId","collectionPath","documentId"],NM=["userId","collectionPath","largestBatchId"],PM=["userId","collectionGroup","largestBatchId"],BS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],OM=[...BS,"documentOverlays"],VS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jS=VS,LM=[...jS,"indexConfiguration","indexState","indexEntries"];class UT extends Iy{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Ca(n,e){const t=kt(n);return sl.N(t.ee,e)}class BT{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&an(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=os(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=os(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=q();return this.mutations.forEach(a=>{const l=e.get(a.key),p=l.overlayedDocument;let b=this.applyToLocalView(p,l.mutatedFields);b=t.has(a.key)?null:b;const A=Nn(p,b);null!==A&&r.set(a.key,A),p.isValidDocument()||p.convertToNoDocument(Sn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ke())}isEqual(e){return this.batchId===e.batchId&&il(this.mutations,e.mutations,(t,r)=>Oo(t,r))&&il(this.baseMutations,e.baseMutations,(t,r)=>Oo(t,r))}}class VT{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Mn(e.mutations.length===r.length);let a=de;const l=e.mutations;for(let p=0;p<l.length;p++)a=a.insert(l[p].key,r[p].version);return new VT(e,t,r,a)}}class jT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Z_{constructor(e,t,r,a,l=Sn.min(),p=Sn.min(),b=As.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=b}withSequenceNumber(e){return new Z_(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Z_(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Z_(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class $S{constructor(e){this.ne=e}}function HS(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:tT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:vC(a=n.ne,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:Fy(a,l.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:fb(e.version)};else{if(!e.isUnknownDocument())return Ht();r.unknownDocument={path:t.path.toArray(),version:fb(e.version)}}var a,l;return r}function tT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function fb(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pb(n){const e=new Jr(n.seconds,n.nanoseconds);return Sn.fromTimestamp(e)}function gb(n,e){const t=(e.baseMutations||[]).map(l=>FT(n.ne,l));for(let l=0;l<e.mutations.length-1;++l){const p=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(p.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>FT(n.ne,l)),a=Jr.fromMillis(e.localWriteTimeMs);return new BT(e.batchId,a,t,r)}function bC(n){const e=pb(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?pb(n.lastLimboFreeSnapshotVersion):Sn.min();let r;var a;return void 0!==n.query.documents?(Mn(1===(a=n.query).documents.length),r=z(k(SS(a.documents[0])))):r=z(NS(n.query)),new Z_(r,n.targetId,0,n.lastListenSequenceNumber,e,t,As.fromBase64String(n.resumeToken))}function zS(n,e){const t=fb(e.snapshotVersion),r=fb(e.lastLimboFreeSnapshotVersion);let a;a=Py(e.target)?RS(n.ne,e.target):kS(n.ne,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ag(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function $T(n){const e=NS({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Y(e,e.limit,"L"):e}function HT(n,e){return new jT(e.largestBatchId,FT(n.ne,e.overlayMutation))}function GS(n,e){const t=e.path.lastSegment();return[n,pc(e.path.popLast()),t]}function qS(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:fb(r.readTime),documentKey:pc(r.documentKey.path),largestBatchId:r.largestBatchId}}class UM{getBundleMetadata(e,t){return WS(e).get(t).next(r=>{if(r)return{id:(a=r).bundleId,createTime:pb(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return WS(e).put({bundleId:(r=t).id,createTime:fb(qs(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return KS(e).get(t).next(r=>{if(r)return{name:(a=r).name,query:$T(a.bundledQuery),readTime:pb(a.readTime)};var a})}saveNamedQuery(e,t){return KS(e).put({name:(r=t).name,readTime:fb(qs(r.readTime)),bundledQuery:r.bundledQuery});var r}}function WS(n){return Ca(n,"bundles")}function KS(n){return Ca(n,"namedQueries")}class nT{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new nT(e,t.uid||"")}getOverlay(e,t){return EC(e).get(GS(this.userId,t)).next(r=>r?HT(this.wt,r):null)}getOverlays(e,t){const r=j();return je.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((l,p)=>{const b=new jT(t,p);a.push(this.ie(e,b))}),je.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(p=>a.add(pc(p.getCollectionPath())));const l=[];return a.forEach(p=>{const b=IDBKeyRange.bound([this.userId,p,r],[this.userId,p,r+1],!1,!0);l.push(EC(e).W("collectionPathOverlayIndex",b))}),je.waitFor(l)}getOverlaysForCollection(e,t,r){const a=j(),l=pc(t),p=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return EC(e).K("collectionPathOverlayIndex",p).next(b=>{for(const A of b){const L=HT(this.wt,A);a.set(L.getKey(),L)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const l=j();let p;const b=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return EC(e).J({index:"collectionGroupOverlayIndex",range:b},(A,L,G)=>{const K=HT(this.wt,L);l.size()<a||K.largestBatchId===p?(l.set(K.getKey(),K),p=K.largestBatchId):G.done()}).next(()=>l)}ie(e,t){return EC(e).put(function(r,a,l){const[p,b,A]=GS(a,l.mutation.key);return{userId:a,collectionPath:b,documentId:A,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:wC(r.ne,l.mutation)}}(this.wt,this.userId,t))}}function EC(n){return Ca(n,"documentOverlays")}class mb{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(ei(e.integerValue));else if("doubleValue"in e){const r=ei(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),My(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(ol(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?cb(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Ht()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const a of Object.keys(r))this.le(a,t),this.oe(r[a],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const a of r)this.oe(a,t)}_e(e,t){this.ce(t,37),Ot.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function BM(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function ZS(n){const e=64-function(t){let r=0;for(let a=0;a<8;++a){const l=BM(255&t[a]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}mb.ye=new mb;class VM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const a=t.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const a=t.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}this.Re()}ve(e){const t=this.Ve(e),r=ZS(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}De(e){const t=this.Ve(e),r=ZS(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class jM{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class $M{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class IC{constructor(){this.Me=new VM,this.Fe=new jM(this.Me),this.$e=new $M(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class yb{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new yb(this.indexId,this.documentKey,this.arrayValue,r)}}function vb(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=YS(n.arrayValue,e.arrayValue),0!==t?t:(t=YS(n.directionalValue,e.directionalValue),0!==t?t:Ot.comparator(n.documentKey,e.documentKey)))}function YS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class HM{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=Ey(e);if(void 0!==t&&!this.Qe(t))return!1;const r=xf(e);let a=0,l=0;for(;a<r.length&&this.Qe(r[a]);++a);if(a===r.length)return!0;if(void 0!==this.Ke){const p=r[a];if(!this.je(this.Ke,p)||!this.We(this.Ue[l++],p))return!1;++a}for(;a<r.length;++a){const p=r[a];if(l>=this.Ue.length||!this.We(this.Ue[l++],p))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class zM{constructor(){this.ze=new zT}addToCollectionParentIndex(e,t){return this.ze.add(t),je.resolve()}getCollectionParents(e,t){return je.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return je.resolve()}deleteFieldIndex(e,t){return je.resolve()}getDocumentsMatchingTarget(e,t){return je.resolve(null)}getIndexType(e,t){return je.resolve(0)}getFieldIndexes(e,t){return je.resolve([])}getNextCollectionGroupToUpdate(e){return je.resolve(null)}getMinOffset(e,t){return je.resolve(Yo.min())}getMinOffsetFromCollectionGroup(e,t){return je.resolve(Yo.min())}updateCollectionGroup(e,t,r){return je.resolve()}updateIndexEntries(e,t){return je.resolve()}}class zT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new vr(er.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new vr(er.comparator)).toArray()}}const rT=new Uint8Array(0);class GM{constructor(e,t){this.user=e,this.databaseId=t,this.He=new zT,this.Je=new d(r=>Ag(r),(r,a)=>xg(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const l={collectionId:r,parent:pc(a)};return QS(e).put(l)}return je.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[Sf(t),""],!1,!0);return QS(e).K(a).next(l=>{for(const p of l){if(p.collectionId!==t)break;r.push(kg(p.parent))}return r})}addFieldIndex(e,t){const r=iT(e),a={indexId:(p=t).indexId,collectionGroup:p.collectionGroup,fields:p.fields.map(b=>[b.fieldPath.canonicalString(),b.kind])};var p;delete a.indexId;const l=r.add(a);if(t.indexState){const p=TC(e);return l.next(b=>{p.put(qS(b,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=iT(e),a=TC(e),l=CC(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=CC(e);let a=!0;const l=new Map;return je.forEach(this.Ye(t),p=>this.Xe(e,p).next(b=>{a&&(a=!!b),l.set(p,b)})).next(()=>{if(a){let p=ke();const b=[];return je.forEach(l,(A,L)=>{var G;wt("IndexedDbIndexManager",`Using index ${G=A,`id=${G.indexId}|cg=${G.collectionGroup}|f=${G.fields.map(Zt=>`${Zt.fieldPath}:${Zt.kind}`).join(",")}`} to execute ${Ag(t)}`);const K=function(Zt,zt){const ln=Ey(zt);if(void 0===ln)return null;for(const yn of W_(Zt,ln.fieldPath))switch(yn.op){case"array-contains-any":return yn.value.arrayValue.values||[];case"array-contains":return[yn.value]}return null}(L,A),oe=function(Zt,zt){const ln=new Map;for(const yn of xf(zt))for(const hr of W_(Zt,yn.fieldPath))switch(hr.op){case"==":case"in":ln.set(yn.fieldPath.canonicalString(),hr.value);break;case"not-in":case"!=":return ln.set(yn.fieldPath.canonicalString(),hr.value),Array.from(ln.values())}return null}(L,A),ie=function(Zt,zt){const ln=[];let yn=!0;for(const hr of xf(zt)){const $i=0===hr.kind?fc(Zt,hr.fieldPath,Zt.startAt):Mg(Zt,hr.fieldPath,Zt.startAt);ln.push($i.value),yn&&(yn=$i.inclusive)}return new h(ln,yn)}(L,A),Ce=function(Zt,zt){const ln=[];let yn=!0;for(const hr of xf(zt)){const $i=0===hr.kind?Mg(Zt,hr.fieldPath,Zt.endAt):fc(Zt,hr.fieldPath,Zt.endAt);ln.push($i.value),yn&&(yn=$i.inclusive)}return new h(ln,yn)}(L,A),ft=this.Ze(A,L,ie),yt=this.Ze(A,L,Ce),Xt=this.tn(A,L,oe),At=this.en(A.indexId,K,ft,ie.inclusive,yt,Ce.inclusive,Xt);return je.forEach(At,Zt=>r.j(Zt,t.limit).next(zt=>{zt.forEach(ln=>{const yn=Ot.fromSegments(ln.documentKey);p.has(yn)||(p=p.add(yn),b.push(yn))})}))}).next(()=>b)}return je.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,a,l,p,b){const A=(null!=t?t.length:1)*Math.max(r.length,l.length),L=A/(null!=t?t.length:1),G=[];for(let K=0;K<A;++K){const oe=t?this.nn(t[K/L]):rT,ie=this.sn(e,oe,r[K%L],a),Ce=this.rn(e,oe,l[K%L],p),ft=b.map(yt=>this.sn(e,oe,yt,!0));G.push(...this.createRange(ie,Ce,ft))}return G}sn(e,t,r,a){const l=new yb(e,Ot.empty(),t,r);return a?l:l.Le()}rn(e,t,r,a){const l=new yb(e,Ot.empty(),t,r);return a?l.Le():l}Xe(e,t){const r=new HM(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let p=null;for(const b of l)r.Ge(b)&&(!p||b.fields.length>p.fields.length)&&(p=b);return p})}getIndexType(e,t){let r=2;return je.forEach(this.Ye(t),a=>this.Xe(e,a).next(l=>{l?0!==r&&l.fields.length<function(p){let b=new vr(vi.comparator),A=!1;for(const L of p.filters){const G=L;G.field.isKeyField()||("array-contains"===G.op||"array-contains-any"===G.op?A=!0:b=b.add(G.field))}for(const L of p.orderBy)L.field.isKeyField()||(b=b.add(L.field));return b.size+(A?1:0)}(a)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new IC;for(const a of xf(e)){const l=t.data.field(a.fieldPath);if(null==l)return null;const p=r.Be(a.kind);mb.ye.re(l,p)}return r.Oe()}nn(e){const t=new IC;return mb.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new IC;return mb.ye.re(Fu(this.databaseId,t),r.Be(function(a){const l=xf(a);return 0===l.length?0:l[l.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let a=[];a.push(new IC);let l=0;for(const p of xf(e)){const b=r[l++];for(const A of a)if(this.cn(t,p.fieldPath)&&Sg(b))a=this.an(a,p,b);else{const L=A.Be(p.kind);mb.ye.re(b,L)}}return this.hn(a)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const a=[...e],l=[];for(const p of r.arrayValue.values||[])for(const b of a){const A=new IC;A.seed(b.Oe()),mb.ye.re(p,A.Be(t.kind)),l.push(A)}return l}cn(e,t){return!!e.filters.find(r=>r instanceof ss&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=iT(e),a=TC(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(l=>{const p=[];return je.forEach(l,b=>a.get([b.indexId,this.uid]).next(A=>{p.push(function(L,G){const K=G?new Ig(G.sequenceNumber,new Yo(pb(G.readTime),new Ot(kg(G.documentKey)),G.largestBatchId)):Ig.empty(),oe=L.fields.map(([ie,Ce])=>new Eg(vi.fromServerFormat(ie),Ce));return new by(L.indexId,L.collectionGroup,oe,K)}(b,A))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==l?l:qn(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=iT(e),l=TC(e);return this.ln(e).next(p=>a.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(b=>je.forEach(b,A=>l.put(qS(A.indexId,this.user,p,r)))))}updateIndexEntries(e,t){const r=new Map;return je.forEach(t,(a,l)=>{const p=r.get(a.collectionGroup);return(p?je.resolve(p):this.getFieldIndexes(e,a.collectionGroup)).next(b=>(r.set(a.collectionGroup,b),je.forEach(b,A=>this.fn(e,a,A).next(L=>{const G=this.dn(l,A);return L.isEqual(G)?je.resolve():this._n(e,l,A,L,G)}))))})}wn(e,t,r,a){return CC(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,a){return CC(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const a=CC(e);let l=new vr(vb);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(p,b)=>{l=l.add(new yb(r.indexId,t,b.arrayValue,b.directionalValue))}).next(()=>l)}dn(e,t){let r=new vr(vb);const a=this.on(t,e);if(null==a)return r;const l=Ey(t);if(null!=l){const p=e.data.field(l.fieldPath);if(Sg(p))for(const b of p.arrayValue.values||[])r=r.add(new yb(t.indexId,e.key,this.nn(b),a))}else r=r.add(new yb(t.indexId,e.key,rT,a));return r}_n(e,t,r,a,l){wt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const p=[];return function(b,A,L,G,K){const oe=b.getIterator(),ie=A.getIterator();let Ce=Tg(oe),ft=Tg(ie);for(;Ce||ft;){let yt=!1,Xt=!1;if(Ce&&ft){const At=L(Ce,ft);At<0?Xt=!0:At>0&&(yt=!0)}else null!=Ce?Xt=!0:yt=!0;yt?(G(ft),ft=Tg(ie)):Xt?(K(Ce),Ce=Tg(oe)):(Ce=Tg(oe),ft=Tg(ie))}}(a,l,vb,b=>{p.push(this.wn(e,t,r,b))},b=>{p.push(this.mn(e,t,r,b))}),je.waitFor(p)}ln(e){let t=1;return TC(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((p,b)=>vb(p,b)).filter((p,b,A)=>!b||0!==vb(p,A[b-1]));const a=[];a.push(e);for(const p of r){const b=vb(p,e),A=vb(p,t);if(0===b)a[0]=e.Le();else if(b>0&&A<0)a.push(p),a.push(p.Le());else if(A>0)break}a.push(t);const l=[];for(let p=0;p<a.length;p+=2)l.push(IDBKeyRange.bound([a[p].indexId,this.uid,a[p].arrayValue,a[p].directionalValue,rT,[]],[a[p+1].indexId,this.uid,a[p+1].arrayValue,a[p+1].directionalValue,rT,[]]));return l}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(XS)}getMinOffset(e,t){return je.mapArray(this.Ye(t),r=>this.Xe(e,r).next(a=>a||Ht())).next(XS)}}function QS(n){return Ca(n,"collectionParents")}function CC(n){return Ca(n,"indexEntries")}function iT(n){return Ca(n,"indexConfiguration")}function TC(n){return Ca(n,"indexState")}function XS(n){Mn(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;V_(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Yo(e.readTime,e.documentKey,t)}const JS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ul{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ul(e,ul.DEFAULT_COLLECTION_PERCENTILE,ul.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function eA(n,e,t){const r=n.store("mutations"),a=n.store("documentMutations"),l=[],p=IDBKeyRange.only(t.batchId);let b=0;const A=r.J({range:p},(G,K,oe)=>(b++,oe.delete()));l.push(A.next(()=>{Mn(1===b)}));const L=[];for(const G of t.mutations){const K=US(e,G.key.path,t.batchId);l.push(a.delete(K)),L.push(G.key)}return je.waitFor(l).next(()=>L)}function sT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ht();e=n.noDocument}return JSON.stringify(e).length}ul.DEFAULT_COLLECTION_PERCENTILE=10,ul.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ul.DEFAULT=new ul(41943040,ul.DEFAULT_COLLECTION_PERCENTILE,ul.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ul.DISABLED=new ul(-1,0,0);class oT{constructor(e,t,r,a){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=a,this.gn={}}static se(e,t,r,a){Mn(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new oT(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Y_(e).J({index:"userMutationsIndex",range:r},(a,l,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const l=G1(e),p=Y_(e);return p.add({}).next(b=>{Mn("number"==typeof b);const A=new BT(b,t,r,a),L=function(oe,ie,Ce){const ft=Ce.baseMutations.map(Xt=>wC(oe.ne,Xt)),yt=Ce.mutations.map(Xt=>wC(oe.ne,Xt));return{userId:ie,batchId:Ce.batchId,localWriteTimeMs:Ce.localWriteTime.toMillis(),baseMutations:ft,mutations:yt}}(this.wt,this.userId,A),G=[];let K=new vr((oe,ie)=>qn(oe.canonicalString(),ie.canonicalString()));for(const oe of a){const ie=US(this.userId,oe.key.path,b);K=K.add(oe.key.path.popLast()),G.push(p.put(L)),G.push(l.put(ie,wM))}return K.forEach(oe=>{G.push(this.indexManager.addToCollectionParentIndex(e,oe))}),e.addOnCommittedListener(()=>{this.gn[b]=A.keys()}),je.waitFor(G).next(()=>A)})}lookupMutationBatch(e,t){return Y_(e).get(t).next(r=>r?(Mn(r.userId===this.userId),gb(this.wt,r)):null)}yn(e,t){return this.gn[t]?je.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.gn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Y_(e).J({index:"userMutationsIndex",range:a},(p,b,A)=>{b.userId===this.userId&&(Mn(b.batchId>=r),l=gb(this.wt,b)),A.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Y_(e).J({index:"userMutationsIndex",range:t,reverse:!0},(a,l,p)=>{r=l.batchId,p.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Y_(e).K("userMutationsIndex",t).next(r=>r.map(a=>gb(this.wt,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=eT(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return G1(e).J({range:a},(p,b,A)=>{const[L,G,K]=p,oe=kg(G);if(L===this.userId&&t.path.isEqual(oe))return Y_(e).get(K).next(ie=>{if(!ie)throw Ht();Mn(ie.userId===this.userId),l.push(gb(this.wt,ie))});A.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vr(qn);const a=[];return t.forEach(l=>{const p=eT(this.userId,l.path),b=IDBKeyRange.lowerBound(p),A=G1(e).J({range:b},(L,G,K)=>{const[oe,ie,Ce]=L,ft=kg(ie);oe===this.userId&&l.path.isEqual(ft)?r=r.add(Ce):K.done()});a.push(A)}),je.waitFor(a).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=eT(this.userId,r),p=IDBKeyRange.lowerBound(l);let b=new vr(qn);return G1(e).J({range:p},(A,L,G)=>{const[K,oe,ie]=A,Ce=kg(oe);K===this.userId&&r.isPrefixOf(Ce)?Ce.length===a&&(b=b.add(ie)):G.done()}).next(()=>this.pn(e,b))}pn(e,t){const r=[],a=[];return t.forEach(l=>{a.push(Y_(e).get(l).next(p=>{if(null===p)throw Ht();Mn(p.userId===this.userId),r.push(gb(this.wt,p))}))}),je.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return eA(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),je.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return je.resolve();const r=IDBKeyRange.lowerBound([this.userId]),a=[];return G1(e).J({range:r},(l,p,b)=>{if(l[0]===this.userId){const A=kg(l[1]);a.push(A)}else b.done()}).next(()=>{Mn(0===a.length)})})}containsKey(e,t){return tA(e,this.userId,t)}Tn(e){return nA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tA(n,e,t){const r=eT(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let p=!1;return G1(n).J({range:l,H:!0},(b,A,L)=>{const[G,K,oe]=b;G===e&&K===a&&(p=!0),L.done()}).next(()=>p)}function Y_(n){return Ca(n,"mutations")}function G1(n){return Ca(n,"documentMutations")}function nA(n){return Ca(n,"mutationQueues")}class _b{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new _b(0)}static Rn(){return new _b(-1)}}class qM{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new _b(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Sn.fromTimestamp(new Jr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Pn(e,a)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>q1(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(Mn(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let a=0;const l=[];return q1(e).J((p,b)=>{const A=bC(b);A.sequenceNumber<=t&&null===r.get(A.targetId)&&(a++,l.push(this.removeTargetData(e,A)))}).next(()=>je.waitFor(l)).next(()=>a)}forEachTarget(e,t){return q1(e).J((r,a)=>{const l=bC(a);t(l)})}bn(e){return rA(e).get("targetGlobalKey").next(t=>(Mn(null!==t),t))}Pn(e,t){return rA(e).put("targetGlobalKey",t)}vn(e,t){return q1(e).put(zS(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ag(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return q1(e).J({range:a,index:"queryTargetsIndex"},(p,b,A)=>{const L=bC(b);xg(t,L.target)&&(l=L,A.done())}).next(()=>l)}addMatchingKeys(e,t,r){const a=[],l=Q_(e);return t.forEach(p=>{const b=pc(p.path);a.push(l.put({targetId:r,path:b})),a.push(this.referenceDelegate.addReference(e,r,p))}),je.waitFor(a)}removeMatchingKeys(e,t,r){const a=Q_(e);return je.forEach(t,l=>{const p=pc(l.path);return je.waitFor([a.delete([r,p]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=Q_(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Q_(e);let l=ke();return a.J({range:r,H:!0},(p,b,A)=>{const L=kg(p[1]),G=new Ot(L);l=l.add(G)}).next(()=>l)}containsKey(e,t){const r=pc(t.path),a=IDBKeyRange.bound([r],[Sf(r)],!1,!0);let l=0;return Q_(e).J({index:"documentTargetsIndex",H:!0,range:a},([p,b],A,L)=>{0!==p&&(l++,L.done())}).next(()=>l>0)}te(e,t){return q1(e).get(t).next(r=>r?bC(r):null)}}function q1(n){return Ca(n,"targets")}function rA(n){return Ca(n,"targetGlobal")}function Q_(n){return Ca(n,"targetDocuments")}function iA([n,e],[t,r]){const a=qn(n,t);return 0===a?qn(e,r):a}class WM{constructor(e){this.Sn=e,this.buffer=new vr(iA),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();iA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;wt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,rt.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Mf(r)?wt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Pu(r)}yield t.kn(3e5)}))}}class ZM{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return je.resolve(ao.ot);const r=new WM(t);return this.On.forEachTarget(e,a=>r.xn(a.sequenceNumber)).next(()=>this.On.Fn(e,a=>r.xn(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(wt("LruGarbageCollector","Garbage collection skipped; disabled"),je.resolve(JS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(wt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JS):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,a,l,p,b,A,L;const G=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(K=>(K>this.params.maximumSequenceNumbersToCollect?(wt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${K}`),a=this.params.maximumSequenceNumbersToCollect):a=K,p=Date.now(),this.nthSequenceNumber(e,a))).next(K=>(r=K,b=Date.now(),this.removeTargets(e,r,t))).next(K=>(l=K,A=Date.now(),this.removeOrphanedDocuments(e,r))).next(K=>(L=Date.now(),O_()<=Ml.in.DEBUG&&wt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-G}ms\n\tDetermined least recently used ${a} in `+(b-p)+`ms\n\tRemoved ${l} targets in `+(A-b)+`ms\n\tRemoved ${K} documents in `+(L-A)+`ms\nTotal Duration: ${L-G}ms`),je.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:K})))}}class YM{constructor(e,t){this.db=e,this.garbageCollector=new ZM(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,a)=>t(a))}addReference(e,t,r){return aT(e,r)}removeReference(e,t,r){return aT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return aT(e,t)}Un(e,t){return function(r,a){let l=!1;return nA(r).Y(p=>tA(r,p,a).next(b=>(b&&(l=!0),je.resolve(!b)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Ln(e,(p,b)=>{if(b<=t){const A=this.Un(e,p).next(L=>{if(!L)return l++,r.getEntry(e,p).next(()=>(r.removeEntry(p,Sn.min()),Q_(e).delete([0,pc(p.path)])))});a.push(A)}}).next(()=>je.waitFor(a)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return aT(e,t)}Ln(e,t){const r=Q_(e);let a,l=ao.ot;return r.J({index:"documentTargetsIndex"},([p,b],{path:A,sequenceNumber:L})=>{0===p?(l!==ao.ot&&t(new Ot(kg(a)),l),l=L,a=A):l=ao.ot}).next(()=>{l!==ao.ot&&t(new Ot(kg(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function aT(n,e){return Q_(n).put((r=n.currentSequenceNumber,{targetId:0,path:pc(e.path),sequenceNumber:r}));var r}class sA{constructor(){this.changes=new d(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_r.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?je.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class QM{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return wb(e).put(r)}removeEntry(e,t,r){return wb(e).delete(function(a,l){const p=a.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],tT(l),p[p.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=_r.newInvalidDocument(t);return wb(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(DC(t))},(a,l)=>{r=this.Kn(t,l)}).next(()=>r)}Gn(e,t){let r={size:0,document:_r.newInvalidDocument(t)};return wb(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(DC(t))},(a,l)=>{r={document:this.Kn(t,l),size:sT(l)}}).next(()=>r)}getEntries(e,t){let r=_();return this.Qn(e,t,(a,l)=>{const p=this.Kn(a,l);r=r.insert(a,p)}).next(()=>r)}jn(e,t){let r=_(),a=new _i(Ot.comparator);return this.Qn(e,t,(l,p)=>{const b=this.Kn(l,p);r=r.insert(l,b),a=a.insert(l,sT(p))}).next(()=>({documents:r,Wn:a}))}Qn(e,t,r){if(t.isEmpty())return je.resolve();let a=new vr(cA);t.forEach(A=>a=a.add(A));const l=IDBKeyRange.bound(DC(a.first()),DC(a.last())),p=a.getIterator();let b=p.getNext();return wb(e).J({index:"documentKeyIndex",range:l},(A,L,G)=>{const K=Ot.fromSegments([...L.prefixPath,L.collectionGroup,L.documentId]);for(;b&&cA(b,K)<0;)r(b,null),b=p.getNext();b&&b.isEqual(K)&&(r(b,L),b=p.hasNext()?p.getNext():null),b?G.q(DC(b)):G.done()}).next(()=>{for(;b;)r(b,null),b=p.hasNext()?p.getNext():null})}getAllFromCollection(e,t,r){const a=[t.popLast().toArray(),t.lastSegment(),tT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wb(e).K(IDBKeyRange.bound(a,l,!0)).next(p=>{let b=_();for(const A of p){const L=this.Kn(Ot.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);b=b.insert(L.key,L)}return b})}getAllFromCollectionGroup(e,t,r,a){let l=_();const p=uA(t,r),b=uA(t,Yo.max());return wb(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,b,!0)},(A,L,G)=>{const K=this.Kn(Ot.fromSegments(L.prefixPath.concat(L.collectionGroup,L.documentId)),L);l=l.insert(K.key,K),l.size===a&&G.done()}).next(()=>l)}newChangeBuffer(e){return new XM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return aA(e).get("remoteDocumentGlobalKey").next(t=>(Mn(!!t),t))}qn(e,t){return aA(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function FM(n,e){let t;if(e.document)t=MS(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ot.fromSegments(e.noDocument.path),a=pb(e.noDocument.readTime);t=_r.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ht();{const r=Ot.fromSegments(e.unknownDocument.path),a=pb(e.unknownDocument.version);t=_r.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(r){const a=new Jr(r[0],r[1]);return Sn.fromTimestamp(a)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Sn.min()))return r}return _r.newInvalidDocument(e)}}function oA(n){return new QM(n)}class XM extends sA{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new d(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new vr((l,p)=>qn(l.canonicalString(),p.canonicalString()));return this.changes.forEach((l,p)=>{const b=this.Hn.get(l);if(t.push(this.zn.removeEntry(e,l,b.readTime)),p.isValidDocument()){const A=HS(this.zn.wt,p);a=a.add(l.path.popLast()),r+=sT(A)-b.size,t.push(this.zn.addEntry(e,l,A))}else if(r-=b.size,this.trackRemovals){const A=HS(this.zn.wt,p.convertToNoDocument(Sn.min()));t.push(this.zn.addEntry(e,l,A))}}),a.forEach(l=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.zn.updateMetadata(e,r)),je.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:a})=>(a.forEach((l,p)=>{this.Hn.set(l,{size:p,readTime:r.get(l).readTime})}),r))}}function aA(n){return Ca(n,"remoteDocumentGlobal")}function wb(n){return Ca(n,"remoteDocumentsV14")}function DC(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function uA(n,e){const t=e.documentKey.path.toArray();return[n,tT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function cA(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=qn(t[l],r[l]),a)return a;return a=qn(t.length,r.length),a||(a=qn(t[t.length-2],r[r.length-2]),a||qn(t[t.length-1],r[r.length-1]))}class JM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class lA{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.getBaseDocument(e,t,r))).next(a=>(null!==r&&os(r.mutation,a,wa.empty(),Jr.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ke()){const a=j();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(l=>{let p=R();return l.forEach((b,A)=>{p=p.insert(b,A.overlayedDocument)}),p}))}getOverlayedDocuments(e,t){const r=j();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ke()))}populateOverlays(e,t,r){const a=[];return r.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((p,b)=>{t.set(p,b)})})}computeViews(e,t,r,a){let l=_();const p=te(),b=te();return t.forEach((A,L)=>{const G=r.get(L.key);a.has(L.key)&&(void 0===G||G.mutation instanceof Ia)?l=l.insert(L.key,L):void 0!==G&&(p.set(L.key,G.mutation.getFieldMask()),os(G.mutation,L,G.mutation.getFieldMask(),Jr.now()))}),this.recalculateAndSaveOverlays(e,l).next(A=>(A.forEach((L,G)=>p.set(L,G)),t.forEach((L,G)=>{var K;return b.set(L,new JM(G,null!==(K=p.get(L))&&void 0!==K?K:null))}),b))}recalculateAndSaveOverlays(e,t){const r=te();let a=new _i((p,b)=>p-b),l=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(p=>{for(const b of p)b.keys().forEach(A=>{const L=t.get(A);if(null===L)return;let G=r.get(A)||wa.empty();G=b.applyToLocalView(L,G),r.set(A,G);const K=(a.get(b.batchId)||ke()).add(A);a=a.insert(b.batchId,K)})}).next(()=>{const p=[],b=a.getReverseIterator();for(;b.hasNext();){const A=b.getNext(),L=A.key,G=A.value,K=q();G.forEach(oe=>{if(!l.has(oe)){const ie=Nn(t.get(oe),r.get(oe));null!==ie&&K.set(oe,ie),l=l.add(oe)}}),p.push(this.documentOverlayCache.saveOverlays(e,L,K))}return je.waitFor(p)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ot.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):V(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var a}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(l=>{const p=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):je.resolve(j());let b=-1,A=l;return p.next(L=>je.forEach(L,(G,K)=>(b<K.largestBatchId&&(b=K.largestBatchId),l.get(G)?je.resolve():this.getBaseDocument(e,G,K).next(oe=>{A=A.insert(G,oe)}))).next(()=>this.populateOverlays(e,L,l)).next(()=>this.computeViews(e,A,L,ke())).next(G=>({batchId:b,changes:P(G)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ot(t)).next(r=>{let a=R();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const a=t.collectionGroup;let l=R();return this.indexManager.getCollectionParents(e,a).next(p=>je.forEach(p,b=>{const A=(L=t,G=b.child(a),new I(G,null,L.explicitOrderBy.slice(),L.filters.slice(),L.limit,L.limitType,L.startAt,L.endAt));var L,G;return this.getDocumentsMatchingCollectionQuery(e,A,r).next(L=>{L.forEach((G,K)=>{l=l.insert(G,K)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r){let a;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(l=>(a=l,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(l=>{l.forEach((b,A)=>{const L=A.getKey();null===a.get(L)&&(a=a.insert(L,_r.newInvalidDocument(L)))});let p=R();return a.forEach((b,A)=>{const L=l.get(b);void 0!==L&&os(L.mutation,A,wa.empty(),Jr.now()),De(t,A)&&(p=p.insert(b,A))}),p})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):je.resolve(_r.newInvalidDocument(t))}}class eR{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return je.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:qs(r.createTime)}),je.resolve()}getNamedQuery(e,t){return je.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:$T(r.bundledQuery),readTime:qs(r.readTime)}),je.resolve();var r}}class tR{constructor(){this.overlays=new _i(Ot.comparator),this.Xn=new Map}getOverlay(e,t){return je.resolve(this.overlays.get(t))}getOverlays(e,t){const r=j();return je.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,l)=>{this.ie(e,t,l)}),je.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Xn.get(r);return void 0!==a&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Xn.delete(r)),je.resolve()}getOverlaysForCollection(e,t,r){const a=j(),l=t.length+1,p=new Ot(t.child("")),b=this.overlays.getIteratorFrom(p);for(;b.hasNext();){const A=b.getNext().value,L=A.getKey();if(!t.isPrefixOf(L.path))break;L.path.length===l&&A.largestBatchId>r&&a.set(A.getKey(),A)}return je.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new _i((L,G)=>L-G);const p=this.overlays.getIterator();for(;p.hasNext();){const L=p.getNext().value;if(L.getKey().getCollectionGroup()===t&&L.largestBatchId>r){let G=l.get(L.largestBatchId);null===G&&(G=j(),l=l.insert(L.largestBatchId,G)),G.set(L.getKey(),L)}}const b=j(),A=l.getIterator();for(;A.hasNext()&&(A.getNext().value.forEach((L,G)=>b.set(L,G)),!(b.size()>=a)););return je.resolve(b)}ie(e,t,r){const a=this.overlays.get(r.key);if(null!==a){const p=this.Xn.get(a.largestBatchId).delete(r.key);this.Xn.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(r.key,new jT(t,r));let l=this.Xn.get(t);void 0===l&&(l=ke(),this.Xn.set(t,l)),this.Xn.set(t,l.add(r.key))}}class GT{constructor(){this.Zn=new vr(Ta.ts),this.es=new vr(Ta.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Ta(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Ta(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new Ot(new er([])),r=new Ta(t,e),a=new Ta(t,e+1),l=[];return this.es.forEachInRange([r,a],p=>{this.rs(p),l.push(p.key)}),l}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Ot(new er([])),r=new Ta(t,e),a=new Ta(t,e+1);let l=ke();return this.es.forEachInRange([r,a],p=>{l=l.add(p.key)}),l}containsKey(e){const t=new Ta(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ta{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Ot.comparator(e.key,t.key)||qn(e.ls,t.ls)}static ns(e,t){return qn(e.ls,t.ls)||Ot.comparator(e.key,t.key)}}class nR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new vr(Ta.ts)}checkEmpty(e){return je.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,a){const l=this.fs;this.fs++;const p=new BT(l,t,r,a);this.mutationQueue.push(p);for(const b of a)this.ds=this.ds.add(new Ta(b.key,l)),this.indexManager.addToCollectionParentIndex(e,b.key.path.popLast());return je.resolve(p)}lookupMutationBatch(e,t){return je.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.ws(t+1),l=a<0?0:a;return je.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ta(t,0),a=new Ta(t,Number.POSITIVE_INFINITY),l=[];return this.ds.forEachInRange([r,a],p=>{const b=this._s(p.ls);l.push(b)}),je.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vr(qn);return t.forEach(a=>{const l=new Ta(a,0),p=new Ta(a,Number.POSITIVE_INFINITY);this.ds.forEachInRange([l,p],b=>{r=r.add(b.ls)})}),je.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;Ot.isDocumentKey(l)||(l=l.child(""));const p=new Ta(new Ot(l),0);let b=new vr(qn);return this.ds.forEachWhile(A=>{const L=A.key.path;return!!r.isPrefixOf(L)&&(L.length===a&&(b=b.add(A.ls)),!0)},p),je.resolve(this.gs(b))}gs(e){const t=[];return e.forEach(r=>{const a=this._s(r);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){Mn(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return je.forEach(t.mutations,a=>{const l=new Ta(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Ta(t,0),a=this.ds.firstAfterOrEqual(r);return je.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return je.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class rR{constructor(e){this.ps=e,this.docs=new _i(Ot.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,p=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:p}),this.size+=p-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return je.resolve(r?r.document.mutableCopy():_r.newInvalidDocument(t))}getEntries(e,t){let r=_();return t.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():_r.newInvalidDocument(a))}),je.resolve(r)}getAllFromCollection(e,t,r){let a=_();const l=new Ot(t.child("")),p=this.docs.getIteratorFrom(l);for(;p.hasNext();){const{key:b,value:{document:A}}=p.getNext();if(!t.isPrefixOf(b.path))break;b.path.length>t.length+1||V_(R1(A),r)<=0||(a=a.insert(A.key,A.mutableCopy()))}return je.resolve(a)}getAllFromCollectionGroup(e,t,r,a){Ht()}Is(e,t){return je.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new iR(this)}getSize(e){return je.resolve(this.size)}}class iR extends sA{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.zn.addEntry(e,a)):this.zn.removeEntry(r)}),je.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class sR{constructor(e){this.persistence=e,this.Ts=new d(t=>Ag(t),xg),this.lastRemoteSnapshotVersion=Sn.min(),this.highestTargetId=0,this.Es=0,this.As=new GT,this.targetCount=0,this.Rs=_b.An()}forEachTarget(e,t){return this.Ts.forEach((r,a)=>t(a)),je.resolve()}getLastRemoteSnapshotVersion(e){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return je.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),je.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new _b(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,je.resolve()}updateTargetData(e,t){return this.vn(t),je.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,je.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.Ts.forEach((p,b)=>{b.sequenceNumber<=t&&null===r.get(b.targetId)&&(this.Ts.delete(p),l.push(this.removeMatchingKeysForTargetId(e,b.targetId)),a++)}),je.waitFor(l).next(()=>a)}getTargetCount(e){return je.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return je.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),je.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(p=>{l.push(a.markPotentiallyOrphaned(e,p))}),je.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),je.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return je.resolve(r)}containsKey(e,t){return je.resolve(this.As.containsKey(t))}}class hA{constructor(e,t){this.bs={},this.overlays={},this.Ps=new ao(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new sR(this),this.indexManager=new zM,this.remoteDocumentCache=new rR(r=>this.referenceDelegate.Ss(r)),this.wt=new $S(t),this.Ds=new eR(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new nR(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){wt("MemoryPersistence","Starting transaction:",e);const a=new oR(this.Ps.next());return this.referenceDelegate.Cs(),r(a).next(l=>this.referenceDelegate.xs(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ns(e,t){return je.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class oR extends Iy{constructor(e){super(),this.currentSequenceNumber=e}}class uT{constructor(e){this.persistence=e,this.ks=new GT,this.Os=null}static Ms(e){return new uT(e)}get Fs(){if(this.Os)return this.Os;throw Ht()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),je.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),je.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),je.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(a=>this.Fs.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.Fs.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.Fs,r=>{const a=Ot.fromPath(r);return this.$s(e,a).next(l=>{l||t.removeEntry(a,Sn.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return je.or([()=>je.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class aR{constructor(e){this.wt=e}O(e,t,r,a){const l=new $_("createOrUpgrade",t);var b;r<1&&a>=1&&(e.createObjectStore("owner"),(b=e).createObjectStore("mutationQueues",{keyPath:"userId"}),b.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FS,{unique:!0}),b.createObjectStore("documentMutations"),dA(e),function(b){b.createObjectStore("remoteDocuments")}(e));let p=je.resolve();return r<3&&a>=3&&(0!==r&&(function(b){b.deleteObjectStore("targetDocuments"),b.deleteObjectStore("targets"),b.deleteObjectStore("targetGlobal")}(e),dA(e)),p=p.next(()=>function(b){const A=b.store("targetGlobal"),L={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Sn.min().toTimestamp(),targetCount:0};return A.put("targetGlobalKey",L)}(l))),r<4&&a>=4&&(0!==r&&(p=p.next(()=>function(b,A){return A.store("mutations").K().next(L=>{b.deleteObjectStore("mutations"),b.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FS,{unique:!0});const G=A.store("mutations"),K=L.map(oe=>G.put(oe));return je.waitFor(K)})}(e,l))),p=p.next(()=>{!function(b){b.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&a>=5&&(p=p.next(()=>this.Bs(l))),r<6&&a>=6&&(p=p.next(()=>(function(b){b.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(l)))),r<7&&a>=7&&(p=p.next(()=>this.Us(l))),r<8&&a>=8&&(p=p.next(()=>this.qs(e,l))),r<9&&a>=9&&(p=p.next(()=>{!function(b){b.objectStoreNames.contains("remoteDocumentChanges")&&b.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&a>=10&&(p=p.next(()=>this.Ks(l))),r<11&&a>=11&&(p=p.next(()=>{(function(b){b.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(b){b.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&a>=12&&(p=p.next(()=>{!function(b){const A=b.createObjectStore("documentOverlays",{keyPath:kM});A.createIndex("collectionPathOverlayIndex",NM,{unique:!1}),A.createIndex("collectionGroupOverlayIndex",PM,{unique:!1})}(e)})),r<13&&a>=13&&(p=p.next(()=>function(b){const A=b.createObjectStore("remoteDocumentsV14",{keyPath:bM});A.createIndex("documentKeyIndex",EM),A.createIndex("collectionGroupIndex",IM)}(e)).next(()=>this.Gs(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&a>=14&&(p=p.next(()=>this.Qs(e,l))),r<15&&a>=15&&(p=p.next(()=>function(b){b.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),b.createObjectStore("indexState",{keyPath:AM}).createIndex("sequenceNumberIndex",xM,{unique:!1}),b.createObjectStore("indexEntries",{keyPath:MM}).createIndex("documentKeyIndex",RM,{unique:!1})}(e))),p}Ls(e){let t=0;return e.store("remoteDocuments").J((r,a)=>{t+=sT(a)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(a=>je.forEach(a,l=>{const p=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",p).next(b=>je.forEach(b,A=>{Mn(A.userId===l.userId);const L=gb(this.wt,A);return eA(e,l.userId,L).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return r.J((p,b)=>{const A=new er(p),L=[0,pc(A)];l.push(t.get(L).next(G=>G?je.resolve():t.put({targetId:0,path:pc(A),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>je.waitFor(l))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:SM});const r=t.store("collectionParents"),a=new zT,l=p=>{if(a.add(p)){const b=p.lastSegment(),A=p.popLast();return r.put({collectionId:b,parent:pc(A)})}};return t.store("remoteDocuments").J({H:!0},(p,b)=>{const A=new er(p);return l(A.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([p,b,A],L)=>{const G=kg(b);return l(G.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,a)=>{const l=bC(a),p=zS(this.wt,l);return t.put(p)})}Gs(e,t){const r=t.store("remoteDocuments"),a=[];return r.J((l,p)=>{const b=t.store("remoteDocumentsV14"),A=(L=p,L.document?new Ot(er.fromString(L.document.name).popFirst(5)):L.noDocument?Ot.fromSegments(L.noDocument.path):L.unknownDocument?Ot.fromSegments(L.unknownDocument.path):Ht()).path.toArray();var L;const G={prefixPath:A.slice(0,A.length-2),collectionGroup:A[A.length-2],documentId:A[A.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};a.push(b.put(G))}).next(()=>je.waitFor(a))}Qs(e,t){const r=t.store("mutations"),a=oA(this.wt),l=new hA(uT.Ms,this.wt.ne);return r.K().next(p=>{const b=new Map;return p.forEach(A=>{var L;let G=null!==(L=b.get(A.userId))&&void 0!==L?L:ke();gb(this.wt,A).keys().forEach(K=>G=G.add(K)),b.set(A.userId,G)}),je.forEach(b,(A,L)=>{const G=new is(L),K=nT.se(this.wt,G),oe=l.getIndexManager(G),ie=oT.se(G,this.wt,oe,l.referenceDelegate);return new lA(a,ie,K,oe).recalculateAndSaveOverlaysForDocumentKeys(new UT(t,ao.ot),A).next()})})}}function dA(n){n.createObjectStore("targetDocuments",{keyPath:TM}).createIndex("documentTargetsIndex",DM,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",CM,{unique:!0}),n.createObjectStore("targetGlobal")}const qT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class WT{constructor(e,t,r,a,l,p,b,A,L,G,K=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=l,this.window=p,this.document=b,this.Ws=L,this.zs=G,this.Hs=K,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=oe=>Promise.resolve(),!WT.V())throw new gt(Ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new YM(this,a),this.ei=t+"main",this.wt=new $S(A),this.ni=new sl(this.ei,this.Hs,new aR(this.wt)),this.Vs=new qM(this.referenceDelegate,this.wt),this.remoteDocumentCache=oA(this.wt),this.Ds=new UM,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===G&&Bi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new gt(Ge.FAILED_PRECONDITION,qT);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new ao(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,rt.Z)(function*(a){if(t.started)return e(a)});return function(a){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,rt.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,rt.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Mf(e))return wt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return wt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return SC(e).get("owner").next(t=>je.resolve(this.di(t)))}_i(e){return cT(e).delete(this.clientId)}wi(){var e=this;return(0,rt.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const a=Ca(r,"clientMetadata");return a.K().next(l=>{const p=e.gi(l,18e5),b=l.filter(A=>-1===p.indexOf(A));return je.forEach(b,A=>a.delete(A.clientId)).next(()=>b)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?je.resolve(!0):SC(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new gt(Ge.FAILED_PRECONDITION,qT);return!1}}return!(!this.networkEnabled||!this.inForeground)||cT(e).K().next(r=>void 0===this.gi(r,5e3).find(a=>{if(this.clientId!==a.clientId){const p=!this.inForeground&&a.inForeground,b=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||p&&b)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&wt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,rt.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new UT(t,ao.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>cT(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return oT.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new GM(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return nT.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){wt("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",l=15===(p=this.Hs)?LM:14===p?jS:13===p?VS:12===p?OM:11===p?BS:void Ht();var p;let b;return this.ni.runTransaction(e,a,l,A=>(b=new UT(A,this.Ps?this.Ps.next():ao.ot),"readwrite-primary"===t?this.ai(b).next(L=>!!L||this.hi(b)).next(L=>{if(!L)throw Bi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new gt(Ge.FAILED_PRECONDITION,j_);return r(b)}).next(L=>this.fi(b).next(()=>L)):this.bi(b).next(()=>r(b)))).then(A=>(b.raiseOnCommittedEvent(),A))}bi(e){return SC(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new gt(Ge.FAILED_PRECONDITION,qT)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return SC(e).put("owner",t)}static V(){return sl.V()}li(e){const t=SC(e);return t.get("owner").next(r=>this.di(r)?(wt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):je.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Bi(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,Tn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return wt("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Bi("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Bi("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function SC(n){return Ca(n,"owner")}function cT(n){return Ca(n,"clientMetadata")}function KT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class ZT{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=a}static Vi(e,t){let r=ke(),a=ke();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new ZT(e,t.fromCache,r,a)}}class fA{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,a){return this.Ci(e,t).next(l=>l||this.xi(e,t,a,r)).next(l=>l||this.Ni(e,t))}Ci(e,t){return je.resolve(null)}xi(e,t,r,a){return function O(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||a.isEqual(Sn.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(l=>{const p=this.ki(t,l);return this.Oi(t,p,r,a)?this.Ni(e,t):(O_()<=Ml.in.DEBUG&&wt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ee(t)),this.Mi(e,p,t,ib(a,-1)))})}ki(e,t){let r=new vr(Se(e));return t.forEach((a,l)=>{De(e,l)&&(r=r.add(l))}),r}Oi(e,t,r,a){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ni(e,t){return O_()<=Ml.in.DEBUG&&wt("QueryEngine","Using full collection scan to execute query:",ee(t)),this.Di.getDocumentsMatchingQuery(e,t,Yo.min())}Mi(e,t,r,a){return this.Di.getDocumentsMatchingQuery(e,r,a).next(l=>(t.forEach(p=>{l=l.insert(p.key,p)}),l))}}class uR{constructor(e,t,r,a){this.persistence=e,this.Fi=t,this.wt=a,this.$i=new _i(qn),this.Bi=new d(l=>Ag(l),xg),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lA(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function pA(n,e,t,r){return new uR(n,e,t,r)}function gA(n,e){return YT.apply(this,arguments)}function YT(){return YT=(0,rt.Z)(function*(n,e){const t=kt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const p=[],b=[];let A=ke();for(const L of a){p.push(L.batchId);for(const G of L.mutations)A=A.add(G.key)}for(const L of l){b.push(L.batchId);for(const G of L.mutations)A=A.add(G.key)}return t.localDocuments.getDocuments(r,A).next(L=>({Ki:L,removedBatchIds:p,addedBatchIds:b}))})})}),YT.apply(this,arguments)}function cR(n,e){const t=kt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),l=t.Ui.newChangeBuffer({trackRemovals:!0});return function(p,b,A,L){const G=A.batch,K=G.keys();let oe=je.resolve();return K.forEach(ie=>{oe=oe.next(()=>L.getEntry(b,ie)).next(Ce=>{const ft=A.docVersions.get(ie);Mn(null!==ft),Ce.version.compareTo(ft)<0&&(G.applyToRemoteDocument(Ce,A),Ce.isValidDocument()&&(Ce.setReadTime(A.commitVersion),L.addEntry(Ce)))})}),oe.next(()=>p.mutationQueue.removeMutationBatch(b,G))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(p){let b=ke();for(let A=0;A<p.mutationResults.length;++A)p.mutationResults[A].transformResults.length>0&&(b=b.add(p.batch.mutations[A].key));return b}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function mA(n){const e=kt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function lR(n,e){const t=kt(n),r=e.snapshotVersion;let a=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const p=t.Ui.newChangeBuffer({trackRemovals:!0});a=t.$i;const b=[];e.targetChanges.forEach((G,K)=>{const oe=a.get(K);if(!oe)return;b.push(t.Vs.removeMatchingKeys(l,G.removedDocuments,K).next(()=>t.Vs.addMatchingKeys(l,G.addedDocuments,K)));let ie=oe.withSequenceNumber(l.currentSequenceNumber);var Ce,ft,yt;e.targetMismatches.has(K)?ie=ie.withResumeToken(As.EMPTY_BYTE_STRING,Sn.min()).withLastLimboFreeSnapshotVersion(Sn.min()):G.resumeToken.approximateByteSize()>0&&(ie=ie.withResumeToken(G.resumeToken,r)),a=a.insert(K,ie),ft=ie,yt=G,(0===(Ce=oe).resumeToken.approximateByteSize()||ft.snapshotVersion.toMicroseconds()-Ce.snapshotVersion.toMicroseconds()>=3e8||yt.addedDocuments.size+yt.modifiedDocuments.size+yt.removedDocuments.size>0)&&b.push(t.Vs.updateTargetData(l,ie))});let A=_(),L=ke();if(e.documentUpdates.forEach(G=>{e.resolvedLimboDocuments.has(G)&&b.push(t.persistence.referenceDelegate.updateLimboDocument(l,G))}),b.push(yA(l,p,e.documentUpdates).next(G=>{A=G.Gi,L=G.Qi})),!r.isEqual(Sn.min())){const G=t.Vs.getLastRemoteSnapshotVersion(l).next(K=>t.Vs.setTargetsMetadata(l,l.currentSequenceNumber,r));b.push(G)}return je.waitFor(b).next(()=>p.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,A,L)).next(()=>A)}).then(l=>(t.$i=a,l))}function yA(n,e,t){let r=ke(),a=ke();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let p=_();return t.forEach((b,A)=>{const L=l.get(b);A.isFoundDocument()!==L.isFoundDocument()&&(a=a.add(b)),A.isNoDocument()&&A.version.isEqual(Sn.min())?(e.removeEntry(b,A.readTime),p=p.insert(b,A)):!L.isValidDocument()||A.version.compareTo(L.version)>0||0===A.version.compareTo(L.version)&&L.hasPendingWrites?(e.addEntry(A),p=p.insert(b,A)):wt("LocalStore","Ignoring outdated watch update for ",b,". Current version:",L.version," Watch version:",A.version)}),{Gi:p,Qi:a}})}function hR(n,e){const t=kt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function W1(n,e){const t=kt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Vs.getTargetData(r,e).next(l=>l?(a=l,je.resolve(a)):t.Vs.allocateTargetId(r).next(p=>(a=new Z_(e,p,0,r.currentSequenceNumber),t.Vs.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.$i.get(r.targetId);return(null===a||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function K1(n,e,t){return QT.apply(this,arguments)}function QT(){return QT=(0,rt.Z)(function*(n,e,t){const r=kt(n),a=r.$i.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,p=>r.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!Mf(p))throw p;wt("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}r.$i=r.$i.remove(e),r.Bi.delete(a.target)}),QT.apply(this,arguments)}function lT(n,e,t){const r=kt(n);let a=Sn.min(),l=ke();return r.persistence.runTransaction("Execute query","readonly",p=>function(b,A,L){const G=kt(b),K=G.Bi.get(L);return void 0!==K?je.resolve(G.$i.get(K)):G.Vs.getTargetData(A,L)}(r,p,z(e)).next(b=>{if(b)return a=b.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(p,b.targetId).next(A=>{l=A})}).next(()=>r.Fi.getDocumentsMatchingQuery(p,e,t?a:Sn.min(),t?l:ke())).next(b=>(wA(r,Oe(e),b),{documents:b,ji:l})))}function vA(n,e){const t=kt(n),r=kt(t.Vs),a=t.$i.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>r.te(l,e).next(p=>p?p.target:null))}function _A(n,e){const t=kt(n),r=t.Li.get(e)||Sn.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Ui.getAllFromCollectionGroup(a,e,ib(r,-1),Number.MAX_SAFE_INTEGER)).then(a=>(wA(t,e,a),a))}function wA(n,e,t){let r=Sn.min();t.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.Li.set(e,r)}function XT(){return XT=(0,rt.Z)(function*(n,e,t,r){const a=kt(n);let l=ke(),p=_();for(const L of t){const G=e.Wi(L.metadata.name);L.document&&(l=l.add(G));const K=e.zi(L);K.setReadTime(e.Hi(L.metadata.readTime)),p=p.insert(G,K)}const b=a.Ui.newChangeBuffer({trackRemovals:!0}),A=yield W1(a,(L=r,z(k(er.fromString(`__bundle__/docs/${L}`)))));var L;return a.persistence.runTransaction("Apply bundle documents","readwrite",L=>yA(L,b,p).next(G=>(b.apply(L),G)).next(G=>a.Vs.removeMatchingKeysForTargetId(L,A.targetId).next(()=>a.Vs.addMatchingKeys(L,l,A.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(L,G.Gi,G.Qi)).next(()=>G.Gi)))}),XT.apply(this,arguments)}function fR(n,e){return JT.apply(this,arguments)}function JT(){return JT=(0,rt.Z)(function*(n,e,t=ke()){const r=yield W1(n,z($T(e.bundledQuery))),a=kt(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const p=qs(e.readTime);if(r.snapshotVersion.compareTo(p)>=0)return a.Ds.saveNamedQuery(l,e);const b=r.withResumeToken(As.EMPTY_BYTE_STRING,p);return a.$i=a.$i.insert(b.targetId,b),a.Vs.updateTargetData(l,b).next(()=>a.Vs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>a.Vs.addMatchingKeys(l,t,r.targetId)).next(()=>a.Ds.saveNamedQuery(l,e))})}),JT.apply(this,arguments)}function bA(n,e){return`firestore_clients_${n}_${e}`}function EA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function eD(n,e){return`firestore_targets_${n}_${e}`}class hT{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Ji(e,t,r){const a=JSON.parse(r);let l,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(l=new gt(a.error.code,a.error.message))),p?new hT(e,t,a.state,l):(Bi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class AC{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let a,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(a=new gt(r.error.code,r.error.message))),l?new AC(e,r.state,a):(Bi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let a="object"==typeof r&&r.activeTargetIds instanceof Array,l=Pt();for(let p=0;a&&p<r.activeTargetIds.length;++p)a=G_(r.activeTargetIds[p]),l=l.add(r.activeTargetIds[p]);return a?new dT(e,l):(Bi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class tD{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new tD(t.clientId,t.onlineState):(Bi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class nD{constructor(){this.activeTargetIds=Pt()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rD{constructor(e,t,r,a,l){this.window=e,this.js=t,this.persistenceKey=r,this.tr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new _i(qn),this.started=!1,this.ir=[];const p=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.rr=bA(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new nD),this.cr=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(b){return`firestore_bundle_loaded_v2_${b}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,rt.Z)(function*(){const t=yield e.syncEngine.Ri();for(const a of t){if(a===e.tr)continue;const l=e.getItem(bA(e.persistenceKey,a));if(l){const p=dT.Ji(a,l);p&&(e.sr=e.sr.insert(p.clientId,p))}}e._r();const r=e.storage.getItem(e.lr);if(r){const a=e.wr(r);a&&e.mr(a)}for(const a of e.ir)e.nr(a);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(eD(this.persistenceKey,e));if(r){const a=AC.Ji(e,r);a&&(t=a.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(eD(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.pr(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return wt("SharedClientState","READ",e,t),t}setItem(e,t){wt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){wt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(wt("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Bi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,rt.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const a=t.Rr(r.key);return t.br(a,null)}{const a=t.Pr(r.key,r.newValue);if(a)return t.br(a.clientId,a)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const a=t.vr(r.key,r.newValue);if(a)return t.Vr(a)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const a=t.Sr(r.key,r.newValue);if(a)return t.Dr(a)}}else if(r.key===t.lr){if(null!==r.newValue){const a=t.wr(r.newValue);if(a)return t.mr(a)}}else if(r.key===t.ur){const a=function(l){let p=ao.ot;if(null!=l)try{const b=JSON.parse(l);Mn("number"==typeof b),p=b}catch(b){Bi("SharedClientState","Failed to read sequence number from WebStorage",b)}return p}(r.newValue);a!==ao.ot&&t.sequenceNumberHandler(a)}else if(r.key===t.dr){const a=t.Cr(r.newValue);yield Promise.all(a.map(l=>t.syncEngine.Nr(l)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const a=new hT(this.currentUser,e,t,r),l=EA(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Yi())}pr(e){const t=EA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const a=eD(this.persistenceKey,e),l=new AC(e,t,r);this.setItem(a,l.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return dT.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),a=Number(r[1]);return hT.Ji(new is(void 0!==r[2]?r[2]:null),a,t)}Sr(e,t){const r=this.hr.exec(e),a=Number(r[1]);return AC.Ji(a,t)}wr(e){return tD.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,rt.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);wt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),a=this.gr(this.sr),l=this.gr(r),p=[],b=[];return l.forEach(A=>{a.has(A)||p.push(A)}),a.forEach(A=>{l.has(A)||b.push(A)}),this.syncEngine.Mr(p,b).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Pt();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class IA{constructor(){this.Fr=new nD,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new nD,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pR{Br(e){}shutdown(){}}class CA{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){wt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){wt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const gR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class mR{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class yR extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,a,l){const p=this.oo(e,t);wt("RestConnection","Sending: ",p,r);const b={};return this.uo(b,a,l),this.co(e,p,b,r).then(A=>(wt("RestConnection","Received: ",A),A),A=>{throw wg("RestConnection",`${e} failed with error: `,A,"url: ",p,"request:",r),A})}ao(e,t,r,a,l,p){return this.ro(e,t,r,a,l)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Df,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),r&&r.headers.forEach((a,l)=>e[l]=a)}oo(e,t){return`${this.so}/v1/${t}:${gR[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,a){return new Promise((l,p)=>{const b=new N_;b.listenOnce(oC.COMPLETE,()=>{try{switch(b.getLastErrorCode()){case tb.NO_ERROR:const L=b.getResponseJson();wt("Connection","XHR received:",JSON.stringify(L)),l(L);break;case tb.TIMEOUT:wt("Connection",'RPC "'+e+'" timed out'),p(new gt(Ge.DEADLINE_EXCEEDED,"Request time out"));break;case tb.HTTP_ERROR:const G=b.getStatus();if(wt("Connection",'RPC "'+e+'" failed with status:',G,"response text:",b.getResponseText()),G>0){const K=b.getResponseJson().error;if(K&&K.status&&K.message){const oe=function(ie){const Ce=ie.toLowerCase().replace(/_/g,"-");return Object.values(Ge).indexOf(Ce)>=0?Ce:Ge.UNKNOWN}(K.status);p(new gt(oe,K.message))}else p(new gt(Ge.UNKNOWN,"Server responded with status "+b.getStatus()))}else p(new gt(Ge.UNAVAILABLE,"Connection failed."));break;default:Ht()}}finally{wt("Connection",'RPC "'+e+'" completed.')}});const A=JSON.stringify(a);b.send(t,"POST",A,r,15)})}ho(e,t,r){const a=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=eb(),p=wy(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(b.xmlHttpFactory=new S1({})),this.uo(b.initMessageHeaders,t,r),(0,Tn.uI)()||(0,Tn.b$)()||(0,Tn.d)()||(0,Tn.w1)()||(0,Tn.Mn)()||(0,Tn.ru)()||(b.httpHeadersOverwriteParam="$httpHeaders");const A=a.join("");wt("Connection","Creating WebChannel: "+A,b);const L=l.createWebChannel(A,b);let G=!1,K=!1;const oe=new mR({jr:Ce=>{K?wt("Connection","Not sending because WebChannel is closed:",Ce):(G||(wt("Connection","Opening WebChannel transport."),L.open(),G=!0),wt("Connection","WebChannel sending:",Ce),L.send(Ce))},Wr:()=>L.close()}),ie=(Ce,ft,yt)=>{Ce.listen(ft,Xt=>{try{yt(Xt)}catch(At){setTimeout(()=>{throw At},0)}})};return ie(L,_g.EventType.OPEN,()=>{K||wt("Connection","WebChannel transport opened.")}),ie(L,_g.EventType.CLOSE,()=>{K||(K=!0,wt("Connection","WebChannel transport closed"),oe.eo())}),ie(L,_g.EventType.ERROR,Ce=>{K||(K=!0,wg("Connection","WebChannel transport errored:",Ce),oe.eo(new gt(Ge.UNAVAILABLE,"The operation could not be completed")))}),ie(L,_g.EventType.MESSAGE,Ce=>{var ft;if(!K){const yt=Ce.data[0];Mn(!!yt);const Xt=yt,At=Xt.error||(null===(ft=Xt[0])||void 0===ft?void 0:ft.error);if(At){wt("Connection","WebChannel received error:",At);const Zt=At.status;let zt=function(yn){const hr=lo[yn];if(void 0!==hr)return c(hr)}(Zt),ln=At.message;void 0===zt&&(zt=Ge.INTERNAL,ln="Unknown error status: "+Zt+" with message "+At.message),K=!0,oe.eo(new gt(zt,ln)),L.close()}else wt("Connection","WebChannel received:",yt),oe.no(yt)}}),ie(p,aC.STAT_EVENT,Ce=>{Ce.stat===D1.PROXY?wt("Connection","Detected buffering proxy"):Ce.stat===D1.NOPROXY&&wt("Connection","Detected no buffering proxy")}),setTimeout(()=>{oe.Zr()},0),oe}}function TA(){return"undefined"!=typeof window?window:null}function fT(){return"undefined"!=typeof document?document:null}function xC(n){return new mC(n,!0)}class iD{constructor(e,t,r=1e3,a=1.5,l=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=a,this._o=l,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),a=Math.max(0,t-r);a>0&&wt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,a,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class DA{constructor(e,t,r,a,l,p,b,A){this.js=e,this.Ao=r,this.Ro=a,this.bo=l,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=b,this.listener=A,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new iD(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,rt.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,rt.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,rt.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===Ge.RESOURCE_EXHAUSTED?(Bi(t.toString()),Bi("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===Ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.Po===t&&this.Uo(r,a)},r=>{e(()=>{const a=new gt(Ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(a)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(a=>{r(()=>this.qo(a))}),this.stream.onMessage(a=>{r(()=>this.onMessage(a))})}xo(){var e=this;this.state=5,this.So.Io((0,rt.Z)(function*(){e.state=0,e.start()}))}qo(e){return wt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(wt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vR extends DA{constructor(e,t,r,a,l,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,p),this.wt=l}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function hM(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(A=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===A?1:"REMOVE"===A?2:"CURRENT"===A?3:"RESET"===A?4:Ht(),a=e.targetChange.targetIds||[],l=function(A,L){return A.dt?(Mn(void 0===L||"string"==typeof L),As.fromBase64String(L||"")):(Mn(void 0===L||L instanceof Uint8Array),As.fromUint8Array(L||new Uint8Array))}(n,e.targetChange.resumeToken),p=e.targetChange.cause,b=p&&function(A){const L=void 0===A.code?Ge.UNKNOWN:c(A.code);return new gt(L,A.message||"")}(p);t=new Cr(r,a,l,b||null)}else if("documentChange"in e){const r=e.documentChange,a=Rg(n,r.document.name),l=qs(r.document.updateTime),p=new xi({mapValue:{fields:r.document.fields}}),b=_r.newFoundDocument(a,l,p);t=new mn(r.targetIds||[],r.removedTargetIds||[],b.key,b)}else if("documentDelete"in e){const r=e.documentDelete,a=Rg(n,r.document),l=r.readTime?qs(r.readTime):Sn.min(),p=_r.newNoDocument(a,l);t=new mn([],r.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const r=e.documentRemove,a=Rg(n,r.document);t=new mn([],r.removedTargetIds||[],a,null)}else{if(!("filter"in e))return Ht();{const r=e.filter,l=new TS(r.count||0);t=new rr(r.targetId,l)}}var A;return t}(this.wt,e),r=function(a){if(!("targetChange"in a))return Sn.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Sn.min():l.readTime?qs(l.readTime):Sn.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=_C(this.wt),t.addTarget=function(a,l){let p;const b=l.target;return p=Py(b)?{documents:RS(a,b)}:{query:kS(a,b)},p.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?p.resumeToken=$1(a,l.resumeToken):l.snapshotVersion.compareTo(Sn.min())>0&&(p.readTime=Fy(a,l.snapshotVersion.toTimestamp())),p}(this.wt,e);const r=function fM(n,e){const t=function(r,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ht()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=_C(this.wt),t.removeTarget=e,this.Mo(t)}}class _R extends DA{constructor(e,t,r,a,l,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,p),this.wt=l,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Mn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function dM(n,e){return n&&n.length>0?(Mn(void 0!==e),n.map(t=>function(r,a){let l=qs(r.updateTime?r.updateTime:a);return l.isEqual(Sn.min())&&(l=qs(a)),new Br(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=qs(e.commitTime);return this.listener.Jo(r,t)}return Mn(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=_C(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>wC(this.wt,r))};this.Mo(t)}}class wR extends class{}{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=a,this.Zo=!1}tu(){if(this.Zo)throw new gt(Ge.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.bo.ro(e,t,r,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===Ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new gt(Ge.UNKNOWN,a.toString())})}ao(e,t,r,a){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,p])=>this.bo.ao(e,t,r,l,p,a)).catch(l=>{throw"FirebaseError"===l.name?(l.code===Ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new gt(Ge.UNKNOWN,l.toString())})}terminate(){this.Zo=!0}}class bR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Bi(t),this.su=!1):wt("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class ER{constructor(e,t,r,a,l){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=l,this.du.Br(b=>{r.enqueueAndForget((0,rt.Z)(function*(){var A;X_(p)&&(wt("RemoteStore","Restarting streams for network reachability change."),yield(A=(0,rt.Z)(function*(L){const G=kt(L);G.lu.add(4),yield Z1(G),G._u.set("Unknown"),G.lu.delete(4),yield MC(G)}),function(L){return A.apply(this,arguments)})(p))}))}),this._u=new bR(r,a)}}function MC(n){return sD.apply(this,arguments)}function sD(){return sD=(0,rt.Z)(function*(n){if(X_(n))for(const e of n.fu)yield e(!0)}),sD.apply(this,arguments)}function Z1(n){return oD.apply(this,arguments)}function oD(){return oD=(0,rt.Z)(function*(n){for(const e of n.fu)yield e(!1)}),oD.apply(this,arguments)}function pT(n,e){const t=kt(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),cD(t)?uD(t):Q1(t).Co()&&aD(t,e))}function RC(n,e){const t=kt(n),r=Q1(t);t.hu.delete(e),r.Co()&&SA(t,e),0===t.hu.size&&(r.Co()?r.ko():X_(t)&&t._u.set("Unknown"))}function aD(n,e){n.wu.Nt(e.targetId),Q1(n).Qo(e)}function SA(n,e){n.wu.Nt(e),Q1(n).jo(e)}function uD(n){n.wu=new Ly({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),Q1(n).start(),n._u.iu()}function cD(n){return X_(n)&&!Q1(n).Do()&&n.hu.size>0}function X_(n){return 0===kt(n).lu.size}function AA(n){n.wu=void 0}function IR(n){return lD.apply(this,arguments)}function lD(){return lD=(0,rt.Z)(function*(n){n.hu.forEach((e,t)=>{aD(n,e)})}),lD.apply(this,arguments)}function CR(n,e){return hD.apply(this,arguments)}function hD(){return hD=(0,rt.Z)(function*(n,e){AA(n),cD(n)?(n._u.uu(e),uD(n)):n._u.set("Unknown")}),hD.apply(this,arguments)}function TR(n,e,t){return dD.apply(this,arguments)}function dD(){return dD=(0,rt.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof Cr&&2===e.state&&e.cause)try{yield(r=(0,rt.Z)(function*(a,l){const p=l.cause;for(const b of l.targetIds)a.hu.has(b)&&(yield a.remoteSyncer.rejectListen(b,p),a.hu.delete(b),a.wu.removeTarget(b))}),function(a,l){return r.apply(this,arguments)})(n,e)}catch(r){wt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield gT(n,r)}else if(e instanceof mn?n.wu.Ut(e):e instanceof rr?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Sn.min()))try{const r=yield mA(n.localStore);t.compareTo(r)>=0&&(yield function(a,l){const p=a.wu.Yt(l);return p.targetChanges.forEach((b,A)=>{if(b.resumeToken.approximateByteSize()>0){const L=a.hu.get(A);L&&a.hu.set(A,L.withResumeToken(b.resumeToken,l))}}),p.targetMismatches.forEach(b=>{const A=a.hu.get(b);if(!A)return;a.hu.set(b,A.withResumeToken(As.EMPTY_BYTE_STRING,A.snapshotVersion)),SA(a,b);const L=new Z_(A.target,b,1,A.sequenceNumber);aD(a,L)}),a.remoteSyncer.applyRemoteEvent(p)}(n,t))}catch(r){wt("RemoteStore","Failed to raise snapshot:",r),yield gT(n,r)}var r}),dD.apply(this,arguments)}function gT(n,e,t){return fD.apply(this,arguments)}function fD(){return fD=(0,rt.Z)(function*(n,e,t){if(!Mf(e))throw e;n.lu.add(1),yield Z1(n),n._u.set("Offline"),t||(t=()=>mA(n.localStore)),n.asyncQueue.enqueueRetryable((0,rt.Z)(function*(){wt("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield MC(n)}))}),fD.apply(this,arguments)}function xA(n,e){return e().catch(t=>gT(n,t,e))}function Y1(n){return pD.apply(this,arguments)}function pD(){return pD=(0,rt.Z)(function*(n){const e=kt(n),t=J_(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;DR(e);)try{const a=yield hR(e.localStore,r);if(null===a){0===e.au.length&&t.ko();break}r=a.batchId,SR(e,a)}catch(a){yield gT(e,a)}MA(e)&&RA(e)}),pD.apply(this,arguments)}function DR(n){return X_(n)&&n.au.length<10}function SR(n,e){n.au.push(e);const t=J_(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function MA(n){return X_(n)&&!J_(n).Do()&&n.au.length>0}function RA(n){J_(n).start()}function AR(n){return gD.apply(this,arguments)}function gD(){return gD=(0,rt.Z)(function*(n){J_(n).Xo()}),gD.apply(this,arguments)}function xR(n){return mD.apply(this,arguments)}function mD(){return mD=(0,rt.Z)(function*(n){const e=J_(n);for(const t of n.au)e.Ho(t.mutations)}),mD.apply(this,arguments)}function MR(n,e,t){return yD.apply(this,arguments)}function yD(){return yD=(0,rt.Z)(function*(n,e,t){const r=n.au.shift(),a=VT.from(r,e,t);yield xA(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield Y1(n)}),yD.apply(this,arguments)}function RR(n,e){return vD.apply(this,arguments)}function vD(){return vD=(0,rt.Z)(function*(n,e){var t;e&&J_(n).zo&&(yield(t=(0,rt.Z)(function*(r,a){if(o(l=a.code)&&l!==Ge.ABORTED){const p=r.au.shift();J_(r).No(),yield xA(r,()=>r.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield Y1(r)}var l}),function(r,a){return t.apply(this,arguments)})(n,e)),MA(n)&&RA(n)}),vD.apply(this,arguments)}function kA(n,e){return _D.apply(this,arguments)}function _D(){return _D=(0,rt.Z)(function*(n,e){const t=kt(n);t.asyncQueue.verifyOperationInProgress(),wt("RemoteStore","RemoteStore received new credentials");const r=X_(t);t.lu.add(3),yield Z1(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield MC(t)}),_D.apply(this,arguments)}function wD(n,e){return bD.apply(this,arguments)}function bD(){return bD=(0,rt.Z)(function*(n,e){const t=kt(n);e?(t.lu.delete(2),yield MC(t)):e||(t.lu.add(2),yield Z1(t),t._u.set("Unknown"))}),bD.apply(this,arguments)}function Q1(n){return n.mu||(n.mu=function(e,t,r){const a=kt(e);return a.tu(),new vR(t,a.bo,a.authCredentials,a.appCheckCredentials,a.wt,r)}(n.datastore,n.asyncQueue,{zr:IR.bind(null,n),Jr:CR.bind(null,n),Go:TR.bind(null,n)}),n.fu.push(function(){var e=(0,rt.Z)(function*(t){t?(n.mu.No(),cD(n)?uD(n):n._u.set("Unknown")):(yield n.mu.stop(),AA(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function J_(n){return n.gu||(n.gu=function(e,t,r){const a=kt(e);return a.tu(),new _R(t,a.bo,a.authCredentials,a.appCheckCredentials,a.wt,r)}(n.datastore,n.asyncQueue,{zr:AR.bind(null,n),Jr:RR.bind(null,n),Yo:xR.bind(null,n),Jo:MR.bind(null,n)}),n.fu.push(function(){var e=(0,rt.Z)(function*(t){t?(n.gu.No(),yield Y1(n)):(yield n.gu.stop(),n.au.length>0&&(wt("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class ED{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,r,a,l){const p=Date.now()+r,b=new ED(e,t,p,a,l);return b.start(r),b}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gt(Ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function X1(n,e){if(Bi("AsyncQueue",`${e}: ${n}`),Mf(n))return new gt(Ge.UNAVAILABLE,`${e}: ${n}`);throw n}class J1{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ot.comparator(t.key,r.key):(t,r)=>Ot.comparator(t.key,r.key),this.keyedMap=R(),this.sortedSet=new _i(this.comparator)}static emptySet(e){return new J1(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof J1)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new J1;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class NA{constructor(){this.yu=new _i(Ot.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Ht():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class eI{constructor(e,t,r,a,l,p,b,A){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=p,this.syncStateChanged=b,this.excludesMetadataChanges=A}static fromInitialDocuments(e,t,r,a){const l=[];return t.forEach(p=>{l.push({type:0,doc:p})}),new eI(e,t,J1.emptySet(t),l,r,a,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&X(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class kR{constructor(){this.Iu=void 0,this.listeners=[]}}class NR{constructor(){this.queries=new d(e=>he(e),X),this.onlineState="Unknown",this.Tu=new Set}}function ID(n,e){return CD.apply(this,arguments)}function CD(){return CD=(0,rt.Z)(function*(n,e){const t=kt(n),r=e.query;let a=!1,l=t.queries.get(r);if(l||(a=!0,l=new kR),a)try{l.Iu=yield t.onListen(r)}catch(p){const b=X1(p,`Initialization of query '${ee(e.query)}' failed`);return void e.onError(b)}t.queries.set(r,l),l.listeners.push(e),e.Eu(t.onlineState),l.Iu&&e.Au(l.Iu)&&SD(t)}),CD.apply(this,arguments)}function TD(n,e){return DD.apply(this,arguments)}function DD(){return DD=(0,rt.Z)(function*(n,e){const t=kt(n),r=e.query;let a=!1;const l=t.queries.get(r);if(l){const p=l.listeners.indexOf(e);p>=0&&(l.listeners.splice(p,1),a=0===l.listeners.length)}if(a)return t.queries.delete(r),t.onUnlisten(r)}),DD.apply(this,arguments)}function PR(n,e){const t=kt(n);let r=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const b of p.listeners)b.Au(a)&&(r=!0);p.Iu=a}}r&&SD(t)}function OR(n,e,t){const r=kt(n),a=r.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);r.queries.delete(e)}function SD(n){n.Tu.forEach(e=>{e.next()})}class AD{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)3!==a.type&&r.push(a);e=new eI(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=eI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class LR{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class PA{constructor(e){this.wt=e}Wi(e){return Rg(this.wt,e)}zi(e){return e.metadata.exists?MS(this.wt,e.document,!1):_r.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return qs(e)}}class FR{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=OA(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=er.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new PA(this.wt);for(const a of e)if(a.metadata.queries){const l=r.Wi(a.metadata.name);for(const p of a.metadata.queries){const b=(t.get(p)||ke()).add(l);t.set(p,b)}}return t}complete(){var e=this;return(0,rt.Z)(function*(){const t=yield function dR(n,e,t,r){return XT.apply(this,arguments)}(e.localStore,new PA(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const a of e.queries)yield fR(e.localStore,a,r.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function OA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class LA{constructor(e){this.key=e}}class FA{constructor(e){this.key=e}}class UA{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=ke(),this.mutatedKeys=ke(),this.Lu=Se(e),this.Uu=new J1(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new NA,a=t?t.Uu:this.Uu;let l=t?t.mutatedKeys:this.mutatedKeys,p=a,b=!1;const A="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,L="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((G,K)=>{const oe=a.get(G),ie=De(this.query,K)?K:null,Ce=!!oe&&this.mutatedKeys.has(oe.key),ft=!!ie&&(ie.hasLocalMutations||this.mutatedKeys.has(ie.key)&&ie.hasCommittedMutations);let yt=!1;oe&&ie?oe.data.isEqual(ie.data)?Ce!==ft&&(r.track({type:3,doc:ie}),yt=!0):this.Qu(oe,ie)||(r.track({type:2,doc:ie}),yt=!0,(A&&this.Lu(ie,A)>0||L&&this.Lu(ie,L)<0)&&(b=!0)):!oe&&ie?(r.track({type:0,doc:ie}),yt=!0):oe&&!ie&&(r.track({type:1,doc:oe}),yt=!0,(A||L)&&(b=!0)),yt&&(ie?(p=p.add(ie),l=ft?l.add(G):l.delete(G)):(p=p.delete(G),l=l.delete(G)))}),null!==this.query.limit)for(;p.size>this.query.limit;){const G="F"===this.query.limitType?p.last():p.first();p=p.delete(G.key),l=l.delete(G.key),r.track({type:1,doc:G})}return{Uu:p,Gu:r,Oi:b,mutatedKeys:l}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const a=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const l=e.Gu.pu();l.sort((L,G)=>function(K,oe){const ie=Ce=>{switch(Ce){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ht()}};return ie(K)-ie(oe)}(L.type,G.type)||this.Lu(L.doc,G.doc)),this.ju(r);const p=t?this.Wu():[],b=0===this.Bu.size&&this.current?1:0,A=b!==this.$u;return this.$u=b,0!==l.length||A?{snapshot:new eI(this.query,e.Uu,a,l,e.mutatedKeys,0===b,A,!1),zu:p}:{zu:p}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new NA,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=ke(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new FA(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new LA(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=ke();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return eI.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class UR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class BR{constructor(e){this.key=e,this.Xu=!1}}class VR{constructor(e,t,r,a,l,p){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=p,this.Zu={},this.tc=new d(b=>he(b),X),this.ec=new Map,this.nc=new Set,this.sc=new _i(Ot.comparator),this.ic=new Map,this.rc=new GT,this.oc={},this.uc=new Map,this.cc=_b.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function jR(n,e){return xD.apply(this,arguments)}function xD(){return xD=(0,rt.Z)(function*(n,e){const t=XD(n);let r,a;const l=t.tc.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),a=l.view.Yu();else{const p=yield W1(t.localStore,z(e));t.isPrimaryClient&&pT(t.remoteStore,p);const b=t.sharedClientState.addLocalQueryTarget(p.targetId);r=p.targetId,a=yield MD(t,e,r,"current"===b)}return a}),xD.apply(this,arguments)}function MD(n,e,t,r){return RD.apply(this,arguments)}function RD(){return RD=(0,rt.Z)(function*(n,e,t,r){n.hc=(G,K,oe)=>{return(ie=(0,rt.Z)(function*(Ce,ft,yt,Xt){let At=ft.view.Ku(yt);At.Oi&&(At=yield lT(Ce.localStore,ft.query,!1).then(({documents:ln})=>ft.view.Ku(ln,At)));const Zt=Xt&&Xt.targetChanges.get(ft.targetId),zt=ft.view.applyChanges(At,Ce.isPrimaryClient,Zt);return jD(Ce,ft.targetId,zt.zu),zt.snapshot}),function(Ce,ft,yt,Xt){return ie.apply(this,arguments)})(n,G,K,oe);var ie};const a=yield lT(n.localStore,e,!0),l=new UA(e,a.ji),p=l.Ku(a.documents),b=ct.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),A=l.applyChanges(p,n.isPrimaryClient,b);jD(n,t,A.zu);const L=new UR(e,t,l);return n.tc.set(e,L),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),A.snapshot}),RD.apply(this,arguments)}function $R(n,e){return kD.apply(this,arguments)}function kD(){return kD=(0,rt.Z)(function*(n,e){const t=kt(n),r=t.tc.get(e),a=t.ec.get(r.targetId);if(a.length>1)return t.ec.set(r.targetId,a.filter(l=>!X(l,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield K1(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),RC(t.remoteStore,r.targetId),tI(t,r.targetId)}).catch(Pu))):(tI(t,r.targetId),yield K1(t.localStore,r.targetId,!0))}),kD.apply(this,arguments)}function ND(){return ND=(0,rt.Z)(function*(n,e,t){const r=JD(n);try{const a=yield function(l,p){const b=kt(l),A=Jr.now(),L=p.reduce((oe,ie)=>oe.add(ie.key),ke());let G,K;return b.persistence.runTransaction("Locally write mutations","readwrite",oe=>{let ie=_(),Ce=ke();return b.Ui.getEntries(oe,L).next(ft=>{ie=ft,ie.forEach((yt,Xt)=>{Xt.isValidDocument()||(Ce=Ce.add(yt))})}).next(()=>b.localDocuments.getOverlayedDocuments(oe,ie)).next(ft=>{G=ft;const yt=[];for(const Xt of p){const At=al(Xt,G.get(Xt.key).overlayedDocument);null!=At&&yt.push(new Ia(Xt.key,At,Ea(At.value.mapValue),$n.exists(!0)))}return b.mutationQueue.addMutationBatch(oe,A,yt,p)}).next(ft=>{K=ft;const yt=ft.applyToLocalDocumentSet(G,Ce);return b.documentOverlayCache.saveOverlays(oe,ft.batchId,yt)})}).then(()=>({batchId:K.batchId,changes:P(G)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(l,p,b){let A=l.oc[l.currentUser.toKey()];A||(A=new _i(qn)),A=A.insert(p,b),l.oc[l.currentUser.toKey()]=A}(r,a.batchId,t),yield Uy(r,a.changes),yield Y1(r.remoteStore)}catch(a){const l=X1(a,"Failed to persist write");t.reject(l)}}),ND.apply(this,arguments)}function BA(n,e){return PD.apply(this,arguments)}function PD(){return PD=(0,rt.Z)(function*(n,e){const t=kt(n);try{const r=yield lR(t.localStore,e);e.targetChanges.forEach((a,l)=>{const p=t.ic.get(l);p&&(Mn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.Xu=!0:a.modifiedDocuments.size>0?Mn(p.Xu):a.removedDocuments.size>0&&(Mn(p.Xu),p.Xu=!1))}),yield Uy(t,r,e)}catch(r){yield Pu(r)}}),PD.apply(this,arguments)}function VA(n,e,t){const r=kt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const a=[];r.tc.forEach((l,p)=>{const b=p.view.Eu(e);b.snapshot&&a.push(b.snapshot)}),function(l,p){const b=kt(l);b.onlineState=p;let A=!1;b.queries.forEach((L,G)=>{for(const K of G.listeners)K.Eu(p)&&(A=!0)}),A&&SD(b)}(r.eventManager,e),a.length&&r.Zu.Go(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function zR(n,e,t){return OD.apply(this,arguments)}function OD(){return OD=(0,rt.Z)(function*(n,e,t){const r=kt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.ic.get(e),l=a&&a.key;if(l){let p=new _i(Ot.comparator);p=p.insert(l,_r.newNoDocument(l,Sn.min()));const b=ke().add(l),A=new Qt(Sn.min(),new Map,new vr(qn),p,b);yield BA(r,A),r.sc=r.sc.remove(l),r.ic.delete(e),$D(r)}else yield K1(r.localStore,e,!1).then(()=>tI(r,e,t)).catch(Pu)}),OD.apply(this,arguments)}function GR(n,e){return LD.apply(this,arguments)}function LD(){return LD=(0,rt.Z)(function*(n,e){const t=kt(n),r=e.batch.batchId;try{const a=yield cR(t.localStore,e);VD(t,r,null),BD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Uy(t,a)}catch(a){yield Pu(a)}}),LD.apply(this,arguments)}function qR(n,e,t){return FD.apply(this,arguments)}function FD(){return FD=(0,rt.Z)(function*(n,e,t){const r=kt(n);try{const a=yield function(l,p){const b=kt(l);return b.persistence.runTransaction("Reject batch","readwrite-primary",A=>{let L;return b.mutationQueue.lookupMutationBatch(A,p).next(G=>(Mn(null!==G),L=G.keys(),b.mutationQueue.removeMutationBatch(A,G))).next(()=>b.mutationQueue.performConsistencyCheck(A)).next(()=>b.documentOverlayCache.removeOverlaysForBatchId(A,L,p)).next(()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(A,L)).next(()=>b.localDocuments.getDocuments(A,L))})}(r.localStore,e);VD(r,e,t),BD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Uy(r,a)}catch(a){yield Pu(a)}}),FD.apply(this,arguments)}function UD(){return UD=(0,rt.Z)(function*(n,e){const t=kt(n);X_(t.remoteStore)||wt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const p=kt(l);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",b=>p.mutationQueue.getHighestUnacknowledgedBatchId(b))}(t.localStore);if(-1===r)return void e.resolve();const a=t.uc.get(r)||[];a.push(e),t.uc.set(r,a)}catch(r){const a=X1(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),UD.apply(this,arguments)}function BD(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function VD(n,e,t){const r=kt(n);let a=r.oc[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.oc[r.currentUser.toKey()]=a}}function tI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||jA(n,r)})}function jA(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(RC(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),$D(n))}function jD(n,e,t){for(const r of t)r instanceof LA?(n.rc.addReference(r.key,e),KR(n,r)):r instanceof FA?(wt("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||jA(n,r.key)):Ht()}function KR(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(wt("SyncEngine","New document in limbo: "+t),n.nc.add(r),$D(n))}function $D(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new Ot(er.fromString(e)),r=n.cc.next();n.ic.set(r,new BR(t)),n.sc=n.sc.insert(t,r),pT(n.remoteStore,new Z_(z(k(t.path)),r,2,ao.ot))}}function Uy(n,e,t){return HD.apply(this,arguments)}function HD(){return HD=(0,rt.Z)(function*(n,e,t){const r=kt(n),a=[],l=[],p=[];var b;r.tc.isEmpty()||(r.tc.forEach((b,A)=>{p.push(r.hc(A,e,t).then(L=>{if(L){r.isPrimaryClient&&r.sharedClientState.updateQueryState(A.targetId,L.fromCache?"not-current":"current"),a.push(L);const G=ZT.Vi(A.targetId,L);l.push(G)}}))}),yield Promise.all(p),r.Zu.Go(a),yield(b=(0,rt.Z)(function*(A,L){const G=kt(A);try{yield G.persistence.runTransaction("notifyLocalViewChanges","readwrite",K=>je.forEach(L,oe=>je.forEach(oe.Pi,ie=>G.persistence.referenceDelegate.addReference(K,oe.targetId,ie)).next(()=>je.forEach(oe.vi,ie=>G.persistence.referenceDelegate.removeReference(K,oe.targetId,ie)))))}catch(K){if(!Mf(K))throw K;wt("LocalStore","Failed to update sequence numbers: "+K)}for(const K of L){const oe=K.targetId;if(!K.fromCache){const ie=G.$i.get(oe),ft=ie.withLastLimboFreeSnapshotVersion(ie.snapshotVersion);G.$i=G.$i.insert(oe,ft)}}}),function(A,L){return b.apply(this,arguments)})(r.localStore,l))}),HD.apply(this,arguments)}function ZR(n,e){return zD.apply(this,arguments)}function zD(){return zD=(0,rt.Z)(function*(n,e){const t=kt(n);if(!t.currentUser.isEqual(e)){wt("SyncEngine","User change. New user:",e.toKey());const r=yield gA(t.localStore,e);t.currentUser=e,(a=t).uc.forEach(p=>{p.forEach(b=>{b.reject(new gt(Ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Uy(t,r.Ki)}var a}),zD.apply(this,arguments)}function YR(n,e){const t=kt(n),r=t.ic.get(e);if(r&&r.Xu)return ke().add(r.key);{let a=ke();const l=t.ec.get(e);if(!l)return a;for(const p of l){const b=t.tc.get(p);a=a.unionWith(b.view.qu)}return a}}function QR(n,e){return GD.apply(this,arguments)}function GD(){return GD=(0,rt.Z)(function*(n,e){const t=kt(n),r=yield lT(t.localStore,e.query,!0),a=e.view.Ju(r);return t.isPrimaryClient&&jD(t,e.targetId,a.zu),a}),GD.apply(this,arguments)}function XR(n,e){return qD.apply(this,arguments)}function qD(){return qD=(0,rt.Z)(function*(n,e){const t=kt(n);return _A(t.localStore,e).then(r=>Uy(t,r))}),qD.apply(this,arguments)}function JR(n,e,t,r){return WD.apply(this,arguments)}function WD(){return WD=(0,rt.Z)(function*(n,e,t,r){const a=kt(n),l=yield function(p,b){const A=kt(p),L=kt(A.mutationQueue);return A.persistence.runTransaction("Lookup mutation documents","readonly",G=>L.yn(G,b).next(K=>K?A.localDocuments.getDocuments(G,K):je.resolve(null)))}(a.localStore,e);var b;null!==l?("pending"===t?yield Y1(a.remoteStore):"acknowledged"===t||"rejected"===t?(VD(a,e,r||null),BD(a,e),b=e,kt(kt(a.localStore).mutationQueue).In(b)):Ht(),yield Uy(a,l)):wt("SyncEngine","Cannot apply mutation batch with id: "+e)}),WD.apply(this,arguments)}function KD(){return KD=(0,rt.Z)(function*(n,e){const t=kt(n);if(XD(t),JD(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),a=yield $A(t,r.toArray());t.ac=!0,yield wD(t.remoteStore,!0);for(const l of a)pT(t.remoteStore,l)}else if(!1===e&&!1!==t.ac){const r=[];let a=Promise.resolve();t.ec.forEach((l,p)=>{t.sharedClientState.isLocalQueryTarget(p)?r.push(p):a=a.then(()=>(tI(t,p),K1(t.localStore,p,!0))),RC(t.remoteStore,p)}),yield a,yield $A(t,r),function(l){const p=kt(l);p.ic.forEach((b,A)=>{RC(p.remoteStore,A)}),p.rc.cs(),p.ic=new Map,p.sc=new _i(Ot.comparator)}(t),t.ac=!1,yield wD(t.remoteStore,!1)}}),KD.apply(this,arguments)}function $A(n,e,t){return ZD.apply(this,arguments)}function ZD(){return ZD=(0,rt.Z)(function*(n,e,t){const r=kt(n),a=[],l=[];for(const p of e){let b;const A=r.ec.get(p);if(A&&0!==A.length){b=yield W1(r.localStore,z(A[0]));for(const L of A){const G=r.tc.get(L),K=yield QR(r,G);K.snapshot&&l.push(K.snapshot)}}else{const L=yield vA(r.localStore,p);b=yield W1(r.localStore,L),yield MD(r,HA(L),p,!1)}a.push(b)}return r.Zu.Go(l),a}),ZD.apply(this,arguments)}function HA(n){return S(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function tk(n){const e=kt(n);return kt(kt(e.localStore).persistence).Ri()}function nk(n,e,t,r){return YD.apply(this,arguments)}function YD(){return YD=(0,rt.Z)(function*(n,e,t,r){const a=kt(n);if(a.ac)return void wt("SyncEngine","Ignoring unexpected query state notification.");const l=a.ec.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const p=yield _A(a.localStore,Oe(l[0])),b=Qt.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Uy(a,p,b);break}case"rejected":yield K1(a.localStore,e,!0),tI(a,e,r);break;default:Ht()}}),YD.apply(this,arguments)}function rk(n,e,t){return QD.apply(this,arguments)}function QD(){return QD=(0,rt.Z)(function*(n,e,t){const r=XD(n);if(r.ac){for(const a of e){if(r.ec.has(a)){wt("SyncEngine","Adding an already active target "+a);continue}const l=yield vA(r.localStore,a),p=yield W1(r.localStore,l);yield MD(r,HA(l),p.targetId,!1),pT(r.remoteStore,p)}for(const a of t)r.ec.has(a)&&(yield K1(r.localStore,a,!1).then(()=>{RC(r.remoteStore,a),tI(r,a)}).catch(Pu))}}),QD.apply(this,arguments)}function XD(n){const e=kt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=BA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zR.bind(null,e),e.Zu.Go=PR.bind(null,e.eventManager),e.Zu.lc=OR.bind(null,e.eventManager),e}function JD(n){const e=kt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qR.bind(null,e),e}class zA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,rt.Z)(function*(){t.wt=xC(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return pA(this.persistence,new fA,e.initialUser,this.wt)}_c(e){return new hA(uT.Ms,this.wt)}dc(e){return new IA}terminate(){var e=this;return(0,rt.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class GA extends zA{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,rt.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield JD(r.yc.syncEngine),yield Y1(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return pA(this.persistence,new fA,e.initialUser,this.wt)}mc(e,t){return new KM(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new Sy(t,this.persistence);return new Dy(e.asyncQueue,r)}_c(e){const t=KT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ul.withCacheSize(this.cacheSizeBytes):ul.DEFAULT;return new WT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,TA(),fT(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new IA}}class sk extends GA{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,rt.Z)(function*(){yield t().call(r,e);const a=r.yc.syncEngine;r.sharedClientState instanceof rD&&(r.sharedClientState.syncEngine={kr:JR.bind(null,a),Or:nk.bind(null,a),Mr:rk.bind(null,a),Ri:tk.bind(null,a),Nr:XR.bind(null,a)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var l=(0,rt.Z)(function*(p){yield function ek(n,e){return KD.apply(this,arguments)}(r.yc.syncEngine,p),r.gcScheduler&&(p&&!r.gcScheduler.started?r.gcScheduler.start():p||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(p&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():p||r.indexBackfillerScheduler.stop())});return function(p){return l.apply(this,arguments)}}())})()}dc(e){const t=TA();if(!rD.V(t))throw new gt(Ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=KT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new rD(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class eS{initialize(e,t){var r=this;return(0,rt.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=a=>VA(r.syncEngine,a,1),r.remoteStore.remoteSyncer.handleCredentialChange=ZR.bind(null,r.syncEngine),yield wD(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new NR}createDatastore(e){const t=xC(e.databaseInfo.databaseId),r=new yR(e.databaseInfo);return new wR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,a=e.asyncQueue,l=b=>VA(this.syncEngine,b,0),p=CA.V()?new CA:new pR,new ER(t,r,a,l,p);var t,r,a,l,p}createSyncEngine(e,t){return function(r,a,l,p,b,A,L){const G=new VR(r,a,l,p,b,A);return L&&(G.ac=!0),G}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,rt.Z)(function*(t){const r=kt(t);wt("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Z1(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function qA(n,e=10240){let t=0;return{read:()=>(0,rt.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,rt.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class mT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ok{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Vi,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,rt.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,rt.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,rt.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),a=Number(r);isNaN(a)&&e.Pc(`length string (${r}) is not valid number`);const l=yield e.vc(a);return new LR(JSON.parse(l),t.length+a)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,rt.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,rt.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,rt.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class ak{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,rt.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new gt(Ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(a=(0,rt.Z)(function*(l,p){const b=kt(l),A=_C(b.wt)+"/documents",L={documents:p.map(ie=>vC(b.wt,ie))},G=yield b.ao("BatchGetDocuments",A,L,p.length),K=new Map;G.forEach(ie=>{const Ce=function lM(n,e){return"found"in e?function(t,r){Mn(!!r.found);const a=Rg(t,r.found.name),l=qs(r.found.updateTime),p=new xi({mapValue:{fields:r.found.fields}});return _r.newFoundDocument(a,l,p)}(n,e):"missing"in e?function(t,r){Mn(!!r.missing),Mn(!!r.readTime);const a=Rg(t,r.missing),l=qs(r.readTime);return _r.newNoDocument(a,l)}(n,e):Ht()}(b.wt,ie);K.set(Ce.key.toString(),Ce)});const oe=[];return p.forEach(ie=>{const Ce=K.get(ie.toString());Mn(!!Ce),oe.push(Ce)}),oe}),function(l,p){return a.apply(this,arguments)})(t.datastore,e);var a;return r.forEach(a=>t.recordVersion(a)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new db(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,rt.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,a)=>{const l=Ot.fromPath(a);e.mutations.push(new JC(l,e.precondition(l)))}),yield(r=(0,rt.Z)(function*(a,l){const p=kt(a),b=_C(p.wt)+"/documents",A={writes:l.map(L=>wC(p.wt,L))};yield p.ro("Commit",b,A)}),function(a,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ht();t=Sn.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new gt(Ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?$n.updateTime(t):$n.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Sn.min()))throw new gt(Ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $n.updateTime(t)}return $n.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class uk{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.Dc=r.maxAttempts,this.So=new iD(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,rt.Z)(function*(){const t=new ak(e.datastore),r=e.xc(t);r&&r.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.Nc(l)}))}).catch(a=>{e.Nc(a)})}))}xc(e){try{const t=this.updateFunction(e);return!z_(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!o(t)}return!1}}class ck{constructor(e,t,r,a){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=is.UNAUTHENTICATED,this.clientId=B_.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var p=(0,rt.Z)(function*(b){wt("FirestoreClient","Received user=",b.uid),yield l.authCredentialListener(b),l.user=b});return function(b){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(r,p=>(wt("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}getConfiguration(){var e=this;return(0,rt.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new gt(Ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,rt.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=X1(r,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function WA(n,e){return tS.apply(this,arguments)}function tS(){return tS=(0,rt.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),wt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,rt.Z)(function*(l){r.isEqual(l)||(yield gA(e.localStore,l),r=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),tS.apply(this,arguments)}function KA(n,e){return nS.apply(this,arguments)}function nS(){return nS=(0,rt.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield rS(n);wt("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(a=>kA(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,l)=>kA(e.remoteStore,l)),n.onlineComponents=e}),nS.apply(this,arguments)}function rS(n){return iS.apply(this,arguments)}function iS(){return iS=(0,rt.Z)(function*(n){return n.offlineComponents||(wt("FirestoreClient","Using default OfflineComponentProvider"),yield WA(n,new zA)),n.offlineComponents}),iS.apply(this,arguments)}function yT(n){return sS.apply(this,arguments)}function sS(){return sS=(0,rt.Z)(function*(n){return n.onlineComponents||(wt("FirestoreClient","Using default OnlineComponentProvider"),yield KA(n,new eS)),n.onlineComponents}),sS.apply(this,arguments)}function ZA(n){return rS(n).then(e=>e.persistence)}function oS(n){return rS(n).then(e=>e.localStore)}function YA(n){return yT(n).then(e=>e.remoteStore)}function aS(n){return yT(n).then(e=>e.syncEngine)}function nI(n){return uS.apply(this,arguments)}function uS(){return uS=(0,rt.Z)(function*(n){const e=yield yT(n),t=e.eventManager;return t.onListen=jR.bind(null,e.syncEngine),t.onUnlisten=$R.bind(null,e.syncEngine),t}),uS.apply(this,arguments)}function QA(n,e,t={}){const r=new Vi;return n.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return function(a,l,p,b,A){const L=new mT({next:K=>{l.enqueueAndForget(()=>TD(a,G));const oe=K.docs.has(p);!oe&&K.fromCache?A.reject(new gt(Ge.UNAVAILABLE,"Failed to get document because the client is offline.")):oe&&K.fromCache&&b&&"server"===b.source?A.reject(new gt(Ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):A.resolve(K)},error:K=>A.reject(K)}),G=new AD(k(p.path),L,{includeMetadataChanges:!0,Du:!0});return ID(a,G)}(yield nI(n),n.asyncQueue,e,t,r)})),r.promise}function XA(n,e,t={}){const r=new Vi;return n.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return function(a,l,p,b,A){const L=new mT({next:K=>{l.enqueueAndForget(()=>TD(a,G)),K.fromCache&&"server"===b.source?A.reject(new gt(Ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):A.resolve(K)},error:K=>A.reject(K)}),G=new AD(p,L,{includeMetadataChanges:!0,Du:!0});return ID(a,G)}(yield nI(n),n.asyncQueue,e,t,r)})),r.promise}const JA=new Map;function cS(n,e,t){if(!t)throw new gt(Ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ex(n,e,t,r){if(!0===e&&!0===r)throw new gt(Ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function tx(n){if(!Ot.isDocumentKey(n))throw new gt(Ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nx(n){if(Ot.isDocumentKey(n))throw new gt(Ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Ht()}function wr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new gt(Ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vT(n);throw new gt(Ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function rx(n,e){if(e<=0)throw new gt(Ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ix{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new gt(Ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new gt(Ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ex("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kC{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ix({}),this._settingsFrozen=!1,e instanceof Ou?this._databaseId=e:(this._app=e,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new gt(Ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ou(a.options.projectId)}(e))}get app(){if(!this._app)throw new gt(Ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new gt(Ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ix(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new x1;switch(t.type){case"gapi":const r=t.client;return Mn(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new M1(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new gt(Ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=JA.get(e);t&&(wt("ComponentProvider","Removing Datastore"),JA.delete(e),t.terminate())}(this),Promise.resolve()}}class ji{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ng(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ji(this.firestore,e,this._key)}}class Bu{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bu(this.firestore,e,this._query)}}class Ng extends Bu{constructor(e,t,r){super(e,t,k(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ji(this.firestore,null,new Ot(e))}withConverter(e){return new Ng(this.firestore,e,this._path)}}function sx(n,e,...t){if(n=(0,Tn.m9)(n),cS("collection","path",e),n instanceof kC){const r=er.fromString(e,...t);return nx(r),new Ng(n,null,r)}{if(!(n instanceof ji||n instanceof Ng))throw new gt(Ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(er.fromString(e,...t));return nx(r),new Ng(n.firestore,null,r)}}function _T(n,e,...t){if(n=(0,Tn.m9)(n),1===arguments.length&&(e=B_.I()),cS("doc","path",e),n instanceof kC){const r=er.fromString(e,...t);return tx(r),new ji(n,null,new Ot(r))}{if(!(n instanceof ji||n instanceof Ng))throw new gt(Ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(er.fromString(e,...t));return tx(r),new ji(n.firestore,n instanceof Ng?n.converter:null,new Ot(r))}}function ox(n,e){return n=(0,Tn.m9)(n),e=(0,Tn.m9)(e),(n instanceof ji||n instanceof Ng)&&(e instanceof ji||e instanceof Ng)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ax(n,e){return n=(0,Tn.m9)(n),e=(0,Tn.m9)(e),n instanceof Bu&&e instanceof Bu&&n.firestore===e.firestore&&X(n._query,e._query)&&n.converter===e.converter}class wk{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new iD(this,"async_queue_retry"),this.Kc=()=>{const t=fT();t&&wt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=fT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=fT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Vi;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,rt.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!Mf(t))throw t;wt("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Bi("INTERNAL UNHANDLED ERROR: ",function(l){let p=l.message||"";return l.stack&&(p=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),p}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const a=ED.createAndSchedule(this,e,t,r,l=>this.Wc(l));return this.$c.push(a),a}Gc(){this.Bc&&Ht()}verifyOperationInProgress(){}zc(){var e=this;return(0,rt.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function lS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const a of["next","error","complete"])if(a in r&&"function"==typeof r[a])return!0;return!1}(n)}class bk{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class as extends kC{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new wk,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ux(this),this._firestoreClient.terminate()}}function Lo(n){return n._firestoreClient||ux(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function ux(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new xy(n._databaseId,l,n._persistenceKey,(b=t).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,b.useFetchStreams));var l,b;n._firestoreClient=new ck(n._authCredentials,n._appCheckCredentials,n._queue,r)}function cx(n,e,t){const r=new Vi;return n.asyncQueue.enqueue((0,rt.Z)(function*(){try{yield WA(n,t),yield KA(n,e),r.resolve()}catch(a){const l=a;if(!("FirebaseError"===(p=l).name?p.code===Ge.FAILED_PRECONDITION||p.code===Ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&p instanceof DOMException)||22===p.code||20===p.code||11===p.code))throw l;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+l),r.reject(l)}var p})).then(()=>r.promise)}function lx(n){if(n._initialized||n._terminated)throw new gt(Ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class By{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new gt(Ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Pg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pg(As.fromBase64String(e))}catch(t){throw new gt(Ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pg(As.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bb{constructor(e){this._methodName=e}}class wT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new gt(Ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new gt(Ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qn(this._lat,e._lat)||qn(this._long,e._long)}}const Rk=/^__.*__$/;class kk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ia(e,this.data,this.fieldMask,t,this.fieldTransforms):new co(e,this.data,t,this.fieldTransforms)}}class hx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ia(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ht()}}class bT{constructor(e,t,r,a,l,p){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=a,void 0===l&&this.Xc(),this.fieldTransforms=l||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new bT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ta({path:r,na:!1});return a.sa(e),a}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ta({path:r,na:!1});return a.Xc(),a}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return CT(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(dx(this.Zc)&&Rk.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class Nk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||xC(e)}aa(e,t,r,a=!1){return new bT({Zc:e,methodName:t,ca:r,path:vi.emptyPath(),na:!1,ua:a},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Eb(n){const e=n._freezeSettings(),t=xC(n._databaseId);return new Nk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ET(n,e,t,r,a,l={}){const p=n.aa(l.merge||l.mergeFields?2:0,e,t,a);pS("Data must be an object, but it was:",p,r);const b=gx(r,p);let A,L;if(l.merge)A=new wa(p.fieldMask),L=p.fieldTransforms;else if(l.mergeFields){const G=[];for(const K of l.mergeFields){const oe=gS(e,K,t);if(!p.contains(oe))throw new gt(Ge.INVALID_ARGUMENT,`Field '${oe}' is specified in your field mask but missing from your input data.`);yx(G,oe)||G.push(oe)}A=new wa(G),L=p.fieldTransforms.filter(K=>A.covers(K.field))}else A=null,L=p.fieldTransforms;return new kk(new xi(b),A,L)}class NC extends bb{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof NC}}function fx(n,e,t){return new bT({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class hS extends bb{_toFieldTransform(e){return new Qn(e.path,new le)}isEqual(e){return e instanceof hS}}class Pk extends bb{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=fx(this,e,!0),r=this.ha.map(l=>Ib(l,t)),a=new it(r);return new Qn(e.path,a)}isEqual(e){return this===e}}class Ok extends bb{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=fx(this,e,!0),r=this.ha.map(l=>Ib(l,t)),a=new $t(r);return new Qn(e.path,a)}isEqual(e){return this===e}}class Lk extends bb{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new jn(e.wt,St(e.wt,this.la));return new Qn(e.path,t)}isEqual(e){return this===e}}function dS(n,e,t,r){const a=n.aa(1,e,t);pS("Data must be an object, but it was:",a,r);const l=[],p=xi.empty();Zh(r,(A,L)=>{const G=IT(e,A,t);L=(0,Tn.m9)(L);const K=a.ia(G);if(L instanceof NC)l.push(G);else{const oe=Ib(L,K);null!=oe&&(l.push(G),p.set(G,oe))}});const b=new wa(l);return new hx(p,b,a.fieldTransforms)}function fS(n,e,t,r,a,l){const p=n.aa(1,e,t),b=[gS(e,r,t)],A=[a];if(l.length%2!=0)throw new gt(Ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let oe=0;oe<l.length;oe+=2)b.push(gS(e,l[oe])),A.push(l[oe+1]);const L=[],G=xi.empty();for(let oe=b.length-1;oe>=0;--oe)if(!yx(L,b[oe])){const ie=b[oe];let Ce=A[oe];Ce=(0,Tn.m9)(Ce);const ft=p.ia(ie);if(Ce instanceof NC)L.push(ie);else{const yt=Ib(Ce,ft);null!=yt&&(L.push(ie),G.set(ie,yt))}}const K=new wa(L);return new hx(G,K,p.fieldTransforms)}function px(n,e,t,r=!1){return Ib(t,n.aa(r?4:3,e))}function Ib(n,e){if(mx(n=(0,Tn.m9)(n)))return pS("Unsupported field value:",e,n),gx(n,e);if(n instanceof bb)return function(t,r){if(!dx(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const a=[];let l=0;for(const p of t){let b=Ib(p,r.ra(l));null==b&&(b={nullValue:"NULL_VALUE"}),a.push(b),l++}return{arrayValue:{values:a}}}(n,e)}return function(t,r){if(null===(t=(0,Tn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return St(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Jr.fromDate(t);return{timestampValue:Fy(r.wt,a)}}if(t instanceof Jr){const a=new Jr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Fy(r.wt,a)}}if(t instanceof wT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pg)return{bytesValue:$1(r.wt,t._byteString)};if(t instanceof ji){const a=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw r.oa(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:OT(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${vT(t)}`)}(n,e)}function gx(n,e){const t={};return H_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zh(n,(r,a)=>{const l=Ib(a,e.ea(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function mx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Jr||n instanceof wT||n instanceof Pg||n instanceof ji||n instanceof bb)}function pS(n,e,t){if(!mx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=vT(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function gS(n,e,t){if((e=(0,Tn.m9)(e))instanceof By)return e._internalPath;if("string"==typeof e)return IT(n,e);throw CT("Field path arguments must be of type string or ",n,!1,void 0,t)}const Fk=new RegExp("[~\\*/\\[\\]]");function IT(n,e,t){if(e.search(Fk)>=0)throw CT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new By(...e.split("."))._internalPath}catch(r){throw CT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function CT(n,e,t,r,a){const l=r&&!r.isEmpty(),p=void 0!==a;let b=`Function ${e}() called with invalid data`;t&&(b+=" (via `toFirestore()`)"),b+=". ";let A="";return(l||p)&&(A+=" (found",l&&(A+=` in field ${r}`),p&&(A+=` in document ${a}`),A+=")"),new gt(Ge.INVALID_ARGUMENT,b+n+A)}function yx(n,e){return n.some(t=>t.isEqual(e))}class PC{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ji(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Uk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(TT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Uk extends PC{data(){return super.data()}}function TT(n,e){return"string"==typeof e?IT(n,e):e instanceof By?e._internalPath:e._delegate._internalPath}class Cb{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vy extends PC{constructor(e,t,r,a,l,p){super(e,t,r,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new OC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(TT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class OC extends Vy{data(e={}){return super.data(e)}}class e0{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Cb(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new OC(this._firestore,this._userDataWriter,r.key,r,new Cb(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new gt(Ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(p=>({type:"added",doc:new OC(r._firestore,r._userDataWriter,p.doc.key,p.doc,new Cb(r._snapshot.mutatedKeys.has(p.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const b=new OC(r._firestore,r._userDataWriter,p.doc.key,p.doc,new Cb(r._snapshot.mutatedKeys.has(p.doc.key),r._snapshot.fromCache),r.query.converter);let A=-1,L=-1;return 0!==p.type&&(A=l.indexOf(p.doc.key),l=l.delete(p.doc.key)),1!==p.type&&(l=l.add(p.doc),L=l.indexOf(p.doc.key)),{type:Bk(p.type),doc:b,oldIndex:A,newIndex:L}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Bk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ht()}}function vx(n,e){return n instanceof Vy&&e instanceof Vy?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof e0&&e instanceof e0&&n._firestore===e._firestore&&ax(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function _x(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new gt(Ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class LC{}function t0(n,...e){for(const t of e)n=t._apply(n);return n}class Vk extends LC{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=Eb(e.firestore),r=function(a,l,p,b,A,L,G){let K;if(A.isKeyField()){if("array-contains"===L||"array-contains-any"===L)throw new gt(Ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${L}' queries on documentId().`);if("in"===L||"not-in"===L){Tx(G,L);const ie=[];for(const Ce of G)ie.push(Cx(b,a,Ce));K={arrayValue:{values:ie}}}else K=Cx(b,a,G)}else"in"!==L&&"not-in"!==L&&"array-contains-any"!==L||Tx(G,L),K=px(p,"where",G,"in"===L||"not-in"===L);const oe=ss.create(A,L,K);return function(ie,Ce){if(Ce.ht()){const yt=N(ie);if(null!==yt&&!yt.isEqual(Ce.field))throw new gt(Ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${yt.toString()}' and '${Ce.field.toString()}'`);const Xt=U(ie);null!==Xt&&Dx(0,Ce.field,Xt)}const ft=function(yt,Xt){for(const At of yt.filters)if(Xt.indexOf(At.op)>=0)return At.op;return null}(ie,function(yt){switch(yt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Ce.op));if(null!==ft)throw new gt(Ge.INVALID_ARGUMENT,ft===Ce.op?`Invalid query. You cannot use more than one '${Ce.op.toString()}' filter.`:`Invalid query. You cannot use '${Ce.op.toString()}' filters with '${ft.toString()}' filters.`)}(a,oe),oe}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Bu(e.firestore,e.converter,function(a,l){const p=a.filters.concat([l]);return new I(a.path,a.collectionGroup,a.explicitOrderBy.slice(),p,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}class $k extends LC{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,a,l){if(null!==r.startAt)throw new gt(Ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new gt(Ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new f(a,l);return function(b,A){if(null===U(b)){const L=N(b);null!==L&&Dx(0,L,A.field)}}(r,p),p}(e._query,this.fa,this.wa);return new Bu(e.firestore,e.converter,function(r,a){const l=r.explicitOrderBy.concat([a]);return new I(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class wx extends LC{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new Bu(e.firestore,e.converter,Y(e._query,this.ma,this.ga))}}class bx extends LC{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=Ix(e,this.type,this.ya,this.pa);return new Bu(e.firestore,e.converter,(a=t,new I((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,a,r.endAt)));var r,a}}class Ex extends LC{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=Ix(e,this.type,this.ya,this.pa);return new Bu(e.firestore,e.converter,(a=t,new I((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,a)));var r,a}}function Ix(n,e,t,r){if(t[0]=(0,Tn.m9)(t[0]),t[0]instanceof PC)return function(a,l,p,b,A){if(!b)throw new gt(Ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const L=[];for(const G of H(a))if(G.field.isKeyField())L.push(Fu(l,b.key));else{const K=b.data.field(G.field);if(Dg(K))throw new gt(Ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+G.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===K){const oe=G.field.canonicalString();throw new gt(Ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${oe}' (used as the orderBy) does not exist.`)}L.push(K)}return new h(L,A)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=Eb(n.firestore);return function(l,p,b,A,L,G){const K=l.explicitOrderBy;if(L.length>K.length)throw new gt(Ge.INVALID_ARGUMENT,`Too many arguments provided to ${A}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const oe=[];for(let ie=0;ie<L.length;ie++){const Ce=L[ie];if(K[ie].field.isKeyField()){if("string"!=typeof Ce)throw new gt(Ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${A}(), but got a ${typeof Ce}`);if(!V(l)&&-1!==Ce.indexOf("/"))throw new gt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${A}() must be a plain document ID, but '${Ce}' contains a slash.`);const ft=l.path.child(er.fromString(Ce));if(!Ot.isDocumentKey(ft))throw new gt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${A}() must result in a valid document path, but '${ft}' is not because it contains an odd number of segments.`);const yt=new Ot(ft);oe.push(Fu(p,yt))}else{const ft=px(b,A,Ce);oe.push(ft)}}return new h(oe,G)}(n._query,n.firestore._databaseId,a,e,t,r)}}function Cx(n,e,t){if("string"==typeof(t=(0,Tn.m9)(t))){if(""===t)throw new gt(Ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!V(e)&&-1!==t.indexOf("/"))throw new gt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(er.fromString(t));if(!Ot.isDocumentKey(r))throw new gt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fu(n,new Ot(r))}if(t instanceof ji)return Fu(n,t._key);throw new gt(Ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vT(t)}.`)}function Tx(n,e){if(!Array.isArray(n)||0===n.length)throw new gt(Ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new gt(Ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Dx(n,e,t){if(!t.isEqual(e))throw new gt(Ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Yk={maxAttempts:5};class mS{convertValue(e,t="none"){switch(Qh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ei(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ol(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ht()}}convertObject(e,t){const r={};return Zh(e.fields,(a,l)=>{r[a]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new wT(ei(e.latitude),ei(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=N1(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bl(e));default:return null}}convertTimestamp(e){const t=tu(e);return new Jr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=er.fromString(e);Mn(OS(r));const a=new Ou(r.get(1),r.get(3)),l=new Ot(r.popFirst(5));return a.isEqual(t)||Bi(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function DT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Qk extends mS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ji(this.firestore,null,t)}}class Sx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Eb(e)}set(e,t,r){this._verifyNotCommitted();const a=n0(e,this._firestore),l=DT(a.converter,t,r),p=ET(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,r);return this._mutations.push(p.toMutation(a._key,$n.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=n0(e,this._firestore);let p;return p="string"==typeof(t=(0,Tn.m9)(t))||t instanceof By?fS(this._dataReader,"WriteBatch.update",l._key,t,r,a):dS(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(p.toMutation(l._key,$n.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=n0(e,this._firestore);return this._mutations=this._mutations.concat(new db(t._key,$n.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new gt(Ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function n0(n,e){if((n=(0,Tn.m9)(n)).firestore!==e)throw new gt(Ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Tb extends mS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ji(this.firestore,null,t)}}function Ax(n,e,t){n=wr(n,ji);const r=wr(n.firestore,as),a=DT(n.converter,e,t);return rI(r,[ET(Eb(r),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,$n.none())])}function xx(n,e,t,...r){n=wr(n,ji);const a=wr(n.firestore,as),l=Eb(a);let p;return p="string"==typeof(e=(0,Tn.m9)(e))||e instanceof By?fS(l,"updateDoc",n._key,e,t,r):dS(l,"updateDoc",n._key,e),rI(a,[p.toMutation(n._key,$n.exists(!0))])}function Mx(n,...e){var t,r,a;n=(0,Tn.m9)(n);let l={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||lS(e[p])||(l=e[p],p++);const b={includeMetadataChanges:l.includeMetadataChanges};if(lS(e[p])){const K=e[p];e[p]=null===(t=K.next)||void 0===t?void 0:t.bind(K),e[p+1]=null===(r=K.error)||void 0===r?void 0:r.bind(K),e[p+2]=null===(a=K.complete)||void 0===a?void 0:a.bind(K)}let A,L,G;if(n instanceof ji)L=wr(n.firestore,as),G=k(n._key.path),A={next:K=>{e[p]&&e[p](yS(L,n,K))},error:e[p+1],complete:e[p+2]};else{const K=wr(n,Bu);L=wr(K.firestore,as),G=K._query;const oe=new Tb(L);A={next:ie=>{e[p]&&e[p](new e0(L,oe,K,ie))},error:e[p+1],complete:e[p+2]},_x(n._query)}return function(K,oe,ie,Ce){const ft=new mT(Ce),yt=new AD(oe,ft,ie);return K.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return ID(yield nI(K),yt)})),()=>{ft.Tc(),K.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return TD(yield nI(K),yt)}))}}(Lo(L),G,b,A)}function rI(n,e){return function(t,r){const a=new Vi;return t.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return function HR(n,e,t){return ND.apply(this,arguments)}(yield aS(t),r,a)})),a.promise}(Lo(n),e)}function yS(n,e,t){const r=t.docs.get(e._key),a=new Tb(n);return new Vy(n,a,e._key,r,new Cb(t.hasPendingWrites,t.fromCache),e.converter)}class aN extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Eb(e)}get(e){const t=n0(e,this._firestore),r=new Qk(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return Ht();const l=a[0];if(l.isFoundDocument())return new PC(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new PC(this._firestore,r,t._key,null,t.converter);throw Ht()})}set(e,t,r){const a=n0(e,this._firestore),l=DT(a.converter,t,r),p=ET(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,r);return this._transaction.set(a._key,p),this}update(e,t,r,...a){const l=n0(e,this._firestore);let p;return p="string"==typeof(t=(0,Tn.m9)(t))||t instanceof By?fS(this._dataReader,"Transaction.update",l._key,t,r,a):dS(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,p),this}delete(e){const t=n0(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=n0(e,this._firestore),r=new Tb(this._firestore);return super.get(e).then(a=>new Vy(this._firestore,r,t._key,a._document,new Cb(!1,!1),t.converter))}}function vS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new gt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function kx(){if("undefined"==typeof Uint8Array)throw new gt("unimplemented","Uint8Arrays are not available in this environment.")}function Nx(){if(!function lC(){return"undefined"!=typeof atob}())throw new gt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Df=Iu.SDK_VERSION,(0,Iu._registerComponent)(new Pd.wA("firestore",(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),l=new as(a,new L_(t.getProvider("auth-internal")),new U_(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,Iu.registerVersion)(P_,"3.4.11",n),(0,Iu.registerVersion)(P_,"3.4.11","esm2017")}();class FC{constructor(e){this._delegate=e}static fromBase64String(e){return Nx(),new FC(Pg.fromBase64String(e))}static fromUint8Array(e){return kx(),new FC(Pg.fromUint8Array(e))}toBase64(){return Nx(),this._delegate.toBase64()}toUint8Array(){return kx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _S(n){return function mN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class yN{enableIndexedDbPersistence(e,t){return function Ik(n,e){lx(n=wr(n,as));const t=Lo(n),r=n._freezeSettings(),a=new eS;return cx(t,a,new GA(a,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Ck(n){lx(n=wr(n,as));const e=Lo(n),t=n._freezeSettings(),r=new eS;return cx(e,r,new sk(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Tk(n){if(n._initialized&&!n._terminated)throw new gt(Ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Vi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,rt.Z)(function*(){try{yield(t=(0,rt.Z)(function*(r){if(!sl.V())return Promise.resolve();const a=r+"main";yield sl.delete(a)}),function(r){return t.apply(this,arguments)})(KT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Px{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ou||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&wg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function vk(n,e,t,r={}){var a;const l=(n=wr(n,kC))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&wg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let p,b;if("string"==typeof r.mockUserToken)p=r.mockUserToken,b=is.MOCK_USER;else{p=(0,Tn.Sg)(r.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new gt(Ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new is(A)}n._authCredentials=new Kh(new A1(p,b))}}(this._delegate,e,t,r)}enableNetwork(){return function Sk(n){return function lk(n){return n.asyncQueue.enqueue((0,rt.Z)(function*(){const e=yield ZA(n),t=yield YA(n);return e.setNetworkEnabled(!0),function(r){const a=kt(r);return a.lu.delete(0),MC(a)}(t)}))}(Lo(n=wr(n,as)))}(this._delegate)}disableNetwork(){return function Ak(n){return function hk(n){return n.asyncQueue.enqueue((0,rt.Z)(function*(){const e=yield ZA(n),t=yield YA(n);return e.setNetworkEnabled(!1),(r=(0,rt.Z)(function*(a){const l=kt(a);l.lu.add(0),yield Z1(l),l._u.set("Offline")}),function(a){return r.apply(this,arguments)})(t);var r}))}(Lo(n=wr(n,as)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ex("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Dk(n){return function(e){const t=new Vi;return e.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return function WR(n,e){return UD.apply(this,arguments)}(yield aS(e),t)})),t.promise}(Lo(n=wr(n,as)))}(this._delegate)}onSnapshotsInSync(e){return function oN(n,e){return function pk(n,e){const t=new mT(e);return n.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return r=yield nI(n),a=t,kt(r).Tu.add(a),void a.next();var r,a})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return r=yield nI(n),a=t,void kt(r).Tu.delete(a);var r,a}))}}(Lo(n=wr(n,as)),lS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new gt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new iI(this,sx(this._delegate,e))}catch(t){throw gc(t,"collection()","Firestore.collection()")}}doc(e){try{return new ed(this,_T(this._delegate,e))}catch(t){throw gc(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new mc(this,function _k(n,e){if(n=wr(n,kC),cS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new gt(Ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bu(n,null,(t=e,new I(er.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw gc(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function uN(n,e,t){n=wr(n,as);const r=Object.assign(Object.assign({},Yk),t);return function(a){if(a.maxAttempts<1)throw new gt(Ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function gk(n,e,t){const r=new Vi;return n.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){const a=yield(l=n,yT(l).then(p=>p.datastore));var l;new uk(n.asyncQueue,a,t,e,r).run()})),r.promise}(Lo(n),a=>e(new aN(n,a)),r)}(this._delegate,t=>e(new Ox(this,t)))}batch(){return Lo(this._delegate),new Lx(new Sx(this._delegate,e=>rI(this._delegate,e)))}loadBundle(e){return function xk(n,e){const t=Lo(n=wr(n,as)),r=new bk;return function mk(n,e,t,r){const a=function(l,p){let b;return b="string"==typeof l?(new TextEncoder).encode(l):l,A=function(A,L){if(A instanceof Uint8Array)return qA(A,L);if(A instanceof ArrayBuffer)return qA(new Uint8Array(A),L);if(A instanceof ReadableStream)return A.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(b),new ok(A,p);var A}(t,xC(e));n.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){!function ik(n,e,t){const r=kt(n);var a;(a=(0,rt.Z)(function*(l,p,b){try{const A=yield p.getMetadata();if(yield function(oe,ie){const Ce=kt(oe),ft=qs(ie.createTime);return Ce.persistence.runTransaction("hasNewerBundle","readonly",yt=>Ce.Ds.getBundleMetadata(yt,ie.id)).then(yt=>!!yt&&yt.createTime.compareTo(ft)>=0)}(l.localStore,A))return yield p.close(),b._completeWith({taskState:"Success",documentsLoaded:(oe=A).totalDocuments,bytesLoaded:oe.totalBytes,totalDocuments:oe.totalDocuments,totalBytes:oe.totalBytes}),Promise.resolve(new Set);b._updateProgress(OA(A));const L=new FR(A,l.localStore,p.wt);let G=yield p.fc();for(;G;){const oe=yield L.Nu(G);oe&&b._updateProgress(oe),G=yield p.fc()}const K=yield L.complete();return yield Uy(l,K.Mu,void 0),yield function(oe,ie){const Ce=kt(oe);return Ce.persistence.runTransaction("Save bundle","readwrite",ft=>Ce.Ds.saveBundleMetadata(ft,ie))}(l.localStore,A),b._completeWith(K.progress),Promise.resolve(K.Ou)}catch(A){return wg("SyncEngine",`Loading bundle failed with ${A}`),b._failWith(A),Promise.resolve(new Set)}var oe}),function(l,p,b){return a.apply(this,arguments)})(r,e,t).then(a=>{r.sharedClientState.notifyBundleLoaded(a)})}(yield aS(n),a,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Mk(n,e){return function yk(n,e){return n.asyncQueue.enqueue((0,rt.Z)(function*(){return function(t,r){const a=kt(t);return a.persistence.runTransaction("Get named query","readonly",l=>a.Ds.getNamedQuery(l,r))}(yield oS(n),e)}))}(Lo(n=wr(n,as)),e).then(t=>t?new Bu(n,null,t.query):null)}(this._delegate,e).then(t=>t?new mc(this,t):null)}}class ST extends mS{constructor(e){super(),this.firestore=e}convertBytes(e){return new FC(new Pg(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ed.forKey(t,this.firestore,null)}}class Ox{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ST(e)}get(e){const t=Sb(e);return this._delegate.get(t).then(r=>new UC(this._firestore,new Vy(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=Sb(e);return r?(vS("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=Sb(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=Sb(e);return this._delegate.delete(t),this}}class Lx{constructor(e){this._delegate=e}set(e,t,r){const a=Sb(e);return r?(vS("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=Sb(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=Sb(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Db{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new OC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new BC(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Db.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let l=a.get(t);return l||(l=new Db(e,new ST(e),t),a.set(t,l)),l}}Db.INSTANCES=new WeakMap;class ed{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ST(e)}static forPath(e,t,r){if(e.length%2!=0)throw new gt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ed(t,new ji(t._delegate,r,new Ot(e)))}static forKey(e,t,r){return new ed(t,new ji(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new iI(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new iI(this.firestore,sx(this._delegate,e))}catch(t){throw gc(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Tn.m9)(e))instanceof ji&&ox(this._delegate,e)}set(e,t){t=vS("DocumentReference.set",t);try{return t?Ax(this._delegate,e,t):Ax(this._delegate,e)}catch(r){throw gc(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?xx(this._delegate,e):xx(this._delegate,e,t,...r)}catch(a){throw gc(a,"updateDoc()","DocumentReference.update()")}}delete(){return function iN(n){return rI(wr(n.firestore,as),[new db(n._key,$n.none())])}(this._delegate)}onSnapshot(...e){const t=Fx(e),r=Ux(e,a=>new UC(this.firestore,new Vy(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return Mx(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Jk(n){n=wr(n,ji);const e=wr(n.firestore,as),t=Lo(e),r=new Tb(e);return function dk(n,e){const t=new Vi;return n.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return(r=(0,rt.Z)(function*(a,l,p){try{const b=yield function(A,L){const G=kt(A);return G.persistence.runTransaction("read document","readonly",K=>G.localDocuments.getDocument(K,L))}(a,l);b.isFoundDocument()?p.resolve(b):b.isNoDocument()?p.resolve(null):p.reject(new gt(Ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(b){const A=X1(b,`Failed to get document '${l} from cache`);p.reject(A)}}),function(a,l,p){return r.apply(this,arguments)})(yield oS(n),e,t);var r})),t.promise}(t,n._key).then(a=>new Vy(e,r,n._key,a,new Cb(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function eN(n){n=wr(n,ji);const e=wr(n.firestore,as);return QA(Lo(e),n._key,{source:"server"}).then(t=>yS(e,n,t))}(this._delegate):function Xk(n){n=wr(n,ji);const e=wr(n.firestore,as);return QA(Lo(e),n._key).then(t=>yS(e,n,t))}(this._delegate),t.then(r=>new UC(this.firestore,new Vy(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ed(this.firestore,this._delegate.withConverter(e?Db.getInstance(this.firestore,e):null))}}function gc(n,e,t){return n.message=n.message.replace(e,t),n}function Fx(n){for(const e of n)if("object"==typeof e&&!_S(e))return e;return{}}function Ux(n,e){var t,r;let a;return a=_S(n[0])?n[0]:_S(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(r=a.complete)||void 0===r?void 0:r.bind(a)}}class UC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ed(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return vx(this._delegate,e._delegate)}}class BC extends UC{data(e){const t=this._delegate.data(e);return function Nu(n,e){n||Ht()}(void 0!==t),t}}class mc{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ST(e)}where(e,t,r){try{return new mc(this.firestore,t0(this._delegate,function jk(n,e,t){const r=e,a=TT("where",n);return new Vk(a,r,t)}(e,t,r)))}catch(a){throw gc(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new mc(this.firestore,t0(this._delegate,function Hk(n,e="asc"){const t=e,r=TT("orderBy",n);return new $k(r,t)}(e,t)))}catch(r){throw gc(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new mc(this.firestore,t0(this._delegate,function zk(n){return rx("limit",n),new wx("limit",n,"F")}(e)))}catch(t){throw gc(t,"limit()","Query.limit()")}}limitToLast(e){try{return new mc(this.firestore,t0(this._delegate,function Gk(n){return rx("limitToLast",n),new wx("limitToLast",n,"L")}(e)))}catch(t){throw gc(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new mc(this.firestore,t0(this._delegate,function qk(...n){return new bx("startAt",n,!0)}(...e)))}catch(t){throw gc(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new mc(this.firestore,t0(this._delegate,function Wk(...n){return new bx("startAfter",n,!1)}(...e)))}catch(t){throw gc(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new mc(this.firestore,t0(this._delegate,function Kk(...n){return new Ex("endBefore",n,!1)}(...e)))}catch(t){throw gc(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new mc(this.firestore,t0(this._delegate,function Zk(...n){return new Ex("endAt",n,!0)}(...e)))}catch(t){throw gc(t,"endAt()","Query.endAt()")}}isEqual(e){return ax(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function nN(n){n=wr(n,Bu);const e=wr(n.firestore,as),t=Lo(e),r=new Tb(e);return function fk(n,e){const t=new Vi;return n.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return(r=(0,rt.Z)(function*(a,l,p){try{const b=yield lT(a,l,!0),A=new UA(l,b.ji),L=A.Ku(b.documents),G=A.applyChanges(L,!1);p.resolve(G.snapshot)}catch(b){const A=X1(b,`Failed to execute query '${l} against cache`);p.reject(A)}}),function(a,l,p){return r.apply(this,arguments)})(yield oS(n),e,t);var r})),t.promise}(t,n._query).then(a=>new e0(e,r,n,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function rN(n){n=wr(n,Bu);const e=wr(n.firestore,as),t=Lo(e),r=new Tb(e);return XA(t,n._query,{source:"server"}).then(a=>new e0(e,r,n,a))}(this._delegate):function tN(n){n=wr(n,Bu);const e=wr(n.firestore,as),t=Lo(e),r=new Tb(e);return _x(n._query),XA(t,n._query).then(a=>new e0(e,r,n,a))}(this._delegate),t.then(r=>new wS(this.firestore,new e0(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Fx(e),r=Ux(e,a=>new wS(this.firestore,new e0(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return Mx(this._delegate,t,r)}withConverter(e){return new mc(this.firestore,this._delegate.withConverter(e?Db.getInstance(this.firestore,e):null))}}class _N{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new BC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class wS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new mc(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new BC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new _N(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new BC(this._firestore,r))})}isEqual(e){return vx(this._delegate,e._delegate)}}class iI extends mc{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ed(this.firestore,e):null}doc(e){try{return new ed(this.firestore,void 0===e?_T(this._delegate):_T(this._delegate,e))}catch(t){throw gc(t,"doc()","CollectionReference.doc()")}}add(e){return function sN(n,e){const t=wr(n.firestore,as),r=_T(n),a=DT(n.converter,e);return rI(t,[ET(Eb(n.firestore),"addDoc",r._key,a,null!==n.converter,{}).toMutation(r._key,$n.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ed(this.firestore,t))}isEqual(e){return ox(this._delegate,e._delegate)}withConverter(e){return new iI(this.firestore,this._delegate.withConverter(e?Db.getInstance(this.firestore,e):null))}}function Sb(n){return wr(n,ji)}class bS{constructor(...e){this._delegate=new By(...e)}static documentId(){return new bS(vi.keyField().canonicalString())}isEqual(e){return(e=(0,Tn.m9)(e))instanceof By&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ab{constructor(e){this._delegate=e}static serverTimestamp(){const e=function lN(){return new hS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ab(e)}static delete(){const e=function cN(){return new NC("deleteField")}();return e._methodName="FieldValue.delete",new Ab(e)}static arrayUnion(...e){const t=function hN(...n){return new Pk("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ab(t)}static arrayRemove(...e){const t=function dN(...n){return new Ok("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ab(t)}static increment(e){const t=function fN(n){return new Lk("increment",n)}(e);return t._methodName="FieldValue.increment",new Ab(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const wN={Firestore:Px,GeoPoint:wT,Timestamp:Jr,Blob:FC,Transaction:Ox,WriteBatch:Lx,DocumentReference:ed,DocumentSnapshot:UC,Query:mc,QueryDocumentSnapshot:BC,QuerySnapshot:wS,CollectionReference:iI,FieldPath:bS,FieldValue:Ab,setLogLevel:function vN(n){!function nb(n){Ul.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function EN(n){(function bN(n,e){n.INTERNAL.registerComponent(new Pd.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps(Object.assign({},wN)))})(n,(e,t)=>new Px(e,t,new yN)),n.registerVersion("@firebase/firestore-compat","0.1.20")}(xl.Z);var IN=M(6451),AT=M(5363),CN=M(6063);class TN extends Bs.x{constructor(e=1/0,t=1/0,r=CN.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:a,_timestampProvider:l,_windowTime:p}=this;t||(r.push(e),!a&&r.push(l.now()+p)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:a}=this,l=a.slice();for(let p=0;p<l.length&&!e.closed;p+=r?1:2)e.next(l[p]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:a}=this,l=(a?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!a){const p=t.now();let b=0;for(let A=1;A<r.length&&r[A]<=p;A+=2)b=A;b&&r.splice(0,b+1)}}}var DN=M(3099);function Bx(n,e,t){let r,a=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,DN.B)({connector:()=>new TN(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function Vx(n,e){return(0,yu.m)(e)?fi(()=>n,e):fi(()=>n)}var ES=M(9468);const jx=new D.OlP("angularfire2.auth.use-emulator"),$x=new D.OlP("angularfire2.auth.settings"),Hx=new D.OlP("angularfire2.auth.tenant-id"),zx=new D.OlP("angularfire2.auth.langugage-code"),Gx=new D.OlP("angularfire2.auth.use-device-language"),qx=new D.OlP("angularfire.auth.persistence"),Wx=(n,e,t,r,a,l,p,b)=>(0,Es.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const A=e.runOutsideAngular(()=>n.auth());if(t&&A.useEmulator(...t),r&&(A.tenantId=r),A.languageCode=a,l&&A.useDeviceLanguage(),p)for(const[L,G]of Object.entries(p))A.settings[L]=G;return b&&A.setPersistence(b),A},[t,r,a,l,p,b]);let Kx=(()=>{class n{constructor(t,r,a,l,p,b,A,L,G,K,oe,ie){const Ce=new Bs.x,ft=nn(void 0).pipe((0,AT.Q)(p.outsideAngular),fi(()=>l.runOutsideAngular(()=>Promise.resolve().then(M.bind(M,3677)))),(0,En.U)(()=>(0,Es.on)(t,l,r)),(0,En.U)(yt=>Wx(yt,l,b,L,G,K,A,oe)),Bx({bufferSize:1,refCount:!1}));if(bc(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=nn(null);else{ft.pipe(ua()).subscribe();const Xt=ft.pipe(fi(zt=>zt.getRedirectResult().then(ln=>ln,()=>null)),yi.iC,Bx({bufferSize:1,refCount:!1})),At=ft.pipe(fi(zt=>new Lr.y(ln=>({unsubscribe:l.runOutsideAngular(()=>zt.onAuthStateChanged(yn=>ln.next(yn),yn=>ln.error(yn),()=>ln.complete()))})))),Zt=ft.pipe(fi(zt=>new Lr.y(ln=>({unsubscribe:l.runOutsideAngular(()=>zt.onIdTokenChanged(yn=>ln.next(yn),yn=>ln.error(yn),()=>ln.complete()))}))));this.authState=Xt.pipe(Vx(At),(0,ES.R)(p.outsideAngular),(0,AT.Q)(p.insideAngular)),this.user=Xt.pipe(Vx(Zt),(0,ES.R)(p.outsideAngular),(0,AT.Q)(p.insideAngular)),this.idToken=this.user.pipe(fi(zt=>zt?(0,gr.D)(zt.getIdToken()):nn(null))),this.idTokenResult=this.user.pipe(fi(zt=>zt?(0,gr.D)(zt.getIdTokenResult()):nn(null))),this.credential=(0,IN.T)(Xt,Ce,this.authState.pipe(ii(zt=>!zt))).pipe((0,En.U)(zt=>(null==zt?void 0:zt.user)?zt:null),(0,ES.R)(p.outsideAngular),(0,AT.Q)(p.insideAngular))}return(0,Es.pX)(this,ft,l,{spy:{apply:(yt,Xt,At)=>{(yt.startsWith("signIn")||yt.startsWith("createUser"))&&At.then(Zt=>Ce.next(Zt))}}})}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Es.Dh),D.LFG(Es.xv,8),D.LFG(D.Lbi),D.LFG(D.R0b),D.LFG(yi.HU),D.LFG(jx,8),D.LFG($x,8),D.LFG(Hx,8),D.LFG(zx,8),D.LFG(Gx,8),D.LFG(qx,8),D.LFG(Yv,8))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Zx(n,e){return function AN(n,e=Pv.z){return new Lr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function IS(n,e){return Zx(n,e).pipe((0,En.U)(t=>({payload:t,type:"query"})))}function xT(n,e){return IS(n,e).pipe(jo(void 0),n_(),(0,En.U)(([t,r])=>{const a=r.payload.docChanges(),l=a.map(p=>({type:p.type,payload:p}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((p,b)=>{const A=a.find(G=>G.doc.ref.isEqual(p.ref)),L=null==t?void 0:t.payload.docs.find(G=>G.ref.isEqual(p.ref));A&&JSON.stringify(A.doc.metadata)===JSON.stringify(p.metadata)||!A&&L&&JSON.stringify(L.metadata)===JSON.stringify(p.metadata)||l.push({type:"modified",payload:{oldIndex:b,newIndex:b,type:"modified",doc:p}})}),l}))}function Yx(n,e,t){return xT(n,t).pipe($o((r,a)=>function MN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function RN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return CS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return CS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return CS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,a.map(l=>l.payload),e),[]),function WE(n,e=Bo.y){return n=null!=n?n:jm,(0,Ii.e)((t,r)=>{let a,l=!0;t.subscribe((0,ki.x)(r,p=>{const b=e(p);(l||!n(a,b))&&(l=!1,a=b,r.next(p))}))})}(),(0,En.U)(r=>r.map(a=>({type:a.type,payload:a}))))}function CS(n,e,t,...r){const a=n.slice();return a.splice(e,t,...r),a}function Qx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Xx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=xT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,En.U)(r=>r.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(jo(void 0),n_(),ii(([r,a])=>a.length>0||!r),(0,En.U)(([r,a])=>a),yi.iC)}auditTrail(e){return this.stateChanges(e).pipe($o((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Qx(e);return Yx(this.query,t,this.afs.schedulers.outsideAngular).pipe(yi.iC)}valueChanges(e={}){return IS(this.query,this.afs.schedulers.outsideAngular).pipe((0,En.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),yi.iC)}get(e){return(0,gr.D)(this.query.get(e)).pipe(yi.iC)}add(e){return this.ref.add(e)}doc(e){return new Jx(this.ref.doc(e),this.afs)}}class Jx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:a,query:l}=nM(r,t);return new Xx(a,l,this.afs)}snapshotChanges(){return function xN(n,e){return Zx(n,e).pipe(jo(void 0),n_(),(0,En.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(yi.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,En.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,gr.D)(this.ref.get(e)).pipe(yi.iC)}}class kN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?xT(this.query,this.afs.schedulers.outsideAngular).pipe((0,En.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ii(t=>t.length>0),yi.iC):xT(this.query,this.afs.schedulers.outsideAngular).pipe(yi.iC)}auditTrail(e){return this.stateChanges(e).pipe($o((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Qx(e);return Yx(this.query,t,this.afs.schedulers.outsideAngular).pipe(yi.iC)}valueChanges(e={}){return IS(this.query,this.afs.schedulers.outsideAngular).pipe((0,En.U)(r=>r.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),yi.iC)}get(e){return(0,gr.D)(this.query.get(e)).pipe(yi.iC)}}const eM=new D.OlP("angularfire2.enableFirestorePersistence"),tM=new D.OlP("angularfire2.firestore.persistenceSettings"),NN=new D.OlP("angularfire2.firestore.settings"),PN=new D.OlP("angularfire2.firestore.use-emulator");function nM(n,e=(t=>t)){return{query:e(n),ref:n}}let ON=(()=>{class n{constructor(t,r,a,l,p,b,A,L,G,K,oe,ie,Ce,ft,yt,Xt,At){this.schedulers=A;const Zt=(0,Es.on)(t,b,r),zt=G;K&&Wx(Zt,b,oe,Ce,ft,yt,ie,Xt),[this.firestore,this.persistenceEnabled$]=(0,Es.cc)(`${Zt.name}.firestore`,"AngularFirestore",Zt.name,()=>{const ln=b.runOutsideAngular(()=>Zt.firestore());if(l&&ln.settings(l),zt&&ln.useEmulator(...zt),a&&!bc(p)){const yn=()=>{try{return(0,gr.D)(ln.enablePersistence(L||void 0).then(()=>!0,()=>!1))}catch(hr){return"undefined"!=typeof console&&console.warn(hr),nn(!1)}};return[ln,b.runOutsideAngular(yn)]}return[ln,nn(!1)]},[l,zt,a])}collection(t,r){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:p}=nM(a,r),b=this.schedulers.ngZone.run(()=>l);return new Xx(b,p,this)}collectionGroup(t,r){const a=r||(p=>p),l=this.firestore.collectionGroup(t);return new kN(a(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>r);return new Jx(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(D.LFG(Es.Dh),D.LFG(Es.xv,8),D.LFG(eM,8),D.LFG(NN,8),D.LFG(D.Lbi),D.LFG(D.R0b),D.LFG(yi.HU),D.LFG(tM,8),D.LFG(PN,8),D.LFG(Kx,8),D.LFG(jx,8),D.LFG($x,8),D.LFG(Hx,8),D.LFG(zx,8),D.LFG(Gx,8),D.LFG(qx,8),D.LFG(Yv,8))},n.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),LN=(()=>{class n{constructor(){zI.Z.registerVersion("angularfire",yi.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:eM,useValue:!0},{provide:tM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=D.oAB({type:n}),n.\u0275inj=D.cJS({providers:[ON]}),n})(),FN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=D.oAB({type:n,bootstrap:[KI]}),n.\u0275inj=D.cJS({providers:[Cm],imports:[[Js,cI,Cm,Es.hO.initializeApp(t__firebase),LN]]}),n})();(0,D.G48)(),Dc().bootstrapModule(FN).catch(n=>console.error(n))},5021:(jt,et,M)=>{"use strict";M.r(et),M.d(et,{entries:()=>Et,keys:()=>ot,map:()=>Ue,nest:()=>xe,set:()=>Rt,values:()=>Qe});var D="$";function be(){}function Q(ge,Me){var ht=new be;if(ge instanceof be)ge.each(function(ut,vt){ht.set(vt,ut)});else if(Array.isArray(ge)){var Ke,bt=-1,We=ge.length;if(null==Me)for(;++bt<We;)ht.set(bt,ge[bt]);else for(;++bt<We;)ht.set(Me(Ke=ge[bt],bt,ge),Ke)}else if(ge)for(var Xe in ge)ht.set(Xe,ge[Xe]);return ht}be.prototype=Q.prototype={constructor:be,has:function(ge){return D+ge in this},get:function(ge){return this[D+ge]},set:function(ge,Me){return this[D+ge]=Me,this},remove:function(ge){var Me=D+ge;return Me in this&&delete this[Me]},clear:function(){for(var ge in this)ge[0]===D&&delete this[ge]},keys:function(){var ge=[];for(var Me in this)Me[0]===D&&ge.push(Me.slice(1));return ge},values:function(){var ge=[];for(var Me in this)Me[0]===D&&ge.push(this[Me]);return ge},entries:function(){var ge=[];for(var Me in this)Me[0]===D&&ge.push({key:Me.slice(1),value:this[Me]});return ge},size:function(){var ge=0;for(var Me in this)Me[0]===D&&++ge;return ge},empty:function(){for(var ge in this)if(ge[0]===D)return!1;return!0},each:function(ge){for(var Me in this)Me[0]===D&&ge(this[Me],Me.slice(1),this)}};const Ue=Q;function xe(){var ht,bt,We,ge=[],Me=[];function Ke(ut,vt,ce,Ze){if(vt>=ge.length)return null!=ht&&ut.sort(ht),null!=bt?bt(ut):ut;for(var Ye,Ne,Wt,fe=-1,Re=ut.length,Te=ge[vt++],dt=Ue(),at=ce();++fe<Re;)(Wt=dt.get(Ye=Te(Ne=ut[fe])+""))?Wt.push(Ne):dt.set(Ye,[Ne]);return dt.each(function(Jt,_t){Ze(at,_t,Ke(Jt,vt,ce,Ze))}),at}function Xe(ut,vt){if(++vt>ge.length)return ut;var ce,Ze=Me[vt-1];return null!=bt&&vt>=ge.length?ce=ut.entries():(ce=[],ut.each(function(fe,Re){ce.push({key:Re,values:Xe(fe,vt)})})),null!=Ze?ce.sort(function(fe,Re){return Ze(fe.key,Re.key)}):ce}return We={object:function(ut){return Ke(ut,0,Be,Ve)},map:function(ut){return Ke(ut,0,Le,Fe)},entries:function(ut){return Xe(Ke(ut,0,Le,Fe),0)},key:function(ut){return ge.push(ut),We},sortKeys:function(ut){return Me[ge.length-1]=ut,We},sortValues:function(ut){return ht=ut,We},rollup:function(ut){return bt=ut,We}}}function Be(){return{}}function Ve(ge,Me,ht){ge[Me]=ht}function Le(){return Ue()}function Fe(ge,Me,ht){ge.set(Me,ht)}function ae(){}var ue=Ue.prototype;function ye(ge,Me){var ht=new ae;if(ge instanceof ae)ge.each(function(Ke){ht.add(Ke)});else if(ge){var bt=-1,We=ge.length;if(null==Me)for(;++bt<We;)ht.add(ge[bt]);else for(;++bt<We;)ht.add(Me(ge[bt],bt,ge))}return ht}ae.prototype=ye.prototype={constructor:ae,has:ue.has,add:function(ge){return this[D+(ge+="")]=ge,this},remove:ue.remove,clear:ue.clear,values:ue.keys,size:ue.size,empty:ue.empty,each:ue.each};const Rt=ye;function ot(ge){var Me=[];for(var ht in ge)Me.push(ht);return Me}function Qe(ge){var Me=[];for(var ht in ge)Me.push(ge[ht]);return Me}function Et(ge){var Me=[];for(var ht in ge)Me.push({key:ht,value:ge[ht]});return Me}},4013:(jt,et,M)=>{"use strict";M.r(et),M.d(et,{creator:()=>Be,customEvent:()=>Xe,event:()=>Qe,local:()=>Le,matcher:()=>Rt,mouse:()=>ce,namespace:()=>Q,namespaces:()=>be,select:()=>ds,selectAll:()=>ho,selection:()=>lr,selector:()=>fe,selectorAll:()=>Ye,style:()=>vn,touch:()=>qr,touches:()=>fo,window:()=>Rr});var D="http://www.w3.org/1999/xhtml";const be={svg:"http://www.w3.org/2000/svg",xhtml:D,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Q(J){var me=J+="",tt=me.indexOf(":");return tt>=0&&"xmlns"!==(me=J.slice(0,tt))&&(J=J.slice(tt+1)),be.hasOwnProperty(me)?{space:be[me],local:J}:J}function Ue(J){return function(){var me=this.ownerDocument,tt=this.namespaceURI;return tt===D&&me.documentElement.namespaceURI===D?me.createElement(J):me.createElementNS(tt,J)}}function xe(J){return function(){return this.ownerDocument.createElementNS(J.space,J.local)}}function Be(J){var me=Q(J);return(me.local?xe:Ue)(me)}var Ve=0;function Le(){return new Fe}function Fe(){this._="@"+(++Ve).toString(36)}Fe.prototype=Le.prototype={constructor:Fe,get:function(J){for(var me=this._;!(me in J);)if(!(J=J.parentNode))return;return J[me]},set:function(J,me){return J[this._]=me},remove:function(J){return this._ in J&&delete J[this._]},toString:function(){return this._}};var ae=function(J){return function(){return this.matches(J)}};if("undefined"!=typeof document){var ue=document.documentElement;if(!ue.matches){var ye=ue.webkitMatchesSelector||ue.msMatchesSelector||ue.mozMatchesSelector||ue.oMatchesSelector;ae=function(J){return function(){return ye.call(this,J)}}}}const Rt=ae;var ot={},Qe=null;function ge(J,me,tt){return J=Me(J,me,tt),function(Je){var Tt=Je.relatedTarget;(!Tt||Tt!==this&&!(8&Tt.compareDocumentPosition(this)))&&J.call(this,Je)}}function Me(J,me,tt){return function(Je){var Tt=Qe;Qe=Je;try{J.call(this,this.__data__,me,tt)}finally{Qe=Tt}}}function ht(J){return J.trim().split(/^|\s+/).map(function(me){var tt="",Je=me.indexOf(".");return Je>=0&&(tt=me.slice(Je+1),me=me.slice(0,Je)),{type:me,name:tt}})}function bt(J){return function(){var me=this.__on;if(me){for(var Ut,tt=0,Je=-1,Tt=me.length;tt<Tt;++tt)Ut=me[tt],J.type&&Ut.type!==J.type||Ut.name!==J.name?me[++Je]=Ut:this.removeEventListener(Ut.type,Ut.listener,Ut.capture);++Je?me.length=Je:delete this.__on}}}function We(J,me,tt){var Je=ot.hasOwnProperty(J.type)?ge:Me;return function(Tt,Ut,un){var Bt,Lt=this.__on,_n=Je(me,Ut,un);if(Lt)for(var Ln=0,dr=Lt.length;Ln<dr;++Ln)if((Bt=Lt[Ln]).type===J.type&&Bt.name===J.name)return this.removeEventListener(Bt.type,Bt.listener,Bt.capture),this.addEventListener(Bt.type,Bt.listener=_n,Bt.capture=tt),void(Bt.value=me);this.addEventListener(J.type,_n,tt),Bt={type:J.type,name:J.name,value:me,listener:_n,capture:tt},Lt?Lt.push(Bt):this.__on=[Bt]}}function Xe(J,me,tt,Je){var Tt=Qe;J.sourceEvent=Qe,Qe=J;try{return me.apply(tt,Je)}finally{Qe=Tt}}function ut(){for(var me,J=Qe;me=J.sourceEvent;)J=me;return J}function vt(J,me){var tt=J.ownerSVGElement||J;if(tt.createSVGPoint){var Je=tt.createSVGPoint();return Je.x=me.clientX,Je.y=me.clientY,[(Je=Je.matrixTransform(J.getScreenCTM().inverse())).x,Je.y]}var Tt=J.getBoundingClientRect();return[me.clientX-Tt.left-J.clientLeft,me.clientY-Tt.top-J.clientTop]}function ce(J){var me=ut();return me.changedTouches&&(me=me.changedTouches[0]),vt(J,me)}function Ze(){}function fe(J){return null==J?Ze:function(){return this.querySelector(J)}}function Te(){return[]}function Ye(J){return null==J?Te:function(){return this.querySelectorAll(J)}}function Wt(J){return new Array(J.length)}function Jt(J,me){this.ownerDocument=J.ownerDocument,this.namespaceURI=J.namespaceURI,this._next=null,this._parent=J,this.__data__=me}function cr(J,me,tt,Je,Tt,Ut){for(var Lt,un=0,Bt=me.length,_n=Ut.length;un<_n;++un)(Lt=me[un])?(Lt.__data__=Ut[un],Je[un]=Lt):tt[un]=new Jt(J,Ut[un]);for(;un<Bt;++un)(Lt=me[un])&&(Tt[un]=Lt)}function Hn(J,me,tt,Je,Tt,Ut,un){var Lt,Bt,Pr,_n={},Ln=me.length,dr=Ut.length,zn=new Array(Ln);for(Lt=0;Lt<Ln;++Lt)(Bt=me[Lt])&&(zn[Lt]=Pr="$"+un.call(Bt,Bt.__data__,Lt,me),Pr in _n?Tt[Lt]=Bt:_n[Pr]=Bt);for(Lt=0;Lt<dr;++Lt)(Bt=_n[Pr="$"+un.call(J,Ut[Lt],Lt,Ut)])?(Je[Lt]=Bt,Bt.__data__=Ut[Lt],_n[Pr]=null):tt[Lt]=new Jt(J,Ut[Lt]);for(Lt=0;Lt<Ln;++Lt)(Bt=me[Lt])&&_n[zn[Lt]]===Bt&&(Tt[Lt]=Bt)}function us(J,me){return J<me?-1:J>me?1:J>=me?0:NaN}function pn(J){return function(){this.removeAttribute(J)}}function ks(J){return function(){this.removeAttributeNS(J.space,J.local)}}function Mr(J,me){return function(){this.setAttribute(J,me)}}function Ir(J,me){return function(){this.setAttributeNS(J.space,J.local,me)}}function Da(J,me){return function(){var tt=me.apply(this,arguments);null==tt?this.removeAttribute(J):this.setAttribute(J,tt)}}function Ns(J,me){return function(){var tt=me.apply(this,arguments);null==tt?this.removeAttributeNS(J.space,J.local):this.setAttributeNS(J.space,J.local,tt)}}function Rr(J){return J.ownerDocument&&J.ownerDocument.defaultView||J.document&&J||J.defaultView}function Ks(J){return function(){this.style.removeProperty(J)}}function ls(J,me,tt){return function(){this.style.setProperty(J,me,tt)}}function Wn(J,me,tt){return function(){var Je=me.apply(this,arguments);null==Je?this.style.removeProperty(J):this.style.setProperty(J,Je,tt)}}function vn(J,me){return J.style.getPropertyValue(me)||Rr(J).getComputedStyle(J,null).getPropertyValue(me)}function wi(J){return function(){delete this[J]}}function Hi(J,me){return function(){this[J]=me}}function Un(J,me){return function(){var tt=me.apply(this,arguments);null==tt?delete this[J]:this[J]=tt}}function Mi(J){return J.trim().split(/^|\s+/)}function ui(J){return J.classList||new sn(J)}function sn(J){this._node=J,this._names=Mi(J.getAttribute("class")||"")}function ve(J,me){for(var tt=ui(J),Je=-1,Tt=me.length;++Je<Tt;)tt.add(me[Je])}function se(J,me){for(var tt=ui(J),Je=-1,Tt=me.length;++Je<Tt;)tt.remove(me[Je])}function Ee(J){return function(){ve(this,J)}}function Ie(J){return function(){se(this,J)}}function ne(J,me){return function(){(me.apply(this,arguments)?ve:se)(this,J)}}function It(){this.textContent=""}function Gt(J){return function(){this.textContent=J}}function Dn(J){return function(){var me=J.apply(this,arguments);this.textContent=null==me?"":me}}function or(){this.innerHTML=""}function Bn(J){return function(){this.innerHTML=J}}function Gr(J){return function(){var me=J.apply(this,arguments);this.innerHTML=null==me?"":me}}function Aa(){this.nextSibling&&this.parentNode.appendChild(this)}function xa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fo(){return null}function hs(){var J=this.parentNode;J&&J.removeChild(this)}function nu(J,me,tt){var Je=Rr(J),Tt=Je.CustomEvent;"function"==typeof Tt?Tt=new Tt(me,tt):(Tt=Je.document.createEvent("Event"),tt?(Tt.initEvent(me,tt.bubbles,tt.cancelable),Tt.detail=tt.detail):Tt.initEvent(me,!1,!1)),J.dispatchEvent(Tt)}function Xo(J,me){return function(){return nu(this,J,me)}}function ci(J,me){return function(){return nu(this,J,me.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(ot={mouseenter:"mouseover",mouseleave:"mouseout"})),Jt.prototype={constructor:Jt,appendChild:function(J){return this._parent.insertBefore(J,this._next)},insertBefore:function(J,me){return this._parent.insertBefore(J,me)},querySelector:function(J){return this._parent.querySelector(J)},querySelectorAll:function(J){return this._parent.querySelectorAll(J)}},sn.prototype={add:function(J){this._names.indexOf(J)<0&&(this._names.push(J),this._node.setAttribute("class",this._names.join(" ")))},remove:function(J){var me=this._names.indexOf(J);me>=0&&(this._names.splice(me,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(J){return this._names.indexOf(J)>=0}};var ni=[null];function Ct(J,me){this._groups=J,this._parents=me}function on(){return new Ct([[document.documentElement]],ni)}Ct.prototype=on.prototype={constructor:Ct,select:function Re(J){"function"!=typeof J&&(J=fe(J));for(var me=this._groups,tt=me.length,Je=new Array(tt),Tt=0;Tt<tt;++Tt)for(var Bt,_n,Ut=me[Tt],un=Ut.length,Lt=Je[Tt]=new Array(un),Ln=0;Ln<un;++Ln)(Bt=Ut[Ln])&&(_n=J.call(Bt,Bt.__data__,Ln,Ut))&&("__data__"in Bt&&(_n.__data__=Bt.__data__),Lt[Ln]=_n);return new Ct(Je,this._parents)},selectAll:function Ne(J){"function"!=typeof J&&(J=Ye(J));for(var me=this._groups,tt=me.length,Je=[],Tt=[],Ut=0;Ut<tt;++Ut)for(var Bt,un=me[Ut],Lt=un.length,_n=0;_n<Lt;++_n)(Bt=un[_n])&&(Je.push(J.call(Bt,Bt.__data__,_n,un)),Tt.push(Bt));return new Ct(Je,Tt)},filter:function dt(J){"function"!=typeof J&&(J=Rt(J));for(var me=this._groups,tt=me.length,Je=new Array(tt),Tt=0;Tt<tt;++Tt)for(var Bt,Ut=me[Tt],un=Ut.length,Lt=Je[Tt]=[],_n=0;_n<un;++_n)(Bt=Ut[_n])&&J.call(Bt,Bt.__data__,_n,Ut)&&Lt.push(Bt);return new Ct(Je,this._parents)},data:function Zn(J,me){if(!J)return Pr=new Array(this.size()),_n=-1,this.each(function(Rf){Pr[++_n]=Rf}),Pr;var tt=me?Hn:cr,Je=this._parents,Tt=this._groups;"function"!=typeof J&&(J=function _t(J){return function(){return J}}(J));for(var Ut=Tt.length,un=new Array(Ut),Lt=new Array(Ut),Bt=new Array(Ut),_n=0;_n<Ut;++_n){var Ln=Je[_n],dr=Tt[_n],zn=dr.length,Pr=J.call(Ln,Ln&&Ln.__data__,_n,Je),Jo=Pr.length,zi=Lt[_n]=new Array(Jo),fs=un[_n]=new Array(Jo);tt(Ln,dr,zi,fs,Bt[_n]=new Array(zn),Pr,me);for(var Zs,po,iu=0,ps=0;iu<Jo;++iu)if(Zs=zi[iu]){for(iu>=ps&&(ps=iu+1);!(po=fs[ps])&&++ps<Jo;);Zs._next=po||null}}return(un=new Ct(un,Je))._enter=Lt,un._exit=Bt,un},enter:function at(){return new Ct(this._enter||this._groups.map(Wt),this._parents)},exit:function xr(){return new Ct(this._exit||this._groups.map(Wt),this._parents)},merge:function Yn(J){for(var me=this._groups,tt=J._groups,Je=me.length,Ut=Math.min(Je,tt.length),un=new Array(Je),Lt=0;Lt<Ut;++Lt)for(var zn,Bt=me[Lt],_n=tt[Lt],Ln=Bt.length,dr=un[Lt]=new Array(Ln),Pr=0;Pr<Ln;++Pr)(zn=Bt[Pr]||_n[Pr])&&(dr[Pr]=zn);for(;Lt<Je;++Lt)un[Lt]=me[Lt];return new Ct(un,this._parents)},order:function On(){for(var J=this._groups,me=-1,tt=J.length;++me<tt;)for(var un,Je=J[me],Tt=Je.length-1,Ut=Je[Tt];--Tt>=0;)(un=Je[Tt])&&(Ut&&Ut!==un.nextSibling&&Ut.parentNode.insertBefore(un,Ut),Ut=un);return this},sort:function xs(J){function me(dr,zn){return dr&&zn?J(dr.__data__,zn.__data__):!dr-!zn}J||(J=us);for(var tt=this._groups,Je=tt.length,Tt=new Array(Je),Ut=0;Ut<Je;++Ut){for(var _n,un=tt[Ut],Lt=un.length,Bt=Tt[Ut]=new Array(Lt),Ln=0;Ln<Lt;++Ln)(_n=un[Ln])&&(Bt[Ln]=_n);Bt.sort(me)}return new Ct(Tt,this._parents).order()},call:function ti(){var J=arguments[0];return arguments[0]=this,J.apply(null,arguments),this},nodes:function oi(){var J=new Array(this.size()),me=-1;return this.each(function(){J[++me]=this}),J},node:function Ms(){for(var J=this._groups,me=0,tt=J.length;me<tt;++me)for(var Je=J[me],Tt=0,Ut=Je.length;Tt<Ut;++Tt){var un=Je[Tt];if(un)return un}return null},size:function Rs(){var J=0;return this.each(function(){++J}),J},empty:function cs(){return!this.node()},each:function Ws(J){for(var me=this._groups,tt=0,Je=me.length;tt<Je;++tt)for(var Lt,Tt=me[tt],Ut=0,un=Tt.length;Ut<un;++Ut)(Lt=Tt[Ut])&&J.call(Lt,Lt.__data__,Ut,Tt);return this},attr:function ai(J,me){var tt=Q(J);if(arguments.length<2){var Je=this.node();return tt.local?Je.getAttributeNS(tt.space,tt.local):Je.getAttribute(tt)}return this.each((null==me?tt.local?ks:pn:"function"==typeof me?tt.local?Ns:Da:tt.local?Ir:Mr)(tt,me))},style:function rn(J,me,tt){return arguments.length>1?this.each((null==me?Ks:"function"==typeof me?Wn:ls)(J,me,null==tt?"":tt)):vn(this.node(),J)},property:function Ps(J,me){return arguments.length>1?this.each((null==me?wi:"function"==typeof me?Un:Hi)(J,me)):this.node()[J]},classed:function nt(J,me){var tt=Mi(J+"");if(arguments.length<2){for(var Je=ui(this.node()),Tt=-1,Ut=tt.length;++Tt<Ut;)if(!Je.contains(tt[Tt]))return!1;return!0}return this.each(("function"==typeof me?ne:me?Ee:Ie)(tt,me))},text:function ir(J){return arguments.length?this.each(null==J?It:("function"==typeof J?Dn:Gt)(J)):this.node().textContent},html:function Sa(J){return arguments.length?this.each(null==J?or:("function"==typeof J?Gr:Bn)(J)):this.node().innerHTML},raise:function Qo(){return this.each(Aa)},lower:function Vr(){return this.each(xa)},append:function kr(J){var me="function"==typeof J?J:Be(J);return this.select(function(){return this.appendChild(me.apply(this,arguments))})},insert:function Nr(J,me){var tt="function"==typeof J?J:Be(J),Je=null==me?Fo:"function"==typeof me?me:fe(me);return this.select(function(){return this.insertBefore(tt.apply(this,arguments),Je.apply(this,arguments)||null)})},remove:function $l(){return this.each(hs)},datum:function Uo(J){return arguments.length?this.property("__data__",J):this.node().__data__},on:function Ke(J,me,tt){var Tt,un,Je=ht(J+""),Ut=Je.length;if(!(arguments.length<2)){for(Lt=me?We:bt,null==tt&&(tt=!1),Tt=0;Tt<Ut;++Tt)this.each(Lt(Je[Tt],me,tt));return this}var Lt=this.node().__on;if(Lt)for(var Ln,Bt=0,_n=Lt.length;Bt<_n;++Bt)for(Tt=0,Ln=Lt[Bt];Tt<Ut;++Tt)if((un=Je[Tt]).type===Ln.type&&un.name===Ln.name)return Ln.value},dispatch:function ru(J,me){return this.each(("function"==typeof me?ci:Xo)(J,me))}};const lr=on;function ds(J){return"string"==typeof J?new Ct([[document.querySelector(J)]],[document.documentElement]):new Ct([[J]],ni)}function ho(J){return"string"==typeof J?new Ct([document.querySelectorAll(J)],[document.documentElement]):new Ct([null==J?[]:J],ni)}function qr(J,me,tt){arguments.length<3&&(tt=me,me=ut().changedTouches);for(var Ut,Je=0,Tt=me?me.length:0;Je<Tt;++Je)if((Ut=me[Je]).identifier===tt)return vt(J,Ut);return null}function fo(J,me){null==me&&(me=ut().touches);for(var tt=0,Je=me?me.length:0,Tt=new Array(Je);tt<Je;++tt)Tt[tt]=vt(J,me[tt]);return Tt}},5188:function(jt,et){!function(M){"use strict";var be=function(i,u){return i<u?-1:i>u?1:i>=u?0:NaN},Q=function(i){return 1===i.length&&(i=function Ue(i){return function(u,h){return be(i(u),h)}}(i)),{left:function(u,h,f,g){for(null==f&&(f=0),null==g&&(g=u.length);f<g;){var v=f+g>>>1;i(u[v],h)<0?f=v+1:g=v}return f},right:function(u,h,f,g){for(null==f&&(f=0),null==g&&(g=u.length);f<g;){var v=f+g>>>1;i(u[v],h)>0?g=v:f=v+1}return f}}};var xe=Q(be),Be=xe.right,Ve=xe.left;function Fe(i,u){return[i,u]}var ye=function(i){return null===i?NaN:+i},Rt=function(i,u){var E,I,h=i.length,f=0,g=-1,v=0,S=0;if(null==u)for(;++g<h;)isNaN(E=ye(i[g]))||(S+=(I=E-v)*(E-(v+=I/++f)));else for(;++g<h;)isNaN(E=ye(u(i[g],g,i)))||(S+=(I=E-v)*(E-(v+=I/++f)));if(f>1)return S/(f-1)},ot=function(i,u){var h=Rt(i,u);return h&&Math.sqrt(h)},Qe=function(i,u){var g,v,E,h=i.length,f=-1;if(null==u){for(;++f<h;)if(null!=(g=i[f])&&g>=g)for(v=E=g;++f<h;)null!=(g=i[f])&&(v>g&&(v=g),E<g&&(E=g))}else for(;++f<h;)if(null!=(g=u(i[f],f,i))&&g>=g)for(v=E=g;++f<h;)null!=(g=u(i[f],f,i))&&(v>g&&(v=g),E<g&&(E=g));return[v,E]},Et=Array.prototype,ge=Et.slice,Me=Et.map,ht=function(i){return function(){return i}},bt=function(i){return i},We=function(i,u,h){i=+i,u=+u,h=(g=arguments.length)<2?(u=i,i=0,1):g<3?1:+h;for(var f=-1,g=0|Math.max(0,Math.ceil((u-i)/h)),v=new Array(g);++f<g;)v[f]=i+f*h;return v},Ke=Math.sqrt(50),Xe=Math.sqrt(10),ut=Math.sqrt(2),vt=function(i,u,h){var v,E,I,f=u<i,g=-1;if(f&&(v=i,i=u,u=v),0===(I=ce(i,u,h))||!isFinite(I))return[];if(I>0)for(i=Math.ceil(i/I),u=Math.floor(u/I),E=new Array(v=Math.ceil(u-i+1));++g<v;)E[g]=(i+g)*I;else for(i=Math.floor(i*I),u=Math.ceil(u*I),E=new Array(v=Math.ceil(i-u+1));++g<v;)E[g]=(i-g)/I;return f&&E.reverse(),E};function ce(i,u,h){var f=(u-i)/Math.max(0,h),g=Math.floor(Math.log(f)/Math.LN10),v=f/Math.pow(10,g);return g>=0?(v>=Ke?10:v>=Xe?5:v>=ut?2:1)*Math.pow(10,g):-Math.pow(10,-g)/(v>=Ke?10:v>=Xe?5:v>=ut?2:1)}function Ze(i,u,h){var f=Math.abs(u-i)/Math.max(0,h),g=Math.pow(10,Math.floor(Math.log(f)/Math.LN10)),v=f/g;return v>=Ke?g*=10:v>=Xe?g*=5:v>=ut&&(g*=2),u<i?-g:g}var fe=function(i){return Math.ceil(Math.log(i.length)/Math.LN2)+1},Te=function(i,u,h){if(null==h&&(h=ye),f=i.length){if((u=+u)<=0||f<2)return+h(i[0],0,i);if(u>=1)return+h(i[f-1],f-1,i);var f,g=(f-1)*u,v=Math.floor(g),E=+h(i[v],v,i);return E+(+h(i[v+1],v+1,i)-E)*(g-v)}},Jt=function(i){for(var h,v,E,u=i.length,f=-1,g=0;++f<u;)g+=i[f].length;for(v=new Array(g);--u>=0;)for(h=(E=i[u]).length;--h>=0;)v[--g]=E[h];return v},_t=function(i,u){var g,v,h=i.length,f=-1;if(null==u){for(;++f<h;)if(null!=(g=i[f])&&g>=g)for(v=g;++f<h;)null!=(g=i[f])&&v>g&&(v=g)}else for(;++f<h;)if(null!=(g=u(i[f],f,i))&&g>=g)for(v=g;++f<h;)null!=(g=u(i[f],f,i))&&v>g&&(v=g);return v},xr=function(i){if(!(v=i.length))return[];for(var u=-1,h=_t(i,Yn),f=new Array(h);++u<h;)for(var v,g=-1,E=f[u]=new Array(v);++g<v;)E[g]=i[g][u];return f};function Yn(i){return i.length}var xs=Array.prototype.slice,us=function(i){return i};function Ws(i){return"translate("+(i+.5)+",0)"}function pn(i){return"translate(0,"+(i+.5)+")"}function ks(i){var u=Math.max(0,i.bandwidth()-1)/2;return i.round()&&(u=Math.round(u)),function(h){return i(h)+u}}function Mr(){return!this.__axis}function Ir(i,u){var h=[],f=null,g=null,v=6,E=6,I=3,S=1===i||4===i?-1:1,k=4===i||2===i?"x":"y",O=1===i||3===i?Ws:pn;function U(N){var V=null==f?u.ticks?u.ticks.apply(u,h):u.domain():f,H=null==g?u.tickFormat?u.tickFormat.apply(u,h):us:g,z=Math.max(v,0)+I,Y=u.range(),X=Y[0]+.5,he=Y[Y.length-1]+.5,ee=(u.bandwidth?ks:us)(u.copy()),De=N.selection?N.selection():N,Oe=De.selectAll(".domain").data([null]),Se=De.selectAll(".tick").data(V,u).order(),_e=Se.exit(),qe=Se.enter().append("g").attr("class","tick"),$e=Se.select("line"),St=Se.select("text");Oe=Oe.merge(Oe.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),Se=Se.merge(qe),$e=$e.merge(qe.append("line").attr("stroke","#000").attr(k+"2",S*v)),St=St.merge(qe.append("text").attr("fill","#000").attr(k,S*z).attr("dy",1===i?"0em":3===i?"0.71em":"0.32em")),N!==De&&(Oe=Oe.transition(N),Se=Se.transition(N),$e=$e.transition(N),St=St.transition(N),_e=_e.transition(N).attr("opacity",1e-6).attr("transform",function(mt){return isFinite(mt=ee(mt))?O(mt):this.getAttribute("transform")}),qe.attr("opacity",1e-6).attr("transform",function(mt){var st=this.parentNode.__axis;return O(st&&isFinite(st=st(mt))?st:ee(mt))})),_e.remove(),Oe.attr("d",4===i||2==i?"M"+S*E+","+X+"H0.5V"+he+"H"+S*E:"M"+X+","+S*E+"V0.5H"+he+"V"+S*E),Se.attr("opacity",1).attr("transform",function(mt){return O(ee(mt))}),$e.attr(k+"2",S*v),St.attr(k,S*z).text(H),De.filter(Mr).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===i?"start":4===i?"end":"middle"),De.each(function(){this.__axis=ee})}return U.scale=function(N){return arguments.length?(u=N,U):u},U.ticks=function(){return h=xs.call(arguments),U},U.tickArguments=function(N){return arguments.length?(h=null==N?[]:xs.call(N),U):h.slice()},U.tickValues=function(N){return arguments.length?(f=null==N?null:xs.call(N),U):f&&f.slice()},U.tickFormat=function(N){return arguments.length?(g=N,U):g},U.tickSize=function(N){return arguments.length?(v=E=+N,U):v},U.tickSizeInner=function(N){return arguments.length?(v=+N,U):v},U.tickSizeOuter=function(N){return arguments.length?(E=+N,U):E},U.tickPadding=function(N){return arguments.length?(I=+N,U):I},U}var Ks={value:function(){}};function ls(){for(var f,i=0,u=arguments.length,h={};i<u;++i){if(!(f=arguments[i]+"")||f in h)throw new Error("illegal type: "+f);h[f]=[]}return new Wn(h)}function Wn(i){this._=i}function rn(i,u){return i.trim().split(/^|\s+/).map(function(h){var f="",g=h.indexOf(".");if(g>=0&&(f=h.slice(g+1),h=h.slice(0,g)),h&&!u.hasOwnProperty(h))throw new Error("unknown type: "+h);return{type:h,name:f}})}function vn(i,u){for(var g,h=0,f=i.length;h<f;++h)if((g=i[h]).name===u)return g.value}function wi(i,u,h){for(var f=0,g=i.length;f<g;++f)if(i[f].name===u){i[f]=Ks,i=i.slice(0,f).concat(i.slice(f+1));break}return null!=h&&i.push({name:u,value:h}),i}Wn.prototype=ls.prototype={constructor:Wn,on:function(i,u){var g,h=this._,f=rn(i+"",h),v=-1,E=f.length;if(!(arguments.length<2)){if(null!=u&&"function"!=typeof u)throw new Error("invalid callback: "+u);for(;++v<E;)if(g=(i=f[v]).type)h[g]=wi(h[g],i.name,u);else if(null==u)for(g in h)h[g]=wi(h[g],i.name,null);return this}for(;++v<E;)if((g=(i=f[v]).type)&&(g=vn(h[g],i.name)))return g},copy:function(){var i={},u=this._;for(var h in u)i[h]=u[h].slice();return new Wn(i)},call:function(i,u){if((g=arguments.length-2)>0)for(var g,v,h=new Array(g),f=0;f<g;++f)h[f]=arguments[f+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(f=0,g=(v=this._[i]).length;f<g;++f)v[f].value.apply(u,h)},apply:function(i,u,h){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var f=this._[i],g=0,v=f.length;g<v;++g)f[g].value.apply(u,h)}};var Hi="http://www.w3.org/1999/xhtml",Un={svg:"http://www.w3.org/2000/svg",xhtml:Hi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ps=function(i){var u=i+="",h=u.indexOf(":");return h>=0&&"xmlns"!==(u=i.slice(0,h))&&(i=i.slice(h+1)),Un.hasOwnProperty(u)?{space:Un[u],local:i}:i};function Mi(i){return function(){var u=this.ownerDocument,h=this.namespaceURI;return h===Hi&&u.documentElement.namespaceURI===Hi?u.createElement(i):u.createElementNS(h,i)}}function ui(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}var sn=function(i){var u=Ps(i);return(u.local?ui:Mi)(u)},ve=0;function se(){return new Ee}function Ee(){this._="@"+(++ve).toString(36)}Ee.prototype=se.prototype={constructor:Ee,get:function(i){for(var u=this._;!(u in i);)if(!(i=i.parentNode))return;return i[u]},set:function(i,u){return i[this._]=u},remove:function(i){return this._ in i&&delete i[this._]},toString:function(){return this._}};var Ie=function(i){return function(){return this.matches(i)}};if("undefined"!=typeof document){var ne=document.documentElement;if(!ne.matches){var nt=ne.webkitMatchesSelector||ne.msMatchesSelector||ne.mozMatchesSelector||ne.oMatchesSelector;Ie=function(i){return function(){return nt.call(this,i)}}}}var It=Ie,Gt={};function ir(i,u,h){return i=or(i,u,h),function(f){var g=f.relatedTarget;(!g||g!==this&&!(8&g.compareDocumentPosition(this)))&&i.call(this,f)}}function or(i,u,h){return function(f){var g=M.event;M.event=f;try{i.call(this,this.__data__,u,h)}finally{M.event=g}}}function Bn(i){return i.trim().split(/^|\s+/).map(function(u){var h="",f=u.indexOf(".");return f>=0&&(h=u.slice(f+1),u=u.slice(0,f)),{type:u,name:h}})}function Gr(i){return function(){var u=this.__on;if(u){for(var v,h=0,f=-1,g=u.length;h<g;++h)v=u[h],i.type&&v.type!==i.type||v.name!==i.name?u[++f]=v:this.removeEventListener(v.type,v.listener,v.capture);++f?u.length=f:delete this.__on}}}function Sa(i,u,h){var f=Gt.hasOwnProperty(i.type)?ir:or;return function(g,v,E){var S,I=this.__on,k=f(u,v,E);if(I)for(var O=0,U=I.length;O<U;++O)if((S=I[O]).type===i.type&&S.name===i.name)return this.removeEventListener(S.type,S.listener,S.capture),this.addEventListener(S.type,S.listener=k,S.capture=h),void(S.value=u);this.addEventListener(i.type,k,h),S={type:i.type,name:i.name,value:u,listener:k,capture:h},I?I.push(S):this.__on=[S]}}M.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Gt={mouseenter:"mouseover",mouseleave:"mouseout"}));function Qo(i,u,h,f){var g=M.event;i.sourceEvent=M.event,M.event=i;try{return u.apply(h,f)}finally{M.event=g}}var xa=function(){for(var u,i=M.event;u=i.sourceEvent;)i=u;return i},Vr=function(i,u){var h=i.ownerSVGElement||i;if(h.createSVGPoint){var f=h.createSVGPoint();return f.x=u.clientX,f.y=u.clientY,[(f=f.matrixTransform(i.getScreenCTM().inverse())).x,f.y]}var g=i.getBoundingClientRect();return[u.clientX-g.left-i.clientLeft,u.clientY-g.top-i.clientTop]},kr=function(i){var u=xa();return u.changedTouches&&(u=u.changedTouches[0]),Vr(i,u)};function Fo(){}var Nr=function(i){return null==i?Fo:function(){return this.querySelector(i)}};function $l(){return[]}var Uo=function(i){return null==i?$l:function(){return this.querySelectorAll(i)}},ci=function(i){return new Array(i.length)};function ni(i,u){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=u}ni.prototype={constructor:ni,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,u){return this._parent.insertBefore(i,u)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};function lr(i,u,h,f,g,v){for(var I,E=0,S=u.length,k=v.length;E<k;++E)(I=u[E])?(I.__data__=v[E],f[E]=I):h[E]=new ni(i,v[E]);for(;E<S;++E)(I=u[E])&&(g[E]=I)}function ds(i,u,h,f,g,v,E){var I,S,V,k={},O=u.length,U=v.length,N=new Array(O);for(I=0;I<O;++I)(S=u[I])&&(N[I]=V="$"+E.call(S,S.__data__,I,u),V in k?g[I]=S:k[V]=S);for(I=0;I<U;++I)(S=k[V="$"+E.call(i,v[I],I,v)])?(f[I]=S,S.__data__=v[I],k[V]=null):h[I]=new ni(i,v[I]);for(I=0;I<O;++I)(S=u[I])&&k[N[I]]===S&&(g[I]=S)}function tt(i,u){return i<u?-1:i>u?1:i>=u?0:NaN}function _n(i){return function(){this.removeAttribute(i)}}function Ln(i){return function(){this.removeAttributeNS(i.space,i.local)}}function dr(i,u){return function(){this.setAttribute(i,u)}}function zn(i,u){return function(){this.setAttributeNS(i.space,i.local,u)}}function Pr(i,u){return function(){var h=u.apply(this,arguments);null==h?this.removeAttribute(i):this.setAttribute(i,h)}}function Jo(i,u){return function(){var h=u.apply(this,arguments);null==h?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,h)}}var fs=function(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView};function yc(i){return function(){this.style.removeProperty(i)}}function iu(i,u,h){return function(){this.style.setProperty(i,u,h)}}function ps(i,u,h){return function(){var f=u.apply(this,arguments);null==f?this.style.removeProperty(i):this.style.setProperty(i,f,h)}}function po(i,u){return i.style.getPropertyValue(u)||fs(i).getComputedStyle(i,null).getPropertyValue(u)}function Rf(i){return function(){delete this[i]}}function kf(i,u){return function(){this[i]=u}}function gs(i,u){return function(){var h=u.apply(this,arguments);null==h?delete this[i]:this[i]=h}}function td(i){return i.trim().split(/^|\s+/)}function Nf(i){return i.classList||new ea(i)}function ea(i){this._node=i,this._names=td(i.getAttribute("class")||"")}function Og(i,u){for(var h=Nf(i),f=-1,g=u.length;++f<g;)h.add(u[f])}function nd(i,u){for(var h=Nf(i),f=-1,g=u.length;++f<g;)h.remove(u[f])}function rd(i){return function(){Og(this,i)}}function ou(i){return function(){nd(this,i)}}function jy(i,u){return function(){(u.apply(this,arguments)?Og:nd)(this,i)}}ea.prototype={add:function(i){this._names.indexOf(i)<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var u=this._names.indexOf(i);u>=0&&(this._names.splice(u,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};function $y(){this.textContent=""}function Hy(i){return function(){this.textContent=i}}function Of(i){return function(){var u=i.apply(this,arguments);this.textContent=null==u?"":u}}function Lg(){this.innerHTML=""}function cl(i){return function(){this.innerHTML=i}}function Hl(i){return function(){var u=i.apply(this,arguments);this.innerHTML=null==u?"":u}}function Ff(){this.nextSibling&&this.parentNode.appendChild(this)}function Vu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Uf(){return null}function Bf(){var i=this.parentNode;i&&i.removeChild(this)}function ys(i,u,h){var f=fs(i),g=f.CustomEvent;"function"==typeof g?g=new g(u,h):(g=f.document.createEvent("Event"),h?(g.initEvent(u,h.bubbles,h.cancelable),g.detail=h.detail):g.initEvent(u,!1,!1)),i.dispatchEvent(g)}function Vf(i,u){return function(){return ys(this,i,u)}}function Os(i,u){return function(){return ys(this,i,u.apply(this,arguments))}}var Ls=[null];function Ri(i,u){this._groups=i,this._parents=u}function au(){return new Ri([[document.documentElement]],Ls)}Ri.prototype=au.prototype={constructor:Ri,select:function(i){"function"!=typeof i&&(i=Nr(i));for(var u=this._groups,h=u.length,f=new Array(h),g=0;g<h;++g)for(var S,k,v=u[g],E=v.length,I=f[g]=new Array(E),O=0;O<E;++O)(S=v[O])&&(k=i.call(S,S.__data__,O,v))&&("__data__"in S&&(k.__data__=S.__data__),I[O]=k);return new Ri(f,this._parents)},selectAll:function(i){"function"!=typeof i&&(i=Uo(i));for(var u=this._groups,h=u.length,f=[],g=[],v=0;v<h;++v)for(var S,E=u[v],I=E.length,k=0;k<I;++k)(S=E[k])&&(f.push(i.call(S,S.__data__,k,E)),g.push(S));return new Ri(f,g)},filter:function(i){"function"!=typeof i&&(i=It(i));for(var u=this._groups,h=u.length,f=new Array(h),g=0;g<h;++g)for(var S,v=u[g],E=v.length,I=f[g]=[],k=0;k<E;++k)(S=v[k])&&i.call(S,S.__data__,k,v)&&I.push(S);return new Ri(f,this._parents)},data:function(i,u){if(!i)return V=new Array(this.size()),k=-1,this.each(function(Se){V[++k]=Se}),V;var h=u?ds:lr,f=this._parents,g=this._groups;"function"!=typeof i&&(i=function(i){return function(){return i}}(i));for(var v=g.length,E=new Array(v),I=new Array(v),S=new Array(v),k=0;k<v;++k){var O=f[k],U=g[k],N=U.length,V=i.call(O,O&&O.__data__,k,f),H=V.length,z=I[k]=new Array(H),Y=E[k]=new Array(H);h(O,U,z,Y,S[k]=new Array(N),V,u);for(var De,Oe,he=0,ee=0;he<H;++he)if(De=z[he]){for(he>=ee&&(ee=he+1);!(Oe=Y[ee])&&++ee<H;);De._next=Oe||null}}return(E=new Ri(E,f))._enter=I,E._exit=S,E},enter:function(){return new Ri(this._enter||this._groups.map(ci),this._parents)},exit:function(){return new Ri(this._exit||this._groups.map(ci),this._parents)},merge:function(i){for(var u=this._groups,h=i._groups,f=u.length,v=Math.min(f,h.length),E=new Array(f),I=0;I<v;++I)for(var N,S=u[I],k=h[I],O=S.length,U=E[I]=new Array(O),V=0;V<O;++V)(N=S[V]||k[V])&&(U[V]=N);for(;I<f;++I)E[I]=u[I];return new Ri(E,this._parents)},order:function(){for(var i=this._groups,u=-1,h=i.length;++u<h;)for(var E,f=i[u],g=f.length-1,v=f[g];--g>=0;)(E=f[g])&&(v&&v!==E.nextSibling&&v.parentNode.insertBefore(E,v),v=E);return this},sort:function(i){function u(U,N){return U&&N?i(U.__data__,N.__data__):!U-!N}i||(i=tt);for(var h=this._groups,f=h.length,g=new Array(f),v=0;v<f;++v){for(var k,E=h[v],I=E.length,S=g[v]=new Array(I),O=0;O<I;++O)(k=E[O])&&(S[O]=k);S.sort(u)}return new Ri(g,this._parents).order()},call:function(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this},nodes:function(){var i=new Array(this.size()),u=-1;return this.each(function(){i[++u]=this}),i},node:function(){for(var i=this._groups,u=0,h=i.length;u<h;++u)for(var f=i[u],g=0,v=f.length;g<v;++g){var E=f[g];if(E)return E}return null},size:function(){var i=0;return this.each(function(){++i}),i},empty:function(){return!this.node()},each:function(i){for(var u=this._groups,h=0,f=u.length;h<f;++h)for(var I,g=u[h],v=0,E=g.length;v<E;++v)(I=g[v])&&i.call(I,I.__data__,v,g);return this},attr:function(i,u){var h=Ps(i);if(arguments.length<2){var f=this.node();return h.local?f.getAttributeNS(h.space,h.local):f.getAttribute(h)}return this.each((null==u?h.local?Ln:_n:"function"==typeof u?h.local?Jo:Pr:h.local?zn:dr)(h,u))},style:function(i,u,h){return arguments.length>1?this.each((null==u?yc:"function"==typeof u?ps:iu)(i,u,null==h?"":h)):po(this.node(),i)},property:function(i,u){return arguments.length>1?this.each((null==u?Rf:"function"==typeof u?gs:kf)(i,u)):this.node()[i]},classed:function(i,u){var h=td(i+"");if(arguments.length<2){for(var f=Nf(this.node()),g=-1,v=h.length;++g<v;)if(!f.contains(h[g]))return!1;return!0}return this.each(("function"==typeof u?jy:u?rd:ou)(h,u))},text:function(i){return arguments.length?this.each(null==i?$y:("function"==typeof i?Of:Hy)(i)):this.node().textContent},html:function(i){return arguments.length?this.each(null==i?Lg:("function"==typeof i?Hl:cl)(i)):this.node().innerHTML},raise:function(){return this.each(Ff)},lower:function(){return this.each(Vu)},append:function(i){var u="function"==typeof i?i:sn(i);return this.select(function(){return this.appendChild(u.apply(this,arguments))})},insert:function(i,u){var h="function"==typeof i?i:sn(i),f=null==u?Uf:"function"==typeof u?u:Nr(u);return this.select(function(){return this.insertBefore(h.apply(this,arguments),f.apply(this,arguments)||null)})},remove:function(){return this.each(Bf)},datum:function(i){return arguments.length?this.property("__data__",i):this.node().__data__},on:function(i,u,h){var g,E,f=Bn(i+""),v=f.length;if(!(arguments.length<2)){for(I=u?Sa:Gr,null==h&&(h=!1),g=0;g<v;++g)this.each(I(f[g],u,h));return this}var I=this.node().__on;if(I)for(var O,S=0,k=I.length;S<k;++S)for(g=0,O=I[S];g<v;++g)if((E=f[g]).type===O.type&&E.name===O.name)return O.value},dispatch:function(i,u){return this.each(("function"==typeof u?Os:Vf)(i,u))}};var vs=function(i){return"string"==typeof i?new Ri([[document.querySelector(i)]],[document.documentElement]):new Ri([[i]],Ls)},Ic=function(i,u,h){arguments.length<3&&(h=u,u=xa().changedTouches);for(var v,f=0,g=u?u.length:0;f<g;++f)if((v=u[f]).identifier===h)return Vr(i,v);return null};function id(){M.event.stopImmediatePropagation()}var tr=function(){M.event.preventDefault(),M.event.stopImmediatePropagation()},uu=function(i){var u=i.document.documentElement,h=vs(i).on("dragstart.drag",tr,!0);"onselectstart"in u?h.on("selectstart.drag",tr,!0):(u.__noselect=u.style.MozUserSelect,u.style.MozUserSelect="none")};function ra(i,u){var h=i.document.documentElement,f=vs(i).on("dragstart.drag",null);u&&(f.on("click.drag",tr,!0),setTimeout(function(){f.on("click.drag",null)},0)),"onselectstart"in h?f.on("selectstart.drag",null):(h.style.MozUserSelect=h.__noselect,delete h.__noselect)}var sr=function(i){return function(){return i}};function $u(i,u,h,f,g,v,E,I,S,k){this.target=i,this.type=u,this.subject=h,this.identifier=f,this.active=g,this.x=v,this.y=E,this.dx=I,this.dy=S,this._=k}function zl(){return!M.event.button}function cu(){return this.parentNode}function Gi(i){return null==i?{x:M.event.x,y:M.event.y}:i}$u.prototype.on=function(){var i=this._.on.apply(this._,arguments);return i===this._?this:i};var fr=function(i,u,h){i.prototype=u.prototype=h,h.constructor=i};function Fs(i,u){var h=Object.create(i.prototype);for(var f in u)h[f]=u[f];return h}function Or(){}var Us=1/.7,ia="\\s*([+-]?\\d+)\\s*",_s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",li="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Cc=/^#([0-9a-f]{3})$/,bn=/^#([0-9a-f]{6})$/,lu=new RegExp("^rgb\\("+[ia,ia,ia]+"\\)$"),od=new RegExp("^rgb\\("+[li,li,li]+"\\)$"),ll=new RegExp("^rgba\\("+[ia,ia,ia,_s]+"\\)$"),ad=new RegExp("^rgba\\("+[li,li,li,_s]+"\\)$"),Gl=new RegExp("^hsl\\("+[_s,li,li]+"\\)$"),ql=new RegExp("^hsla\\("+[_s,li,li,_s]+"\\)$"),Wl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Qs(i){var u;return i=(i+"").trim().toLowerCase(),(u=Cc.exec(i))?new ri((u=parseInt(u[1],16))>>8&15|u>>4&240,u>>4&15|240&u,(15&u)<<4|15&u,1):(u=bn.exec(i))?lt(parseInt(u[1],16)):(u=lu.exec(i))?new ri(u[1],u[2],u[3],1):(u=od.exec(i))?new ri(255*u[1]/100,255*u[2]/100,255*u[3]/100,1):(u=ll.exec(i))?Kn(u[1],u[2],u[3],u[4]):(u=ad.exec(i))?Kn(255*u[1]/100,255*u[2]/100,255*u[3]/100,u[4]):(u=Gl.exec(i))?hu(u[1],u[2]/100,u[3]/100,1):(u=ql.exec(i))?hu(u[1],u[2]/100,u[3]/100,u[4]):Wl.hasOwnProperty(i)?lt(Wl[i]):"transparent"===i?new ri(NaN,NaN,NaN,0):null}function lt(i){return new ri(i>>16&255,i>>8&255,255&i,1)}function Kn(i,u,h,f){return f<=0&&(i=u=h=NaN),new ri(i,u,h,f)}function Hu(i){return i instanceof Or||(i=Qs(i)),i?new ri((i=i.rgb()).r,i.g,i.b,i.opacity):new ri}function pr(i,u,h,f){return 1===arguments.length?Hu(i):new ri(i,u,h,null==f?1:f)}function ri(i,u,h,f){this.r=+i,this.g=+u,this.b=+h,this.opacity=+f}function hu(i,u,h,f){return f<=0?i=u=h=NaN:h<=0||h>=1?i=u=NaN:u<=0&&(i=NaN),new mo(i,u,h,f)}function go(i){if(i instanceof mo)return new mo(i.h,i.s,i.l,i.opacity);if(i instanceof Or||(i=Qs(i)),!i)return new mo;if(i instanceof mo)return i;var u=(i=i.rgb()).r/255,h=i.g/255,f=i.b/255,g=Math.min(u,h,f),v=Math.max(u,h,f),E=NaN,I=v-g,S=(v+g)/2;return I?(E=u===v?(h-f)/I+6*(h<f):h===v?(f-u)/I+2:(u-h)/I+4,I/=S<.5?v+g:2-v-g,E*=60):I=S>0&&S<1?0:E,new mo(E,I,S,i.opacity)}function Tc(i,u,h,f){return 1===arguments.length?go(i):new mo(i,u,h,null==f?1:f)}function mo(i,u,h,f){this.h=+i,this.s=+u,this.l=+h,this.opacity=+f}function hl(i,u,h){return 255*(i<60?u+(h-u)*i/60:i<180?h:i<240?u+(h-u)*(240-i)/60:u)}fr(Or,Qs,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),fr(ri,pr,Fs(Or,{brighter:function(i){return i=null==i?Us:Math.pow(Us,i),new ri(this.r*i,this.g*i,this.b*i,this.opacity)},darker:function(i){return i=null==i?.7:Math.pow(.7,i),new ri(this.r*i,this.g*i,this.b*i,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var i=this.opacity;return(1===(i=isNaN(i)?1:Math.max(0,Math.min(1,i)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===i?")":", "+i+")")}})),fr(mo,Tc,Fs(Or,{brighter:function(i){return i=null==i?Us:Math.pow(Us,i),new mo(this.h,this.s,this.l*i,this.opacity)},darker:function(i){return i=null==i?.7:Math.pow(.7,i),new mo(this.h,this.s,this.l*i,this.opacity)},rgb:function(){var i=this.h%360+360*(this.h<0),u=isNaN(i)||isNaN(this.s)?0:this.s,h=this.l,f=h+(h<.5?h:1-h)*u,g=2*h-f;return new ri(hl(i>=240?i-240:i+120,g,f),hl(i,g,f),hl(i<120?i+240:i-120,g,f),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var ud=Math.PI/180,Ug=180/Math.PI,Ma=4/29,Wi=6/29,Kl=3*Wi*Wi;function Dc(i){if(i instanceof Js)return new Js(i.l,i.a,i.b,i.opacity);if(i instanceof Ra){var u=i.h*ud;return new Js(i.l,Math.cos(u)*i.c,Math.sin(u)*i.c,i.opacity)}i instanceof ri||(i=Hu(i));var h=Ql(i.r),f=Ql(i.g),g=Ql(i.b),v=Ac((.4124564*h+.3575761*f+.1804375*g)/.95047),E=Ac((.2126729*h+.7151522*f+.072175*g)/1);return new Js(116*E-16,500*(v-E),200*(E-Ac((.0193339*h+.119192*f+.9503041*g)/1.08883)),i.opacity)}function Sc(i,u,h,f){return 1===arguments.length?Dc(i):new Js(i,u,h,null==f?1:f)}function Js(i,u,h,f){this.l=+i,this.a=+u,this.b=+h,this.opacity=+f}function Ac(i){return i>.008856451679035631?Math.pow(i,1/3):i/Kl+Ma}function xc(i){return i>Wi?i*i*i:Kl*(i-Ma)}function Yl(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function Ql(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Xl(i){if(i instanceof Ra)return new Ra(i.h,i.c,i.l,i.opacity);i instanceof Js||(i=Dc(i));var u=Math.atan2(i.b,i.a)*Ug;return new Ra(u<0?u+360:u,Math.sqrt(i.a*i.a+i.b*i.b),i.l,i.opacity)}function sa(i,u,h,f){return 1===arguments.length?Xl(i):new Ra(i,u,h,null==f?1:f)}function Ra(i,u,h,f){this.h=+i,this.c=+u,this.l=+h,this.opacity=+f}fr(Js,Sc,Fs(Or,{brighter:function(i){return new Js(this.l+18*(null==i?1:i),this.a,this.b,this.opacity)},darker:function(i){return new Js(this.l-18*(null==i?1:i),this.a,this.b,this.opacity)},rgb:function(){var i=(this.l+16)/116,u=isNaN(this.a)?i:i+this.a/500,h=isNaN(this.b)?i:i-this.b/200;return i=1*xc(i),new ri(Yl(3.2404542*(u=.95047*xc(u))-1.5371385*i-.4985314*(h=1.08883*xc(h))),Yl(-.969266*u+1.8760108*i+.041556*h),Yl(.0556434*u-.2040259*i+1.0572252*h),this.opacity)}})),fr(Ra,sa,Fs(Or,{brighter:function(i){return new Ra(this.h,this.c,this.l+18*(null==i?1:i),this.opacity)},darker:function(i){return new Ra(this.h,this.c,this.l-18*(null==i?1:i),this.opacity)},rgb:function(){return Dc(this).rgb()}}));var Jl=1.78277,Mc=-.29227,Ki=-.90649,fl=1.97294,eh=fl*Ki,bi=fl*Jl,du=Jl*Mc- -.14861*Ki;function hi(i){if(i instanceof th)return new th(i.h,i.s,i.l,i.opacity);i instanceof ri||(i=Hu(i));var h=i.g/255,f=i.b/255,g=(du*f+eh*(i.r/255)-bi*h)/(du+eh-bi),v=f-g,E=(fl*(h-g)-Mc*v)/Ki,I=Math.sqrt(E*E+v*v)/(fl*g*(1-g)),S=I?Math.atan2(E,v)*Ug-120:NaN;return new th(S<0?S+360:S,I,g,i.opacity)}function vo(i,u,h,f){return 1===arguments.length?hi(i):new th(i,u,h,null==f?1:f)}function th(i,u,h,f){this.h=+i,this.s=+u,this.l=+h,this.opacity=+f}function Bg(i,u,h,f,g){var v=i*i,E=v*i;return((1-3*i+3*v-E)*u+(4-6*v+3*E)*h+(1+3*i+3*v-3*E)*f+E*g)/6}fr(th,vo,Fs(Or,{brighter:function(i){return i=null==i?Us:Math.pow(Us,i),new th(this.h,this.s,this.l*i,this.opacity)},darker:function(i){return i=null==i?.7:Math.pow(.7,i),new th(this.h,this.s,this.l*i,this.opacity)},rgb:function(){var i=isNaN(this.h)?0:(this.h+120)*ud,u=+this.l,h=isNaN(this.s)?0:this.s*u*(1-u),f=Math.cos(i),g=Math.sin(i);return new ri(255*(u+h*(-.14861*f+Jl*g)),255*(u+h*(Mc*f+Ki*g)),255*(u+h*(fl*f)),this.opacity)}}));var cd=function(i){var u=i.length-1;return function(h){var f=h<=0?h=0:h>=1?(h=1,u-1):Math.floor(h*u),g=i[f],v=i[f+1];return Bg((h-f/u)*u,f>0?i[f-1]:2*g-v,g,v,f<u-1?i[f+2]:2*v-g)}},Vg=function(i){var u=i.length;return function(h){var f=Math.floor(((h%=1)<0?++h:h)*u);return Bg((h-f/u)*u,i[(f+u-1)%u],i[f%u],i[(f+1)%u],i[(f+2)%u])}},jf=function(i){return function(){return i}};function Rc(i,u){return function(h){return i+h*u}}function Na(i,u){var h=u-i;return h?Rc(i,h>180||h<-180?h-360*Math.round(h/360):h):jf(isNaN(i)?u:i)}function Ei(i){return 1==(i=+i)?di:function(u,h){return h-u?function ka(i,u,h){return i=Math.pow(i,h),u=Math.pow(u,h)-i,h=1/h,function(f){return Math.pow(i+f*u,h)}}(u,h,i):jf(isNaN(u)?h:u)}}function di(i,u){var h=u-i;return h?Rc(i,h):jf(isNaN(i)?u:i)}var nh=function i(u){var h=Ei(u);function f(g,v){var E=h((g=pr(g)).r,(v=pr(v)).r),I=h(g.g,v.g),S=h(g.b,v.b),k=di(g.opacity,v.opacity);return function(O){return g.r=E(O),g.g=I(O),g.b=S(O),g.opacity=k(O),g+""}}return f.gamma=i,f}(1);function fu(i){return function(u){var E,I,h=u.length,f=new Array(h),g=new Array(h),v=new Array(h);for(E=0;E<h;++E)I=pr(u[E]),f[E]=I.r||0,g[E]=I.g||0,v[E]=I.b||0;return f=i(f),g=i(g),v=i(v),I.opacity=1,function(S){return I.r=f(S),I.g=g(S),I.b=v(S),I+""}}}var kc=fu(cd),rh=fu(Vg),jg=function(i,u){var E,h=u?u.length:0,f=i?Math.min(h,i.length):0,g=new Array(h),v=new Array(h);for(E=0;E<f;++E)g[E]=Lr(i[E],u[E]);for(;E<h;++E)v[E]=u[E];return function(I){for(E=0;E<f;++E)v[E]=g[E](I);return v}},oa=function(i,u){var h=new Date;return u-=i=+i,function(f){return h.setTime(i+u*f),h}},Zi=function(i,u){return u-=i=+i,function(h){return i+u*h}},$g=function(i,u){var g,h={},f={};for(g in(null===i||"object"!=typeof i)&&(i={}),(null===u||"object"!=typeof u)&&(u={}),u)g in i?h[g]=Lr(i[g],u[g]):f[g]=u[g];return function(v){for(g in h)f[g]=h[g](v);return f}},gr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nc=new RegExp(gr.source,"g");var Fr,aa,Bo,En,eo=function(i,u){var f,g,v,h=gr.lastIndex=Nc.lastIndex=0,E=-1,I=[],S=[];for(i+="",u+="";(f=gr.exec(i))&&(g=Nc.exec(u));)(v=g.index)>h&&(v=u.slice(h,v),I[E]?I[E]+=v:I[++E]=v),(f=f[0])===(g=g[0])?I[E]?I[E]+=g:I[++E]=g:(I[++E]=null,S.push({i:E,x:Zi(f,g)})),h=Nc.lastIndex;return h<u.length&&(v=u.slice(h),I[E]?I[E]+=v:I[++E]=v),I.length<2?S[0]?function Bs(i){return function(u){return i(u)+""}}(S[0].x):function nn(i){return function(){return i}}(u):(u=S.length,function(k){for(var U,O=0;O<u;++O)I[(U=S[O]).i]=U.x(k);return I.join("")})},Lr=function(i,u){var f,h=typeof u;return null==u||"boolean"===h?jf(u):("number"===h?Zi:"string"===h?(f=Qs(u))?(u=f,nh):eo:u instanceof Qs?nh:u instanceof Date?oa:Array.isArray(u)?jg:"function"!=typeof u.valueOf&&"function"!=typeof u.toString||isNaN(u)?$g:Zi)(i,u)},Pc=function(i,u){return u-=i=+i,function(h){return Math.round(i+u*h)}},ld=180/Math.PI,pu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Pa=function(i,u,h,f,g,v){var E,I,S;return(E=Math.sqrt(i*i+u*u))&&(i/=E,u/=E),(S=i*h+u*f)&&(h-=i*S,f-=u*S),(I=Math.sqrt(h*h+f*f))&&(h/=I,f/=I,S/=I),i*f<u*h&&(i=-i,u=-u,S=-S,E=-E),{translateX:g,translateY:v,rotate:Math.atan2(u,i)*ld,skewX:Math.atan(S)*ld,scaleX:E,scaleY:I}};function hd(i,u,h,f){function g(k){return k.length?k.pop()+" ":""}return function(k,O){var U=[],N=[];return k=i(k),O=i(O),function v(k,O,U,N,V,H){if(k!==U||O!==N){var z=V.push("translate(",null,u,null,h);H.push({i:z-4,x:Zi(k,U)},{i:z-2,x:Zi(O,N)})}else(U||N)&&V.push("translate("+U+u+N+h)}(k.translateX,k.translateY,O.translateX,O.translateY,U,N),function E(k,O,U,N){k!==O?(k-O>180?O+=360:O-k>180&&(k+=360),N.push({i:U.push(g(U)+"rotate(",null,f)-2,x:Zi(k,O)})):O&&U.push(g(U)+"rotate("+O+f)}(k.rotate,O.rotate,U,N),function I(k,O,U,N){k!==O?N.push({i:U.push(g(U)+"skewX(",null,f)-2,x:Zi(k,O)}):O&&U.push(g(U)+"skewX("+O+f)}(k.skewX,O.skewX,U,N),function S(k,O,U,N,V,H){if(k!==U||O!==N){var z=V.push(g(V)+"scale(",null,",",null,")");H.push({i:z-4,x:Zi(k,U)},{i:z-2,x:Zi(O,N)})}else(1!==U||1!==N)&&V.push(g(V)+"scale("+U+","+N+")")}(k.scaleX,k.scaleY,O.scaleX,O.scaleY,U,N),k=O=null,function(V){for(var Y,H=-1,z=N.length;++H<z;)U[(Y=N[H]).i]=Y.x(V);return U.join("")}}}var dd=hd(function $f(i){return"none"===i?pu:(Fr||(Fr=document.createElement("DIV"),aa=document.documentElement,Bo=document.defaultView),Fr.style.transform=i,i=Bo.getComputedStyle(aa.appendChild(Fr),null).getPropertyValue("transform"),aa.removeChild(Fr),i=i.slice(7,-1).split(","),Pa(+i[0],+i[1],+i[2],+i[3],+i[4],+i[5]))},"px, ","px)","deg)"),ki=hd(function Hf(i){return null!=i&&(En||(En=document.createElementNS("http://www.w3.org/2000/svg","g")),En.setAttribute("transform",i),i=En.transform.baseVal.consolidate())?Pa((i=i.matrix).a,i.b,i.c,i.d,i.e,i.f):pu},", ",")",")"),_o=Math.SQRT2;function yu(i){return((i=Math.exp(i))+1/i)/2}var Oa=function(i,u){var U,N,h=i[0],f=i[1],g=i[2],I=u[2],S=u[0]-h,k=u[1]-f,O=S*S+k*k;if(O<1e-12)N=Math.log(I/g)/_o,U=function(he){return[h+he*S,f+he*k,g*Math.exp(_o*he*N)]};else{var V=Math.sqrt(O),H=(I*I-g*g+4*O)/(2*g*2*V),z=(I*I-g*g-4*O)/(2*I*2*V),Y=Math.log(Math.sqrt(H*H+1)-H),X=Math.log(Math.sqrt(z*z+1)-z);N=(X-Y)/_o,U=function(he){var ee=he*N,De=yu(Y),Oe=g/(2*V)*(De*function Oc(i){return((i=Math.exp(2*i))-1)/(i+1)}(_o*ee+Y)-function Gu(i){return((i=Math.exp(i))-1/i)/2}(Y));return[h+Oe*S,f+Oe*k,g*De/yu(_o*ee+Y)]}}return U.duration=1e3*N,U};function qu(i){return function(u,h){var f=i((u=Tc(u)).h,(h=Tc(h)).h),g=di(u.s,h.s),v=di(u.l,h.l),E=di(u.opacity,h.opacity);return function(I){return u.h=f(I),u.s=g(I),u.l=v(I),u.opacity=E(I),u+""}}}var vu=qu(Na),Lc=qu(di);function Fc(i){return function(u,h){var f=i((u=sa(u)).h,(h=sa(h)).h),g=di(u.c,h.c),v=di(u.l,h.l),E=di(u.opacity,h.opacity);return function(I){return u.h=f(I),u.c=g(I),u.l=v(I),u.opacity=E(I),u+""}}}var La=Fc(Na),Wu=Fc(di);function Ii(i){return function u(h){function f(g,v){var E=i((g=vo(g)).h,(v=vo(v)).h),I=di(g.s,v.s),S=di(g.l,v.l),k=di(g.opacity,v.opacity);return function(O){return g.h=E(O),g.s=I(O),g.l=S(Math.pow(O,h)),g.opacity=k(O),g+""}}return h=+h,f.gamma=u,f}(1)}var ii,ws,fd=Ii(Na),Vo=Ii(di),wo=0,jo=0,to=0,Wr=0,Ci=0,Uc=0,pl="object"==typeof performance&&performance.now?performance:Date,jr="function"==typeof requestAnimationFrame?requestAnimationFrame:function(i){setTimeout(i,17)};function Bc(){return Ci||(jr(r0),Ci=pl.now()+Uc)}function r0(){Ci=0}function ua(){this._call=this._time=this._next=null}function Qi(i,u,h){var f=new ua;return f.restart(i,u,h),f}function pd(){Bc(),++wo;for(var u,i=ii;i;)(u=Ci-i._time)>=0&&i._call.call(null,u),i=i._next;--wo}function Fa(){Ci=(Wr=pl.now())+Uc,wo=jo=0;try{pd()}finally{wo=0,function Ua(){for(var i,h,u=ii,f=1/0;u;)u._call?(f>u._time&&(f=u._time),i=u,u=u._next):(h=u._next,u._next=null,u=i?i._next=h:ii=h);ws=i,gl(f)}(),Ci=0}}function Gf(){var i=pl.now(),u=i-Wr;u>1e3&&(Uc-=u,Wr=i)}function gl(i){if(!wo){jo&&(jo=clearTimeout(jo));var u=i-Ci;u>24?(i<1/0&&(jo=setTimeout(Fa,u)),to&&(to=clearInterval(to))):(to||(Wr=Ci,to=setInterval(Gf,1e3)),wo=1,jr(Fa))}}ua.prototype=Qi.prototype={constructor:ua,restart:function(i,u,h){if("function"!=typeof i)throw new TypeError("callback is not a function");h=(null==h?Bc():+h)+(null==u?0:+u),!this._next&&ws!==this&&(ws?ws._next=this:ii=this,ws=this),this._call=i,this._time=h,gl()},stop:function(){this._call&&(this._call=null,this._time=1/0,gl())}};var Kr=function(i,u,h){var f=new ua;return f.restart(function(g){f.stop(),i(g+u)},u=null==u?0:+u,h),f},ih=ls("start","end","interrupt"),qf=[],bo=function(i,u,h,f,g,v){var E=i.__transition;if(E){if(h in E)return}else i.__transition={};!function Vc(i,u,h){var g,f=i.__transition;function v(k){h.state=1,h.timer.restart(E,h.delay,h.time),h.delay<=k&&E(k-h.delay)}function E(k){var O,U,N,V;if(1!==h.state)return S();for(O in f)if((V=f[O]).name===h.name){if(3===V.state)return Kr(E);4===V.state?(V.state=6,V.timer.stop(),V.on.call("interrupt",i,i.__data__,V.index,V.group),delete f[O]):+O<u&&(V.state=6,V.timer.stop(),delete f[O])}if(Kr(function(){3===h.state&&(h.state=4,h.timer.restart(I,h.delay,h.time),I(k))}),h.state=2,h.on.call("start",i,i.__data__,h.index,h.group),2===h.state){for(h.state=3,g=new Array(N=h.tween.length),O=0,U=-1;O<N;++O)(V=h.tween[O].value.call(i,i.__data__,h.index,h.group))&&(g[++U]=V);g.length=U+1}}function I(k){for(var O=k<h.duration?h.ease.call(null,k/h.duration):(h.timer.restart(S),h.state=5,1),U=-1,N=g.length;++U<N;)g[U].call(null,O);5===h.state&&(h.on.call("end",i,i.__data__,h.index,h.group),S())}function S(){for(var k in h.state=6,h.timer.stop(),delete f[u],f)return;delete i.__transition}f[u]=h,h.timer=Qi(v,0,h.time)}(i,h,{name:u,index:f,group:g,on:ih,tween:qf,time:v.time,delay:v.delay,duration:v.duration,ease:v.ease,timer:null,state:0})};function _u(i,u){var h=i.__transition;if(!h||!(h=h[u])||h.state>0)throw new Error("too late");return h}function xn(i,u){var h=i.__transition;if(!h||!(h=h[u])||h.state>2)throw new Error("too late");return h}function ca(i,u){var h=i.__transition;if(!h||!(h=h[u]))throw new Error("too late");return h}var Zr=function(i,u){var f,g,E,h=i.__transition,v=!0;if(h){for(E in u=null==u?null:u+"",h)(f=h[E]).name===u?(g=f.state>2&&f.state<5,f.state=6,f.timer.stop(),g&&f.on.call("interrupt",i,i.__data__,f.index,f.group),delete h[E]):v=!1;v&&delete i.__transition}};function jc(i,u){var h,f;return function(){var g=xn(this,i),v=g.tween;if(v!==h)for(var E=0,I=(f=h=v).length;E<I;++E)if(f[E].name===u){(f=f.slice()).splice(E,1);break}g.tween=f}}function zy(i,u,h){var f,g;if("function"!=typeof h)throw new Error;return function(){var v=xn(this,i),E=v.tween;if(E!==f){g=(f=E).slice();for(var I={name:u,value:h},S=0,k=g.length;S<k;++S)if(g[S].name===u){g[S]=I;break}S===k&&g.push(I)}v.tween=g}}function no(i,u,h){var f=i._id;return i.each(function(){var g=xn(this,f);(g.value||(g.value={}))[u]=h.apply(this,arguments)}),function(g){return ca(g,f).value[u]}}var vl=function(i,u){var h;return("number"==typeof u?Zi:u instanceof Qs?nh:(h=Qs(u))?(u=h,nh):eo)(i,u)};function Kf(i){return function(){this.removeAttribute(i)}}function la(i){return function(){this.removeAttributeNS(i.space,i.local)}}function Zf(i,u,h){var f,g;return function(){var v=this.getAttribute(i);return v===h?null:v===f?g:g=u(f=v,h)}}function Tr(i,u,h){var f,g;return function(){var v=this.getAttributeNS(i.space,i.local);return v===h?null:v===f?g:g=u(f=v,h)}}function Xi(i,u,h){var f,g,v;return function(){var E,I=h(this);return null==I?void this.removeAttribute(i):(E=this.getAttribute(i))===I?null:E===f&&I===g?v:v=u(f=E,g=I)}}function gd(i,u,h){var f,g,v;return function(){var E,I=h(this);return null==I?void this.removeAttributeNS(i.space,i.local):(E=this.getAttributeNS(i.space,i.local))===I?null:E===f&&I===g?v:v=u(f=E,g=I)}}function wu(i,u){function h(){var f=this,g=u.apply(f,arguments);return g&&function(v){f.setAttributeNS(i.space,i.local,g(v))}}return h._value=u,h}function $c(i,u){function h(){var f=this,g=u.apply(f,arguments);return g&&function(v){f.setAttribute(i,g(v))}}return h._value=u,h}function F(i,u){return function(){_u(this,i).delay=+u.apply(this,arguments)}}function B(i,u){return u=+u,function(){_u(this,i).delay=u}}function re(i,u){return function(){xn(this,i).duration=+u.apply(this,arguments)}}function we(i,u){return u=+u,function(){xn(this,i).duration=u}}function He(i,u){if("function"!=typeof u)throw new Error;return function(){xn(this,i).ease=u}}function hn(i,u,h){var f,g,v=function Vn(i){return(i+"").trim().split(/^|\s+/).every(function(u){var h=u.indexOf(".");return h>=0&&(u=u.slice(0,h)),!u||"start"===u})}(u)?_u:xn;return function(){var E=v(this,i),I=E.on;I!==f&&(g=(f=I).copy()).on(u,h),E.on=g}}var ja=au.prototype.constructor;function zg(i,u,h){function f(){var g=this,v=u.apply(g,arguments);return v&&function(E){g.style.setProperty(i,v(E),h)}}return f._value=u,f}var xb=0;function Ha(i,u,h,f){this._groups=i,this._parents=u,this._name=h,this._id=f}function Xf(i){return au().transition(i)}function Wg(){return++xb}var za=au.prototype;function vd(i){return((i*=2)<=1?i*i:--i*(2-i)+1)/2}function Jf(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}Ha.prototype=Xf.prototype={constructor:Ha,select:function(i){var u=this._name,h=this._id;"function"!=typeof i&&(i=Nr(i));for(var f=this._groups,g=f.length,v=new Array(g),E=0;E<g;++E)for(var O,U,I=f[E],S=I.length,k=v[E]=new Array(S),N=0;N<S;++N)(O=I[N])&&(U=i.call(O,O.__data__,N,I))&&("__data__"in O&&(U.__data__=O.__data__),k[N]=U,bo(k[N],u,h,N,k,ca(O,h)));return new Ha(v,this._parents,u,h)},selectAll:function(i){var u=this._name,h=this._id;"function"!=typeof i&&(i=Uo(i));for(var f=this._groups,g=f.length,v=[],E=[],I=0;I<g;++I)for(var O,S=f[I],k=S.length,U=0;U<k;++U)if(O=S[U]){for(var V,N=i.call(O,O.__data__,U,S),H=ca(O,h),z=0,Y=N.length;z<Y;++z)(V=N[z])&&bo(V,u,h,z,N,H);v.push(N),E.push(O)}return new Ha(v,E,u,h)},filter:function(i){"function"!=typeof i&&(i=It(i));for(var u=this._groups,h=u.length,f=new Array(h),g=0;g<h;++g)for(var S,v=u[g],E=v.length,I=f[g]=[],k=0;k<E;++k)(S=v[k])&&i.call(S,S.__data__,k,v)&&I.push(S);return new Ha(f,this._parents,this._name,this._id)},merge:function(i){if(i._id!==this._id)throw new Error;for(var u=this._groups,h=i._groups,f=u.length,v=Math.min(f,h.length),E=new Array(f),I=0;I<v;++I)for(var N,S=u[I],k=h[I],O=S.length,U=E[I]=new Array(O),V=0;V<O;++V)(N=S[V]||k[V])&&(U[V]=N);for(;I<f;++I)E[I]=u[I];return new Ha(E,this._parents,this._name,this._id)},selection:function(){return new ja(this._groups,this._parents)},transition:function(){for(var i=this._name,u=this._id,h=Wg(),f=this._groups,g=f.length,v=0;v<g;++v)for(var S,E=f[v],I=E.length,k=0;k<I;++k)if(S=E[k]){var O=ca(S,u);bo(S,i,h,k,E,{time:O.time+O.delay+O.duration,delay:0,duration:O.duration,ease:O.ease})}return new Ha(f,this._parents,i,h)},call:za.call,nodes:za.nodes,node:za.node,size:za.size,empty:za.empty,each:za.each,on:function(i,u){var h=this._id;return arguments.length<2?ca(this.node(),h).on.on(i):this.each(hn(h,i,u))},attr:function(i,u){var h=Ps(i),f="transform"===h?ki:vl;return this.attrTween(i,"function"==typeof u?(h.local?gd:Xi)(h,f,no(this,"attr."+i,u)):null==u?(h.local?la:Kf)(h):(h.local?Tr:Zf)(h,f,u+""))},attrTween:function(i,u){var h="attr."+i;if(arguments.length<2)return(h=this.tween(h))&&h._value;if(null==u)return this.tween(h,null);if("function"!=typeof u)throw new Error;var f=Ps(i);return this.tween(h,(f.local?wu:$c)(f,u))},style:function(i,u,h){var f="transform"==(i+="")?dd:vl;return null==u?this.styleTween(i,function Go(i,u){var h,f,g;return function(){var v=po(this,i),E=(this.style.removeProperty(i),po(this,i));return v===E?null:v===h&&E===f?g:g=u(h=v,f=E)}}(i,f)).on("end.style."+i,function qo(i){return function(){this.style.removeProperty(i)}}(i)):this.styleTween(i,"function"==typeof u?function zc(i,u,h){var f,g,v;return function(){var E=po(this,i),I=h(this);return null==I&&(this.style.removeProperty(i),I=po(this,i)),E===I?null:E===f&&I===g?v:v=u(f=E,g=I)}}(i,f,no(this,"style."+i,u)):function $a(i,u,h){var f,g;return function(){var v=po(this,i);return v===h?null:v===f?g:g=u(f=v,h)}}(i,f,u+""),h)},styleTween:function(i,u,h){var f="style."+(i+="");if(arguments.length<2)return(f=this.tween(f))&&f._value;if(null==u)return this.tween(f,null);if("function"!=typeof u)throw new Error;return this.tween(f,zg(i,u,null==h?"":h))},text:function(i){return this.tween("text","function"==typeof i?function sh(i){return function(){var u=i(this);this.textContent=null==u?"":u}}(no(this,"text",i)):function Qf(i){return function(){this.textContent=i}}(null==i?"":i+""))},remove:function(){return this.on("end.remove",function ro(i){return function(){var u=this.parentNode;for(var h in this.__transition)if(+h!==i)return;u&&u.removeChild(this)}}(this._id))},tween:function(i,u){var h=this._id;if(i+="",arguments.length<2){for(var E,f=ca(this.node(),h).tween,g=0,v=f.length;g<v;++g)if((E=f[g]).name===i)return E.value;return null}return this.each((null==u?jc:zy)(h,i,u))},delay:function(i){var u=this._id;return arguments.length?this.each(("function"==typeof i?F:B)(u,i)):ca(this.node(),u).delay},duration:function(i){var u=this._id;return arguments.length?this.each(("function"==typeof i?re:we)(u,i)):ca(this.node(),u).duration},ease:function(i){var u=this._id;return arguments.length?this.each(He(u,i)):ca(this.node(),u).ease}};var Qu=function i(u){function h(f){return Math.pow(f,u)}return u=+u,h.exponent=i,h}(3),ep=function i(u){function h(f){return 1-Math.pow(1-f,u)}return u=+u,h.exponent=i,h}(3),_d=function i(u){function h(f){return((f*=2)<=1?Math.pow(f,u):2-Math.pow(2-f,u))/2}return u=+u,h.exponent=i,h}(3),tp=Math.PI,wd=tp/2;function ch(i){return(1-Math.cos(tp*i))/2}function Wy(i){return((i*=2)<=1?Math.pow(2,10*i-10):2-Math.pow(2,10-10*i))/2}function lh(i){return((i*=2)<=1?1-Math.sqrt(1-i*i):Math.sqrt(1-(i-=2)*i)+1)/2}var Kg=4/11,sp=7.5625;function Ga(i){return(i=+i)<Kg?sp*i*i:i<.7272727272727273?sp*(i-=.5454545454545454)*i+.75:i<.9090909090909091?sp*(i-=.8181818181818182)*i+.9375:sp*(i-=.9545454545454546)*i+.984375}var Ed=1.70158,ha=function i(u){function h(f){return f*f*((u+1)*f-u)}return u=+u,h.overshoot=i,h}(Ed),Id=function i(u){function h(f){return--f*f*((u+1)*f+u)+1}return u=+u,h.overshoot=i,h}(Ed),Cd=function i(u){function h(f){return((f*=2)<1?f*f*((u+1)*f-u):(f-=2)*f*((u+1)*f+u)+2)/2}return u=+u,h.overshoot=i,h}(Ed),Ju=2*Math.PI,hh=function i(u,h){var f=Math.asin(1/(u=Math.max(1,u)))*(h/=Ju);function g(v){return u*Math.pow(2,10*--v)*Math.sin((f-v)/h)}return g.amplitude=function(v){return i(v,h*Ju)},g.period=function(v){return i(u,v)},g}(1,.3),u0=function i(u,h){var f=Math.asin(1/(u=Math.max(1,u)))*(h/=Ju);function g(v){return 1-u*Math.pow(2,-10*(v=+v))*Math.sin((v+f)/h)}return g.amplitude=function(v){return i(v,h*Ju)},g.period=function(v){return i(u,v)},g}(1,.3),Td=function i(u,h){var f=Math.asin(1/(u=Math.max(1,u)))*(h/=Ju);function g(v){return((v=2*v-1)<0?u*Math.pow(2,10*v)*Math.sin((f-v)/h):2-u*Math.pow(2,-10*v)*Math.sin((f+v)/h))/2}return g.amplitude=function(v){return i(v,h*Ju)},g.period=function(v){return i(u,v)},g}(1,.3),Dd={time:null,delay:0,duration:250,ease:Jf};function Yg(i,u){for(var h;!(h=i.__transition)||!(h=h[u]);)if(!(i=i.parentNode))return Dd.time=Bc(),Dd;return h}au.prototype.interrupt=function(i){return this.each(function(){Zr(this,i)})},au.prototype.transition=function(i){var u,h;i instanceof Ha?(u=i._id,i=i._name):(u=Wg(),(h=Dd).time=Bc(),i=null==i?null:i+"");for(var f=this._groups,g=f.length,v=0;v<g;++v)for(var S,E=f[v],I=E.length,k=0;k<I;++k)(S=E[k])&&bo(S,i,u,k,E,h||Yg(S,u));return new Ha(f,this._parents,i,u)};var up=[null],wl=function(i){return function(){return i}},Sd=function(i,u,h){this.target=i,this.type=u,this.selection=h};function Xy(){M.event.stopImmediatePropagation()}var Ad=function(){M.event.preventDefault(),M.event.stopImmediatePropagation()},dh={name:"drag"},Gc={name:"space"},fh={name:"handle"},bu={name:"center"},Ji={name:"x",handles:["e","w"].map(xd),input:function(i,u){return i&&[[i[0],u[0][1]],[i[1],u[1][1]]]},output:function(i){return i&&[i[0][0],i[1][0]]}},$r={name:"y",handles:["n","s"].map(xd),input:function(i,u){return i&&[[u[0][0],i[0]],[u[1][0],i[1]]]},output:function(i){return i&&[i[0][1],i[1][1]]}},Jy={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(xd),input:function(i){return i},output:function(i){return i}},da={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},qc={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Qg={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},c0={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},l0={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function xd(i){return{type:i}}function Wc(){return!M.event.button}function ev(){var i=this.ownerSVGElement||this;return[[0,0],[i.width.baseVal.value,i.height.baseVal.value]]}function cp(i){for(;!i.__brush;)if(!(i=i.parentNode))return;return i.__brush}function Md(i){return i[0][0]===i[1][0]||i[0][1]===i[1][1]}function gh(i){var v,u=ev,h=Wc,f=ls(E,"start","brush","end"),g=6;function E(N){var V=N.property("__brush",U).selectAll(".overlay").data([xd("overlay")]);V.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",da.overlay).merge(V).each(function(){var z=cp(this).extent;vs(this).attr("x",z[0][0]).attr("y",z[0][1]).attr("width",z[1][0]-z[0][0]).attr("height",z[1][1]-z[0][1])}),N.selectAll(".selection").data([xd("selection")]).enter().append("rect").attr("class","selection").attr("cursor",da.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var H=N.selectAll(".handle").data(i.handles,function(z){return z.type});H.exit().remove(),H.enter().append("rect").attr("class",function(z){return"handle handle--"+z.type}).attr("cursor",function(z){return da[z.type]}),N.each(I).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",O)}function I(){var N=vs(this),V=cp(this).selection;V?(N.selectAll(".selection").style("display",null).attr("x",V[0][0]).attr("y",V[0][1]).attr("width",V[1][0]-V[0][0]).attr("height",V[1][1]-V[0][1]),N.selectAll(".handle").style("display",null).attr("x",function(H){return"e"===H.type[H.type.length-1]?V[1][0]-g/2:V[0][0]-g/2}).attr("y",function(H){return"s"===H.type[0]?V[1][1]-g/2:V[0][1]-g/2}).attr("width",function(H){return"n"===H.type||"s"===H.type?V[1][0]-V[0][0]+g:g}).attr("height",function(H){return"e"===H.type||"w"===H.type?V[1][1]-V[0][1]+g:g})):N.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function S(N,V){return N.__brush.emitter||new k(N,V)}function k(N,V){this.that=N,this.args=V,this.state=N.__brush,this.active=0}function O(){if(M.event.touches){if(M.event.changedTouches.length<M.event.touches.length)return Ad()}else if(v)return;if(h.apply(this,arguments)){var Oe,Se,qe,$e,mt,st,pt,le,it,xt,$t,jn,kn,N=this,V=M.event.target.__data__.type,H="selection"===(M.event.metaKey?V="overlay":V)?dh:M.event.altKey?bu:fh,z=i===$r?null:c0[V],Y=i===Ji?null:l0[V],X=cp(N),he=X.extent,ee=X.selection,De=he[0][0],_e=he[0][1],St=he[1][0],Vt=he[1][1],Yt=z&&Y&&M.event.shiftKey,ur=kr(N),Qn=ur,zr=S(N,arguments).beforestart();"overlay"===V?X.selection=ee=[[Oe=i===$r?De:ur[0],qe=i===Ji?_e:ur[1]],[mt=i===$r?St:Oe,pt=i===Ji?Vt:qe]]:(Oe=ee[0][0],qe=ee[0][1],mt=ee[1][0],pt=ee[1][1]),Se=Oe,$e=qe,st=mt,le=pt;var Br=vs(N).attr("pointer-events","none"),$n=Br.selectAll(".overlay").attr("cursor",da[V]);if(M.event.touches)Br.on("touchmove.brush",An,!0).on("touchend.brush touchcancel.brush",an,!0);else{var Ft=vs(M.event.view).on("keydown.brush",os,!0).on("keyup.brush",al,!0).on("mousemove.brush",An,!0).on("mouseup.brush",an,!0);uu(M.event.view)}Xy(),Zr(N),I.call(N),zr.start()}function An(){var Oo=kr(N);Yt&&!jn&&!kn&&(Math.abs(Oo[0]-Qn[0])>Math.abs(Oo[1]-Qn[1])?kn=!0:jn=!0),Qn=Oo,$t=!0,Ad(),Nn()}function Nn(){var Oo;switch(it=Qn[0]-ur[0],xt=Qn[1]-ur[1],H){case Gc:case dh:z&&(it=Math.max(De-Oe,Math.min(St-mt,it)),Se=Oe+it,st=mt+it),Y&&(xt=Math.max(_e-qe,Math.min(Vt-pt,xt)),$e=qe+xt,le=pt+xt);break;case fh:z<0?(it=Math.max(De-Oe,Math.min(St-Oe,it)),Se=Oe+it,st=mt):z>0&&(it=Math.max(De-mt,Math.min(St-mt,it)),Se=Oe,st=mt+it),Y<0?(xt=Math.max(_e-qe,Math.min(Vt-qe,xt)),$e=qe+xt,le=pt):Y>0&&(xt=Math.max(_e-pt,Math.min(Vt-pt,xt)),$e=qe,le=pt+xt);break;case bu:z&&(Se=Math.max(De,Math.min(St,Oe-it*z)),st=Math.max(De,Math.min(St,mt+it*z))),Y&&($e=Math.max(_e,Math.min(Vt,qe-xt*Y)),le=Math.max(_e,Math.min(Vt,pt+xt*Y)))}st<Se&&(z*=-1,Oo=Oe,Oe=mt,mt=Oo,Oo=Se,Se=st,st=Oo,V in qc&&$n.attr("cursor",da[V=qc[V]])),le<$e&&(Y*=-1,Oo=qe,qe=pt,pt=Oo,Oo=$e,$e=le,le=Oo,V in Qg&&$n.attr("cursor",da[V=Qg[V]])),X.selection&&(ee=X.selection),jn&&(Se=ee[0][0],st=ee[1][0]),kn&&($e=ee[0][1],le=ee[1][1]),(ee[0][0]!==Se||ee[0][1]!==$e||ee[1][0]!==st||ee[1][1]!==le)&&(X.selection=[[Se,$e],[st,le]],I.call(N),zr.brush())}function an(){if(Xy(),M.event.touches){if(M.event.touches.length)return;v&&clearTimeout(v),v=setTimeout(function(){v=null},500),Br.on("touchmove.brush touchend.brush touchcancel.brush",null)}else ra(M.event.view,$t),Ft.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Br.attr("pointer-events","all"),$n.attr("cursor",da.overlay),X.selection&&(ee=X.selection),Md(ee)&&(X.selection=null,I.call(N)),zr.end()}function os(){switch(M.event.keyCode){case 16:Yt=z&&Y;break;case 18:H===fh&&(z&&(mt=st-it*z,Oe=Se+it*z),Y&&(pt=le-xt*Y,qe=$e+xt*Y),H=bu,Nn());break;case 32:(H===fh||H===bu)&&(z<0?mt=st-it:z>0&&(Oe=Se-it),Y<0?pt=le-xt:Y>0&&(qe=$e-xt),H=Gc,$n.attr("cursor",da.selection),Nn());break;default:return}Ad()}function al(){switch(M.event.keyCode){case 16:Yt&&(jn=kn=Yt=!1,Nn());break;case 18:H===bu&&(z<0?mt=st:z>0&&(Oe=Se),Y<0?pt=le:Y>0&&(qe=$e),H=fh,Nn());break;case 32:H===Gc&&(M.event.altKey?(z&&(mt=st-it*z,Oe=Se+it*z),Y&&(pt=le-xt*Y,qe=$e+xt*Y),H=bu):(z<0?mt=st:z>0&&(Oe=Se),Y<0?pt=le:Y>0&&(qe=$e),H=fh),$n.attr("cursor",da[V]),Nn());break;default:return}Ad()}}function U(){var N=this.__brush||{selection:null};return N.extent=u.apply(this,arguments),N.dim=i,N}return E.move=function(N,V){N.selection?N.on("start.brush",function(){S(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){S(this,arguments).end()}).tween("brush",function(){var H=this,z=H.__brush,Y=S(H,arguments),X=z.selection,he=i.input("function"==typeof V?V.apply(this,arguments):V,z.extent),ee=Lr(X,he);function De(Oe){z.selection=1===Oe&&Md(he)?null:ee(Oe),I.call(H),Y.brush()}return X&&he?De:De(1)}):N.each(function(){var H=this,z=arguments,Y=H.__brush,X=i.input("function"==typeof V?V.apply(H,z):V,Y.extent),he=S(H,z).beforestart();Zr(H),Y.selection=null==X||Md(X)?null:X,I.call(H),he.start().brush().end()})},k.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(N){Qo(new Sd(E,N,i.output(this.state.selection)),f.apply,f,[N,this.that,this.args])}},E.extent=function(N){return arguments.length?(u="function"==typeof N?N:wl([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),E):u},E.filter=function(N){return arguments.length?(h="function"==typeof N?N:wl(!!N),E):h},E.handleSize=function(N){return arguments.length?(g=+N,E):g},E.on=function(){var N=f.on.apply(f,arguments);return N===f?E:N},E}var Li=Math.cos,bl=Math.sin,hp=Math.PI,Kc=hp/2,tv=2*hp,Vs=Math.max;function Zc(i){return function(u,h){return i(u.source.value+u.target.value,h.source.value+h.target.value)}}var h0=Array.prototype.slice,ec=function(i){return function(){return i}},Rd=Math.PI,El=2*Rd,Eu=1e-6,d0=El-Eu;function Co(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Wa(){return new Co}function f0(i){return i.source}function p0(i){return i.target}function dp(i){return i.radius}function nv(i){return i.startAngle}function To(i){return i.endAngle}Co.prototype=Wa.prototype={constructor:Co,moveTo:function(i,u){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+u)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(i,u){this._+="L"+(this._x1=+i)+","+(this._y1=+u)},quadraticCurveTo:function(i,u,h,f){this._+="Q"+ +i+","+ +u+","+(this._x1=+h)+","+(this._y1=+f)},bezierCurveTo:function(i,u,h,f,g,v){this._+="C"+ +i+","+ +u+","+ +h+","+ +f+","+(this._x1=+g)+","+(this._y1=+v)},arcTo:function(i,u,h,f,g){var v=this._x1,E=this._y1,I=(h=+h)-(i=+i),S=(f=+f)-(u=+u),k=v-i,O=E-u,U=k*k+O*O;if((g=+g)<0)throw new Error("negative radius: "+g);if(null===this._x1)this._+="M"+(this._x1=i)+","+(this._y1=u);else if(U>Eu)if(Math.abs(O*I-S*k)>Eu&&g){var N=h-v,V=f-E,H=I*I+S*S,z=N*N+V*V,Y=Math.sqrt(H),X=Math.sqrt(U),he=g*Math.tan((Rd-Math.acos((H+U-z)/(2*Y*X)))/2),ee=he/X,De=he/Y;Math.abs(ee-1)>Eu&&(this._+="L"+(i+ee*k)+","+(u+ee*O)),this._+="A"+g+","+g+",0,0,"+ +(O*N>k*V)+","+(this._x1=i+De*I)+","+(this._y1=u+De*S)}else this._+="L"+(this._x1=i)+","+(this._y1=u)},arc:function(i,u,h,f,g,v){i=+i,u=+u;var E=(h=+h)*Math.cos(f),I=h*Math.sin(f),S=i+E,k=u+I,O=1^v,U=v?f-g:g-f;if(h<0)throw new Error("negative radius: "+h);null===this._x1?this._+="M"+S+","+k:(Math.abs(this._x1-S)>Eu||Math.abs(this._y1-k)>Eu)&&(this._+="L"+S+","+k),h&&(U<0&&(U=U%El+El),U>d0?this._+="A"+h+","+h+",0,1,"+O+","+(i-E)+","+(u-I)+"A"+h+","+h+",0,1,"+O+","+(this._x1=S)+","+(this._y1=k):U>Eu&&(this._+="A"+h+","+h+",0,"+ +(U>=Rd)+","+O+","+(this._x1=i+h*Math.cos(g))+","+(this._y1=u+h*Math.sin(g))))},rect:function(i,u,h,f){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+u)+"h"+ +h+"v"+ +f+"h"+-h+"Z"},toString:function(){return this._}};var Do="$";function fp(){}function Ti(i,u){var h=new fp;if(i instanceof fp)i.each(function(I,S){h.set(S,I)});else if(Array.isArray(i)){var v,f=-1,g=i.length;if(null==u)for(;++f<g;)h.set(f,i[f]);else for(;++f<g;)h.set(u(v=i[f],f,i),v)}else if(i)for(var E in i)h.set(E,i[E]);return h}fp.prototype=Ti.prototype={constructor:fp,has:function(i){return Do+i in this},get:function(i){return this[Do+i]},set:function(i,u){return this[Do+i]=u,this},remove:function(i){var u=Do+i;return u in this&&delete this[u]},clear:function(){for(var i in this)i[0]===Do&&delete this[i]},keys:function(){var i=[];for(var u in this)u[0]===Do&&i.push(u.slice(1));return i},values:function(){var i=[];for(var u in this)u[0]===Do&&i.push(this[u]);return i},entries:function(){var i=[];for(var u in this)u[0]===Do&&i.push({key:u.slice(1),value:this[u]});return i},size:function(){var i=0;for(var u in this)u[0]===Do&&++i;return i},empty:function(){for(var i in this)if(i[0]===Do)return!1;return!0},each:function(i){for(var u in this)u[0]===Do&&i(this[u],u.slice(1),this)}};function rv(){return{}}function iv(i,u,h){i[u]=h}function sv(){return Ti()}function pp(i,u,h){i.set(u,h)}function Nd(){}var mh=Ti.prototype;function tm(i,u){var h=new Nd;if(i instanceof Nd)i.each(function(v){h.add(v)});else if(i){var f=-1,g=i.length;if(null==u)for(;++f<g;)h.add(i[f]);else for(;++f<g;)h.add(u(i[f],f,i))}return h}Nd.prototype=tm.prototype={constructor:Nd,has:mh.has,add:function(i){return this[Do+(i+="")]=i,this},remove:mh.remove,clear:mh.clear,values:mh.keys,size:mh.size,empty:mh.empty,each:mh.each};function w(i){return new Function("d","return {"+i.map(function(u,h){return JSON.stringify(u)+": d["+h+"]"}).join(",")+"}")}var Z=function(i){var u=new RegExp('["'+i+"\n\r]"),h=i.charCodeAt(0);function g(k,O){var X,he,U={},N={},V=[],H=k.length,z=0,Y=0;function ee(){if(z>=H)return N;if(he)return he=!1,U;var Se,Oe=z;if(34===k.charCodeAt(Oe)){for(var _e=Oe;_e++<H;)if(34===k.charCodeAt(_e)){if(34!==k.charCodeAt(_e+1))break;++_e}return z=_e+2,13===(Se=k.charCodeAt(_e+1))?(he=!0,10===k.charCodeAt(_e+2)&&++z):10===Se&&(he=!0),k.slice(Oe+1,_e).replace(/""/g,'"')}for(;z<H;){var qe=1;if(10===(Se=k.charCodeAt(z++)))he=!0;else if(13===Se)he=!0,10===k.charCodeAt(z)&&(++z,++qe);else if(Se!==h)continue;return k.slice(Oe,z-qe)}return k.slice(Oe)}for(;(X=ee())!==N;){for(var De=[];X!==U&&X!==N;)De.push(X),X=ee();O&&null==(De=O(De,Y++))||V.push(De)}return V}function I(k){return k.map(S).join(i)}function S(k){return null==k?"":u.test(k+="")?'"'+k.replace(/\"/g,'""')+'"':k}return{parse:function f(k,O){var U,N,V=g(k,function(H,z){if(U)return U(H,z-1);N=H,U=O?function x(i,u){var h=w(i);return function(f,g){return u(h(f),g,i)}}(H,O):w(H)});return V.columns=N,V},parseRows:g,format:function v(k,O){return null==O&&(O=function $(i){var u=Object.create(null),h=[];return i.forEach(function(f){for(var g in f)g in u||h.push(u[g]=g)}),h}(k)),[O.map(S).join(i)].concat(k.map(function(U){return O.map(function(N){return S(U[N])}).join(i)})).join("\n")},formatRows:function E(k){return k.map(I).join("\n")}}},pe=Z(","),ze=pe.parse,Dt=pe.parseRows,qt=pe.format,fn=pe.formatRows,cn=Z("\t"),Yr=cn.parse,So=cn.parseRows,yh=cn.format,nm=cn.formatRows,pi=function(i){return function(){return i}},fa=function(){return 1e-6*(Math.random()-.5)};function rm(i,u,h,f){if(isNaN(u)||isNaN(h))return i;var g,U,N,V,H,z,Y,X,he,v=i._root,E={data:f},I=i._x0,S=i._y0,k=i._x1,O=i._y1;if(!v)return i._root=E,i;for(;v.length;)if((z=u>=(U=(I+k)/2))?I=U:k=U,(Y=h>=(N=(S+O)/2))?S=N:O=N,g=v,!(v=v[X=Y<<1|z]))return g[X]=E,i;if(V=+i._x.call(null,v.data),H=+i._y.call(null,v.data),u===V&&h===H)return E.next=v,g?g[X]=E:i._root=E,i;do{g=g?g[X]=new Array(4):i._root=new Array(4),(z=u>=(U=(I+k)/2))?I=U:k=U,(Y=h>=(N=(S+O)/2))?S=N:O=N}while((X=Y<<1|z)==(he=(H>=N)<<1|V>=U));return g[he]=v,g[X]=E,i}var Fi=function(i,u,h,f,g){this.node=i,this.x0=u,this.y0=h,this.x1=f,this.y1=g};function g0(i){return i[0]}function _h(i){return i[1]}function am(i,u,h){var f=new cv(null==u?g0:u,null==h?_h:h,NaN,NaN,NaN,NaN);return null==i?f:f.addAll(i)}function cv(i,u,h,f,g,v){this._x=i,this._y=u,this._x0=h,this._y0=f,this._x1=g,this._y1=v,this._root=void 0}function m0(i){for(var u={data:i.data},h=u;i=i.next;)h=h.next={data:i.data};return u}var $s=am.prototype=cv.prototype;function uI(i){return i.x+i.vx}function Ob(i){return i.y+i.vy}$s.copy=function(){var h,f,i=new cv(this._x,this._y,this._x0,this._y0,this._x1,this._y1),u=this._root;if(!u)return i;if(!u.length)return i._root=m0(u),i;for(h=[{source:u,target:i._root=new Array(4)}];u=h.pop();)for(var g=0;g<4;++g)(f=u.source[g])&&(f.length?h.push({source:f,target:u.target[g]=new Array(4)}):u.target[g]=m0(f));return i},$s.add=function(i){var u=+this._x.call(null,i),h=+this._y.call(null,i);return rm(this.cover(u,h),u,h,i)},$s.addAll=function js(i){var u,h,g,v,f=i.length,E=new Array(f),I=new Array(f),S=1/0,k=1/0,O=-1/0,U=-1/0;for(h=0;h<f;++h)isNaN(g=+this._x.call(null,u=i[h]))||isNaN(v=+this._y.call(null,u))||(E[h]=g,I[h]=v,g<S&&(S=g),g>O&&(O=g),v<k&&(k=v),v>U&&(U=v));for(O<S&&(S=this._x0,O=this._x1),U<k&&(k=this._y0,U=this._y1),this.cover(S,k).cover(O,U),h=0;h<f;++h)rm(this,E[h],I[h],i[h]);return this},$s.cover=function(i,u){if(isNaN(i=+i)||isNaN(u=+u))return this;var h=this._x0,f=this._y0,g=this._x1,v=this._y1;if(isNaN(h))g=(h=Math.floor(i))+1,v=(f=Math.floor(u))+1;else{if(!(h>i||i>g||f>u||u>v))return this;var S,k,E=g-h,I=this._root;switch(k=(u<(f+v)/2)<<1|i<(h+g)/2){case 0:do{(S=new Array(4))[k]=I,I=S}while(v=f+(E*=2),i>(g=h+E)||u>v);break;case 1:do{(S=new Array(4))[k]=I,I=S}while(v=f+(E*=2),(h=g-E)>i||u>v);break;case 2:do{(S=new Array(4))[k]=I,I=S}while(f=v-(E*=2),i>(g=h+E)||f>u);break;case 3:do{(S=new Array(4))[k]=I,I=S}while(f=v-(E*=2),(h=g-E)>i||f>u)}this._root&&this._root.length&&(this._root=I)}return this._x0=h,this._y0=f,this._x1=g,this._y1=v,this},$s.data=function(){var i=[];return this.visit(function(u){if(!u.length)do{i.push(u.data)}while(u=u.next)}),i},$s.extent=function(i){return arguments.length?this.cover(+i[0][0],+i[0][1]).cover(+i[1][0],+i[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},$s.find=function(i,u,h){var f,E,I,S,k,H,z,g=this._x0,v=this._y0,O=this._x1,U=this._y1,N=[],V=this._root;for(V&&N.push(new Fi(V,g,v,O,U)),null==h?h=1/0:(g=i-h,v=u-h,O=i+h,U=u+h,h*=h);H=N.pop();)if(!(!(V=H.node)||(E=H.x0)>O||(I=H.y0)>U||(S=H.x1)<g||(k=H.y1)<v))if(V.length){var Y=(E+S)/2,X=(I+k)/2;N.push(new Fi(V[3],Y,X,S,k),new Fi(V[2],E,X,Y,k),new Fi(V[1],Y,I,S,X),new Fi(V[0],E,I,Y,X)),(z=(u>=X)<<1|i>=Y)&&(H=N[N.length-1],N[N.length-1]=N[N.length-1-z],N[N.length-1-z]=H)}else{var he=i-+this._x.call(null,V.data),ee=u-+this._y.call(null,V.data),De=he*he+ee*ee;if(De<h){var Oe=Math.sqrt(h=De);g=i-Oe,v=u-Oe,O=i+Oe,U=u+Oe,f=V.data}}return f},$s.remove=function(i){if(isNaN(O=+this._x.call(null,i))||isNaN(U=+this._y.call(null,i)))return this;var u,f,g,v,O,U,N,V,H,z,Y,X,h=this._root,E=this._x0,I=this._y0,S=this._x1,k=this._y1;if(!h)return this;if(h.length)for(;;){if((H=O>=(N=(E+S)/2))?E=N:S=N,(z=U>=(V=(I+k)/2))?I=V:k=V,u=h,!(h=h[Y=z<<1|H]))return this;if(!h.length)break;(u[Y+1&3]||u[Y+2&3]||u[Y+3&3])&&(f=u,X=Y)}for(;h.data!==i;)if(g=h,!(h=h.next))return this;return(v=h.next)&&delete h.next,g?(v?g.next=v:delete g.next,this):u?(v?u[Y]=v:delete u[Y],(h=u[0]||u[1]||u[2]||u[3])&&h===(u[3]||u[2]||u[1]||u[0])&&!h.length&&(f?f[X]=h:this._root=h),this):(this._root=v,this)},$s.removeAll=function kb(i){for(var u=0,h=i.length;u<h;++u)this.remove(i[u]);return this},$s.root=function(){return this._root},$s.size=function(){var i=0;return this.visit(function(u){if(!u.length)do{++i}while(u=u.next)}),i},$s.visit=function(i){var h,g,v,E,I,S,u=[],f=this._root;for(f&&u.push(new Fi(f,this._x0,this._y0,this._x1,this._y1));h=u.pop();)if(!i(f=h.node,v=h.x0,E=h.y0,I=h.x1,S=h.y1)&&f.length){var k=(v+I)/2,O=(E+S)/2;(g=f[3])&&u.push(new Fi(g,k,O,I,S)),(g=f[2])&&u.push(new Fi(g,v,O,k,S)),(g=f[1])&&u.push(new Fi(g,k,E,I,O)),(g=f[0])&&u.push(new Fi(g,v,E,k,O))}return this},$s.visitAfter=function(i){var f,u=[],h=[];for(this._root&&u.push(new Fi(this._root,this._x0,this._y0,this._x1,this._y1));f=u.pop();){var g=f.node;if(g.length){var v,E=f.x0,I=f.y0,S=f.x1,k=f.y1,O=(E+S)/2,U=(I+k)/2;(v=g[0])&&u.push(new Fi(v,E,I,O,U)),(v=g[1])&&u.push(new Fi(v,O,I,S,U)),(v=g[2])&&u.push(new Fi(v,E,U,O,k)),(v=g[3])&&u.push(new Fi(v,O,U,S,k))}h.push(f)}for(;f=h.pop();)i(f.node,f.x0,f.y0,f.x1,f.y1);return this},$s.x=function(i){return arguments.length?(this._x=i,this):this._x},$s.y=function(i){return arguments.length?(this._y=i,this):this._y};function Lb(i){return i.index}function lv(i,u){var h=i.get(u);if(!h)throw new Error("missing: "+u);return h}function mp(i){return i.x}function hv(i){return i.y}var rt,dv=Math.PI*(3-Math.sqrt(5)),cm=function(i,u){if((h=(i=u?i.toExponential(u-1):i.toExponential()).indexOf("e"))<0)return null;var h,f=i.slice(0,h);return[f.length>1?f[0]+f.slice(2):f,+i.slice(h+1)]},yp=function(i){return(i=cm(Math.abs(i)))?i[1]:NaN},Tn=function(i,u){var h=cm(i,u);if(!h)return i+"";var f=h[0],g=h[1];return g<0?"0."+new Array(-g).join("0")+f:f.length>g+1?f.slice(0,g+1)+"."+f.slice(g+1):f+new Array(g-f.length+2).join("0")},Pd={"":function(i,u){e:for(var v,h=(i=i.toPrecision(u)).length,f=1,g=-1;f<h;++f)switch(i[f]){case".":g=v=f;break;case"0":0===g&&(g=f),v=f;break;case"e":break e;default:g>0&&(g=0)}return g>0?i.slice(0,g)+i.slice(v+1):i},"%":function(i,u){return(100*i).toFixed(u)},b:function(i){return Math.round(i).toString(2)},c:function(i){return i+""},d:function(i){return Math.round(i).toString(10)},e:function(i,u){return i.toExponential(u)},f:function(i,u){return i.toFixed(u)},g:function(i,u){return i.toPrecision(u)},o:function(i){return Math.round(i).toString(8)},p:function(i,u){return Tn(100*i,u)},r:Tn,s:function(i,u){var h=cm(i,u);if(!h)return i+"";var f=h[0],g=h[1],v=g-(rt=3*Math.max(-8,Math.min(8,Math.floor(g/3))))+1,E=f.length;return v===E?f:v>E?f+new Array(v-E+1).join("0"):v>0?f.slice(0,v)+"."+f.slice(v):"0."+new Array(1-v).join("0")+cm(i,Math.max(0,u+v-1))[0]},X:function(i){return Math.round(i).toString(16).toUpperCase()},x:function(i){return Math.round(i).toString(16)}},v0=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function vp(i){return new _0(i)}function _0(i){if(!(u=v0.exec(i)))throw new Error("invalid format: "+i);var u,h=u[1]||" ",f=u[2]||">",g=u[3]||"-",v=u[4]||"",E=!!u[5],I=u[6]&&+u[6],S=!!u[7],k=u[8]&&+u[8].slice(1),O=u[9]||"";"n"===O?(S=!0,O="g"):Pd[O]||(O=""),(E||"0"===h&&"="===f)&&(E=!0,h="0",f="="),this.fill=h,this.align=f,this.sign=g,this.symbol=v,this.zero=E,this.width=I,this.comma=S,this.precision=k,this.type=O}vp.prototype=_0.prototype,_0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var _p,Cu=function(i){return i},gi=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],hm=function(i){var u=i.grouping&&i.thousands?function(i,u){return function(h,f){for(var g=h.length,v=[],E=0,I=i[0],S=0;g>0&&I>0&&(S+I+1>f&&(I=Math.max(1,f-S)),v.push(h.substring(g-=I,g+I)),!((S+=I+1)>f));)I=i[E=(E+1)%i.length];return v.reverse().join(u)}}(i.grouping,i.thousands):Cu,h=i.currency,f=i.decimal,g=i.numerals?function(i){return function(u){return u.replace(/[0-9]/g,function(h){return i[+h]})}}(i.numerals):Cu,v=i.percent||"%";function E(S){var k=(S=vp(S)).fill,O=S.align,U=S.sign,N=S.symbol,V=S.zero,H=S.width,z=S.comma,Y=S.precision,X=S.type,he="$"===N?h[0]:"#"===N&&/[boxX]/.test(X)?"0"+X.toLowerCase():"",ee="$"===N?h[1]:/[%p]/.test(X)?v:"",De=Pd[X],Oe=!X||/[defgprs%]/.test(X);function Se(_e){var St,mt,st,qe=he,$e=ee;if("c"===X)$e=De(_e)+$e,_e="";else{var Vt=(_e=+_e)<0;if(_e=De(Math.abs(_e),Y),Vt&&0==+_e&&(Vt=!1),qe=(Vt?"("===U?U:"-":"-"===U||"("===U?"":U)+qe,$e=$e+("s"===X?gi[8+rt/3]:"")+(Vt&&"("===U?")":""),Oe)for(St=-1,mt=_e.length;++St<mt;)if(48>(st=_e.charCodeAt(St))||st>57){$e=(46===st?f+_e.slice(St+1):_e.slice(St))+$e,_e=_e.slice(0,St);break}}z&&!V&&(_e=u(_e,1/0));var pt=qe.length+_e.length+$e.length,le=pt<H?new Array(H-pt+1).join(k):"";switch(z&&V&&(_e=u(le+_e,le.length?H-$e.length:1/0),le=""),O){case"<":_e=qe+_e+$e+le;break;case"=":_e=qe+le+_e+$e;break;case"^":_e=le.slice(0,pt=le.length>>1)+qe+_e+$e+le.slice(pt);break;default:_e=le+qe+_e+$e}return g(_e)}return Y=null==Y?X?6:12:/[gprs]/.test(X)?Math.max(1,Math.min(21,Y)):Math.max(0,Math.min(20,Y)),Se.toString=function(){return S+""},Se}return{format:E,formatPrefix:function I(S,k){var O=E(((S=vp(S)).type="f",S)),U=3*Math.max(-8,Math.min(8,Math.floor(yp(k)/3))),N=Math.pow(10,-U),V=gi[8+U/3];return function(H){return O(N*H)+V}}}};function jb(i){return _p=hm(i),M.format=_p.format,M.formatPrefix=_p.formatPrefix,_p}jb({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var $b=function(i){return Math.max(0,-yp(Math.abs(i)))},Hb=function(i,u){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(yp(u)/3)))-yp(Math.abs(i)))},w0=function(i,u){return i=Math.abs(i),u=Math.abs(u)-i,Math.max(0,yp(u)-yp(i))+1},bh=function(){return new fv};function fv(){this.reset()}fv.prototype={constructor:fv,reset:function(){this.s=this.t=0},add:function(i){Pn(dm,i,this.t),Pn(this,dm.s,this.s),this.s?this.t+=dm.t:this.s=dm.t},valueOf:function(){return this.s}};var dm=new fv;function Pn(i,u,h){var f=i.s=u+h,g=f-u;i.t=u-(f-g)+(h-g)}var In=1e-6,nr=Math.PI,mi=nr/2,pa=nr/4,es=2*nr,Hr=180/nr,Cn=nr/180,Gn=Math.abs,Tu=Math.atan,mr=Math.atan2,dn=Math.cos,E0=Math.ceil,I0=Math.exp,C0=Math.log,wp=Math.pow,tn=Math.sin,Yc=Math.sign||function(i){return i>0?1:i<0?-1:0},Di=Math.sqrt,Od=Math.tan;function T0(i){return i>1?0:i<-1?nr:Math.acos(i)}function Ui(i){return i>1?mi:i<-1?-mi:Math.asin(i)}function D0(i){return(i=tn(i/2))*i}function br(){}function pv(i,u){i&&hI.hasOwnProperty(i.type)&&hI[i.type](i,u)}var bp={Feature:function(i,u){pv(i.geometry,u)},FeatureCollection:function(i,u){for(var h=i.features,f=-1,g=h.length;++f<g;)pv(h[f].geometry,u)}},hI={Sphere:function(i,u){u.sphere()},Point:function(i,u){u.point((i=i.coordinates)[0],i[1],i[2])},MultiPoint:function(i,u){for(var h=i.coordinates,f=-1,g=h.length;++f<g;)u.point((i=h[f])[0],i[1],i[2])},LineString:function(i,u){S0(i.coordinates,u,0)},MultiLineString:function(i,u){for(var h=i.coordinates,f=-1,g=h.length;++f<g;)S0(h[f],u,0)},Polygon:function(i,u){dI(i.coordinates,u)},MultiPolygon:function(i,u){for(var h=i.coordinates,f=-1,g=h.length;++f<g;)dI(h[f],u)},GeometryCollection:function(i,u){for(var h=i.geometries,f=-1,g=h.length;++f<g;)pv(h[f],u)}};function S0(i,u,h){var v,f=-1,g=i.length-h;for(u.lineStart();++f<g;)u.point((v=i[f])[0],v[1],v[2]);u.lineEnd()}function dI(i,u){var h=-1,f=i.length;for(u.polygonStart();++h<f;)S0(i[h],u,1);u.polygonEnd()}var mv,fI,zb,ga,yv,Du=function(i,u){i&&bp.hasOwnProperty(i.type)?bp[i.type](i,u):pv(i,u)},fm=bh(),gv=bh(),tc={point:br,lineStart:br,lineEnd:br,polygonStart:function(){fm.reset(),tc.lineStart=pI,tc.lineEnd=jC},polygonEnd:function(){var i=+fm;gv.add(i<0?es+i:i),this.lineStart=this.lineEnd=this.point=br},sphere:function(){gv.add(es)}};function pI(){tc.point=gI}function jC(){Gb(mv,fI)}function gI(i,u){tc.point=Gb,mv=i,fI=u,zb=i*=Cn,ga=dn(u=(u*=Cn)/2+pa),yv=tn(u)}function Gb(i,u){var h=(i*=Cn)-zb,f=h>=0?1:-1,g=f*h,v=dn(u=(u*=Cn)/2+pa),E=tn(u),I=yv*E,S=ga*v+I*dn(g),k=I*f*tn(g);fm.add(mr(k,S)),zb=i,ga=v,yv=E}function nc(i){return[mr(i[1],i[0]),Ui(i[2])]}function Cl(i){var u=i[0],h=i[1],f=dn(h);return[f*dn(u),f*tn(u),tn(h)]}function Ka(i,u){return i[0]*u[0]+i[1]*u[1]+i[2]*u[2]}function Tl(i,u){return[i[1]*u[2]-i[2]*u[1],i[2]*u[0]-i[0]*u[2],i[0]*u[1]-i[1]*u[0]]}function pm(i,u){i[0]+=u[0],i[1]+=u[1],i[2]+=u[2]}function gm(i,u){return[i[0]*u,i[1]*u,i[2]*u]}function Ld(i){var u=Di(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=u,i[1]/=u,i[2]/=u}var Si,ar,Qr,Su,Za,qb,A0,Fd,ma,Ko,mm=bh(),Au={point:Eh,lineStart:Ao,lineEnd:rc,polygonStart:function(){Au.point=Ip,Au.lineStart=Wb,Au.lineEnd=x0,mm.reset(),tc.polygonStart()},polygonEnd:function(){tc.polygonEnd(),Au.point=Eh,Au.lineStart=Ao,Au.lineEnd=rc,fm<0?(Si=-(Qr=180),ar=-(Su=90)):mm>In?Su=90:mm<-In&&(ar=-90),Ko[0]=Si,Ko[1]=Qr}};function Eh(i,u){ma.push(Ko=[Si=i,Qr=i]),u<ar&&(ar=u),u>Su&&(Su=u)}function Ep(i,u){var h=Cl([i*Cn,u*Cn]);if(Fd){var f=Tl(Fd,h),v=Tl([f[1],-f[0],0],f);Ld(v),v=nc(v);var k,E=i-Za,I=E>0?1:-1,S=v[0]*Hr*I,O=Gn(E)>180;O^(I*Za<S&&S<I*i)?(k=v[1]*Hr)>Su&&(Su=k):O^(I*Za<(S=(S+360)%360-180)&&S<I*i)?(k=-v[1]*Hr)<ar&&(ar=k):(u<ar&&(ar=u),u>Su&&(Su=u)),O?i<Za?ts(Si,i)>ts(Si,Qr)&&(Qr=i):ts(i,Qr)>ts(Si,Qr)&&(Si=i):Qr>=Si?(i<Si&&(Si=i),i>Qr&&(Qr=i)):i>Za?ts(Si,i)>ts(Si,Qr)&&(Qr=i):ts(i,Qr)>ts(Si,Qr)&&(Si=i)}else ma.push(Ko=[Si=i,Qr=i]);u<ar&&(ar=u),u>Su&&(Su=u),Fd=h,Za=i}function Ao(){Au.point=Ep}function rc(){Ko[0]=Si,Ko[1]=Qr,Au.point=Eh,Fd=null}function Ip(i,u){if(Fd){var h=i-Za;mm.add(Gn(h)>180?h+(h>0?360:-360):h)}else qb=i,A0=u;tc.point(i,u),Ep(i,u)}function Wb(){tc.lineStart()}function x0(){Ip(qb,A0),tc.lineEnd(),Gn(mm)>In&&(Si=-(Qr=180)),Ko[0]=Si,Ko[1]=Qr,Fd=null}function ts(i,u){return(u-=i)<0?u+360:u}function Cp(i,u){return i[0]-u[0]}function Tp(i,u){return i[0]<=i[1]?i[0]<=u&&u<=i[1]:u<i[0]||i[1]<u}var Ud,M0,ym,vm,vv,Dp,_m,Bd,io,R0,k0,Kb,yI,xo,Dr,so,Ya={sphere:br,point:Dl,lineStart:Zb,lineEnd:Yb,polygonStart:function(){Ya.lineStart=Qb,Ya.lineEnd=_I},polygonEnd:function(){Ya.lineStart=Zb,Ya.lineEnd=Yb}};function Dl(i,u){i*=Cn;var h=dn(u*=Cn);Sp(h*dn(i),h*tn(i),tn(u))}function Sp(i,u,h){++Ud,ym+=(i-ym)/Ud,vm+=(u-vm)/Ud,vv+=(h-vv)/Ud}function Zb(){Ya.point=vI}function vI(i,u){i*=Cn;var h=dn(u*=Cn);xo=h*dn(i),Dr=h*tn(i),so=tn(u),Ya.point=xu,Sp(xo,Dr,so)}function xu(i,u){i*=Cn;var h=dn(u*=Cn),f=h*dn(i),g=h*tn(i),v=tn(u),E=mr(Di((E=Dr*v-so*g)*E+(E=so*f-xo*v)*E+(E=xo*g-Dr*f)*E),xo*f+Dr*g+so*v);M0+=E,Dp+=E*(xo+(xo=f)),_m+=E*(Dr+(Dr=g)),Bd+=E*(so+(so=v)),Sp(xo,Dr,so)}function Yb(){Ya.point=Dl}function Qb(){Ya.point=wI}function _I(){_v(Kb,yI),Ya.point=Dl}function wI(i,u){Kb=i,yI=u,i*=Cn,u*=Cn,Ya.point=_v;var h=dn(u);xo=h*dn(i),Dr=h*tn(i),so=tn(u),Sp(xo,Dr,so)}function _v(i,u){i*=Cn;var h=dn(u*=Cn),f=h*dn(i),g=h*tn(i),v=tn(u),E=Dr*v-so*g,I=so*f-xo*v,S=xo*g-Dr*f,k=Di(E*E+I*I+S*S),O=Ui(k),U=k&&-O/k;io+=U*E,R0+=U*I,k0+=U*S,M0+=O,Dp+=O*(xo+(xo=f)),_m+=O*(Dr+(Dr=g)),Bd+=O*(so+(so=v)),Sp(xo,Dr,so)}var Ap=function(i){return function(){return i}},ic=function(i,u){function h(f,g){return f=i(f,g),u(f[0],f[1])}return i.invert&&u.invert&&(h.invert=function(f,g){return(f=u.invert(f,g))&&i.invert(f[0],f[1])}),h};function xp(i,u){return[i>nr?i-es:i<-nr?i+es:i,u]}function N0(i,u,h){return(i%=es)?u||h?ic(bI(i),wv(u,h)):bI(i):u||h?wv(u,h):xp}function Xb(i){return function(u,h){return[(u+=i)>nr?u-es:u<-nr?u+es:u,h]}}function bI(i){var u=Xb(i);return u.invert=Xb(-i),u}function wv(i,u){var h=dn(i),f=tn(i),g=dn(u),v=tn(u);function E(I,S){var k=dn(S),O=dn(I)*k,U=tn(I)*k,N=tn(S),V=N*h+O*f;return[mr(U*g-V*v,O*h-N*f),Ui(V*g+U*v)]}return E.invert=function(I,S){var k=dn(S),O=dn(I)*k,U=tn(I)*k,N=tn(S),V=N*g-U*v;return[mr(U*g+N*v,O*h+V*f),Ui(V*h-O*f)]},E}xp.invert=xp;var bv=function(i){function u(h){return(h=i(h[0]*Cn,h[1]*Cn))[0]*=Hr,h[1]*=Hr,h}return i=N0(i[0]*Cn,i[1]*Cn,i.length>2?i[2]*Cn:0),u.invert=function(h){return(h=i.invert(h[0]*Cn,h[1]*Cn))[0]*=Hr,h[1]*=Hr,h},u};function P0(i,u,h,f,g,v){if(h){var E=dn(u),I=tn(u),S=f*h;null==g?(g=u+f*es,v=u-S/2):(g=Jb(E,g),v=Jb(E,v),(f>0?g<v:g>v)&&(g+=f*es));for(var k,O=g;f>0?O>v:O<v;O-=S)k=nc([E,-I*dn(O),-I*tn(O)]),i.point(k[0],k[1])}}function Jb(i,u){(u=Cl(u))[0]-=i,Ld(u);var h=T0(-u[1]);return((-u[2]<0?-h:h)+es-In)%es}var eE=function(){var u,i=[];return{point:function(h,f){u.push([h,f])},lineStart:function(){i.push(u=[])},lineEnd:br,rejoin:function(){i.length>1&&i.push(i.pop().concat(i.shift()))},result:function(){var h=i;return i=[],u=null,h}}},Ch=function(i,u){return Gn(i[0]-u[0])<In&&Gn(i[1]-u[1])<In};function Mp(i,u,h,f){this.x=i,this.z=u,this.o=h,this.e=f,this.v=!1,this.n=this.p=null}var tE=function(i,u,h,f,g){var I,S,v=[],E=[];if(i.forEach(function(H){if(!((z=H.length-1)<=0)){var z,he,Y=H[0],X=H[z];if(Ch(Y,X)){for(g.lineStart(),I=0;I<z;++I)g.point((Y=H[I])[0],Y[1]);return void g.lineEnd()}v.push(he=new Mp(Y,H,null,!0)),E.push(he.o=new Mp(Y,null,he,!1)),v.push(he=new Mp(X,H,null,!1)),E.push(he.o=new Mp(X,null,he,!0))}}),v.length){for(E.sort(u),wm(v),wm(E),I=0,S=E.length;I<S;++I)E[I].e=h=!h;for(var O,U,k=v[0];;){for(var N=k,V=!0;N.v;)if((N=N.n)===k)return;O=N.z,g.lineStart();do{if(N.v=N.o.v=!0,N.e){if(V)for(I=0,S=O.length;I<S;++I)g.point((U=O[I])[0],U[1]);else f(N.x,N.n.x,1,g);N=N.n}else{if(V)for(I=(O=N.p.z).length-1;I>=0;--I)g.point((U=O[I])[0],U[1]);else f(N.x,N.p.x,-1,g);N=N.p}O=(N=N.o).z,V=!V}while(!N.v);g.lineEnd()}}};function wm(i){if(u=i.length){for(var u,g,h=0,f=i[0];++h<u;)f.n=g=i[h],g.p=f,f=g;f.n=g=i[0],g.p=f}}var Vd=1e9,Rp=-Vd;function nE(i,u,h,f){function g(k,O){return i<=k&&k<=h&&u<=O&&O<=f}function v(k,O,U,N){var V=0,H=0;if(null==k||(V=E(k,U))!==(H=E(O,U))||S(k,O)<0^U>0)do{N.point(0===V||3===V?i:h,V>1?f:u)}while((V=(V+U+4)%4)!==H);else N.point(O[0],O[1])}function E(k,O){return Gn(k[0]-i)<In?O>0?0:3:Gn(k[0]-h)<In?O>0?2:1:Gn(k[1]-u)<In?O>0?1:0:O>0?3:2}function I(k,O){return S(k.x,O.x)}function S(k,O){var U=E(k,1),N=E(O,1);return U!==N?U-N:0===U?O[1]-k[1]:1===U?k[0]-O[0]:2===U?k[1]-O[1]:O[0]-k[0]}return function(k){var N,V,H,z,Y,X,he,ee,De,Oe,Se,O=k,U=eE(),_e={point:qe,lineStart:function st(){_e.point=pt,V&&V.push(H=[]),Oe=!0,De=!1,he=ee=NaN},lineEnd:function Vt(){N&&(pt(z,Y),X&&De&&U.rejoin(),N.push(U.result())),_e.point=qe,De&&O.lineEnd()},polygonStart:function St(){O=U,N=[],V=[],Se=!0},polygonEnd:function mt(){var le=function $e(){for(var le=0,it=0,xt=V.length;it<xt;++it)for(var ur,Qn,$t=V[it],Yt=1,jn=$t.length,kn=$t[0],zr=kn[0],Br=kn[1];Yt<jn;++Yt)ur=zr,Qn=Br,zr=(kn=$t[Yt])[0],Br=kn[1],Qn<=f?Br>f&&(zr-ur)*(f-Qn)>(Br-Qn)*(i-ur)&&++le:Br<=f&&(zr-ur)*(f-Qn)<(Br-Qn)*(i-ur)&&--le;return le}(),it=Se&&le,xt=(N=Jt(N)).length;(it||xt)&&(k.polygonStart(),it&&(k.lineStart(),v(null,null,1,k),k.lineEnd()),xt&&tE(N,I,le,v,k),k.polygonEnd()),O=k,N=V=H=null}};function qe(le,it){g(le,it)&&O.point(le,it)}function pt(le,it){var xt=g(le,it);if(V&&H.push([le,it]),Oe)z=le,Y=it,X=xt,Oe=!1,xt&&(O.lineStart(),O.point(le,it));else if(xt&&De)O.point(le,it);else{var $t=[he=Math.max(Rp,Math.min(Vd,he)),ee=Math.max(Rp,Math.min(Vd,ee))],Yt=[le=Math.max(Rp,Math.min(Vd,le)),it=Math.max(Rp,Math.min(Vd,it))];!function(i,u,h,f,g,v){var H,E=i[0],I=i[1],O=0,U=1,N=u[0]-E,V=u[1]-I;if(H=h-E,N||!(H>0)){if(H/=N,N<0){if(H<O)return;H<U&&(U=H)}else if(N>0){if(H>U)return;H>O&&(O=H)}if(H=g-E,N||!(H<0)){if(H/=N,N<0){if(H>U)return;H>O&&(O=H)}else if(N>0){if(H<O)return;H<U&&(U=H)}if(H=f-I,V||!(H>0)){if(H/=V,V<0){if(H<O)return;H<U&&(U=H)}else if(V>0){if(H>U)return;H>O&&(O=H)}if(H=v-I,V||!(H<0)){if(H/=V,V<0){if(H>U)return;H>O&&(O=H)}else if(V>0){if(H<O)return;H<U&&(U=H)}return O>0&&(i[0]=E+O*N,i[1]=I+O*V),U<1&&(u[0]=E+U*N,u[1]=I+U*V),!0}}}}}($t,Yt,i,u,h,f)?xt&&(O.lineStart(),O.point(le,it),Se=!1):(De||(O.lineStart(),O.point($t[0],$t[1])),O.point(Yt[0],Yt[1]),xt||O.lineEnd(),Se=!1)}he=le,ee=it,De=xt}return _e}}var L0,Iv,bm,kp=bh(),iE=function(i,u){var h=u[0],f=u[1],g=[tn(h),-dn(h),0],v=0,E=0;kp.reset();for(var I=0,S=i.length;I<S;++I)if(O=(k=i[I]).length)for(var k,O,U=k[O-1],N=U[0],V=U[1]/2+pa,H=tn(V),z=dn(V),Y=0;Y<O;++Y,N=he,H=De,z=Oe,U=X){var X=k[Y],he=X[0],ee=X[1]/2+pa,De=tn(ee),Oe=dn(ee),Se=he-N,_e=Se>=0?1:-1,qe=_e*Se,$e=qe>nr,St=H*De;if(kp.add(mr(St*_e*tn(qe),z*Oe+St*dn(qe))),v+=$e?Se+_e*es:Se,$e^N>=h^he>=h){var mt=Tl(Cl(U),Cl(X));Ld(mt);var st=Tl(g,mt);Ld(st);var Vt=($e^Se>=0?-1:1)*Ui(st[2]);(f>Vt||f===Vt&&(mt[0]||mt[1]))&&(E+=$e^Se>=0?1:-1)}}return(v<-In||v<In&&kp<-In)^1&E},Ev=bh(),jd={sphere:br,point:br,lineStart:function sE(){jd.point=Cv,jd.lineEnd=Sl},lineEnd:br,polygonStart:br,polygonEnd:br};function Sl(){jd.point=jd.lineEnd=br}function Cv(i,u){L0=i*=Cn,Iv=tn(u*=Cn),bm=dn(u),jd.point=II}function II(i,u){i*=Cn;var h=tn(u*=Cn),f=dn(u),g=Gn(i-L0),v=dn(g),I=f*tn(g),S=bm*h-Iv*f*v,k=Iv*h+bm*f*v;Ev.add(mr(Di(I*I+S*S),k)),L0=i,Iv=h,bm=f}var Tv=function(i){return Ev.reset(),Du(i,jd),+Ev},oE=[null,null],$d={type:"LineString",coordinates:oE},Np=function(i,u){return oE[0]=i,oE[1]=u,Tv($d)},Pp={Feature:function(i,u){return F0(i.geometry,u)},FeatureCollection:function(i,u){for(var h=i.features,f=-1,g=h.length;++f<g;)if(F0(h[f].geometry,u))return!0;return!1}},Op={Sphere:function(){return!0},Point:function(i,u){return U0(i.coordinates,u)},MultiPoint:function(i,u){for(var h=i.coordinates,f=-1,g=h.length;++f<g;)if(U0(h[f],u))return!0;return!1},LineString:function(i,u){return B0(i.coordinates,u)},MultiLineString:function(i,u){for(var h=i.coordinates,f=-1,g=h.length;++f<g;)if(B0(h[f],u))return!0;return!1},Polygon:function(i,u){return V0(i.coordinates,u)},MultiPolygon:function(i,u){for(var h=i.coordinates,f=-1,g=h.length;++f<g;)if(V0(h[f],u))return!0;return!1},GeometryCollection:function(i,u){for(var h=i.geometries,f=-1,g=h.length;++f<g;)if(F0(h[f],u))return!0;return!1}};function F0(i,u){return!(!i||!Op.hasOwnProperty(i.type))&&Op[i.type](i,u)}function U0(i,u){return 0===Np(i,u)}function B0(i,u){var h=Np(i[0],i[1]);return Np(i[0],u)+Np(u,i[1])<=h+In}function V0(i,u){return!!iE(i.map(j0),$0(u))}function j0(i){return(i=i.map($0)).pop(),i}function $0(i){return[i[0]*Cn,i[1]*Cn]}function aE(i,u,h){var f=We(i,u-In,h).concat(u);return function(g){return f.map(function(v){return[g,v]})}}function uE(i,u,h){var f=We(i,u-In,h).concat(u);return function(g){return f.map(function(v){return[v,g]})}}function H0(){var i,u,h,f,g,v,E,I,N,V,H,z,S=10,k=S,O=90,U=360,Y=2.5;function X(){return{type:"MultiLineString",coordinates:he()}}function he(){return We(E0(f/O)*O,h,O).map(H).concat(We(E0(I/U)*U,E,U).map(z)).concat(We(E0(u/S)*S,i,S).filter(function(ee){return Gn(ee%O)>In}).map(N)).concat(We(E0(v/k)*k,g,k).filter(function(ee){return Gn(ee%U)>In}).map(V))}return X.lines=function(){return he().map(function(ee){return{type:"LineString",coordinates:ee}})},X.outline=function(){return{type:"Polygon",coordinates:[H(f).concat(z(E).slice(1),H(h).reverse().slice(1),z(I).reverse().slice(1))]}},X.extent=function(ee){return arguments.length?X.extentMajor(ee).extentMinor(ee):X.extentMinor()},X.extentMajor=function(ee){return arguments.length?(I=+ee[0][1],E=+ee[1][1],(f=+ee[0][0])>(h=+ee[1][0])&&(ee=f,f=h,h=ee),I>E&&(ee=I,I=E,E=ee),X.precision(Y)):[[f,I],[h,E]]},X.extentMinor=function(ee){return arguments.length?(v=+ee[0][1],g=+ee[1][1],(u=+ee[0][0])>(i=+ee[1][0])&&(ee=u,u=i,i=ee),v>g&&(ee=v,v=g,g=ee),X.precision(Y)):[[u,v],[i,g]]},X.step=function(ee){return arguments.length?X.stepMajor(ee).stepMinor(ee):X.stepMinor()},X.stepMajor=function(ee){return arguments.length?(O=+ee[0],U=+ee[1],X):[O,U]},X.stepMinor=function(ee){return arguments.length?(S=+ee[0],k=+ee[1],X):[S,k]},X.precision=function(ee){return arguments.length?(Y=+ee,N=aE(v,g,90),V=uE(u,i,Y),H=aE(I,E,90),z=uE(f,h,Y),X):Y},X.extentMajor([[-180,-90+In],[180,90-In]]).extentMinor([[-180,-80-In],[180,80+In]])}var cE,lE,Dv,Sv,Th=function(i){return i},Qc=bh(),Hd=bh(),bs={point:br,lineStart:br,lineEnd:br,polygonStart:function(){bs.lineStart=G0,bs.lineEnd=Av},polygonEnd:function(){bs.lineStart=bs.lineEnd=bs.point=br,Qc.add(Gn(Hd)),Hd.reset()},result:function(){var i=Qc/2;return Qc.reset(),i}};function G0(){bs.point=Fp}function Fp(i,u){bs.point=Ai,cE=Dv=i,lE=Sv=u}function Ai(i,u){Hd.add(Sv*i-Dv*u),Dv=i,Sv=u}function Av(){Ai(cE,lE)}var Al=1/0,zd=Al,Up=-Al,Bp=Up,Em={point:function q0(i,u){i<Al&&(Al=i),i>Up&&(Up=i),u<zd&&(zd=u),u>Bp&&(Bp=u)},lineStart:br,lineEnd:br,polygonStart:br,polygonEnd:br,result:function(){var i=[[Al,zd],[Up,Bp]];return Up=Bp=-(zd=Al=1/0),i}};var fE,CI,ns,Xc,W0=0,xv=0,Mv=0,K0=0,hE=0,Rv=0,kv=0,dE=0,Im=0,Qa={point:Jc,lineStart:Nv,lineEnd:TI,polygonStart:function(){Qa.lineStart=DI,Qa.lineEnd=SI},polygonEnd:function(){Qa.point=Jc,Qa.lineStart=Nv,Qa.lineEnd=TI},result:function(){var i=Im?[kv/Im,dE/Im]:Rv?[K0/Rv,hE/Rv]:Mv?[W0/Mv,xv/Mv]:[NaN,NaN];return W0=xv=Mv=K0=hE=Rv=kv=dE=Im=0,i}};function Jc(i,u){W0+=i,xv+=u,++Mv}function Nv(){Qa.point=pE}function pE(i,u){Qa.point=Z0,Jc(ns=i,Xc=u)}function Z0(i,u){var h=i-ns,f=u-Xc,g=Di(h*h+f*f);K0+=g*(ns+i)/2,hE+=g*(Xc+u)/2,Rv+=g,Jc(ns=i,Xc=u)}function TI(){Qa.point=Jc}function DI(){Qa.point=AI}function SI(){Cm(fE,CI)}function AI(i,u){Qa.point=Cm,Jc(fE=ns=i,CI=Xc=u)}function Cm(i,u){var h=i-ns,f=u-Xc,g=Di(h*h+f*f);K0+=g*(ns+i)/2,hE+=g*(Xc+u)/2,Rv+=g,kv+=(g=Xc*i-ns*u)*(ns+i),dE+=g*(Xc+u),Im+=3*g,Jc(ns=i,Xc=u)}function xI(i){this._context=i}xI.prototype={_radius:4.5,pointRadius:function(i){return this._radius=i,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(i,u){switch(this._point){case 0:this._context.moveTo(i,u),this._point=1;break;case 1:this._context.lineTo(i,u);break;default:this._context.moveTo(i+this._radius,u),this._context.arc(i,u,this._radius,0,es)}},result:br};var Pv,mE,yi,Es,xl,gE=bh(),Xa={point:br,lineStart:function(){Xa.point=yE},lineEnd:function(){Pv&&Gd(mE,yi),Xa.point=br},polygonStart:function(){Pv=!0},polygonEnd:function(){Pv=null},result:function(){var i=+gE;return gE.reset(),i}};function yE(i,u){Xa.point=Gd,mE=Es=i,yi=xl=u}function Gd(i,u){gE.add(Di((Es-=i)*Es+(xl-=u)*xl)),Es=i,xl=u}function el(){this._string=[]}function Y0(i){return"m0,"+i+"a"+i+","+i+" 0 1,1 0,"+-2*i+"a"+i+","+i+" 0 1,1 0,"+2*i+"z"}el.prototype={_radius:4.5,_circle:Y0(4.5),pointRadius:function(i){return(i=+i)!==this._radius&&(this._radius=i,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(i,u){switch(this._point){case 0:this._string.push("M",i,",",u),this._point=1;break;case 1:this._string.push("L",i,",",u);break;default:null==this._circle&&(this._circle=Y0(this._radius)),this._string.push("M",i,",",u,this._circle)}},result:function(){if(this._string.length){var i=this._string.join("");return this._string=[],i}return null}};var oc=function(i,u,h,f){return function(g,v){var U,N,V,E=u(v),I=g.invert(f[0],f[1]),S=eE(),k=u(S),O=!1,H={point:z,lineStart:X,lineEnd:he,polygonStart:function(){H.point=ee,H.lineStart=De,H.lineEnd=Oe,N=[],U=[]},polygonEnd:function(){H.point=z,H.lineStart=X,H.lineEnd=he,N=Jt(N);var Se=iE(U,I);N.length?(O||(v.polygonStart(),O=!0),tE(N,Mo,Se,h,v)):Se&&(O||(v.polygonStart(),O=!0),v.lineStart(),h(null,null,1,v),v.lineEnd()),O&&(v.polygonEnd(),O=!1),N=U=null},sphere:function(){v.polygonStart(),v.lineStart(),h(null,null,1,v),v.lineEnd(),v.polygonEnd()}};function z(Se,_e){var qe=g(Se,_e);i(Se=qe[0],_e=qe[1])&&v.point(Se,_e)}function Y(Se,_e){var qe=g(Se,_e);E.point(qe[0],qe[1])}function X(){H.point=Y,E.lineStart()}function he(){H.point=z,E.lineEnd()}function ee(Se,_e){V.push([Se,_e]);var qe=g(Se,_e);k.point(qe[0],qe[1])}function De(){k.lineStart(),V=[]}function Oe(){ee(V[0][0],V[0][1]),k.lineEnd();var qe,St,mt,st,Se=k.clean(),_e=S.result(),$e=_e.length;if(V.pop(),U.push(V),V=null,$e){if(1&Se){if((St=(mt=_e[0]).length-1)>0){for(O||(v.polygonStart(),O=!0),v.lineStart(),qe=0;qe<St;++qe)v.point((st=mt[qe])[0],st[1]);v.lineEnd()}return}$e>1&&2&Se&&_e.push(_e.pop().concat(_e.shift())),N.push(_e.filter(Tm))}}return H}};function Tm(i){return i.length>1}function Mo(i,u){return((i=i.x)[0]<0?i[1]-mi-In:mi-i[1])-((u=u.x)[0]<0?u[1]-mi-In:mi-u[1])}var Dh=oc(function(){return!0},function Lv(i){var g,u=NaN,h=NaN,f=NaN;return{lineStart:function(){i.lineStart(),g=1},point:function(v,E){var I=v>0?nr:-nr,S=Gn(v-u);Gn(S-nr)<In?(i.point(u,h=(h+E)/2>0?mi:-mi),i.point(f,h),i.lineEnd(),i.lineStart(),i.point(I,h),i.point(v,h),g=0):f!==I&&S>=nr&&(Gn(u-f)<In&&(u-=f*In),Gn(v-I)<In&&(v-=I*In),h=function Zo(i,u,h,f){var g,v,E=tn(i-h);return Gn(E)>In?Tu((tn(u)*(v=dn(f))*tn(h)-tn(f)*(g=dn(u))*tn(i))/(g*v*E)):(u+f)/2}(u,h,v,E),i.point(f,h),i.lineEnd(),i.lineStart(),i.point(I,h),g=0),i.point(u=v,h=E),f=I},lineEnd:function(){i.lineEnd(),u=h=NaN},clean:function(){return 2-g}}},function Q0(i,u,h,f){var g;if(null==i)f.point(-nr,g=h*mi),f.point(0,g),f.point(nr,g),f.point(nr,0),f.point(nr,-g),f.point(0,-g),f.point(-nr,-g),f.point(-nr,0),f.point(-nr,g);else if(Gn(i[0]-u[0])>In){var v=i[0]<u[0]?nr:-nr;f.point(-v,g=h*v/2),f.point(0,g),f.point(v,g)}else f.point(u[0],u[1])},[-nr,-mi]);var Dm=function(i,u){var h=dn(i),f=h>0,g=Gn(h)>In;function E(O,U){return dn(O)*dn(U)>h}function S(O,U,N){var z=[1,0,0],Y=Tl(Cl(O),Cl(U)),X=Ka(Y,Y),he=Y[0],ee=X-he*he;if(!ee)return!N&&O;var De=h*X/ee,Oe=-h*he/ee,Se=Tl(z,Y),_e=gm(z,De);pm(_e,gm(Y,Oe));var $e=Se,St=Ka(_e,$e),mt=Ka($e,$e),st=St*St-mt*(Ka(_e,_e)-1);if(!(st<0)){var Vt=Di(st),pt=gm($e,(-St-Vt)/mt);if(pm(pt,_e),pt=nc(pt),!N)return pt;var Yt,le=O[0],it=U[0],xt=O[1],$t=U[1];it<le&&(Yt=le,le=it,it=Yt);var jn=it-le,kn=Gn(jn-nr)<In;if(!kn&&$t<xt&&(Yt=xt,xt=$t,$t=Yt),kn||jn<In?kn?xt+$t>0^pt[1]<(Gn(pt[0]-le)<In?xt:$t):xt<=pt[1]&&pt[1]<=$t:jn>nr^(le<=pt[0]&&pt[0]<=it)){var Qn=gm($e,(-St+Vt)/mt);return pm(Qn,_e),[pt,nc(Qn)]}}}function k(O,U){var N=f?i:nr-i,V=0;return O<-N?V|=1:O>N&&(V|=2),U<-N?V|=4:U>N&&(V|=8),V}return oc(E,function I(O){var U,N,V,H,z;return{lineStart:function(){H=V=!1,z=1},point:function(Y,X){var ee,he=[Y,X],De=E(Y,X),Oe=f?De?0:k(Y,X):De?k(Y+(Y<0?nr:-nr),X):0;if(!U&&(H=V=De)&&O.lineStart(),De!==V&&(!(ee=S(U,he))||Ch(U,ee)||Ch(he,ee))&&(he[0]+=In,he[1]+=In,De=E(he[0],he[1])),De!==V)z=0,De?(O.lineStart(),ee=S(he,U),O.point(ee[0],ee[1])):(ee=S(U,he),O.point(ee[0],ee[1]),O.lineEnd()),U=ee;else if(g&&U&&f^De){var Se;!(Oe&N)&&(Se=S(he,U,!0))&&(z=0,f?(O.lineStart(),O.point(Se[0][0],Se[0][1]),O.point(Se[1][0],Se[1][1]),O.lineEnd()):(O.point(Se[1][0],Se[1][1]),O.lineEnd(),O.lineStart(),O.point(Se[0][0],Se[0][1])))}De&&(!U||!Ch(U,he))&&O.point(he[0],he[1]),U=he,V=De,N=Oe},lineEnd:function(){V&&O.lineEnd(),U=null},clean:function(){return z|(H&&V)<<1}}},function v(O,U,N,V){P0(V,i,u,N,O,U)},f?[0,-i]:[-nr,i-nr])};function ac(i){return function(u){var h=new qd;for(var f in i)h[f]=i[f];return h.stream=u,h}}function qd(){}function Sh(i,u,h){var f=u[1][0]-u[0][0],g=u[1][1]-u[0][1],v=i.clipExtent&&i.clipExtent();i.scale(150).translate([0,0]),null!=v&&i.clipExtent(null),Du(h,i.stream(Em));var E=Em.result(),I=Math.min(f/(E[1][0]-E[0][0]),g/(E[1][1]-E[0][1])),S=+u[0][0]+(f-I*(E[1][0]+E[0][0]))/2,k=+u[0][1]+(g-I*(E[1][1]+E[0][1]))/2;return null!=v&&i.clipExtent(v),i.scale(150*I).translate([S,k])}function Ah(i,u,h){return Sh(i,[[0,0],u],h)}qd.prototype={constructor:qd,point:function(i,u){this.stream.point(i,u)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Sm=dn(30*Cn),jp=function(i,u){return+u?function RI(i,u){function h(f,g,v,E,I,S,k,O,U,N,V,H,z,Y){var X=k-f,he=O-g,ee=X*X+he*he;if(ee>4*u&&z--){var De=E+N,Oe=I+V,Se=S+H,_e=Di(De*De+Oe*Oe+Se*Se),qe=Ui(Se/=_e),$e=Gn(Gn(Se)-1)<In||Gn(v-U)<In?(v+U)/2:mr(Oe,De),St=i($e,qe),mt=St[0],st=St[1],Vt=mt-f,pt=st-g,le=he*Vt-X*pt;(le*le/ee>u||Gn((X*Vt+he*pt)/ee-.5)>.3||E*N+I*V+S*H<Sm)&&(h(f,g,v,E,I,S,mt,st,$e,De/=_e,Oe/=_e,Se,z,Y),Y.point(mt,st),h(mt,st,$e,De,Oe,Se,k,O,U,N,V,H,z,Y))}}return function(f){var g,v,E,I,S,k,O,U,N,V,H,z,Y={point:X,lineStart:he,lineEnd:De,polygonStart:function(){f.polygonStart(),Y.lineStart=Oe},polygonEnd:function(){f.polygonEnd(),Y.lineStart=he}};function X(qe,$e){qe=i(qe,$e),f.point(qe[0],qe[1])}function he(){U=NaN,Y.point=ee,f.lineStart()}function ee(qe,$e){var St=Cl([qe,$e]),mt=i(qe,$e);h(U,N,O,V,H,z,U=mt[0],N=mt[1],O=qe,V=St[0],H=St[1],z=St[2],16,f),f.point(U,N)}function De(){Y.point=X,f.lineEnd()}function Oe(){he(),Y.point=Se,Y.lineEnd=_e}function Se(qe,$e){ee(g=qe,$e),v=U,E=N,I=V,S=H,k=z,Y.point=ee}function _e(){h(U,N,O,V,H,z,v,E,g,I,S,k,16,f),Y.lineEnd=De,De()}return Y}}(i,u):function MI(i){return ac({point:function(u,h){u=i(u,h),this.stream.point(u[0],u[1])}})}(i)};var kI=ac({point:function(i,u){this.stream.point(i*Cn,u*Cn)}});function xh(i){return X0(function(){return i})()}function X0(i){var u,v,E,N,V,X,he,ee,_e,qe,h=150,f=480,g=250,I=0,S=0,k=0,O=0,U=0,H=null,z=Dh,Y=null,De=Th,Oe=.5,Se=jp(mt,Oe);function $e(pt){return[(pt=V(pt[0]*Cn,pt[1]*Cn))[0]*h+v,E-pt[1]*h]}function St(pt){return(pt=V.invert((pt[0]-v)/h,(E-pt[1])/h))&&[pt[0]*Hr,pt[1]*Hr]}function mt(pt,le){return[(pt=u(pt,le))[0]*h+v,E-pt[1]*h]}function st(){V=ic(N=N0(k,O,U),u);var pt=u(I,S);return v=f-pt[0]*h,E=g+pt[1]*h,Vt()}function Vt(){return _e=qe=null,$e}return $e.stream=function(pt){return _e&&qe===pt?_e:_e=kI(z(N,Se(De(qe=pt))))},$e.clipAngle=function(pt){return arguments.length?(z=+pt?Dm(H=pt*Cn,6*Cn):(H=null,Dh),Vt()):H*Hr},$e.clipExtent=function(pt){return arguments.length?(De=null==pt?(Y=X=he=ee=null,Th):nE(Y=+pt[0][0],X=+pt[0][1],he=+pt[1][0],ee=+pt[1][1]),Vt()):null==Y?null:[[Y,X],[he,ee]]},$e.scale=function(pt){return arguments.length?(h=+pt,st()):h},$e.translate=function(pt){return arguments.length?(f=+pt[0],g=+pt[1],st()):[f,g]},$e.center=function(pt){return arguments.length?(I=pt[0]%360*Cn,S=pt[1]%360*Cn,st()):[I*Hr,S*Hr]},$e.rotate=function(pt){return arguments.length?(k=pt[0]%360*Cn,O=pt[1]%360*Cn,U=pt.length>2?pt[2]%360*Cn:0,st()):[k*Hr,O*Hr,U*Hr]},$e.precision=function(pt){return arguments.length?(Se=jp(mt,Oe=pt*pt),Vt()):Di(Oe)},$e.fitExtent=function(pt,le){return Sh($e,pt,le)},$e.fitSize=function(pt,le){return Ah($e,pt,le)},function(){return u=i.apply(this,arguments),$e.invert=u.invert&&St,st()}}function J0(i){var u=0,h=nr/3,f=X0(i),g=f(u,h);return g.parallels=function(v){return arguments.length?f(u=v[0]*Cn,h=v[1]*Cn):[u*Hr,h*Hr]},g}function Fv(i,u){var h=tn(i),f=(h+tn(u))/2;if(Gn(f)<In)return function Ml(i){var u=dn(i);function h(f,g){return[f*u,tn(g)/u]}return h.invert=function(f,g){return[f/u,Ui(g*u)]},h}(i);var g=1+h*(2*f-h),v=Di(g)/f;function E(I,S){var k=Di(g-2*f*tn(S))/f;return[k*tn(I*=f),v-k*dn(I)]}return E.invert=function(I,S){var k=v-S;return[mr(I,Gn(k))/f*Yc(k),Ui((g-(I*I+k*k)*f*f)/(2*f))]},E}var Am=function(){return J0(Fv).scale(155.424).center([0,33.6442])},vE=function(){return Am().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function xm(i){return function(u,h){var f=dn(u),g=dn(h),v=i(f*g);return[v*g*tn(u),v*tn(h)]}}function Mh(i){return function(u,h){var f=Di(u*u+h*h),g=i(f),v=tn(g),E=dn(g);return[mr(u*v,f*E),Ui(f&&h*v/f)]}}var ew=xm(function(i){return Di(2/(1+i))});ew.invert=Mh(function(i){return 2*Ui(i/2)});var Uv=xm(function(i){return(i=T0(i))&&i/tn(i)});Uv.invert=Mh(function(i){return i});function $p(i,u){return[i,C0(Od((mi+u)/2))]}$p.invert=function(i,u){return[i,2*Tu(I0(u))-mi]};function wE(i){var I,S,k,u=xh(i),h=u.center,f=u.scale,g=u.translate,v=u.clipExtent,E=null;function O(){var U=nr*f(),N=u(bv(u.rotate()).invert([0,0]));return v(null==E?[[N[0]-U,N[1]-U],[N[0]+U,N[1]+U]]:i===$p?[[Math.max(N[0]-U,E),I],[Math.min(N[0]+U,S),k]]:[[E,Math.max(N[1]-U,I)],[S,Math.min(N[1]+U,k)]])}return u.scale=function(U){return arguments.length?(f(U),O()):f()},u.translate=function(U){return arguments.length?(g(U),O()):g()},u.center=function(U){return arguments.length?(h(U),O()):h()},u.clipExtent=function(U){return arguments.length?(null==U?E=I=S=k=null:(E=+U[0][0],I=+U[0][1],S=+U[1][0],k=+U[1][1]),O()):null==E?null:[[E,I],[S,k]]},O()}function tw(i){return Od((mi+i)/2)}function Ro(i,u){var h=dn(i),f=i===u?tn(i):C0(h/dn(u))/C0(tw(u)/tw(i)),g=h*wp(tw(i),f)/f;if(!f)return $p;function v(E,I){g>0?I<-mi+In&&(I=-mi+In):I>mi-In&&(I=mi-In);var S=g/wp(tw(I),f);return[S*tn(f*E),g-S*dn(f*E)]}return v.invert=function(E,I){var S=g-I,k=Yc(f)*Di(E*E+S*S);return[mr(E,Gn(S))/f*Yc(S),2*Tu(wp(g/k,1/f))-mi]},v}function Rh(i,u){return[i,u]}Rh.invert=Rh;function Bv(i,u){var h=dn(i),f=i===u?tn(i):(h-dn(u))/(u-i),g=h/f+i;if(Gn(f)<In)return Rh;function v(E,I){var S=g-I,k=f*E;return[S*tn(k),g-S*dn(k)]}return v.invert=function(E,I){var S=g-I;return[mr(E,Gn(S))/f*Yc(S),g-Yc(f)*Di(E*E+S*S)]},v}function Vv(i,u){var h=dn(u),f=dn(i)*h;return[h*tn(i)/f,tn(u)/f]}Vv.invert=Mh(Tu);function Mm(i,u,h,f){return 1===i&&1===u&&0===h&&0===f?Th:ac({point:function(g,v){this.stream.point(g*i+h,v*u+f)}})}function rw(i,u){return[dn(u)*tn(i),tn(u)]}rw.invert=Mh(Ui);function Kd(i,u){var h=dn(u),f=1+dn(i)*h;return[h*tn(i)/f,tn(u)/f]}Kd.invert=Mh(function(i){return 2*Tu(i)});function Gp(i,u){return[C0(Od((mi+u)/2)),-i]}Gp.invert=function(i,u){return[-u,2*Tu(I0(i))-mi]};function jv(i,u){return i.parent===u.parent?1:2}function EE(i,u){return i+u.x}function IE(i,u){return Math.max(i,u.y)}function uw(i){var u=0,h=i.children,f=h&&h.length;if(f)for(;--f>=0;)u+=h[f].value;else u=1;i.value=u}function qp(i,u){var g,E,I,S,k,h=new Zp(i),f=+i.value&&(h.value=i.value),v=[h];for(null==u&&(u=Kp);g=v.pop();)if(f&&(g.value=+g.data.value),(I=u(g.data))&&(k=I.length))for(g.children=new Array(k),S=k-1;S>=0;--S)v.push(E=g.children[S]=new Zp(I[S])),E.parent=g,E.depth=g.depth+1;return h.eachBefore(xE)}function Kp(i){return i.children}function Nm(i){i.data=i.data.data}function xE(i){var u=0;do{i.height=u}while((i=i.parent)&&i.height<++u)}function Zp(i){this.data=i,this.depth=this.height=0,this.parent=null}function zv(i){this._=i,this.next=null}Zp.prototype=qp.prototype={constructor:Zp,count:function(){return this.eachAfter(uw)},each:function(i){var h,g,v,E,u=this,f=[u];do{for(h=f.reverse(),f=[];u=h.pop();)if(i(u),g=u.children)for(v=0,E=g.length;v<E;++v)f.push(g[v])}while(f.length);return this},eachAfter:function(i){for(var g,v,E,u=this,h=[u],f=[];u=h.pop();)if(f.push(u),g=u.children)for(v=0,E=g.length;v<E;++v)h.push(g[v]);for(;u=f.pop();)i(u);return this},eachBefore:function(i){for(var f,g,u=this,h=[u];u=h.pop();)if(i(u),f=u.children)for(g=f.length-1;g>=0;--g)h.push(f[g]);return this},sum:function(i){return this.eachAfter(function(u){for(var h=+i(u.data)||0,f=u.children,g=f&&f.length;--g>=0;)h+=f[g].value;u.value=h})},sort:function(i){return this.eachBefore(function(u){u.children&&u.children.sort(i)})},path:function(i){for(var u=this,h=function UI(i,u){if(i===u)return i;var h=i.ancestors(),f=u.ancestors(),g=null;for(i=h.pop(),u=f.pop();i===u;)g=i,i=h.pop(),u=f.pop();return g}(u,i),f=[u];u!==h;)f.push(u=u.parent);for(var g=f.length;i!==h;)f.splice(g,0,i),i=i.parent;return f},ancestors:function(){for(var i=this,u=[i];i=i.parent;)u.push(i);return u},descendants:function(){var i=[];return this.each(function(u){i.push(u)}),i},leaves:function(){var i=[];return this.eachBefore(function(u){u.children||i.push(u)}),i},links:function(){var i=this,u=[];return i.each(function(h){h!==i&&u.push({source:h.parent,target:h})}),u},copy:function Wp(){return qp(this).eachBefore(Nm)}};var lw=function(i){return Gv(function(i){for(var h=(i=i.slice()).length,f=null,g=f;h;){var v=new zv(i[h-1]);g=g?g.next=v:f=v,i[void 0]=i[--h]}return{head:f,tail:g}}(i),[])};function BI(i,u){var h=u.x-i.x,f=u.y-i.y,g=i.r-u.r;return g*g+1e-6>h*h+f*f}function Gv(i,u){var h,v,E,f=null,g=i.head;switch(u.length){case 1:h=function ME(i){return{x:i.x,y:i.y,r:i.r}}(u[0]);break;case 2:h=function RE(i,u){var h=i.x,f=i.y,g=i.r,v=u.x,E=u.y,I=u.r,S=v-h,k=E-f,O=I-g,U=Math.sqrt(S*S+k*k);return{x:(h+v+S/U*O)/2,y:(f+E+k/U*O)/2,r:(U+g+I)/2}}(u[0],u[1]);break;case 3:h=function hw(i,u,h){var f=i.x,g=i.y,v=i.r,E=u.x,I=u.y,S=u.r,k=h.x,O=h.y,U=h.r,N=2*(f-E),V=2*(g-I),H=2*(S-v),z=f*f+g*g-v*v-E*E-I*I+S*S,Y=2*(f-k),X=2*(g-O),he=2*(U-v),ee=f*f+g*g-v*v-k*k-O*O+U*U,De=Y*V-N*X,Oe=(V*ee-X*z)/De-f,Se=(X*H-V*he)/De,_e=(Y*z-N*ee)/De-g,qe=(N*he-Y*H)/De,$e=Se*Se+qe*qe-1,St=2*(Oe*Se+_e*qe+v),st=(-St-Math.sqrt(St*St-4*$e*(Oe*Oe+_e*_e-v*v)))/(2*$e);return{x:Oe+Se*st+f,y:_e+qe*st+g,r:st}}(u[0],u[1],u[2])}for(;g;)E=g._,v=g.next,h&&BI(h,E)?f=g:(f?(i.tail=f,f.next=null):i.head=i.tail=null,u.push(E),h=Gv(i,u),u.pop(),i.head?(g.next=i.head,i.head=g):(g.next=null,i.head=i.tail=g),(f=i.tail).next=v),g=v;return i.tail=f,h}function dw(i,u,h){var f=i.x,g=i.y,v=u.r+h.r,E=i.r+h.r,I=u.x-f,S=u.y-g,k=I*I+S*S;if(k){var O=.5+((E*=E)-(v*=v))/(2*k),U=Math.sqrt(Math.max(0,2*v*(E+k)-(E-=k)*E-v*v))/(2*k);h.x=f+O*I+U*S,h.y=g+O*S-U*I}else h.x=f+E,h.y=g}function kE(i,u){var h=u.x-i.x,f=u.y-i.y,g=i.r+u.r;return g*g-1e-6>h*h+f*f}function fw(i,u,h){var f=i._,g=i.next._,v=f.r+g.r,E=(f.x*g.r+g.x*f.r)/v-u,I=(f.y*g.r+g.y*f.r)/v-h;return E*E+I*I}function Pm(i){this._=i,this.next=null,this.previous=null}function Yd(i){if(!(g=i.length))return 0;var u,h,f,g;if((u=i[0]).x=0,u.y=0,!(g>1))return u.r;if(u.x=-(h=i[1]).r,h.x=u.r,h.y=0,!(g>2))return u.r+h.r;dw(h,u,f=i[2]);var U,N,V,H,z,Y,X,v=u.r*u.r,E=h.r*h.r,I=f.r*f.r,S=v+E+I,k=v*u.x+E*h.x+I*f.x,O=v*u.y+E*h.y+I*f.y;u=new Pm(u),h=new Pm(h),f=new Pm(f),u.next=f.previous=h,h.next=u.previous=f,f.next=h.previous=u;e:for(V=3;V<g;++V){dw(u._,h._,f=i[V]),f=new Pm(f),H=h.next,z=u.previous,Y=h._.r,X=u._.r;do{if(Y<=X){if(kE(H._,f._)){u.next=h=H,h.previous=u,--V;continue e}Y+=H._.r,H=H.next}else{if(kE(z._,f._)){(u=z).next=h,h.previous=u,--V;continue e}X+=z._.r,z=z.previous}}while(H!==z.next);for(f.previous=u,f.next=h,u.next=h.previous=h=f,S+=I=f._.r*f._.r,v=fw(u,U=(k+=I*f._.x)/S,N=(O+=I*f._.y)/S);(f=f.next)!==h;)(I=fw(f,U,N))<v&&(u=f,v=I);h=u.next}for(u=[h._],f=h;(f=f.next)!==h;)u.push(f._);for(f=lw(u),V=0;V<g;++V)(u=i[V]).x-=f.x,u.y-=f.y;return f.r}function PE(i){return null==i?null:Qp(i)}function Qp(i){if("function"!=typeof i)throw new Error;return i}function Qd(){return 0}var Xd=function(i){return function(){return i}};function pw(i){return Math.sqrt(i.value)}function qv(i){return function(u){u.children||(u.r=Math.max(0,+i(u)||0))}}function Om(i,u){return function(h){if(f=h.children){var f,g,I,v=f.length,E=i(h)*u||0;if(E)for(g=0;g<v;++g)f[g].r+=E;if(I=Yd(f),E)for(g=0;g<v;++g)f[g].r-=E;h.r=I+E}}}function Wv(i){return function(u){var h=u.parent;u.r*=i,h&&(u.x=h.x+i*u.x,u.y=h.y+i*u.y)}}var Kv=function(i){i.x0=Math.round(i.x0),i.y0=Math.round(i.y0),i.x1=Math.round(i.x1),i.y1=Math.round(i.y1)},Lm=function(i,u,h,f,g){for(var E,v=i.children,I=-1,S=v.length,k=i.value&&(f-u)/i.value;++I<S;)(E=v[I]).y0=h,E.y1=g,E.x0=u,E.x1=u+=E.value*k},kT={depth:-1},Zv={};function GC(i){return i.id}function FE(i){return i.parentId}function Is(i,u){return i.parent===u.parent?1:2}function Fm(i){var u=i.children;return u?u[0]:i.t}function Um(i){var u=i.children;return u?u[u.length-1]:i.t}function Yv(i,u,h){var f=h/(u.i-i.i);u.c-=f,u.s+=h,i.c+=f,u.z+=h,u.m+=h}function mw(i,u,h){return i.a.parent===u.parent?i.a:h}function Qv(i,u){this._=i,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=u}Qv.prototype=Object.create(Zp.prototype);var Xv=function(i,u,h,f,g){for(var E,v=i.children,I=-1,S=v.length,k=i.value&&(g-h)/i.value;++I<S;)(E=v[I]).x0=u,E.x1=f,E.y0=h,E.y1=h+=E.value*k},VE=(1+Math.sqrt(5))/2;function jE(i,u,h,f,g,v){for(var S,k,V,H,Y,X,he,ee,De,Oe,Se,E=[],I=u.children,O=0,U=0,N=I.length,z=u.value;O<N;){V=g-h,H=v-f;do{Y=I[U++].value}while(!Y&&U<N);for(X=he=Y,Se=Y*Y*(Oe=Math.max(H/V,V/H)/(z*i)),De=Math.max(he/Se,Se/X);U<N;++U){if(Y+=k=I[U].value,k<X&&(X=k),k>he&&(he=k),Se=Y*Y*Oe,(ee=Math.max(he/Se,Se/X))>De){Y-=k;break}De=ee}E.push(S={value:Y,dice:V<H,children:I.slice(O,U)}),S.dice?Lm(S,h,f,g,z?f+=H*Y/z:v):Xv(S,h,f,z?h+=V*Y/z:g,v),z-=Y,O=U}return E}var jI=function i(u){function h(f,g,v,E,I){jE(u,f,g,v,E,I)}return h.ratio=function(f){return i((f=+f)>1?f:1)},h}(VE),HI=function i(u){function h(f,g,v,E,I){if((S=f._squarify)&&S.ratio===u)for(var S,k,O,U,V,N=-1,H=S.length,z=f.value;++N<H;){for(O=(k=S[N]).children,U=k.value=0,V=O.length;U<V;++U)k.value+=O[U].value;k.dice?Lm(k,g,v,E,v+=(I-v)*k.value/z):Xv(k,g,v,g+=(E-g)*k.value/z,I),z-=k.value}else f._squarify=S=jE(u,f,g,v,E,I),S.ratio=u}return h.ratio=function(f){return i((f=+f)>1?f:1)},h}(VE),zI=function(i,u,h){return(u[0]-i[0])*(h[1]-i[1])-(u[1]-i[1])*(h[0]-i[0])};function tl(i,u){return i[0]-u[0]||i[1]-u[1]}function Ja(i){for(var u=i.length,h=[0,1],f=2,g=2;g<u;++g){for(;f>1&&zI(i[h[f-2]],i[h[f-1]],i[g])<=0;)--f;h[f++]=g}return h.slice(0,f)}var GI=[].slice,qI={};function yw(i){this._size=i,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function WI(i){if(!i._start)try{!function GE(i){for(;i._start=i._waiting&&i._active<i._size;){var u=i._ended+i._active,h=i._tasks[u],f=h.length-1,g=h[f];h[f]=Jv(i,u),--i._waiting,++i._active,h=g.apply(null,h),i._tasks[u]&&(i._tasks[u]=h||qI)}}(i)}catch(u){if(i._tasks[i._ended+i._active-1])vw(i,u);else if(!i._data)throw u}}function Jv(i,u){return function(h,f){!i._tasks[u]||(--i._active,++i._ended,i._tasks[u]=null,null==i._error&&(null!=h?vw(i,h):(i._data[u]=f,i._waiting?WI(i):yr(i))))}}function vw(i,u){var f,h=i._tasks.length;for(i._error=u,i._data=void 0,i._waiting=NaN;--h>=0;)if((f=i._tasks[h])&&(i._tasks[h]=null,f.abort))try{f.abort()}catch(g){}i._active=NaN,yr(i)}function yr(i){if(!i._active&&i._call){var u=i._data;i._data=void 0,i._call(i._error,u)}}function e_(i){if(null==i)i=1/0;else if(!((i=+i)>=1))throw new Error("invalid concurrency");return new yw(i)}yw.prototype=e_.prototype={constructor:yw,defer:function(i){if("function"!=typeof i)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var u=GI.call(arguments,1);return u.push(i),++this._waiting,this._tasks.push(u),WI(this),this},abort:function(){return null==this._error&&vw(this,new Error("abort")),this},await:function(i){if("function"!=typeof i)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(u,h){i.apply(null,[u].concat(h))},yr(this),this},awaitAll:function(i){if("function"!=typeof i)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=i,yr(this),this}};var Jd=function(){return Math.random()},qE=function i(u){function h(f,g){return f=null==f?0:+f,g=null==g?1:+g,1===arguments.length?(g=f,f=0):g-=f,function(){return u()*g+f}}return h.source=i,h}(Jd),Vm=function i(u){function h(f,g){var v,E;return f=null==f?0:+f,g=null==g?1:+g,function(){var I;if(null!=v)I=v,v=null;else do{v=2*u()-1,I=2*u()-1,E=v*v+I*I}while(!E||E>1);return f+g*I*Math.sqrt(-2*Math.log(E)/E)}}return h.source=i,h}(Jd),KI=function i(u){function h(){var f=Vm.source(u).apply(this,arguments);return function(){return Math.exp(f())}}return h.source=i,h}(Jd),t_=function i(u){function h(f){return function(){for(var g=0,v=0;v<f;++v)g+=u();return g}}return h.source=i,h}(Jd),n_=function i(u){function h(f){var g=t_.source(u)(f);return function(){return g()/f}}return h.source=i,h}(Jd),WE=function i(u){function h(f){return function(){return-Math.log(1-u())/f}}return h.source=i,h}(Jd),jm=function(i,u){var h,g,k,O,f=ls("beforesend","progress","load","error"),v=Ti(),E=new XMLHttpRequest,I=null,S=null,U=0;function N(V){var z,H=E.status;if(!H&&function KE(i){var u=i.responseType;return u&&"text"!==u?i.response:i.responseText}(E)||H>=200&&H<300||304===H){if(k)try{z=k.call(h,E)}catch(Y){return void f.call("error",h,Y)}else z=E;f.call("load",h,z)}else f.call("error",h,V)}if("undefined"!=typeof XDomainRequest&&!("withCredentials"in E)&&/^(http(s)?:)?\/\//.test(i)&&(E=new XDomainRequest),"onload"in E?E.onload=E.onerror=E.ontimeout=N:E.onreadystatechange=function(V){E.readyState>3&&N(V)},E.onprogress=function(V){f.call("progress",h,V)},h={header:function(V,H){return V=(V+"").toLowerCase(),arguments.length<2?v.get(V):(null==H?v.remove(V):v.set(V,H+""),h)},mimeType:function(V){return arguments.length?(g=null==V?null:V+"",h):g},responseType:function(V){return arguments.length?(O=V,h):O},timeout:function(V){return arguments.length?(U=+V,h):U},user:function(V){return arguments.length<1?I:(I=null==V?null:V+"",h)},password:function(V){return arguments.length<1?S:(S=null==V?null:V+"",h)},response:function(V){return k=V,h},get:function(V,H){return h.send("GET",V,H)},post:function(V,H){return h.send("POST",V,H)},send:function(V,H,z){return E.open(V,i,!0,I,S),null!=g&&!v.has("accept")&&v.set("accept",g+",*/*"),E.setRequestHeader&&v.each(function(Y,X){E.setRequestHeader(X,Y)}),null!=g&&E.overrideMimeType&&E.overrideMimeType(g),null!=O&&(E.responseType=O),U>0&&(E.timeout=U),null==z&&"function"==typeof H&&(z=H,H=null),null!=z&&1===z.length&&(z=function ZI(i){return function(u,h){i(null==u?h:null)}}(z)),null!=z&&h.on("error",z).on("load",function(Y){z(null,Y)}),f.call("beforesend",h,E),E.send(null==H?null:H),h},abort:function(){return E.abort(),h},on:function(){var V=f.on.apply(f,arguments);return V===f?h:V}},null!=u){if("function"!=typeof u)throw new Error("invalid callback: "+u);return h.get(u)}return h};var eu=function(i,u){return function(h,f){var g=jm(h).mimeType(i).response(u);if(null!=f){if("function"!=typeof f)throw new Error("invalid callback: "+f);return g.get(f)}return g}},en=eu("text/html",function(i){return document.createRange().createContextualFragment(i.responseText)}),r_=eu("application/json",function(i){return JSON.parse(i.responseText)}),Rn=eu("text/plain",function(i){return i.responseText}),$m=eu("application/xml",function(i){var u=i.responseXML;if(!u)throw new Error("parse error");return u}),Hm=function(i,u){return function(h,f,g){arguments.length<3&&(g=f,f=null);var v=jm(h).mimeType(i);return v.row=function(E){return arguments.length?v.response(zm(u,f=E)):f},v.row(f),g?v.get(g):v}};function zm(i,u){return function(h){return i(h.responseText,u)}}var YI=Hm("text/csv",ze),_w=Hm("text/tab-separated-values",Yr),ZE=Array.prototype,ww=ZE.map,kh=ZE.slice,Cs={name:"implicit"};function Xp(i){var u=Ti(),h=[],f=Cs;function g(v){var E=v+"",I=u.get(E);if(!I){if(f!==Cs)return f;u.set(E,I=h.push(v))}return i[(I-1)%i.length]}return i=null==i?[]:kh.call(i),g.domain=function(v){if(!arguments.length)return h.slice();h=[],u=Ti();for(var S,k,E=-1,I=v.length;++E<I;)u.has(k=(S=v[E])+"")||u.set(k,h.push(S));return g},g.range=function(v){return arguments.length?(i=kh.call(v),g):i.slice()},g.unknown=function(v){return arguments.length?(f=v,g):f},g.copy=function(){return Xp().domain(h).range(i).unknown(f)},g}function Ts(){var g,v,i=Xp().unknown(void 0),u=i.domain,h=i.range,f=[0,1],E=!1,I=0,S=0,k=.5;function O(){var U=u().length,N=f[1]<f[0],V=f[N-0],H=f[1-N];g=(H-V)/Math.max(1,U-I+2*S),E&&(g=Math.floor(g)),V+=(H-V-g*(U-I))*k,v=g*(1-I),E&&(V=Math.round(V),v=Math.round(v));var z=We(U).map(function(Y){return V+g*Y});return h(N?z.reverse():z)}return delete i.unknown,i.domain=function(U){return arguments.length?(u(U),O()):u()},i.range=function(U){return arguments.length?(f=[+U[0],+U[1]],O()):f.slice()},i.rangeRound=function(U){return f=[+U[0],+U[1]],E=!0,O()},i.bandwidth=function(){return v},i.step=function(){return g},i.round=function(U){return arguments.length?(E=!!U,O()):E},i.padding=function(U){return arguments.length?(I=S=Math.max(0,Math.min(1,U)),O()):I},i.paddingInner=function(U){return arguments.length?(I=Math.max(0,Math.min(1,U)),O()):I},i.paddingOuter=function(U){return arguments.length?(S=Math.max(0,Math.min(1,U)),O()):S},i.align=function(U){return arguments.length?(k=Math.max(0,Math.min(1,U)),O()):k},i.copy=function(){return Ts().domain(u()).range(f).round(E).paddingInner(I).paddingOuter(S).align(k)},O()}function kl(i){var u=i.copy;return i.padding=i.paddingOuter,delete i.paddingInner,delete i.paddingOuter,i.copy=function(){return kl(u())},i}var bw=function(i){return function(){return i}},Ew=function(i){return+i},Iw=[0,1];function Cw(i,u){return(u-=i=+i)?function(h){return(h-i)/u}:bw(u)}function i_(i,u,h,f){var g=i[0],v=i[1],E=u[0],I=u[1];return v<g?(g=h(v,g),E=f(I,E)):(g=h(g,v),E=f(E,I)),function(S){return E(g(S))}}function Dw(i,u,h,f){var g=Math.min(i.length,u.length)-1,v=new Array(g),E=new Array(g),I=-1;for(i[g]<i[0]&&(i=i.slice().reverse(),u=u.slice().reverse());++I<g;)v[I]=h(i[I],i[I+1]),E[I]=f(u[I],u[I+1]);return function(S){var k=Be(i,S,1,g)-1;return E[k](v[k](S))}}function Ds(i,u){return u.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp())}function ef(i,u){var E,I,S,h=Iw,f=Iw,g=Lr,v=!1;function k(){return E=Math.min(h.length,f.length)>2?Dw:i_,I=S=null,O}function O(U){return(I||(I=E(h,f,v?function YE(i){return function(u,h){var f=i(u=+u,h=+h);return function(g){return g<=u?0:g>=h?1:f(g)}}}(i):i,g)))(+U)}return O.invert=function(U){return(S||(S=E(f,h,Cw,v?function Tw(i){return function(u,h){var f=i(u=+u,h=+h);return function(g){return g<=0?u:g>=1?h:f(g)}}}(u):u)))(+U)},O.domain=function(U){return arguments.length?(h=ww.call(U,Ew),k()):h.slice()},O.range=function(U){return arguments.length?(f=kh.call(U),k()):f.slice()},O.rangeRound=function(U){return f=kh.call(U),g=Pc,k()},O.clamp=function(U){return arguments.length?(v=!!U,k()):v},O.interpolate=function(U){return arguments.length?(g=U,k()):g},k()}function tf(i){var u=i.domain;return i.ticks=function(h){var f=u();return vt(f[0],f[f.length-1],null==h?10:h)},i.tickFormat=function(h,f){return function(i,u,h){var E,f=i[0],g=i[i.length-1],v=Ze(f,g,null==u?10:u);switch((h=vp(null==h?",f":h)).type){case"s":var I=Math.max(Math.abs(f),Math.abs(g));return null==h.precision&&!isNaN(E=Hb(v,I))&&(h.precision=E),M.formatPrefix(h,I);case"":case"e":case"g":case"p":case"r":null==h.precision&&!isNaN(E=w0(v,Math.max(Math.abs(f),Math.abs(g))))&&(h.precision=E-("e"===h.type));break;case"f":case"%":null==h.precision&&!isNaN(E=$b(v))&&(h.precision=E-2*("%"===h.type))}return M.format(h)}(u(),h,f)},i.nice=function(h){null==h&&(h=10);var S,f=u(),g=0,v=f.length-1,E=f[g],I=f[v];return I<E&&(S=E,E=I,I=S,S=g,g=v,v=S),(S=ce(E,I,h))>0?S=ce(E=Math.floor(E/S)*S,I=Math.ceil(I/S)*S,h):S<0&&(S=ce(E=Math.ceil(E*S)/S,I=Math.floor(I*S)/S,h)),S>0?(f[g]=Math.floor(E/S)*S,f[v]=Math.ceil(I/S)*S,u(f)):S<0&&(f[g]=Math.ceil(E*S)/S,f[v]=Math.floor(I*S)/S,u(f)),i},i}var o_=function(i,u){var E,h=0,f=(i=i.slice()).length-1,g=i[h],v=i[f];return v<g&&(E=h,h=f,f=E,E=g,g=v,v=E),i[h]=u.floor(g),i[f]=u.ceil(v),i};function Sw(i,u){return(u=Math.log(u/i))?function(h){return Math.log(h/i)/u}:bw(u)}function Aw(i,u){return i<0?function(h){return-Math.pow(-u,h)*Math.pow(-i,1-h)}:function(h){return Math.pow(u,h)*Math.pow(i,1-h)}}function a_(i){return isFinite(i)?+("1e"+i):i<0?0:i}function Nh(i){return 10===i?a_:i===Math.E?Math.exp:function(u){return Math.pow(i,u)}}function QE(i){return i===Math.E?Math.log:10===i&&Math.log10||2===i&&Math.log2||(i=Math.log(i),function(u){return Math.log(u)/i})}function nf(i){return function(u){return-i(-u)}}function rf(i,u){return i<0?-Math.pow(-i,u):Math.pow(i,u)}function Jp(){var i=1,u=ef(function f(v,E){return(E=rf(E,i)-(v=rf(v,i)))?function(I){return(rf(I,i)-v)/E}:bw(E)},function g(v,E){return E=rf(E,i)-(v=rf(v,i)),function(I){return rf(v+E*I,1/i)}}),h=u.domain;return u.exponent=function(v){return arguments.length?(i=+v,h(h())):i},u.copy=function(){return Ds(u,Jp().exponent(i))},tf(u)}var gn=new Date,qm=new Date;function Ss(i,u,h,f){function g(v){return i(v=new Date(+v)),v}return g.floor=g,g.ceil=function(v){return i(v=new Date(v-1)),u(v,1),i(v),v},g.round=function(v){var E=g(v),I=g.ceil(v);return v-E<I-v?E:I},g.offset=function(v,E){return u(v=new Date(+v),null==E?1:Math.floor(E)),v},g.range=function(v,E,I){var S=[];if(v=g.ceil(v),I=null==I?1:Math.floor(I),!(v<E&&I>0))return S;do{S.push(new Date(+v))}while(u(v,I),i(v),v<E);return S},g.filter=function(v){return Ss(function(E){if(E>=E)for(;i(E),!v(E);)E.setTime(E-1)},function(E,I){if(E>=E)for(;--I>=0;)for(;u(E,1),!v(E););})},h&&(g.count=function(v,E){return gn.setTime(+v),qm.setTime(+E),i(gn),i(qm),Math.floor(h(gn,qm))},g.every=function(v){return v=Math.floor(v),isFinite(v)&&v>0?v>1?g.filter(f?function(E){return f(E)%v==0}:function(E){return g.count(0,E)%v==0}):g:null}),g}var sf=Ss(function(){},function(i,u){i.setTime(+i+u)},function(i,u){return u-i});sf.every=function(i){return i=Math.floor(i),isFinite(i)&&i>0?i>1?Ss(function(u){u.setTime(Math.floor(u/i)*i)},function(u,h){u.setTime(+u+h*i)},function(u,h){return(h-u)/i}):sf:null};var af=sf.range,Mu=6e4,cc=36e5,Km=6048e5,tg=Ss(function(i){i.setTime(1e3*Math.floor(i/1e3))},function(i,u){i.setTime(+i+1e3*u)},function(i,u){return(u-i)/1e3},function(i){return i.getUTCSeconds()}),ng=tg.range,Mw=Ss(function(i){i.setTime(Math.floor(i/Mu)*Mu)},function(i,u){i.setTime(+i+u*Mu)},function(i,u){return(u-i)/Mu},function(i){return i.getMinutes()}),XE=Mw.range,uf=Ss(function(i){var u=i.getTimezoneOffset()*Mu%cc;u<0&&(u+=cc),i.setTime(Math.floor((+i-u)/cc)*cc+u)},function(i,u){i.setTime(+i+u*cc)},function(i,u){return(u-i)/cc},function(i){return i.getHours()}),Zm=uf.range,cf=Ss(function(i){i.setHours(0,0,0,0)},function(i,u){i.setDate(i.getDate()+u)},function(i,u){return(u-i-(u.getTimezoneOffset()-i.getTimezoneOffset())*Mu)/864e5},function(i){return i.getDate()-1}),Rw=cf.range;function Nl(i){return Ss(function(u){u.setDate(u.getDate()-(u.getDay()+7-i)%7),u.setHours(0,0,0,0)},function(u,h){u.setDate(u.getDate()+7*h)},function(u,h){return(h-u-(h.getTimezoneOffset()-u.getTimezoneOffset())*Mu)/Km})}var lf=Nl(0),Oh=Nl(1),kw=Nl(2),JE=Nl(3),Nw=Nl(4),rg=Nl(5),Ym=Nl(6),c_=lf.range,e1=Oh.range,Pw=kw.range,hf=JE.range,df=Nw.range,zs=rg.range,oo=Ym.range,ig=Ss(function(i){i.setDate(1),i.setHours(0,0,0,0)},function(i,u){i.setMonth(i.getMonth()+u)},function(i,u){return u.getMonth()-i.getMonth()+12*(u.getFullYear()-i.getFullYear())},function(i){return i.getMonth()}),l_=ig.range,Lh=Ss(function(i){i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,u){i.setFullYear(i.getFullYear()+u)},function(i,u){return u.getFullYear()-i.getFullYear()},function(i){return i.getFullYear()});Lh.every=function(i){return isFinite(i=Math.floor(i))&&i>0?Ss(function(u){u.setFullYear(Math.floor(u.getFullYear()/i)*i),u.setMonth(0,1),u.setHours(0,0,0,0)},function(u,h){u.setFullYear(u.getFullYear()+h*i)}):null};var t1=Lh.range,h_=Ss(function(i){i.setUTCSeconds(0,0)},function(i,u){i.setTime(+i+u*Mu)},function(i,u){return(u-i)/Mu},function(i){return i.getUTCMinutes()}),n1=h_.range,Ow=Ss(function(i){i.setUTCMinutes(0,0,0)},function(i,u){i.setTime(+i+u*cc)},function(i,u){return(u-i)/cc},function(i){return i.getUTCHours()}),Lw=Ow.range,Qm=Ss(function(i){i.setUTCHours(0,0,0,0)},function(i,u){i.setUTCDate(i.getUTCDate()+u)},function(i,u){return(u-i)/864e5},function(i){return i.getUTCDate()-1}),KC=Qm.range;function Fh(i){return Ss(function(u){u.setUTCDate(u.getUTCDate()-(u.getUTCDay()+7-i)%7),u.setUTCHours(0,0,0,0)},function(u,h){u.setUTCDate(u.getUTCDate()+7*h)},function(u,h){return(h-u)/Km})}var Xm=Fh(0),d_=Fh(1),Uh=Fh(2),f_=Fh(3),p_=Fh(4),g_=Fh(5),sg=Fh(6),og=Xm.range,r1=d_.range,i1=Uh.range,s1=f_.range,m_=p_.range,o1=g_.range,XI=sg.range,Bh=Ss(function(i){i.setUTCDate(1),i.setUTCHours(0,0,0,0)},function(i,u){i.setUTCMonth(i.getUTCMonth()+u)},function(i,u){return u.getUTCMonth()-i.getUTCMonth()+12*(u.getUTCFullYear()-i.getUTCFullYear())},function(i){return i.getUTCMonth()}),ag=Bh.range,ff=Ss(function(i){i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,u){i.setUTCFullYear(i.getUTCFullYear()+u)},function(i,u){return u.getUTCFullYear()-i.getUTCFullYear()},function(i){return i.getUTCFullYear()});ff.every=function(i){return isFinite(i=Math.floor(i))&&i>0?Ss(function(u){u.setUTCFullYear(Math.floor(u.getUTCFullYear()/i)*i),u.setUTCMonth(0,1),u.setUTCHours(0,0,0,0)},function(u,h){u.setUTCFullYear(u.getUTCFullYear()+h*i)}):null};var Vh=ff.range;function a1(i){if(0<=i.y&&i.y<100){var u=new Date(-1,i.m,i.d,i.H,i.M,i.S,i.L);return u.setFullYear(i.y),u}return new Date(i.y,i.m,i.d,i.H,i.M,i.S,i.L)}function pf(i){if(0<=i.y&&i.y<100){var u=new Date(Date.UTC(-1,i.m,i.d,i.H,i.M,i.S,i.L));return u.setUTCFullYear(i.y),u}return new Date(Date.UTC(i.y,i.m,i.d,i.H,i.M,i.S,i.L))}function y_(i){return{y:i,m:0,d:1,H:0,M:0,S:0,L:0}}function gf(i){var u=i.dateTime,h=i.date,f=i.time,g=i.periods,v=i.days,E=i.shortDays,I=i.months,S=i.shortMonths,k=mf(g),O=cg(g),U=mf(v),N=cg(v),V=mf(E),H=cg(E),z=mf(I),Y=cg(I),X=mf(S),he=cg(S),ee={a:function xt(Ft){return E[Ft.getDay()]},A:function $t(Ft){return v[Ft.getDay()]},b:function Yt(Ft){return S[Ft.getMonth()]},B:function jn(Ft){return I[Ft.getMonth()]},c:null,d:$w,e:$w,H:h1,I:ty,j:d1,L:C_,m:yf,M:Pl,p:function kn(Ft){return g[+(Ft.getHours()>=12)]},S:T_,U:Hw,w:zw,W:lg,x:null,X:null,y:ny,Y:vf,Z:f1,"%":qw},De={a:function ur(Ft){return E[Ft.getUTCDay()]},A:function Qn(Ft){return v[Ft.getUTCDay()]},b:function zr(Ft){return S[Ft.getUTCMonth()]},B:function Br(Ft){return I[Ft.getUTCMonth()]},c:null,d:p1,e:p1,H:jh,I:Ol,j:ry,L:Gw,m:D_,M:iy,p:function $n(Ft){return g[+(Ft.getUTCHours()>=12)]},S:si,U:Ll,w:sy,W:eC,x:null,X:null,y:S_,Y:hg,Z:tC,"%":qw},Oe={a:function St(Ft,An,Nn){var an=V.exec(An.slice(Nn));return an?(Ft.w=H[an[0].toLowerCase()],Nn+an[0].length):-1},A:function mt(Ft,An,Nn){var an=U.exec(An.slice(Nn));return an?(Ft.w=N[an[0].toLowerCase()],Nn+an[0].length):-1},b:function st(Ft,An,Nn){var an=X.exec(An.slice(Nn));return an?(Ft.m=he[an[0].toLowerCase()],Nn+an[0].length):-1},B:function Vt(Ft,An,Nn){var an=z.exec(An.slice(Nn));return an?(Ft.m=Y[an[0].toLowerCase()],Nn+an[0].length):-1},c:function pt(Ft,An,Nn){return qe(Ft,u,An,Nn)},d:Vw,e:Vw,H:b_,I:b_,j:JI,L:jw,m:ey,M:E_,p:function $e(Ft,An,Nn){var an=k.exec(An.slice(Nn));return an?(Ft.p=O[an[0].toLowerCase()],Nn+an[0].length):-1},S:I_,U:Jm,w:v_,W:__,x:function le(Ft,An,Nn){return qe(Ft,h,An,Nn)},X:function it(Ft,An,Nn){return qe(Ft,f,An,Nn)},y:Bw,Y:Uw,Z:w_,"%":l1};function Se(Ft,An){return function(Nn){var co,Ia,B1,an=[],os=-1,al=0,Oo=Ft.length;for(Nn instanceof Date||(Nn=new Date(+Nn));++os<Oo;)37===Ft.charCodeAt(os)&&(an.push(Ft.slice(al,os)),null!=(Ia=Fw[co=Ft.charAt(++os)])?co=Ft.charAt(++os):Ia="e"===co?" ":"0",(B1=An[co])&&(co=B1(Nn,Ia)),an.push(co),al=os+1);return an.push(Ft.slice(al,os)),an.join("")}}function _e(Ft,An){return function(Nn){var an=y_(1900);if(qe(an,Ft,Nn+="",0)!=Nn.length)return null;if("p"in an&&(an.H=an.H%12+12*an.p),"W"in an||"U"in an){"w"in an||(an.w="W"in an?1:0);var al="Z"in an?pf(y_(an.y)).getUTCDay():An(y_(an.y)).getDay();an.m=0,an.d="W"in an?(an.w+6)%7+7*an.W-(al+5)%7:an.w+7*an.U-(al+6)%7}return"Z"in an?(an.H+=an.Z/100|0,an.M+=an.Z%100,pf(an)):An(an)}}function qe(Ft,An,Nn,an){for(var co,Ia,os=0,al=An.length,Oo=Nn.length;os<al;){if(an>=Oo)return-1;if(37===(co=An.charCodeAt(os++))){if(co=An.charAt(os++),!(Ia=Oe[co in Fw?An.charAt(os++):co])||(an=Ia(Ft,Nn,an))<0)return-1}else if(co!=Nn.charCodeAt(an++))return-1}return an}return ee.x=Se(h,ee),ee.X=Se(f,ee),ee.c=Se(u,ee),De.x=Se(h,De),De.X=Se(f,De),De.c=Se(u,De),{format:function(Ft){var An=Se(Ft+="",ee);return An.toString=function(){return Ft},An},parse:function(Ft){var An=_e(Ft+="",a1);return An.toString=function(){return Ft},An},utcFormat:function(Ft){var An=Se(Ft+="",De);return An.toString=function(){return Ft},An},utcParse:function(Ft){var An=_e(Ft,pf);return An.toString=function(){return Ft},An}}}var dg,Fw={"-":"",_:" ",0:"0"},Sr=/^\s*\d+/,u1=/^%/,ug=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function Er(i,u,h){var f=i<0?"-":"",g=(f?-i:i)+"",v=g.length;return f+(v<h?new Array(h-v+1).join(u)+g:g)}function c1(i){return i.replace(ug,"\\$&")}function mf(i){return new RegExp("^(?:"+i.map(c1).join("|")+")","i")}function cg(i){for(var u={},h=-1,f=i.length;++h<f;)u[i[h].toLowerCase()]=h;return u}function v_(i,u,h){var f=Sr.exec(u.slice(h,h+1));return f?(i.w=+f[0],h+f[0].length):-1}function Jm(i,u,h){var f=Sr.exec(u.slice(h));return f?(i.U=+f[0],h+f[0].length):-1}function __(i,u,h){var f=Sr.exec(u.slice(h));return f?(i.W=+f[0],h+f[0].length):-1}function Uw(i,u,h){var f=Sr.exec(u.slice(h,h+4));return f?(i.y=+f[0],h+f[0].length):-1}function Bw(i,u,h){var f=Sr.exec(u.slice(h,h+2));return f?(i.y=+f[0]+(+f[0]>68?1900:2e3),h+f[0].length):-1}function w_(i,u,h){var f=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(u.slice(h,h+6));return f?(i.Z=f[1]?0:-(f[2]+(f[3]||"00")),h+f[0].length):-1}function ey(i,u,h){var f=Sr.exec(u.slice(h,h+2));return f?(i.m=f[0]-1,h+f[0].length):-1}function Vw(i,u,h){var f=Sr.exec(u.slice(h,h+2));return f?(i.d=+f[0],h+f[0].length):-1}function JI(i,u,h){var f=Sr.exec(u.slice(h,h+3));return f?(i.m=0,i.d=+f[0],h+f[0].length):-1}function b_(i,u,h){var f=Sr.exec(u.slice(h,h+2));return f?(i.H=+f[0],h+f[0].length):-1}function E_(i,u,h){var f=Sr.exec(u.slice(h,h+2));return f?(i.M=+f[0],h+f[0].length):-1}function I_(i,u,h){var f=Sr.exec(u.slice(h,h+2));return f?(i.S=+f[0],h+f[0].length):-1}function jw(i,u,h){var f=Sr.exec(u.slice(h,h+3));return f?(i.L=+f[0],h+f[0].length):-1}function l1(i,u,h){var f=u1.exec(u.slice(h,h+1));return f?h+f[0].length:-1}function $w(i,u){return Er(i.getDate(),u,2)}function h1(i,u){return Er(i.getHours(),u,2)}function ty(i,u){return Er(i.getHours()%12||12,u,2)}function d1(i,u){return Er(1+cf.count(Lh(i),i),u,3)}function C_(i,u){return Er(i.getMilliseconds(),u,3)}function yf(i,u){return Er(i.getMonth()+1,u,2)}function Pl(i,u){return Er(i.getMinutes(),u,2)}function T_(i,u){return Er(i.getSeconds(),u,2)}function Hw(i,u){return Er(lf.count(Lh(i),i),u,2)}function zw(i){return i.getDay()}function lg(i,u){return Er(Oh.count(Lh(i),i),u,2)}function ny(i,u){return Er(i.getFullYear()%100,u,2)}function vf(i,u){return Er(i.getFullYear()%1e4,u,4)}function f1(i){var u=i.getTimezoneOffset();return(u>0?"-":(u*=-1,"+"))+Er(u/60|0,"0",2)+Er(u%60,"0",2)}function p1(i,u){return Er(i.getUTCDate(),u,2)}function jh(i,u){return Er(i.getUTCHours(),u,2)}function Ol(i,u){return Er(i.getUTCHours()%12||12,u,2)}function ry(i,u){return Er(1+Qm.count(ff(i),i),u,3)}function Gw(i,u){return Er(i.getUTCMilliseconds(),u,3)}function D_(i,u){return Er(i.getUTCMonth()+1,u,2)}function iy(i,u){return Er(i.getUTCMinutes(),u,2)}function si(i,u){return Er(i.getUTCSeconds(),u,2)}function Ll(i,u){return Er(Xm.count(ff(i),i),u,2)}function sy(i){return i.getUTCDay()}function eC(i,u){return Er(d_.count(ff(i),i),u,2)}function S_(i,u){return Er(i.getUTCFullYear()%100,u,2)}function hg(i,u){return Er(i.getUTCFullYear()%1e4,u,4)}function tC(){return"+0000"}function qw(){return"%"}function g1(i){return dg=gf(i),M.timeFormat=dg.format,M.timeParse=dg.parse,M.utcFormat=dg.utcFormat,M.utcParse=dg.utcParse,dg}g1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Ww="%Y-%m-%dT%H:%M:%S.%LZ";var _f=Date.prototype.toISOString?function m1(i){return i.toISOString()}:M.utcFormat(Ww);var fg=+new Date("2000-01-01T00:00:00.000Z")?function lc(i){var u=new Date(i);return isNaN(u)?null:u}:M.utcParse(Ww),pg=1e3,wf=6e4,hc=60*wf,oy=24*hc,ay=30*oy,Kw=365*oy;function rC(i){return new Date(i)}function y1(i){return i instanceof Date?+i:+new Date(+i)}function uy(i,u,h,f,g,v,E,I,S){var k=ef(Cw,Zi),O=k.invert,U=k.domain,N=S(".%L"),V=S(":%S"),H=S("%I:%M"),z=S("%I %p"),Y=S("%a %d"),X=S("%b %d"),he=S("%B"),ee=S("%Y"),De=[[E,1,pg],[E,5,5e3],[E,15,15e3],[E,30,3e4],[v,1,wf],[v,5,5*wf],[v,15,15*wf],[v,30,30*wf],[g,1,hc],[g,3,3*hc],[g,6,6*hc],[g,12,12*hc],[f,1,oy],[f,2,2*oy],[h,1,6048e5],[u,1,ay],[u,3,3*ay],[i,1,Kw]];function Oe(_e){return(E(_e)<_e?N:v(_e)<_e?V:g(_e)<_e?H:f(_e)<_e?z:u(_e)<_e?h(_e)<_e?Y:X:i(_e)<_e?he:ee)(_e)}function Se(_e,qe,$e,St){if(null==_e&&(_e=10),"number"==typeof _e){var mt=Math.abs($e-qe)/_e,st=Q(function(Vt){return Vt[2]}).right(De,mt);st===De.length?(St=Ze(qe/Kw,$e/Kw,_e),_e=i):st?(St=(st=De[mt/De[st-1][2]<De[st][2]/mt?st-1:st])[1],_e=st[0]):(St=Ze(qe,$e,_e),_e=I)}return null==St?_e:_e.every(St)}return k.invert=function(_e){return new Date(O(_e))},k.domain=function(_e){return arguments.length?U(ww.call(_e,y1)):U().map(rC)},k.ticks=function(_e,qe){var Vt,$e=U(),St=$e[0],mt=$e[$e.length-1],st=mt<St;return st&&(Vt=St,St=mt,mt=Vt),Vt=(Vt=Se(_e,St,mt,qe))?Vt.range(St,mt+1):[],st?Vt.reverse():Vt},k.tickFormat=function(_e,qe){return null==qe?Oe:S(qe)},k.nice=function(_e,qe){var $e=U();return(_e=Se(_e,$e[0],$e[$e.length-1],qe))?U(o_($e,_e)):k},k.copy=function(){return Ds(k,uy(i,u,h,f,g,v,E,I,S))},k}var va=function(i){return i.match(/.{6}/g).map(function(u){return"#"+u})},v1=va("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),_1=va("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),iC=va("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),ZC=va("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),cy=Vo(vo(300,.5,0),vo(-240,.5,1)),A_=Vo(vo(-100,.75,.35),vo(80,1.5,.8)),ly=Vo(vo(260,.75,.35),vo(80,1.5,.8)),Hh=vo();function zh(i){var u=i.length;return function(h){return i[Math.max(0,Math.min(u-1,Math.floor(h*u)))]}}var hy=zh(va("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),sC=zh(va("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),rs=zh(va("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),b1=zh(va("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var Jn=function(i){return function(){return i}},I1=Math.abs,No=Math.atan2,Ru=Math.cos,Yw=Math.max,dy=Math.min,_a=Math.sin,Gh=Math.sqrt,Xr=1e-12,Fl=Math.PI,x_=Fl/2,nl=2*Fl;function fy(i){return i>1?0:i<-1?Fl:Math.acos(i)}function Qw(i){return i>=1?x_:i<=-1?-x_:Math.asin(i)}function Xw(i){return i.innerRadius}function M_(i){return i.outerRadius}function gg(i){return i.startAngle}function Jw(i){return i.endAngle}function mg(i){return i&&i.padAngle}function rl(i,u,h,f,g,v,E,I){var S=h-i,k=f-u,O=E-g,U=I-v,N=(O*(u-v)-U*(i-g))/(U*S-O*k);return[i+N*S,u+N*k]}function py(i,u,h,f,g,v,E){var I=i-h,S=u-f,k=(E?v:-v)/Gh(I*I+S*S),O=k*S,U=-k*I,N=i+O,V=u+U,H=h+O,z=f+U,Y=(N+H)/2,X=(V+z)/2,he=H-N,ee=z-V,De=he*he+ee*ee,Oe=g-v,Se=N*z-H*V,_e=(ee<0?-1:1)*Gh(Yw(0,Oe*Oe*De-Se*Se)),qe=(Se*ee-he*_e)/De,$e=(-Se*he-ee*_e)/De,St=(Se*ee+he*_e)/De,mt=(-Se*he+ee*_e)/De,st=qe-Y,Vt=$e-X,pt=St-Y,le=mt-X;return st*st+Vt*Vt>pt*pt+le*le&&(qe=St,$e=mt),{cx:qe,cy:$e,x01:-O,y01:-U,x11:qe*(g/Oe-1),y11:$e*(g/Oe-1)}}function Ef(i){this._context=i}Ef.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,u){switch(i=+i,u=+u,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,u):this._context.moveTo(i,u);break;case 1:this._point=2;default:this._context.lineTo(i,u)}}};var gy=function(i){return new Ef(i)};function my(i){return i[0]}function yy(i){return i[1]}var If=function(){var i=my,u=yy,h=Jn(!0),f=null,g=gy,v=null;function E(I){var S,O,N,k=I.length,U=!1;for(null==f&&(v=g(N=Wa())),S=0;S<=k;++S)!(S<k&&h(O=I[S],S,I))===U&&((U=!U)?v.lineStart():v.lineEnd()),U&&v.point(+i(O,S,I),+u(O,S,I));if(N)return v=null,N+""||null}return E.x=function(I){return arguments.length?(i="function"==typeof I?I:Jn(+I),E):i},E.y=function(I){return arguments.length?(u="function"==typeof I?I:Jn(+I),E):u},E.defined=function(I){return arguments.length?(h="function"==typeof I?I:Jn(!!I),E):h},E.curve=function(I){return arguments.length?(g=I,null!=f&&(v=g(f)),E):g},E.context=function(I){return arguments.length?(null==I?f=v=null:v=g(f=I),E):f},E},qh=function(){var i=my,u=null,h=Jn(0),f=yy,g=Jn(!0),v=null,E=gy,I=null;function S(O){var U,N,V,z,X,H=O.length,Y=!1,he=new Array(H),ee=new Array(H);for(null==v&&(I=E(X=Wa())),U=0;U<=H;++U){if(!(U<H&&g(z=O[U],U,O))===Y)if(Y=!Y)N=U,I.areaStart(),I.lineStart();else{for(I.lineEnd(),I.lineStart(),V=U-1;V>=N;--V)I.point(he[V],ee[V]);I.lineEnd(),I.areaEnd()}Y&&(he[U]=+i(z,U,O),ee[U]=+h(z,U,O),I.point(u?+u(z,U,O):he[U],f?+f(z,U,O):ee[U]))}if(X)return I=null,X+""||null}function k(){return If().defined(g).curve(E).context(v)}return S.x=function(O){return arguments.length?(i="function"==typeof O?O:Jn(+O),u=null,S):i},S.x0=function(O){return arguments.length?(i="function"==typeof O?O:Jn(+O),S):i},S.x1=function(O){return arguments.length?(u=null==O?null:"function"==typeof O?O:Jn(+O),S):u},S.y=function(O){return arguments.length?(h="function"==typeof O?O:Jn(+O),f=null,S):h},S.y0=function(O){return arguments.length?(h="function"==typeof O?O:Jn(+O),S):h},S.y1=function(O){return arguments.length?(f=null==O?null:"function"==typeof O?O:Jn(+O),S):f},S.lineX0=S.lineY0=function(){return k().x(i).y(h)},S.lineY1=function(){return k().x(i).y(f)},S.lineX1=function(){return k().x(u).y(h)},S.defined=function(O){return arguments.length?(g="function"==typeof O?O:Jn(!!O),S):g},S.curve=function(O){return arguments.length?(E=O,null!=v&&(I=E(v)),S):E},S.context=function(O){return arguments.length?(null==O?v=I=null:I=E(v=O),S):v},S},C1=function(i,u){return u<i?-1:u>i?1:u>=i?0:NaN},T1=function(i){return i},R_=_y(gy);function vy(i){this._curve=i}function _y(i){function u(h){return new vy(i(h))}return u._curve=i,u}function yg(i){var u=i.curve;return i.angle=i.x,delete i.x,i.radius=i.y,delete i.y,i.curve=function(h){return arguments.length?u(_y(h)):u()._curve},i}vy.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(i,u){this._curve.point(u*Math.sin(i),u*-Math.cos(i))}};var vg=Array.prototype.slice,Cf=function(i,u){return[(u=+u)*Math.cos(i-=Math.PI/2),u*Math.sin(i)]};function Tf(i){return i.source}function eb(i){return i.target}function wy(i){var u=Tf,h=eb,f=my,g=yy,v=null;function E(){var I,S=vg.call(arguments),k=u.apply(this,S),O=h.apply(this,S);if(v||(v=I=Wa()),i(v,+f.apply(this,(S[0]=k,S)),+g.apply(this,S),+f.apply(this,(S[0]=O,S)),+g.apply(this,S)),I)return v=null,I+""||null}return E.source=function(I){return arguments.length?(u=I,E):u},E.target=function(I){return arguments.length?(h=I,E):h},E.x=function(I){return arguments.length?(f="function"==typeof I?I:Jn(+I),E):f},E.y=function(I){return arguments.length?(g="function"==typeof I?I:Jn(+I),E):g},E.context=function(I){return arguments.length?(v=null==I?null:I,E):v},E}function tb(i,u,h,f,g){i.moveTo(u,h),i.bezierCurveTo(u=(u+f)/2,h,u,g,f,g)}function oC(i,u,h,f,g){i.moveTo(u,h),i.bezierCurveTo(u,h=(h+g)/2,f,h,f,g)}function aC(i,u,h,f,g){var v=Cf(u,h),E=Cf(u,h=(h+g)/2),I=Cf(f,h),S=Cf(f,g);i.moveTo(v[0],v[1]),i.bezierCurveTo(E[0],E[1],I[0],I[1],S[0],S[1])}var N_={draw:function(i,u){var h=Math.sqrt(u/Fl);i.moveTo(h,0),i.arc(0,0,h,0,nl)}},P_={draw:function(i,u){var h=Math.sqrt(u/5)/2;i.moveTo(-3*h,-h),i.lineTo(-h,-h),i.lineTo(-h,-3*h),i.lineTo(h,-3*h),i.lineTo(h,-h),i.lineTo(3*h,-h),i.lineTo(3*h,h),i.lineTo(h,h),i.lineTo(h,3*h),i.lineTo(-h,3*h),i.lineTo(-h,h),i.lineTo(-3*h,h),i.closePath()}},is=Math.sqrt(1/3),Df=2*is,Ul={draw:function(i,u){var h=Math.sqrt(u/Df),f=h*is;i.moveTo(0,-h),i.lineTo(f,0),i.lineTo(0,h),i.lineTo(-f,0),i.closePath()}},nb=Math.sin(Fl/10)/Math.sin(7*Fl/10),wt=Math.sin(nl/10)*nb,Bi=-Math.cos(nl/10)*nb,wg={draw:function(i,u){var h=Math.sqrt(.8908130915292852*u),f=wt*h,g=Bi*h;i.moveTo(0,-h),i.lineTo(f,g);for(var v=1;v<5;++v){var E=nl*v/5,I=Math.cos(E),S=Math.sin(E);i.lineTo(S*h,-I*h),i.lineTo(I*f-S*g,S*f+I*g)}i.closePath()}},Gs={draw:function(i,u){var h=Math.sqrt(u),f=-h/2;i.rect(f,f,h,h)}},Ht=Math.sqrt(3),Mn={draw:function(i,u){var h=-Math.sqrt(u/(3*Ht));i.moveTo(0,2*h),i.lineTo(-Ht*h,-h),i.lineTo(Ht*h,-h),i.closePath()}},Nu=-.5,kt=Math.sqrt(3)/2,Ge=1/Math.sqrt(12),gt=3*(Ge/2+1),Vi={draw:function(i,u){var h=Math.sqrt(u/gt),f=h/2,g=h*Ge,v=f,E=h*Ge+h,I=-v,S=E;i.moveTo(f,g),i.lineTo(v,E),i.lineTo(I,S),i.lineTo(Nu*f-kt*g,kt*f+Nu*g),i.lineTo(Nu*v-kt*E,kt*v+Nu*E),i.lineTo(Nu*I-kt*S,kt*I+Nu*S),i.lineTo(Nu*f+kt*g,Nu*g-kt*f),i.lineTo(Nu*v+kt*E,Nu*E-kt*v),i.lineTo(Nu*I+kt*S,Nu*S-kt*I),i.closePath()}},A1=[N_,P_,Ul,Gs,wg,Mn,Vi],Kh=function(){};function L_(i,u,h){i._context.bezierCurveTo((2*i._x0+i._x1)/3,(2*i._y0+i._y1)/3,(i._x0+2*i._x1)/3,(i._y0+2*i._y1)/3,(i._x0+4*i._x1+u)/6,(i._y0+4*i._y1+h)/6)}function bg(i){this._context=i}bg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:L_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,u){switch(i=+i,u=+u,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,u):this._context.moveTo(i,u);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:L_(this,i,u)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=u}};function F_(i){this._context=i}F_.prototype={areaStart:Kh,areaEnd:Kh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(i,u){switch(i=+i,u=+u,this._point){case 0:this._point=1,this._x2=i,this._y2=u;break;case 1:this._point=2,this._x3=i,this._y3=u;break;case 2:this._point=3,this._x4=i,this._y4=u,this._context.moveTo((this._x0+4*this._x1+i)/6,(this._y0+4*this._y1+u)/6);break;default:L_(this,i,u)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=u}};function rb(i){this._context=i}rb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,u){switch(i=+i,u=+u,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var h=(this._x0+4*this._x1+i)/6,f=(this._y0+4*this._y1+u)/6;this._line?this._context.lineTo(h,f):this._context.moveTo(h,f);break;case 3:this._point=4;default:L_(this,i,u)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=u}};function B_(i,u){this._basis=new bg(i),this._beta=u}B_.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var i=this._x,u=this._y,h=i.length-1;if(h>0)for(var S,f=i[0],g=u[0],v=i[h]-f,E=u[h]-g,I=-1;++I<=h;)this._basis.point(this._beta*i[I]+(1-this._beta)*(f+(S=I/h)*v),this._beta*u[I]+(1-this._beta)*(g+S*E));this._x=this._y=null,this._basis.lineEnd()},point:function(i,u){this._x.push(+i),this._y.push(+u)}};var qn=function i(u){function h(f){return 1===u?new bg(f):new B_(f,u)}return h.beta=function(f){return i(+f)},h}(.85);function il(i,u,h){i._context.bezierCurveTo(i._x1+i._k*(i._x2-i._x0),i._y1+i._k*(i._y2-i._y0),i._x2+i._k*(i._x1-u),i._y2+i._k*(i._y1-h),i._x2,i._y2)}function Sf(i,u){this._context=i,this._k=(1-u)/6}Sf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:il(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,u){switch(i=+i,u=+u,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,u):this._context.moveTo(i,u);break;case 1:this._point=2,this._x1=i,this._y1=u;break;case 2:this._point=3;default:il(this,i,u)}this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=u}};var Jr=function i(u){function h(f){return new Sf(f,u)}return h.tension=function(f){return i(+f)},h}(0);function Sn(i,u){this._context=i,this._k=(1-u)/6}Sn.prototype={areaStart:Kh,areaEnd:Kh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(i,u){switch(i=+i,u=+u,this._point){case 0:this._point=1,this._x3=i,this._y3=u;break;case 1:this._point=2,this._context.moveTo(this._x4=i,this._y4=u);break;case 2:this._point=3,this._x5=i,this._y5=u;break;default:il(this,i,u)}this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=u}};var Af=function i(u){function h(f){return new Sn(f,u)}return h.tension=function(f){return i(+f)},h}(0);function er(i,u){this._context=i,this._k=(1-u)/6}er.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,u){switch(i=+i,u=+u,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:il(this,i,u)}this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=u}};var QC=function i(u){function h(f){return new er(f,u)}return h.tension=function(f){return i(+f)},h}(0);function vi(i,u,h){var f=i._x1,g=i._y1,v=i._x2,E=i._y2;if(i._l01_a>Xr){var I=2*i._l01_2a+3*i._l01_a*i._l12_a+i._l12_2a,S=3*i._l01_a*(i._l01_a+i._l12_a);f=(f*I-i._x0*i._l12_2a+i._x2*i._l01_2a)/S,g=(g*I-i._y0*i._l12_2a+i._y2*i._l01_2a)/S}if(i._l23_a>Xr){var k=2*i._l23_2a+3*i._l23_a*i._l12_a+i._l12_2a,O=3*i._l23_a*(i._l23_a+i._l12_a);v=(v*k+i._x1*i._l23_2a-u*i._l12_2a)/O,E=(E*k+i._y1*i._l23_2a-h*i._l12_2a)/O}i._context.bezierCurveTo(f,g,v,E,i._x2,i._y2)}function Ot(i,u){this._context=i,this._alpha=u}Ot.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,u){if(i=+i,u=+u,this._point){var h=this._x2-i,f=this._y2-u;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(h*h+f*f,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(i,u):this._context.moveTo(i,u);break;case 1:this._point=2;break;case 2:this._point=3;default:vi(this,i,u)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=u}};var by=function i(u){function h(f){return u?new Ot(f,u):new Sf(f,0)}return h.alpha=function(f){return i(+f)},h}(.5);function Ey(i,u){this._context=i,this._alpha=u}Ey.prototype={areaStart:Kh,areaEnd:Kh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(i,u){if(i=+i,u=+u,this._point){var h=this._x2-i,f=this._y2-u;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(h*h+f*f,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=i,this._y3=u;break;case 1:this._point=2,this._context.moveTo(this._x4=i,this._y4=u);break;case 2:this._point=3,this._x5=i,this._y5=u;break;default:vi(this,i,u)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=u}};var xf=function i(u){function h(f){return u?new Ey(f,u):new Sn(f,0)}return h.alpha=function(f){return i(+f)},h}(.5);function Eg(i,u){this._context=i,this._alpha=u}Eg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,u){if(i=+i,u=+u,this._point){var h=this._x2-i,f=this._y2-u;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(h*h+f*f,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:vi(this,i,u)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=u}};var Ig=function i(u){function h(f){return u?new Eg(f,u):new er(f,0)}return h.alpha=function(f){return i(+f)},h}(.5);function ib(i){this._context=i}ib.prototype={areaStart:Kh,areaEnd:Kh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(i,u){i=+i,u=+u,this._point?this._context.lineTo(i,u):(this._point=1,this._context.moveTo(i,u))}};function Yo(i){return i<0?-1:1}function V_(i,u,h){var f=i._x1-i._x0,g=u-i._x1,v=(i._y1-i._y0)/(f||g<0&&-0),E=(h-i._y1)/(g||f<0&&-0),I=(v*g+E*f)/(f+g);return(Yo(v)+Yo(E))*Math.min(Math.abs(v),Math.abs(E),.5*Math.abs(I))||0}function j_(i,u){var h=i._x1-i._x0;return h?(3*(i._y1-i._y0)/h-u)/2:u}function Iy(i,u,h){var f=i._x0,v=i._x1,E=i._y1,I=(v-f)/3;i._context.bezierCurveTo(f+I,i._y0+I*u,v-I,E-I*h,v,E)}function Pu(i){this._context=i}function Cy(i){this._context=new je(i)}function je(i){this._context=i}function sb(i){this._context=i}function Ty(i){var u,f,h=i.length-1,g=new Array(h),v=new Array(h),E=new Array(h);for(g[0]=0,v[0]=2,E[0]=i[0]+2*i[1],u=1;u<h-1;++u)g[u]=1,v[u]=4,E[u]=4*i[u]+2*i[u+1];for(g[h-1]=2,v[h-1]=7,E[h-1]=8*i[h-1]+i[h],u=1;u<h;++u)v[u]-=f=g[u]/v[u-1],E[u]-=f*E[u-1];for(g[h-1]=E[h-1]/v[h-1],u=h-2;u>=0;--u)g[u]=(E[u]-g[u+1])/v[u];for(v[h-1]=(i[h]+g[h-1])/2,u=0;u<h-1;++u)v[u]=2*i[u+1]-g[u+1];return[g,v]}Pu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Iy(this,this._t0,j_(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,u){var h=NaN;if(u=+u,(i=+i)!==this._x1||u!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(i,u):this._context.moveTo(i,u);break;case 1:this._point=2;break;case 2:this._point=3,Iy(this,j_(this,h=V_(this,i,u)),h);break;default:Iy(this,this._t0,h=V_(this,i,u))}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=u,this._t0=h}}},(Cy.prototype=Object.create(Pu.prototype)).point=function(i,u){Pu.prototype.point.call(this,u,i)},je.prototype={moveTo:function(i,u){this._context.moveTo(u,i)},closePath:function(){this._context.closePath()},lineTo:function(i,u){this._context.lineTo(u,i)},bezierCurveTo:function(i,u,h,f,g,v){this._context.bezierCurveTo(u,i,f,h,v,g)}},sb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var i=this._x,u=this._y,h=i.length;if(h)if(this._line?this._context.lineTo(i[0],u[0]):this._context.moveTo(i[0],u[0]),2===h)this._context.lineTo(i[1],u[1]);else for(var f=Ty(i),g=Ty(u),v=0,E=1;E<h;++v,++E)this._context.bezierCurveTo(f[0][v],g[0][v],f[1][v],g[1][v],i[E],u[E]);(this._line||0!==this._line&&1===h)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(i,u){this._x.push(+i),this._y.push(+u)}};function ob(i,u){this._context=i,this._t=u}ob.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(i,u){switch(i=+i,u=+u,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,u):this._context.moveTo(i,u);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,u),this._context.lineTo(i,u);else{var h=this._x*(1-this._t)+i*this._t;this._context.lineTo(h,this._y),this._context.lineTo(h,u)}}this._x=i,this._y=u}};var Dy=function(i,u){if((E=i.length)>1)for(var f,g,E,h=1,v=i[u[0]],I=v.length;h<E;++h)for(g=v,v=i[u[h]],f=0;f<I;++f)v[f][1]+=v[f][0]=isNaN(g[f][1])?g[f][0]:g[f][1]},Sy=function(i){for(var u=i.length,h=new Array(u);--u>=0;)h[u]=u;return h};function ao(i,u){return i[u]}var uo=function(i){var u=i.map(vr);return Sy(i).sort(function(h,f){return u[h]-u[f]})};function vr(i){for(var g,u=0,h=-1,f=i.length;++h<f;)(g=+i[h][1])&&(u+=g);return u}var lC=function(i){return function(){return i}};function As(i){return i[0]}function hC(i){return i[1]}function tu(){this._=null}function ei(i){i.U=i.C=i.L=i.R=i.P=i.N=null}function ol(i,u){var h=u,f=u.R,g=h.U;g?g.L===h?g.L=f:g.R=f:i._=f,f.U=g,h.U=f,h.R=f.L,h.R&&(h.R.U=h),f.L=h}function Dg(i,u){var h=u,f=u.L,g=h.U;g?g.L===h?g.L=f:g.R=f:i._=f,f.U=g,h.U=f,h.L=f.R,h.L&&(h.L.U=h),f.R=h}function N1(i){for(;i.L;)i=i.L;return i}function Bl(i,u,h,f){var g=[null,null],v=Po.push(g)-1;return g.left=i,g.right=u,h&&Ou(g,i,u,h),f&&Ou(g,u,i,f),Ea[i.index].halfedges.push(v),Ea[u.index].halfedges.push(v),g}function xy(i,u,h){var f=[u,h];return f.left=i,f}function Ou(i,u,h,f){i[0]||i[1]?i.left===h?i[1]=f:i[0]=f:(i[0]=f,i.left=u,i.right=h)}function z_(i,u,h,f,g){var z,v=i[0],E=i[1],I=v[0],S=v[1],U=0,N=1,V=E[0]-I,H=E[1]-S;if(z=u-I,V||!(z>0)){if(z/=V,V<0){if(z<U)return;z<N&&(N=z)}else if(V>0){if(z>N)return;z>U&&(U=z)}if(z=f-I,V||!(z<0)){if(z/=V,V<0){if(z>N)return;z>U&&(U=z)}else if(V>0){if(z<U)return;z<N&&(N=z)}if(z=h-S,H||!(z>0)){if(z/=H,H<0){if(z<U)return;z<N&&(N=z)}else if(H>0){if(z>N)return;z>U&&(U=z)}if(z=g-S,H||!(z<0)){if(z/=H,H<0){if(z>N)return;z>U&&(U=z)}else if(H>0){if(z<U)return;z<N&&(N=z)}return!(U>0)&&!(N<1)||(U>0&&(i[0]=[I+U*V,S+U*H]),N<1&&(i[1]=[I+N*V,S+N*H])),!0}}}}}function My(i,u,h,f,g){var v=i[1];if(v)return!0;var z,Y,E=i[0],I=i.left,S=i.right,k=I[0],O=I[1],U=S[0],N=S[1],V=(k+U)/2;if(N===O){if(V<u||V>=f)return;if(k>U){if(E){if(E[1]>=g)return}else E=[V,h];v=[V,g]}else{if(E){if(E[1]<h)return}else E=[V,g];v=[V,h]}}else if(Y=(O+N)/2-(z=(k-U)/(N-O))*V,z<-1||z>1)if(k>U){if(E){if(E[1]>=g)return}else E=[(h-Y)/z,h];v=[(g-Y)/z,g]}else{if(E){if(E[1]<h)return}else E=[(g-Y)/z,g];v=[(h-Y)/z,h]}else if(O<N){if(E){if(E[0]>=f)return}else E=[u,z*u+Y];v=[f,z*f+Y]}else{if(E){if(E[0]<u)return}else E=[f,z*f+Y];v=[u,z*u+Y]}return i[0]=E,i[1]=v,!0}function ba(i,u){var h=i.site,f=u.left,g=u.right;return h===g&&(g=f,f=h),g?Math.atan2(g[1]-f[1],g[0]-f[0]):(h===f?(f=u[1],g=u[0]):(f=u[0],g=u[1]),Math.atan2(f[0]-g[0],g[1]-f[1]))}function Qh(i,u){return u[+(u.left!==i.site)]}function Lu(i,u){return u[+(u.left===i.site)]}tu.prototype={constructor:tu,insert:function(i,u){var h,f,g;if(i){if(u.P=i,u.N=i.N,i.N&&(i.N.P=u),i.N=u,i.R){for(i=i.R;i.L;)i=i.L;i.L=u}else i.R=u;h=i}else this._?(i=N1(this._),u.P=null,u.N=i,i.P=i.L=u,h=i):(u.P=u.N=null,this._=u,h=null);for(u.L=u.R=null,u.U=h,u.C=!0,i=u;h&&h.C;)h===(f=h.U).L?(g=f.R)&&g.C?(h.C=g.C=!1,f.C=!0,i=f):(i===h.R&&(ol(this,h),h=(i=h).U),h.C=!1,f.C=!0,Dg(this,f)):(g=f.L)&&g.C?(h.C=g.C=!1,f.C=!0,i=f):(i===h.L&&(Dg(this,h),h=(i=h).U),h.C=!1,f.C=!0,ol(this,f)),h=i.U;this._.C=!1},remove:function(i){i.N&&(i.N.P=i.P),i.P&&(i.P.N=i.N),i.N=i.P=null;var h,v,E,u=i.U,f=i.L,g=i.R;if(v=f?g?N1(g):f:g,u?u.L===i?u.L=v:u.R=v:this._=v,f&&g?(E=v.C,v.C=i.C,v.L=f,f.U=v,v!==g?(u=v.U,v.U=i.U,u.L=i=v.R,v.R=g,g.U=v):(v.U=u,u=v,i=v.R)):(E=i.C,i=v),i&&(i.U=u),!E){if(i&&i.C)return void(i.C=!1);do{if(i===this._)break;if(i===u.L){if((h=u.R).C&&(h.C=!1,u.C=!0,ol(this,u),h=u.R),h.L&&h.L.C||h.R&&h.R.C){(!h.R||!h.R.C)&&(h.L.C=!1,h.C=!0,Dg(this,h),h=u.R),h.C=u.C,u.C=h.R.C=!1,ol(this,u),i=this._;break}}else if((h=u.L).C&&(h.C=!1,u.C=!0,Dg(this,u),h=u.L),h.L&&h.L.C||h.R&&h.R.C){(!h.L||!h.L.C)&&(h.R.C=!1,h.C=!0,ol(this,h),h=u.L),h.C=u.C,u.C=h.L.C=!1,Dg(this,u),i=this._;break}h.C=!0,i=u,u=u.U}while(!i.C);i&&(i.C=!1)}}};var Vl,ky=[];function q_(){ei(this),this.x=this.y=this.arc=this.site=this.cy=null}function Fu(i){var u=i.P,h=i.N;if(u&&h){var f=u.site,g=i.site,v=h.site;if(f!==v){var E=g[0],I=g[1],S=f[0]-E,k=f[1]-I,O=v[0]-E,U=v[1]-I,N=2*(S*U-k*O);if(!(N>=-O1)){var V=S*S+k*k,H=O*O+U*U,z=(U*V-k*H)/N,Y=(S*H-O*V)/N,X=ky.pop()||new q_;X.arc=i,X.site=g,X.x=z+E,X.y=(X.cy=Y+I)+Math.sqrt(z*z+Y*Y),i.circle=X;for(var he=null,ee=_r._;ee;)if(X.y<ee.y||X.y===ee.y&&X.x<=ee.x){if(!ee.L){he=ee.P;break}ee=ee.L}else{if(!ee.R){he=ee;break}ee=ee.R}_r.insert(he,X),he||(Vl=X)}}}}function jl(i){var u=i.circle;u&&(u.P||(Vl=u.N),_r.remove(u),ky.push(u),ei(u),i.circle=null)}var Sg=[];function P1(){ei(this),this.edge=this.site=this.circle=null}function ub(i){var u=Sg.pop()||new P1;return u.site=i,u}function Jh(i){jl(i),xi.remove(i),Sg.push(i),ei(i)}function dc(i){var u=i.circle,h=u.x,f=u.cy,g=[h,f],v=i.P,E=i.N,I=[i];Jh(i);for(var S=v;S.circle&&Math.abs(h-S.circle.x)<Ar&&Math.abs(f-S.circle.cy)<Ar;)v=S.P,I.unshift(S),Jh(S),S=v;I.unshift(S),jl(S);for(var k=E;k.circle&&Math.abs(h-k.circle.x)<Ar&&Math.abs(f-k.circle.cy)<Ar;)E=k.N,I.push(k),Jh(k),k=E;I.push(k),jl(k);var U,O=I.length;for(U=1;U<O;++U)Ou((k=I[U]).edge,(S=I[U-1]).site,k.site,g);(k=I[O-1]).edge=Bl((S=I[0]).site,k.site,null,g),Fu(S),Fu(k)}function cb(i){for(var f,g,v,E,u=i[0],h=i[1],I=xi._;I;)if((v=lb(I,h)-u)>Ar)I=I.L;else{if(!((E=u-dC(I,h))>Ar)){v>-Ar?(f=I.P,g=I):E>-Ar?(f=I,g=I.N):f=g=I;break}if(!I.R){f=I;break}I=I.R}!function Yh(i){return Ea[i.index]={site:i,halfedges:[]}}(i);var S=ub(i);if(xi.insert(f,S),f||g){if(f===g)return jl(f),g=ub(f.site),xi.insert(S,g),S.edge=g.edge=Bl(f.site,S.site),Fu(f),void Fu(g);if(!g)return void(S.edge=Bl(f.site,S.site));jl(f),jl(g);var k=f.site,O=k[0],U=k[1],N=i[0]-O,V=i[1]-U,H=g.site,z=H[0]-O,Y=H[1]-U,X=2*(N*Y-V*z),he=N*N+V*V,ee=z*z+Y*Y,De=[(Y*he-V*ee)/X+O,(N*ee-z*he)/X+U];Ou(g.edge,k,H,De),S.edge=Bl(k,i,null,De),g.edge=Bl(i,H,null,De),Fu(f),Fu(g)}}function lb(i,u){var h=i.site,f=h[0],g=h[1],v=g-u;if(!v)return f;var E=i.P;if(!E)return-1/0;var I=(h=E.site)[0],S=h[1],k=S-u;if(!k)return I;var O=I-f,U=1/v-1/k,N=O/k;return U?(-N+Math.sqrt(N*N-2*U*(O*O/(-2*k)-S+k/2+g-v/2)))/U+f:(f+I)/2}function dC(i,u){var h=i.N;if(h)return lb(h,u);var f=i.site;return f[1]===u?f[0]:1/0}var xi,Ea,_r,Po,Ar=1e-6,O1=1e-12;function L1(i,u,h){return(i[0]-h[0])*(u[1]-i[1])-(i[0]-u[0])*(h[1]-i[1])}function Ag(i,u){return u[1]-i[1]||u[0]-i[0]}function Ny(i,u){var f,g,v,h=i.sort(Ag).pop();for(Po=[],Ea=new Array(i.length),xi=new tu,_r=new tu;;)if(v=Vl,h&&(!v||h[1]<v.y||h[1]===v.y&&h[0]<v.x))(h[0]!==f||h[1]!==g)&&(cb(h),f=h[0],g=h[1]),h=i.pop();else{if(!v)break;dc(v.arc)}if(function Ry(){for(var h,f,g,v,i=0,u=Ea.length;i<u;++i)if((h=Ea[i])&&(v=(f=h.halfedges).length)){var E=new Array(v),I=new Array(v);for(g=0;g<v;++g)E[g]=g,I[g]=ba(h,Po[f[g]]);for(E.sort(function(S,k){return I[k]-I[S]}),g=0;g<v;++g)I[g]=f[E[g]];for(g=0;g<v;++g)f[g]=I[g]}}(),u){var E=+u[0][0],I=+u[0][1],S=+u[1][0],k=+u[1][1];(function G_(i,u,h,f){for(var v,g=Po.length;g--;)My(v=Po[g],i,u,h,f)&&z_(v,i,u,h,f)&&(Math.abs(v[0][0]-v[1][0])>Ar||Math.abs(v[0][1]-v[1][1])>Ar)||delete Po[g]})(E,I,S,k),function Xh(i,u,h,f){var v,E,I,S,k,O,U,N,V,H,z,Y,g=Ea.length,X=!0;for(v=0;v<g;++v)if(E=Ea[v]){for(I=E.site,S=(k=E.halfedges).length;S--;)Po[k[S]]||k.splice(S,1);for(S=0,O=k.length;S<O;)z=(H=Lu(E,Po[k[S]]))[0],Y=H[1],N=(U=Qh(E,Po[k[++S%O]]))[0],V=U[1],(Math.abs(z-N)>Ar||Math.abs(Y-V)>Ar)&&(k.splice(S,0,Po.push(xy(I,H,Math.abs(z-i)<Ar&&f-Y>Ar?[i,Math.abs(N-i)<Ar?V:f]:Math.abs(Y-f)<Ar&&h-z>Ar?[Math.abs(V-f)<Ar?N:h,f]:Math.abs(z-h)<Ar&&Y-u>Ar?[h,Math.abs(N-h)<Ar?V:u]:Math.abs(Y-u)<Ar&&z-i>Ar?[Math.abs(V-u)<Ar?N:i,u]:null))-1),++O);O&&(X=!1)}if(X){var he,ee,De,Oe=1/0;for(v=0,X=null;v<g;++v)(E=Ea[v])&&(De=(he=(I=E.site)[0]-i)*he+(ee=I[1]-u)*ee)<Oe&&(Oe=De,X=E);if(X){var Se=[i,u],_e=[i,f],qe=[h,f],$e=[h,u];X.halfedges.push(Po.push(xy(I=X.site,Se,_e))-1,Po.push(xy(I,_e,qe))-1,Po.push(xy(I,qe,$e))-1,Po.push(xy(I,$e,Se))-1)}}for(v=0;v<g;++v)(E=Ea[v])&&(E.halfedges.length||delete Ea[v])}(E,I,S,k)}this.edges=Po,this.cells=Ea,xi=_r=Po=Ea=null}Ny.prototype={constructor:Ny,polygons:function(){var i=this.edges;return this.cells.map(function(u){var h=u.halfedges.map(function(f){return Qh(u,i[f])});return h.data=u.site.data,h})},triangles:function(){var i=[],u=this.edges;return this.cells.forEach(function(h,f){if(I=(v=h.halfedges).length)for(var v,I,S,g=h.site,E=-1,k=u[v[I-1]],O=k.left===g?k.right:k.left;++E<I;)S=O,O=(k=u[v[E]]).left===g?k.right:k.left,S&&O&&f<S.index&&f<O.index&&L1(g,S,O)<0&&i.push([g.data,S.data,O.data])}),i},links:function(){return this.edges.filter(function(i){return i.right}).map(function(i){return{source:i.left.data,target:i.right.data}})},find:function(i,u,h){for(var g,I,f=this,v=f._found||0,E=f.cells.length;!(I=f.cells[v]);)if(++v>=E)return null;var S=i-I.site[0],k=u-I.site[1],O=S*S+k*k;do{I=f.cells[g=v],v=null,I.halfedges.forEach(function(U){var N=f.edges[U],V=N.left;if(V!==I.site&&V||(V=N.right)){var H=i-V[0],z=u-V[1],Y=H*H+z*z;Y<O&&(O=Y,v=V.index)}})}while(null!==v);return f._found=g,null==h||O<=h*h?I.site:null}};var Py=function(i){return function(){return i}};function W_(i,u,h){this.target=i,this.type=u,this.transform=h}function fc(i,u,h){this.k=i,this.x=u,this.y=h}fc.prototype={constructor:fc,scale:function(i){return 1===i?this:new fc(this.k*i,this.x,this.y)},translate:function(i,u){return 0===i&0===u?this:new fc(this.k,this.x+this.k*i,this.y+this.k*u)},apply:function(i){return[i[0]*this.k+this.x,i[1]*this.k+this.y]},applyX:function(i){return i*this.k+this.x},applyY:function(i){return i*this.k+this.y},invert:function(i){return[(i[0]-this.x)/this.k,(i[1]-this.y)/this.k]},invertX:function(i){return(i-this.x)/this.k},invertY:function(i){return(i-this.y)/this.k},rescaleX:function(i){return i.copy().domain(i.range().map(this.invertX,this).map(i.invert,i))},rescaleY:function(i){return i.copy().domain(i.range().map(this.invertY,this).map(i.invert,i))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Mg=new fc(1,0,0);function ss(i){return i.__zoom||Mg}function K_(){M.event.stopImmediatePropagation()}ss.prototype=fc.prototype;var Oy=function(){M.event.preventDefault(),M.event.stopImmediatePropagation()};function F1(){return!M.event.button}function hb(){var u,h,i=this;return i instanceof SVGElement?(u=(i=i.ownerSVGElement||i).width.baseVal.value,h=i.height.baseVal.value):(u=i.clientWidth,h=i.clientHeight),[[0,0],[u,h]]}function U1(){return this.__zoom||Mg}M.version="4.9.1",M.bisect=Be,M.bisectRight=Be,M.bisectLeft=Ve,M.ascending=be,M.bisector=Q,M.cross=function(i,u,h){var E,I,S,k,f=i.length,g=u.length,v=new Array(f*g);for(null==h&&(h=Fe),E=S=0;E<f;++E)for(k=i[E],I=0;I<g;++I,++S)v[S]=h(k,u[I]);return v},M.descending=function(i,u){return u<i?-1:u>i?1:u>=i?0:NaN},M.deviation=ot,M.extent=Qe,M.histogram=function(){var i=bt,u=Qe,h=fe;function f(g){var v,I,E=g.length,S=new Array(E);for(v=0;v<E;++v)S[v]=i(g[v],v,g);var k=u(S),O=k[0],U=k[1],N=h(S,O,U);Array.isArray(N)||(N=Ze(O,U,N),N=We(Math.ceil(O/N)*N,Math.floor(U/N)*N,N));for(var V=N.length;N[0]<=O;)N.shift(),--V;for(;N[V-1]>U;)N.pop(),--V;var z,H=new Array(V+1);for(v=0;v<=V;++v)(z=H[v]=[]).x0=v>0?N[v-1]:O,z.x1=v<V?N[v]:U;for(v=0;v<E;++v)O<=(I=S[v])&&I<=U&&H[Be(N,I,0,V)].push(g[v]);return H}return f.value=function(g){return arguments.length?(i="function"==typeof g?g:ht(g),f):i},f.domain=function(g){return arguments.length?(u="function"==typeof g?g:ht([g[0],g[1]]),f):u},f.thresholds=function(g){return arguments.length?(h="function"==typeof g?g:Array.isArray(g)?ht(ge.call(g)):ht(g),f):h},f},M.thresholdFreedmanDiaconis=function(i,u,h){return i=Me.call(i,ye).sort(be),Math.ceil((h-u)/(2*(Te(i,.75)-Te(i,.25))*Math.pow(i.length,-1/3)))},M.thresholdScott=function(i,u,h){return Math.ceil((h-u)/(3.5*ot(i)*Math.pow(i.length,-1/3)))},M.thresholdSturges=fe,M.max=function(i,u){var g,v,h=i.length,f=-1;if(null==u){for(;++f<h;)if(null!=(g=i[f])&&g>=g)for(v=g;++f<h;)null!=(g=i[f])&&g>v&&(v=g)}else for(;++f<h;)if(null!=(g=u(i[f],f,i))&&g>=g)for(v=g;++f<h;)null!=(g=u(i[f],f,i))&&g>v&&(v=g);return v},M.mean=function(i,u){var v,h=i.length,f=h,g=-1,E=0;if(null==u)for(;++g<h;)isNaN(v=ye(i[g]))?--f:E+=v;else for(;++g<h;)isNaN(v=ye(u(i[g],g,i)))?--f:E+=v;if(f)return E/f},M.median=function(i,u){var g,h=i.length,f=-1,v=[];if(null==u)for(;++f<h;)isNaN(g=ye(i[f]))||v.push(g);else for(;++f<h;)isNaN(g=ye(u(i[f],f,i)))||v.push(g);return Te(v.sort(be),.5)},M.merge=Jt,M.min=_t,M.pairs=function(i,u){null==u&&(u=Fe);for(var h=0,f=i.length-1,g=i[0],v=new Array(f<0?0:f);h<f;)v[h]=u(g,g=i[++h]);return v},M.permute=function(i,u){for(var h=u.length,f=new Array(h);h--;)f[h]=i[u[h]];return f},M.quantile=Te,M.range=We,M.scan=function(i,u){if(h=i.length){var h,v,f=0,g=0,E=i[g];for(null==u&&(u=be);++f<h;)(u(v=i[f],E)<0||0!==u(E,E))&&(E=v,g=f);if(0===u(E,E))return g}},M.shuffle=function(i,u,h){for(var g,v,f=(null==h?i.length:h)-(u=null==u?0:+u);f;)v=Math.random()*f--|0,g=i[f+u],i[f+u]=i[v+u],i[v+u]=g;return i},M.sum=function(i,u){var g,h=i.length,f=-1,v=0;if(null==u)for(;++f<h;)(g=+i[f])&&(v+=g);else for(;++f<h;)(g=+u(i[f],f,i))&&(v+=g);return v},M.ticks=vt,M.tickIncrement=ce,M.tickStep=Ze,M.transpose=xr,M.variance=Rt,M.zip=function(){return xr(arguments)},M.axisTop=function Da(i){return Ir(1,i)},M.axisRight=function Ns(i){return Ir(2,i)},M.axisBottom=function ai(i){return Ir(3,i)},M.axisLeft=function Rr(i){return Ir(4,i)},M.brush=function(){return gh(Jy)},M.brushX=function Oi(){return gh(Ji)},M.brushY=function lp(){return gh($r)},M.brushSelection=function ph(i){var u=i.__brush;return u?u.dim.output(u.selection):null},M.chord=function(){var i=0,u=null,h=null,f=null;function g(v){var V,H,z,Y,X,he,E=v.length,I=[],S=We(E),k=[],O=[],U=O.groups=new Array(E),N=new Array(E*E);for(V=0,X=-1;++X<E;){for(H=0,he=-1;++he<E;)H+=v[X][he];I.push(H),k.push(We(E)),V+=H}for(u&&S.sort(function(St,mt){return u(I[St],I[mt])}),h&&k.forEach(function(St,mt){St.sort(function(st,Vt){return h(v[mt][st],v[mt][Vt])})}),Y=(V=Vs(0,tv-i*E)/V)?i:tv/E,H=0,X=-1;++X<E;){for(z=H,he=-1;++he<E;){var ee=S[X],De=k[ee][he],Oe=v[ee][De],Se=H,_e=H+=Oe*V;N[De*E+ee]={index:ee,subindex:De,startAngle:Se,endAngle:_e,value:Oe}}U[ee]={index:ee,startAngle:z,endAngle:H,value:I[ee]},H+=Y}for(X=-1;++X<E;)for(he=X-1;++he<E;){var qe=N[he*E+X],$e=N[X*E+he];(qe.value||$e.value)&&O.push(qe.value<$e.value?{source:$e,target:qe}:{source:qe,target:$e})}return f?O.sort(f):O}return g.padAngle=function(v){return arguments.length?(i=Vs(0,v),g):i},g.sortGroups=function(v){return arguments.length?(u=v,g):u},g.sortSubgroups=function(v){return arguments.length?(h=v,g):h},g.sortChords=function(v){return arguments.length?(null==v?f=null:(f=Zc(v))._=v,g):f&&f._},g},M.ribbon=function(){var i=f0,u=p0,h=dp,f=nv,g=To,v=null;function E(){var I,S=h0.call(arguments),k=i.apply(this,S),O=u.apply(this,S),U=+h.apply(this,(S[0]=k,S)),N=f.apply(this,S)-Kc,V=g.apply(this,S)-Kc,H=U*Li(N),z=U*bl(N),Y=+h.apply(this,(S[0]=O,S)),X=f.apply(this,S)-Kc,he=g.apply(this,S)-Kc;if(v||(v=I=Wa()),v.moveTo(H,z),v.arc(0,0,U,N,V),(N!==X||V!==he)&&(v.quadraticCurveTo(0,0,Y*Li(X),Y*bl(X)),v.arc(0,0,Y,X,he)),v.quadraticCurveTo(0,0,H,z),v.closePath(),I)return v=null,I+""||null}return E.radius=function(I){return arguments.length?(h="function"==typeof I?I:ec(+I),E):h},E.startAngle=function(I){return arguments.length?(f="function"==typeof I?I:ec(+I),E):f},E.endAngle=function(I){return arguments.length?(g="function"==typeof I?I:ec(+I),E):g},E.source=function(I){return arguments.length?(i=I,E):i},E.target=function(I){return arguments.length?(u=I,E):u},E.context=function(I){return arguments.length?(v=null==I?null:I,E):v},E},M.nest=function(){var h,f,g,i=[],u=[];function v(I,S,k,O){if(S>=i.length)return null!=f?f(I):null!=h?I.sort(h):I;for(var H,z,X,U=-1,N=I.length,V=i[S++],Y=Ti(),he=k();++U<N;)(X=Y.get(H=V(z=I[U])+""))?X.push(z):Y.set(H,[z]);return Y.each(function(ee,De){O(he,De,v(ee,S,k,O))}),he}function E(I,S){if(++S>i.length)return I;var k,O=u[S-1];return null!=f&&S>=i.length?k=I.entries():(k=[],I.each(function(U,N){k.push({key:N,values:E(U,S)})})),null!=O?k.sort(function(U,N){return O(U.key,N.key)}):k}return g={object:function(I){return v(I,0,rv,iv)},map:function(I){return v(I,0,sv,pp)},entries:function(I){return E(v(I,0,sv,pp),0)},key:function(I){return i.push(I),g},sortKeys:function(I){return u[i.length-1]=I,g},sortValues:function(I){return h=I,g},rollup:function(I){return f=I,g}}},M.set=tm,M.map=Ti,M.keys=function(i){var u=[];for(var h in i)u.push(h);return u},M.values=function(i){var u=[];for(var h in i)u.push(i[h]);return u},M.entries=function(i){var u=[];for(var h in i)u.push({key:h,value:i[h]});return u},M.color=Qs,M.rgb=pr,M.hsl=Tc,M.lab=Sc,M.hcl=sa,M.cubehelix=vo,M.dispatch=ls,M.drag=function(){var E,I,S,k,i=zl,u=cu,h=Gi,f={},g=ls("start","drag","end"),v=0,O=0;function U(ee){ee.on("mousedown.drag",N).on("touchstart.drag",z).on("touchmove.drag",Y).on("touchend.drag touchcancel.drag",X).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function N(){if(!k&&i.apply(this,arguments)){var ee=he("mouse",u.apply(this,arguments),kr,this,arguments);!ee||(vs(M.event.view).on("mousemove.drag",V,!0).on("mouseup.drag",H,!0),uu(M.event.view),id(),S=!1,E=M.event.clientX,I=M.event.clientY,ee("start"))}}function V(){if(tr(),!S){var ee=M.event.clientX-E,De=M.event.clientY-I;S=ee*ee+De*De>O}f.mouse("drag")}function H(){vs(M.event.view).on("mousemove.drag mouseup.drag",null),ra(M.event.view,S),tr(),f.mouse("end")}function z(){if(i.apply(this,arguments)){var Se,_e,ee=M.event.changedTouches,De=u.apply(this,arguments),Oe=ee.length;for(Se=0;Se<Oe;++Se)(_e=he(ee[Se].identifier,De,Ic,this,arguments))&&(id(),_e("start"))}}function Y(){var Oe,Se,ee=M.event.changedTouches,De=ee.length;for(Oe=0;Oe<De;++Oe)(Se=f[ee[Oe].identifier])&&(tr(),Se("drag"))}function X(){var Oe,Se,ee=M.event.changedTouches,De=ee.length;for(k&&clearTimeout(k),k=setTimeout(function(){k=null},500),Oe=0;Oe<De;++Oe)(Se=f[ee[Oe].identifier])&&(id(),Se("end"))}function he(ee,De,Oe,Se,_e){var $e,St,mt,qe=Oe(De,ee),st=g.copy();if(Qo(new $u(U,"beforestart",$e,ee,v,qe[0],qe[1],0,0,st),function(){return null!=(M.event.subject=$e=h.apply(Se,_e))&&(St=$e.x-qe[0]||0,mt=$e.y-qe[1]||0,!0)}))return function Vt(pt){var it,le=qe;switch(pt){case"start":f[ee]=Vt,it=v++;break;case"end":delete f[ee],--v;case"drag":qe=Oe(De,ee),it=v}Qo(new $u(U,pt,$e,ee,it,qe[0]+St,qe[1]+mt,qe[0]-le[0],qe[1]-le[1],st),st.apply,st,[pt,Se,_e])}}return U.filter=function(ee){return arguments.length?(i="function"==typeof ee?ee:sr(!!ee),U):i},U.container=function(ee){return arguments.length?(u="function"==typeof ee?ee:sr(ee),U):u},U.subject=function(ee){return arguments.length?(h="function"==typeof ee?ee:sr(ee),U):h},U.on=function(){var ee=g.on.apply(g,arguments);return ee===g?U:ee},U.clickDistance=function(ee){return arguments.length?(O=(ee=+ee)*ee,U):Math.sqrt(O)},U},M.dragDisable=uu,M.dragEnable=ra,M.dsvFormat=Z,M.csvParse=ze,M.csvParseRows=Dt,M.csvFormat=qt,M.csvFormatRows=fn,M.tsvParse=Yr,M.tsvParseRows=So,M.tsvFormat=yh,M.tsvFormatRows=nm,M.easeLinear=function Yu(i){return+i},M.easeQuad=vd,M.easeQuadIn=function oh(i){return i*i},M.easeQuadOut=function yd(i){return i*(2-i)},M.easeQuadInOut=vd,M.easeCubic=Jf,M.easeCubicIn=function ah(i){return i*i*i},M.easeCubicOut=function uh(i){return--i*i*i+1},M.easeCubicInOut=Jf,M.easePoly=_d,M.easePolyIn=Qu,M.easePolyOut=ep,M.easePolyInOut=_d,M.easeSin=ch,M.easeSinIn=function np(i){return 1-Math.cos(i*wd)},M.easeSinOut=function qy(i){return Math.sin(i*wd)},M.easeSinInOut=ch,M.easeExp=Wy,M.easeExpIn=function s0(i){return Math.pow(2,10*i-10)},M.easeExpOut=function o0(i){return 1-Math.pow(2,-10*i)},M.easeExpInOut=Wy,M.easeCircle=lh,M.easeCircleIn=function Wo(i){return 1-Math.sqrt(1-i*i)},M.easeCircleOut=function Xu(i){return Math.sqrt(1- --i*i)},M.easeCircleInOut=lh,M.easeBounce=Ga,M.easeBounceIn=function a0(i){return 1-Ga(1-i)},M.easeBounceOut=Ga,M.easeBounceInOut=function bd(i){return((i*=2)<=1?1-Ga(1-i):Ga(i-1)+1)/2},M.easeBack=Cd,M.easeBackIn=ha,M.easeBackOut=Id,M.easeBackInOut=Cd,M.easeElastic=u0,M.easeElasticIn=hh,M.easeElasticOut=u0,M.easeElasticInOut=Td,M.forceCenter=function(i,u){var h;function f(){var g,E,v=h.length,I=0,S=0;for(g=0;g<v;++g)I+=(E=h[g]).x,S+=E.y;for(I=I/v-i,S=S/v-u,g=0;g<v;++g)(E=h[g]).x-=I,E.y-=S}return null==i&&(i=0),null==u&&(u=0),f.initialize=function(g){h=g},f.x=function(g){return arguments.length?(i=+g,f):i},f.y=function(g){return arguments.length?(u=+g,f):u},f},M.forceCollide=function(i){var u,h,f=1,g=1;function v(){for(var S,O,U,N,V,H,z,k=u.length,Y=0;Y<g;++Y)for(O=am(u,uI,Ob).visitAfter(E),S=0;S<k;++S)z=(H=h[(U=u[S]).index])*H,N=U.x+U.vx,V=U.y+U.vy,O.visit(X);function X(he,ee,De,Oe,Se){var _e=he.data,qe=he.r,$e=H+qe;if(!_e)return ee>N+$e||Oe<N-$e||De>V+$e||Se<V-$e;if(_e.index>U.index){var St=N-_e.x-_e.vx,mt=V-_e.y-_e.vy,st=St*St+mt*mt;st<$e*$e&&(0===St&&(st+=(St=fa())*St),0===mt&&(st+=(mt=fa())*mt),st=($e-(st=Math.sqrt(st)))/st*f,U.vx+=(St*=st)*($e=(qe*=qe)/(z+qe)),U.vy+=(mt*=st)*$e,_e.vx-=St*($e=1-$e),_e.vy-=mt*$e)}}}function E(S){if(S.data)return S.r=h[S.data.index];for(var k=S.r=0;k<4;++k)S[k]&&S[k].r>S.r&&(S.r=S[k].r)}function I(){if(u){var S,O,k=u.length;for(h=new Array(k),S=0;S<k;++S)h[(O=u[S]).index]=+i(O,S,u)}}return"function"!=typeof i&&(i=pi(null==i?1:+i)),v.initialize=function(S){u=S,I()},v.iterations=function(S){return arguments.length?(g=+S,v):g},v.strength=function(S){return arguments.length?(f=+S,v):f},v.radius=function(S){return arguments.length?(i="function"==typeof S?S:pi(+S),I(),v):i},v},M.forceLink=function(i){var f,v,E,I,S,u=Lb,h=function O(z){return 1/Math.min(I[z.source.index],I[z.target.index])},g=pi(30),k=1;function U(z){for(var Y=0,X=i.length;Y<k;++Y)for(var ee,De,Oe,Se,_e,qe,$e,he=0;he<X;++he)Se=(Oe=(ee=i[he]).target).x+Oe.vx-(De=ee.source).x-De.vx||fa(),_e=Oe.y+Oe.vy-De.y-De.vy||fa(),_e*=qe=((qe=Math.sqrt(Se*Se+_e*_e))-v[he])/qe*z*f[he],Oe.vx-=(Se*=qe)*($e=S[he]),Oe.vy-=_e*$e,De.vx+=Se*($e=1-$e),De.vy+=_e*$e}function N(){if(E){var z,ee,Y=E.length,X=i.length,he=Ti(E,u);for(z=0,I=new Array(Y);z<X;++z)(ee=i[z]).index=z,"object"!=typeof ee.source&&(ee.source=lv(he,ee.source)),"object"!=typeof ee.target&&(ee.target=lv(he,ee.target)),I[ee.source.index]=(I[ee.source.index]||0)+1,I[ee.target.index]=(I[ee.target.index]||0)+1;for(z=0,S=new Array(X);z<X;++z)S[z]=I[(ee=i[z]).source.index]/(I[ee.source.index]+I[ee.target.index]);f=new Array(X),V(),v=new Array(X),H()}}function V(){if(E)for(var z=0,Y=i.length;z<Y;++z)f[z]=+h(i[z],z,i)}function H(){if(E)for(var z=0,Y=i.length;z<Y;++z)v[z]=+g(i[z],z,i)}return null==i&&(i=[]),U.initialize=function(z){E=z,N()},U.links=function(z){return arguments.length?(i=z,N(),U):i},U.id=function(z){return arguments.length?(u=z,U):u},U.iterations=function(z){return arguments.length?(k=+z,U):k},U.strength=function(z){return arguments.length?(h="function"==typeof z?z:pi(+z),V(),U):h},U.distance=function(z){return arguments.length?(g="function"==typeof z?z:pi(+z),H(),U):g},U},M.forceManyBody=function(){var i,u,h,g,f=pi(-30),v=1,E=1/0,I=.81;function S(N){var V,H=i.length,z=am(i,mp,hv).visitAfter(O);for(h=N,V=0;V<H;++V)u=i[V],z.visit(U)}function k(){if(i){var N,H,V=i.length;for(g=new Array(V),N=0;N<V;++N)g[(H=i[N]).index]=+f(H,N,i)}}function O(N){var H,z,Y,X,he,V=0;if(N.length){for(Y=X=he=0;he<4;++he)(H=N[he])&&(z=H.value)&&(V+=z,Y+=z*H.x,X+=z*H.y);N.x=Y/V,N.y=X/V}else{(H=N).x=H.data.x,H.y=H.data.y;do{V+=g[H.data.index]}while(H=H.next)}N.value=V}function U(N,V,H,z){if(!N.value)return!0;var Y=N.x-u.x,X=N.y-u.y,he=z-V,ee=Y*Y+X*X;if(he*he/I<ee)return ee<E&&(0===Y&&(ee+=(Y=fa())*Y),0===X&&(ee+=(X=fa())*X),ee<v&&(ee=Math.sqrt(v*ee)),u.vx+=Y*N.value*h/ee,u.vy+=X*N.value*h/ee),!0;if(!(N.length||ee>=E)){(N.data!==u||N.next)&&(0===Y&&(ee+=(Y=fa())*Y),0===X&&(ee+=(X=fa())*X),ee<v&&(ee=Math.sqrt(v*ee)));do{N.data!==u&&(u.vx+=Y*(he=g[N.data.index]*h/ee),u.vy+=X*he)}while(N=N.next)}}return S.initialize=function(N){i=N,k()},S.strength=function(N){return arguments.length?(f="function"==typeof N?N:pi(+N),k(),S):f},S.distanceMin=function(N){return arguments.length?(v=N*N,S):Math.sqrt(v)},S.distanceMax=function(N){return arguments.length?(E=N*N,S):Math.sqrt(E)},S.theta=function(N){return arguments.length?(I=N*N,S):Math.sqrt(I)},S},M.forceSimulation=function(i){var u,h=1,f=.001,g=1-Math.pow(f,1/300),v=0,E=.6,I=Ti(),S=Qi(O),k=ls("tick","end");function O(){U(),k.call("tick",u),h<f&&(S.stop(),k.call("end",u))}function U(){var H,Y,z=i.length;for(h+=(v-h)*g,I.each(function(X){X(h)}),H=0;H<z;++H)null==(Y=i[H]).fx?Y.x+=Y.vx*=E:(Y.x=Y.fx,Y.vx=0),null==Y.fy?Y.y+=Y.vy*=E:(Y.y=Y.fy,Y.vy=0)}function N(){for(var Y,H=0,z=i.length;H<z;++H){if((Y=i[H]).index=H,isNaN(Y.x)||isNaN(Y.y)){var X=10*Math.sqrt(H),he=H*dv;Y.x=X*Math.cos(he),Y.y=X*Math.sin(he)}(isNaN(Y.vx)||isNaN(Y.vy))&&(Y.vx=Y.vy=0)}}function V(H){return H.initialize&&H.initialize(i),H}return null==i&&(i=[]),N(),u={tick:U,restart:function(){return S.restart(O),u},stop:function(){return S.stop(),u},nodes:function(H){return arguments.length?(i=H,N(),I.each(V),u):i},alpha:function(H){return arguments.length?(h=+H,u):h},alphaMin:function(H){return arguments.length?(f=+H,u):f},alphaDecay:function(H){return arguments.length?(g=+H,u):+g},alphaTarget:function(H){return arguments.length?(v=+H,u):v},velocityDecay:function(H){return arguments.length?(E=1-H,u):1-E},force:function(H,z){return arguments.length>1?(null==z?I.remove(H):I.set(H,V(z)),u):I.get(H)},find:function(H,z,Y){var ee,De,Oe,Se,_e,X=0,he=i.length;for(null==Y?Y=1/0:Y*=Y,X=0;X<he;++X)(Oe=(ee=H-(Se=i[X]).x)*ee+(De=z-Se.y)*De)<Y&&(_e=Se,Y=Oe);return _e},on:function(H,z){return arguments.length>1?(k.on(H,z),u):k.on(H)}}},M.forceX=function(i){var h,f,g,u=pi(.1);function v(I){for(var O,S=0,k=h.length;S<k;++S)(O=h[S]).vx+=(g[S]-O.x)*f[S]*I}function E(){if(h){var I,S=h.length;for(f=new Array(S),g=new Array(S),I=0;I<S;++I)f[I]=isNaN(g[I]=+i(h[I],I,h))?0:+u(h[I],I,h)}}return"function"!=typeof i&&(i=pi(null==i?0:+i)),v.initialize=function(I){h=I,E()},v.strength=function(I){return arguments.length?(u="function"==typeof I?I:pi(+I),E(),v):u},v.x=function(I){return arguments.length?(i="function"==typeof I?I:pi(+I),E(),v):i},v},M.forceY=function(i){var h,f,g,u=pi(.1);function v(I){for(var O,S=0,k=h.length;S<k;++S)(O=h[S]).vy+=(g[S]-O.y)*f[S]*I}function E(){if(h){var I,S=h.length;for(f=new Array(S),g=new Array(S),I=0;I<S;++I)f[I]=isNaN(g[I]=+i(h[I],I,h))?0:+u(h[I],I,h)}}return"function"!=typeof i&&(i=pi(null==i?0:+i)),v.initialize=function(I){h=I,E()},v.strength=function(I){return arguments.length?(u="function"==typeof I?I:pi(+I),E(),v):u},v.y=function(I){return arguments.length?(i="function"==typeof I?I:pi(+I),E(),v):i},v},M.formatDefaultLocale=jb,M.formatLocale=hm,M.formatSpecifier=vp,M.precisionFixed=$b,M.precisionPrefix=Hb,M.precisionRound=w0,M.geoArea=function(i){return gv.reset(),Du(i,tc),2*gv},M.geoBounds=function(i){var u,h,f,g,v,E,I;if(Su=Qr=-(Si=ar=1/0),ma=[],Du(i,Au),h=ma.length){for(ma.sort(Cp),u=1,v=[f=ma[0]];u<h;++u)Tp(f,(g=ma[u])[0])||Tp(f,g[1])?(ts(f[0],g[1])>ts(f[0],f[1])&&(f[1]=g[1]),ts(g[0],f[1])>ts(f[0],f[1])&&(f[0]=g[0])):v.push(f=g);for(E=-1/0,u=0,f=v[h=v.length-1];u<=h;f=g,++u)(I=ts(f[1],(g=v[u])[0]))>E&&(E=I,Si=g[0],Qr=f[1])}return ma=Ko=null,Si===1/0||ar===1/0?[[NaN,NaN],[NaN,NaN]]:[[Si,ar],[Qr,Su]]},M.geoCentroid=function(i){Ud=M0=ym=vm=vv=Dp=_m=Bd=io=R0=k0=0,Du(i,Ya);var u=io,h=R0,f=k0,g=u*u+h*h+f*f;return g<1e-12&&(u=Dp,h=_m,f=Bd,M0<In&&(u=ym,h=vm,f=vv),(g=u*u+h*h+f*f)<1e-12)?[NaN,NaN]:[mr(h,u)*Hr,Ui(f/Di(g))*Hr]},M.geoCircle=function(){var f,g,i=Ap([0,0]),u=Ap(90),h=Ap(6),v={point:function E(S,k){f.push(S=g(S,k)),S[0]*=Hr,S[1]*=Hr}};function I(){var S=i.apply(this,arguments),k=u.apply(this,arguments)*Cn,O=h.apply(this,arguments)*Cn;return f=[],g=N0(-S[0]*Cn,-S[1]*Cn,0).invert,P0(v,k,O,1),S={type:"Polygon",coordinates:[f]},f=g=null,S}return I.center=function(S){return arguments.length?(i="function"==typeof S?S:Ap([+S[0],+S[1]]),I):i},I.radius=function(S){return arguments.length?(u="function"==typeof S?S:Ap(+S),I):u},I.precision=function(S){return arguments.length?(h="function"==typeof S?S:Ap(+S),I):h},I},M.geoClipExtent=function(){var g,v,E,i=0,u=0,h=960,f=500;return E={stream:function(I){return g&&v===I?g:g=nE(i,u,h,f)(v=I)},extent:function(I){return arguments.length?(i=+I[0][0],u=+I[0][1],h=+I[1][0],f=+I[1][1],g=v=null,E):[[i,u],[h,f]]}}},M.geoContains=function(i,u){return(i&&Pp.hasOwnProperty(i.type)?Pp[i.type]:F0)(i,u)},M.geoDistance=Np,M.geoGraticule=H0,M.geoGraticule10=function Lp(){return H0()()},M.geoInterpolate=function(i,u){var h=i[0]*Cn,f=i[1]*Cn,g=u[0]*Cn,v=u[1]*Cn,E=dn(f),I=tn(f),S=dn(v),k=tn(v),O=E*dn(h),U=E*tn(h),N=S*dn(g),V=S*tn(g),H=2*Ui(Di(D0(v-f)+E*S*D0(g-h))),z=tn(H),Y=H?function(X){var he=tn(X*=H)/z,ee=tn(H-X)/z,De=ee*O+he*N,Oe=ee*U+he*V,Se=ee*I+he*k;return[mr(Oe,De)*Hr,mr(Se,Di(De*De+Oe*Oe))*Hr]}:function(){return[h*Hr,f*Hr]};return Y.distance=H,Y},M.geoLength=Tv,M.geoPath=function(i,u){var f,g,h=4.5;function v(E){return E&&("function"==typeof h&&g.pointRadius(+h.apply(this,arguments)),Du(E,f(g))),g.result()}return v.area=function(E){return Du(E,f(bs)),bs.result()},v.measure=function(E){return Du(E,f(Xa)),Xa.result()},v.bounds=function(E){return Du(E,f(Em)),Em.result()},v.centroid=function(E){return Du(E,f(Qa)),Qa.result()},v.projection=function(E){return arguments.length?(f=null==E?(i=null,Th):(i=E).stream,v):i},v.context=function(E){return arguments.length?(g=null==E?(u=null,new el):new xI(u=E),"function"!=typeof h&&g.pointRadius(h),v):u},v.pointRadius=function(E){return arguments.length?(h="function"==typeof E?E:(g.pointRadius(+E),+E),v):h},v.projection(i).context(u)},M.geoAlbers=vE,M.geoAlbersUsa=function(){var i,u,f,v,I,S,h=vE(),g=Am().rotate([154,0]).center([-2,58.5]).parallels([55,65]),E=Am().rotate([157,0]).center([-3,19.9]).parallels([8,18]),k={point:function(N,V){S=[N,V]}};function O(N){var V=N[0],H=N[1];return S=null,f.point(V,H),S||(v.point(V,H),S)||(I.point(V,H),S)}function U(){return i=u=null,O}return O.invert=function(N){var V=h.scale(),H=h.translate(),z=(N[0]-H[0])/V,Y=(N[1]-H[1])/V;return(Y>=.12&&Y<.234&&z>=-.425&&z<-.214?g:Y>=.166&&Y<.234&&z>=-.214&&z<-.115?E:h).invert(N)},O.stream=function(N){return i&&u===N?i:i=function Hs(i){var u=i.length;return{point:function(h,f){for(var g=-1;++g<u;)i[g].point(h,f)},sphere:function(){for(var h=-1;++h<u;)i[h].sphere()},lineStart:function(){for(var h=-1;++h<u;)i[h].lineStart()},lineEnd:function(){for(var h=-1;++h<u;)i[h].lineEnd()},polygonStart:function(){for(var h=-1;++h<u;)i[h].polygonStart()},polygonEnd:function(){for(var h=-1;++h<u;)i[h].polygonEnd()}}}([h.stream(u=N),g.stream(N),E.stream(N)])},O.precision=function(N){return arguments.length?(h.precision(N),g.precision(N),E.precision(N),U()):h.precision()},O.scale=function(N){return arguments.length?(h.scale(N),g.scale(.35*N),E.scale(N),O.translate(h.translate())):h.scale()},O.translate=function(N){if(!arguments.length)return h.translate();var V=h.scale(),H=+N[0],z=+N[1];return f=h.translate(N).clipExtent([[H-.455*V,z-.238*V],[H+.455*V,z+.238*V]]).stream(k),v=g.translate([H-.307*V,z+.201*V]).clipExtent([[H-.425*V+In,z+.12*V+In],[H-.214*V-In,z+.234*V-In]]).stream(k),I=E.translate([H-.205*V,z+.212*V]).clipExtent([[H-.214*V+In,z+.166*V+In],[H-.115*V-In,z+.234*V-In]]).stream(k),U()},O.fitExtent=function(N,V){return Sh(O,N,V)},O.fitSize=function(N,V){return Ah(O,N,V)},O.scale(1070)},M.geoAzimuthalEqualArea=function(){return xh(ew).scale(124.75).clipAngle(179.999)},M.geoAzimuthalEqualAreaRaw=ew,M.geoAzimuthalEquidistant=function(){return xh(Uv).scale(79.4188).clipAngle(179.999)},M.geoAzimuthalEquidistantRaw=Uv,M.geoConicConformal=function(){return J0(Ro).scale(109.5).parallels([30,30])},M.geoConicConformalRaw=Ro,M.geoConicEqualArea=Am,M.geoConicEqualAreaRaw=Fv,M.geoConicEquidistant=function(){return J0(Bv).scale(131.154).center([0,13.9389])},M.geoConicEquidistantRaw=Bv,M.geoEquirectangular=function(){return xh(Rh).scale(152.63)},M.geoEquirectangularRaw=Rh,M.geoGnomonic=function(){return xh(Vv).scale(144.049).clipAngle(60)},M.geoGnomonicRaw=Vv,M.geoIdentity=function(){var I,S,k,U,N,V,i=1,u=0,h=0,f=1,g=1,v=Th,E=null,O=Th;function H(){return U=N=null,V}return V={stream:function(z){return U&&N===z?U:U=v(O(N=z))},clipExtent:function(z){return arguments.length?(O=null==z?(E=I=S=k=null,Th):nE(E=+z[0][0],I=+z[0][1],S=+z[1][0],k=+z[1][1]),H()):null==E?null:[[E,I],[S,k]]},scale:function(z){return arguments.length?(v=Mm((i=+z)*f,i*g,u,h),H()):i},translate:function(z){return arguments.length?(v=Mm(i*f,i*g,u=+z[0],h=+z[1]),H()):[u,h]},reflectX:function(z){return arguments.length?(v=Mm(i*(f=z?-1:1),i*g,u,h),H()):f<0},reflectY:function(z){return arguments.length?(v=Mm(i*f,i*(g=z?-1:1),u,h),H()):g<0},fitExtent:function(z,Y){return Sh(V,z,Y)},fitSize:function(z,Y){return Ah(V,z,Y)}}},M.geoProjection=xh,M.geoProjectionMutator=X0,M.geoMercator=function(){return wE($p).scale(961/es)},M.geoMercatorRaw=$p,M.geoOrthographic=function(){return xh(rw).scale(249.5).clipAngle(90+In)},M.geoOrthographicRaw=rw,M.geoStereographic=function(){return xh(Kd).scale(250).clipAngle(142)},M.geoStereographicRaw=Kd,M.geoTransverseMercator=function(){var i=wE(Gp),u=i.center,h=i.rotate;return i.center=function(f){return arguments.length?u([-f[1],f[0]]):[(f=u())[1],-f[0]]},i.rotate=function(f){return arguments.length?h([f[0],f[1],f.length>2?f[2]+90:90]):[(f=h())[0],f[1],f[2]-90]},h([0,0,90]).scale(159.155)},M.geoTransverseMercatorRaw=Gp,M.geoRotation=bv,M.geoStream=Du,M.geoTransform=function(i){return{stream:ac(i)}},M.cluster=function(){var i=jv,u=1,h=1,f=!1;function g(v){var E,I=0;v.eachAfter(function(N){var V=N.children;V?(N.x=function LI(i){return i.reduce(EE,0)/i.length}(V),N.y=function FI(i){return 1+i.reduce(IE,0)}(V)):(N.x=E?I+=i(N,E):0,N.y=0,E=N)});var S=function ow(i){for(var u;u=i.children;)i=u[0];return i}(v),k=function CE(i){for(var u;u=i.children;)i=u[u.length-1];return i}(v),O=S.x-i(S,k)/2,U=k.x+i(k,S)/2;return v.eachAfter(f?function(N){N.x=(N.x-v.x)*u,N.y=(v.y-N.y)*h}:function(N){N.x=(N.x-O)/(U-O)*u,N.y=(1-(v.y?N.y/v.y:1))*h})}return g.separation=function(v){return arguments.length?(i=v,g):i},g.size=function(v){return arguments.length?(f=!1,u=+v[0],h=+v[1],g):f?null:[u,h]},g.nodeSize=function(v){return arguments.length?(f=!0,u=+v[0],h=+v[1],g):f?[u,h]:null},g},M.hierarchy=qp,M.pack=function(){var i=null,u=1,h=1,f=Qd;function g(v){return v.x=u/2,v.y=h/2,i?v.eachBefore(qv(i)).eachAfter(Om(f,.5)).eachBefore(Wv(1)):v.eachBefore(qv(pw)).eachAfter(Om(Qd,1)).eachAfter(Om(f,v.r/Math.min(u,h))).eachBefore(Wv(Math.min(u,h)/(2*v.r))),v}return g.radius=function(v){return arguments.length?(i=PE(v),g):i},g.size=function(v){return arguments.length?(u=+v[0],h=+v[1],g):[u,h]},g.padding=function(v){return arguments.length?(f="function"==typeof v?v:Xd(+v),g):f},g},M.packSiblings=function(i){return Yd(i),i},M.packEnclose=lw,M.partition=function(){var i=1,u=1,h=0,f=!1;function g(E){var I=E.height+1;return E.x0=E.y0=h,E.x1=i,E.y1=u/I,E.eachBefore(function v(E,I){return function(S){S.children&&Lm(S,S.x0,E*(S.depth+1)/I,S.x1,E*(S.depth+2)/I);var k=S.x0,O=S.y0,U=S.x1-h,N=S.y1-h;U<k&&(k=U=(k+U)/2),N<O&&(O=N=(O+N)/2),S.x0=k,S.y0=O,S.x1=U,S.y1=N}}(u,I)),f&&E.eachBefore(Kv),E}return g.round=function(E){return arguments.length?(f=!!E,g):f},g.size=function(E){return arguments.length?(i=+E[0],u=+E[1],g):[i,u]},g.padding=function(E){return arguments.length?(h=+E,g):h},g},M.stratify=function(){var i=GC,u=FE;function h(f){var g,v,I,S,k,U,N,E=f.length,O=new Array(E),V={};for(v=0;v<E;++v)k=O[v]=new Zp(g=f[v]),null!=(U=i(g,v,f))&&(U+="")&&(V[N="$"+(k.id=U)]=N in V?Zv:k);for(v=0;v<E;++v)if(k=O[v],null!=(U=u(f[v],v,f))&&(U+="")){if(!(S=V["$"+U]))throw new Error("missing: "+U);if(S===Zv)throw new Error("ambiguous: "+U);S.children?S.children.push(k):S.children=[k],k.parent=S}else{if(I)throw new Error("multiple roots");I=k}if(!I)throw new Error("no root");if(I.parent=kT,I.eachBefore(function(H){H.depth=H.parent.depth+1,--E}).eachBefore(xE),I.parent=null,E>0)throw new Error("cycle");return I}return h.id=function(f){return arguments.length?(i=Qp(f),h):i},h.parentId=function(f){return arguments.length?(u=Qp(f),h):u},h},M.tree=function(){var i=Is,u=1,h=1,f=null;function g(k){var O=function BE(i){for(var h,g,v,E,I,u=new Qv(i,0),f=[u];h=f.pop();)if(v=h._.children)for(h.children=new Array(I=v.length),E=I-1;E>=0;--E)f.push(g=h.children[E]=new Qv(v[E],E)),g.parent=h;return(u.parent=new Qv(null,0)).children=[u],u}(k);if(O.eachAfter(v),O.parent.m=-O.z,O.eachBefore(E),f)k.eachBefore(S);else{var U=k,N=k,V=k;k.eachBefore(function(he){he.x<U.x&&(U=he),he.x>N.x&&(N=he),he.depth>V.depth&&(V=he)});var H=U===N?1:i(U,N)/2,z=H-U.x,Y=u/(N.x+H+z),X=h/(V.depth||1);k.eachBefore(function(he){he.x=(he.x+z)*Y,he.y=he.depth*X})}return k}function v(k){var O=k.children,U=k.parent.children,N=k.i?U[k.i-1]:null;if(O){!function VI(i){for(var v,u=0,h=0,f=i.children,g=f.length;--g>=0;)(v=f[g]).z+=u,v.m+=u,u+=v.s+(h+=v.c)}(k);var V=(O[0].z+O[O.length-1].z)/2;N?(k.z=N.z+i(k._,N._),k.m=k.z-V):k.z=V}else N&&(k.z=N.z+i(k._,N._));k.parent.A=function I(k,O,U){if(O){for(var De,N=k,V=k,H=O,z=N.parent.children[0],Y=N.m,X=V.m,he=H.m,ee=z.m;H=Um(H),N=Fm(N),H&&N;)z=Fm(z),(V=Um(V)).a=k,(De=H.z+he-N.z-Y+i(H._,N._))>0&&(Yv(mw(H,k,U),k,De),Y+=De,X+=De),he+=H.m,Y+=N.m,ee+=z.m,X+=V.m;H&&!Um(V)&&(V.t=H,V.m+=he-X),N&&!Fm(z)&&(z.t=N,z.m+=Y-ee,U=k)}return U}(k,N,k.parent.A||U[0])}function E(k){k._.x=k.z+k.parent.m,k.m+=k.parent.m}function S(k){k.x*=u,k.y=k.depth*h}return g.separation=function(k){return arguments.length?(i=k,g):i},g.size=function(k){return arguments.length?(f=!1,u=+k[0],h=+k[1],g):f?null:[u,h]},g.nodeSize=function(k){return arguments.length?(f=!0,u=+k[0],h=+k[1],g):f?[u,h]:null},g},M.treemap=function(){var i=jI,u=!1,h=1,f=1,g=[0],v=Qd,E=Qd,I=Qd,S=Qd,k=Qd;function O(N){return N.x0=N.y0=0,N.x1=h,N.y1=f,N.eachBefore(U),g=[0],u&&N.eachBefore(Kv),N}function U(N){var V=g[N.depth],H=N.x0+V,z=N.y0+V,Y=N.x1-V,X=N.y1-V;Y<H&&(H=Y=(H+Y)/2),X<z&&(z=X=(z+X)/2),N.x0=H,N.y0=z,N.x1=Y,N.y1=X,N.children&&(V=g[N.depth+1]=v(N)/2,H+=k(N)-V,z+=E(N)-V,(Y-=I(N)-V)<H&&(H=Y=(H+Y)/2),(X-=S(N)-V)<z&&(z=X=(z+X)/2),i(N,H,z,Y,X))}return O.round=function(N){return arguments.length?(u=!!N,O):u},O.size=function(N){return arguments.length?(h=+N[0],f=+N[1],O):[h,f]},O.tile=function(N){return arguments.length?(i=Qp(N),O):i},O.padding=function(N){return arguments.length?O.paddingInner(N).paddingOuter(N):O.paddingInner()},O.paddingInner=function(N){return arguments.length?(v="function"==typeof N?N:Xd(+N),O):v},O.paddingOuter=function(N){return arguments.length?O.paddingTop(N).paddingRight(N).paddingBottom(N).paddingLeft(N):O.paddingTop()},O.paddingTop=function(N){return arguments.length?(E="function"==typeof N?N:Xd(+N),O):E},O.paddingRight=function(N){return arguments.length?(I="function"==typeof N?N:Xd(+N),O):I},O.paddingBottom=function(N){return arguments.length?(S="function"==typeof N?N:Xd(+N),O):S},O.paddingLeft=function(N){return arguments.length?(k="function"==typeof N?N:Xd(+N),O):k},O},M.treemapBinary=function(i,u,h,f,g){var E,S,v=i.children,I=v.length,k=new Array(I+1);for(k[0]=S=E=0;E<I;++E)k[E+1]=S+=v[E].value;!function O(U,N,V,H,z,Y,X){if(U>=N-1){var he=v[U];return he.x0=H,he.y0=z,he.x1=Y,void(he.y1=X)}for(var ee=k[U],De=V/2+ee,Oe=U+1,Se=N-1;Oe<Se;){var _e=Oe+Se>>>1;k[_e]<De?Oe=_e+1:Se=_e}De-k[Oe-1]<k[Oe]-De&&U+1<Oe&&--Oe;var qe=k[Oe]-ee,$e=V-qe;if(Y-H>X-z){var St=(H*$e+Y*qe)/V;O(U,Oe,qe,H,z,St,X),O(Oe,N,$e,St,z,Y,X)}else{var mt=(z*$e+X*qe)/V;O(U,Oe,qe,H,z,Y,mt),O(Oe,N,$e,H,mt,Y,X)}}(0,I,i.value,u,h,f,g)},M.treemapDice=Lm,M.treemapSlice=Xv,M.treemapSliceDice=function(i,u,h,f,g){(1&i.depth?Xv:Lm)(i,u,h,f,g)},M.treemapSquarify=jI,M.treemapResquarify=HI,M.interpolate=Lr,M.interpolateArray=jg,M.interpolateBasis=cd,M.interpolateBasisClosed=Vg,M.interpolateDate=oa,M.interpolateNumber=Zi,M.interpolateObject=$g,M.interpolateRound=Pc,M.interpolateString=eo,M.interpolateTransformCss=dd,M.interpolateTransformSvg=ki,M.interpolateZoom=Oa,M.interpolateRgb=nh,M.interpolateRgbBasis=kc,M.interpolateRgbBasisClosed=rh,M.interpolateHsl=vu,M.interpolateHslLong=Lc,M.interpolateLab=function zf(i,u){var h=di((i=Sc(i)).l,(u=Sc(u)).l),f=di(i.a,u.a),g=di(i.b,u.b),v=di(i.opacity,u.opacity);return function(E){return i.l=h(E),i.a=f(E),i.b=g(E),i.opacity=v(E),i+""}},M.interpolateHcl=La,M.interpolateHclLong=Wu,M.interpolateCubehelix=fd,M.interpolateCubehelixLong=Vo,M.quantize=function(i,u){for(var h=new Array(u),f=0;f<u;++f)h[f]=i(f/(u-1));return h},M.path=Wa,M.polygonArea=function(i){for(var f,u=-1,h=i.length,g=i[h-1],v=0;++u<h;)v+=(f=g)[1]*(g=i[u])[0]-f[0]*g[1];return v/2},M.polygonCentroid=function(i){for(var v,I,u=-1,h=i.length,f=0,g=0,E=i[h-1],S=0;++u<h;)S+=I=(v=E)[0]*(E=i[u])[1]-E[0]*v[1],f+=(v[0]+E[0])*I,g+=(v[1]+E[1])*I;return[f/(S*=3),g/S]},M.polygonHull=function(i){if((h=i.length)<3)return null;var u,h,f=new Array(h),g=new Array(h);for(u=0;u<h;++u)f[u]=[+i[u][0],+i[u][1],u];for(f.sort(tl),u=0;u<h;++u)g[u]=[f[u][0],-f[u][1]];var v=Ja(f),E=Ja(g),I=E[0]===v[0],S=E[E.length-1]===v[v.length-1],k=[];for(u=v.length-1;u>=0;--u)k.push(i[f[v[u]][2]]);for(u=+I;u<E.length-S;++u)k.push(i[f[E[u]][2]]);return k},M.polygonContains=function(i,u){for(var S,k,h=i.length,f=i[h-1],g=u[0],v=u[1],E=f[0],I=f[1],O=!1,U=0;U<h;++U)S=(f=i[U])[0],(k=f[1])>v!=I>v&&g<(E-S)*(v-k)/(I-k)+S&&(O=!O),E=S,I=k;return O},M.polygonLength=function(i){for(var g,v,u=-1,h=i.length,f=i[h-1],E=f[0],I=f[1],S=0;++u<h;)g=E,v=I,g-=E=(f=i[u])[0],v-=I=f[1],S+=Math.sqrt(g*g+v*v);return S},M.quadtree=am,M.queue=e_,M.randomUniform=qE,M.randomNormal=Vm,M.randomLogNormal=KI,M.randomBates=n_,M.randomIrwinHall=t_,M.randomExponential=WE,M.request=jm,M.html=en,M.json=r_,M.text=Rn,M.xml=$m,M.csv=YI,M.tsv=_w,M.scaleBand=Ts,M.scalePoint=function QI(){return kl(Ts().paddingInner(1))},M.scaleIdentity=function Gm(){var i=[0,1];function u(h){return+h}return u.invert=u,u.domain=u.range=function(h){return arguments.length?(i=ww.call(h,Ew),u):i.slice()},u.copy=function(){return Gm().domain(i)},tf(u)},M.scaleLinear=function s_(){var i=ef(Cw,Zi);return i.copy=function(){return Ds(i,s_())},tf(i)},M.scaleLog=function Ph(){var i=ef(Sw,Aw).domain([1,10]),u=i.domain,h=10,f=QE(10),g=Nh(10);function v(){return f=QE(h),g=Nh(h),u()[0]<0&&(f=nf(f),g=nf(g)),i}return i.base=function(E){return arguments.length?(h=+E,v()):h},i.domain=function(E){return arguments.length?(u(E),v()):u()},i.ticks=function(E){var O,I=u(),S=I[0],k=I[I.length-1];(O=k<S)&&(U=S,S=k,k=U);var V,H,z,U=f(S),N=f(k),Y=null==E?10:+E,X=[];if(!(h%1)&&N-U<Y){if(U=Math.round(U)-1,N=Math.round(N)+1,S>0){for(;U<N;++U)for(H=1,V=g(U);H<h;++H)if(!((z=V*H)<S)){if(z>k)break;X.push(z)}}else for(;U<N;++U)for(H=h-1,V=g(U);H>=1;--H)if(!((z=V*H)<S)){if(z>k)break;X.push(z)}}else X=vt(U,N,Math.min(N-U,Y)).map(g);return O?X.reverse():X},i.tickFormat=function(E,I){if(null==I&&(I=10===h?".0e":","),"function"!=typeof I&&(I=M.format(I)),E===1/0)return I;null==E&&(E=10);var S=Math.max(1,h*E/i.ticks().length);return function(k){var O=k/g(Math.round(f(k)));return O*h<h-.5&&(O*=h),O<=S?I(k):""}},i.nice=function(){return u(o_(u(),{floor:function(E){return g(Math.floor(f(E)))},ceil:function(E){return g(Math.ceil(f(E)))}}))},i.copy=function(){return Ds(i,Ph().base(h))},i},M.scaleOrdinal=Xp,M.scaleImplicit=Cs,M.scalePow=Jp,M.scaleSqrt=function WC(){return Jp().exponent(.5)},M.scaleQuantile=function u_(){var i=[],u=[],h=[];function f(){var v=0,E=Math.max(1,u.length);for(h=new Array(E-1);++v<E;)h[v-1]=Te(i,v/E);return g}function g(v){if(!isNaN(v=+v))return u[Be(h,v)]}return g.invertExtent=function(v){var E=u.indexOf(v);return E<0?[NaN,NaN]:[E>0?h[E-1]:i[0],E<h.length?h[E]:i[i.length-1]]},g.domain=function(v){if(!arguments.length)return i.slice();i=[];for(var S,E=0,I=v.length;E<I;++E)null!=(S=v[E])&&!isNaN(S=+S)&&i.push(S);return i.sort(be),f()},g.range=function(v){return arguments.length?(u=kh.call(v),f()):u.slice()},g.quantiles=function(){return h.slice()},g.copy=function(){return u_().domain(i).range(u)},g},M.scaleQuantize=function eg(){var i=0,u=1,h=1,f=[.5],g=[0,1];function v(I){if(I<=I)return g[Be(f,I,0,h)]}function E(){var I=-1;for(f=new Array(h);++I<h;)f[I]=((I+1)*u-(I-h)*i)/(h+1);return v}return v.domain=function(I){return arguments.length?(i=+I[0],u=+I[1],E()):[i,u]},v.range=function(I){return arguments.length?(h=(g=kh.call(I)).length-1,E()):g.slice()},v.invertExtent=function(I){var S=g.indexOf(I);return S<0?[NaN,NaN]:S<1?[i,f[0]]:S>=h?[f[h-1],u]:[f[S-1],f[S]]},v.copy=function(){return eg().domain([i,u]).range(g)},tf(v)},M.scaleThreshold=function xw(){var i=[.5],u=[0,1],h=1;function f(g){if(g<=g)return u[Be(i,g,0,h)]}return f.domain=function(g){return arguments.length?(i=kh.call(g),h=Math.min(i.length,u.length-1),f):i.slice()},f.range=function(g){return arguments.length?(u=kh.call(g),h=Math.min(i.length,u.length-1),f):u.slice()},f.invertExtent=function(g){var v=u.indexOf(g);return[i[v-1],i[v]]},f.copy=function(){return xw().domain(i).range(u)},f},M.scaleTime=function(){return uy(Lh,ig,lf,cf,uf,Mw,tg,sf,M.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},M.scaleUtc=function(){return uy(ff,Bh,Xm,Qm,Ow,h_,tg,sf,M.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},M.schemeCategory10=v1,M.schemeCategory20b=_1,M.schemeCategory20c=iC,M.schemeCategory20=ZC,M.interpolateCubehelixDefault=cy,M.interpolateRainbow=function(i){(i<0||i>1)&&(i-=Math.floor(i));var u=Math.abs(i-.5);return Hh.h=360*i-100,Hh.s=1.5-1.5*u,Hh.l=.8-.9*u,Hh+""},M.interpolateWarm=A_,M.interpolateCool=ly,M.interpolateViridis=hy,M.interpolateMagma=sC,M.interpolateInferno=rs,M.interpolatePlasma=b1,M.scaleSequential=function E1(i){var u=0,h=1,f=!1;function g(v){var E=(v-u)/(h-u);return i(f?Math.max(0,Math.min(1,E)):E)}return g.domain=function(v){return arguments.length?(u=+v[0],h=+v[1],g):[u,h]},g.clamp=function(v){return arguments.length?(f=!!v,g):f},g.interpolator=function(v){return arguments.length?(i=v,g):i},g.copy=function(){return E1(i).domain([u,h]).clamp(f)},tf(g)},M.creator=sn,M.local=se,M.matcher=It,M.mouse=kr,M.namespace=Ps,M.namespaces=Un,M.select=vs,M.selectAll=function(i){return"string"==typeof i?new Ri([document.querySelectorAll(i)],[document.documentElement]):new Ri([null==i?[]:i],Ls)},M.selection=au,M.selector=Nr,M.selectorAll=Uo,M.style=po,M.touch=Ic,M.touches=function(i,u){null==u&&(u=xa().touches);for(var h=0,f=u?u.length:0,g=new Array(f);h<f;++h)g[h]=Vr(i,u[h]);return g},M.window=fs,M.customEvent=Qo,M.arc=function(){var i=Xw,u=M_,h=Jn(0),f=null,g=gg,v=Jw,E=mg,I=null;function S(){var k,O,U=+i.apply(this,arguments),N=+u.apply(this,arguments),V=g.apply(this,arguments)-x_,H=v.apply(this,arguments)-x_,z=I1(H-V),Y=H>V;if(I||(I=k=Wa()),N<U&&(O=N,N=U,U=O),N>Xr)if(z>nl-Xr)I.moveTo(N*Ru(V),N*_a(V)),I.arc(0,0,N,V,H,!Y),U>Xr&&(I.moveTo(U*Ru(H),U*_a(H)),I.arc(0,0,U,H,V,Y));else{var st,Vt,X=V,he=H,ee=V,De=H,Oe=z,Se=z,_e=E.apply(this,arguments)/2,qe=_e>Xr&&(f?+f.apply(this,arguments):Gh(U*U+N*N)),$e=dy(I1(N-U)/2,+h.apply(this,arguments)),St=$e,mt=$e;if(qe>Xr){var pt=Qw(qe/U*_a(_e)),le=Qw(qe/N*_a(_e));(Oe-=2*pt)>Xr?(ee+=pt*=Y?1:-1,De-=pt):(Oe=0,ee=De=(V+H)/2),(Se-=2*le)>Xr?(X+=le*=Y?1:-1,he-=le):(Se=0,X=he=(V+H)/2)}var it=N*Ru(X),xt=N*_a(X),$t=U*Ru(De),Yt=U*_a(De);if($e>Xr){var jn=N*Ru(he),kn=N*_a(he),ur=U*Ru(ee),Qn=U*_a(ee);if(z<Fl){var zr=Oe>Xr?rl(it,xt,ur,Qn,jn,kn,$t,Yt):[$t,Yt],Br=it-zr[0],$n=xt-zr[1],Ft=jn-zr[0],An=kn-zr[1],Nn=1/_a(fy((Br*Ft+$n*An)/(Gh(Br*Br+$n*$n)*Gh(Ft*Ft+An*An)))/2),an=Gh(zr[0]*zr[0]+zr[1]*zr[1]);St=dy($e,(U-an)/(Nn-1)),mt=dy($e,(N-an)/(Nn+1))}}Se>Xr?mt>Xr?(st=py(ur,Qn,it,xt,N,mt,Y),Vt=py(jn,kn,$t,Yt,N,mt,Y),I.moveTo(st.cx+st.x01,st.cy+st.y01),mt<$e?I.arc(st.cx,st.cy,mt,No(st.y01,st.x01),No(Vt.y01,Vt.x01),!Y):(I.arc(st.cx,st.cy,mt,No(st.y01,st.x01),No(st.y11,st.x11),!Y),I.arc(0,0,N,No(st.cy+st.y11,st.cx+st.x11),No(Vt.cy+Vt.y11,Vt.cx+Vt.x11),!Y),I.arc(Vt.cx,Vt.cy,mt,No(Vt.y11,Vt.x11),No(Vt.y01,Vt.x01),!Y))):(I.moveTo(it,xt),I.arc(0,0,N,X,he,!Y)):I.moveTo(it,xt),U>Xr&&Oe>Xr?St>Xr?(st=py($t,Yt,jn,kn,U,-St,Y),Vt=py(it,xt,ur,Qn,U,-St,Y),I.lineTo(st.cx+st.x01,st.cy+st.y01),St<$e?I.arc(st.cx,st.cy,St,No(st.y01,st.x01),No(Vt.y01,Vt.x01),!Y):(I.arc(st.cx,st.cy,St,No(st.y01,st.x01),No(st.y11,st.x11),!Y),I.arc(0,0,U,No(st.cy+st.y11,st.cx+st.x11),No(Vt.cy+Vt.y11,Vt.cx+Vt.x11),Y),I.arc(Vt.cx,Vt.cy,St,No(Vt.y11,Vt.x11),No(Vt.y01,Vt.x01),!Y))):I.arc(0,0,U,De,ee,Y):I.lineTo($t,Yt)}else I.moveTo(0,0);if(I.closePath(),k)return I=null,k+""||null}return S.centroid=function(){var k=(+i.apply(this,arguments)+ +u.apply(this,arguments))/2,O=(+g.apply(this,arguments)+ +v.apply(this,arguments))/2-Fl/2;return[Ru(O)*k,_a(O)*k]},S.innerRadius=function(k){return arguments.length?(i="function"==typeof k?k:Jn(+k),S):i},S.outerRadius=function(k){return arguments.length?(u="function"==typeof k?k:Jn(+k),S):u},S.cornerRadius=function(k){return arguments.length?(h="function"==typeof k?k:Jn(+k),S):h},S.padRadius=function(k){return arguments.length?(f=null==k?null:"function"==typeof k?k:Jn(+k),S):f},S.startAngle=function(k){return arguments.length?(g="function"==typeof k?k:Jn(+k),S):g},S.endAngle=function(k){return arguments.length?(v="function"==typeof k?k:Jn(+k),S):v},S.padAngle=function(k){return arguments.length?(E="function"==typeof k?k:Jn(+k),S):E},S.context=function(k){return arguments.length?(I=null==k?null:k,S):I},S},M.area=qh,M.line=If,M.pie=function(){var i=T1,u=C1,h=null,f=Jn(0),g=Jn(nl),v=Jn(0);function E(I){var S,O,U,X,De,k=I.length,N=0,V=new Array(k),H=new Array(k),z=+f.apply(this,arguments),Y=Math.min(nl,Math.max(-nl,g.apply(this,arguments)-z)),he=Math.min(Math.abs(Y)/k,v.apply(this,arguments)),ee=he*(Y<0?-1:1);for(S=0;S<k;++S)(De=H[V[S]=S]=+i(I[S],S,I))>0&&(N+=De);for(null!=u?V.sort(function(Oe,Se){return u(H[Oe],H[Se])}):null!=h&&V.sort(function(Oe,Se){return h(I[Oe],I[Se])}),S=0,U=N?(Y-k*ee)/N:0;S<k;++S,z=X)H[O=V[S]]={data:I[O],index:S,value:De=H[O],startAngle:z,endAngle:X=z+(De>0?De*U:0)+ee,padAngle:he};return H}return E.value=function(I){return arguments.length?(i="function"==typeof I?I:Jn(+I),E):i},E.sortValues=function(I){return arguments.length?(u=I,h=null,E):u},E.sort=function(I){return arguments.length?(h=I,u=null,E):h},E.startAngle=function(I){return arguments.length?(f="function"==typeof I?I:Jn(+I),E):f},E.endAngle=function(I){return arguments.length?(g="function"==typeof I?I:Jn(+I),E):g},E.padAngle=function(I){return arguments.length?(v="function"==typeof I?I:Jn(+I),E):v},E},M.radialArea=function(){var i=qh().curve(R_),u=i.curve,h=i.lineX0,f=i.lineX1,g=i.lineY0,v=i.lineY1;return i.angle=i.x,delete i.x,i.startAngle=i.x0,delete i.x0,i.endAngle=i.x1,delete i.x1,i.radius=i.y,delete i.y,i.innerRadius=i.y0,delete i.y0,i.outerRadius=i.y1,delete i.y1,i.lineStartAngle=function(){return yg(h())},delete i.lineX0,i.lineEndAngle=function(){return yg(f())},delete i.lineX1,i.lineInnerRadius=function(){return yg(g())},delete i.lineY0,i.lineOuterRadius=function(){return yg(v())},delete i.lineY1,i.curve=function(E){return arguments.length?u(_y(E)):u()._curve},i},M.radialLine=function(){return yg(If().curve(R_))},M.linkHorizontal=function D1(){return wy(tb)},M.linkVertical=function S1(){return wy(oC)},M.linkRadial=function _g(){var i=wy(aC);return i.angle=i.x,delete i.x,i.radius=i.y,delete i.y,i},M.symbol=function(){var i=Jn(N_),u=Jn(64),h=null;function f(){var g;if(h||(h=g=Wa()),i.apply(this,arguments).draw(h,+u.apply(this,arguments)),g)return h=null,g+""||null}return f.type=function(g){return arguments.length?(i="function"==typeof g?g:Jn(g),f):i},f.size=function(g){return arguments.length?(u="function"==typeof g?g:Jn(+g),f):u},f.context=function(g){return arguments.length?(h=null==g?null:g,f):h},f},M.symbols=A1,M.symbolCircle=N_,M.symbolCross=P_,M.symbolDiamond=Ul,M.symbolSquare=Gs,M.symbolStar=wg,M.symbolTriangle=Mn,M.symbolWye=Vi,M.curveBasisClosed=function(i){return new F_(i)},M.curveBasisOpen=function(i){return new rb(i)},M.curveBasis=function(i){return new bg(i)},M.curveBundle=qn,M.curveCardinalClosed=Af,M.curveCardinalOpen=QC,M.curveCardinal=Jr,M.curveCatmullRomClosed=xf,M.curveCatmullRomOpen=Ig,M.curveCatmullRom=by,M.curveLinearClosed=function(i){return new ib(i)},M.curveLinear=gy,M.curveMonotoneX=function $_(i){return new Pu(i)},M.curveMonotoneY=function sl(i){return new Cy(i)},M.curveNatural=function(i){return new sb(i)},M.curveStep=function(i){return new ob(i,.5)},M.curveStepAfter=function k1(i){return new ob(i,1)},M.curveStepBefore=function uC(i){return new ob(i,0)},M.stack=function(){var i=Jn([]),u=Sy,h=Dy,f=ao;function g(v){var I,U,E=i.apply(this,arguments),S=v.length,k=E.length,O=new Array(k);for(I=0;I<k;++I){for(var z,N=E[I],V=O[I]=new Array(S),H=0;H<S;++H)V[H]=z=[0,+f(v[H],N,H,v)],z.data=v[H];V.key=N}for(I=0,U=u(O);I<k;++I)O[U[I]].index=I;return h(O,U),O}return g.keys=function(v){return arguments.length?(i="function"==typeof v?v:Jn(vg.call(v)),g):i},g.value=function(v){return arguments.length?(f="function"==typeof v?v:Jn(+v),g):f},g.order=function(v){return arguments.length?(u=null==v?Sy:"function"==typeof v?v:Jn(vg.call(v)),g):u},g.offset=function(v){return arguments.length?(h=null==v?Dy:v,g):h},g},M.stackOffsetExpand=function(i,u){if((f=i.length)>0){for(var h,f,E,g=0,v=i[0].length;g<v;++g){for(E=h=0;h<f;++h)E+=i[h][g][1]||0;if(E)for(h=0;h<f;++h)i[h][g][1]/=E}Dy(i,u)}},M.stackOffsetDiverging=function(i,u){if((S=i.length)>1)for(var h,g,v,E,I,S,f=0,k=i[u[0]].length;f<k;++f)for(E=I=0,h=0;h<S;++h)(v=(g=i[u[h]][f])[1]-g[0])>=0?(g[0]=E,g[1]=E+=v):v<0?(g[1]=I,g[0]=I+=v):g[0]=E},M.stackOffsetNone=Dy,M.stackOffsetSilhouette=function(i,u){if((g=i.length)>0){for(var g,h=0,f=i[u[0]],v=f.length;h<v;++h){for(var E=0,I=0;E<g;++E)I+=i[E][h][1]||0;f[h][1]+=f[h][0]=-I/2}Dy(i,u)}},M.stackOffsetWiggle=function(i,u){if((E=i.length)>0&&(v=(g=i[u[0]]).length)>0){for(var g,v,E,h=0,f=1;f<v;++f){for(var I=0,S=0,k=0;I<E;++I){for(var O=i[u[I]],U=O[f][1]||0,V=(U-(O[f-1][1]||0))/2,H=0;H<I;++H){var z=i[u[H]];V+=(z[f][1]||0)-(z[f-1][1]||0)}S+=U,k+=V*U}g[f-1][1]+=g[f-1][0]=h,S&&(h-=k/S)}g[f-1][1]+=g[f-1][0]=h,Dy(i,u)}},M.stackOrderAscending=uo,M.stackOrderDescending=function(i){return uo(i).reverse()},M.stackOrderInsideOut=function(i){var h,f,u=i.length,g=i.map(vr),v=Sy(i).sort(function(O,U){return g[U]-g[O]}),E=0,I=0,S=[],k=[];for(h=0;h<u;++h)f=v[h],E<I?(E+=g[f],S.push(f)):(I+=g[f],k.push(f));return k.reverse().concat(S)},M.stackOrderNone=Sy,M.stackOrderReverse=function(i){return Sy(i).reverse()},M.timeInterval=Ss,M.timeMillisecond=sf,M.timeMilliseconds=af,M.utcMillisecond=sf,M.utcMilliseconds=af,M.timeSecond=tg,M.timeSeconds=ng,M.utcSecond=tg,M.utcSeconds=ng,M.timeMinute=Mw,M.timeMinutes=XE,M.timeHour=uf,M.timeHours=Zm,M.timeDay=cf,M.timeDays=Rw,M.timeWeek=lf,M.timeWeeks=c_,M.timeSunday=lf,M.timeSundays=c_,M.timeMonday=Oh,M.timeMondays=e1,M.timeTuesday=kw,M.timeTuesdays=Pw,M.timeWednesday=JE,M.timeWednesdays=hf,M.timeThursday=Nw,M.timeThursdays=df,M.timeFriday=rg,M.timeFridays=zs,M.timeSaturday=Ym,M.timeSaturdays=oo,M.timeMonth=ig,M.timeMonths=l_,M.timeYear=Lh,M.timeYears=t1,M.utcMinute=h_,M.utcMinutes=n1,M.utcHour=Ow,M.utcHours=Lw,M.utcDay=Qm,M.utcDays=KC,M.utcWeek=Xm,M.utcWeeks=og,M.utcSunday=Xm,M.utcSundays=og,M.utcMonday=d_,M.utcMondays=r1,M.utcTuesday=Uh,M.utcTuesdays=i1,M.utcWednesday=f_,M.utcWednesdays=s1,M.utcThursday=p_,M.utcThursdays=m_,M.utcFriday=g_,M.utcFridays=o1,M.utcSaturday=sg,M.utcSaturdays=XI,M.utcMonth=Bh,M.utcMonths=ag,M.utcYear=ff,M.utcYears=Vh,M.timeFormatDefaultLocale=g1,M.timeFormatLocale=gf,M.isoFormat=_f,M.isoParse=fg,M.now=Bc,M.timer=Qi,M.timerFlush=pd,M.timeout=Kr,M.interval=function(i,u,h){var f=new ua,g=u;return null==u?(f.restart(i,u,h),f):(u=+u,h=null==h?Bc():+h,f.restart(function v(E){E+=g,f.restart(v,g+=u,h),i(E)},u,h),f)},M.transition=Xf,M.active=function(i,u){var f,g,h=i.__transition;if(h)for(g in u=null==u?null:u+"",h)if((f=h[g]).state>1&&f.name===u)return new Ha([[i]],up,u,+g);return null},M.interrupt=Zr,M.voronoi=function(){var i=As,u=hC,h=null;function f(g){return new Ny(g.map(function(v,E){var I=[Math.round(i(v,E,g)/Ar)*Ar,Math.round(u(v,E,g)/Ar)*Ar];return I.index=E,I.data=v,I}),h)}return f.polygons=function(g){return f(g).polygons()},f.links=function(g){return f(g).links()},f.triangles=function(g){return f(g).triangles()},f.x=function(g){return arguments.length?(i="function"==typeof g?g:lC(+g),f):i},f.y=function(g){return arguments.length?(u="function"==typeof g?g:lC(+g),f):u},f.extent=function(g){return arguments.length?(h=null==g?null:[[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]],f):h&&[[h[0][0],h[0][1]],[h[1][0],h[1][1]]]},f.size=function(g){return arguments.length?(h=null==g?null:[[0,0],[+g[0],+g[1]]],f):h&&[h[1][0]-h[0][0],h[1][1]-h[0][1]]},f},M.zoom=function(){var N,V,i=F1,u=hb,h=0,f=1/0,g=-f,v=f,E=g,I=v,S=250,k=Oa,O=[],U=ls("start","zoom","end"),H=500,Y=0;function X(le){le.on("wheel.zoom",$e).on("mousedown.zoom",St).on("dblclick.zoom",mt).on("touchstart.zoom",st).on("touchmove.zoom",Vt).on("touchend.zoom touchcancel.zoom",pt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",U1)}function he(le,it){return(it=Math.max(h,Math.min(f,it)))===le.k?le:new fc(it,le.x,le.y)}function ee(le,it,xt){var $t=it[0]-xt[0]*le.k,Yt=it[1]-xt[1]*le.k;return $t===le.x&&Yt===le.y?le:new fc(le.k,$t,Yt)}function De(le,it){var xt=le.invertX(it[0][0])-g,$t=le.invertX(it[1][0])-v,Yt=le.invertY(it[0][1])-E,jn=le.invertY(it[1][1])-I;return le.translate($t>xt?(xt+$t)/2:Math.min(0,xt)||Math.max(0,$t),jn>Yt?(Yt+jn)/2:Math.min(0,Yt)||Math.max(0,jn))}function Oe(le){return[(+le[0][0]+ +le[1][0])/2,(+le[0][1]+ +le[1][1])/2]}function Se(le,it,xt){le.on("start.zoom",function(){_e(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){_e(this,arguments).end()}).tween("zoom",function(){var $t=this,Yt=arguments,jn=_e($t,Yt),kn=u.apply($t,Yt),ur=xt||Oe(kn),Qn=Math.max(kn[1][0]-kn[0][0],kn[1][1]-kn[0][1]),zr=$t.__zoom,Br="function"==typeof it?it.apply($t,Yt):it,$n=k(zr.invert(ur).concat(Qn/zr.k),Br.invert(ur).concat(Qn/Br.k));return function(Ft){if(1===Ft)Ft=Br;else{var An=$n(Ft),Nn=Qn/An[2];Ft=new fc(Nn,ur[0]-An[0]*Nn,ur[1]-An[1]*Nn)}jn.zoom(null,Ft)}})}function _e(le,it){for(var Yt,xt=0,$t=O.length;xt<$t;++xt)if((Yt=O[xt]).that===le)return Yt;return new qe(le,it)}function qe(le,it){this.that=le,this.args=it,this.index=-1,this.active=0,this.extent=u.apply(le,it)}function $e(){if(i.apply(this,arguments)){var le=_e(this,arguments),it=this.__zoom,xt=Math.max(h,Math.min(f,it.k*Math.pow(2,-M.event.deltaY*(M.event.deltaMode?120:1)/500))),$t=kr(this);if(le.wheel)(le.mouse[0][0]!==$t[0]||le.mouse[0][1]!==$t[1])&&(le.mouse[1]=it.invert(le.mouse[0]=$t)),clearTimeout(le.wheel);else{if(it.k===xt)return;le.mouse=[$t,it.invert($t)],Zr(this),le.start()}Oy(),le.wheel=setTimeout(Yt,150),le.zoom("mouse",De(ee(he(it,xt),le.mouse[0],le.mouse[1]),le.extent))}function Yt(){le.wheel=null,le.end()}}function St(){if(!V&&i.apply(this,arguments)){var le=_e(this,arguments),it=vs(M.event.view).on("mousemove.zoom",jn,!0).on("mouseup.zoom",kn,!0),xt=kr(this),$t=M.event.clientX,Yt=M.event.clientY;uu(M.event.view),K_(),le.mouse=[xt,this.__zoom.invert(xt)],Zr(this),le.start()}function jn(){if(Oy(),!le.moved){var ur=M.event.clientX-$t,Qn=M.event.clientY-Yt;le.moved=ur*ur+Qn*Qn>Y}le.zoom("mouse",De(ee(le.that.__zoom,le.mouse[0]=kr(le.that),le.mouse[1]),le.extent))}function kn(){it.on("mousemove.zoom mouseup.zoom",null),ra(M.event.view,le.moved),Oy(),le.end()}}function mt(){if(i.apply(this,arguments)){var le=this.__zoom,it=kr(this),xt=le.invert(it),Yt=De(ee(he(le,le.k*(M.event.shiftKey?.5:2)),it,xt),u.apply(this,arguments));Oy(),S>0?vs(this).transition().duration(S).call(Se,Yt,it):vs(this).call(X.transform,Yt)}}function st(){if(i.apply(this,arguments)){var xt,Yt,jn,kn,le=_e(this,arguments),it=M.event.changedTouches,$t=it.length;for(K_(),Yt=0;Yt<$t;++Yt)kn=[kn=Ic(this,it,(jn=it[Yt]).identifier),this.__zoom.invert(kn),jn.identifier],le.touch0?le.touch1||(le.touch1=kn):(le.touch0=kn,xt=!0);if(N&&(N=clearTimeout(N),!le.touch1))return le.end(),void((kn=vs(this).on("dblclick.zoom"))&&kn.apply(this,arguments));xt&&(N=setTimeout(function(){N=null},H),Zr(this),le.start())}}function Vt(){var $t,Yt,jn,kn,le=_e(this,arguments),it=M.event.changedTouches,xt=it.length;for(Oy(),N&&(N=clearTimeout(N)),$t=0;$t<xt;++$t)jn=Ic(this,it,(Yt=it[$t]).identifier),le.touch0&&le.touch0[2]===Yt.identifier?le.touch0[0]=jn:le.touch1&&le.touch1[2]===Yt.identifier&&(le.touch1[0]=jn);if(Yt=le.that.__zoom,le.touch1){var ur=le.touch0[0],Qn=le.touch0[1],zr=le.touch1[0],Br=le.touch1[1],$n=($n=zr[0]-ur[0])*$n+($n=zr[1]-ur[1])*$n,Ft=(Ft=Br[0]-Qn[0])*Ft+(Ft=Br[1]-Qn[1])*Ft;Yt=he(Yt,Math.sqrt($n/Ft)),jn=[(ur[0]+zr[0])/2,(ur[1]+zr[1])/2],kn=[(Qn[0]+Br[0])/2,(Qn[1]+Br[1])/2]}else{if(!le.touch0)return;jn=le.touch0[0],kn=le.touch0[1]}le.zoom("touch",De(ee(Yt,jn,kn),le.extent))}function pt(){var $t,Yt,le=_e(this,arguments),it=M.event.changedTouches,xt=it.length;for(K_(),V&&clearTimeout(V),V=setTimeout(function(){V=null},H),$t=0;$t<xt;++$t)Yt=it[$t],le.touch0&&le.touch0[2]===Yt.identifier?delete le.touch0:le.touch1&&le.touch1[2]===Yt.identifier&&delete le.touch1;le.touch1&&!le.touch0&&(le.touch0=le.touch1,delete le.touch1),le.touch0?le.touch0[1]=this.__zoom.invert(le.touch0[0]):le.end()}return X.transform=function(le,it){var xt=le.selection?le.selection():le;xt.property("__zoom",U1),le!==xt?Se(le,it):xt.interrupt().each(function(){_e(this,arguments).start().zoom(null,"function"==typeof it?it.apply(this,arguments):it).end()})},X.scaleBy=function(le,it){X.scaleTo(le,function(){return this.__zoom.k*("function"==typeof it?it.apply(this,arguments):it)})},X.scaleTo=function(le,it){X.transform(le,function(){var xt=u.apply(this,arguments),$t=this.__zoom,Yt=Oe(xt),jn=$t.invert(Yt);return De(ee(he($t,"function"==typeof it?it.apply(this,arguments):it),Yt,jn),xt)})},X.translateBy=function(le,it,xt){X.transform(le,function(){return De(this.__zoom.translate("function"==typeof it?it.apply(this,arguments):it,"function"==typeof xt?xt.apply(this,arguments):xt),u.apply(this,arguments))})},qe.prototype={start:function(){return 1==++this.active&&(this.index=O.push(this)-1,this.emit("start")),this},zoom:function(le,it){return this.mouse&&"mouse"!==le&&(this.mouse[1]=it.invert(this.mouse[0])),this.touch0&&"touch"!==le&&(this.touch0[1]=it.invert(this.touch0[0])),this.touch1&&"touch"!==le&&(this.touch1[1]=it.invert(this.touch1[0])),this.that.__zoom=it,this.emit("zoom"),this},end:function(){return 0==--this.active&&(O.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(le){Qo(new W_(X,le,this.that.__zoom),U.apply,U,[le,this.that,this.args])}},X.filter=function(le){return arguments.length?(i="function"==typeof le?le:Py(!!le),X):i},X.extent=function(le){return arguments.length?(u="function"==typeof le?le:Py([[+le[0][0],+le[0][1]],[+le[1][0],+le[1][1]]]),X):u},X.scaleExtent=function(le){return arguments.length?(h=+le[0],f=+le[1],X):[h,f]},X.translateExtent=function(le){return arguments.length?(g=+le[0][0],v=+le[1][0],E=+le[0][1],I=+le[1][1],X):[[g,E],[v,I]]},X.duration=function(le){return arguments.length?(S=+le,X):S},X.interpolate=function(le){return arguments.length?(k=le,X):k},X.on=function(){var le=U.on.apply(U,arguments);return le===U?X:le},X.clickDistance=function(le){return arguments.length?(Y=(le=+le)*le,X):Math.sqrt(Y)},X},M.zoomTransform=ss,M.zoomIdentity=Mg,Object.defineProperty(M,"__esModule",{value:!0})}(et)},5867:(jt,et,M)=>{"use strict";M.d(et,{C6:()=>D.getApps,Mq:()=>D.getApp,ZF:()=>D.initializeApp});var D=M(9681);(0,D.registerVersion)("firebase","9.8.4","app")},127:(jt,et,M)=>{"use strict";M.d(et,{Z:()=>D.Z});var D=M(3942);D.Z.registerVersion("firebase","9.8.4","app-compat")},3677:(jt,et,M)=>{"use strict";M.r(et);var D=M(5861),be=M(3942),Q=M(2090),Ue=M(9681),xe=M(655),Be=M(1877),Ve=M(4859);const Qe=function Rt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Et=function ot(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new Q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ht=new Be.Yd("@firebase/auth");function bt(C,...y){ht.logLevel<=Be.in.ERROR&&ht.error(`Auth (${Ue.SDK_VERSION}): ${C}`,...y)}function We(C,...y){throw vt(C,...y)}function Ke(C,...y){return vt(C,...y)}function Xe(C,y,w){const x=Object.assign(Object.assign({},Et()),{[y]:w});return new Q.LL("auth","Firebase",x).create(y,{appName:C.name})}function ut(C,y,w){if(!(y instanceof w))throw w.name!==y.constructor.name&&We(C,"argument-error"),Xe(C,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vt(C,...y){if("string"!=typeof C){const w=y[0],x=[...y.slice(1)];return x[0]&&(x[0].appName=C.name),C._errorFactory.create(w,...x)}return ge.create(C,...y)}function ce(C,y,...w){if(!C)throw vt(y,...w)}function Ze(C){const y="INTERNAL ASSERTION FAILED: "+C;throw bt(y),new Error(y)}function fe(C,y){C||Ze(y)}const Re=new Map;function Te(C){fe(C instanceof Function,"Expected a class definition");let y=Re.get(C);return y?(fe(y instanceof C,"Instance stored in cache mismatched with class"),y):(y=new C,Re.set(C,y),y)}function dt(){var C;return"undefined"!=typeof self&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function Wt(){return"http:"===at()||"https:"===at()}function at(){var C;return"undefined"!=typeof self&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class Fn{constructor(y,w){this.shortDelay=y,this.longDelay=w,fe(w>y,"Short delay should be less than long delay!"),this.isMobile=(0,Q.uI)()||(0,Q.b$)()}get(){return function Jt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Wt()||(0,Q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function cr(C,y){fe(C.emulator,"Emulator should always be set here");const{url:w}=C.emulator;return y?`${w}${y.startsWith("/")?y.slice(1):y}`:w}class Hn{static initialize(y,w,x){this.fetchImpl=y,w&&(this.headersImpl=w),x&&(this.responseImpl=x)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ze("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ze("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ze("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},xr=new Fn(3e4,6e4);function Yn(C,y){return C.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:C.tenantId}):y}function On(C,y,w,x){return xs.apply(this,arguments)}function xs(){return(xs=(0,D.Z)(function*(C,y,w,x,$={}){return us(C,$,(0,D.Z)(function*(){let Z={},pe={};x&&("GET"===y?pe=x:Z={body:JSON.stringify(x)});const ze=(0,Q.xO)(Object.assign({key:C.config.apiKey},pe)).slice(1),Dt=yield C._getAdditionalHeaders();return Dt["Content-Type"]="application/json",C.languageCode&&(Dt["X-Firebase-Locale"]=C.languageCode),Hn.fetch()(Rs(C,C.config.apiHost,w,ze),Object.assign({method:y,headers:Dt,referrerPolicy:"no-referrer"},Z))}))})).apply(this,arguments)}function us(C,y,w){return ti.apply(this,arguments)}function ti(){return(ti=(0,D.Z)(function*(C,y,w){C._canInitEmulator=!1;const x=Object.assign(Object.assign({},Zn),y);try{const $=new cs(C),Z=yield Promise.race([w(),$.promise]);$.clearNetworkTimeout();const pe=yield Z.json();if("needConfirmation"in pe)throw Ws(C,"account-exists-with-different-credential",pe);if(Z.ok&&!("errorMessage"in pe))return pe;{const ze=Z.ok?pe.errorMessage:pe.error.message,[Dt,qt]=ze.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Dt)throw Ws(C,"credential-already-in-use",pe);if("EMAIL_EXISTS"===Dt)throw Ws(C,"email-already-in-use",pe);if("USER_DISABLED"===Dt)throw Ws(C,"user-disabled",pe);const fn=x[Dt]||Dt.toLowerCase().replace(/[_\s]+/g,"-");if(qt)throw Xe(C,fn,qt);We(C,fn)}}catch($){if($ instanceof Q.ZR)throw $;We(C,"network-request-failed")}})).apply(this,arguments)}function oi(C,y,w,x){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,D.Z)(function*(C,y,w,x,$={}){const Z=yield On(C,y,w,x,$);return"mfaPendingCredential"in Z&&We(C,"multi-factor-auth-required",{_serverResponse:Z}),Z})).apply(this,arguments)}function Rs(C,y,w,x){const $=`${y}${w}?${x}`;return C.config.emulator?cr(C.config,$):`${C.config.apiScheme}://${$}`}class cs{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((w,x)=>{this.timer=setTimeout(()=>x(Ke(this.auth,"network-request-failed")),xr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ws(C,y,w){const x={appName:C.name};w.email&&(x.email=w.email),w.phoneNumber&&(x.phoneNumber=w.phoneNumber);const $=Ke(C,y,x);return $.customData._tokenResponse=w,$}function ks(){return(ks=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function Mr(C,y){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Da(C,y){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function ai(C){if(C)try{const y=new Date(Number(C));if(!isNaN(y.getTime()))return y.toUTCString()}catch(y){}}function ls(){return(ls=(0,D.Z)(function*(C,y=!1){const w=(0,Q.m9)(C),x=yield w.getIdToken(y),$=rn(x);ce($&&$.exp&&$.auth_time&&$.iat,w.auth,"internal-error");const Z="object"==typeof $.firebase?$.firebase:void 0,pe=null==Z?void 0:Z.sign_in_provider;return{claims:$,token:x,authTime:ai(Wn($.auth_time)),issuedAtTime:ai(Wn($.iat)),expirationTime:ai(Wn($.exp)),signInProvider:pe||null,signInSecondFactor:(null==Z?void 0:Z.sign_in_second_factor)||null}})).apply(this,arguments)}function Wn(C){return 1e3*Number(C)}function rn(C){var y;const[w,x,$]=C.split(".");if(void 0===w||void 0===x||void 0===$)return bt("JWT malformed, contained fewer than 3 sections"),null;try{const Z=(0,Q.tV)(x);return Z?JSON.parse(Z):(bt("Failed to decode base64 JWT payload"),null)}catch(Z){return bt("Caught error parsing JWT payload as JSON",null===(y=Z)||void 0===y?void 0:y.toString()),null}}function wi(C,y){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,D.Z)(function*(C,y,w=!1){if(w)return y;try{return yield y}catch(x){throw x instanceof Q.ZR&&Un(x)&&C.auth.currentUser===C&&(yield C.auth.signOut()),x}})).apply(this,arguments)}function Un({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}class Ps{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var w;if(y){const x=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),x}{this.errorBackoff=3e4;const $=(null!==(w=this.user.stsTokenManager.expirationTime)&&void 0!==w?w:0)-Date.now()-3e5;return Math.max(0,$)}}schedule(y=!1){var w=this;if(!this.isRunning)return;const x=this.getInterval(y);this.timerId=setTimeout((0,D.Z)(function*(){yield w.iteration()}),x)}iteration(){var y=this;return(0,D.Z)(function*(){var w;try{yield y.user.getIdToken(!0)}catch(x){return void("auth/network-request-failed"===(null===(w=x)||void 0===w?void 0:w.code)&&y.schedule(!0))}y.schedule()})()}}class Mi{constructor(y,w){this.createdAt=y,this.lastLoginAt=w,this._initializeTime()}_initializeTime(){this.lastSignInTime=ai(this.lastLoginAt),this.creationTime=ai(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ui(C){return sn.apply(this,arguments)}function sn(){return(sn=(0,D.Z)(function*(C){var y;const w=C.auth,x=yield C.getIdToken(),$=yield wi(C,Da(w,{idToken:x}));ce(null==$?void 0:$.users.length,w,"internal-error");const Z=$.users[0];C._notifyReloadListener(Z);const pe=(null===(y=Z.providerUserInfo)||void 0===y?void 0:y.length)?Ie(Z.providerUserInfo):[],ze=Ee(C.providerData,pe),fn=!!C.isAnonymous&&!(C.email&&Z.passwordHash||(null==ze?void 0:ze.length)),cn={uid:Z.localId,displayName:Z.displayName||null,photoURL:Z.photoUrl||null,email:Z.email||null,emailVerified:Z.emailVerified||!1,phoneNumber:Z.phoneNumber||null,tenantId:Z.tenantId||null,providerData:ze,metadata:new Mi(Z.createdAt,Z.lastLoginAt),isAnonymous:fn};Object.assign(C,cn)})).apply(this,arguments)}function se(){return(se=(0,D.Z)(function*(C){const y=(0,Q.m9)(C);yield ui(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function Ee(C,y){return[...C.filter(x=>!y.some($=>$.providerId===x.providerId)),...y]}function Ie(C){return C.map(y=>{var{providerId:w}=y,x=(0,xe._T)(y,["providerId"]);return{providerId:w,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}function nt(){return(nt=(0,D.Z)(function*(C,y){const w=yield us(C,{},(0,D.Z)(function*(){const x=(0,Q.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:$,apiKey:Z}=C.config,pe=Rs(C,$,"/v1/token",`key=${Z}`),ze=yield C._getAdditionalHeaders();return ze["Content-Type"]="application/x-www-form-urlencoded",Hn.fetch()(pe,{method:"POST",headers:ze,body:x})}));return{accessToken:w.access_token,expiresIn:w.expires_in,refreshToken:w.refresh_token}})).apply(this,arguments)}class It{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){ce(y.idToken,"internal-error"),ce(void 0!==y.idToken,"internal-error"),ce(void 0!==y.refreshToken,"internal-error");const w="expiresIn"in y&&void 0!==y.expiresIn?Number(y.expiresIn):function vn(C){const y=rn(C);return ce(y,"internal-error"),ce(void 0!==y.exp,"internal-error"),ce(void 0!==y.iat,"internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,w)}getToken(y,w=!1){var x=this;return(0,D.Z)(function*(){return ce(!x.accessToken||x.refreshToken,y,"user-token-expired"),w||!x.accessToken||x.isExpired?x.refreshToken?(yield x.refresh(y,x.refreshToken),x.accessToken):null:x.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,w){var x=this;return(0,D.Z)(function*(){const{accessToken:$,refreshToken:Z,expiresIn:pe}=yield function ne(C,y){return nt.apply(this,arguments)}(y,w);x.updateTokensAndExpiration($,Z,Number(pe))})()}updateTokensAndExpiration(y,w,x){this.refreshToken=w||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*x}static fromJSON(y,w){const{refreshToken:x,accessToken:$,expirationTime:Z}=w,pe=new It;return x&&(ce("string"==typeof x,"internal-error",{appName:y}),pe.refreshToken=x),$&&(ce("string"==typeof $,"internal-error",{appName:y}),pe.accessToken=$),Z&&(ce("number"==typeof Z,"internal-error",{appName:y}),pe.expirationTime=Z),pe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new It,this.toJSON())}_performRefresh(){return Ze("not implemented")}}function Gt(C,y){ce("string"==typeof C||void 0===C,"internal-error",{appName:y})}class Dn{constructor(y){var{uid:w,auth:x,stsTokenManager:$}=y,Z=(0,xe._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ps(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=w,this.auth=x,this.stsTokenManager=$,this.accessToken=$.accessToken,this.displayName=Z.displayName||null,this.email=Z.email||null,this.emailVerified=Z.emailVerified||!1,this.phoneNumber=Z.phoneNumber||null,this.photoURL=Z.photoURL||null,this.isAnonymous=Z.isAnonymous||!1,this.tenantId=Z.tenantId||null,this.providerData=Z.providerData?[...Z.providerData]:[],this.metadata=new Mi(Z.createdAt||void 0,Z.lastLoginAt||void 0)}getIdToken(y){var w=this;return(0,D.Z)(function*(){const x=yield wi(w,w.stsTokenManager.getToken(w.auth,y));return ce(x,w.auth,"internal-error"),w.accessToken!==x&&(w.accessToken=x,yield w.auth._persistUserIfCurrent(w),w.auth._notifyListenersIfCurrent(w)),x})()}getIdTokenResult(y){return function Ks(C){return ls.apply(this,arguments)}(this,y)}reload(){return function ve(C){return se.apply(this,arguments)}(this)}_assign(y){this!==y&&(ce(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(w=>Object.assign({},w)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){return new Dn(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(y){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,w=!1){var x=this;return(0,D.Z)(function*(){let $=!1;y.idToken&&y.idToken!==x.stsTokenManager.accessToken&&(x.stsTokenManager.updateFromServerResponse(y),$=!0),w&&(yield ui(x)),yield x.auth._persistUserIfCurrent(x),$&&x.auth._notifyListenersIfCurrent(x)})()}delete(){var y=this;return(0,D.Z)(function*(){const w=yield y.getIdToken();return yield wi(y,function pn(C,y){return ks.apply(this,arguments)}(y.auth,{idToken:w})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,w){var x,$,Z,pe,ze,Dt,qt,fn;const cn=null!==(x=w.displayName)&&void 0!==x?x:void 0,Yr=null!==($=w.email)&&void 0!==$?$:void 0,So=null!==(Z=w.phoneNumber)&&void 0!==Z?Z:void 0,yh=null!==(pe=w.photoURL)&&void 0!==pe?pe:void 0,nm=null!==(ze=w.tenantId)&&void 0!==ze?ze:void 0,ov=null!==(Dt=w._redirectEventId)&&void 0!==Dt?Dt:void 0,pi=null!==(qt=w.createdAt)&&void 0!==qt?qt:void 0,fa=null!==(fn=w.lastLoginAt)&&void 0!==fn?fn:void 0,{uid:gp,emailVerified:rm,isAnonymous:js,providerData:im,stsTokenManager:sm}=w;ce(gp&&sm,y,"internal-error");const om=It.fromJSON(this.name,sm);ce("string"==typeof gp,y,"internal-error"),Gt(cn,y.name),Gt(Yr,y.name),ce("boolean"==typeof rm,y,"internal-error"),ce("boolean"==typeof js,y,"internal-error"),Gt(So,y.name),Gt(yh,y.name),Gt(nm,y.name),Gt(ov,y.name),Gt(pi,y.name),Gt(fa,y.name);const Fi=new Dn({uid:gp,auth:y,email:Yr,emailVerified:rm,displayName:cn,isAnonymous:js,photoURL:yh,phoneNumber:So,tenantId:nm,stsTokenManager:om,createdAt:pi,lastLoginAt:fa});return im&&Array.isArray(im)&&(Fi.providerData=im.map(vh=>Object.assign({},vh))),ov&&(Fi._redirectEventId=ov),Fi}static _fromIdTokenResponse(y,w,x=!1){return(0,D.Z)(function*(){const $=new It;$.updateFromServerResponse(w);const Z=new Dn({uid:w.localId,auth:y,stsTokenManager:$,isAnonymous:x});return yield ui(Z),Z})()}}const or=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.Z)(function*(){return!0})()}_set(w,x){var $=this;return(0,D.Z)(function*(){$.storage[w]=x})()}_get(w){var x=this;return(0,D.Z)(function*(){const $=x.storage[w];return void 0===$?null:$})()}_remove(w){var x=this;return(0,D.Z)(function*(){delete x.storage[w]})()}_addListener(w,x){}_removeListener(w,x){}}return C.type="NONE",C})();function Bn(C,y,w){return`firebase:${C}:${y}:${w}`}class Gr{constructor(y,w,x){this.persistence=y,this.auth=w,this.userKey=x;const{config:$,name:Z}=this.auth;this.fullUserKey=Bn(this.userKey,$.apiKey,Z),this.fullPersistenceKey=Bn("persistence",$.apiKey,Z),this.boundEventHandler=w._onStorageEvent.bind(w),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,D.Z)(function*(){const w=yield y.persistence._get(y.fullUserKey);return w?Dn._fromJSON(y.auth,w):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var w=this;return(0,D.Z)(function*(){if(w.persistence===y)return;const x=yield w.getCurrentUser();return yield w.removeCurrentUser(),w.persistence=y,x?w.setCurrentUser(x):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,w,x="authUser"){return(0,D.Z)(function*(){if(!w.length)return new Gr(Te(or),y,x);const $=(yield Promise.all(w.map(function(){var qt=(0,D.Z)(function*(fn){if(yield fn._isAvailable())return fn});return function(fn){return qt.apply(this,arguments)}}()))).filter(qt=>qt);let Z=$[0]||Te(or);const pe=Bn(x,y.config.apiKey,y.name);let ze=null;for(const qt of w)try{const fn=yield qt._get(pe);if(fn){const cn=Dn._fromJSON(y,fn);qt!==Z&&(ze=cn),Z=qt;break}}catch(fn){}const Dt=$.filter(qt=>qt._shouldAllowMigration);return Z._shouldAllowMigration&&Dt.length?(Z=Dt[0],ze&&(yield Z._set(pe,ze.toJSON())),yield Promise.all(w.map(function(){var qt=(0,D.Z)(function*(fn){if(fn!==Z)try{yield fn._remove(pe)}catch(cn){}});return function(fn){return qt.apply(this,arguments)}}())),new Gr(Z,y,x)):new Gr(Z,y,x)})()}}function Sa(C){const y=C.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(Vr(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(Aa(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(Fo(y))return"Blackberry";if(Nr(y))return"Webos";if(Qo(y))return"Safari";if((y.includes("chrome/")||xa(y))&&!y.includes("edge/"))return"Chrome";if(kr(y))return"Android";{const x=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==x?void 0:x.length))return x[1]}return"Other"}function Aa(C=(0,Q.z$)()){return/firefox\//i.test(C)}function Qo(C=(0,Q.z$)()){const y=C.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function xa(C=(0,Q.z$)()){return/crios\//i.test(C)}function Vr(C=(0,Q.z$)()){return/iemobile/i.test(C)}function kr(C=(0,Q.z$)()){return/android/i.test(C)}function Fo(C=(0,Q.z$)()){return/blackberry/i.test(C)}function Nr(C=(0,Q.z$)()){return/webos/i.test(C)}function hs(C=(0,Q.z$)()){return/iphone|ipad|ipod/i.test(C)}function Xo(C=(0,Q.z$)()){return hs(C)||kr(C)||Nr(C)||Fo(C)||/windows phone/i.test(C)||Vr(C)}function ru(C,y=[]){let w;switch(C){case"Browser":w=Sa((0,Q.z$)());break;case"Worker":w=`${Sa((0,Q.z$)())}-${C}`;break;default:w=C}const x=y.length?y.join(","):"FirebaseCore-web";return`${w}/JsCore/${Ue.SDK_VERSION}/${x}`}class ni{constructor(y){this.auth=y,this.queue=[]}pushCallback(y,w){const x=Z=>new Promise((pe,ze)=>{try{pe(y(Z))}catch(Dt){ze(Dt)}});x.onAbort=w,this.queue.push(x);const $=this.queue.length-1;return()=>{this.queue[$]=()=>Promise.resolve()}}runMiddleware(y){var w=this;return(0,D.Z)(function*(){var x;if(w.auth.currentUser===y)return;const $=[];try{for(const Z of w.queue)yield Z(y),Z.onAbort&&$.push(Z.onAbort)}catch(Z){$.reverse();for(const pe of $)try{pe()}catch(ze){}throw w.auth._errorFactory.create("login-blocked",{originalMessage:null===(x=Z)||void 0===x?void 0:x.message})}})()}}class Ct{constructor(y,w,x){this.app=y,this.heartbeatServiceProvider=w,this.config=x,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lr(this),this.idTokenSubscription=new lr(this),this.beforeStateQueue=new ni(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=x.sdkClientVersion}_initializeWithPersistence(y,w){var x=this;return w&&(this._popupRedirectResolver=Te(w)),this._initializationPromise=this.queue((0,D.Z)(function*(){var $,Z;if(!x._deleted&&(x.persistenceManager=yield Gr.create(x,y),!x._deleted)){if(null===($=x._popupRedirectResolver)||void 0===$?void 0:$._shouldInitProactively)try{yield x._popupRedirectResolver._initialize(x)}catch(pe){}yield x.initializeCurrentUser(w),x.lastNotifiedUid=(null===(Z=x.currentUser)||void 0===Z?void 0:Z.uid)||null,!x._deleted&&(x._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,D.Z)(function*(){if(y._deleted)return;const w=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||w){if(y.currentUser&&w&&y.currentUser.uid===w.uid)return y._currentUser._assign(w),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(w,!0)}})()}initializeCurrentUser(y){var w=this;return(0,D.Z)(function*(){var x;const $=yield w.assertedPersistence.getCurrentUser();let Z=$,pe=!1;if(y&&w.config.authDomain){yield w.getOrInitRedirectPersistenceManager();const ze=null===(x=w.redirectUser)||void 0===x?void 0:x._redirectEventId,Dt=null==Z?void 0:Z._redirectEventId,qt=yield w.tryRedirectSignIn(y);(!ze||ze===Dt)&&(null==qt?void 0:qt.user)&&(Z=qt.user,pe=!0)}if(!Z)return w.directlySetCurrentUser(null);if(!Z._redirectEventId){if(pe)try{yield w.beforeStateQueue.runMiddleware(Z)}catch(ze){Z=$,w._popupRedirectResolver._overrideRedirectResult(w,()=>Promise.reject(ze))}return Z?w.reloadAndSetCurrentUserOrClear(Z):w.directlySetCurrentUser(null)}return ce(w._popupRedirectResolver,w,"argument-error"),yield w.getOrInitRedirectPersistenceManager(),w.redirectUser&&w.redirectUser._redirectEventId===Z._redirectEventId?w.directlySetCurrentUser(Z):w.reloadAndSetCurrentUserOrClear(Z)})()}tryRedirectSignIn(y){var w=this;return(0,D.Z)(function*(){let x=null;try{x=yield w._popupRedirectResolver._completeRedirectFn(w,y,!0)}catch($){yield w._setRedirectUser(null)}return x})()}reloadAndSetCurrentUserOrClear(y){var w=this;return(0,D.Z)(function*(){var x;try{yield ui(y)}catch($){if("auth/network-request-failed"!==(null===(x=$)||void 0===x?void 0:x.code))return w.directlySetCurrentUser(null)}return w.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function _t(){if("undefined"==typeof navigator)return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var y=this;return(0,D.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var w=this;return(0,D.Z)(function*(){const x=y?(0,Q.m9)(y):null;return x&&ce(x.auth.config.apiKey===w.config.apiKey,w,"invalid-user-token"),w._updateCurrentUser(x&&x._clone(w))})()}_updateCurrentUser(y,w=!1){var x=this;return(0,D.Z)(function*(){if(!x._deleted)return y&&ce(x.tenantId===y.tenantId,x,"tenant-id-mismatch"),w||(yield x.beforeStateQueue.runMiddleware(y)),x.queue((0,D.Z)(function*(){yield x.directlySetCurrentUser(y),x.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,D.Z)(function*(){return yield y.beforeStateQueue.runMiddleware(null),(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null,!0)})()}setPersistence(y){var w=this;return this.queue((0,D.Z)(function*(){yield w.assertedPersistence.setPersistence(Te(y))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new Q.LL("auth","Firebase",y())}onAuthStateChanged(y,w,x){return this.registerStateListener(this.authStateSubscription,y,w,x)}beforeAuthStateChanged(y,w){return this.beforeStateQueue.pushCallback(y,w)}onIdTokenChanged(y,w,x){return this.registerStateListener(this.idTokenSubscription,y,w,x)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,w){var x=this;return(0,D.Z)(function*(){const $=yield x.getOrInitRedirectPersistenceManager(w);return null===y?$.removeCurrentUser():$.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var w=this;return(0,D.Z)(function*(){if(!w.redirectPersistenceManager){const x=y&&Te(y)||w._popupRedirectResolver;ce(x,w,"argument-error"),w.redirectPersistenceManager=yield Gr.create(w,[Te(x._redirectPersistence)],"redirectUser"),w.redirectUser=yield w.redirectPersistenceManager.getCurrentUser()}return w.redirectPersistenceManager})()}_redirectUserForId(y){var w=this;return(0,D.Z)(function*(){var x,$;return w._isInitialized&&(yield w.queue((0,D.Z)(function*(){}))),(null===(x=w._currentUser)||void 0===x?void 0:x._redirectEventId)===y?w._currentUser:(null===($=w.redirectUser)||void 0===$?void 0:$._redirectEventId)===y?w.redirectUser:null})()}_persistUserIfCurrent(y){var w=this;return(0,D.Z)(function*(){if(y===w.currentUser)return w.queue((0,D.Z)(function*(){return w.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,w;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=null!==(w=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==w?w:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,w,x,$){if(this._deleted)return()=>{};const Z="function"==typeof w?w:w.next.bind(w),pe=this._isInitialized?Promise.resolve():this._initializationPromise;return ce(pe,this,"internal-error"),pe.then(()=>Z(this.currentUser)),"function"==typeof w?y.addObserver(w,x,$):y.addObserver(w)}directlySetCurrentUser(y){var w=this;return(0,D.Z)(function*(){w.currentUser&&w.currentUser!==y&&(w._currentUser._stopProactiveRefresh(),y&&w.isProactiveRefreshEnabled&&y._startProactiveRefresh()),w.currentUser=y,y?yield w.assertedPersistence.setCurrentUser(y):yield w.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=ru(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var y=this;return(0,D.Z)(function*(){var w;const x={"X-Client-Version":y.clientVersion};y.app.options.appId&&(x["X-Firebase-gmpid"]=y.app.options.appId);const $=yield null===(w=y.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===w?void 0:w.getHeartbeatsHeader();return $&&(x["X-Firebase-Client"]=$),x})()}}function on(C){return(0,Q.m9)(C)}class lr{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,Q.ne)(w=>this.observer=w)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ho(C){const y=C.indexOf(":");return y<0?"":C.substr(0,y+1)}function fo(C){if(!C)return null;const y=Number(C);return isNaN(y)?null:y}class me{constructor(y,w){this.providerId=y,this.signInMethod=w}toJSON(){return Ze("not implemented")}_getIdTokenResponse(y){return Ze("not implemented")}_linkToIdToken(y,w){return Ze("not implemented")}_getReauthenticationResolver(y){return Ze("not implemented")}}function tt(C,y){return Je.apply(this,arguments)}function Je(){return(Je=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:resetPassword",Yn(C,y))})).apply(this,arguments)}function Tt(C,y){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function un(C,y){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:update",Yn(C,y))})).apply(this,arguments)}function _n(){return(_n=(0,D.Z)(function*(C,y){return oi(C,"POST","/v1/accounts:signInWithPassword",Yn(C,y))})).apply(this,arguments)}function Ln(C,y){return dr.apply(this,arguments)}function dr(){return(dr=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:sendOobCode",Yn(C,y))})).apply(this,arguments)}function zn(C,y){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,D.Z)(function*(C,y){return Ln(C,y)})).apply(this,arguments)}function Jo(C,y){return zi.apply(this,arguments)}function zi(){return(zi=(0,D.Z)(function*(C,y){return Ln(C,y)})).apply(this,arguments)}function fs(C,y){return yc.apply(this,arguments)}function yc(){return(yc=(0,D.Z)(function*(C,y){return Ln(C,y)})).apply(this,arguments)}function iu(C,y){return ps.apply(this,arguments)}function ps(){return(ps=(0,D.Z)(function*(C,y){return Ln(C,y)})).apply(this,arguments)}function po(){return(po=(0,D.Z)(function*(C,y){return oi(C,"POST","/v1/accounts:signInWithEmailLink",Yn(C,y))})).apply(this,arguments)}function kf(){return(kf=(0,D.Z)(function*(C,y){return oi(C,"POST","/v1/accounts:signInWithEmailLink",Yn(C,y))})).apply(this,arguments)}class gs extends me{constructor(y,w,x,$=null){super("password",x),this._email=y,this._password=w,this._tenantId=$}static _fromEmailAndPassword(y,w){return new gs(y,w,"password")}static _fromEmailAndCode(y,w,x=null){return new gs(y,w,"emailLink",x)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const w="string"==typeof y?JSON.parse(y):y;if((null==w?void 0:w.email)&&(null==w?void 0:w.password)){if("password"===w.signInMethod)return this._fromEmailAndPassword(w.email,w.password);if("emailLink"===w.signInMethod)return this._fromEmailAndCode(w.email,w.password,w.tenantId)}return null}_getIdTokenResponse(y){var w=this;return(0,D.Z)(function*(){switch(w.signInMethod){case"password":return function Bt(C,y){return _n.apply(this,arguments)}(y,{returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Zs(C,y){return po.apply(this,arguments)}(y,{email:w._email,oobCode:w._password});default:We(y,"internal-error")}})()}_linkToIdToken(y,w){var x=this;return(0,D.Z)(function*(){switch(x.signInMethod){case"password":return Tt(y,{idToken:w,returnSecureToken:!0,email:x._email,password:x._password});case"emailLink":return function Rf(C,y){return kf.apply(this,arguments)}(y,{idToken:w,email:x._email,oobCode:x._password});default:We(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function su(C,y){return td.apply(this,arguments)}function td(){return(td=(0,D.Z)(function*(C,y){return oi(C,"POST","/v1/accounts:signInWithIdp",Yn(C,y))})).apply(this,arguments)}class ea extends me{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const w=new ea(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(w.idToken=y.idToken),y.accessToken&&(w.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(w.nonce=y.nonce),y.pendingToken&&(w.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(w.accessToken=y.oauthToken,w.secret=y.oauthTokenSecret):We("argument-error"),w}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const w="string"==typeof y?JSON.parse(y):y,{providerId:x,signInMethod:$}=w,Z=(0,xe._T)(w,["providerId","signInMethod"]);if(!x||!$)return null;const pe=new ea(x,$);return pe.idToken=Z.idToken||void 0,pe.accessToken=Z.accessToken||void 0,pe.secret=Z.secret,pe.nonce=Z.nonce,pe.pendingToken=Z.pendingToken||null,pe}_getIdTokenResponse(y){return su(y,this.buildRequest())}_linkToIdToken(y,w){const x=this.buildRequest();return x.idToken=w,su(y,x)}_getReauthenticationResolver(y){const w=this.buildRequest();return w.autoCreate=!1,su(y,w)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const w={};this.idToken&&(w.id_token=this.idToken),this.accessToken&&(w.access_token=this.accessToken),this.secret&&(w.oauth_token_secret=this.secret),w.providerId=this.providerId,this.nonce&&!this.pendingToken&&(w.nonce=this.nonce),y.postBody=(0,Q.xO)(w)}return y}}function Og(C,y){return nd.apply(this,arguments)}function nd(){return(nd=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:sendVerificationCode",Yn(C,y))})).apply(this,arguments)}function ou(){return(ou=(0,D.Z)(function*(C,y){return oi(C,"POST","/v1/accounts:signInWithPhoneNumber",Yn(C,y))})).apply(this,arguments)}function Pf(){return(Pf=(0,D.Z)(function*(C,y){const w=yield oi(C,"POST","/v1/accounts:signInWithPhoneNumber",Yn(C,y));if(w.temporaryProof)throw Ws(C,"account-exists-with-different-credential",w);return w})).apply(this,arguments)}const $y={USER_NOT_FOUND:"user-not-found"};function Of(){return(Of=(0,D.Z)(function*(C,y){return oi(C,"POST","/v1/accounts:signInWithPhoneNumber",Yn(C,Object.assign(Object.assign({},y),{operation:"REAUTH"})),$y)})).apply(this,arguments)}class vc extends me{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,w){return new vc({verificationId:y,verificationCode:w})}static _fromTokenResponse(y,w){return new vc({phoneNumber:y,temporaryProof:w})}_getIdTokenResponse(y){return function rd(C,y){return ou.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,w){return function jy(C,y){return Pf.apply(this,arguments)}(y,Object.assign({idToken:w},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function Hy(C,y){return Of.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:w,verificationId:x,verificationCode:$}=this.params;return y&&w?{temporaryProof:y,phoneNumber:w}:{sessionInfo:x,code:$}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:w,verificationCode:x,phoneNumber:$,temporaryProof:Z}=y;return x||w||$||Z?new vc({verificationId:w,verificationCode:x,phoneNumber:$,temporaryProof:Z}):null}}class Hl{constructor(y){var w,x,$,Z,pe,ze;const Dt=(0,Q.zd)((0,Q.pd)(y)),qt=null!==(w=Dt.apiKey)&&void 0!==w?w:null,fn=null!==(x=Dt.oobCode)&&void 0!==x?x:null,cn=function Lg(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==($=Dt.mode)&&void 0!==$?$:null);ce(qt&&fn&&cn,"argument-error"),this.apiKey=qt,this.operation=cn,this.code=fn,this.continueUrl=null!==(Z=Dt.continueUrl)&&void 0!==Z?Z:null,this.languageCode=null!==(pe=Dt.languageCode)&&void 0!==pe?pe:null,this.tenantId=null!==(ze=Dt.tenantId)&&void 0!==ze?ze:null}static parseLink(y){const w=function cl(C){const y=(0,Q.zd)((0,Q.pd)(C)).link,w=y?(0,Q.zd)((0,Q.pd)(y)).deep_link_id:null,x=(0,Q.zd)((0,Q.pd)(C)).deep_link_id;return(x?(0,Q.zd)((0,Q.pd)(x)).link:null)||x||w||y||C}(y);try{return new Hl(w)}catch(x){return null}}}let Ff=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(w,x){return gs._fromEmailAndPassword(w,x)}static credentialWithLink(w,x){const $=Hl.parseLink(x);return ce($,"argument-error"),gs._fromEmailAndCode(w,$.code,$.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class ms{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class Vu extends ms{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class ta extends Vu{static credentialFromJSON(y){const w="string"==typeof y?JSON.parse(y):y;return ce("providerId"in w&&"signInMethod"in w,"argument-error"),ea._fromParams(w)}credential(y){return this._credential(Object.assign(Object.assign({},y),{nonce:y.rawNonce}))}_credential(y){return ce(y.idToken||y.accessToken,"argument-error"),ea._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return ta.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return ta.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:w,oauthAccessToken:x,oauthTokenSecret:$,pendingToken:Z,nonce:pe,providerId:ze}=y;if(!x&&!$&&!w&&!Z||!ze)return null;try{return new ta(ze)._credential({idToken:w,accessToken:x,nonce:pe,pendingToken:Z})}catch(Dt){return null}}}let _c=(()=>{class C extends Vu{constructor(){super("facebook.com")}static credential(w){return ea._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return C.credential(w.oauthAccessToken)}catch(x){return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),Uf=(()=>{class C extends Vu{constructor(){super("google.com"),this.addScope("profile")}static credential(w,x){return ea._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:w,accessToken:x})}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthIdToken:x,oauthAccessToken:$}=w;if(!x&&!$)return null;try{return C.credential(x,$)}catch(Z){return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),Fg=(()=>{class C extends Vu{constructor(){super("github.com")}static credential(w){return ea._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return C.credential(w.oauthAccessToken)}catch(x){return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class ju extends me{constructor(y,w){super(y,y),this.pendingToken=w}_getIdTokenResponse(y){return su(y,this.buildRequest())}_linkToIdToken(y,w){const x=this.buildRequest();return x.idToken=w,su(y,x)}_getReauthenticationResolver(y){const w=this.buildRequest();return w.autoCreate=!1,su(y,w)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const w="string"==typeof y?JSON.parse(y):y,{providerId:x,signInMethod:$,pendingToken:Z}=w;return x&&$&&Z&&x===$?new ju(x,Z):null}static _create(y,w){return new ju(y,w)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ys extends ms{constructor(y){ce(y.startsWith("saml."),"argument-error"),super(y)}static credentialFromResult(y){return ys.samlCredentialFromTaggedObject(y)}static credentialFromError(y){return ys.samlCredentialFromTaggedObject(y.customData||{})}static credentialFromJSON(y){const w=ju.fromJSON(y);return ce(w,"argument-error"),w}static samlCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{pendingToken:w,providerId:x}=y;if(!w||!x)return null;try{return ju._create(x,w)}catch($){return null}}}let Vf=(()=>{class C extends Vu{constructor(){super("twitter.com")}static credential(w,x){return ea._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:w,oauthTokenSecret:x})}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthAccessToken:x,oauthTokenSecret:$}=w;if(!x||!$)return null;try{return C.credential(x,$)}catch(Z){return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function Os(C,y){return bc.apply(this,arguments)}function bc(){return(bc=(0,D.Z)(function*(C,y){return oi(C,"POST","/v1/accounts:signUp",Yn(C,y))})).apply(this,arguments)}class Ls{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,w,x,$=!1){return(0,D.Z)(function*(){const Z=yield Dn._fromIdTokenResponse(y,x,$),pe=Ri(x);return new Ls({user:Z,providerId:pe,_tokenResponse:x,operationType:w})})()}static _forOperation(y,w,x){return(0,D.Z)(function*(){yield y._updateTokensIfNecessary(x,!0);const $=Ri(x);return new Ls({user:y,providerId:$,_tokenResponse:x,operationType:w})})()}}function Ri(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function vs(){return(vs=(0,D.Z)(function*(C){var y;const w=on(C);if(yield w._initializationPromise,null===(y=w.currentUser)||void 0===y?void 0:y.isAnonymous)return new Ls({user:w.currentUser,providerId:null,operationType:"signIn"});const x=yield Os(w,{returnSecureToken:!0}),$=yield Ls._fromIdTokenResponse(w,"signIn",x,!0);return yield w._updateCurrentUser($.user),$})).apply(this,arguments)}class Ec extends Q.ZR{constructor(y,w,x,$){var Z;super(w.code,w.message),this.operationType=x,this.user=$,Object.setPrototypeOf(this,Ec.prototype),this.customData={appName:y.name,tenantId:null!==(Z=y.tenantId)&&void 0!==Z?Z:void 0,_serverResponse:w.customData._serverResponse,operationType:x}}static _fromErrorAndOperation(y,w,x,$){return new Ec(y,w,x,$)}}function Ic(C,y,w,x){return("reauthenticate"===y?w._getReauthenticationResolver(C):w._getIdTokenResponse(C)).catch(Z=>{throw"auth/multi-factor-auth-required"===Z.code?Ec._fromErrorAndOperation(C,Z,y,x):Z})}function na(C){return new Set(C.map(({providerId:y})=>y).filter(y=>!!y))}function tr(){return(tr=(0,D.Z)(function*(C,y){const w=(0,Q.m9)(C);yield sr(!0,w,y);const{providerUserInfo:x}=yield Mr(w.auth,{idToken:yield w.getIdToken(),deleteProvider:[y]}),$=na(x||[]);return w.providerData=w.providerData.filter(Z=>$.has(Z.providerId)),$.has("phone")||(w.phoneNumber=null),yield w.auth._persistUserIfCurrent(w),w})).apply(this,arguments)}function uu(C,y){return ra.apply(this,arguments)}function ra(){return(ra=(0,D.Z)(function*(C,y,w=!1){const x=yield wi(C,y._linkToIdToken(C.auth,yield C.getIdToken()),w);return Ls._forOperation(C,"link",x)})).apply(this,arguments)}function sr(C,y,w){return $u.apply(this,arguments)}function $u(){return($u=(0,D.Z)(function*(C,y,w){yield ui(y);const $=!1===C?"provider-already-linked":"no-such-provider";ce(na(y.providerData).has(w)===C,y.auth,$)})).apply(this,arguments)}function zl(C,y){return cu.apply(this,arguments)}function cu(){return(cu=(0,D.Z)(function*(C,y,w=!1){var x;const{auth:$}=C,Z="reauthenticate";try{const pe=yield wi(C,Ic($,Z,y,C),w);ce(pe.idToken,$,"internal-error");const ze=rn(pe.idToken);ce(ze,$,"internal-error");const{sub:Dt}=ze;return ce(C.uid===Dt,$,"user-mismatch"),Ls._forOperation(C,Z,pe)}catch(pe){throw"auth/user-not-found"===(null===(x=pe)||void 0===x?void 0:x.code)&&We($,"user-mismatch"),pe}})).apply(this,arguments)}function Gi(C,y){return sd.apply(this,arguments)}function sd(){return(sd=(0,D.Z)(function*(C,y,w=!1){const x="signIn",$=yield Ic(C,x,y),Z=yield Ls._fromIdTokenResponse(C,x,$);return w||(yield C._updateCurrentUser(Z.user)),Z})).apply(this,arguments)}function fr(C,y){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,D.Z)(function*(C,y){return Gi(on(C),y)})).apply(this,arguments)}function Or(C,y){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,D.Z)(function*(C,y){const w=(0,Q.m9)(C);return yield sr(!1,w,y.providerId),uu(w,y)})).apply(this,arguments)}function Us(C,y){return ia.apply(this,arguments)}function ia(){return(ia=(0,D.Z)(function*(C,y){return zl((0,Q.m9)(C),y)})).apply(this,arguments)}function _s(C,y){return li.apply(this,arguments)}function li(){return(li=(0,D.Z)(function*(C,y){return oi(C,"POST","/v1/accounts:signInWithCustomToken",Yn(C,y))})).apply(this,arguments)}function bn(){return(bn=(0,D.Z)(function*(C,y){const w=on(C),x=yield _s(w,{token:y,returnSecureToken:!0}),$=yield Ls._fromIdTokenResponse(w,"signIn",x);return yield w._updateCurrentUser($.user),$})).apply(this,arguments)}class lu{constructor(y,w){this.factorId=y,this.uid=w.mfaEnrollmentId,this.enrollmentTime=new Date(w.enrolledAt).toUTCString(),this.displayName=w.displayName}static _fromServerResponse(y,w){return"phoneInfo"in w?od._fromServerResponse(y,w):We(y,"internal-error")}}class od extends lu{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,w){return new od(w)}}function ll(C,y,w){var x;ce((null===(x=w.url)||void 0===x?void 0:x.length)>0,C,"invalid-continue-uri"),ce(void 0===w.dynamicLinkDomain||w.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),y.continueUrl=w.url,y.dynamicLinkDomain=w.dynamicLinkDomain,y.canHandleCodeInApp=w.handleCodeInApp,w.iOS&&(ce(w.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),y.iOSBundleId=w.iOS.bundleId),w.android&&(ce(w.android.packageName.length>0,C,"missing-android-pkg-name"),y.androidInstallApp=w.android.installApp,y.androidMinimumVersionCode=w.android.minimumVersion,y.androidPackageName=w.android.packageName)}function Gl(){return(Gl=(0,D.Z)(function*(C,y,w){const x=(0,Q.m9)(C),$={requestType:"PASSWORD_RESET",email:y};w&&ll(x,$,w),yield Jo(x,$)})).apply(this,arguments)}function Wl(){return(Wl=(0,D.Z)(function*(C,y,w){yield tt((0,Q.m9)(C),{oobCode:y,newPassword:w})})).apply(this,arguments)}function lt(){return(lt=(0,D.Z)(function*(C,y){yield un((0,Q.m9)(C),{oobCode:y})})).apply(this,arguments)}function Kn(C,y){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,D.Z)(function*(C,y){const w=(0,Q.m9)(C),x=yield tt(w,{oobCode:y}),$=x.requestType;switch(ce($,w,"internal-error"),$){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ce(x.newEmail,w,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ce(x.mfaInfo,w,"internal-error");default:ce(x.email,w,"internal-error")}let Z=null;return x.mfaInfo&&(Z=lu._fromServerResponse(on(w),x.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.newEmail:x.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.email:x.newEmail)||null,multiFactorInfo:Z},operation:$}})).apply(this,arguments)}function ri(){return(ri=(0,D.Z)(function*(C,y){const{data:w}=yield Kn((0,Q.m9)(C),y);return w.email})).apply(this,arguments)}function go(){return(go=(0,D.Z)(function*(C,y,w){const x=on(C),$=yield Os(x,{returnSecureToken:!0,email:y,password:w}),Z=yield Ls._fromIdTokenResponse(x,"signIn",$);return yield x._updateCurrentUser(Z.user),Z})).apply(this,arguments)}function hl(){return(hl=(0,D.Z)(function*(C,y,w){const x=(0,Q.m9)(C),$={requestType:"EMAIL_SIGNIN",email:y};ce(w.handleCodeInApp,x,"argument-error"),w&&ll(x,$,w),yield fs(x,$)})).apply(this,arguments)}function yo(){return(yo=(0,D.Z)(function*(C,y,w){const x=(0,Q.m9)(C),$=Ff.credentialWithLink(y,w||dt());return ce($._tenantId===(x.tenantId||null),x,"tenant-id-mismatch"),fr(x,$)})).apply(this,arguments)}function qi(C,y){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:createAuthUri",Yn(C,y))})).apply(this,arguments)}function Ma(){return(Ma=(0,D.Z)(function*(C,y){const x={identifier:y,continueUri:Wt()?dt():"http://localhost"},{signinMethods:$}=yield qi((0,Q.m9)(C),x);return $||[]})).apply(this,arguments)}function Kl(){return(Kl=(0,D.Z)(function*(C,y){const w=(0,Q.m9)(C),$={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};y&&ll(w.auth,$,y);const{email:Z}=yield zn(w.auth,$);Z!==C.email&&(yield C.reload())})).apply(this,arguments)}function Dc(){return(Dc=(0,D.Z)(function*(C,y,w){const x=(0,Q.m9)(C),Z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:y};w&&ll(x.auth,Z,w);const{email:pe}=yield iu(x.auth,Z);pe!==C.email&&(yield C.reload())})).apply(this,arguments)}function Sc(C,y){return Js.apply(this,arguments)}function Js(){return(Js=(0,D.Z)(function*(C,y){return On(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function xc(){return(xc=(0,D.Z)(function*(C,{displayName:y,photoURL:w}){if(void 0===y&&void 0===w)return;const x=(0,Q.m9)(C),Z={idToken:yield x.getIdToken(),displayName:y,photoUrl:w,returnSecureToken:!0},pe=yield wi(x,Sc(x.auth,Z));x.displayName=pe.displayName||null,x.photoURL=pe.photoUrl||null;const ze=x.providerData.find(({providerId:Dt})=>"password"===Dt);ze&&(ze.displayName=x.displayName,ze.photoURL=x.photoURL),yield x._updateTokensIfNecessary(pe)})).apply(this,arguments)}function Xl(C,y,w){return sa.apply(this,arguments)}function sa(){return(sa=(0,D.Z)(function*(C,y,w){const{auth:x}=C,Z={idToken:yield C.getIdToken(),returnSecureToken:!0};y&&(Z.email=y),w&&(Z.password=w);const pe=yield wi(C,Tt(x,Z));yield C._updateTokensIfNecessary(pe,!0)})).apply(this,arguments)}class zu{constructor(y,w,x={}){this.isNewUser=y,this.providerId=w,this.profile=x}}class Jl extends zu{constructor(y,w,x,$){super(y,w,x),this.username=$}}class Mc extends zu{constructor(y,w){super(y,"facebook.com",w)}}class Ki extends Jl{constructor(y,w){super(y,"github.com",w,"string"==typeof(null==w?void 0:w.login)?null==w?void 0:w.login:null)}}class fl extends zu{constructor(y,w){super(y,"google.com",w)}}class eh extends Jl{constructor(y,w,x){super(y,"twitter.com",w,x)}}function bi(C){const{user:y,_tokenResponse:w}=C;return y.isAnonymous&&!w?{providerId:null,isNewUser:!1,profile:null}:function Ra(C){var y,w;if(!C)return null;const{providerId:x}=C,$=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},Z=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!x&&(null==C?void 0:C.idToken)){const pe=null===(w=null===(y=rn(C.idToken))||void 0===y?void 0:y.firebase)||void 0===w?void 0:w.sign_in_provider;if(pe)return new zu(Z,"anonymous"!==pe&&"custom"!==pe?pe:null)}if(!x)return null;switch(x){case"facebook.com":return new Mc(Z,$);case"github.com":return new Ki(Z,$);case"google.com":return new fl(Z,$);case"twitter.com":return new eh(Z,$,C.screenName||null);case"custom":case"anonymous":return new zu(Z,null);default:return new zu(Z,x,$)}}(w)}class ka{constructor(y,w){this.type=y,this.credential=w}static _fromIdtoken(y){return new ka("enroll",y)}static _fromMfaPendingCredential(y){return new ka("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var w,x;if(null==y?void 0:y.multiFactorSession){if(null===(w=y.multiFactorSession)||void 0===w?void 0:w.pendingCredential)return ka._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null===(x=y.multiFactorSession)||void 0===x?void 0:x.idToken)return ka._fromIdtoken(y.multiFactorSession.idToken)}return null}}class Na{constructor(y,w,x){this.session=y,this.hints=w,this.signInResolver=x}static _fromError(y,w){const x=on(y),$=w.customData._serverResponse,Z=($.mfaInfo||[]).map(ze=>lu._fromServerResponse(x,ze));ce($.mfaPendingCredential,x,"internal-error");const pe=ka._fromMfaPendingCredential($.mfaPendingCredential);return new Na(pe,Z,function(){var ze=(0,D.Z)(function*(Dt){const qt=yield Dt._process(x,pe);delete $.mfaInfo,delete $.mfaPendingCredential;const fn=Object.assign(Object.assign({},$),{idToken:qt.idToken,refreshToken:qt.refreshToken});switch(w.operationType){case"signIn":const cn=yield Ls._fromIdTokenResponse(x,w.operationType,fn);return yield x._updateCurrentUser(cn.user),cn;case"reauthenticate":return ce(w.user,x,"internal-error"),Ls._forOperation(w.user,w.operationType,fn);default:We(x,"internal-error")}});return function(Dt){return ze.apply(this,arguments)}}())}resolveSignIn(y){var w=this;return(0,D.Z)(function*(){return w.signInResolver(y)})()}}function di(C,y){return On(C,"POST","/v2/accounts/mfaEnrollment:start",Yn(C,y))}class kc{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(w=>{w.mfaInfo&&(this.enrolledFactors=w.mfaInfo.map(x=>lu._fromServerResponse(y.auth,x)))})}static _fromUser(y){return new kc(y)}getSession(){var y=this;return(0,D.Z)(function*(){return ka._fromIdtoken(yield y.user.getIdToken())})()}enroll(y,w){var x=this;return(0,D.Z)(function*(){const $=y,Z=yield x.getSession(),pe=yield wi(x.user,$._process(x.user.auth,Z,w));return yield x.user._updateTokensIfNecessary(pe),x.user.reload()})()}unenroll(y){var w=this;return(0,D.Z)(function*(){var x;const $="string"==typeof y?y:y.uid,Z=yield w.user.getIdToken(),pe=yield wi(w.user,function fu(C,y){return On(C,"POST","/v2/accounts/mfaEnrollment:withdraw",Yn(C,y))}(w.user.auth,{idToken:Z,mfaEnrollmentId:$}));w.enrolledFactors=w.enrolledFactors.filter(({uid:ze})=>ze!==$),yield w.user._updateTokensIfNecessary(pe);try{yield w.user.reload()}catch(ze){if("auth/user-token-expired"!==(null===(x=ze)||void 0===x?void 0:x.code))throw ze}})()}}const rh=new WeakMap,oa="__sak";class Zi{constructor(y,w){this.storageRetriever=y,this.type=w}_isAvailable(){try{return this.storage?(this.storage.setItem(oa,"1"),this.storage.removeItem(oa),Promise.resolve(!0)):Promise.resolve(!1)}catch(y){return Promise.resolve(!1)}}_set(y,w){return this.storage.setItem(y,JSON.stringify(w)),Promise.resolve()}_get(y){const w=this.storage.getItem(y);return Promise.resolve(w?JSON.parse(w):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}get storage(){return this.storageRetriever()}}const Bs=(()=>{class C extends Zi{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(w,x)=>this.onStorageEvent(w,x),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function $g(){const C=(0,Q.z$)();return Qo(C)||hs(C)}()&&function ci(){try{return!(!window||window===window.top)}catch(C){return!1}}(),this.fallbackToPolling=Xo(),this._shouldAllowMigration=!0}forAllChangedKeys(w){for(const x of Object.keys(this.listeners)){const $=this.storage.getItem(x),Z=this.localCache[x];$!==Z&&w(x,Z,$)}}onStorageEvent(w,x=!1){if(!w.key)return void this.forAllChangedKeys((ze,Dt,qt)=>{this.notifyListeners(ze,qt)});const $=w.key;if(x?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ze=this.storage.getItem($);if(w.newValue!==ze)null!==w.newValue?this.storage.setItem($,w.newValue):this.storage.removeItem($);else if(this.localCache[$]===w.newValue&&!x)return}const Z=()=>{const ze=this.storage.getItem($);!x&&this.localCache[$]===ze||this.notifyListeners($,ze)},pe=this.storage.getItem($);!function nu(){return(0,Q.w1)()&&10===document.documentMode}()||pe===w.newValue||w.newValue===w.oldValue?Z():setTimeout(Z,10)}notifyListeners(w,x){this.localCache[w]=x;const $=this.listeners[w];if($)for(const Z of Array.from($))Z(x&&JSON.parse(x))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((w,x,$)=>{this.onStorageEvent(new StorageEvent("storage",{key:w,oldValue:x,newValue:$}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(w,x){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[w]||(this.listeners[w]=new Set,this.localCache[w]=this.storage.getItem(w)),this.listeners[w].add(x)}_removeListener(w,x){this.listeners[w]&&(this.listeners[w].delete(x),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(w,x){var $=()=>super._set,Z=this;return(0,D.Z)(function*(){yield $().call(Z,w,x),Z.localCache[w]=JSON.stringify(x)})()}_get(w){var x=()=>super._get,$=this;return(0,D.Z)(function*(){const Z=yield x().call($,w);return $.localCache[w]=JSON.stringify(Z),Z})()}_remove(w){var x=()=>super._remove,$=this;return(0,D.Z)(function*(){yield x().call($,w),delete $.localCache[w]})()}}return C.type="LOCAL",C})(),Lr=(()=>{class C extends Zi{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(w,x){}_removeListener(w,x){}}return C.type="SESSION",C})();let ld=(()=>{class C{constructor(w){this.eventTarget=w,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(w){const x=this.receivers.find(Z=>Z.isListeningto(w));if(x)return x;const $=new C(w);return this.receivers.push($),$}isListeningto(w){return this.eventTarget===w}handleEvent(w){var x=this;return(0,D.Z)(function*(){const $=w,{eventId:Z,eventType:pe,data:ze}=$.data,Dt=x.handlersMap[pe];if(!(null==Dt?void 0:Dt.size))return;$.ports[0].postMessage({status:"ack",eventId:Z,eventType:pe});const qt=Array.from(Dt).map(function(){var cn=(0,D.Z)(function*(Yr){return Yr($.origin,ze)});return function(Yr){return cn.apply(this,arguments)}}()),fn=yield function Pc(C){return Promise.all(C.map(function(){var y=(0,D.Z)(function*(w){try{return{fulfilled:!0,value:yield w}}catch(x){return{fulfilled:!1,reason:x}}});return function(w){return y.apply(this,arguments)}}()))}(qt);$.ports[0].postMessage({status:"done",eventId:Z,eventType:pe,response:fn})})()}_subscribe(w,x){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[w]||(this.handlersMap[w]=new Set),this.handlersMap[w].add(x)}_unsubscribe(w,x){this.handlersMap[w]&&x&&this.handlersMap[w].delete(x),(!x||0===this.handlersMap[w].size)&&delete this.handlersMap[w],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function pu(C="",y=10){let w="";for(let x=0;x<y;x++)w+=Math.floor(10*Math.random());return C+w}class Pa{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,w,x=50){var $=this;return(0,D.Z)(function*(){const Z="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!Z)throw new Error("connection_unavailable");let pe,ze;return new Promise((Dt,qt)=>{const fn=pu("",20);Z.port1.start();const cn=setTimeout(()=>{qt(new Error("unsupported_event"))},x);ze={messageChannel:Z,onMessage(Yr){const So=Yr;if(So.data.eventId===fn)switch(So.data.status){case"ack":clearTimeout(cn),pe=setTimeout(()=>{qt(new Error("timeout"))},3e3);break;case"done":clearTimeout(pe),Dt(So.data.response);break;default:clearTimeout(cn),clearTimeout(pe),qt(new Error("invalid_response"))}}},$.handlers.add(ze),Z.port1.addEventListener("message",ze.onMessage),$.target.postMessage({eventType:y,eventId:fn,data:w},[Z.port2])}).finally(()=>{ze&&$.removeMessageHandler(ze)})})()}}function Fr(){return window}function Bo(){return void 0!==Fr().WorkerGlobalScope&&"function"==typeof Fr().importScripts}function $f(){return($f=(0,D.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(C){return null}})).apply(this,arguments)}const dd="firebaseLocalStorageDb",_o="firebaseLocalStorage",gu="fbase_key";class mu{constructor(y){this.request=y}toPromise(){return new Promise((y,w)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{w(this.request.error)})})}}function Yi(C,y){return C.transaction([_o],y?"readwrite":"readonly").objectStore(_o)}function Gu(){const C=indexedDB.open(dd,1);return new Promise((y,w)=>{C.addEventListener("error",()=>{w(C.error)}),C.addEventListener("upgradeneeded",()=>{const x=C.result;try{x.createObjectStore(_o,{keyPath:gu})}catch($){w($)}}),C.addEventListener("success",(0,D.Z)(function*(){const x=C.result;x.objectStoreNames.contains(_o)?y(x):(x.close(),yield function yu(){const C=indexedDB.deleteDatabase(dd);return new mu(C).toPromise()}(),y(yield Gu()))}))})}function Oc(C,y,w){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,D.Z)(function*(C,y,w){const x=Yi(C,!0).put({[gu]:y,value:w});return new mu(x).toPromise()})).apply(this,arguments)}function vu(){return(vu=(0,D.Z)(function*(C,y){const w=Yi(C,!1).get(y),x=yield new mu(w).toPromise();return void 0===x?null:x.value})).apply(this,arguments)}function Lc(C,y){const w=Yi(C,!0).delete(y);return new mu(w).toPromise()}const Wu=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var w=this;return(0,D.Z)(function*(){return w.db||(w.db=yield Gu()),w.db})()}_withRetries(w){var x=this;return(0,D.Z)(function*(){let $=0;for(;;)try{const Z=yield x._openDb();return yield w(Z)}catch(Z){if($++>3)throw Z;x.db&&(x.db.close(),x.db=void 0)}})()}initializeServiceWorkerMessaging(){var w=this;return(0,D.Z)(function*(){return Bo()?w.initializeReceiver():w.initializeSender()})()}initializeReceiver(){var w=this;return(0,D.Z)(function*(){w.receiver=ld._getInstance(function hd(){return Bo()?self:null}()),w.receiver._subscribe("keyChanged",function(){var x=(0,D.Z)(function*($,Z){return{keyProcessed:(yield w._poll()).includes(Z.key)}});return function($,Z){return x.apply(this,arguments)}}()),w.receiver._subscribe("ping",function(){var x=(0,D.Z)(function*($,Z){return["keyChanged"]});return function($,Z){return x.apply(this,arguments)}}())})()}initializeSender(){var w=this;return(0,D.Z)(function*(){var x,$;if(w.activeServiceWorker=yield function En(){return $f.apply(this,arguments)}(),!w.activeServiceWorker)return;w.sender=new Pa(w.activeServiceWorker);const Z=yield w.sender._send("ping",{},800);!Z||(null===(x=Z[0])||void 0===x?void 0:x.fulfilled)&&(null===($=Z[0])||void 0===$?void 0:$.value.includes("keyChanged"))&&(w.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(w){var x=this;return(0,D.Z)(function*(){if(x.sender&&x.activeServiceWorker&&function Hf(){var C;return(null===(C=null==navigator?void 0:navigator.serviceWorker)||void 0===C?void 0:C.controller)||null}()===x.activeServiceWorker)try{yield x.sender._send("keyChanged",{key:w},x.serviceWorkerReceiverAvailable?800:50)}catch($){}})()}_isAvailable(){return(0,D.Z)(function*(){try{if(!indexedDB)return!1;const w=yield Gu();return yield Oc(w,oa,"1"),yield Lc(w,oa),!0}catch(w){}return!1})()}_withPendingWrite(w){var x=this;return(0,D.Z)(function*(){x.pendingWrites++;try{yield w()}finally{x.pendingWrites--}})()}_set(w,x){var $=this;return(0,D.Z)(function*(){return $._withPendingWrite((0,D.Z)(function*(){return yield $._withRetries(Z=>Oc(Z,w,x)),$.localCache[w]=x,$.notifyServiceWorker(w)}))})()}_get(w){var x=this;return(0,D.Z)(function*(){const $=yield x._withRetries(Z=>function qu(C,y){return vu.apply(this,arguments)}(Z,w));return x.localCache[w]=$,$})()}_remove(w){var x=this;return(0,D.Z)(function*(){return x._withPendingWrite((0,D.Z)(function*(){return yield x._withRetries($=>Lc($,w)),delete x.localCache[w],x.notifyServiceWorker(w)}))})()}_poll(){var w=this;return(0,D.Z)(function*(){const x=yield w._withRetries(pe=>{const ze=Yi(pe,!1).getAll();return new mu(ze).toPromise()});if(!x)return[];if(0!==w.pendingWrites)return[];const $=[],Z=new Set;for(const{fbase_key:pe,value:ze}of x)Z.add(pe),JSON.stringify(w.localCache[pe])!==JSON.stringify(ze)&&(w.notifyListeners(pe,ze),$.push(pe));for(const pe of Object.keys(w.localCache))w.localCache[pe]&&!Z.has(pe)&&(w.notifyListeners(pe,null),$.push(pe));return $})()}notifyListeners(w,x){this.localCache[w]=x;const $=this.listeners[w];if($)for(const Z of Array.from($))Z(x)}startPolling(){var w=this;this.stopPolling(),this.pollTimer=setInterval((0,D.Z)(function*(){return w._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(w,x){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[w]||(this.listeners[w]=new Set,this._get(w)),this.listeners[w].add(x)}_removeListener(w,x){this.listeners[w]&&(this.listeners[w].delete(x),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})();function Ii(C,y){return On(C,"POST","/v2/accounts/mfaSignIn:start",Yn(C,y))}function fi(){return(fi=(0,D.Z)(function*(C){return(yield On(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function jo(C){return new Promise((y,w)=>{const x=document.createElement("script");x.setAttribute("src",C),x.onload=y,x.onerror=$=>{const Z=Ke("internal-error");Z.customData=$,w(Z)},x.type="text/javascript",x.charset="UTF-8",function wo(){var C,y;return null!==(y=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==y?y:document}().appendChild(x)})}function to(C){return`__${C}${Math.floor(1e6*Math.random())}`}const ws=1e12;class Wr{constructor(y){this.auth=y,this.counter=ws,this._widgets=new Map}render(y,w){const x=this.counter;return this._widgets.set(x,new Ci(y,this.auth.name,w||{})),this.counter++,x}reset(y){var w;const x=y||ws;null===(w=this._widgets.get(x))||void 0===w||w.delete(),this._widgets.delete(x)}getResponse(y){var w;return(null===(w=this._widgets.get(y||ws))||void 0===w?void 0:w.getResponse())||""}execute(y){var w=this;return(0,D.Z)(function*(){var x;return null===(x=w._widgets.get(y||ws))||void 0===x||x.execute(),""})()}}class Ci{constructor(y,w,x){this.params=x,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const $="string"==typeof y?document.getElementById(y):y;ce($,"argument-error",{appName:w}),this.container=$,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Uc(C){const y=[],w="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let x=0;x<C;x++)y.push(w.charAt(Math.floor(Math.random()*w.length)));return y.join("")}(50);const{callback:y,"expired-callback":w}=this.params;if(y)try{y(this.responseToken)}catch(x){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,w)try{w()}catch(x){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const pl=to("rcb"),jr=new Fn(3e4,6e4);class r0{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Fr().grecaptcha}load(y,w=""){return ce(function ua(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(w),y,"argument-error"),this.shouldResolveImmediately(w)?Promise.resolve(Fr().grecaptcha):new Promise((x,$)=>{const Z=Fr().setTimeout(()=>{$(Ke(y,"network-request-failed"))},jr.get());Fr()[pl]=()=>{Fr().clearTimeout(Z),delete Fr()[pl];const ze=Fr().grecaptcha;if(!ze)return void $(Ke(y,"internal-error"));const Dt=ze.render;ze.render=(qt,fn)=>{const cn=Dt(qt,fn);return this.counter++,cn},this.hostLanguage=w,x(ze)},jo(`https://www.google.com/recaptcha/api.js??${(0,Q.xO)({onload:pl,render:"explicit",hl:w})}`).catch(()=>{clearTimeout(Z),$(Ke(y,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){return!!Fr().grecaptcha&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Qi{load(y){return(0,D.Z)(function*(){return new Wr(y)})()}clearedOneInstance(){}}const pd="recaptcha",Fa={theme:"light",type:"image"};class Gf{constructor(y,w=Object.assign({},Fa),x){this.parameters=w,this.type=pd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=on(x),this.isInvisible="invisible"===this.parameters.size,ce("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const $="string"==typeof y?document.getElementById(y):y;ce($,this.auth,"argument-error"),this.container=$,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Qi:new r0,this.validateStartingState()}verify(){var y=this;return(0,D.Z)(function*(){y.assertNotDestroyed();const w=yield y.render(),x=y.getAssertedRecaptcha();return x.getResponse(w)||new Promise(Z=>{const pe=ze=>{!ze||(y.tokenChangeListeners.delete(pe),Z(ze))};y.tokenChangeListeners.add(pe),y.isInvisible&&x.execute(w)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){ce(!this.parameters.sitekey,this.auth,"argument-error"),ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ce("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return w=>{if(this.tokenChangeListeners.forEach(x=>x(w)),"function"==typeof y)y(w);else if("string"==typeof y){const x=Fr()[y];"function"==typeof x&&x(w)}}}assertNotDestroyed(){ce(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,D.Z)(function*(){if(yield y.init(),!y.widgetId){let w=y.container;if(!y.isInvisible){const x=document.createElement("div");w.appendChild(x),w=x}y.widgetId=y.getAssertedRecaptcha().render(w,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,D.Z)(function*(){ce(Wt()&&!Bo(),y.auth,"internal-error"),yield function Ua(){let C=null;return new Promise(y=>{"complete"!==document.readyState?(C=()=>y(),window.addEventListener("load",C)):y()}).catch(y=>{throw C&&window.removeEventListener("load",C),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const w=yield function Vo(C){return fi.apply(this,arguments)}(y.auth);ce(w,y.auth,"internal-error"),y.parameters.sitekey=w})()}getAssertedRecaptcha(){return ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class gl{constructor(y,w){this.verificationId=y,this.onConfirmation=w}confirm(y){const w=vc._fromVerification(this.verificationId,y);return this.onConfirmation(w)}}function ml(){return(ml=(0,D.Z)(function*(C,y,w){const x=on(C),$=yield Pi(x,y,(0,Q.m9)(w));return new gl($,Z=>fr(x,Z))})).apply(this,arguments)}function qf(){return(qf=(0,D.Z)(function*(C,y,w){const x=(0,Q.m9)(C);yield sr(!1,x,"phone");const $=yield Pi(x.auth,y,(0,Q.m9)(w));return new gl($,Z=>Or(x,Z))})).apply(this,arguments)}function Ni(){return(Ni=(0,D.Z)(function*(C,y,w){const x=(0,Q.m9)(C),$=yield Pi(x.auth,y,(0,Q.m9)(w));return new gl($,Z=>Us(x,Z))})).apply(this,arguments)}function Pi(C,y,w){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,D.Z)(function*(C,y,w){var x;const $=yield w.verify();try{let Z;if(ce("string"==typeof $,C,"argument-error"),ce(w.type===pd,C,"argument-error"),Z="string"==typeof y?{phoneNumber:y}:y,"session"in Z){const pe=Z.session;if("phoneNumber"in Z)return ce("enroll"===pe.type,C,"internal-error"),(yield di(C,{idToken:pe.credential,phoneEnrollmentInfo:{phoneNumber:Z.phoneNumber,recaptchaToken:$}})).phoneSessionInfo.sessionInfo;{ce("signin"===pe.type,C,"internal-error");const ze=(null===(x=Z.multiFactorHint)||void 0===x?void 0:x.uid)||Z.multiFactorUid;return ce(ze,C,"missing-multi-factor-info"),(yield Ii(C,{mfaPendingCredential:pe.credential,mfaEnrollmentId:ze,phoneSignInInfo:{recaptchaToken:$}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:pe}=yield Og(C,{phoneNumber:Z.phoneNumber,recaptchaToken:$});return pe}}finally{w._reset()}})).apply(this,arguments)}function Ho(){return(Ho=(0,D.Z)(function*(C,y){yield uu((0,Q.m9)(C),y)})).apply(this,arguments)}let zo=(()=>{class C{constructor(w){this.providerId=C.PROVIDER_ID,this.auth=on(w)}verifyPhoneNumber(w,x){return Pi(this.auth,w,(0,Q.m9)(x))}static credential(w,x){return vc._fromVerification(w,x)}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{phoneNumber:x,temporaryProof:$}=w;return x&&$?vc._fromTokenResponse(x,$):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function bo(C,y){return y?Te(y):(ce(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class _u extends me{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return su(y,this._buildIdpRequest())}_linkToIdToken(y,w){return su(y,this._buildIdpRequest(w))}_getReauthenticationResolver(y){return su(y,this._buildIdpRequest())}_buildIdpRequest(y){const w={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(w.idToken=y),w}}function xn(C){return Gi(C.auth,new _u(C),C.bypassAuthState)}function ca(C){const{auth:y,user:w}=C;return ce(w,y,"internal-error"),zl(w,new _u(C),C.bypassAuthState)}function Vc(C){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,D.Z)(function*(C){const{auth:y,user:w}=C;return ce(w,y,"internal-error"),uu(w,new _u(C),C.bypassAuthState)})).apply(this,arguments)}class yl{constructor(y,w,x,$,Z=!1){this.auth=y,this.resolver=x,this.user=$,this.bypassAuthState=Z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(w)?w:[w]}execute(){var y=this;return new Promise(function(){var w=(0,D.Z)(function*(x,$){y.pendingPromise={resolve:x,reject:$};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(Z){y.reject(Z)}});return function(x,$){return w.apply(this,arguments)}}())}onAuthEvent(y){var w=this;return(0,D.Z)(function*(){const{urlResponse:x,sessionId:$,postBody:Z,tenantId:pe,error:ze,type:Dt}=y;if(ze)return void w.reject(ze);const qt={auth:w.auth,requestUri:x,sessionId:$,tenantId:pe||void 0,postBody:Z||void 0,user:w.user,bypassAuthState:w.bypassAuthState};try{w.resolve(yield w.getIdpTask(Dt)(qt))}catch(fn){w.reject(fn)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return xn;case"linkViaPopup":case"linkViaRedirect":return Vc;case"reauthViaPopup":case"reauthViaRedirect":return ca;default:We(this.auth,"internal-error")}}resolve(y){fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const jc=new Fn(2e3,1e4);function Ba(){return(Ba=(0,D.Z)(function*(C,y,w){const x=on(C);ut(C,y,ms);const $=bo(x,w);return new Zf(x,"signInViaPopup",y,$).executeNotNull()})).apply(this,arguments)}function vl(){return(vl=(0,D.Z)(function*(C,y,w){const x=(0,Q.m9)(C);ut(x.auth,y,ms);const $=bo(x.auth,w);return new Zf(x.auth,"reauthViaPopup",y,$,x).executeNotNull()})).apply(this,arguments)}function la(){return(la=(0,D.Z)(function*(C,y,w){const x=(0,Q.m9)(C);ut(x.auth,y,ms);const $=bo(x.auth,w);return new Zf(x.auth,"linkViaPopup",y,$,x).executeNotNull()})).apply(this,arguments)}let Zf=(()=>{class C extends yl{constructor(w,x,$,Z,pe){super(w,x,Z,pe),this.provider=$,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var w=this;return(0,D.Z)(function*(){const x=yield w.execute();return ce(x,w.auth,"internal-error"),x})()}onExecution(){var w=this;return(0,D.Z)(function*(){fe(1===w.filter.length,"Popup operations only handle one event");const x=pu();w.authWindow=yield w.resolver._openPopup(w.auth,w.provider,w.filter[0],x),w.authWindow.associatedEvent=x,w.resolver._originValidation(w.auth).catch($=>{w.reject($)}),w.resolver._isIframeWebStorageSupported(w.auth,$=>{$||w.reject(Ke(w.auth,"web-storage-unsupported"))}),w.pollUserCancellation()})()}get eventId(){var w;return(null===(w=this.authWindow)||void 0===w?void 0:w.associatedEvent)||null}cancel(){this.reject(Ke(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const w=()=>{var x,$;this.pollId=(null===($=null===(x=this.authWindow)||void 0===x?void 0:x.window)||void 0===$?void 0:$.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ke(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(w,jc.get())};w()}}return C.currentPopupAction=null,C})();const Xi=new Map;class gd extends yl{constructor(y,w,x=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],w,void 0,x),this.eventId=null}execute(){var y=()=>super.execute,w=this;return(0,D.Z)(function*(){let x=Xi.get(w.auth._key());if(!x){try{const Z=(yield function Hg(C,y){return wu.apply(this,arguments)}(w.resolver,w.auth))?yield y().call(w):null;x=()=>Promise.resolve(Z)}catch($){x=()=>Promise.reject($)}Xi.set(w.auth._key(),x)}return w.bypassAuthState||Xi.set(w.auth._key(),()=>Promise.resolve(null)),x()})()}onAuthEvent(y){var w=()=>super.onAuthEvent,x=this;return(0,D.Z)(function*(){if("signInViaRedirect"===y.type)return w().call(x,y);if("unknown"!==y.type){if(y.eventId){const $=yield x.auth._redirectUserForId(y.eventId);if($)return x.user=$,w().call(x,y);x.resolve(null)}}else x.resolve(null)})()}onExecution(){return(0,D.Z)(function*(){})()}cleanUp(){}}function wu(){return(wu=(0,D.Z)(function*(C,y){const w=re(y),x=W(C);if(!(yield x._isAvailable()))return!1;const $="true"===(yield x._get(w));return yield x._remove(w),$})).apply(this,arguments)}function $c(C,y){return _l.apply(this,arguments)}function _l(){return(_l=(0,D.Z)(function*(C,y){return W(C)._set(re(y),"true")})).apply(this,arguments)}function B(C,y){Xi.set(C._key(),y)}function W(C){return Te(C._redirectPersistence)}function re(C){return Bn("pendingRedirect",C.config.apiKey,C.name)}function He(){return(He=(0,D.Z)(function*(C,y,w){const x=on(C);ut(C,y,ms);const $=bo(x,w);return yield $c($,x),$._openRedirect(x,y,"signInViaRedirect")})).apply(this,arguments)}function wn(){return(wn=(0,D.Z)(function*(C,y,w){const x=(0,Q.m9)(C);ut(x.auth,y,ms);const $=bo(x.auth,w);yield $c($,x.auth);const Z=yield ja(x);return $._openRedirect(x.auth,y,"reauthViaRedirect",Z)})).apply(this,arguments)}function Ur(){return(Ur=(0,D.Z)(function*(C,y,w){const x=(0,Q.m9)(C);ut(x.auth,y,ms);const $=bo(x.auth,w);yield sr(!1,x,y.providerId),yield $c($,x.auth);const Z=yield ja(x);return $._openRedirect(x.auth,y,"linkViaRedirect",Z)})).apply(this,arguments)}function Va(){return(Va=(0,D.Z)(function*(C,y){return yield on(C)._initializationPromise,Eo(C,y,!1)})).apply(this,arguments)}function Eo(C,y){return Io.apply(this,arguments)}function Io(){return(Io=(0,D.Z)(function*(C,y,w=!1){const x=on(C),$=bo(x,y),pe=yield new gd(x,$,w).execute();return pe&&!w&&(delete pe.user._redirectEventId,yield x._persistUserIfCurrent(pe.user),yield x._setRedirectUser(null,y)),pe})).apply(this,arguments)}function ja(C){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,D.Z)(function*(C){const y=pu(`${C.uid}:::`);return C._redirectEventId=y,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),y})).apply(this,arguments)}class qo{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let w=!1;return this.consumers.forEach(x=>{this.isEventForConsumer(y,x)&&(w=!0,this.sendToConsumer(y,x),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function Yf(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zc(C);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,w||(this.queuedRedirectEvent=y,w=!0)),w}sendToConsumer(y,w){var x;if(y.error&&!zc(y)){const $=(null===(x=y.error.code)||void 0===x?void 0:x.split("auth/")[1])||"internal-error";w.onError(Ke(this.auth,$))}else w.onAuthEvent(y)}isEventForConsumer(y,w){const x=null===w.eventId||!!y.eventId&&y.eventId===w.eventId;return w.filter.includes(y.type)&&x}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($a(y))}saveEventToCache(y){this.cachedEventUids.add($a(y)),this.lastProcessedEventTime=Date.now()}}function $a(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(y=>y).join("-")}function zc({type:C,error:y}){return"unknown"===C&&"auth/no-auth-event"===(null==y?void 0:y.code)}function zg(C){return Gg.apply(this,arguments)}function Gg(){return(Gg=(0,D.Z)(function*(C,y={}){return On(C,"GET","/v1/projects",y)})).apply(this,arguments)}const Qf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sh=/^https?/;function qg(){return(qg=(0,D.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:y}=yield zg(C);for(const w of y)try{if(xb(w))return}catch(x){}We(C,"unauthorized-domain")})).apply(this,arguments)}function xb(C){const y=dt(),{protocol:w,hostname:x}=new URL(y);if(C.startsWith("chrome-extension://")){const pe=new URL(C);return""===pe.hostname&&""===x?"chrome-extension:"===w&&C.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===w&&pe.hostname===x}if(!sh.test(w))return!1;if(Qf.test(C))return x===C;const $=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+$+"|"+$+")$","i").test(x)}const Ha=new Fn(3e4,6e4);function Xf(){const C=Fr().___jsl;if(null==C?void 0:C.H)for(const y of Object.keys(C.H))if(C.H[y].r=C.H[y].r||[],C.H[y].L=C.H[y].L||[],C.H[y].r=[...C.H[y].L],C.CP)for(let w=0;w<C.CP.length;w++)C.CP[w]=null}let za=null;function Yu(C){return za=za||function Wg(C){return new Promise((y,w)=>{var x,$,Z;function pe(){Xf(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{Xf(),w(Ke(C,"network-request-failed"))},timeout:Ha.get()})}if(null===($=null===(x=Fr().gapi)||void 0===x?void 0:x.iframes)||void 0===$?void 0:$.Iframe)y(gapi.iframes.getContext());else{if(!(null===(Z=Fr().gapi)||void 0===Z?void 0:Z.load)){const ze=to("iframefcb");return Fr()[ze]=()=>{gapi.load?pe():w(Ke(C,"network-request-failed"))},jo(`https://apis.google.com/js/api.js?onload=${ze}`).catch(Dt=>w(Dt))}pe()}}).catch(y=>{throw za=null,y})}(C),za}const oh=new Fn(5e3,15e3),ah={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jf(C){const y=C.config;ce(y.authDomain,C,"auth-domain-config-required");const w=y.emulator?cr(y,"emulator/auth/iframe"):`https://${C.config.authDomain}/__/auth/iframe`,x={apiKey:y.apiKey,appName:C.name,v:Ue.SDK_VERSION},$=uh.get(C.config.apiHost);$&&(x.eid=$);const Z=C._getFrameworks();return Z.length&&(x.fw=Z.join(",")),`${w}?${(0,Q.xO)(x).slice(1)}`}function Qu(){return Qu=(0,D.Z)(function*(C){const y=yield Yu(C),w=Fr().gapi;return ce(w,C,"internal-error"),y.open({where:document.body,url:Jf(C),messageHandlersFilter:w.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ah,dontclear:!0},x=>new Promise(function(){var $=(0,D.Z)(function*(Z,pe){yield x.restyle({setHideOnLeave:!1});const ze=Ke(C,"network-request-failed"),Dt=Fr().setTimeout(()=>{pe(ze)},oh.get());function qt(){Fr().clearTimeout(Dt),Z(x)}x.ping(qt).then(qt,()=>{pe(ze)})});return function(Z,pe){return $.apply(this,arguments)}}()))}),Qu.apply(this,arguments)}const ep={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qy{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(y){}}}function Wo(C,y,w,x,$,Z){ce(C.config.authDomain,C,"auth-domain-config-required"),ce(C.config.apiKey,C,"invalid-api-key");const pe={apiKey:C.config.apiKey,appName:C.name,authType:w,redirectUrl:x,v:Ue.SDK_VERSION,eventId:$};if(y instanceof ms){y.setDefaultLanguage(C.languageCode),pe.providerId=y.providerId||"",(0,Q.xb)(y.getCustomParameters())||(pe.customParameters=JSON.stringify(y.getCustomParameters()));for(const[Dt,qt]of Object.entries(Z||{}))pe[Dt]=qt}if(y instanceof Vu){const Dt=y.getScopes().filter(qt=>""!==qt);Dt.length>0&&(pe.scopes=Dt.join(","))}C.tenantId&&(pe.tid=C.tenantId);const ze=pe;for(const Dt of Object.keys(ze))void 0===ze[Dt]&&delete ze[Dt];return`${function Xu({config:C}){return C.emulator?cr(C,"emulator/auth/handler"):`https://${C.authDomain}/__/auth/handler`}(C)}?${(0,Q.xO)(ze).slice(1)}`}const lh="webStorageSupport";class rp extends class Mb{constructor(y){this.factorId=y}_process(y,w,x){switch(w.type){case"enroll":return this._finalizeEnroll(y,w.credential,x);case"signin":return this._finalizeSignIn(y,w.credential);default:return Ze("unexpected MultiFactorSessionType")}}}{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new rp(y)}_finalizeEnroll(y,w,x){return function nh(C,y){return On(C,"POST","/v2/accounts/mfaEnrollment:finalize",Yn(C,y))}(y,{idToken:w,displayName:x,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,w){return function fd(C,y){return On(C,"POST","/v2/accounts/mfaSignIn:finalize",Yn(C,y))}(y,{mfaPendingCredential:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Rb=(()=>{class C{constructor(){}static assertion(w){return rp._fromCredential(w)}}return C.FACTOR_ID="phone",C})();var Zg="@firebase/auth";class Yy{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var w=this;return(0,D.Z)(function*(){return w.assertAuthConfigured(),yield w.auth._initializationPromise,w.auth.currentUser?{accessToken:yield w.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const w=this.auth.onIdTokenChanged(x=>{var $;y((null===($=x)||void 0===$?void 0:$.stsTokenManager.accessToken)||null)});this.internalListeners.set(y,w),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const w=this.internalListeners.get(y);!w||(this.internalListeners.delete(y),w(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ga(){return window}function ha(){return(ha=(0,D.Z)(function*(C,y,w){var x;const{BuildInfo:$}=Ga();fe(y.sessionId,"AuthEvent did not contain a session ID");const Z=yield u0(y.sessionId),pe={};return hs()?pe.ibi=$.packageName:kr()?pe.apn=$.packageName:We(C,"operation-not-supported-in-this-environment"),$.displayName&&(pe.appDisplayName=$.displayName),pe.sessionId=Z,Wo(C,w,y.type,void 0,null!==(x=y.eventId)&&void 0!==x?x:void 0,pe)})).apply(this,arguments)}function Cd(){return(Cd=(0,D.Z)(function*(C){const{BuildInfo:y}=Ga(),w={};hs()?w.iosBundleId=y.packageName:kr()?w.androidPackageName=y.packageName:We(C,"operation-not-supported-in-this-environment"),yield zg(C,w)})).apply(this,arguments)}function op(){return(op=(0,D.Z)(function*(C,y,w){const{cordova:x}=Ga();let $=()=>{};try{yield new Promise((Z,pe)=>{let ze=null;function Dt(){var cn;Z();const Yr=null===(cn=x.plugins.browsertab)||void 0===cn?void 0:cn.close;"function"==typeof Yr&&Yr(),"function"==typeof(null==w?void 0:w.close)&&w.close()}function qt(){ze||(ze=window.setTimeout(()=>{pe(Ke(C,"redirect-cancelled-by-user"))},2e3))}function fn(){"visible"===(null==document?void 0:document.visibilityState)&&qt()}y.addPassiveListener(Dt),document.addEventListener("resume",qt,!1),kr()&&document.addEventListener("visibilitychange",fn,!1),$=()=>{y.removePassiveListener(Dt),document.removeEventListener("resume",qt,!1),document.removeEventListener("visibilitychange",fn,!1),ze&&window.clearTimeout(ze)}})}finally{$()}})).apply(this,arguments)}function u0(C){return Td.apply(this,arguments)}function Td(){return(Td=(0,D.Z)(function*(C){const y=Dd(C),w=yield crypto.subtle.digest("SHA-256",y);return Array.from(new Uint8Array(w)).map($=>$.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Dd(C){if(fe(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(C);const y=new ArrayBuffer(C.length),w=new Uint8Array(y);for(let x=0;x<C.length;x++)w[x]=C.charCodeAt(x);return w}!function sp(C){(0,Ue._registerComponent)(new Ve.wA("auth",(y,{options:w})=>{const x=y.getProvider("app").getImmediate(),$=y.getProvider("heartbeat"),{apiKey:Z,authDomain:pe}=x.options;return((ze,Dt)=>{ce(Z&&!Z.includes(":"),"invalid-api-key",{appName:ze.name}),ce(!(null==pe?void 0:pe.includes(":")),"argument-error",{appName:ze.name});const qt={apiKey:Z,authDomain:pe,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ru(C)},fn=new Ct(ze,Dt,qt);return function Ne(C,y){const w=(null==y?void 0:y.persistence)||[],x=(Array.isArray(w)?w:[w]).map(Te);(null==y?void 0:y.errorMap)&&C._updateErrorMap(y.errorMap),C._initializeWithPersistence(x,null==y?void 0:y.popupRedirectResolver)}(fn,w),fn})(x,$)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,w,x)=>{y.getProvider("auth-internal").initialize()})),(0,Ue._registerComponent)(new Ve.wA("auth-internal",y=>{const w=on(y.getProvider("auth").getImmediate());return new Yy(w)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ue.registerVersion)(Zg,"0.20.4",function ip(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,Ue.registerVersion)(Zg,"0.20.4","esm2017")}("Browser");class ap extends qo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(y=>{this.resolveInialized=y})}addPassiveListener(y){this.passiveListeners.add(y)}removePassiveListener(y){this.passiveListeners.delete(y)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(y){return this.resolveInialized(),this.passiveListeners.forEach(w=>w(y)),super.onEvent(y)}initialized(){var y=this;return(0,D.Z)(function*(){yield y.initPromise})()}}function wl(C){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,D.Z)(function*(C){const y=yield dh()._get(Gc(C));return y&&(yield dh()._remove(Gc(C))),y})).apply(this,arguments)}function Ad(){const C=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<20;w++){const x=Math.floor(Math.random()*y.length);C.push(y.charAt(x))}return C.join("")}function dh(){return Te(Bs)}function Gc(C){return Bn("authEvent",C.config.apiKey,C.name)}function Ji(C){if(!(null==C?void 0:C.includes("?")))return{};const[y,...w]=C.split("?");return(0,Q.zd)(w.join("?"))}function qc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ke("no-auth-event")}}function Wc(){var C;return(null===(C=null==self?void 0:self.location)||void 0===C?void 0:C.protocol)||null}function cp(C=(0,Q.z$)()){return!("file:"!==Wc()&&"ionic:"!==Wc()&&"capacitor:"!==Wc()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function Xg(){try{const C=self.localStorage,y=pu();if(C)return C.setItem(y,"1"),C.removeItem(y),!function lp(C=(0,Q.z$)()){return function ph(){return(0,Q.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Oi(C=(0,Q.z$)()){return/Edge\/\d+/.test(C)}(C)}()||(0,Q.hl)()}catch(C){return gh()&&(0,Q.hl)()}return!1}function gh(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Li(){return(function ev(){return"http:"===Wc()||"https:"===Wc()}()||(0,Q.ru)()||cp())&&!function Md(){return(0,Q.b$)()||(0,Q.UG)()}()&&Xg()&&!gh()}function bl(){return cp()&&"undefined"!=typeof document}function Kc(){return(Kc=(0,D.Z)(function*(){return!!bl()&&new Promise(C=>{const y=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(y),C(!0)})})})).apply(this,arguments)}const Vs={LOCAL:"local",NONE:"none",SESSION:"session"},Zc=ce,Jg="persistence";function ec(C){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,D.Z)(function*(C){yield C._initializationPromise;const y=Eu(),w=Bn(Jg,C.config.apiKey,C.name);y&&y.setItem(w,C._getPersistence())})).apply(this,arguments)}function Eu(){var C;try{return(null===(C=function tv(){return"undefined"!=typeof window?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch(y){return null}}const d0=ce;class Co{constructor(){this.browserResolver=Te(class Kg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lr,this._completeRedirectFn=Eo,this._overrideRedirectResult=B}_openPopup(y,w,x,$){var Z=this;return(0,D.Z)(function*(){var pe;fe(null===(pe=Z.eventManagers[y._key()])||void 0===pe?void 0:pe.manager,"_initialize() not called before _openPopup()");const ze=Wo(y,w,x,dt(),$);return function ch(C,y,w,x=500,$=600){const Z=Math.max((window.screen.availHeight-$)/2,0).toString(),pe=Math.max((window.screen.availWidth-x)/2,0).toString();let ze="";const Dt=Object.assign(Object.assign({},ep),{width:x.toString(),height:$.toString(),top:Z,left:pe}),qt=(0,Q.z$)().toLowerCase();w&&(ze=xa(qt)?"_blank":w),Aa(qt)&&(y=y||"http://localhost",Dt.scrollbars="yes");const fn=Object.entries(Dt).reduce((Yr,[So,yh])=>`${Yr}${So}=${yh},`,"");if(function Uo(C=(0,Q.z$)()){var y;return hs(C)&&!!(null===(y=window.navigator)||void 0===y?void 0:y.standalone)}(qt)&&"_self"!==ze)return function s0(C,y){const w=document.createElement("a");w.href=C,w.target=y;const x=document.createEvent("MouseEvent");x.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),w.dispatchEvent(x)}(y||"",ze),new qy(null);const cn=window.open(y||"",ze,fn);ce(cn,C,"popup-blocked");try{cn.focus()}catch(Yr){}return new qy(cn)}(y,ze,pu())})()}_openRedirect(y,w,x,$){var Z=this;return(0,D.Z)(function*(){return yield Z._originValidation(y),function aa(C){Fr().location.href=C}(Wo(y,w,x,dt(),$)),new Promise(()=>{})})()}_initialize(y){const w=y._key();if(this.eventManagers[w]){const{manager:$,promise:Z}=this.eventManagers[w];return $?Promise.resolve($):(fe(Z,"If manager is not set, promise should be"),Z)}const x=this.initAndGetManager(y);return this.eventManagers[w]={promise:x},x.catch(()=>{delete this.eventManagers[w]}),x}initAndGetManager(y){var w=this;return(0,D.Z)(function*(){const x=yield function Gy(C){return Qu.apply(this,arguments)}(y),$=new qo(y);return x.register("authEvent",Z=>(ce(null==Z?void 0:Z.authEvent,y,"invalid-auth-event"),{status:$.onEvent(Z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),w.eventManagers[y._key()]={manager:$},w.iframes[y._key()]=x,$})()}_isIframeWebStorageSupported(y,w){this.iframes[y._key()].send(lh,{type:lh},$=>{var Z;const pe=null===(Z=null==$?void 0:$[0])||void 0===Z?void 0:Z[lh];void 0!==pe&&w(!!pe),We(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const w=y._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function md(C){return qg.apply(this,arguments)}(y)),this.originValidationPromises[w]}get _shouldInitProactively(){return Xo()||Qo()||hs()}}),this.cordovaResolver=Te(class Jy{constructor(){this._redirectPersistence=Lr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Eo,this._overrideRedirectResult=B}_initialize(y){var w=this;return(0,D.Z)(function*(){const x=y._key();let $=w.eventManagers.get(x);return $||($=new ap(y),w.eventManagers.set(x,$),w.attachCallbackListeners(y,$)),$})()}_openPopup(y){We(y,"operation-not-supported-in-this-environment")}_openRedirect(y,w,x,$){var Z=this;return(0,D.Z)(function*(){!function hh(C){var y,w,x,$,Z,pe,ze,Dt,qt,fn;const cn=Ga();ce("function"==typeof(null===(y=null==cn?void 0:cn.universalLinks)||void 0===y?void 0:y.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ce(void 0!==(null===(w=null==cn?void 0:cn.BuildInfo)||void 0===w?void 0:w.packageName),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ce("function"==typeof(null===(Z=null===($=null===(x=null==cn?void 0:cn.cordova)||void 0===x?void 0:x.plugins)||void 0===$?void 0:$.browsertab)||void 0===Z?void 0:Z.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ce("function"==typeof(null===(Dt=null===(ze=null===(pe=null==cn?void 0:cn.cordova)||void 0===pe?void 0:pe.plugins)||void 0===ze?void 0:ze.browsertab)||void 0===Dt?void 0:Dt.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ce("function"==typeof(null===(fn=null===(qt=null==cn?void 0:cn.cordova)||void 0===qt?void 0:qt.InAppBrowser)||void 0===fn?void 0:fn.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(y);const pe=yield Z._initialize(y);yield pe.initialized(),pe.resetRedirect(),function F(){Xi.clear()}(),yield Z._originValidation(y);const ze=function up(C,y,w=null){return{type:y,eventId:w,urlResponse:null,sessionId:Ad(),postBody:null,tenantId:C.tenantId,error:Ke(C,"no-auth-event")}}(y,x,$);yield function Qy(C,y){return dh()._set(Gc(C),y)}(y,ze);const Dt=yield function Ed(C,y,w){return ha.apply(this,arguments)}(y,ze,w),qt=yield function Ju(C){const{cordova:y}=Ga();return new Promise(w=>{y.plugins.browsertab.isAvailable(x=>{let $=null;x?y.plugins.browsertab.openUrl(C):$=y.InAppBrowser.open(C,function $l(C=(0,Q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}()?"_blank":"_system","location=yes"),w($)})})}(Dt);return function qa(C,y,w){return op.apply(this,arguments)}(y,pe,qt)})()}_isIframeWebStorageSupported(y,w){throw new Error("Method not implemented.")}_originValidation(y){const w=y._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function Id(C){return Cd.apply(this,arguments)}(y)),this.originValidationPromises[w]}attachCallbackListeners(y,w){const{universalLinks:x,handleOpenURL:$,BuildInfo:Z}=Ga(),pe=setTimeout((0,D.Z)(function*(){yield wl(y),w.onEvent(qc())}),500),ze=function(){var fn=(0,D.Z)(function*(cn){clearTimeout(pe);const Yr=yield wl(y);let So=null;Yr&&(null==cn?void 0:cn.url)&&(So=function Xy(C,y){var w,x;const $=function bu(C){const y=Ji(C),w=y.link?decodeURIComponent(y.link):void 0,x=Ji(w).link,$=y.deep_link_id?decodeURIComponent(y.deep_link_id):void 0;return Ji($).link||$||x||w||C}(y);if($.includes("/__/auth/callback")){const Z=Ji($),pe=Z.firebaseError?function fh(C){try{return JSON.parse(C)}catch(y){return null}}(decodeURIComponent(Z.firebaseError)):null,ze=null===(x=null===(w=null==pe?void 0:pe.code)||void 0===w?void 0:w.split("auth/"))||void 0===x?void 0:x[1],Dt=ze?Ke(ze):null;return Dt?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:Dt,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:$,postBody:null}}return null}(Yr,cn.url)),w.onEvent(So||qc())});return function(Yr){return fn.apply(this,arguments)}}();void 0!==x&&"function"==typeof x.subscribe&&x.subscribe(null,ze);const Dt=$,qt=`${Z.packageName.toLowerCase()}://`;Ga().handleOpenURL=function(){var fn=(0,D.Z)(function*(cn){if(cn.toLowerCase().startsWith(qt)&&ze({url:cn}),"function"==typeof Dt)try{Dt(cn)}catch(Yr){console.error(Yr)}});return function(cn){return fn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Lr,this._completeRedirectFn=Eo,this._overrideRedirectResult=B}_initialize(y){var w=this;return(0,D.Z)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._initialize(y)})()}_openPopup(y,w,x,$){var Z=this;return(0,D.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openPopup(y,w,x,$)})()}_openRedirect(y,w,x,$){var Z=this;return(0,D.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openRedirect(y,w,x,$)})()}_isIframeWebStorageSupported(y,w){this.assertedUnderlyingResolver._isIframeWebStorageSupported(y,w)}_originValidation(y){return this.assertedUnderlyingResolver._originValidation(y)}get _shouldInitProactively(){return bl()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return d0(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var y=this;return(0,D.Z)(function*(){if(y.underlyingResolver)return;const w=yield function hp(){return Kc.apply(this,arguments)}();y.underlyingResolver=w?y.cordovaResolver:y.browserResolver})()}}function Wa(C){return C.unwrap()}function p0(C){return nv(C)}function nv(C){const{_tokenResponse:y}=C instanceof Q.ZR?C.customData:C;if(!y)return null;if(!(C instanceof Q.ZR)&&"temporaryProof"in y&&"phoneNumber"in y)return zo.credentialFromResult(C);const w=y.providerId;if(!w||"password"===w)return null;let x;switch(w){case"google.com":x=Uf;break;case"facebook.com":x=_c;break;case"github.com":x=Fg;break;case"twitter.com":x=Vf;break;default:const{oauthIdToken:$,oauthAccessToken:Z,oauthTokenSecret:pe,pendingToken:ze,nonce:Dt}=y;return Z||pe||$||ze?ze?w.startsWith("saml.")?ju._create(w,ze):ea._fromParams({providerId:w,signInMethod:w,pendingToken:ze,idToken:$,accessToken:Z}):new ta(w).credential({idToken:$,accessToken:Z,rawNonce:Dt}):null}return C instanceof Q.ZR?x.credentialFromError(C):x.credentialFromResult(C)}function To(C,y){return y.catch(w=>{throw w instanceof Q.ZR&&function dp(C,y){var w,x;const $=null===(w=y.customData)||void 0===w?void 0:w._tokenResponse;if("auth/multi-factor-auth-required"===(null===(x=y)||void 0===x?void 0:x.code))y.resolver=new fp(C,function Ei(C,y){var w;const x=(0,Q.m9)(C),$=y;return ce(y.customData.operationType,x,"argument-error"),ce(null===(w=$.customData._serverResponse)||void 0===w?void 0:w.mfaPendingCredential,x,"argument-error"),Na._fromError(x,$)}(C,y));else if($){const Z=nv(y),pe=y;Z&&(pe.credential=Z,pe.tenantId=$.tenantId||void 0,pe.email=$.email||void 0,pe.phoneNumber=$.phoneNumber||void 0)}}(C,w),w}).then(w=>{const $=w.user;return{operationType:w.operationType,credential:p0(w),additionalUserInfo:bi(w),user:Ti.getOrCreate($)}})}function em(C,y){return Do.apply(this,arguments)}function Do(){return(Do=(0,D.Z)(function*(C,y){const w=yield y;return{verificationId:w.verificationId,confirm:x=>To(C,w.confirm(x))}})).apply(this,arguments)}class fp{constructor(y,w){this.resolver=w,this.auth=function f0(C){return C.wrapped()}(y)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(y){return To(Wa(this.auth),this.resolver.resolveSignIn(y))}}class Ti{constructor(y){this._delegate=y,this.multiFactor=function jg(C){const y=(0,Q.m9)(C);return rh.has(y)||rh.set(y,kc._fromUser(y)),rh.get(y)}(y)}static getOrCreate(y){return Ti.USER_MAP.has(y)||Ti.USER_MAP.set(y,new Ti(y)),Ti.USER_MAP.get(y)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(y){return this._delegate.getIdTokenResult(y)}getIdToken(y){return this._delegate.getIdToken(y)}linkAndRetrieveDataWithCredential(y){return this.linkWithCredential(y)}linkWithCredential(y){var w=this;return(0,D.Z)(function*(){return To(w.auth,Or(w._delegate,y))})()}linkWithPhoneNumber(y,w){var x=this;return(0,D.Z)(function*(){return em(x.auth,function ih(C,y,w){return qf.apply(this,arguments)}(x._delegate,y,w))})()}linkWithPopup(y){var w=this;return(0,D.Z)(function*(){return To(w.auth,function Kf(C,y,w){return la.apply(this,arguments)}(w._delegate,y,Co))})()}linkWithRedirect(y){var w=this;return(0,D.Z)(function*(){return yield ec(on(w.auth)),function Vn(C,y,w){return function hn(C,y,w){return Ur.apply(this,arguments)}(C,y,w)}(w._delegate,y,Co)})()}reauthenticateAndRetrieveDataWithCredential(y){return this.reauthenticateWithCredential(y)}reauthenticateWithCredential(y){var w=this;return(0,D.Z)(function*(){return To(w.auth,Us(w._delegate,y))})()}reauthenticateWithPhoneNumber(y,w){return em(this.auth,function Wf(C,y,w){return Ni.apply(this,arguments)}(this._delegate,y,w))}reauthenticateWithPopup(y){return To(this.auth,function no(C,y,w){return vl.apply(this,arguments)}(this._delegate,y,Co))}reauthenticateWithRedirect(y){var w=this;return(0,D.Z)(function*(){return yield ec(on(w.auth)),function Nt(C,y,w){return function Kt(C,y,w){return wn.apply(this,arguments)}(C,y,w)}(w._delegate,y,Co)})()}sendEmailVerification(y){return function Wi(C,y){return Kl.apply(this,arguments)}(this._delegate,y)}unlink(y){var w=this;return(0,D.Z)(function*(){return yield function id(C,y){return tr.apply(this,arguments)}(w._delegate,y),w})()}updateEmail(y){return function Yl(C,y){return Xl((0,Q.m9)(C),y,null)}(this._delegate,y)}updatePassword(y){return function Ql(C,y){return Xl((0,Q.m9)(C),null,y)}(this._delegate,y)}updatePhoneNumber(y){return function Zu(C,y){return Ho.apply(this,arguments)}(this._delegate,y)}updateProfile(y){return function Ac(C,y){return xc.apply(this,arguments)}(this._delegate,y)}verifyBeforeUpdateEmail(y,w){return function Zl(C,y,w){return Dc.apply(this,arguments)}(this._delegate,y,w)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ti.USER_MAP=new WeakMap;const kd=ce;let rv=(()=>{class C{constructor(w,x){if(this.app=w,x.isInitialized())return this._delegate=x.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:$}=w.options;kd($,"invalid-api-key",{appName:w.name}),kd($,"invalid-api-key",{appName:w.name});const Z="undefined"!=typeof window?Co:void 0;this._delegate=x.initialize({options:{persistence:sv($,w.name),popupRedirectResolver:Z}}),this._delegate._updateErrorMap(Qe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ti.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(w){this._delegate.languageCode=w}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(w){this._delegate.tenantId=w}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(w,x){!function ds(C,y,w){const x=on(C);ce(x._canInitEmulator,x,"emulator-config-failed"),ce(/^https?:\/\//.test(y),x,"invalid-emulator-scheme");const $=!!(null==w?void 0:w.disableWarnings),Z=ho(y),{host:pe,port:ze}=function qr(C){const y=ho(C),w=/(\/\/)?([^?#/]+)/.exec(C.substr(y.length));if(!w)return{host:"",port:null};const x=w[2].split("@").pop()||"",$=/^(\[[^\]]+\])(:|$)/.exec(x);if($){const Z=$[1];return{host:Z,port:fo(x.substr(Z.length+1))}}{const[Z,pe]=x.split(":");return{host:Z,port:fo(pe)}}}(y);x.config.emulator={url:`${Z}//${pe}${null===ze?"":`:${ze}`}/`},x.settings.appVerificationDisabledForTesting=!0,x.emulatorConfig=Object.freeze({host:pe,port:ze,protocol:Z.replace(":",""),options:Object.freeze({disableWarnings:$})}),$||function J(){function C(){const y=document.createElement("p"),w=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",w.position="fixed",w.width="100%",w.backgroundColor="#ffffff",w.border=".1em solid #000000",w.color="#b50000",w.bottom="0px",w.left="0px",w.margin="0px",w.zIndex="10000",w.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}(this._delegate,w,x)}applyActionCode(w){return function Qs(C,y){return lt.apply(this,arguments)}(this._delegate,w)}checkActionCode(w){return Kn(this._delegate,w)}confirmPasswordReset(w,x){return function ql(C,y,w){return Wl.apply(this,arguments)}(this._delegate,w,x)}createUserWithEmailAndPassword(w,x){var $=this;return(0,D.Z)(function*(){return To($._delegate,function hu(C,y,w){return go.apply(this,arguments)}($._delegate,w,x))})()}fetchProvidersForEmail(w){return this.fetchSignInMethodsForEmail(w)}fetchSignInMethodsForEmail(w){return function dl(C,y){return Ma.apply(this,arguments)}(this._delegate,w)}isSignInWithEmailLink(w){return function ud(C,y){const w=Hl.parseLink(y);return"EMAIL_SIGNIN"===(null==w?void 0:w.operation)}(0,w)}getRedirectResult(){var w=this;return(0,D.Z)(function*(){kd(Li(),w._delegate,"operation-not-supported-in-this-environment");const x=yield function ro(C,y){return Va.apply(this,arguments)}(w._delegate,Co);return x?To(w._delegate,Promise.resolve(x)):{credential:null,user:null}})()}addFrameworkForLogging(w){!function Qg(C,y){on(C)._logFramework(y)}(this._delegate,w)}onAuthStateChanged(w,x,$){const{next:Z,error:pe,complete:ze}=iv(w,x,$);return this._delegate.onAuthStateChanged(Z,pe,ze)}onIdTokenChanged(w,x,$){const{next:Z,error:pe,complete:ze}=iv(w,x,$);return this._delegate.onIdTokenChanged(Z,pe,ze)}sendSignInLinkToEmail(w,x){return function mo(C,y,w){return hl.apply(this,arguments)}(this._delegate,w,x)}sendPasswordResetEmail(w,x){return function ad(C,y,w){return Gl.apply(this,arguments)}(this._delegate,w,x||void 0)}setPersistence(w){var x=this;return(0,D.Z)(function*(){let $;switch(function h0(C,y){Zc(Object.values(Vs).includes(y),C,"invalid-persistence-type"),(0,Q.b$)()?Zc(y!==Vs.SESSION,C,"unsupported-persistence-type"):(0,Q.UG)()?Zc(y===Vs.NONE,C,"unsupported-persistence-type"):gh()?Zc(y===Vs.NONE||y===Vs.LOCAL&&(0,Q.hl)(),C,"unsupported-persistence-type"):Zc(y===Vs.NONE||Xg(),C,"unsupported-persistence-type")}(x._delegate,w),w){case Vs.SESSION:$=Lr;break;case Vs.LOCAL:$=(yield Te(Wu)._isAvailable())?Wu:Bs;break;case Vs.NONE:$=or;break;default:return We("argument-error",{appName:x._delegate.name})}return x._delegate.setPersistence($)})()}signInAndRetrieveDataWithCredential(w){return this.signInWithCredential(w)}signInAnonymously(){return To(this._delegate,function au(C){return vs.apply(this,arguments)}(this._delegate))}signInWithCredential(w){return To(this._delegate,fr(this._delegate,w))}signInWithCustomToken(w){return To(this._delegate,function Cc(C,y){return bn.apply(this,arguments)}(this._delegate,w))}signInWithEmailAndPassword(w,x){return To(this._delegate,function Tc(C,y,w){return fr((0,Q.m9)(C),Ff.credential(y,w))}(this._delegate,w,x))}signInWithEmailLink(w,x){return To(this._delegate,function Ug(C,y,w){return yo.apply(this,arguments)}(this._delegate,w,x))}signInWithPhoneNumber(w,x){return em(this._delegate,function Kr(C,y,w){return ml.apply(this,arguments)}(this._delegate,w,x))}signInWithPopup(w){var x=this;return(0,D.Z)(function*(){return kd(Li(),x._delegate,"operation-not-supported-in-this-environment"),To(x._delegate,function zy(C,y,w){return Ba.apply(this,arguments)}(x._delegate,w,Co))})()}signInWithRedirect(w){var x=this;return(0,D.Z)(function*(){return kd(Li(),x._delegate,"operation-not-supported-in-this-environment"),yield ec(x._delegate),function we(C,y,w){return function Pe(C,y,w){return He.apply(this,arguments)}(C,y,w)}(x._delegate,w,Co)})()}updateCurrentUser(w){return this._delegate.updateCurrentUser(w)}verifyPasswordResetCode(w){return function pr(C,y){return ri.apply(this,arguments)}(this._delegate,w)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=Vs,C})();function iv(C,y,w){let x=C;"function"!=typeof C&&({next:x,error:y,complete:w}=C);const $=x;return{next:pe=>$(pe&&Ti.getOrCreate(pe)),error:y,complete:w}}function sv(C,y){const w=function El(C,y){const w=Eu();if(!w)return[];const x=Bn(Jg,C,y);switch(w.getItem(x)){case Vs.NONE:return[or];case Vs.LOCAL:return[Wu,Lr];case Vs.SESSION:return[Lr];default:return[]}}(C,y);if("undefined"!=typeof self&&!w.includes(Wu)&&w.push(Wu),"undefined"!=typeof window)for(const x of[Bs,Lr])w.includes(x)||w.push(x);return w.includes(or)||w.push(or),w}class pp{constructor(){this.providerId="phone",this._delegate=new zo(Wa(be.Z.auth()))}static credential(y,w){return zo.credential(y,w)}verifyPhoneNumber(y,w){return this._delegate.verifyPhoneNumber(y,w)}unwrap(){return this._delegate}}pp.PHONE_SIGN_IN_METHOD=zo.PHONE_SIGN_IN_METHOD,pp.PROVIDER_ID=zo.PROVIDER_ID;const Nd=ce;class mh{constructor(y,w,x=be.Z.app()){var $;Nd(null===($=x.options)||void 0===$?void 0:$.apiKey,"invalid-api-key",{appName:x.name}),this._delegate=new Gf(y,w,x.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Il(C){C.INTERNAL.registerComponent(new Ve.wA("auth-compat",y=>{const w=y.getProvider("app-compat").getImmediate(),x=y.getProvider("auth");return new rv(w,x)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ff,FacebookAuthProvider:_c,GithubAuthProvider:Fg,GoogleAuthProvider:Uf,OAuthProvider:ta,SAMLAuthProvider:ys,PhoneAuthProvider:pp,PhoneMultiFactorGenerator:Rb,RecaptchaVerifier:mh,TwitterAuthProvider:Vf,Auth:rv,AuthCredential:me,Error:Q.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.2.17")}(be.Z)},8306:(jt,et,M)=>{"use strict";M.d(et,{y:()=>ae});var D=M(2961),be=M(727),Q=M(8822),Ue=M(4671);var Ve=M(2416),Le=M(576),Fe=M(2806);let ae=(()=>{class ot{constructor(Et){Et&&(this._subscribe=Et)}lift(Et){const ge=new ot;return ge.source=this,ge.operator=Et,ge}subscribe(Et,ge,Me){const ht=function Rt(ot){return ot&&ot instanceof D.Lv||function ye(ot){return ot&&(0,Le.m)(ot.next)&&(0,Le.m)(ot.error)&&(0,Le.m)(ot.complete)}(ot)&&(0,be.Nn)(ot)}(Et)?Et:new D.Hp(Et,ge,Me);return(0,Fe.x)(()=>{const{operator:bt,source:We}=this;ht.add(bt?bt.call(ht,We):We?this._subscribe(ht):this._trySubscribe(ht))}),ht}_trySubscribe(Et){try{return this._subscribe(Et)}catch(ge){Et.error(ge)}}forEach(Et,ge){return new(ge=ue(ge))((Me,ht)=>{const bt=new D.Hp({next:We=>{try{Et(We)}catch(Ke){ht(Ke),bt.unsubscribe()}},error:ht,complete:Me});this.subscribe(bt)})}_subscribe(Et){var ge;return null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(Et)}[Q.L](){return this}pipe(...Et){return function Be(ot){return 0===ot.length?Ue.y:1===ot.length?ot[0]:function(Et){return ot.reduce((ge,Me)=>Me(ge),Et)}}(Et)(this)}toPromise(Et){return new(Et=ue(Et))((ge,Me)=>{let ht;this.subscribe(bt=>ht=bt,bt=>Me(bt),()=>ge(ht))})}}return ot.create=Qe=>new ot(Qe),ot})();function ue(ot){var Qe;return null!==(Qe=null!=ot?ot:Ve.v.Promise)&&void 0!==Qe?Qe:Promise}},7579:(jt,et,M)=>{"use strict";M.d(et,{x:()=>Ve});var D=M(8306),be=M(727);const Ue=(0,M(3888).d)(Fe=>function(){Fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var xe=M(8737),Be=M(2806);let Ve=(()=>{class Fe extends D.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ue){const ye=new Le(this,this);return ye.operator=ue,ye}_throwIfClosed(){if(this.closed)throw new Ue}next(ue){(0,Be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ye of this.currentObservers)ye.next(ue)}})}error(ue){(0,Be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ue;const{observers:ye}=this;for(;ye.length;)ye.shift().error(ue)}})}complete(){(0,Be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ue}=this;for(;ue.length;)ue.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ue;return(null===(ue=this.observers)||void 0===ue?void 0:ue.length)>0}_trySubscribe(ue){return this._throwIfClosed(),super._trySubscribe(ue)}_subscribe(ue){return this._throwIfClosed(),this._checkFinalizedStatuses(ue),this._innerSubscribe(ue)}_innerSubscribe(ue){const{hasError:ye,isStopped:Rt,observers:ot}=this;return ye||Rt?be.Lc:(this.currentObservers=null,ot.push(ue),new be.w0(()=>{this.currentObservers=null,(0,xe.P)(ot,ue)}))}_checkFinalizedStatuses(ue){const{hasError:ye,thrownError:Rt,isStopped:ot}=this;ye?ue.error(Rt):ot&&ue.complete()}asObservable(){const ue=new D.y;return ue.source=this,ue}}return Fe.create=(ae,ue)=>new Le(ae,ue),Fe})();class Le extends Ve{constructor(ae,ue){super(),this.destination=ae,this.source=ue}next(ae){var ue,ye;null===(ye=null===(ue=this.destination)||void 0===ue?void 0:ue.next)||void 0===ye||ye.call(ue,ae)}error(ae){var ue,ye;null===(ye=null===(ue=this.destination)||void 0===ue?void 0:ue.error)||void 0===ye||ye.call(ue,ae)}complete(){var ae,ue;null===(ue=null===(ae=this.destination)||void 0===ae?void 0:ae.complete)||void 0===ue||ue.call(ae)}_subscribe(ae){var ue,ye;return null!==(ye=null===(ue=this.source)||void 0===ue?void 0:ue.subscribe(ae))&&void 0!==ye?ye:be.Lc}}},2961:(jt,et,M)=>{"use strict";M.d(et,{Hp:()=>Et,Lv:()=>ye});var D=M(576),be=M(727),Q=M(2416),Ue=M(7849);function xe(){}const Be=Fe("C",void 0,void 0);function Fe(We,Ke,Xe){return{kind:We,value:Ke,error:Xe}}var ae=M(3410),ue=M(2806);class ye extends be.w0{constructor(Ke){super(),this.isStopped=!1,Ke?(this.destination=Ke,(0,be.Nn)(Ke)&&Ke.add(this)):this.destination=bt}static create(Ke,Xe,ut){return new Et(Ke,Xe,ut)}next(Ke){this.isStopped?ht(function Le(We){return Fe("N",We,void 0)}(Ke),this):this._next(Ke)}error(Ke){this.isStopped?ht(function Ve(We){return Fe("E",void 0,We)}(Ke),this):(this.isStopped=!0,this._error(Ke))}complete(){this.isStopped?ht(Be,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ke){this.destination.next(Ke)}_error(Ke){try{this.destination.error(Ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Rt=Function.prototype.bind;function ot(We,Ke){return Rt.call(We,Ke)}class Qe{constructor(Ke){this.partialObserver=Ke}next(Ke){const{partialObserver:Xe}=this;if(Xe.next)try{Xe.next(Ke)}catch(ut){ge(ut)}}error(Ke){const{partialObserver:Xe}=this;if(Xe.error)try{Xe.error(Ke)}catch(ut){ge(ut)}else ge(Ke)}complete(){const{partialObserver:Ke}=this;if(Ke.complete)try{Ke.complete()}catch(Xe){ge(Xe)}}}class Et extends ye{constructor(Ke,Xe,ut){let vt;if(super(),(0,D.m)(Ke)||!Ke)vt={next:null!=Ke?Ke:void 0,error:null!=Xe?Xe:void 0,complete:null!=ut?ut:void 0};else{let ce;this&&Q.v.useDeprecatedNextContext?(ce=Object.create(Ke),ce.unsubscribe=()=>this.unsubscribe(),vt={next:Ke.next&&ot(Ke.next,ce),error:Ke.error&&ot(Ke.error,ce),complete:Ke.complete&&ot(Ke.complete,ce)}):vt=Ke}this.destination=new Qe(vt)}}function ge(We){Q.v.useDeprecatedSynchronousErrorHandling?(0,ue.O)(We):(0,Ue.h)(We)}function ht(We,Ke){const{onStoppedNotification:Xe}=Q.v;Xe&&ae.z.setTimeout(()=>Xe(We,Ke))}const bt={closed:!0,next:xe,error:function Me(We){throw We},complete:xe}},727:(jt,et,M)=>{"use strict";M.d(et,{Lc:()=>Be,w0:()=>xe,Nn:()=>Ve});var D=M(576);const Q=(0,M(3888).d)(Fe=>function(ue){Fe(this),this.message=ue?`${ue.length} errors occurred during unsubscription:\n${ue.map((ye,Rt)=>`${Rt+1}) ${ye.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ue});var Ue=M(8737);class xe{constructor(ae){this.initialTeardown=ae,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ae;if(!this.closed){this.closed=!0;const{_parentage:ue}=this;if(ue)if(this._parentage=null,Array.isArray(ue))for(const ot of ue)ot.remove(this);else ue.remove(this);const{initialTeardown:ye}=this;if((0,D.m)(ye))try{ye()}catch(ot){ae=ot instanceof Q?ot.errors:[ot]}const{_finalizers:Rt}=this;if(Rt){this._finalizers=null;for(const ot of Rt)try{Le(ot)}catch(Qe){ae=null!=ae?ae:[],Qe instanceof Q?ae=[...ae,...Qe.errors]:ae.push(Qe)}}if(ae)throw new Q(ae)}}add(ae){var ue;if(ae&&ae!==this)if(this.closed)Le(ae);else{if(ae instanceof xe){if(ae.closed||ae._hasParent(this))return;ae._addParent(this)}(this._finalizers=null!==(ue=this._finalizers)&&void 0!==ue?ue:[]).push(ae)}}_hasParent(ae){const{_parentage:ue}=this;return ue===ae||Array.isArray(ue)&&ue.includes(ae)}_addParent(ae){const{_parentage:ue}=this;this._parentage=Array.isArray(ue)?(ue.push(ae),ue):ue?[ue,ae]:ae}_removeParent(ae){const{_parentage:ue}=this;ue===ae?this._parentage=null:Array.isArray(ue)&&(0,Ue.P)(ue,ae)}remove(ae){const{_finalizers:ue}=this;ue&&(0,Ue.P)(ue,ae),ae instanceof xe&&ae._removeParent(this)}}xe.EMPTY=(()=>{const Fe=new xe;return Fe.closed=!0,Fe})();const Be=xe.EMPTY;function Ve(Fe){return Fe instanceof xe||Fe&&"closed"in Fe&&(0,D.m)(Fe.remove)&&(0,D.m)(Fe.add)&&(0,D.m)(Fe.unsubscribe)}function Le(Fe){(0,D.m)(Fe)?Fe():Fe.unsubscribe()}},2416:(jt,et,M)=>{"use strict";M.d(et,{v:()=>D});const D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(jt,et,M)=>{"use strict";M.d(et,{E:()=>be});const be=new(M(8306).y)(xe=>xe.complete())},8996:(jt,et,M)=>{"use strict";M.d(et,{D:()=>Ke});var D=M(8421),be=M(5363),Q=M(9468),Be=M(8306),Le=M(2202),Fe=M(576),ae=M(9672);function ye(Xe,ut){if(!Xe)throw new Error("Iterable cannot be null");return new Be.y(vt=>{(0,ae.f)(vt,ut,()=>{const ce=Xe[Symbol.asyncIterator]();(0,ae.f)(vt,ut,()=>{ce.next().then(Ze=>{Ze.done?vt.complete():vt.next(Ze.value)})},0,!0)})})}var Rt=M(3670),ot=M(8239),Qe=M(1144),Et=M(6495),ge=M(2206),Me=M(4532),ht=M(3260);function Ke(Xe,ut){return ut?function We(Xe,ut){if(null!=Xe){if((0,Rt.c)(Xe))return function Ue(Xe,ut){return(0,D.Xf)(Xe).pipe((0,Q.R)(ut),(0,be.Q)(ut))}(Xe,ut);if((0,Qe.z)(Xe))return function Ve(Xe,ut){return new Be.y(vt=>{let ce=0;return ut.schedule(function(){ce===Xe.length?vt.complete():(vt.next(Xe[ce++]),vt.closed||this.schedule())})})}(Xe,ut);if((0,ot.t)(Xe))return function xe(Xe,ut){return(0,D.Xf)(Xe).pipe((0,Q.R)(ut),(0,be.Q)(ut))}(Xe,ut);if((0,ge.D)(Xe))return ye(Xe,ut);if((0,Et.T)(Xe))return function ue(Xe,ut){return new Be.y(vt=>{let ce;return(0,ae.f)(vt,ut,()=>{ce=Xe[Le.h](),(0,ae.f)(vt,ut,()=>{let Ze,fe;try{({value:Ze,done:fe}=ce.next())}catch(Re){return void vt.error(Re)}fe?vt.complete():vt.next(Ze)},0,!0)}),()=>(0,Fe.m)(null==ce?void 0:ce.return)&&ce.return()})}(Xe,ut);if((0,ht.L)(Xe))return function bt(Xe,ut){return ye((0,ht.Q)(Xe),ut)}(Xe,ut)}throw(0,Me.z)(Xe)}(Xe,ut):(0,D.Xf)(Xe)}},8421:(jt,et,M)=>{"use strict";M.d(et,{Xf:()=>Rt});var D=M(655),be=M(1144),Q=M(8239),Ue=M(8306),xe=M(3670),Be=M(2206),Ve=M(4532),Le=M(6495),Fe=M(3260),ae=M(576),ue=M(7849),ye=M(8822);function Rt(We){if(We instanceof Ue.y)return We;if(null!=We){if((0,xe.c)(We))return function ot(We){return new Ue.y(Ke=>{const Xe=We[ye.L]();if((0,ae.m)(Xe.subscribe))return Xe.subscribe(Ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(We);if((0,be.z)(We))return function Qe(We){return new Ue.y(Ke=>{for(let Xe=0;Xe<We.length&&!Ke.closed;Xe++)Ke.next(We[Xe]);Ke.complete()})}(We);if((0,Q.t)(We))return function Et(We){return new Ue.y(Ke=>{We.then(Xe=>{Ke.closed||(Ke.next(Xe),Ke.complete())},Xe=>Ke.error(Xe)).then(null,ue.h)})}(We);if((0,Be.D)(We))return Me(We);if((0,Le.T)(We))return function ge(We){return new Ue.y(Ke=>{for(const Xe of We)if(Ke.next(Xe),Ke.closed)return;Ke.complete()})}(We);if((0,Fe.L)(We))return function ht(We){return Me((0,Fe.Q)(We))}(We)}throw(0,Ve.z)(We)}function Me(We){return new Ue.y(Ke=>{(function bt(We,Ke){var Xe,ut,vt,ce;return(0,D.mG)(this,void 0,void 0,function*(){try{for(Xe=(0,D.KL)(We);!(ut=yield Xe.next()).done;)if(Ke.next(ut.value),Ke.closed)return}catch(Ze){vt={error:Ze}}finally{try{ut&&!ut.done&&(ce=Xe.return)&&(yield ce.call(Xe))}finally{if(vt)throw vt.error}}Ke.complete()})})(We,Ke).catch(Xe=>Ke.error(Xe))})}},6451:(jt,et,M)=>{"use strict";M.d(et,{T:()=>Be});var D=M(8189),be=M(8421),Q=M(515),Ue=M(7669),xe=M(8996);function Be(...Ve){const Le=(0,Ue.yG)(Ve),Fe=(0,Ue._6)(Ve,1/0),ae=Ve;return ae.length?1===ae.length?(0,be.Xf)(ae[0]):(0,D.J)(Fe)((0,xe.D)(ae,Le)):Q.E}},5403:(jt,et,M)=>{"use strict";M.d(et,{x:()=>be});var D=M(2961);function be(Ue,xe,Be,Ve,Le){return new Q(Ue,xe,Be,Ve,Le)}class Q extends D.Lv{constructor(xe,Be,Ve,Le,Fe,ae){super(xe),this.onFinalize=Fe,this.shouldUnsubscribe=ae,this._next=Be?function(ue){try{Be(ue)}catch(ye){xe.error(ye)}}:super._next,this._error=Le?function(ue){try{Le(ue)}catch(ye){xe.error(ye)}finally{this.unsubscribe()}}:super._error,this._complete=Ve?function(){try{Ve()}catch(ue){xe.error(ue)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var xe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Be}=this;super.unsubscribe(),!Be&&(null===(xe=this.onFinalize)||void 0===xe||xe.call(this))}}}},4004:(jt,et,M)=>{"use strict";M.d(et,{U:()=>Q});var D=M(4482),be=M(5403);function Q(Ue,xe){return(0,D.e)((Be,Ve)=>{let Le=0;Be.subscribe((0,be.x)(Ve,Fe=>{Ve.next(Ue.call(xe,Fe,Le++))}))})}},8189:(jt,et,M)=>{"use strict";M.d(et,{J:()=>Q});var D=M(5577),be=M(4671);function Q(Ue=1/0){return(0,D.z)(be.y,Ue)}},5577:(jt,et,M)=>{"use strict";M.d(et,{z:()=>Le});var D=M(4004),be=M(8421),Q=M(4482),Ue=M(9672),xe=M(5403),Ve=M(576);function Le(Fe,ae,ue=1/0){return(0,Ve.m)(ae)?Le((ye,Rt)=>(0,D.U)((ot,Qe)=>ae(ye,ot,Rt,Qe))((0,be.Xf)(Fe(ye,Rt))),ue):("number"==typeof ae&&(ue=ae),(0,Q.e)((ye,Rt)=>function Be(Fe,ae,ue,ye,Rt,ot,Qe,Et){const ge=[];let Me=0,ht=0,bt=!1;const We=()=>{bt&&!ge.length&&!Me&&ae.complete()},Ke=ut=>Me<ye?Xe(ut):ge.push(ut),Xe=ut=>{ot&&ae.next(ut),Me++;let vt=!1;(0,be.Xf)(ue(ut,ht++)).subscribe((0,xe.x)(ae,ce=>{null==Rt||Rt(ce),ot?Ke(ce):ae.next(ce)},()=>{vt=!0},void 0,()=>{if(vt)try{for(Me--;ge.length&&Me<ye;){const ce=ge.shift();Qe?(0,Ue.f)(ae,Qe,()=>Xe(ce)):Xe(ce)}We()}catch(ce){ae.error(ce)}}))};return Fe.subscribe((0,xe.x)(ae,Ke,()=>{bt=!0,We()})),()=>{null==Et||Et()}}(ye,Rt,Fe,ue)))}},5363:(jt,et,M)=>{"use strict";M.d(et,{Q:()=>Ue});var D=M(9672),be=M(4482),Q=M(5403);function Ue(xe,Be=0){return(0,be.e)((Ve,Le)=>{Ve.subscribe((0,Q.x)(Le,Fe=>(0,D.f)(Le,xe,()=>Le.next(Fe),Be),()=>(0,D.f)(Le,xe,()=>Le.complete(),Be),Fe=>(0,D.f)(Le,xe,()=>Le.error(Fe),Be)))})}},3099:(jt,et,M)=>{"use strict";M.d(et,{B:()=>Be});var D=M(8996),be=M(5698),Q=M(7579),Ue=M(2961),xe=M(4482);function Be(Le={}){const{connector:Fe=(()=>new Q.x),resetOnError:ae=!0,resetOnComplete:ue=!0,resetOnRefCountZero:ye=!0}=Le;return Rt=>{let ot=null,Qe=null,Et=null,ge=0,Me=!1,ht=!1;const bt=()=>{null==Qe||Qe.unsubscribe(),Qe=null},We=()=>{bt(),ot=Et=null,Me=ht=!1},Ke=()=>{const Xe=ot;We(),null==Xe||Xe.unsubscribe()};return(0,xe.e)((Xe,ut)=>{ge++,!ht&&!Me&&bt();const vt=Et=null!=Et?Et:Fe();ut.add(()=>{ge--,0===ge&&!ht&&!Me&&(Qe=Ve(Ke,ye))}),vt.subscribe(ut),ot||(ot=new Ue.Hp({next:ce=>vt.next(ce),error:ce=>{ht=!0,bt(),Qe=Ve(We,ae,ce),vt.error(ce)},complete:()=>{Me=!0,bt(),Qe=Ve(We,ue),vt.complete()}}),(0,D.D)(Xe).subscribe(ot))})(Rt)}}function Ve(Le,Fe,...ae){return!0===Fe?(Le(),null):!1===Fe?null:Fe(...ae).pipe((0,be.q)(1)).subscribe(()=>Le())}},9468:(jt,et,M)=>{"use strict";M.d(et,{R:()=>be});var D=M(4482);function be(Q,Ue=0){return(0,D.e)((xe,Be)=>{Be.add(Q.schedule(()=>xe.subscribe(Be),Ue))})}},5698:(jt,et,M)=>{"use strict";M.d(et,{q:()=>Ue});var D=M(515),be=M(4482),Q=M(5403);function Ue(xe){return xe<=0?()=>D.E:(0,be.e)((Be,Ve)=>{let Le=0;Be.subscribe((0,Q.x)(Ve,Fe=>{++Le<=xe&&(Ve.next(Fe),xe<=Le&&Ve.complete())}))})}},8505:(jt,et,M)=>{"use strict";M.d(et,{b:()=>xe});var D=M(576),be=M(4482),Q=M(5403),Ue=M(4671);function xe(Be,Ve,Le){const Fe=(0,D.m)(Be)||Ve||Le?{next:Be,error:Ve,complete:Le}:Be;return Fe?(0,be.e)((ae,ue)=>{var ye;null===(ye=Fe.subscribe)||void 0===ye||ye.call(Fe);let Rt=!0;ae.subscribe((0,Q.x)(ue,ot=>{var Qe;null===(Qe=Fe.next)||void 0===Qe||Qe.call(Fe,ot),ue.next(ot)},()=>{var ot;Rt=!1,null===(ot=Fe.complete)||void 0===ot||ot.call(Fe),ue.complete()},ot=>{var Qe;Rt=!1,null===(Qe=Fe.error)||void 0===Qe||Qe.call(Fe,ot),ue.error(ot)},()=>{var ot,Qe;Rt&&(null===(ot=Fe.unsubscribe)||void 0===ot||ot.call(Fe)),null===(Qe=Fe.finalize)||void 0===Qe||Qe.call(Fe)}))}):Ue.y}},4408:(jt,et,M)=>{"use strict";M.d(et,{o:()=>xe});var D=M(727);class be extends D.w0{constructor(Ve,Le){super()}schedule(Ve,Le=0){return this}}const Q={setInterval(Be,Ve,...Le){const{delegate:Fe}=Q;return(null==Fe?void 0:Fe.setInterval)?Fe.setInterval(Be,Ve,...Le):setInterval(Be,Ve,...Le)},clearInterval(Be){const{delegate:Ve}=Q;return((null==Ve?void 0:Ve.clearInterval)||clearInterval)(Be)},delegate:void 0};var Ue=M(8737);class xe extends be{constructor(Ve,Le){super(Ve,Le),this.scheduler=Ve,this.work=Le,this.pending=!1}schedule(Ve,Le=0){if(this.closed)return this;this.state=Ve;const Fe=this.id,ae=this.scheduler;return null!=Fe&&(this.id=this.recycleAsyncId(ae,Fe,Le)),this.pending=!0,this.delay=Le,this.id=this.id||this.requestAsyncId(ae,this.id,Le),this}requestAsyncId(Ve,Le,Fe=0){return Q.setInterval(Ve.flush.bind(Ve,this),Fe)}recycleAsyncId(Ve,Le,Fe=0){if(null!=Fe&&this.delay===Fe&&!1===this.pending)return Le;Q.clearInterval(Le)}execute(Ve,Le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Fe=this._execute(Ve,Le);if(Fe)return Fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ve,Le){let ae,Fe=!1;try{this.work(Ve)}catch(ue){Fe=!0,ae=ue||new Error("Scheduled action threw falsy error")}if(Fe)return this.unsubscribe(),ae}unsubscribe(){if(!this.closed){const{id:Ve,scheduler:Le}=this,{actions:Fe}=Le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ue.P)(Fe,this),null!=Ve&&(this.id=this.recycleAsyncId(Le,Ve,null)),this.delay=null,super.unsubscribe()}}}},7565:(jt,et,M)=>{"use strict";M.d(et,{v:()=>Q});var D=M(6063);class be{constructor(xe,Be=be.now){this.schedulerActionCtor=xe,this.now=Be}schedule(xe,Be=0,Ve){return new this.schedulerActionCtor(this,xe).schedule(Ve,Be)}}be.now=D.l.now;class Q extends be{constructor(xe,Be=be.now){super(xe,Be),this.actions=[],this._active=!1,this._scheduled=void 0}flush(xe){const{actions:Be}=this;if(this._active)return void Be.push(xe);let Ve;this._active=!0;do{if(Ve=xe.execute(xe.state,xe.delay))break}while(xe=Be.shift());if(this._active=!1,Ve){for(;xe=Be.shift();)xe.unsubscribe();throw Ve}}}},4986:(jt,et,M)=>{"use strict";M.d(et,{z:()=>Q});var D=M(4408);const Q=new(M(7565).v)(D.o)},6063:(jt,et,M)=>{"use strict";M.d(et,{l:()=>D});const D={now:()=>(D.delegate||Date).now(),delegate:void 0}},3410:(jt,et,M)=>{"use strict";M.d(et,{z:()=>D});const D={setTimeout(be,Q,...Ue){const{delegate:xe}=D;return(null==xe?void 0:xe.setTimeout)?xe.setTimeout(be,Q,...Ue):setTimeout(be,Q,...Ue)},clearTimeout(be){const{delegate:Q}=D;return((null==Q?void 0:Q.clearTimeout)||clearTimeout)(be)},delegate:void 0}},2202:(jt,et,M)=>{"use strict";M.d(et,{h:()=>be});const be=function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(jt,et,M)=>{"use strict";M.d(et,{L:()=>D});const D="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(jt,et,M)=>{"use strict";M.d(et,{_6:()=>Be,jO:()=>Ue,yG:()=>xe});var D=M(576);function Q(Ve){return Ve[Ve.length-1]}function Ue(Ve){return(0,D.m)(Q(Ve))?Ve.pop():void 0}function xe(Ve){return function be(Ve){return Ve&&(0,D.m)(Ve.schedule)}(Q(Ve))?Ve.pop():void 0}function Be(Ve,Le){return"number"==typeof Q(Ve)?Ve.pop():Le}},8737:(jt,et,M)=>{"use strict";function D(be,Q){if(be){const Ue=be.indexOf(Q);0<=Ue&&be.splice(Ue,1)}}M.d(et,{P:()=>D})},3888:(jt,et,M)=>{"use strict";function D(be){const Ue=be(xe=>{Error.call(xe),xe.stack=(new Error).stack});return Ue.prototype=Object.create(Error.prototype),Ue.prototype.constructor=Ue,Ue}M.d(et,{d:()=>D})},2806:(jt,et,M)=>{"use strict";M.d(et,{O:()=>Ue,x:()=>Q});var D=M(2416);let be=null;function Q(xe){if(D.v.useDeprecatedSynchronousErrorHandling){const Be=!be;if(Be&&(be={errorThrown:!1,error:null}),xe(),Be){const{errorThrown:Ve,error:Le}=be;if(be=null,Ve)throw Le}}else xe()}function Ue(xe){D.v.useDeprecatedSynchronousErrorHandling&&be&&(be.errorThrown=!0,be.error=xe)}},9672:(jt,et,M)=>{"use strict";function D(be,Q,Ue,xe=0,Be=!1){const Ve=Q.schedule(function(){Ue(),Be?be.add(this.schedule(null,xe)):this.unsubscribe()},xe);if(be.add(Ve),!Be)return Ve}M.d(et,{f:()=>D})},4671:(jt,et,M)=>{"use strict";function D(be){return be}M.d(et,{y:()=>D})},1144:(jt,et,M)=>{"use strict";M.d(et,{z:()=>D});const D=be=>be&&"number"==typeof be.length&&"function"!=typeof be},2206:(jt,et,M)=>{"use strict";M.d(et,{D:()=>be});var D=M(576);function be(Q){return Symbol.asyncIterator&&(0,D.m)(null==Q?void 0:Q[Symbol.asyncIterator])}},576:(jt,et,M)=>{"use strict";function D(be){return"function"==typeof be}M.d(et,{m:()=>D})},3670:(jt,et,M)=>{"use strict";M.d(et,{c:()=>Q});var D=M(8822),be=M(576);function Q(Ue){return(0,be.m)(Ue[D.L])}},6495:(jt,et,M)=>{"use strict";M.d(et,{T:()=>Q});var D=M(2202),be=M(576);function Q(Ue){return(0,be.m)(null==Ue?void 0:Ue[D.h])}},8239:(jt,et,M)=>{"use strict";M.d(et,{t:()=>be});var D=M(576);function be(Q){return(0,D.m)(null==Q?void 0:Q.then)}},3260:(jt,et,M)=>{"use strict";M.d(et,{L:()=>Ue,Q:()=>Q});var D=M(655),be=M(576);function Q(xe){return(0,D.FC)(this,arguments,function*(){const Ve=xe.getReader();try{for(;;){const{value:Le,done:Fe}=yield(0,D.qq)(Ve.read());if(Fe)return yield(0,D.qq)(void 0);yield yield(0,D.qq)(Le)}}finally{Ve.releaseLock()}})}function Ue(xe){return(0,be.m)(null==xe?void 0:xe.getReader)}},4482:(jt,et,M)=>{"use strict";M.d(et,{A:()=>be,e:()=>Q});var D=M(576);function be(Ue){return(0,D.m)(null==Ue?void 0:Ue.lift)}function Q(Ue){return xe=>{if(be(xe))return xe.lift(function(Be){try{return Ue(Be,this)}catch(Ve){this.error(Ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(jt,et,M)=>{"use strict";M.d(et,{h:()=>Q});var D=M(2416),be=M(3410);function Q(Ue){be.z.setTimeout(()=>{const{onUnhandledError:xe}=D.v;if(!xe)throw Ue;xe(Ue)})}},4532:(jt,et,M)=>{"use strict";function D(be){return new TypeError(`You provided ${null!==be&&"object"==typeof be?"an invalid object":`'${be}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}M.d(et,{z:()=>D})},505:function(jt,et,M){var D,be,Q;be=[M(5021),M(4013)],D=function(Ue,xe){return function(){var Be=function Et(){return"n"},Ve=function ge(){return[0,0]},Le=function Me(){return" "},Fe=document.body,ae=Te(),ue=null,ye=null,Rt=null,ot=function ht(){return!1};function Qe(at){(ue=function Ye(at){var Jt=at.node();return Jt?"svg"===Jt.tagName.toLowerCase()?Jt:Jt.ownerSVGElement:null}(at))&&(ye=ue.createSVGPoint(),Fe.appendChild(ae))}Qe.show=function(){var at=Array.prototype.slice.call(arguments);at[at.length-1]instanceof SVGElement&&(Rt=at.pop());var xr,Jt=Le.apply(this,at),_t=Ve.apply(this,at),Fn=Be.apply(this,at),cr=Boolean(ot.apply(this,at)),Hn=Ne(),Zn=We.length,Yn=document.documentElement.scrollTop||Fe.scrollTop,On=document.documentElement.scrollLeft||Fe.scrollLeft;for(Hn.html(Jt).style("opacity",1).style("pointer-events","all");Zn--;)Hn.classed(We[Zn],!1);return cr?(xe.mouse(xe.selection().node()),Hn.style("top",xe.event.y+_t[1]+"px").style("left",xe.event.x+_t[0]+"px")):(xr=bt.get(Fn).apply(this),Hn.classed(Fn,!0).style("top",xr.top+_t[0]+Yn+"px").style("left",xr.left+_t[1]+On+"px")),Qe},Qe.hide=function(){return Ne().style("opacity",0).style("pointer-events","none"),Qe},Qe.attr=function(at,Jt){if(arguments.length<2&&"string"==typeof at)return Ne().attr(at);var _t=Array.prototype.slice.call(arguments);return xe.selection.prototype.attr.apply(Ne(),_t),Qe},Qe.style=function(at,Jt){if(arguments.length<2&&"string"==typeof at)return Ne().style(at);var _t=Array.prototype.slice.call(arguments);return xe.selection.prototype.style.apply(Ne(),_t),Qe},Qe.direction=function(at){return arguments.length?(Be=null==at?at:Wt(at),Qe):Be},Qe.offset=function(at){return arguments.length?(Ve=null==at?at:Wt(at),Qe):Ve},Qe.html=function(at){return arguments.length?(Le=null==at?at:Wt(at),Qe):Le},Qe.rootElement=function(at){return arguments.length?(Fe=null==at?at:Wt(at),Qe):Fe},Qe.followMouse=function(at){return arguments.length?(ot=null==at?at:Wt(at),Qe):ot},Qe.destroy=function(){return ae&&(Ne().remove(),ae=null),Qe};var bt=Ue.map({n:function Ke(){var at=dt();return{top:at.n.y-ae.offsetHeight,left:at.n.x-ae.offsetWidth/2}},s:function Xe(){var at=dt();return{top:at.s.y,left:at.s.x-ae.offsetWidth/2}},e:function ut(){var at=dt();return{top:at.e.y-ae.offsetHeight/2,left:at.e.x}},w:function vt(){var at=dt();return{top:at.w.y-ae.offsetHeight/2,left:at.w.x-ae.offsetWidth}},nw:function ce(){var at=dt();return{top:at.nw.y-ae.offsetHeight,left:at.nw.x-ae.offsetWidth}},ne:function Ze(){var at=dt();return{top:at.ne.y-ae.offsetHeight,left:at.ne.x}},sw:function fe(){var at=dt();return{top:at.sw.y,left:at.sw.x-ae.offsetWidth}},se:function Re(){var at=dt();return{top:at.se.y,left:at.se.x}}}),We=bt.keys();function Te(){var at=xe.select(document.createElement("div"));return at.style("position","absolute").style("top",0).style("opacity",0).style("pointer-events","none").style("box-sizing","border-box"),at.node()}function Ne(){return null==ae&&(ae=Te(),Fe.appendChild(ae)),xe.select(ae)}function dt(){for(var at=Rt||xe.event.target;null==at.getScreenCTM&&null==at.parentNode;)at=at.parentNode;var Jt={},_t=at.getScreenCTM(),Fn=at.getBBox(),cr=Fn.width,Hn=Fn.height,xr=Fn.y;return ye.x=Fn.x,ye.y=xr,Jt.nw=ye.matrixTransform(_t),ye.x+=cr,Jt.ne=ye.matrixTransform(_t),ye.y+=Hn,Jt.se=ye.matrixTransform(_t),ye.x-=cr,Jt.sw=ye.matrixTransform(_t),ye.y-=Hn/2,Jt.w=ye.matrixTransform(_t),ye.x+=cr,Jt.e=ye.matrixTransform(_t),ye.x-=cr/2,ye.y-=Hn/2,Jt.n=ye.matrixTransform(_t),ye.y+=Hn,Jt.s=ye.matrixTransform(_t),Jt}function Wt(at){return"function"==typeof at?at:function(){return at}}return Qe}},void 0!==(Q=D.apply(et,be))&&(jt.exports=Q)},655:(jt,et,M)=>{"use strict";function Ue(fe,Re){var Te={};for(var Ye in fe)Object.prototype.hasOwnProperty.call(fe,Ye)&&Re.indexOf(Ye)<0&&(Te[Ye]=fe[Ye]);if(null!=fe&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(Ye=Object.getOwnPropertySymbols(fe);Ne<Ye.length;Ne++)Re.indexOf(Ye[Ne])<0&&Object.prototype.propertyIsEnumerable.call(fe,Ye[Ne])&&(Te[Ye[Ne]]=fe[Ye[Ne]])}return Te}function Le(fe,Re,Te,Ye){return new(Te||(Te=Promise))(function(dt,Wt){function at(Fn){try{_t(Ye.next(Fn))}catch(cr){Wt(cr)}}function Jt(Fn){try{_t(Ye.throw(Fn))}catch(cr){Wt(cr)}}function _t(Fn){Fn.done?dt(Fn.value):function Ne(dt){return dt instanceof Te?dt:new Te(function(Wt){Wt(dt)})}(Fn.value).then(at,Jt)}_t((Ye=Ye.apply(fe,Re||[])).next())})}function ge(fe){return this instanceof ge?(this.v=fe,this):new ge(fe)}function Me(fe,Re,Te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,Ye=Te.apply(fe,Re||[]),dt=[];return Ne={},Wt("next"),Wt("throw"),Wt("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function Wt(Hn){Ye[Hn]&&(Ne[Hn]=function(Zn){return new Promise(function(xr,Yn){dt.push([Hn,Zn,xr,Yn])>1||at(Hn,Zn)})})}function at(Hn,Zn){try{!function Jt(Hn){Hn.value instanceof ge?Promise.resolve(Hn.value.v).then(_t,Fn):cr(dt[0][2],Hn)}(Ye[Hn](Zn))}catch(xr){cr(dt[0][3],xr)}}function _t(Hn){at("next",Hn)}function Fn(Hn){at("throw",Hn)}function cr(Hn,Zn){Hn(Zn),dt.shift(),dt.length&&at(dt[0][0],dt[0][1])}}function bt(fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,Re=fe[Symbol.asyncIterator];return Re?Re.call(fe):(fe=function ye(fe){var Re="function"==typeof Symbol&&Symbol.iterator,Te=Re&&fe[Re],Ye=0;if(Te)return Te.call(fe);if(fe&&"number"==typeof fe.length)return{next:function(){return fe&&Ye>=fe.length&&(fe=void 0),{value:fe&&fe[Ye++],done:!fe}}};throw new TypeError(Re?"Object is not iterable.":"Symbol.iterator is not defined.")}(fe),Te={},Ye("next"),Ye("throw"),Ye("return"),Te[Symbol.asyncIterator]=function(){return this},Te);function Ye(dt){Te[dt]=fe[dt]&&function(Wt){return new Promise(function(at,Jt){!function Ne(dt,Wt,at,Jt){Promise.resolve(Jt).then(function(_t){dt({value:_t,done:at})},Wt)}(at,Jt,(Wt=fe[dt](Wt)).done,Wt.value)})}}}M.d(et,{FC:()=>Me,KL:()=>bt,_T:()=>Ue,mG:()=>Le,qq:()=>ge})},5e3:(jt,et,M)=>{"use strict";M.d(et,{$8M:()=>jo,$Z:()=>SE,AFp:()=>_i,AaK:()=>Le,CRH:()=>Df,CZH:()=>H_,CqO:()=>RE,EJc:()=>ei,F4k:()=>ME,FYo:()=>hg,FiY:()=>ja,G48:()=>fC,Gf:()=>P_,GfV:()=>Ww,JOm:()=>Z,LFG:()=>Kt,LSH:()=>qc,Lbi:()=>Tg,NdJ:()=>hw,O4$:()=>vo,OlP:()=>jr,PXZ:()=>xi,QGY:()=>Gv,Qsj:()=>tC,R0b:()=>ba,RDi:()=>Ic,Rgc:()=>Ef,SBq:()=>sy,Sil:()=>xy,Suo:()=>is,TTD:()=>ta,TgZ:()=>Wp,VLi:()=>ub,X6Q:()=>U1,XFs:()=>pn,Xpm:()=>Gt,Y36:()=>Zd,YKP:()=>Zw,Yjl:()=>xa,Yz7:()=>Zn,ZZ4:()=>Qn,_UZ:()=>Nm,_Vd:()=>iy,_c5:()=>os,_uU:()=>n_,aQg:()=>$n,c2e:()=>As,cJS:()=>Yn,cg1:()=>Jp,dDg:()=>jl,deG:()=>Bc,dqk:()=>Un,eFA:()=>_r,g9A:()=>ab,h0i:()=>$h,hGG:()=>al,iGM:()=>N_,ifc:()=>Wn,ip1:()=>Zh,kL8:()=>u_,kcU:()=>Bg,lG2:()=>Qo,oAB:()=>Gr,q4F:()=>m1,qLn:()=>dp,qZA:()=>Kp,sBO:()=>f,sIi:()=>Gd,s_b:()=>qh,soG:()=>tu,tBr:()=>Io,tb:()=>wa,tp0:()=>Go,uIk:()=>Q0,vHH:()=>Qe,vpe:()=>rl,wAp:()=>gn,z2F:()=>Mg,zSh:()=>Pp,zs3:()=>bs});var D=M(7579),be=M(727),Q=M(8306),Ue=M(6451),xe=M(3099);function Be(s){for(let o in s)if(s[o]===Be)return o;throw Error("Could not find renamed property on target object.")}function Le(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Le).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const c=o.indexOf("\n");return-1===c?o:o.substring(0,c)}function Fe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const ae=Be({__forward_ref__:Be});function ue(s){return s.__forward_ref__=ue,s.toString=function(){return Le(this())},s}function ye(s){return function Rt(s){return"function"==typeof s&&s.hasOwnProperty(ae)&&s.__forward_ref__===ue}(s)?s():s}class Qe extends Error{constructor(o,c){super(function Et(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,c)),this.code=o}}function ge(s){return"string"==typeof s?s:null==s?"":String(s)}function Me(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ge(s)}function Ke(s,o){const c=o?` in ${o}`:"";throw new Qe(-201,`No provider for ${Me(s)} found${c}`)}function Jt(s,o){null==s&&function _t(s,o,c,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${c} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function Zn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Yn(s){return{providers:s.providers||[],imports:s.imports||[]}}function On(s){return xs(s,Ms)||xs(s,cs)}function xs(s,o){return s.hasOwnProperty(o)?s[o]:null}function oi(s){return s&&(s.hasOwnProperty(Rs)||s.hasOwnProperty(Ws))?s[Rs]:null}const Ms=Be({\u0275prov:Be}),Rs=Be({\u0275inj:Be}),cs=Be({ngInjectableDef:Be}),Ws=Be({ngInjectorDef:Be});var pn=(()=>((pn=pn||{})[pn.Default=0]="Default",pn[pn.Host=1]="Host",pn[pn.Self=2]="Self",pn[pn.SkipSelf=4]="SkipSelf",pn[pn.Optional=8]="Optional",pn))();let ks;function Ir(s){const o=ks;return ks=s,o}function Da(s,o,c){const d=On(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&pn.Optional?null:void 0!==o?o:void Ke(Le(s),"Injector")}function ai(s){return{toString:s}.toString()}var Rr=(()=>((Rr=Rr||{})[Rr.OnPush=0]="OnPush",Rr[Rr.Default=1]="Default",Rr))(),Wn=(()=>{return(s=Wn||(Wn={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Wn;var s})();const rn="undefined"!=typeof globalThis&&globalThis,vn="undefined"!=typeof window&&window,wi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Un=rn||"undefined"!=typeof global&&global||vn||wi,ui={},sn=[],ve=Be({\u0275cmp:Be}),se=Be({\u0275dir:Be}),Ee=Be({\u0275pipe:Be}),Ie=Be({\u0275mod:Be}),ne=Be({\u0275fac:Be}),nt=Be({__NG_ELEMENT_ID__:Be});let It=0;function Gt(s){return ai(()=>{const c={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Rr.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||sn,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Wn.Emulated,id:"c",styles:s.styles||sn,_:null,setInput:null,schemas:s.schemas||null,tView:null},m=s.directives,_=s.features,T=s.pipes;return d.id+=It++,d.inputs=Aa(s.inputs,c),d.outputs=Aa(s.outputs),_&&_.forEach(R=>R(d)),d.directiveDefs=m?()=>("function"==typeof m?m():m).map(ir):null,d.pipeDefs=T?()=>("function"==typeof T?T():T).map(or):null,d})}function ir(s){return Vr(s)||function kr(s){return s[se]||null}(s)}function or(s){return function Fo(s){return s[Ee]||null}(s)}const Bn={};function Gr(s){return ai(()=>{const o={type:s.type,bootstrap:s.bootstrap||sn,declarations:s.declarations||sn,imports:s.imports||sn,exports:s.exports||sn,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Bn[s.id]=s.type),o})}function Aa(s,o){if(null==s)return ui;const c={};for(const d in s)if(s.hasOwnProperty(d)){let m=s[d],_=m;Array.isArray(m)&&(_=m[1],m=m[0]),c[m]=d,o&&(o[m]=_)}return c}const Qo=Gt;function xa(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Vr(s){return s[ve]||null}function Nr(s,o){const c=s[Ie]||null;if(!c&&!0===o)throw new Error(`Type ${Le(s)} does not have '\u0275mod' property.`);return c}function zi(s){return Array.isArray(s)&&"object"==typeof s[1]}function fs(s){return Array.isArray(s)&&!0===s[1]}function yc(s){return 0!=(8&s.flags)}function iu(s){return 2==(2&s.flags)}function ps(s){return 1==(1&s.flags)}function Zs(s){return null!==s.template}function po(s){return 0!=(512&s[2])}function ms(s,o){return s.hasOwnProperty(ne)?s[ne]:null}class Vu{constructor(o,c,d){this.previousValue=o,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function ta(){return _c}function _c(s){return s.type.prototype.ngOnChanges&&(s.setInput=Fg),Uf}function Uf(){const s=ju(this),o=null==s?void 0:s.current;if(o){const c=s.previous;if(c===ui)s.previous=o;else for(let d in o)c[d]=o[d];s.current=null,this.ngOnChanges(o)}}function Fg(s,o,c,d){const m=ju(s)||function wc(s,o){return s[Bf]=o}(s,{previous:ui,current:null}),_=m.current||(m.current={}),T=m.previous,R=this.declaredInputs[c],P=T[R];_[R]=new Vu(P&&P.currentValue,o,T===ui),s[d]=o}ta.ngInherit=!0;const Bf="__ngSimpleChanges__";function ju(s){return s[Bf]||null}let Ec;function Ic(s){Ec=s}function tr(s){return!!s.listen}const uu={createRenderer:(s,o)=>function na(){return void 0!==Ec?Ec:"undefined"!=typeof document?document:void 0}()};function sr(s){for(;Array.isArray(s);)s=s[0];return s}function Gi(s,o){return sr(o[s.index])}function fr(s,o){return s.data[o]}function Or(s,o){const c=o[s];return zi(c)?c:c[0]}function Ys(s){return 4==(4&s[2])}function Us(s){return 128==(128&s[2])}function _s(s,o){return null==o?null:s[o]}function li(s){s[18]=0}function Cc(s,o){s[5]+=o;let c=s,d=s[3];for(;null!==d&&(1===o&&1===c[5]||-1===o&&0===c[5]);)d[5]+=o,c=d,d=d[3]}const bn={lFrame:zu(null),bindingsEnabled:!0};function ql(){return bn.bindingsEnabled}function lt(){return bn.lFrame.lView}function Kn(){return bn.lFrame.tView}function pr(){let s=ri();for(;null!==s&&64===s.type;)s=s.parent;return s}function ri(){return bn.lFrame.currentTNode}function go(s,o){const c=bn.lFrame;c.currentTNode=s,c.isParent=o}function Tc(){return bn.lFrame.isParent}function Dc(s,o){const c=bn.lFrame;c.bindingIndex=c.bindingRootIndex=s,Js(o)}function Js(s){bn.lFrame.currentDirectiveIndex=s}function xc(){return bn.lFrame.currentQueryIndex}function Yl(s){bn.lFrame.currentQueryIndex=s}function Ql(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Xl(s,o,c){if(c&pn.SkipSelf){let m=o,_=s;for(;!(m=m.parent,null!==m||c&pn.Host||(m=Ql(_),null===m||(_=_[15],10&m.type))););if(null===m)return!1;o=m,s=_}const d=bn.lFrame=Ra();return d.currentTNode=o,d.lView=s,!0}function sa(s){const o=Ra(),c=s[1];bn.lFrame=o,o.currentTNode=c.firstChild,o.lView=s,o.tView=c,o.contextLView=s,o.bindingIndex=c.bindingStartIndex,o.inI18n=!1}function Ra(){const s=bn.lFrame,o=null===s?null:s.child;return null===o?zu(s):o}function zu(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Jl(){const s=bn.lFrame;return bn.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Mc=Jl;function Ki(){const s=Jl();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function du(s){bn.lFrame.selectedIndex=s}function vo(){bn.lFrame.currentNamespace="svg"}function Bg(){!function cd(){bn.lFrame.currentNamespace=null}()}function Rc(s,o){for(let c=o.directiveStart,d=o.directiveEnd;c<d;c++){const _=s.data[c].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:R,ngAfterViewInit:P,ngAfterViewChecked:j,ngOnDestroy:q}=_;T&&(s.contentHooks||(s.contentHooks=[])).push(-c,T),R&&((s.contentHooks||(s.contentHooks=[])).push(c,R),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(c,R)),P&&(s.viewHooks||(s.viewHooks=[])).push(-c,P),j&&((s.viewHooks||(s.viewHooks=[])).push(c,j),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(c,j)),null!=q&&(s.destroyHooks||(s.destroyHooks=[])).push(c,q)}}function ka(s,o,c){di(s,o,3,c)}function Na(s,o,c,d){(3&s[2])===c&&di(s,o,c,d)}function Ei(s,o){let c=s[2];(3&c)===o&&(c&=2047,c+=1,s[2]=c)}function di(s,o,c,d){const _=null!=d?d:-1,T=o.length-1;let R=0;for(let P=void 0!==d?65535&s[18]:0;P<T;P++)if("number"==typeof o[P+1]){if(R=o[P],null!=d&&R>=d)break}else o[P]<0&&(s[18]+=65536),(R<_||-1==_)&&(nh(s,c,o,P),s[18]=(4294901760&s[18])+P+2),P++}function nh(s,o,c,d){const m=c[d]<0,_=c[d+1],R=s[m?-c[d]:c[d]];if(m){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{_.call(R)}finally{}}}else try{_.call(R)}finally{}}class kc{constructor(o,c,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function Bs(s,o,c){const d=tr(s);let m=0;for(;m<c.length;){const _=c[m];if("number"==typeof _){if(0!==_)break;m++;const T=c[m++],R=c[m++],P=c[m++];d?s.setAttribute(o,R,P,T):o.setAttributeNS(T,R,P)}else{const T=_,R=c[++m];Lr(T)?d&&s.setProperty(o,T,R):d?s.setAttribute(o,T,R):o.setAttribute(T,R),m++}}return m}function eo(s){return 3===s||4===s||6===s}function Lr(s){return 64===s.charCodeAt(0)}function Pc(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let c=-1;for(let d=0;d<o.length;d++){const m=o[d];"number"==typeof m?c=m:0===c||ld(s,c,m,null,-1===c||2===c?o[++d]:null)}}return s}function ld(s,o,c,d,m){let _=0,T=s.length;if(-1===o)T=-1;else for(;_<s.length;){const R=s[_++];if("number"==typeof R){if(R===o){T=-1;break}if(R>o){T=_-1;break}}}for(;_<s.length;){const R=s[_];if("number"==typeof R)break;if(R===c){if(null===d)return void(null!==m&&(s[_+1]=m));if(d===s[_+1])return void(s[_+2]=m)}_++,null!==d&&_++,null!==m&&_++}-1!==T&&(s.splice(T,0,o),_=T+1),s.splice(_++,0,c),null!==d&&s.splice(_++,0,d),null!==m&&s.splice(_++,0,m)}function pu(s){return-1!==s}function Pa(s){return 32767&s}function aa(s,o){let c=function Fr(s){return s>>16}(s),d=o;for(;c>0;)d=d[15],c--;return d}let Bo=!0;function En(s){const o=Bo;return Bo=s,o}let dd=0;function _o(s,o){const c=mu(s,o);if(-1!==c)return c;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,gu(d.data,s),gu(o,null),gu(d.blueprint,null));const m=Yi(s,o),_=s.injectorIndex;if(pu(m)){const T=Pa(m),R=aa(m,o),P=R[1].data;for(let j=0;j<8;j++)o[_+j]=R[T+j]|P[T+j]}return o[_+8]=m,_}function gu(s,o){s.push(0,0,0,0,0,0,0,0,o)}function mu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Yi(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,d=null,m=o;for(;null!==m;){const _=m[1],T=_.type;if(d=2===T?_.declTNode:1===T?m[6]:null,null===d)return-1;if(c++,m=m[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function yu(s,o,c){!function ki(s,o,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(nt)&&(d=c[nt]),null==d&&(d=c[nt]=dd++);const m=255&d;o.data[s+(m>>5)]|=1<<m}(s,o,c)}function Oc(s,o,c){if(c&pn.Optional)return s;Ke(o,"NodeInjector")}function Oa(s,o,c,d){if(c&pn.Optional&&void 0===d&&(d=null),0==(c&(pn.Self|pn.Host))){const m=s[9],_=Ir(void 0);try{return m?m.get(o,d,c&pn.Optional):Da(o,d,c&pn.Optional)}finally{Ir(_)}}return Oc(d,o,c)}function qu(s,o,c,d=pn.Default,m){if(null!==s){const _=function Wu(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(nt)?s[nt]:void 0;return"number"==typeof o?o>=0?255&o:Lc:o}(c);if("function"==typeof _){if(!Xl(o,s,d))return d&pn.Host?Oc(m,c,d):Oa(o,c,d,m);try{const T=_(d);if(null!=T||d&pn.Optional)return T;Ke(c)}finally{Mc()}}else if("number"==typeof _){let T=null,R=mu(s,o),P=-1,j=d&pn.Host?o[16][6]:null;for((-1===R||d&pn.SkipSelf)&&(P=-1===R?Yi(s,o):o[R+8],-1!==P&&fd(d,!1)?(T=o[1],R=Pa(P),o=aa(P,o)):R=-1);-1!==R;){const q=o[1];if(Ii(_,R,q.data)){const te=zf(R,o,c,T,d,j);if(te!==vu)return te}P=o[R+8],-1!==P&&fd(d,o[1].data[R+8]===j)&&Ii(_,R,o)?(T=q,R=Pa(P),o=aa(P,o)):R=-1}}}return Oa(o,c,d,m)}const vu={};function Lc(){return new Vo(pr(),lt())}function zf(s,o,c,d,m,_){const T=o[1],R=T.data[s+8],q=Fc(R,T,c,null==d?iu(R)&&Bo:d!=T&&0!=(3&R.type),m&pn.Host&&_===R);return null!==q?La(o,T,q,R):vu}function Fc(s,o,c,d,m){const _=s.providerIndexes,T=o.data,R=1048575&_,P=s.directiveStart,q=_>>20,de=m?R+q:s.directiveEnd;for(let Ae=d?R:R+q;Ae<de;Ae++){const ke=T[Ae];if(Ae<P&&c===ke||Ae>=P&&ke.type===c)return Ae}if(m){const Ae=T[P];if(Ae&&Zs(Ae)&&Ae.type===c)return P}return null}function La(s,o,c,d){let m=s[c];const _=o.data;if(function rh(s){return s instanceof kc}(m)){const T=m;T.resolving&&function ht(s,o){const c=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Qe(-200,`Circular dependency in DI detected for ${s}${c}`)}(Me(_[c]));const R=En(T.canSeeViewProviders);T.resolving=!0;const P=T.injectImpl?Ir(T.injectImpl):null;Xl(s,d,pn.Default);try{m=s[c]=T.factory(void 0,_,s,d),o.firstCreatePass&&c>=d.directiveStart&&function jf(s,o,c){const{ngOnChanges:d,ngOnInit:m,ngDoCheck:_}=o.type.prototype;if(d){const T=_c(o);(c.preOrderHooks||(c.preOrderHooks=[])).push(s,T),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,T)}m&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-s,m),_&&((c.preOrderHooks||(c.preOrderHooks=[])).push(s,_),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,_))}(c,_[c],o)}finally{null!==P&&Ir(P),En(R),T.resolving=!1,Mc()}}return m}function Ii(s,o,c){return!!(c[o+(s>>5)]&1<<s)}function fd(s,o){return!(s&pn.Self||s&pn.Host&&o)}class Vo{constructor(o,c){this._tNode=o,this._lView=c}get(o,c,d){return qu(this._tNode,this._lView,o,d,c)}}function jo(s){return function Gu(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const c=s.attrs;if(c){const d=c.length;let m=0;for(;m<d;){const _=c[m];if(eo(_))break;if(0===_)m+=2;else if("number"==typeof _)for(m++;m<d&&"string"==typeof c[m];)m++;else{if(_===o)return c[m+1];m+=2}}}return null}(pr(),s)}const $o="__parameters__";function Ci(s,o,c){return ai(()=>{const d=function Wr(s){return function(...c){if(s){const d=s(...c);for(const m in d)this[m]=d[m]}}}(o);function m(..._){if(this instanceof m)return d.apply(this,_),this;const T=new m(..._);return R.annotation=T,R;function R(P,j,q){const te=P.hasOwnProperty($o)?P[$o]:Object.defineProperty(P,$o,{value:[]})[$o];for(;te.length<=q;)te.push(null);return(te[q]=te[q]||[]).push(T),P}}return c&&(m.prototype=Object.create(c.prototype)),m.prototype.ngMetadataName=s,m.annotationCls=m,m})}class jr{constructor(o,c){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Zn({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Bc=new jr("AnalyzeForEntryComponents");function Ni(s,o){void 0===o&&(o=s);for(let c=0;c<s.length;c++){let d=s[c];Array.isArray(d)?(o===s&&(o=s.slice(0,c)),Ni(d,o)):o!==s&&o.push(d)}return o}function Pi(s,o){s.forEach(c=>Array.isArray(c)?Pi(c,o):o(c))}function Ku(s,o,c){o>=s.length?s.push(c):s.splice(o,0,c)}function Zu(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const wu={},$c="__NG_DI_FLAG__",_l="ngTempTokenPath",B=/\n/gm,re="__source",we=Be({provide:String,useValue:Be});let Pe;function He(s){const o=Pe;return Pe=s,o}function Nt(s,o=pn.Default){if(void 0===Pe)throw new Qe(203,"");return null===Pe?Da(s,void 0,o):Pe.get(s,o&pn.Optional?null:void 0,o)}function Kt(s,o=pn.Default){return(function Mr(){return ks}()||Nt)(ye(s),o)}const Vn=Kt;function hn(s){const o=[];for(let c=0;c<s.length;c++){const d=ye(s[c]);if(Array.isArray(d)){if(0===d.length)throw new Qe(900,"");let m,_=pn.Default;for(let T=0;T<d.length;T++){const R=d[T],P=ro(R);"number"==typeof P?-1===P?m=R.token:_|=P:m=R}o.push(Kt(m,_))}else o.push(Kt(d))}return o}function Ur(s,o){return s[$c]=o,s.prototype[$c]=o,s}function ro(s){return s[$c]}const Io=Ur(Ci("Inject",s=>({token:s})),-1),ja=Ur(Ci("Optional"),8),Go=Ur(Ci("SkipSelf"),4);class np{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const sp=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ga=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var $r=(()=>(($r=$r||{})[$r.NONE=0]="NONE",$r[$r.HTML=1]="HTML",$r[$r.STYLE=2]="STYLE",$r[$r.SCRIPT=3]="SCRIPT",$r[$r.URL=4]="URL",$r[$r.RESOURCE_URL=5]="RESOURCE_URL",$r))();function qc(s){const o=function ph(){const s=lt();return s&&s[12]}();return o?o.sanitize($r.URL,s)||"":function Xu(s,o){const c=function lh(s){return s instanceof np&&s.getTypeName()||null}(s);if(null!=c&&c!==o){if("ResourceURL"===c&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===o}(s,"URL")?function Wo(s){return s instanceof np?s.changingThisBreaksApplicationSecurity:s}(s):function bd(s){return(s=String(s)).match(sp)||s.match(Ga)?s:"unsafe:"+s}(ge(s))}const gh="__ngContext__";function Li(s,o){s[gh]=o}function hp(s){const o=function bl(s){return s[gh]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Wa(s){return s.ngOriginalError}function p0(s,...o){s.error(...o)}class dp{constructor(){this._console=console}handleError(o){const c=this._findOriginalError(o),d=function f0(s){return s&&s.ngErrorLogger||p0}(o);d(this._console,"ERROR",o),c&&d(this._console,"ORIGINAL ERROR",c)}_findOriginalError(o){let c=o&&Wa(o);for(;c&&Wa(c);)c=Wa(c);return c||null}}const pp=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Un))();function C(s){return s instanceof Function?s():s}var Z=(()=>((Z=Z||{})[Z.Important=1]="Important",Z[Z.DashCase=2]="DashCase",Z))();function ze(s,o){return undefined(s,o)}function fn(s){const o=s[3];return fs(o)?o[3]:o}function So(s){return nm(s[13])}function yh(s){return nm(s[4])}function nm(s){for(;null!==s&&!fs(s);)s=s[4];return s}function pi(s,o,c,d,m){if(null!=d){let _,T=!1;fs(d)?_=d:zi(d)&&(T=!0,d=d[0]);const R=sr(d);0===s&&null!==c?null==m?am(o,c,R):wh(o,c,R,m||null,!0):1===s&&null!==c?wh(o,c,R,m||null,!0):2===s?function Bb(s,o,c){const d=$s(s,o);d&&function m0(s,o,c,d){tr(s)?s.removeChild(o,c,d):o.removeChild(c)}(s,d,o,c)}(o,R,T):3===s&&o.destroyNode(R),null!=_&&function yp(s,o,c,d,m){const _=c[7];_!==sr(c)&&pi(o,s,d,_,m);for(let R=10;R<c.length;R++){const P=c[R];um(P[1],P,s,o,d,_)}}(o,s,_,c,m)}}function js(s,o,c){if(tr(s))return s.createElement(o,c);{const d=null!==c?function vs(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(c):null;return null===d?s.createElement(o):s.createElementNS(d,o)}}function kb(s,o){const c=s[9],d=c.indexOf(o),m=o[3];1024&o[2]&&(o[2]&=-1025,Cc(m,-1)),c.splice(d,1)}function av(s,o){if(s.length<=10)return;const c=10+o,d=s[c];if(d){const m=d[17];null!==m&&m!==s&&kb(m,d),o>0&&(s[c-1][4]=d[4]);const _=Zu(s,10+o);!function im(s,o){um(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const T=_[19];null!==T&&T.detachView(_[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function Nb(s,o){if(!(256&o[2])){const c=o[11];tr(c)&&c.destroyNode&&um(s,o,c,3,null,null),function Fi(s){let o=s[13];if(!o)return uv(s[1],s);for(;o;){let c=null;if(zi(o))c=o[13];else{const d=o[10];d&&(c=d)}if(!c){for(;o&&!o[4]&&o!==s;)zi(o)&&uv(o[1],o),o=o[3];null===o&&(o=s),zi(o)&&uv(o[1],o),c=o&&o[4]}o=c}}(o)}}function uv(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function g0(s,o){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let d=0;d<c.length;d+=2){const m=o[c[d]];if(!(m instanceof kc)){const _=c[d+1];if(Array.isArray(_))for(let T=0;T<_.length;T+=2){const R=m[_[T]],P=_[T+1];try{P.call(R)}finally{}}else try{_.call(m)}finally{}}}}(s,o),function Pb(s,o){const c=s.cleanup,d=o[7];let m=-1;if(null!==c)for(let _=0;_<c.length-1;_+=2)if("string"==typeof c[_]){const T=c[_+1],R="function"==typeof T?T(o):sr(o[T]),P=d[m=c[_+2]],j=c[_+3];"boolean"==typeof j?R.removeEventListener(c[_],P,j):j>=0?d[m=j]():d[m=-j].unsubscribe(),_+=2}else{const T=d[m=c[_+1]];c[_].call(T)}if(null!==d){for(let _=m+1;_<d.length;_++)d[_]();o[7]=null}}(s,o),1===o[1].type&&tr(o[11])&&o[11].destroy();const c=o[17];if(null!==c&&fs(o[3])){c!==o[3]&&kb(c,o);const d=o[19];null!==d&&d.detachView(s)}}}function aI(s,o,c){return function _h(s,o,c){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return c[0];if(2&d.flags){const m=s.data[d.directiveStart].encapsulation;if(m===Wn.None||m===Wn.Emulated)return null}return Gi(d,c)}(s,o.parent,c)}function wh(s,o,c,d,m){tr(s)?s.insertBefore(o,c,d,m):o.insertBefore(c,d,m)}function am(s,o,c){tr(s)?s.appendChild(o,c):o.appendChild(c)}function cv(s,o,c,d,m){null!==d?wh(s,o,c,d,m):am(s,o,c)}function $s(s,o){return tr(s)?s.parentNode(o):o.parentNode}let Lb=function y0(s,o,c){return 40&s.type?Gi(s,c):null};function mp(s,o,c,d){const m=aI(s,d,o),_=o[11],R=function Ob(s,o,c){return Lb(s,o,c)}(d.parent||o[6],d,o);if(null!=m)if(Array.isArray(c))for(let P=0;P<c.length;P++)cv(_,m,c[P],R,!1);else cv(_,m,c,R,!1)}function hv(s,o){if(null!==o){const c=o.type;if(3&c)return Gi(o,s);if(4&c)return dv(-1,s[o.index]);if(8&c){const d=o.child;if(null!==d)return hv(s,d);{const m=s[o.index];return fs(m)?dv(-1,m):sr(m)}}if(32&c)return ze(o,s)()||sr(s[o.index]);{const d=Ub(s,o);return null!==d?Array.isArray(d)?d[0]:hv(fn(s[16]),d):hv(s,o.next)}}return null}function Ub(s,o){return null!==o?s[16][6].projection[o.projection]:null}function dv(s,o){const c=10+s+1;if(c<o.length){const d=o[c],m=d[1].firstChild;if(null!==m)return hv(d,m)}return o[7]}function Vb(s,o,c,d,m,_,T){for(;null!=c;){const R=d[c.index],P=c.type;if(T&&0===o&&(R&&Li(sr(R),d),c.flags|=4),64!=(64&c.flags))if(8&P)Vb(s,o,c.child,d,m,_,!1),pi(o,s,m,R,_);else if(32&P){const j=ze(c,d);let q;for(;q=j();)pi(o,s,m,q,_);pi(o,s,m,R,_)}else 16&P?cm(s,o,d,c,m,_):pi(o,s,m,R,_);c=T?c.projectionNext:c.next}}function um(s,o,c,d,m,_){Vb(c,d,s.firstChild,o,m,_,!1)}function cm(s,o,c,d,m,_){const T=c[16],P=T[6].projection[d.projection];if(Array.isArray(P))for(let j=0;j<P.length;j++)pi(o,s,m,P[j],_);else Vb(s,o,P,T[3],m,_,!0)}function lI(s,o,c){tr(s)?s.setAttribute(o,"style",c):o.style.cssText=c}function lm(s,o,c){tr(s)?""===c?s.removeAttribute(o,"class"):s.setAttribute(o,"class",c):o.className=c}function rt(s,o,c){let d=s.length;for(;;){const m=s.indexOf(o,c);if(-1===m)return m;if(0===m||s.charCodeAt(m-1)<=32){const _=o.length;if(m+_===d||s.charCodeAt(m+_)<=32)return m}c=m+1}}const Tn="ng-template";function Pd(s,o,c){let d=0;for(;d<s.length;){let m=s[d++];if(c&&"class"===m){if(m=s[d],-1!==rt(m.toLowerCase(),o,0))return!0}else if(1===m){for(;d<s.length&&"string"==typeof(m=s[d++]);)if(m.toLowerCase()===o)return!0;return!1}}return!1}function v0(s){return 4===s.type&&s.value!==Tn}function vp(s,o,c){return o===(4!==s.type||c?s.value:Tn)}function _0(s,o,c){let d=4;const m=s.attrs||[],_=function jb(s){for(let o=0;o<s.length;o++)if(eo(s[o]))return o;return s.length}(m);let T=!1;for(let R=0;R<o.length;R++){const P=o[R];if("number"!=typeof P){if(!T)if(4&d){if(d=2|1&d,""!==P&&!vp(s,P,c)||""===P&&1===o.length){if(Cu(d))return!1;T=!0}}else{const j=8&d?P:o[++R];if(8&d&&null!==s.attrs){if(!Pd(s.attrs,j,c)){if(Cu(d))return!1;T=!0}continue}const te=gi(8&d?"class":P,m,v0(s),c);if(-1===te){if(Cu(d))return!1;T=!0;continue}if(""!==j){let de;de=te>_?"":m[te+1].toLowerCase();const Ae=8&d?de:null;if(Ae&&-1!==rt(Ae,j,0)||2&d&&j!==de){if(Cu(d))return!1;T=!0}}}}else{if(!T&&!Cu(d)&&!Cu(P))return!1;if(T&&Cu(P))continue;T=!1,d=P|1&d}}return Cu(d)||T}function Cu(s){return 0==(1&s)}function gi(s,o,c,d){if(null===o)return-1;let m=0;if(d||!c){let _=!1;for(;m<o.length;){const T=o[m];if(T===s)return m;if(3===T||6===T)_=!0;else{if(1===T||2===T){let R=o[++m];for(;"string"==typeof R;)R=o[++m];continue}if(4===T)break;if(0===T){m+=4;continue}}m+=_?1:2}return-1}return function $b(s,o){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const d=s[c];if("number"==typeof d)return-1;if(d===o)return c;c++}return-1}(o,s)}function hm(s,o,c=!1){for(let d=0;d<o.length;d++)if(_0(s,o[d],c))return!0;return!1}function w0(s,o){return s?":not("+o.trim()+")":o}function bh(s){let o=s[0],c=1,d=2,m="",_=!1;for(;c<s.length;){let T=s[c];if("string"==typeof T)if(2&d){const R=s[++c];m+="["+T+(R.length>0?'="'+R+'"':"")+"]"}else 8&d?m+="."+T:4&d&&(m+=" "+T);else""!==m&&!Cu(T)&&(o+=w0(_,m),m=""),d=T,_=_||!Cu(d);c++}return""!==m&&(o+=w0(_,m)),o}const Pn={};function A0(s,o){const c=s.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const m=c[d],_=c[d+1];if(-1!==_){const T=s.data[_];Yl(m),T.contentQueries(2,o[_],_)}}}function ma(s,o,c,d,m,_,T,R,P,j){const q=o.blueprint.slice();return q[0]=m,q[2]=140|d,li(q),q[3]=q[15]=s,q[8]=c,q[10]=T||s&&s[10],q[11]=R||s&&s[11],q[12]=P||s&&s[12]||null,q[9]=j||s&&s[9]||null,q[6]=_,q[16]=2==o.type?s[16]:q,q}function Ko(s,o,c,d,m){let _=s.data[o];if(null===_)_=function Au(s,o,c,d,m){const _=ri(),T=Tc(),P=s.data[o]=function vv(s,o,c,d,m,_){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:m,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?_:_&&_.parent,c,o,d,m);return null===s.firstChild&&(s.firstChild=P),null!==_&&(T?null==_.child&&null!==P.parent&&(_.child=P):null===_.next&&(_.next=P)),P}(s,o,c,d,m),function Kl(){return bn.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=c,_.value=d,_.attrs=m;const T=function hu(){const s=bn.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();_.injectorIndex=null===T?-1:T.injectorIndex}return go(_,!0),_}function Eh(s,o,c,d){if(0===c)return-1;const m=o.length;for(let _=0;_<c;_++)o.push(d),s.blueprint.push(d),s.data.push(null);return m}function Ep(s,o,c){sa(o);try{const d=s.viewQuery;null!==d&&kp(1,d,c);const m=s.template;null!==m&&Ip(s,o,m,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&A0(s,o),s.staticViewQueries&&kp(2,s.viewQuery,c);const _=s.components;null!==_&&function mm(s,o){for(let c=0;c<o.length;c++)eE(s,o[c])}(o,_)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,Ki()}}function Ao(s,o,c,d){const m=o[2];if(256!=(256&m)){sa(o);try{li(o),function dl(s){return bn.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&Ip(s,o,c,2,d);const T=3==(3&m);if(T){const j=s.preOrderCheckHooks;null!==j&&ka(o,j,null)}else{const j=s.preOrderHooks;null!==j&&Na(o,j,0,null),Ei(o,0)}if(function P0(s){for(let o=So(s);null!==o;o=yh(o)){if(!o[2])continue;const c=o[9];for(let d=0;d<c.length;d++){const m=c[d],_=m[3];0==(1024&m[2])&&Cc(_,1),m[2]|=1024}}}(o),function bv(s){for(let o=So(s);null!==o;o=yh(o))for(let c=10;c<o.length;c++){const d=o[c],m=d[1];Us(d)&&Ao(m,d,m.template,d[8])}}(o),null!==s.contentQueries&&A0(s,o),T){const j=s.contentCheckHooks;null!==j&&ka(o,j)}else{const j=s.contentHooks;null!==j&&Na(o,j,1),Ei(o,1)}!function qb(s,o){const c=s.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const m=c[d];if(m<0)du(~m);else{const _=m,T=c[++d],R=c[++d];Dc(T,_),R(2,o[_])}}}finally{du(-1)}}(s,o);const R=s.components;null!==R&&function Fd(s,o){for(let c=0;c<o.length;c++)Jb(s,o[c])}(o,R);const P=s.viewQuery;if(null!==P&&kp(2,P,d),T){const j=s.viewCheckHooks;null!==j&&ka(o,j)}else{const j=s.viewHooks;null!==j&&Na(o,j,2),Ei(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-73,1024&o[2]&&(o[2]&=-1025,Cc(o[3],-1))}finally{Ki()}}}function rc(s,o,c,d){const m=o[10],T=Ys(o);try{!T&&m.begin&&m.begin(),T&&Ep(s,o,d),Ao(s,o,c,d)}finally{!T&&m.end&&m.end()}}function Ip(s,o,c,d,m){const _=function bi(){return bn.lFrame.selectedIndex}(),T=2&d;try{du(-1),T&&o.length>20&&function b0(s,o,c,d){if(!d)if(3==(3&o[2])){const _=s.preOrderCheckHooks;null!==_&&ka(o,_,c)}else{const _=s.preOrderHooks;null!==_&&Na(o,_,0,c)}du(c)}(s,o,20,!1),c(d,m)}finally{du(_)}}function Cp(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Tp(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Tp(s,o,c,d,m,_,T,R,P,j){const q=20+d,te=q+m,de=function mI(s,o){const c=[];for(let d=0;d<o;d++)c.push(d<s?null:Pn);return c}(q,te),Ae="function"==typeof j?j():j;return de[1]={type:s,blueprint:de,template:c,queries:null,viewQuery:R,declTNode:o,data:de.slice().fill(null,q),bindingStartIndex:q,expandoStartIndex:te,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:P,consts:Ae,incompleteFirstPass:!1}}function vm(s,o,c,d){const m=L0(o);null===c?m.push(d):(m.push(c),s.firstCreatePass&&Iv(s).push(d,m.length-1))}function Dp(s,o,c){for(let d in s)if(s.hasOwnProperty(d)){const m=s[d];(c=null===c?{}:c).hasOwnProperty(d)?c[d].push(o,m):c[d]=[o,m]}return c}function Dl(s,o,c,d,m,_){const T=_.hostBindings;if(T){let R=s.hostBindingOpCodes;null===R&&(R=s.hostBindingOpCodes=[]);const P=~o.index;(function Sp(s){let o=s.length;for(;o>0;){const c=s[--o];if("number"==typeof c&&c<0)return c}return 0})(R)!=P&&R.push(P),R.push(d,m,T)}}function xu(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Qb(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function wI(s,o,c){if(c){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)c[o.exportAs[d]]=s;Zs(o)&&(c[""]=s)}}function _v(s,o,c){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+c,s.providerIndexes=o}function Ih(s,o,c,d,m){s.data[d]=m;const _=m.factory||(m.factory=ms(m.type)),T=new kc(_,Zs(m),null);s.blueprint[d]=T,c[d]=T,Dl(s,o,0,d,Eh(s,c,m.hostVars,Pn),m)}function Ap(s,o,c){const d=Gi(o,s),m=Cp(c),_=s[10],T=Ch(s,ma(s,m,null,c.onPush?64:16,d,o,_,_.createRenderer(d,c),null,null));s[o.index]=T}function ic(s,o,c,d,m,_){const T=Gi(s,o);!function xp(s,o,c,d,m,_,T){if(null==_)tr(s)?s.removeAttribute(o,m,c):o.removeAttribute(m);else{const R=null==T?ge(_):T(_,d||"",m);tr(s)?s.setAttribute(o,m,R,c):c?o.setAttributeNS(c,m,R):o.setAttribute(m,R)}}(o[11],T,_,s.value,c,d,m)}function N0(s,o,c,d,m,_){const T=_[o];if(null!==T){const R=d.setInput;for(let P=0;P<T.length;){const j=T[P++],q=T[P++],te=T[P++];null!==R?d.setInput(c,te,j,q):c[q]=te}}}function Xb(s,o){let c=null,d=0;for(;d<o.length;){const m=o[d];if(0!==m)if(5!==m){if("number"==typeof m)break;s.hasOwnProperty(m)&&(null===c&&(c=[]),c.push(m,s[m],o[d+1])),d+=2}else d+=2;else d+=4}return c}function Jb(s,o){const c=Or(o,s);if(Us(c)){const d=c[1];80&c[2]?Ao(d,c,d.template,c[8]):c[5]>0&&O0(c)}}function O0(s){for(let d=So(s);null!==d;d=yh(d))for(let m=10;m<d.length;m++){const _=d[m];if(1024&_[2]){const T=_[1];Ao(T,_,T.template,_[8])}else _[5]>0&&O0(_)}const c=s[1].components;if(null!==c)for(let d=0;d<c.length;d++){const m=Or(c[d],s);Us(m)&&m[5]>0&&O0(m)}}function eE(s,o){const c=Or(o,s),d=c[1];(function EI(s,o){for(let c=o.length;c<s.blueprint.length;c++)o.push(s.blueprint[c])})(d,c),Ep(d,c,c[8])}function Ch(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Mp(s){for(;s;){s[2]|=64;const o=fn(s);if(po(s)&&!o)return s;s=o}return null}function Rp(s){!function wm(s){for(let o=0;o<s.components.length;o++){const c=s.components[o],d=hp(c),m=d[1];rc(m,d,m.template,c)}}(s[8])}function kp(s,o,c){Yl(0),o(s,c)}const Ev=(()=>Promise.resolve(null))();function L0(s){return s[7]||(s[7]=[])}function Iv(s){return s.cleanup||(s.cleanup=[])}function jd(s,o){const c=s[9],d=c?c.get(dp,null):null;d&&d.handleError(o)}function Cv(s,o,c){let d=c?s.styles:null,m=c?s.classes:null,_=0;if(null!==o)for(let T=0;T<o.length;T++){const R=o[T];"number"==typeof R?_=R:1==_?m=Fe(m,R):2==_&&(d=Fe(d,R+": "+o[++T]+";"))}c?s.styles=d:s.stylesWithoutHost=d,c?s.classes=m:s.classesWithoutHost=m}const $d=new jr("INJECTOR",-1);class Np{get(o,c=wu){if(c===wu){const d=new Error(`NullInjectorError: No provider for ${Le(o)}!`);throw d.name="NullInjectorError",d}return c}}const Pp=new jr("Set Injector scope."),Op={},F0={};let U0;function B0(){return void 0===U0&&(U0=new Np),U0}function V0(s,o=null,c=null,d){const m=j0(s,o,c,d);return m._resolveInjectorDefTypes(),m}function j0(s,o=null,c=null,d){return new $0(s,c,o||B0(),d)}class $0{constructor(o,c,d,m=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];c&&Pi(c,R=>this.processProvider(R,o,c)),Pi([o],R=>this.processInjectorType(R,[],_)),this.records.set($d,Lp(void 0,this));const T=this.records.get(Pp);this.scope=null!=T?T.value:null,this.source=m||("object"==typeof o?null:Le(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,c=wu,d=pn.Default){this.assertNotDestroyed();const m=He(this),_=Ir(void 0);try{if(!(d&pn.SkipSelf)){let R=this.records.get(o);if(void 0===R){const P=function Sv(s){return"function"==typeof s||"object"==typeof s&&s instanceof jr}(o)&&On(o);R=P&&this.injectableDefInScope(P)?Lp(sc(o),Op):null,this.records.set(o,R)}if(null!=R)return this.hydrate(o,R)}return(d&pn.Self?B0():this.parent).get(o,c=d&pn.Optional&&c===wu?null:c)}catch(T){if("NullInjectorError"===T.name){if((T[_l]=T[_l]||[]).unshift(Le(o)),m)throw T;return function Va(s,o,c,d){const m=s[_l];throw o[re]&&m.unshift(o[re]),s.message=function Eo(s,o,c,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let m=Le(o);if(Array.isArray(o))m=o.map(Le).join(" -> ");else if("object"==typeof o){let _=[];for(let T in o)if(o.hasOwnProperty(T)){let R=o[T];_.push(T+":"+("string"==typeof R?JSON.stringify(R):Le(R)))}m=`{${_.join(", ")}}`}return`${c}${d?"("+d+")":""}[${m}]: ${s.replace(B,"\n  ")}`}("\n"+s.message,m,c,d),s.ngTokenPath=m,s[_l]=null,s}(T,o,"R3InjectorError",this.source)}throw T}finally{Ir(_),He(m)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((d,m)=>o.push(Le(m))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Qe(205,!1)}processInjectorType(o,c,d){if(!(o=ye(o)))return!1;let m=oi(o);const _=null==m&&o.ngModule||void 0,T=void 0===_?o:_,R=-1!==d.indexOf(T);if(void 0!==_&&(m=oi(_)),null==m)return!1;if(null!=m.imports&&!R){let q;d.push(T);try{Pi(m.imports,te=>{this.processInjectorType(te,c,d)&&(void 0===q&&(q=[]),q.push(te))})}finally{}if(void 0!==q)for(let te=0;te<q.length;te++){const{ngModule:de,providers:Ae}=q[te];Pi(Ae,ke=>this.processProvider(ke,de,Ae||sn))}}this.injectorDefTypes.add(T);const P=ms(T)||(()=>new T);this.records.set(T,Lp(P,Op));const j=m.providers;if(null!=j&&!R){const q=o;Pi(j,te=>this.processProvider(te,q,j))}return void 0!==_&&void 0!==o.providers}processProvider(o,c,d){let m=Hd(o=ye(o))?o:ye(o&&o.provide);const _=function uE(s,o,c){return z0(s)?Lp(void 0,s.useValue):Lp(function H0(s,o,c){let d;if(Hd(s)){const m=ye(s);return ms(m)||sc(m)}if(z0(s))d=()=>ye(s.useValue);else if(function Qc(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...hn(s.deps||[]));else if(function Th(s){return!(!s||!s.useExisting)}(s))d=()=>Kt(ye(s.useExisting));else{const m=ye(s&&(s.useClass||s.provide));if(!function lE(s){return!!s.deps}(s))return ms(m)||sc(m);d=()=>new m(...hn(s.deps))}return d}(s),Op)}(o);if(Hd(o)||!0!==o.multi)this.records.get(m);else{let T=this.records.get(m);T||(T=Lp(void 0,Op,!0),T.factory=()=>hn(T.multi),this.records.set(m,T)),m=o,T.multi.push(o)}this.records.set(m,_)}hydrate(o,c){return c.value===Op&&(c.value=F0,c.value=c.factory()),"object"==typeof c.value&&c.value&&function Dv(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this.onDestroy.add(c.value),c.value}injectableDefInScope(o){if(!o.providedIn)return!1;const c=ye(o.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function sc(s){const o=On(s),c=null!==o?o.factory:ms(s);if(null!==c)return c;if(s instanceof jr)throw new Qe(204,!1);if(s instanceof Function)return function aE(s){const o=s.length;if(o>0)throw function Ho(s,o){const c=[];for(let d=0;d<s;d++)c.push(o);return c}(o,"?"),new Qe(204,!1);const c=function us(s){const o=s&&(s[Ms]||s[cs]);if(o){const c=function ti(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),o}return null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new Qe(204,!1)}function Lp(s,o,c=!1){return{factory:s,value:o,multi:c?[]:void 0}}function z0(s){return null!==s&&"object"==typeof s&&we in s}function Hd(s){return"function"==typeof s}let bs=(()=>{class s{static create(c,d){var m;if(Array.isArray(c))return V0({name:""},d,c,"");{const _=null!==(m=c.name)&&void 0!==m?m:"";return V0({name:_},c.parent,c.providers,_)}}}return s.THROW_IF_NOT_FOUND=wu,s.NULL=new Np,s.\u0275prov=Zn({token:s,providedIn:"any",factory:()=>Kt($d)}),s.__NG_ELEMENT_ID__=-1,s})();function Z0(s,o){Rc(hp(s)[1],pr())}let xl=null;function Xa(){if(!xl){const s=Un.Symbol;if(s&&s.iterator)xl=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<o.length;++c){const d=o[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(xl=d)}}}return xl}function Gd(s){return!!Ov(s)&&(Array.isArray(s)||!(s instanceof Map)&&Xa()in s)}function Ov(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Q0(s,o,c,d){const m=lt();return function Mo(s,o,c){return!Object.is(s[o],c)&&(s[o]=c,!0)}(m,function Ma(){return bn.lFrame.bindingIndex++}(),o)&&(Kn(),ic(function hi(){const s=bn.lFrame;return fr(s.tView,s.selectedIndex)}(),m,s,o,c,d)),Q0}function Zd(s,o=pn.Default){const c=lt();return null===c?Kt(s,o):qu(pr(),c,ye(s),o)}function SE(){throw new Error("invalid")}function cw(s,o,c,d,m){const T=m?"class":"style";!function sE(s,o,c,d,m){for(let _=0;_<c.length;){const T=c[_++],R=c[_++],P=o[T],j=s.data[T];null!==j.setInput?j.setInput(P,m,d,R):P[R]=m}}(s,c,o.inputs[T],T,d)}function Wp(s,o,c,d){const m=lt(),_=Kn(),T=20+s,R=m[11],P=m[T]=js(R,o,function Vg(){return bn.lFrame.currentNamespace}()),j=_.firstCreatePass?function qp(s,o,c,d,m,_,T){const R=o.consts,j=Ko(o,s,2,m,_s(R,_));return function Ya(s,o,c,d){let m=!1;if(ql()){const _=function Yb(s,o,c){const d=s.directiveRegistry;let m=null;if(d)for(let _=0;_<d.length;_++){const T=d[_];hm(c,T.selectors,!1)&&(m||(m=[]),yu(_o(c,o),s,T.type),Zs(T)?(Qb(s,c),m.unshift(T)):m.push(T))}return m}(s,o,c),T=null===d?null:{"":-1};if(null!==_){m=!0,_v(c,s.data.length,_.length);for(let q=0;q<_.length;q++){const te=_[q];te.providersResolver&&te.providersResolver(te)}let R=!1,P=!1,j=Eh(s,o,_.length,null);for(let q=0;q<_.length;q++){const te=_[q];c.mergedAttrs=Pc(c.mergedAttrs,te.hostAttrs),Ih(s,c,o,j,te),wI(j,te,T),null!==te.contentQueries&&(c.flags|=8),(null!==te.hostBindings||null!==te.hostAttrs||0!==te.hostVars)&&(c.flags|=128);const de=te.type.prototype;!R&&(de.ngOnChanges||de.ngOnInit||de.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(c.index),R=!0),!P&&(de.ngOnChanges||de.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(c.index),P=!0),j++}!function _m(s,o){const d=o.directiveEnd,m=s.data,_=o.attrs,T=[];let R=null,P=null;for(let j=o.directiveStart;j<d;j++){const q=m[j],te=q.inputs,de=null===_||v0(o)?null:Xb(te,_);T.push(de),R=Dp(te,j,R),P=Dp(q.outputs,j,P)}null!==R&&(R.hasOwnProperty("class")&&(o.flags|=16),R.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=T,o.inputs=R,o.outputs=P}(s,c)}T&&function _I(s,o,c){if(o){const d=s.localNames=[];for(let m=0;m<o.length;m+=2){const _=c[o[m+1]];if(null==_)throw new Qe(-301,!1);d.push(o[m],_)}}}(c,d,T)}return c.mergedAttrs=Pc(c.mergedAttrs,c.attrs),m}(o,c,j,_s(R,T)),null!==j.attrs&&Cv(j,j.attrs,!1),null!==j.mergedAttrs&&Cv(j,j.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,j),j}(T,_,m,0,o,c,d):_.data[T];go(j,!0);const q=j.mergedAttrs;null!==q&&Bs(R,P,q);const te=j.classes;null!==te&&lm(R,P,te);const de=j.styles;return null!==de&&lI(R,P,de),64!=(64&j.flags)&&mp(_,m,P,j),0===function ll(){return bn.lFrame.elementDepthCount}()&&Li(P,m),function ad(){bn.lFrame.elementDepthCount++}(),ps(j)&&(function x0(s,o,c){!ql()||(function Zb(s,o,c,d){const m=c.directiveStart,_=c.directiveEnd;s.firstCreatePass||_o(c,o),Li(d,o);const T=c.initialInputs;for(let R=m;R<_;R++){const P=s.data[R],j=Zs(P);j&&Ap(o,c,P);const q=La(o,s,R,c);Li(q,o),null!==T&&N0(0,R-m,q,P,0,T),j&&(Or(c.index,o)[8]=q)}}(s,o,c,Gi(c,o)),128==(128&c.flags)&&function vI(s,o,c){const d=c.directiveStart,m=c.directiveEnd,T=c.index,R=function Sc(){return bn.lFrame.currentDirectiveIndex}();try{du(T);for(let P=d;P<m;P++){const j=s.data[P],q=o[P];Js(P),(null!==j.hostBindings||0!==j.hostVars||null!==j.hostAttrs)&&xu(j,q)}}finally{du(-1),Js(R)}}(s,o,c))}(_,m,j),function Wb(s,o,c){if(yc(o)){const m=o.directiveEnd;for(let _=o.directiveStart;_<m;_++){const T=s.data[_];T.contentQueries&&T.contentQueries(1,c[_],_)}}}(_,j,m)),null!==d&&function ts(s,o,c=Gi){const d=o.localNames;if(null!==d){let m=o.index+1;for(let _=0;_<d.length;_+=2){const T=d[_+1],R=-1===T?c(o,s):s[T];s[m++]=R}}}(m,j),Wp}function Kp(){let s=pr();Tc()?function mo(){bn.lFrame.isParent=!1}():(s=s.parent,go(s,!1));const o=s;!function Gl(){bn.lFrame.elementDepthCount--}();const c=Kn();return c.firstCreatePass&&(Rc(c,s),yc(s)&&c.queries.elementEnd(s)),null!=o.classesWithoutHost&&function $g(s){return 0!=(16&s.flags)}(o)&&cw(c,o,lt(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function gr(s){return 0!=(32&s.flags)}(o)&&cw(c,o,lt(),o.stylesWithoutHost,!1),Kp}function Nm(s,o,c,d){return Wp(s,o,c,d),Kp(),Nm}function Gv(s){return!!s&&"function"==typeof s.then}function ME(s){return!!s&&"function"==typeof s.subscribe}const RE=ME;function hw(s,o,c,d){const m=lt(),_=Kn(),T=pr();return function fw(s,o,c,d,m,_,T,R){const P=ps(d),q=s.firstCreatePass&&Iv(s),te=o[8],de=L0(o);let Ae=!0;if(3&d.type||R){const Pt=Gi(d,o),Qt=R?R(Pt):Pt,ct=de.length,mn=R?rr=>R(sr(rr[d.index])):d.index;if(tr(c)){let rr=null;if(!R&&P&&(rr=function kE(s,o,c,d){const m=s.cleanup;if(null!=m)for(let _=0;_<m.length-1;_+=2){const T=m[_];if(T===c&&m[_+1]===d){const R=o[7],P=m[_+2];return R.length>P?R[P]:null}"string"==typeof T&&(_+=2)}return null}(s,o,m,d.index)),null!==rr)(rr.__ngLastListenerFn__||rr).__ngNextListenerFn__=_,rr.__ngLastListenerFn__=_,Ae=!1;else{_=Yd(d,o,te,_,!1);const Cr=c.listen(Qt,m,_);de.push(_,Cr),q&&q.push(m,mn,ct,ct+1)}}else _=Yd(d,o,te,_,!0),Qt.addEventListener(m,_,T),de.push(_),q&&q.push(m,mn,ct,T)}else _=Yd(d,o,te,_,!1);const ke=d.outputs;let Mt;if(Ae&&null!==ke&&(Mt=ke[m])){const Pt=Mt.length;if(Pt)for(let Qt=0;Qt<Pt;Qt+=2){const Uu=o[Mt[Qt]][Mt[Qt+1]].subscribe(_),Ly=de.length;de.push(_,Uu),q&&q.push(m,d.index,Ly,-(Ly+1))}}}(_,m,m[11],T,s,o,!!c,d),hw}function Pm(s,o,c,d){try{return!1!==c(d)}catch(m){return jd(s,m),!1}}function Yd(s,o,c,d,m){return function _(T){if(T===Function)return d;const R=2&s.flags?Or(s.index,o):o;0==(32&o[2])&&Mp(R);let P=Pm(o,0,d,T),j=_.__ngNextListenerFn__;for(;j;)P=Pm(o,0,j,T)&&P,j=j.__ngNextListenerFn__;return m&&!1===P&&(T.preventDefault(),T.returnValue=!1),P}}function n_(s,o=""){const c=lt(),d=Kn(),m=s+20,_=d.firstCreatePass?Ko(d,m,1,o,null):d.data[m],T=c[m]=function fa(s,o){return tr(s)?s.createText(o):s.createTextNode(o)}(c[11],o);mp(d,c,T,_),go(_,!1)}const Nh=void 0;var nf=["en",[["a","p"],["AM","PM"],Nh],[["AM","PM"],Nh,Nh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nh,"{1} 'at' {0}",Nh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function QE(s){const c=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let Ph={};function Jp(s){const o=function qm(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=eg(o);if(c)return c;const d=o.split("-")[0];if(c=eg(d),c)return c;if("en"===d)return nf;throw new Error(`Missing locale data for the locale "${s}".`)}function u_(s){return Jp(s)[gn.PluralCase]}function eg(s){return s in Ph||(Ph[s]=Un.ng&&Un.ng.common&&Un.ng.common.locales&&Un.ng.common.locales[s]),Ph[s]}var gn=(()=>((gn=gn||{})[gn.LocaleId=0]="LocaleId",gn[gn.DayPeriodsFormat=1]="DayPeriodsFormat",gn[gn.DayPeriodsStandalone=2]="DayPeriodsStandalone",gn[gn.DaysFormat=3]="DaysFormat",gn[gn.DaysStandalone=4]="DaysStandalone",gn[gn.MonthsFormat=5]="MonthsFormat",gn[gn.MonthsStandalone=6]="MonthsStandalone",gn[gn.Eras=7]="Eras",gn[gn.FirstDayOfWeek=8]="FirstDayOfWeek",gn[gn.WeekendRange=9]="WeekendRange",gn[gn.DateFormat=10]="DateFormat",gn[gn.TimeFormat=11]="TimeFormat",gn[gn.DateTimeFormat=12]="DateTimeFormat",gn[gn.NumberSymbols=13]="NumberSymbols",gn[gn.NumberFormats=14]="NumberFormats",gn[gn.CurrencyCode=15]="CurrencyCode",gn[gn.CurrencySymbol=16]="CurrencySymbol",gn[gn.CurrencyName=17]="CurrencyName",gn[gn.Currencies=18]="Currencies",gn[gn.Directionality=19]="Directionality",gn[gn.PluralCase=20]="PluralCase",gn[gn.ExtraData=21]="ExtraData",gn))();const af="en-US";let tg=af;class jh{}class D_{resolveComponentFactory(o){throw function Ol(s){const o=Error(`No component factory found for ${Le(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let iy=(()=>{class s{}return s.NULL=new D_,s})();function si(){return Ll(pr(),lt())}function Ll(s,o){return new sy(Gi(s,o))}let sy=(()=>{class s{constructor(c){this.nativeElement=c}}return s.__NG_ELEMENT_ID__=si,s})();function eC(s){return s instanceof sy?s.nativeElement:s}class hg{}let tC=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function dg(){const s=lt(),c=Or(pr().index,s);return function qw(s){return s[11]}(zi(c)?c:s)}(),s})(),g1=(()=>{class s{}return s.\u0275prov=Zn({token:s,providedIn:"root",factory:()=>null}),s})();class Ww{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const m1=new Ww("13.3.9"),_f={};function lc(s,o,c,d,m=!1){for(;null!==c;){const _=o[c.index];if(null!==_&&d.push(sr(_)),fs(_))for(let R=10;R<_.length;R++){const P=_[R],j=P[1].firstChild;null!==j&&lc(P[1],P,j,d)}const T=c.type;if(8&T)lc(s,o,c.child,d);else if(32&T){const R=ze(c,o);let P;for(;P=R();)d.push(P)}else if(16&T){const R=Ub(o,c);if(Array.isArray(R))d.push(...R);else{const P=fn(o[16]);lc(P[1],P,R,d,!0)}}c=m?c.projectionNext:c.next}return d}class fg{constructor(o,c){this._lView=o,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,c=o[1];return lc(c,o,c.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(fs(o)){const c=o[8],d=c?c.indexOf(this):-1;d>-1&&(av(o,d),Zu(c,d))}this._attachedToViewContainer=!1}Nb(this._lView[1],this._lView)}onDestroy(o){vm(this._lView[1],this._lView,null,o)}markForCheck(){Mp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Vd(s,o,c){const d=o[10];d.begin&&d.begin();try{Ao(s,o,s.template,c)}catch(m){throw jd(o,m),m}finally{d.end&&d.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Qe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function om(s,o){um(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Qe(902,"");this._appRef=o}}class pg extends fg{constructor(o){super(o),this._view=o}detectChanges(){Rp(this._view)}checkNoChanges(){}get context(){return null}}class wf extends iy{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const c=Vr(o);return new ay(c,this.ngModule)}}function hc(s){const o=[];for(let c in s)s.hasOwnProperty(c)&&o.push({propName:s[c],templateName:c});return o}class ay extends jh{constructor(o,c){super(),this.componentDef=o,this.ngModule=c,this.componentType=o.type,this.selector=function fv(s){return s.map(bh).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return hc(this.componentDef.inputs)}get outputs(){return hc(this.componentDef.outputs)}create(o,c,d,m){const _=(m=m||this.ngModule)?function nC(s,o){return{get:(c,d,m)=>{const _=s.get(c,_f,m);return _!==_f||d===_f?_:o.get(c,d,m)}}}(o,m.injector):o,T=_.get(hg,uu),R=_.get(g1,null),P=T.createRenderer(null,this.componentDef),j=this.componentDef.selectors[0][0]||"div",q=d?function ym(s,o,c){if(tr(s))return s.selectRootElement(o,c===Wn.ShadowDom);let d="string"==typeof o?s.querySelector(o):o;return d.textContent="",d}(P,d,this.componentDef.encapsulation):js(T.createRenderer(null,this.componentDef),j,function oy(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(j)),te=this.componentDef.onPush?576:528,de=function pE(s,o){return{components:[],scheduler:s||pp,clean:Ev,playerHandler:o||null,flags:0}}(),Ae=Tp(0,null,null,1,0,null,null,null,null,null),ke=ma(null,Ae,de,te,null,null,T,P,R,_);let Mt,Pt;sa(ke);try{const Qt=function Jc(s,o,c,d,m,_){const T=c[1];c[20]=s;const P=Ko(T,20,2,"#host",null),j=P.mergedAttrs=o.hostAttrs;null!==j&&(Cv(P,j,!0),null!==s&&(Bs(m,s,j),null!==P.classes&&lm(m,s,P.classes),null!==P.styles&&lI(m,s,P.styles)));const q=d.createRenderer(s,o),te=ma(c,Cp(o),null,o.onPush?64:16,c[20],P,d,q,_||null,null);return T.firstCreatePass&&(yu(_o(P,c),T,o.type),Qb(T,P),_v(P,c.length,1)),Ch(c,te),c[20]=te}(q,this.componentDef,ke,T,P);if(q)if(d)Bs(P,q,["ng-version",m1.full]);else{const{attrs:ct,classes:mn}=function dm(s){const o=[],c=[];let d=1,m=2;for(;d<s.length;){let _=s[d];if("string"==typeof _)2===m?""!==_&&o.push(_,s[++d]):8===m&&c.push(_);else{if(!Cu(m))break;m=_}d++}return{attrs:o,classes:c}}(this.componentDef.selectors[0]);ct&&Bs(P,q,ct),mn&&mn.length>0&&lm(P,q,mn.join(" "))}if(Pt=fr(Ae,20),void 0!==c){const ct=Pt.projection=[];for(let mn=0;mn<this.ngContentSelectors.length;mn++){const rr=c[mn];ct.push(null!=rr?Array.from(rr):null)}}Mt=function Nv(s,o,c,d,m){const _=c[1],T=function so(s,o,c){const d=pr();s.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),Ih(s,d,o,Eh(s,o,1,null),c));const m=La(o,s,d.directiveStart,d);Li(m,o);const _=Gi(d,o);return _&&Li(_,o),m}(_,c,o);if(d.components.push(T),s[8]=T,m&&m.forEach(P=>P(T,o)),o.contentQueries){const P=pr();o.contentQueries(1,T,P.directiveStart)}const R=pr();return!_.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(du(R.index),Dl(c[1],R,0,R.directiveStart,R.directiveEnd,o),xu(o,T)),T}(Qt,this.componentDef,ke,de,[Z0]),Ep(Ae,ke,null)}finally{Ki()}return new y1(this.componentType,Mt,Ll(Pt,ke),ke,Pt)}}class y1 extends class p1{}{constructor(o,c,d,m,_){super(),this.location=d,this._rootLView=m,this._tNode=_,this.instance=c,this.hostView=this.changeDetectorRef=new pg(m),this.componentType=o}get injector(){return new Vo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class $h{}class Zw{}const va=new Map;class ly extends $h{constructor(o,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new wf(this);const d=Nr(o);this._bootstrapComponents=C(d.bootstrap),this._r3Injector=j0(o,c,[{provide:$h,useValue:this},{provide:iy,useValue:this.componentFactoryResolver}],Le(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,c=bs.THROW_IF_NOT_FOUND,d=pn.Default){return o===bs||o===$h||o===$d?this:this._r3Injector.get(o,c,d)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Hh extends Zw{constructor(o){super(),this.moduleType=o,null!==Nr(o)&&function iC(s){const o=new Set;!function c(d){const m=Nr(d,!0),_=m.id;null!==_&&(function _1(s,o,c){if(o&&o!==c)throw new Error(`Duplicate module registered for ${s} - ${Le(o)} vs ${Le(o.name)}`)}(_,va.get(_),d),va.set(_,d));const T=C(m.imports);for(const R of T)o.has(R)||(o.add(R),c(R))}(s)}(o)}create(o){return new ly(this.moduleType,o)}}function mg(s){return o=>{setTimeout(s,void 0,o)}}const rl=class Jw extends D.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,c,d){var m,_,T;let R=o,P=c||(()=>null),j=d;if(o&&"object"==typeof o){const te=o;R=null===(m=te.next)||void 0===m?void 0:m.bind(te),P=null===(_=te.error)||void 0===_?void 0:_.bind(te),j=null===(T=te.complete)||void 0===T?void 0:T.bind(te)}this.__isAsync&&(P=mg(P),R&&(R=mg(R)),j&&(j=mg(j)));const q=super.subscribe({next:R,error:P,complete:j});return o instanceof be.w0&&o.add(q),q}};function py(){return this._results[Xa()]()}class bf{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=Xa(),d=bf.prototype;d[c]||(d[c]=py)}get changes(){return this._changes||(this._changes=new rl)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,c){return this._results.reduce(o,c)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,c){const d=this;d.dirty=!1;const m=Ni(o);(this._changesDetected=!function Wf(s,o,c){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let m=s[d],_=o[d];if(c&&(m=c(m),_=c(_)),_!==m)return!1}return!0}(d._results,m,c))&&(d._results=m,d.length=m.length,d.last=m[this.length-1],d.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Ef=(()=>{class s{}return s.__NG_ELEMENT_ID__=yy,s})();const gy=Ef,my=class extends gy{constructor(o,c,d){super(),this._declarationLView=o,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(o){const c=this._declarationTContainer.tViews,d=ma(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(c)),Ep(c,d,o),new fg(d)}};function yy(){return If(pr(),lt())}function If(s,o){return 4&s.type?new my(o,s,Ll(s,o)):null}let qh=(()=>{class s{}return s.__NG_ELEMENT_ID__=C1,s})();function C1(){return _y(pr(),lt())}const T1=qh,Wh=class extends T1{constructor(o,c,d){super(),this._lContainer=o,this._hostTNode=c,this._hostLView=d}get element(){return Ll(this._hostTNode,this._hostLView)}get injector(){return new Vo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Yi(this._hostTNode,this._hostLView);if(pu(o)){const c=aa(o,this._hostLView),d=Pa(o);return new Vo(c[1].data[d+8],c)}return new Vo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const c=R_(this._lContainer);return null!==c&&c[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,c,d){const m=o.createEmbeddedView(c||{});return this.insert(m,d),m}createComponent(o,c,d,m,_){const T=o&&!function ih(s){return"function"==typeof s}(o);let R;if(T)R=c;else{const te=c||{};R=te.index,d=te.injector,m=te.projectableNodes,_=te.ngModuleRef}const P=T?o:new ay(Vr(o)),j=d||this.parentInjector;if(!_&&null==P.ngModule){const de=(T?j:this.parentInjector).get($h,null);de&&(_=de)}const q=P.create(j,m,void 0,_);return this.insert(q.hostView,R),q}insert(o,c){const d=o._lView,m=d[1];if(function ia(s){return fs(s[3])}(d)){const q=this.indexOf(o);if(-1!==q)this.detach(q);else{const te=d[3],de=new Wh(te,te[6],te[3]);de.detach(de.indexOf(o))}}const _=this._adjustIndex(c),T=this._lContainer;!function vh(s,o,c,d){const m=10+d,_=c.length;d>0&&(c[m-1][4]=o),d<_-10?(o[4]=c[m],Ku(c,10+d,o)):(c.push(o),o[4]=null),o[3]=c;const T=o[17];null!==T&&c!==T&&function oI(s,o){const c=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===c?s[9]=[o]:c.push(o)}(T,o);const R=o[19];null!==R&&R.insertView(s),o[2]|=128}(m,d,T,_);const R=dv(_,T),P=d[11],j=$s(P,T[7]);return null!==j&&function sm(s,o,c,d,m,_){d[0]=m,d[6]=o,um(s,d,c,1,m,_)}(m,T[6],P,d,j,R),o.attachToViewContainerRef(),Ku(vy(T),_,o),o}move(o,c){return this.insert(o,c)}indexOf(o){const c=R_(this._lContainer);return null!==c?c.indexOf(o):-1}remove(o){const c=this._adjustIndex(o,-1),d=av(this._lContainer,c);d&&(Zu(vy(this._lContainer),c),Nb(d[1],d))}detach(o){const c=this._adjustIndex(o,-1),d=av(this._lContainer,c);return d&&null!=Zu(vy(this._lContainer),c)?new fg(d):null}_adjustIndex(o,c=0){return null==o?this.length+c:o}};function R_(s){return s[8]}function vy(s){return s[8]||(s[8]=[])}function _y(s,o){let c;const d=o[s.index];if(fs(d))c=d;else{let m;if(8&s.type)m=sr(d);else{const _=o[11];m=_.createComment("");const T=Gi(s,o);wh(_,$s(_,T),m,function uI(s,o){return tr(s)?s.nextSibling(o):o.nextSibling}(_,T),!1)}o[s.index]=c=function wv(s,o,c,d){return new Array(s,!0,!1,o,null,0,d,c,null,null)}(d,o,m,s),Ch(o,c)}return new Wh(c,s,o)}class vg{constructor(o){this.queryList=o,this.matches=null}clone(){return new vg(this.queryList)}setDirty(){this.queryList.setDirty()}}class Cf{constructor(o=[]){this.queries=o}createEmbeddedView(o){const c=o.queries;if(null!==c){const d=null!==o.contentQueries?o.contentQueries[0]:c.length,m=[];for(let _=0;_<d;_++){const T=c.getByIndex(_);m.push(this.queries[T.indexInDeclarationView].clone())}return new Cf(m)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let c=0;c<this.queries.length;c++)null!==Bi(o,c).matches&&this.queries[c].setDirty()}}class Tf{constructor(o,c,d=null){this.predicate=o,this.flags=c,this.read=d}}class eb{constructor(o=[]){this.queries=o}elementStart(o,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,c)}elementEnd(o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(o)}embeddedTView(o){let c=null;for(let d=0;d<this.length;d++){const m=null!==c?c.length:0,_=this.getByIndex(d).embeddedTView(o,m);_&&(_.indexInDeclarationView=d,null!==c?c.push(_):c=[_])}return null!==c?new eb(c):null}template(o,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,c)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class wy{constructor(o,c=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(o,c){this.isApplyingToNode(c)&&this.matchTNode(o,c)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,c){this.elementStart(o,c)}embeddedTView(o,c){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,c),new wy(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let m=0;m<d.length;m++){const _=d[m];this.matchTNodeWithReadOption(o,c,tb(c,_)),this.matchTNodeWithReadOption(o,c,Fc(c,o,_,!1,!1))}else d===Ef?4&c.type&&this.matchTNodeWithReadOption(o,c,-1):this.matchTNodeWithReadOption(o,c,Fc(c,o,d,!1,!1))}matchTNodeWithReadOption(o,c,d){if(null!==d){const m=this.metadata.read;if(null!==m)if(m===sy||m===qh||m===Ef&&4&c.type)this.addMatch(c.index,-2);else{const _=Fc(c,o,m,!1,!1);null!==_&&this.addMatch(c.index,_)}else this.addMatch(c.index,d)}}addMatch(o,c){null===this.matches?this.matches=[o,c]:this.matches.push(o,c)}}function tb(s,o){const c=s.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===o)return c[d+1];return null}function aC(s,o,c,d){return-1===c?function oC(s,o){return 11&s.type?Ll(s,o):4&s.type?If(s,o):null}(o,s):-2===c?function D1(s,o,c){return c===sy?Ll(o,s):c===Ef?If(o,s):c===qh?_y(o,s):void 0}(s,o,d):La(s,s[1],c,o)}function S1(s,o,c,d){const m=o[19].queries[d];if(null===m.matches){const _=s.data,T=c.matches,R=[];for(let P=0;P<T.length;P+=2){const j=T[P];R.push(j<0?null:aC(o,_[j],T[P+1],c.metadata.read))}m.matches=R}return m.matches}function _g(s,o,c,d){const m=s.queries.getByIndex(c),_=m.matches;if(null!==_){const T=S1(s,o,m,c);for(let R=0;R<_.length;R+=2){const P=_[R];if(P>0)d.push(T[R/2]);else{const j=_[R+1],q=o[-P];for(let te=10;te<q.length;te++){const de=q[te];de[17]===de[3]&&_g(de[1],de,j,d)}if(null!==q[9]){const te=q[9];for(let de=0;de<te.length;de++){const Ae=te[de];_g(Ae[1],Ae,j,d)}}}}}return d}function N_(s){const o=lt(),c=Kn(),d=xc();Yl(d+1);const m=Bi(c,d);if(s.dirty&&Ys(o)===(2==(2&m.metadata.flags))){if(null===m.matches)s.reset([]);else{const _=m.crossesNgTemplate?_g(c,o,d,[]):S1(c,o,m,d);s.reset(_,eC),s.notifyOnChanges()}return!0}return!1}function P_(s,o,c){const d=Kn();d.firstCreatePass&&(nb(d,new Tf(s,o,c),-1),2==(2&o)&&(d.staticViewQueries=!0)),O_(d,lt(),o)}function is(s,o,c,d){const m=Kn();if(m.firstCreatePass){const _=pr();nb(m,new Tf(o,c,d),_.index),function wt(s,o){const c=s.contentQueries||(s.contentQueries=[]);o!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,o)}(m,s),2==(2&c)&&(m.staticContentQueries=!0)}O_(m,lt(),c)}function Df(){return function Ul(s,o){return s[19].queries[o].queryList}(lt(),xc())}function O_(s,o,c){const d=new bf(4==(4&c));vm(s,o,d,d.destroy),null===o[19]&&(o[19]=new Cf),o[19].queries.push(new vg(d))}function nb(s,o,c){null===s.queries&&(s.queries=new eb),s.queries.track(new wy(o,c))}function Bi(s,o){return s.queries.getByIndex(o)}function ao(...s){}const Zh=new jr("Application Initializer");let H_=(()=>{class s{constructor(c){this.appInits=c,this.resolve=ao,this.reject=ao,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,m)=>{this.resolve=d,this.reject=m})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let m=0;m<this.appInits.length;m++){const _=this.appInits[m]();if(Gv(_))c.push(_);else if(RE(_)){const T=new Promise((R,P)=>{_.subscribe({complete:R,error:P})});c.push(T)}}Promise.all(c).then(()=>{d()}).catch(m=>{this.reject(m)}),0===c.length&&d(),this.initialized=!0}}return s.\u0275fac=function(c){return new(c||s)(Kt(Zh,8))},s.\u0275prov=Zn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const _i=new jr("AppId",{providedIn:"root",factory:function Ay(){return`${vr()}${vr()}${vr()}`}});function vr(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ab=new jr("Platform Initializer"),Tg=new jr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),wa=new jr("appBootstrapListener");let As=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Zn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const tu=new jr("LocaleId",{providedIn:"root",factory:()=>Vn(tu,pn.Optional|pn.SkipSelf)||function hC(){return"undefined"!=typeof $localize&&$localize.locale||af}()}),ei=new jr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Bl{constructor(o,c){this.ngModuleFactory=o,this.componentFactories=c}}let xy=(()=>{class s{compileModuleSync(c){return new Hh(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),_=C(Nr(c).declarations).reduce((T,R)=>{const P=Vr(R);return P&&T.push(new ay(P)),T},[]);return new Bl(d,_)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Zn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const My=(()=>Promise.resolve(0))();function G_(s){"undefined"==typeof Zone?My.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ba{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rl(!1),this.onMicrotaskEmpty=new rl(!1),this.onStable=new rl(!1),this.onError=new rl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!d&&c,m.shouldCoalesceRunChangeDetection=d,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function Yh(){let s=Un.requestAnimationFrame,o=Un.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Xh(s){const o=()=>{!function Ry(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Un,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,ky(s),s.isCheckStableRunning=!0,Lu(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),ky(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,m,_,T,R)=>{try{return Vl(s),c.invokeTask(m,_,T,R)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||s.shouldCoalesceRunChangeDetection)&&o(),q_(s)}},onInvoke:(c,d,m,_,T,R,P)=>{try{return Vl(s),c.invoke(m,_,T,R,P)}finally{s.shouldCoalesceRunChangeDetection&&o(),q_(s)}},onHasTask:(c,d,m,_)=>{c.hasTask(m,_),d===m&&("microTask"==_.change?(s._hasPendingMicrotasks=_.microTask,ky(s),Lu(s)):"macroTask"==_.change&&(s.hasPendingMacrotasks=_.macroTask))},onHandleError:(c,d,m,_)=>(c.handleError(m,_),s.runOutsideAngular(()=>s.onError.emit(_)),!1)})}(m)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ba.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ba.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,c,d){return this._inner.run(o,c,d)}runTask(o,c,d,m){const _=this._inner,T=_.scheduleEventTask("NgZoneEvent: "+m,o,Qh,ao,ao);try{return _.runTask(T,c,d)}finally{_.cancelTask(T)}}runGuarded(o,c,d){return this._inner.runGuarded(o,c,d)}runOutsideAngular(o){return this._outer.run(o)}}const Qh={};function Lu(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function ky(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Vl(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function q_(s){s._nesting--,Lu(s)}class Fu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rl,this.onMicrotaskEmpty=new rl,this.onStable=new rl,this.onError=new rl}run(o,c,d){return o.apply(c,d)}runGuarded(o,c,d){return o.apply(c,d)}runOutsideAngular(o){return o()}runTask(o,c,d,m){return o.apply(c,d)}}let jl=(()=>{class s{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ba.assertNotInAngularZone(),G_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())G_(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,m){let _=-1;d&&d>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==_),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:_,updateCb:m})}whenStable(c,d,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,d,m){return[]}}return s.\u0275fac=function(c){return new(c||s)(Kt(ba))},s.\u0275prov=Zn({token:s,factory:s.\u0275fac}),s})(),Sg=(()=>{class s{constructor(){this._applications=new Map,Jh.addToWindow(this)}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return Jh.findTestabilityInTree(this,c,d)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Zn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class P1{addToWindow(o){}findTestabilityInTree(o,c,d){return null}}function ub(s){Jh=s}let Jh=new P1,dc=null;const cb=new jr("AllowMultipleToken"),lb=new jr("PlatformOnDestroy");class xi{constructor(o,c){this.name=o,this.token=c}}function _r(s,o,c=[]){const d=`Platform: ${o}`,m=new jr(d);return(_=[])=>{let T=Ny();if(!T||T.injector.get(cb,!1)){const R=[...c,..._,{provide:m,useValue:!0}];s?s(R):function Ea(s){if(dc&&!dc.get(cb,!1))throw new Qe(400,"");dc=s;const o=s.get(xg),c=s.get(ab,null);c&&c.forEach(d=>d())}(function L1(s=[],o){return bs.create({name:o,providers:[{provide:Pp,useValue:"platform"},{provide:lb,useValue:()=>dc=null},...s]})}(R,d))}return function Po(s){const o=Ny();if(!o)throw new Qe(401,"");return o}()}}function Ny(){var s;return null!==(s=null==dc?void 0:dc.get(xg))&&void 0!==s?s:null}let xg=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const R=function Py(s,o){let c;return c="noop"===s?new Fu:("zone.js"===s?void 0:s)||new ba({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),c}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),P=[{provide:ba,useValue:R}];return R.run(()=>{const j=bs.create({providers:P,parent:this.injector,name:c.moduleType.name}),q=c.create(j),te=q.injector.get(dp,null);if(!te)throw new Qe(402,"");return R.runOutsideAngular(()=>{const de=R.onError.subscribe({next:Ae=>{te.handleError(Ae)}});q.onDestroy(()=>{ss(this._modules,q),de.unsubscribe()})}),function W_(s,o,c){try{const d=c();return Gv(d)?d.catch(m=>{throw o.runOutsideAngular(()=>s.handleError(m)),m}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(te,R,()=>{const de=q.injector.get(H_);return de.runInitializers(),de.donePromise.then(()=>(function ng(s){Jt(s,"Expected localeId to be defined"),"string"==typeof s&&(tg=s.toLowerCase().replace(/_/g,"-"))}(q.injector.get(tu,af)||af),this._moduleDoBootstrap(q),q))})})}bootstrapModule(c,d=[]){const m=fc({},d);return function dC(s,o,c){const d=new Hh(c);return Promise.resolve(d)}(0,0,c).then(_=>this.bootstrapModuleFactory(_,m))}_moduleDoBootstrap(c){const d=c.injector.get(Mg);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(m=>d.bootstrap(m));else{if(!c.instance.ngDoBootstrap)throw new Qe(403,"");c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Qe(404,"");this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(lb,null);null==c||c(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(c){return new(c||s)(Kt(bs))},s.\u0275prov=Zn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function fc(s,o){return Array.isArray(o)?o.reduce(fc,s):Object.assign(Object.assign({},s),o)}let Mg=(()=>{class s{constructor(c,d,m,_){this._zone=c,this._injector=d,this._exceptionHandler=m,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const T=new Q.y(P=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{P.next(this._stable),P.complete()})}),R=new Q.y(P=>{let j;this._zone.runOutsideAngular(()=>{j=this._zone.onStable.subscribe(()=>{ba.assertNotInAngularZone(),G_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,P.next(!0))})})});const q=this._zone.onUnstable.subscribe(()=>{ba.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{P.next(!1)}))});return()=>{j.unsubscribe(),q.unsubscribe()}});this.isStable=(0,Ue.T)(T,R.pipe((0,xe.B)()))}bootstrap(c,d){if(!this._initStatus.done)throw new Qe(405,"");let m;m=c instanceof jh?c:this._injector.get(iy).resolveComponentFactory(c),this.componentTypes.push(m.componentType);const _=function O1(s){return s.isBoundToModule}(m)?void 0:this._injector.get($h),R=m.create(bs.NULL,[],d||m.selector,_),P=R.location.nativeElement,j=R.injector.get(jl,null),q=j&&R.injector.get(Sg);return j&&q&&q.registerApplication(P,j),R.onDestroy(()=>{this.detachView(R.hostView),ss(this.components,R),q&&q.unregisterApplication(P)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new Qe(101,"");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;ss(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(wa,[]).concat(this._bootstrapListeners).forEach(m=>m(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(c){return new(c||s)(Kt(ba),Kt(bs),Kt(dp),Kt(H_))},s.\u0275prov=Zn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function ss(s,o){const c=s.indexOf(o);c>-1&&s.splice(c,1)}let F1=!0,hb=!1;function U1(){return hb=!0,F1}function fC(){if(hb)throw new Error("Cannot enable prod mode after platform setup.");F1=!1}let f=(()=>{class s{}return s.__NG_ELEMENT_ID__=g,s})();function g(s){return function v(s,o,c){if(iu(s)&&!c){const d=Or(s.index,o);return new fg(d,d)}return 47&s.type?new fg(o[16],o):null}(pr(),lt(),16==(16&s))}class st{constructor(){}supports(o){return Gd(o)}create(o){return new pt(o)}}const Vt=(s,o)=>o;class pt{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Vt}forEachItem(o){let c;for(c=this._itHead;null!==c;c=c._next)o(c)}forEachOperation(o){let c=this._itHead,d=this._removalsHead,m=0,_=null;for(;c||d;){const T=!d||c&&c.currentIndex<$t(d,m,_)?c:d,R=$t(T,m,_),P=T.currentIndex;if(T===d)m--,d=d._nextRemoved;else if(c=c._next,null==T.previousIndex)m++;else{_||(_=[]);const j=R-m,q=P-m;if(j!=q){for(let de=0;de<j;de++){const Ae=de<_.length?_[de]:_[de]=0,ke=Ae+de;q<=ke&&ke<j&&(_[de]=Ae+1)}_[T.previousIndex]=q-j}}R!==P&&o(T,R,P)}}forEachPreviousItem(o){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachMovedItem(o){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}forEachIdentityChange(o){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)o(c)}diff(o){if(null==o&&(o=[]),!Gd(o))throw new Qe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let m,_,T,c=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let R=0;R<this.length;R++)_=o[R],T=this._trackByFn(R,_),null!==c&&Object.is(c.trackById,T)?(d&&(c=this._verifyReinsertion(c,_,T,R)),Object.is(c.item,_)||this._addIdentityChange(c,_)):(c=this._mismatch(c,_,T,R),d=!0),c=c._next}else m=0,function Y0(s,o){if(Array.isArray(s))for(let c=0;c<s.length;c++)o(s[c]);else{const c=s[Xa()]();let d;for(;!(d=c.next()).done;)o(d.value)}}(o,R=>{T=this._trackByFn(m,R),null!==c&&Object.is(c.trackById,T)?(d&&(c=this._verifyReinsertion(c,R,T,m)),Object.is(c.item,R)||this._addIdentityChange(c,R)):(c=this._mismatch(c,R,T,m),d=!0),c=c._next,m++}),this.length=m;return this._truncate(c),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,c,d,m){let _;return null===o?_=this._itTail:(_=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._reinsertAfter(o,_,m)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,m))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._moveAfter(o,_,m)):o=this._addAfter(new le(c,d),_,m),o}_verifyReinsertion(o,c,d,m){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==_?o=this._reinsertAfter(_,o._prev,m):o.currentIndex!=m&&(o.currentIndex=m,this._addToMoves(o,m)),o}_truncate(o){for(;null!==o;){const c=o._next;this._addToRemovals(this._unlink(o)),o=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const m=o._prevRemoved,_=o._nextRemoved;return null===m?this._removalsHead=_:m._nextRemoved=_,null===_?this._removalsTail=m:_._prevRemoved=m,this._insertAfter(o,c,d),this._addToMoves(o,d),o}_moveAfter(o,c,d){return this._unlink(o),this._insertAfter(o,c,d),this._addToMoves(o,d),o}_addAfter(o,c,d){return this._insertAfter(o,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,c,d){const m=null===c?this._itHead:c._next;return o._next=m,o._prev=c,null===m?this._itTail=o:m._prev=o,null===c?this._itHead=o:c._next=o,null===this._linkedRecords&&(this._linkedRecords=new xt),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const c=o._prev,d=o._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,o}_addToMoves(o,c){return o.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xt),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,c){return o.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class le{constructor(o,c){this.item=o,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class it{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const c=o._prevDup,d=o._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class xt{constructor(){this.map=new Map}put(o){const c=o.trackById;let d=this.map.get(c);d||(d=new it,this.map.set(c,d)),d.add(o)}get(o,c){const m=this.map.get(o);return m?m.get(o,c):null}remove(o){const c=o.trackById;return this.map.get(c).remove(o)&&this.map.delete(c),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $t(s,o,c){const d=s.previousIndex;if(null===d)return d;let m=0;return c&&d<c.length&&(m=c[d]),d+o+m}class Yt{constructor(){}supports(o){return o instanceof Map||Ov(o)}create(){return new jn}}class jn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let c;for(c=this._mapHead;null!==c;c=c._next)o(c)}forEachPreviousItem(o){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)o(c)}forEachChangedItem(o){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}diff(o){if(o){if(!(o instanceof Map||Ov(o)))throw new Qe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,m)=>{if(c&&c.key===m)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const _=this._getOrCreateRecordForKey(m,d);c=this._insertBeforeOrAppend(c,_)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,c){if(o){const d=o._prev;return c._next=o,c._prev=d,o._prev=c,d&&(d._next=c),o===this._mapHead&&(this._mapHead=c),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(o,c){if(this._records.has(o)){const m=this._records.get(o);this._maybeAddToChanges(m,c);const _=m._prev,T=m._next;return _&&(_._next=T),T&&(T._prev=_),m._next=null,m._prev=null,m}const d=new kn(o);return this._records.set(o,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,c){Object.is(c,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=c,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,c){o instanceof Map?o.forEach(c):Object.keys(o).forEach(d=>c(o[d],d))}}class kn{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ur(){return new Qn([new st])}let Qn=(()=>{class s{constructor(c){this.factories=c}static create(c,d){if(null!=d){const m=d.factories.slice();c=c.concat(m)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||ur()),deps:[[s,new Go,new ja]]}}find(c){const d=this.factories.find(m=>m.supports(c));if(null!=d)return d;throw new Qe(901,"")}}return s.\u0275prov=Zn({token:s,providedIn:"root",factory:ur}),s})();function Br(){return new $n([new Yt])}let $n=(()=>{class s{constructor(c){this.factories=c}static create(c,d){if(d){const m=d.factories.slice();c=c.concat(m)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||Br()),deps:[[s,new Go,new ja]]}}find(c){const d=this.factories.find(_=>_.supports(c));if(d)return d;throw new Qe(901,"")}}return s.\u0275prov=Zn({token:s,providedIn:"root",factory:Br}),s})();const os=_r(null,"core",[]);let al=(()=>{class s{constructor(c){}}return s.\u0275fac=function(c){return new(c||s)(Kt(Mg))},s.\u0275mod=Gr({type:s}),s.\u0275inj=Yn({}),s})()},3942:(jt,et,M)=>{"use strict";M.d(et,{Z:()=>Qe});var D=M(2090),be=M(4859),Q=M(9681),Ue=M(1877);class xe{constructor(ge,Me){this._delegate=ge,this.firebase=Me,(0,Q._addComponent)(ge,new be.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Q.deleteApp)(this._delegate)))}_getService(ge,Me=Q._DEFAULT_ENTRY_NAME){var ht;this._delegate.checkDestroyed();const bt=this._delegate.container.getProvider(ge);return!bt.isInitialized()&&"EXPLICIT"===(null===(ht=bt.getComponent())||void 0===ht?void 0:ht.instantiationMode)&&bt.initialize(),bt.getImmediate({identifier:Me})}_removeServiceInstance(ge,Me=Q._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(Me)}_addComponent(ge){(0,Q._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,Q._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ve=new D.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ae=function Fe(){const Et=function Le(Et){const ge={},Me={__esModule:!0,initializeApp:function We(vt,ce={}){const Ze=Q.initializeApp(vt,ce);if((0,D.r3)(ge,Ze.name))return ge[Ze.name];const fe=new Et(Ze,Me);return ge[Ze.name]=fe,fe},app:bt,registerVersion:Q.registerVersion,setLogLevel:Q.setLogLevel,onLog:Q.onLog,apps:null,SDK_VERSION:Q.SDK_VERSION,INTERNAL:{registerComponent:function Xe(vt){const ce=vt.name,Ze=ce.replace("-compat","");if(Q._registerComponent(vt)&&"PUBLIC"===vt.type){const fe=(Re=bt())=>{if("function"!=typeof Re[Ze])throw Ve.create("invalid-app-argument",{appName:ce});return Re[Ze]()};void 0!==vt.serviceProps&&(0,D.ZB)(fe,vt.serviceProps),Me[Ze]=fe,Et.prototype[Ze]=function(...Re){return this._getService.bind(this,ce).apply(this,vt.multipleInstances?Re:[])}}return"PUBLIC"===vt.type?Me[Ze]:null},removeApp:function ht(vt){delete ge[vt]},useAsService:function ut(vt,ce){return"serverAuth"===ce?null:ce},modularAPIs:Q}};function bt(vt){if(!(0,D.r3)(ge,vt=vt||Q._DEFAULT_ENTRY_NAME))throw Ve.create("no-app",{appName:vt});return ge[vt]}return Me.default=Me,Object.defineProperty(Me,"apps",{get:function Ke(){return Object.keys(ge).map(vt=>ge[vt])}}),bt.App=Et,Me}(xe);return Et.INTERNAL=Object.assign(Object.assign({},Et.INTERNAL),{createFirebaseNamespace:Fe,extendNamespace:function ge(Me){(0,D.ZB)(Et,Me)},createSubscribe:D.ne,ErrorFactory:D.LL,deepExtend:D.ZB}),Et}(),ue=new Ue.Yd("@firebase/app-compat");if((0,D.jU)()&&void 0!==self.firebase){ue.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Et=self.firebase.SDK_VERSION;Et&&Et.indexOf("LITE")>=0&&ue.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Qe=ae;!function ot(Et){(0,Q.registerVersion)("@firebase/app-compat","0.1.28",Et)}()},9681:(jt,et,M)=>{"use strict";M.r(et),M.d(et,{FirebaseError:()=>Ue.ZR,SDK_VERSION:()=>Ms,_DEFAULT_ENTRY_NAME:()=>Jt,_addComponent:()=>Hn,_addOrOverwriteComponent:()=>Zn,_apps:()=>Fn,_clearComponents:()=>xs,_components:()=>cr,_getProvider:()=>Yn,_registerComponent:()=>xr,_removeServiceInstance:()=>On,deleteApp:()=>pn,getApp:()=>cs,getApps:()=>Ws,initializeApp:()=>Rs,onLog:()=>Ir,registerVersion:()=>Mr,setLogLevel:()=>Da});var D=M(5861),be=M(4859),Q=M(1877),Ue=M(2090),xe=M(8766);class Be{constructor(ne){this.container=ne}getPlatformInfoString(){return this.container.getProviders().map(nt=>{if(function Ve(Ie){const ne=Ie.getComponent();return"VERSION"===(null==ne?void 0:ne.type)}(nt)){const It=nt.getImmediate();return`${It.library}/${It.version}`}return null}).filter(nt=>nt).join(" ")}}const Le="@firebase/app",ae=new Q.Yd("@firebase/app"),Jt="[DEFAULT]",_t={[Le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Fn=new Map,cr=new Map;function Hn(Ie,ne){try{Ie.container.addComponent(ne)}catch(nt){ae.debug(`Component ${ne.name} failed to register with FirebaseApp ${Ie.name}`,nt)}}function Zn(Ie,ne){Ie.container.addOrOverwriteComponent(ne)}function xr(Ie){const ne=Ie.name;if(cr.has(ne))return ae.debug(`There were multiple attempts to register component ${ne}.`),!1;cr.set(ne,Ie);for(const nt of Fn.values())Hn(nt,Ie);return!0}function Yn(Ie,ne){const nt=Ie.container.getProvider("heartbeat").getImmediate({optional:!0});return nt&&nt.triggerHeartbeat(),Ie.container.getProvider(ne)}function On(Ie,ne,nt=Jt){Yn(Ie,ne).clearInstance(nt)}function xs(){cr.clear()}const ti=new Ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class oi{constructor(ne,nt,It){this._isDeleted=!1,this._options=Object.assign({},ne),this._config=Object.assign({},nt),this._name=nt.name,this._automaticDataCollectionEnabled=nt.automaticDataCollectionEnabled,this._container=It,this.container.addComponent(new be.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ne){this._isDeleted=ne}checkDestroyed(){if(this.isDeleted)throw ti.create("app-deleted",{appName:this._name})}}const Ms="9.8.4";function Rs(Ie,ne={}){"object"!=typeof ne&&(ne={name:ne});const nt=Object.assign({name:Jt,automaticDataCollectionEnabled:!1},ne),It=nt.name;if("string"!=typeof It||!It)throw ti.create("bad-app-name",{appName:String(It)});const Gt=Fn.get(It);if(Gt){if((0,Ue.vZ)(Ie,Gt.options)&&(0,Ue.vZ)(nt,Gt.config))return Gt;throw ti.create("duplicate-app",{appName:It})}const Dn=new be.H0(It);for(const or of cr.values())Dn.addComponent(or);const ir=new oi(Ie,nt,Dn);return Fn.set(It,ir),ir}function cs(Ie=Jt){const ne=Fn.get(Ie);if(!ne)throw ti.create("no-app",{appName:Ie});return ne}function Ws(){return Array.from(Fn.values())}function pn(Ie){return ks.apply(this,arguments)}function ks(){return(ks=(0,D.Z)(function*(Ie){const ne=Ie.name;Fn.has(ne)&&(Fn.delete(ne),yield Promise.all(Ie.container.getProviders().map(nt=>nt.delete())),Ie.isDeleted=!0)})).apply(this,arguments)}function Mr(Ie,ne,nt){var It;let Gt=null!==(It=_t[Ie])&&void 0!==It?It:Ie;nt&&(Gt+=`-${nt}`);const Dn=Gt.match(/\s|\//),ir=ne.match(/\s|\//);if(Dn||ir){const or=[`Unable to register library "${Gt}" with version "${ne}":`];return Dn&&or.push(`library name "${Gt}" contains illegal characters (whitespace or "/")`),Dn&&ir&&or.push("and"),ir&&or.push(`version name "${ne}" contains illegal characters (whitespace or "/")`),void ae.warn(or.join(" "))}xr(new be.wA(`${Gt}-version`,()=>({library:Gt,version:ne}),"VERSION"))}function Ir(Ie,ne){if(null!==Ie&&"function"!=typeof Ie)throw ti.create("invalid-log-argument");(0,Q.Am)(Ie,ne)}function Da(Ie){(0,Q.Ub)(Ie)}const Rr="firebase-heartbeat-store";let Ks=null;function ls(){return Ks||(Ks=(0,xe.X3)("firebase-heartbeat-database",1,{upgrade:(Ie,ne)=>{0===ne&&Ie.createObjectStore(Rr)}}).catch(Ie=>{throw ti.create("storage-open",{originalErrorMessage:Ie.message})})),Ks}function rn(){return(rn=(0,D.Z)(function*(Ie){var ne;try{return(yield ls()).transaction(Rr).objectStore(Rr).get(Hi(Ie))}catch(nt){throw ti.create("storage-get",{originalErrorMessage:null===(ne=nt)||void 0===ne?void 0:ne.message})}})).apply(this,arguments)}function vn(Ie,ne){return wi.apply(this,arguments)}function wi(){return(wi=(0,D.Z)(function*(Ie,ne){var nt;try{const Gt=(yield ls()).transaction(Rr,"readwrite");return yield Gt.objectStore(Rr).put(ne,Hi(Ie)),Gt.done}catch(It){throw ti.create("storage-set",{originalErrorMessage:null===(nt=It)||void 0===nt?void 0:nt.message})}})).apply(this,arguments)}function Hi(Ie){return`${Ie.name}!${Ie.options.appId}`}class Mi{constructor(ne){this.container=ne,this._heartbeatsCache=null;const nt=this.container.getProvider("app").getImmediate();this._storage=new ve(nt),this._heartbeatsCachePromise=this._storage.read().then(It=>(this._heartbeatsCache=It,It))}triggerHeartbeat(){var ne=this;return(0,D.Z)(function*(){const It=ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Gt=ui();if(null===ne._heartbeatsCache&&(ne._heartbeatsCache=yield ne._heartbeatsCachePromise),ne._heartbeatsCache.lastSentHeartbeatDate!==Gt&&!ne._heartbeatsCache.heartbeats.some(Dn=>Dn.date===Gt))return ne._heartbeatsCache.heartbeats.push({date:Gt,agent:It}),ne._heartbeatsCache.heartbeats=ne._heartbeatsCache.heartbeats.filter(Dn=>{const ir=new Date(Dn.date).valueOf();return Date.now()-ir<=2592e6}),ne._storage.overwrite(ne._heartbeatsCache)})()}getHeartbeatsHeader(){var ne=this;return(0,D.Z)(function*(){if(null===ne._heartbeatsCache&&(yield ne._heartbeatsCachePromise),null===ne._heartbeatsCache||0===ne._heartbeatsCache.heartbeats.length)return"";const nt=ui(),{heartbeatsToSend:It,unsentEntries:Gt}=function sn(Ie,ne=1024){const nt=[];let It=Ie.slice();for(const Gt of Ie){const Dn=nt.find(ir=>ir.agent===Gt.agent);if(Dn){if(Dn.dates.push(Gt.date),se(nt)>ne){Dn.dates.pop();break}}else if(nt.push({agent:Gt.agent,dates:[Gt.date]}),se(nt)>ne){nt.pop();break}It=It.slice(1)}return{heartbeatsToSend:nt,unsentEntries:It}}(ne._heartbeatsCache.heartbeats),Dn=(0,Ue.L)(JSON.stringify({version:2,heartbeats:It}));return ne._heartbeatsCache.lastSentHeartbeatDate=nt,Gt.length>0?(ne._heartbeatsCache.heartbeats=Gt,yield ne._storage.overwrite(ne._heartbeatsCache)):(ne._heartbeatsCache.heartbeats=[],ne._storage.overwrite(ne._heartbeatsCache)),Dn})()}}function ui(){return(new Date).toISOString().substring(0,10)}class ve{constructor(ne){this.app=ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.Z)(function*(){return!!(0,Ue.hl)()&&(0,Ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ne=this;return(0,D.Z)(function*(){return(yield ne._canUseIndexedDBPromise)&&(yield function Wn(Ie){return rn.apply(this,arguments)}(ne.app))||{heartbeats:[]}})()}overwrite(ne){var nt=this;return(0,D.Z)(function*(){var It;if(yield nt._canUseIndexedDBPromise){const Dn=yield nt.read();return vn(nt.app,{lastSentHeartbeatDate:null!==(It=ne.lastSentHeartbeatDate)&&void 0!==It?It:Dn.lastSentHeartbeatDate,heartbeats:ne.heartbeats})}})()}add(ne){var nt=this;return(0,D.Z)(function*(){var It;if(yield nt._canUseIndexedDBPromise){const Dn=yield nt.read();return vn(nt.app,{lastSentHeartbeatDate:null!==(It=ne.lastSentHeartbeatDate)&&void 0!==It?It:Dn.lastSentHeartbeatDate,heartbeats:[...Dn.heartbeats,...ne.heartbeats]})}})()}}function se(Ie){return(0,Ue.L)(JSON.stringify({version:2,heartbeats:Ie})).length}!function Ee(Ie){xr(new be.wA("platform-logger",ne=>new Be(ne),"PRIVATE")),xr(new be.wA("heartbeat",ne=>new Mi(ne),"PRIVATE")),Mr(Le,"0.7.27",Ie),Mr(Le,"0.7.27","esm2017"),Mr("fire-js","")}("")},4859:(jt,et,M)=>{"use strict";M.d(et,{H0:()=>Le,wA:()=>Q});var D=M(5861),be=M(2090);class Q{constructor(ae,ue,ye){this.name=ae,this.instanceFactory=ue,this.type=ye,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ae){return this.instantiationMode=ae,this}setMultipleInstances(ae){return this.multipleInstances=ae,this}setServiceProps(ae){return this.serviceProps=ae,this}setInstanceCreatedCallback(ae){return this.onInstanceCreated=ae,this}}const Ue="[DEFAULT]";class xe{constructor(ae,ue){this.name=ae,this.container=ue,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ae){const ue=this.normalizeInstanceIdentifier(ae);if(!this.instancesDeferred.has(ue)){const ye=new be.BH;if(this.instancesDeferred.set(ue,ye),this.isInitialized(ue)||this.shouldAutoInitialize())try{const Rt=this.getOrInitializeService({instanceIdentifier:ue});Rt&&ye.resolve(Rt)}catch(Rt){}}return this.instancesDeferred.get(ue).promise}getImmediate(ae){var ue;const ye=this.normalizeInstanceIdentifier(null==ae?void 0:ae.identifier),Rt=null!==(ue=null==ae?void 0:ae.optional)&&void 0!==ue&&ue;if(!this.isInitialized(ye)&&!this.shouldAutoInitialize()){if(Rt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ye})}catch(ot){if(Rt)return null;throw ot}}getComponent(){return this.component}setComponent(ae){if(ae.name!==this.name)throw Error(`Mismatching Component ${ae.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ae,this.shouldAutoInitialize()){if(function Ve(Fe){return"EAGER"===Fe.instantiationMode}(ae))try{this.getOrInitializeService({instanceIdentifier:Ue})}catch(ue){}for(const[ue,ye]of this.instancesDeferred.entries()){const Rt=this.normalizeInstanceIdentifier(ue);try{const ot=this.getOrInitializeService({instanceIdentifier:Rt});ye.resolve(ot)}catch(ot){}}}}clearInstance(ae=Ue){this.instancesDeferred.delete(ae),this.instancesOptions.delete(ae),this.instances.delete(ae)}delete(){var ae=this;return(0,D.Z)(function*(){const ue=Array.from(ae.instances.values());yield Promise.all([...ue.filter(ye=>"INTERNAL"in ye).map(ye=>ye.INTERNAL.delete()),...ue.filter(ye=>"_delete"in ye).map(ye=>ye._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ae=Ue){return this.instances.has(ae)}getOptions(ae=Ue){return this.instancesOptions.get(ae)||{}}initialize(ae={}){const{options:ue={}}=ae,ye=this.normalizeInstanceIdentifier(ae.instanceIdentifier);if(this.isInitialized(ye))throw Error(`${this.name}(${ye}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Rt=this.getOrInitializeService({instanceIdentifier:ye,options:ue});for(const[ot,Qe]of this.instancesDeferred.entries())ye===this.normalizeInstanceIdentifier(ot)&&Qe.resolve(Rt);return Rt}onInit(ae,ue){var ye;const Rt=this.normalizeInstanceIdentifier(ue),ot=null!==(ye=this.onInitCallbacks.get(Rt))&&void 0!==ye?ye:new Set;ot.add(ae),this.onInitCallbacks.set(Rt,ot);const Qe=this.instances.get(Rt);return Qe&&ae(Qe,Rt),()=>{ot.delete(ae)}}invokeOnInitCallbacks(ae,ue){const ye=this.onInitCallbacks.get(ue);if(ye)for(const Rt of ye)try{Rt(ae,ue)}catch(ot){}}getOrInitializeService({instanceIdentifier:ae,options:ue={}}){let ye=this.instances.get(ae);if(!ye&&this.component&&(ye=this.component.instanceFactory(this.container,{instanceIdentifier:(Fe=ae,Fe===Ue?void 0:Fe),options:ue}),this.instances.set(ae,ye),this.instancesOptions.set(ae,ue),this.invokeOnInitCallbacks(ye,ae),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ae,ye)}catch(Rt){}var Fe;return ye||null}normalizeInstanceIdentifier(ae=Ue){return this.component?this.component.multipleInstances?ae:Ue:ae}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Le{constructor(ae){this.name=ae,this.providers=new Map}addComponent(ae){const ue=this.getProvider(ae.name);if(ue.isComponentSet())throw new Error(`Component ${ae.name} has already been registered with ${this.name}`);ue.setComponent(ae)}addOrOverwriteComponent(ae){this.getProvider(ae.name).isComponentSet()&&this.providers.delete(ae.name),this.addComponent(ae)}getProvider(ae){if(this.providers.has(ae))return this.providers.get(ae);const ue=new xe(ae,this);return this.providers.set(ae,ue),ue}getProviders(){return Array.from(this.providers.values())}}},1877:(jt,et,M)=>{"use strict";M.d(et,{Am:()=>Fe,Ub:()=>Le,Yd:()=>Ve,in:()=>be});const D=[];var be=(()=>{return(ae=be||(be={}))[ae.DEBUG=0]="DEBUG",ae[ae.VERBOSE=1]="VERBOSE",ae[ae.INFO=2]="INFO",ae[ae.WARN=3]="WARN",ae[ae.ERROR=4]="ERROR",ae[ae.SILENT=5]="SILENT",be;var ae})();const Q={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},Ue=be.INFO,xe={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},Be=(ae,ue,...ye)=>{if(ue<ae.logLevel)return;const Rt=(new Date).toISOString(),ot=xe[ue];if(!ot)throw new Error(`Attempted to log a message with an invalid logType (value: ${ue})`);console[ot](`[${Rt}]  ${ae.name}:`,...ye)};class Ve{constructor(ue){this.name=ue,this._logLevel=Ue,this._logHandler=Be,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(ue){if(!(ue in be))throw new TypeError(`Invalid value "${ue}" assigned to \`logLevel\``);this._logLevel=ue}setLogLevel(ue){this._logLevel="string"==typeof ue?Q[ue]:ue}get logHandler(){return this._logHandler}set logHandler(ue){if("function"!=typeof ue)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ue}get userLogHandler(){return this._userLogHandler}set userLogHandler(ue){this._userLogHandler=ue}debug(...ue){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...ue),this._logHandler(this,be.DEBUG,...ue)}log(...ue){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...ue),this._logHandler(this,be.VERBOSE,...ue)}info(...ue){this._userLogHandler&&this._userLogHandler(this,be.INFO,...ue),this._logHandler(this,be.INFO,...ue)}warn(...ue){this._userLogHandler&&this._userLogHandler(this,be.WARN,...ue),this._logHandler(this,be.WARN,...ue)}error(...ue){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...ue),this._logHandler(this,be.ERROR,...ue)}}function Le(ae){D.forEach(ue=>{ue.setLogLevel(ae)})}function Fe(ae,ue){for(const ye of D){let Rt=null;ue&&ue.level&&(Rt=Q[ue.level]),ye.userLogHandler=null===ae?null:(ot,Qe,...Et)=>{const ge=Et.map(Me=>{if(null==Me)return null;if("string"==typeof Me)return Me;if("number"==typeof Me||"boolean"==typeof Me)return Me.toString();if(Me instanceof Error)return Me.message;try{return JSON.stringify(Me)}catch(ht){return null}}).filter(Me=>Me).join(" ");Qe>=(null!=Rt?Rt:ot.logLevel)&&ae({level:be[Qe].toLowerCase(),message:ge,args:Et,type:ot.name})}}}},8766:(jt,et,M)=>{"use strict";M.d(et,{Lj:()=>We,X3:()=>bt});var D=M(5861);let Q,Ue;const Ve=new WeakMap,Le=new WeakMap,Fe=new WeakMap,ae=new WeakMap,ue=new WeakMap;let ot={get(ce,Ze,fe){if(ce instanceof IDBTransaction){if("done"===Ze)return Le.get(ce);if("objectStoreNames"===Ze)return ce.objectStoreNames||Fe.get(ce);if("store"===Ze)return fe.objectStoreNames[1]?void 0:fe.objectStore(fe.objectStoreNames[0])}return Me(ce[Ze])},set:(ce,Ze,fe)=>(ce[Ze]=fe,!0),has:(ce,Ze)=>ce instanceof IDBTransaction&&("done"===Ze||"store"===Ze)||Ze in ce};function ge(ce){return"function"==typeof ce?function Et(ce){return ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Be(){return Ue||(Ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ce)?function(...Ze){return ce.apply(ht(this),Ze),Me(Ve.get(this))}:function(...Ze){return Me(ce.apply(ht(this),Ze))}:function(Ze,...fe){const Re=ce.call(ht(this),Ze,...fe);return Fe.set(Re,Ze.sort?Ze.sort():[Ze]),Me(Re)}}(ce):(ce instanceof IDBTransaction&&function Rt(ce){if(Le.has(ce))return;const Ze=new Promise((fe,Re)=>{const Te=()=>{ce.removeEventListener("complete",Ye),ce.removeEventListener("error",Ne),ce.removeEventListener("abort",Ne)},Ye=()=>{fe(),Te()},Ne=()=>{Re(ce.error||new DOMException("AbortError","AbortError")),Te()};ce.addEventListener("complete",Ye),ce.addEventListener("error",Ne),ce.addEventListener("abort",Ne)});Le.set(ce,Ze)}(ce),((ce,Ze)=>Ze.some(fe=>ce instanceof fe))(ce,function xe(){return Q||(Q=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ce,ot):ce)}function Me(ce){if(ce instanceof IDBRequest)return function ye(ce){const Ze=new Promise((fe,Re)=>{const Te=()=>{ce.removeEventListener("success",Ye),ce.removeEventListener("error",Ne)},Ye=()=>{fe(Me(ce.result)),Te()},Ne=()=>{Re(ce.error),Te()};ce.addEventListener("success",Ye),ce.addEventListener("error",Ne)});return Ze.then(fe=>{fe instanceof IDBCursor&&Ve.set(fe,ce)}).catch(()=>{}),ue.set(Ze,ce),Ze}(ce);if(ae.has(ce))return ae.get(ce);const Ze=ge(ce);return Ze!==ce&&(ae.set(ce,Ze),ue.set(Ze,ce)),Ze}const ht=ce=>ue.get(ce);function bt(ce,Ze,{blocked:fe,upgrade:Re,blocking:Te,terminated:Ye}={}){const Ne=indexedDB.open(ce,Ze),dt=Me(Ne);return Re&&Ne.addEventListener("upgradeneeded",Wt=>{Re(Me(Ne.result),Wt.oldVersion,Wt.newVersion,Me(Ne.transaction))}),fe&&Ne.addEventListener("blocked",()=>fe()),dt.then(Wt=>{Ye&&Wt.addEventListener("close",()=>Ye()),Te&&Wt.addEventListener("versionchange",()=>Te())}).catch(()=>{}),dt}function We(ce,{blocked:Ze}={}){const fe=indexedDB.deleteDatabase(ce);return Ze&&fe.addEventListener("blocked",()=>Ze()),Me(fe).then(()=>{})}const Ke=["get","getKey","getAll","getAllKeys","count"],Xe=["put","add","delete","clear"],ut=new Map;function vt(ce,Ze){if(!(ce instanceof IDBDatabase)||Ze in ce||"string"!=typeof Ze)return;if(ut.get(Ze))return ut.get(Ze);const fe=Ze.replace(/FromIndex$/,""),Re=Ze!==fe,Te=Xe.includes(fe);if(!(fe in(Re?IDBIndex:IDBObjectStore).prototype)||!Te&&!Ke.includes(fe))return;const Ye=function(){var Ne=(0,D.Z)(function*(dt,...Wt){const at=this.transaction(dt,Te?"readwrite":"readonly");let Jt=at.store;return Re&&(Jt=Jt.index(Wt.shift())),(yield Promise.all([Jt[fe](...Wt),Te&&at.done]))[0]});return function(Wt){return Ne.apply(this,arguments)}}();return ut.set(Ze,Ye),Ye}!function Qe(ce){ot=ce(ot)}(ce=>cM(uM({},ce),{get:(Ze,fe,Re)=>vt(Ze,fe)||ce.get(Ze,fe,Re),has:(Ze,fe)=>!!vt(Ze,fe)||ce.has(Ze,fe)}))},5861:(jt,et,M)=>{"use strict";function D(Q,Ue,xe,Be,Ve,Le,Fe){try{var ae=Q[Le](Fe),ue=ae.value}catch(ye){return void xe(ye)}ae.done?Ue(ue):Promise.resolve(ue).then(Be,Ve)}function be(Q){return function(){var Ue=this,xe=arguments;return new Promise(function(Be,Ve){var Le=Q.apply(Ue,xe);function Fe(ue){D(Le,Be,Ve,Fe,ae,"next",ue)}function ae(ue){D(Le,Be,Ve,Fe,ae,"throw",ue)}Fe(void 0)})}}M.d(et,{Z:()=>be})}},jt=>{jt(jt.s=9889)}]);